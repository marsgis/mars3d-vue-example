!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).screenShotPlugin=e()}(this,(function(){"use strict";var t=function(){return t=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},t.apply(this,arguments)};function e(t,e,o,n){return new(o||(o=Promise))((function(r,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function l(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,l)}s((n=n.apply(t,e||[])).next())}))}function o(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(s){return function(l){if(o)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(a=0)),a;)try{if(o=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){a.label=l[1];break}if(6===l[0]&&a.label<r[1]){a.label=r[1],r=l;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(l);break}r[2]&&a.ops.pop(),a.trys.pop();continue}l=e.call(t,a)}catch(t){l=[6,t],n=0}finally{o=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}"function"==typeof SuppressedError&&SuppressedError;var n=[{id:1,title:"square"},{id:2,title:"round"},{id:3,title:"right-top"},{id:4,title:"brush"},{id:5,title:"mosaicPen"},{id:6,title:"text"},{id:7,title:"separateLine"},{id:8,title:"save"},{id:9,title:"undo"},{id:10,title:"close"},{id:11,title:"confirm"}];function r(t,e,o){var n=function(t){var e="";switch(t){case 1:e="square-active";break;case 2:e="round-active";break;case 3:e="right-top-active";break;case 4:e="brush-active";break;case 5:e="mosaicPen-active";break;case 6:e="text-active"}return e}(e);o&&(n=function(t){var e="";switch(t){case 1:e="brush-small-active";break;case 2:e="brush-medium-active";break;case 3:e="brush-big-active"}return e}(e));for(var r=(t.path||t.composedPath&&t.composedPath())[1].children,i=0;i<r.length;i++){var a=r[i];if(Number(a.getAttribute("data-id"))>100&&e!==Number.MAX_VALUE){console.log("reset icon");var l=a.getAttribute("data-icon");a.style.backgroundImage="url(".concat(l,")")}a.className.includes("active")&&a.classList.remove(a.classList[2])}n&&(t.target.className+=" "+n)}function i(){var t,e=new st;e.popHistory();var o=null===(t=e.getScreenShotContainer())||void 0===t?void 0:t.getContext("2d");null!=o&&e.getHistory().length>0&&o.putImageData(e.getHistory()[e.getHistory().length-1].data,0,0),e.setUndoClickNum(e.getUndoClickNum()+1),e.getHistory().length-1<=0&&(e.setUndoClickNum(0),e.setUndoStatus(!1))}function a(t,e,o){void 0===o&&(o=document.body);var n=o.getBoundingClientRect();return{left:t||Math.abs(n.left),top:e||Math.abs(n.top)}}var l,s=!0,c=null,u=!1,d=0,h=0,A=!1,g=null,p=!0,m={r:0,g:0,b:0,a:.6},f=!0,S="#2CABFF",C=15,w=!1,v=!1,y=!1,b={w:0,h:0},x=[],I=null,B=null,E=null,P=null,k=function(){function e(){u&&(s=!0,d=0,h=0,S="#2CABFF",A=!1,f=!0,c=null,u=!1,g=null,B=null,C=15,w=!1,v=!1,E=null,p=!0,x=[],I=null)}return e.prototype.setInitStatus=function(t){u=t},e.prototype.getInitStatus=function(){return u},e.prototype.getWebRtcStatus=function(){return s},e.prototype.setWebRtcStatus=function(t){s=t},e.prototype.setScreenShotDom=function(t){g=t},e.prototype.getCutBoxBdColor=function(){return S},e.prototype.setCutBoxBdColor=function(t){S=t},e.prototype.getScreenShotDom=function(){return g},e.prototype.getScreenFlow=function(){return c},e.prototype.setScreenFlow=function(t){c=t},e.prototype.getCanvasSize=function(){return{canvasWidth:d,canvasHeight:h}},e.prototype.setCanvasSize=function(t,e){d=t,h=e},e.prototype.getShowScreenDataStatus=function(){return A},e.prototype.setShowScreenDataStatus=function(t){A=t},e.prototype.setMaskColor=function(t){m.r=t.r,m.g=t.g,m.b=t.b,m.a=t.a},e.prototype.getMaskColor=function(){return m},e.prototype.setWriteImgState=function(t){f=t},e.prototype.getWriteImgState=function(){return f},e.prototype.setSaveCallback=function(t){B=t},e.prototype.getSaveCallback=function(){return B},e.prototype.setMaxUndoNum=function(t){C=t},e.prototype.getMaxUndoNum=function(){return C},e.prototype.setRatioArrow=function(t){w=t},e.prototype.getRatioArrow=function(){return w},e.prototype.setImgAutoFit=function(t){v=t},e.prototype.getImgAutoFit=function(){return v},e.prototype.setUseCustomImgSize=function(t,e){t&&e&&(y=!0,b=e)},e.prototype.getCustomImgSize=function(){return{useCustomImgSize:y,customImgSize:b}},e.prototype.setSaveImgTitle=function(t){E=t},e.prototype.getSaveImgTitle=function(){return E},e.prototype.setDestroyContainerState=function(t){p=t},e.prototype.getDestroyContainerState=function(){return p},e.prototype.setUserToolbar=function(e){for(var o=[],n=0;n<e.length;n++){var r=e[n];o.push(t(t({},r),{id:100+(n+1)}))}x=o},e.prototype.getUserToolbar=function(){return x},e.prototype.setH2cCrossImgLoadErrFn=function(t){I=t},e.prototype.getH2cCrossImgLoadErrFn=function(){return I},e.prototype.setCanvasEvents=function(t){P=t},e.prototype.getCanvasEvents=function(){return P},e}(),R=!1,T=!1,F=!1,D="#F53340",U="",N=null,X=2,O=10,z=0,Y=[],M=!1,Q={startX:0,startY:0,width:0,height:0},L=null,G=null,H=null,J=null,K=null,W=null,V=null,Z=null,j=17,q=null,$=null,_=null,tt=null,et=null,ot=null,nt=!1,rt=!1,it="",at=!1,lt=!1,st=function(){function t(){rt&&(rt=!1,L=null,T=!1,G=null,J=null,q=null,K=null,W=null,V=null,Z=null,H=null,Q={startX:0,startY:0,width:0,height:0},F=!1,at=!1,lt=!1,M=!1,D="#F53340",U="",N=null,X=2,j=17,O=10,Y=[],z=0,$=null,_=null,tt=null,et=null)}return t.prototype.setInitStatus=function(t){rt=t},t.prototype.setScreenShotInfo=function(t,e){this.getScreenShotContainer(),null!=L&&(nt&&document.body.classList.add("__screenshot-lock-scroll"),L.width=t,L.height=e)},t.prototype.setScreenShotPosition=function(t,e){if(this.getScreenShotContainer(),null!=L){var o=a(t,e),n=o.left,r=o.top;L.style.left=n+"px",L.style.top=r+"px"}},t.prototype.showScreenShotPanel=function(){this.getScreenShotContainer(),null!=L&&(L.style.display="block")},t.prototype.getScreenShotContainer=function(){return L=document.getElementById("screenShotContainer")},t.prototype.getToolController=function(){return G=document.getElementById("toolPanel")},t.prototype.getCutBoxSizeContainer=function(){return H=document.getElementById("cutBoxSizePanel")},t.prototype.getTextInputController=function(){return J=document.getElementById("textInputPanel")},t.prototype.getTextStatus=function(){return false},t.prototype.getScreenShotImageController=function(){return ot},t.prototype.setScreenShotImageController=function(t){ot=t},t.prototype.setToolStatus=function(t){G=this.getToolController(),G.style.display=t?"block":"none"},t.prototype.setCutBoxSizeStatus=function(t){null!=H&&(H.style.display=t?"flex":"none")},t.prototype.setCutBoxSizePosition=function(t,e){if(null!=H){var o=a(t,e),n=o.left,r=o.top;H.style.left=n+"px";var i=0;L&&(i=parseInt(L.style.top)),H.style.top=r+i+"px"}},t.prototype.setTextEditState=function(t){lt=t},t.prototype.getTextEditState=function(){return lt},t.prototype.setCutBoxSize=function(t,e){if(null!=H){t=Math.floor(t),e=Math.floor(e);var o=H.childNodes;if(o.length>0)o[0].innerText="".concat(t," * ").concat(e);else{var n=document.createElement("p");n.innerText="".concat(t," * ").concat(e),H.appendChild(n)}}},t.prototype.setTextStatus=function(t){null!=(J=this.getTextInputController())&&(J.style.display=t?"block":"none")},t.prototype.setToolInfo=function(t,e){G=document.getElementById("toolPanel");var o=a(t,e),n=o.left,r=o.top;G.style.left=n+"px";var i=0;L&&(i=parseInt(L.style.top)),G.style.top=r+i+"px"},t.prototype.getToolClickStatus=function(){return F},t.prototype.setToolClickStatus=function(t){F=t},t.prototype.setResetScrollbarState=function(t){at=t},t.prototype.getResetScrollbarState=function(){return at},t.prototype.getCutOutBoxPosition=function(){return Q},t.prototype.getDragging=function(){return T},t.prototype.setDragging=function(t){T=t},t.prototype.getDraggingTrim=function(){return R},t.prototype.getToolPositionStatus=function(){return M},t.prototype.setToolPositionStatus=function(t){M=t},t.prototype.setDraggingTrim=function(t){R=t},t.prototype.setCutOutBoxPosition=function(t,e,o,n){Q.startX=t,Q.startY=e,Q.width=o,Q.height=n},t.prototype.setFontSize=function(t){j=t},t.prototype.setOptionStatus=function(t){if(K=this.getOptionIcoController(),q=this.getOptionController(),null!=K&&null!=q){if(t)return K.style.display="block",void(q.style.display="block");K.style.display="none",q.style.display="none"}},t.prototype.getFontSize=function(){return j},t.prototype.setTextSizeOptionStatus=function(t){null!=(W=this.getOptionTextSizeController())&&(W.style.display=t?"flex":"none")},t.prototype.setTextSizePanelStatus=function(t){if(null!=(Z=this.getTextSizeContainer()))return t?(console.log("显示"),void(Z.style.display="flex")):void(Z.style.display="none")},t.prototype.setBrushSelectionStatus=function(t){null!=(V=this.getBrushSelectionController())&&(V.style.display=t?"block":"none")},t.prototype.hiddenOptionIcoStatus=function(){null!=(K=this.getOptionIcoController())&&(K.style.display="none")},t.prototype.getOptionIcoController=function(){return K=document.getElementById("optionIcoController")},t.prototype.getTextSizeContainer=function(){return Z=document.getElementById("textSizePanel")},t.prototype.getOptionTextSizeController=function(){return W=document.getElementById("textSelectPanel")},t.prototype.getBrushSelectionController=function(){return V=document.getElementById("brushSelectPanel")},t.prototype.getOptionController=function(){return q=document.getElementById("optionPanel")},t.prototype.setOptionPosition=function(t){if(K=this.getOptionIcoController(),q=this.getOptionController(),null!=K&&null!=q){var e=this.getToolPosition();if(null!=e){var o=e.left+t+"px",n=e.top+44+"px",r=e.left+"px",i=e.top+44+6+"px";K.style.left=o,K.style.top=n,q.style.left=r,q.style.top=i}}},t.prototype.getToolPosition=function(){if(null!=(G=this.getToolController()))return{left:G.offsetLeft,top:G.offsetTop}},t.prototype.getSelectedColor=function(){return D},t.prototype.setSelectedColor=function(t){D=t,null!=(tt=this.getColorSelectPanel())&&(tt.style.backgroundColor=D)},t.prototype.getColorSelectPanel=function(){return tt=document.getElementById("colorSelectPanel")},t.prototype.getToolName=function(){return U},t.prototype.setToolName=function(t){U=t},t.prototype.getToolId=function(){return N},t.prototype.setToolId=function(t){N=t},t.prototype.getPenSize=function(){return X},t.prototype.setPenSize=function(t){X=t},t.prototype.getMosaicPenSize=function(){return O},t.prototype.setMosaicPenSize=function(t){O=t},t.prototype.getBorderSize=function(){return 10},t.prototype.getHistory=function(){return Y},t.prototype.shiftHistory=function(){return Y.shift()},t.prototype.popHistory=function(){return Y.pop()},t.prototype.pushHistory=function(t){Y.push(t)},t.prototype.getUndoClickNum=function(){return z},t.prototype.setUndoClickNum=function(t){z=t},t.prototype.getColorPanel=function(){return $=document.getElementById("colorPanel")},t.prototype.setColorPanelStatus=function(t){null!=($=this.getColorPanel())&&($.style.display=t?"flex":"none")},t.prototype.getNoScrollStatus=function(){return nt},t.prototype.setNoScrollStatus=function(t){null!=t&&(nt=t)},t.prototype.setActiveToolName=function(t){it=t},t.prototype.getActiveToolName=function(){return it},t.prototype.setTextInfo=function(t){l=t},t.prototype.getTextInfo=function(){return l},t.prototype.getRightPanel=function(){return _=document.getElementById("rightPanel")},t.prototype.setRightPanel=function(t){null!=(_=this.getRightPanel())&&(_.style.display=t?"flex":"none")},t.prototype.setUndoStatus=function(t){if(null!=(et=this.getUndoController())){if(t)return et.classList.add("undo"),et.classList.remove("undo-disabled"),void et.addEventListener("click",this.cancelEvent);et.classList.add("undo-disabled"),et.classList.remove("undo"),et.removeEventListener("click",this.cancelEvent)}},t.prototype.cancelEvent=function(){i()},t.prototype.getUndoController=function(){return et=document.getElementById("undoPanel")},t.prototype.destroyDOM=function(){if(null!=L&&null!=G&&null!=K&&null!=q&&null!=J&&null!=H){var t=new k;nt&&document.body.classList.remove("__screenshot-lock-scroll"),document.body.removeChild(L),document.body.removeChild(G),document.body.removeChild(K),document.body.removeChild(q),document.body.removeChild(J),document.body.removeChild(H),document.body.classList.contains("no-cursor")&&document.body.classList.remove("no-cursor"),at&&(document.documentElement.classList.remove("hidden-screen-shot-scroll"),document.body.classList.remove("hidden-screen-shot-scroll")),t.setInitStatus(!0)}},t}();function ct(t,e,o){var n=window.devicePixelRatio||1;t.width=Math.round(e*n),t.height=Math.round(o*n),t.style.width=e+"px",t.style.height=o+"px";var r=t.getContext("2d");return r&&r.scale(n,n),r}function ut(t){var e,o=new st,n=new k,r=null===(e=o.getScreenShotContainer())||void 0===e?void 0:e.getContext("2d"),i=o.getCutOutBoxPosition(),a=i.startX,l=i.startY,s=i.width,c=i.height,u="";return r&&(t?function(t,e,o,n,r){var i=new k,a=window.devicePixelRatio||1,l=t.getImageData(e*a,o*a,n*a,r*a),s=document.createElement("canvas"),c=ct(s,n,r);if(c){c.putImageData(l,0,0);var u=document.createElement("a");u.href=s.toDataURL("png");var d=(null==i?void 0:i.getSaveImgTitle())||(new Date).getTime();u.download="".concat(d,".png"),u.click()}}(r,a,l,s,c):u=function(t,e,o,n,r,i,a){void 0===i&&(i=.75),void 0===a&&(a=!0);var l=window.devicePixelRatio||1,s=t.getImageData(e*l,o*l,n*l,r*l),c=document.createElement("canvas"),u=ct(c,n,r);return u?(u.putImageData(s,0,0),a&&(null==c||c.toBlob((function(t){var e,o;if(null!=t){var n=window.ClipboardItem;if(null==n)return c.toDataURL("png");var r=new n(((e={})[t.type]=t,e));null===(o=navigator.clipboard)||void 0===o||o.write([r]).then((function(){return"写入成功"}))}}),"image/png",i)),c.toDataURL("png")):""}(r,a,l,s,c,.75,n.getWriteImgState())),u}function dt(t,e,o,n,r,i,a,l,s){void 0===s&&(s=!0);var c=null==a?void 0:a.width,u=null==a?void 0:a.height,d=window.devicePixelRatio||1,h=new k;if(c&&u&&l&&a){r.clearRect(0,0,c,u),o=0!=o?o:5,n=0!=n?n:5,r.save();var A=h.getMaskColor();if(r.fillStyle="rgba(0, 0, 0, .6)",A&&(r.fillStyle="rgba(".concat(A.r,", ").concat(A.g,", ").concat(A.b,", ").concat(A.a,")")),r.fillRect(0,0,c,u),r.globalCompositeOperation="source-atop",r.clearRect(t,e,o,n),r.globalCompositeOperation="source-over",r.fillStyle=h.getCutBoxBdColor(),s){var g=i;r.fillRect(t-g/2,e-g/2,g,g),r.fillRect(t-g/2+o/2,e-g/2,g,g),r.fillRect(t-g/2+o,e-g/2,g,g),r.fillRect(t-g/2,e-g/2+n/2,g,g),r.fillRect(t-g/2+o,e-g/2+n/2,g,g),r.fillRect(t-g/2,e-g/2+n,g,g),r.fillRect(t-g/2+o/2,e-g/2+n,g,g),r.fillRect(t-g/2+o,e-g/2+n,g,g)}r.restore(),r.save(),r.globalCompositeOperation="destination-over";var p={imgWidth:parseInt(null==a?void 0:a.style.width),imgHeight:parseInt(null==a?void 0:a.style.height)},m=p.imgWidth,f=p.imgHeight,S=h.getScreenShotDom();if(null!=S&&(m=S.clientWidth,f=S.clientHeight),h.getCustomImgSize().useCustomImgSize){var C=h.getCustomImgSize().customImgSize;m=C.w,f=C.h}return h.getWebRtcStatus()||h.getImgAutoFit()||h.getCustomImgSize().useCustomImgSize||null!=S||(m=l.width/d,f=l.height/d),r.drawImage(l,0,0,m,f),r.restore(),o>0&&n>0?{startX:t,startY:e,width:o,height:n}:o<0&&n<0?{startX:t+o,startY:e+n,width:Math.abs(o),height:Math.abs(n)}:o>0&&n<0?{startX:t,startY:e+n,width:o,height:Math.abs(n)}:o<0&&n>0?{startX:t+o,startY:e,width:Math.abs(o),height:n}:{startX:t,startY:e,width:o,height:n}}}function ht(t,e,o,n,r,i){i.save(),i.lineWidth=1,i.fillStyle=n,i.textBaseline="middle",i.font="bold ".concat(r,"px none");var a=t.split("\n");console.log(a);var l=1.4*r;a.forEach((function(t,n){var r=o+l*n;i.fillText(t,e,r)})),i.restore()}function At(){var t=new st,e=new k,o=t.getScreenShotContainer();if(null!=o){var n=o.getContext("2d"),r=o;t.getHistory().length>e.getMaxUndoNum()&&t.shiftHistory(),t.pushHistory({data:n.getImageData(0,0,r.width,r.height)}),t.setUndoStatus(!0)}}function gt(t){var e=new st;t.putImageData(e.getHistory()[e.getHistory().length-1].data,0,0)}function pt(){var t=new st,e=t.getTextInputController(),o=t.getScreenShotContainer(),n=t.getScreenShotImageController();if(null==o||null==n)return null;var r=o.getContext("2d");return{textInputController:e,screenShotController:o,ScreenShotImageController:n,screenShotCanvas:r}}function mt(t,e){var o=new st,n=o.getTextInputController();if(null!=n&&o.getTextStatus()||null!=n&&"text"!==t){var r=n.innerText;if(r&&""!==r){var i=o.getTextInfo();ht(r,i.positionX,i.positionY,i.color,i.size,e),At()}n.innerHTML="",o.setTextStatus(!1)}}function ft(t,e,o){var n,r,i=new st,a=(null===(n=i.getToolPosition())||void 0===n?void 0:n.left)||0,l=(null===(r=i.getToolPosition())||void 0===r?void 0:r.top)||0;l&&i.getToolPositionStatus()&&i.setToolInfo(a,l-46),i.setToolStatus(!0);var s=i.getCutOutBoxPosition();dt(s.startX,s.startY,s.width,s.height,t,i.getBorderSize(),e,o,!1)}function St(t,e,o){var n=new st;r(o,e,!0);var i=2;switch(t){case"small":i=2;break;case"medium":i=5;break;case"big":i=10}return n.setPenSize(i),i}function Ct(t,e,o){var n=new st;r(o,e,!0);var i=10;switch(t){case"small":i=10;break;case"medium":i=20;break;case"big":i=40}return n.setMosaicPenSize(i),i}function wt(){(new st).setColorPanelStatus(!0)}var vt=function(){function t(t){var e;this.textFontSizeList=[12,13,14,15,16,17,20,24,36,48,64,72,96];var o=new k;if(this.screenShotController=document.createElement("canvas"),this.toolController=document.createElement("div"),this.optionIcoController=document.createElement("div"),this.optionController=document.createElement("div"),this.cutBoxSizeContainer=document.createElement("div"),this.textInputController=document.createElement("div"),this.completeCallback=null==t?void 0:t.completeCallback,this.closeCallback=null==t?void 0:t.closeCallback,this.hiddenIcoArr=[],this.toolbar=Object.assign([],n),this.data=new st,this.optionController.addEventListener("click",(function(t){var e=t.target;"colorSelectPanel"!==e.id&&"textSizePanel"!==e.id&&((new st).setTextSizeOptionStatus(!1),(new st).setColorPanelStatus(!1))})),t&&Object.prototype.hasOwnProperty.call(t,"completeCallback")||(this.completeCallback=function(t){sessionStorage.setItem("screenShotImg",JSON.stringify(t))}),null==t?void 0:t.hiddenToolIco)for(var r in t.hiddenToolIco)t.hiddenToolIco[r]&&this.filterHideIcon(r);this.setAllControllerId(),this.setOptionIcoClassName(),(e=this.toolbar).splice.apply(e,function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}([n.length-2,0],o.getUserToolbar(),!1)),this.setToolBarIco(),this.setTextSizeSelectPanel(),this.setBrushSelectPanel(),this.setTextInputPanel(),this.setDomToBody(),this.hiddenAllDom()}return t.prototype.setToolBarIco=function(){for(var t=0;t<this.toolbar.length;t++){for(var e=this.toolbar[t],o=!1,n=0;n<this.hiddenIcoArr.length;n++)if(this.hiddenIcoArr[n]===e.title){o=!0;break}if(!o){var r=document.createElement("div");this.bindToolClickEvent(r,e),r.setAttribute("data-title",e.title),r.setAttribute("data-id",e.id+""),(null==e?void 0:e.icon)&&r.setAttribute("data-icon",e.icon),this.toolController.appendChild(r)}}this.hiddenIcoArr.length>0&&(this.toolController.style.minWidth="24px")},t.prototype.setTextSizeSelectPanel=function(){var t=document.createElement("div");t.className="text-size-panel",t.innerText="".concat((new st).getFontSize()," px"),t.id="textSizePanel";var e=document.createElement("div");e.className="text-select-panel",e.id="textSelectPanel";for(var o=function(o){var r=document.createElement("div"),i=n.textFontSizeList[o];r.className="text-item",r.setAttribute("data-value","".concat(i)),r.innerText="".concat(i," px"),r.addEventListener("click",(function(){e.style.display="none";var o=r.getAttribute("data-value");t.innerText="".concat(o," px"),o&&function(t){(new st).setFontSize(t)}(+o)})),e.appendChild(r)},n=this,r=0;r<this.textFontSizeList.length;r++)o(r);t.style.display="none",e.style.display="none",t.addEventListener("click",(function(){(new st).setTextSizeOptionStatus(!0)})),this.optionController.appendChild(t),this.optionController.appendChild(e)},t.prototype.setBrushSelectPanel=function(){var t=document.createElement("div");t.id="brushSelectPanel",t.className="brush-select-panel";for(var e=0;e<3;e++){var o=document.createElement("div");switch(o.className="item-panel",e){case 0:o.classList.add("brush-small"),o.classList.add("brush-small-active"),o.addEventListener("click",(function(t){St("small",1,t),Ct("small",1,t)}));break;case 1:o.classList.add("brush-medium"),o.addEventListener("click",(function(t){St("medium",2,t),Ct("medium",2,t)}));break;case 2:o.classList.add("brush-big"),o.addEventListener("click",(function(t){St("big",3,t),Ct("big",3,t)}))}t.appendChild(o)}var n=document.createElement("div");n.className="right-panel";var r=document.createElement("div");r.className="color-select-panel",r.id="colorSelectPanel",r.addEventListener("click",(function(){wt()}));var i=document.createElement("div");i.id="colorPanel",i.className="color-panel",i.style.display="none";var a=function(t){var e=document.createElement("div");e.className="color-item",e.addEventListener("click",(function(){!function(t){var e=new st,o="#F53440";switch(t){case 1:o="#F53440";break;case 2:o="#F65E95";break;case 3:o="#D254CF";break;case 4:o="#12A9D7";break;case 5:o="#30A345";break;case 6:o="#FACF50";break;case 7:o="#F66632";break;case 8:o="#989998";break;case 9:o="#000000";break;case 10:o="#FEFFFF"}e.setSelectedColor(o),e.setColorPanelStatus(!1)}(t+1)})),e.setAttribute("data-index",t+""),i.appendChild(e)};for(e=0;e<10;e++)a(e);n.appendChild(i),n.appendChild(r),n.id="rightPanel";var l=document.createElement("div");l.className="pull-down-arrow",l.addEventListener("click",(function(){wt()})),n.appendChild(l),this.optionController.appendChild(t),this.optionController.appendChild(n)},t.prototype.setTextInputPanel=function(){this.textInputController.contentEditable="true",this.textInputController.spellcheck=!1},t.prototype.setAllControllerId=function(){this.screenShotController.id="screenShotContainer",this.toolController.id="toolPanel",this.optionIcoController.id="optionIcoController",this.optionController.id="optionPanel",this.cutBoxSizeContainer.id="cutBoxSizePanel",this.textInputController.id="textInputPanel"},t.prototype.hiddenAllDom=function(){this.screenShotController.style.display="none",this.toolController.style.display="none",this.optionIcoController.style.display="none",this.optionController.style.display="none",this.cutBoxSizeContainer.style.display="none",this.textInputController.style.display="none"},t.prototype.setDomToBody=function(){this.clearBody(),document.body.appendChild(this.screenShotController),document.body.appendChild(this.toolController),document.body.appendChild(this.optionIcoController),document.body.appendChild(this.optionController),document.body.appendChild(this.cutBoxSizeContainer),document.body.appendChild(this.textInputController)},t.prototype.clearBody=function(){var t,e,o,n,r,i;null===(t=document.getElementById("screenShotContainer"))||void 0===t||t.remove(),null===(e=document.getElementById("toolPanel"))||void 0===e||e.remove(),null===(o=document.getElementById("optionIcoController"))||void 0===o||o.remove(),null===(n=document.getElementById("optionPanel"))||void 0===n||n.remove(),null===(r=document.getElementById("optionPanel"))||void 0===r||r.remove(),null===(i=document.getElementById("textInputPanel"))||void 0===i||i.remove()},t.prototype.setOptionIcoClassName=function(){this.optionIcoController.className="ico-panel"},t.prototype.filterHideIcon=function(t){if("rightTop"===t)this.hiddenIcoArr.push("right-top");else this.hiddenIcoArr.push(t)},t.prototype.bindToolClickEvent=function(t,e){var o=this;if("undo"==e.title)return t.className="item-panel undo-disabled",void(t.id="undoPanel");t.className="item-panel ".concat(e.title),e.id<=100?t.addEventListener("click",(function(t){!function(t,e,o,n,a){var l,s=new st,c=new k;s.setActiveToolName(t),s.setToolId(e);var u=pt();if(null!=u){var d=u.screenShotController,h=u.ScreenShotImageController,A=u.screenShotCanvas;if(s.getToolClickStatus()||ft(A,d,h),s.setToolName(t),r(o,e,!1),"text"===t?(s.setTextSizePanelStatus(!0),s.setBrushSelectionStatus(!1),null===(l=s.getColorSelectPanel())||void 0===l||l.classList.add("text-select-status")):(s.setTextSizePanelStatus(!1),s.setBrushSelectionStatus(!0)),s.setOptionStatus(!0),s.setOptionPosition(function(t){switch(t){case 1:return 16;case 2:return 56;case 3:return 90;case 4:return 128;case 5:return 174;case 6:return 210;default:return 0}}(e)),s.setRightPanel(!0),"mosaicPen"==t&&(s.setRightPanel(!1),s.hiddenOptionIcoStatus()),mt(t,A),s.setDragging(!1),s.setDraggingTrim(!1),"save"==t){ut(!0);var g=c.getSaveCallback();g&&g(0,"保存成功"),s.destroyDOM(),s.setInitStatus(!0)}if("close"==t&&(a&&a(),s.destroyDOM(),s.setInitStatus(!0)),"confirm"==t){var p=ut(!1);if(n&&n({base64:p,cutInfo:s.getCutOutBoxPosition()}),!c.getDestroyContainerState())return s.setToolStatus(!1),void s.setOptionStatus(!1);s.destroyDOM(),s.setInitStatus(!0)}"undo"==t&&(s.setOptionStatus(!1),i()),s.setToolClickStatus(!0)}}(e.title,e.id,t,o.completeCallback,o.closeCallback)})):(t.addEventListener("click",(function(t){!function(t,e,o,n,i){var a=new st;a.setActiveToolName(e),a.setToolId(t),i.target.style.backgroundImage="url(".concat(o,")");var l=pt();if(null!=l){var s=l.screenShotController,c=l.ScreenShotImageController,u=l.screenShotCanvas;a.getToolClickStatus()||ft(u,s,c),n({screenShotCanvas:u,screenShotController:s,ScreenShotImageController:c,currentInfo:{toolName:e,toolId:t}}),a.setToolName(e),r(i,Number.MAX_VALUE,!1),a.setOptionStatus(!1),mt(e,u),a.setDragging(!1),a.setDraggingTrim(!1),a.setToolClickStatus(!0)}}(e.id,e.title,e.activeIcon,e.clickFn,t)})),t.style.backgroundImage="url(".concat(e.icon,")"),t.style.backgroundSize="cover",t.addEventListener("mouseenter",(function(t){o.switchBgIcon(t,e.activeIcon,o.data.getToolId())})),t.addEventListener("mouseleave",(function(t){o.switchBgIcon(t,e.icon,o.data.getToolId())})))},t.prototype.switchBgIcon=function(t,e,o){var n=t.target;o!==Number(n.getAttribute("data-id"))&&(n.style.backgroundImage="url(".concat(e,")"))},t}();function yt(t){return t>0?t:0}function bt(t,e,o){return yt(t)+e>o?yt(o-e):yt(t)}!function(t,e){void 0===e&&(e={});var o=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===o&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}('#screenShotContainer{cursor:crosshair;left:0;position:absolute;top:0}#toolPanel{background:#fff;box-sizing:content-box;height:24px;left:0;min-width:392px;padding:10px;position:absolute;top:0;z-index:9999}#toolPanel .item-panel{float:left;height:24px;margin-right:15px;width:24px}#toolPanel .item-panel:last-child{margin-right:0}#toolPanel .square{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAORJREFUaAXtmLENwkAQBA0iI6ULeqAKmqMHCiCmBzrBMdzK+fvlXVsgzUsX3d3u/2z2w8CBAAQgAAEItAmcqn2veld9Nip5yVPezbNrdqemhM5Vz47Z5MilxF5VV1dUNG6uyIJ9ecq7efbN7tQ8dsysNTLr3fOAtS4X0eUBEYyGCAkY8CKrJBDBaIiQgAEvskoCEYyGCAkY8CKrJBDBaIiQgAEvskoCEYyGCAkY8CKrJBDBaIiQgAEvstqTwBhxWiYy633o0H3UjD5at/4flae87aMv7p/9XrdfhwAEIAABCPw1gS8CdEV3aG1wFQAAAABJRU5ErkJggg==");background-size:cover}#toolPanel .square:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAARFJREFUaAXtmLENwkAMRe8QUoTogIoV2AGJjgHoWICRYABm4Dq2oaIkoFSHja6M4lN+FBD5lNj+//x+KjvHHwmQAAmQwJAJeGv55TUuqup1lL5tjHFq9XdR996XohOKYnK4bfy9SXPcVNRaevxKHn+2eruqi5eTJdbJewfpzsPzMbuUJ0ikxbB6qrc1OrIa+vps6t6R420uUCf8S/9xgW+nwQSYAEiAnxAIEB5nAjBCUIAJgADhcSYAIwQFmAAIEB5nAjBCUIAJgADhcSYAIwQFmAAIEB7//wTSoRUm1UYgx9s87opx0ENr3/dR9VRva3FzAT1x65VYBPc5t0rLMKeeyH/O6zn97CEBEiABEhgugTemKDubNjFCTQAAAABJRU5ErkJggg==")}#toolPanel .square-active,#toolPanel .square:active{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAPJJREFUaAXtmDEOwjAMRRuEVCFWJm7D1r0cgiNxlG7chokVoU4hkTJWcdQfKCovY2x/x+9nctNwIAABCEDgnwk4a/jjzR/G8XUNeZ33fm/l14g7555BZ2jb3eV+co+c5jYXjLH4+PDw3sqrGU+g+tA7yp5z2ptcMMW6gpxPpZi9zQG+9W2mCJT0NgeYEv6lOwZY2g0cwAGRAF9IBCiX44CMUBTAARGgXI4DMkJRAAdEgHI5DsgIRQEcEAHK5TggIxQFcEAEKJev34G0aJVJzREo6V3iwDCneaUas7e5nY4r7rQlXmS9XgkEMhCAAAQgsFICb9uiLZTmm16RAAAAAElFTkSuQmCC")}#toolPanel .round{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAi5JREFUaAXtmL9OwzAYxAsS7cLGwp+dSkh0ZmFgYusjdehD8BIsiBegEkM3xo4siDIjmFjgfk2uA1LSlDhpLXzS1VFj3/n77MR2Op2ElIGUgZSBlIH/nIGdgMF3pXUlDsUz8Tinis4850zlvfggfolbgUP14kZ8F78rkrq0oe3G0JPzWPwU3fEnXY9ERuJU3M/JNf9xjzquT1s00GoVZG4quiO3uu6v0QPq0sbt0WptNAYye8nNn1VeiH8FbdEgEDTPxUZBltz5ia4PArihgZaDaGwkejJhqDGaiHtiKKA1EdHGA6/g4GHDgCEPkfnfHUTT0wmvoGBY/bZh3jYFtEkSXkGnEu9shHlzNA2/nfAMgq5UvEj1gyiWi+BBsvDEuzaupYAgC1Bb8GKHdyl2S+9mN4d5nbsKdUNVsZe9C3WrBMDGDDxmRSu/9rJ3oWmVANhVgtesaOXXXvauZfqh1jwDbMzaAl544l2KKiNggZBnB2sWlfYiiFJUCWCeKxyVKoW9aa+3VbLrBHCySizgfXs5eYXSVQKY5a0vC1XC37CXvWs5bPVCViWy6LcSBBn1Zo4Aot9OE8RY5L0c5YGGAHriVCSIiRjdkVJ9XkylaA/1BAAGooNgOtU5YtLW52A0G/+sIo8FeKg9nZhSUX3YykLIngkebB/2CYST1Ejc+k+L6uMSjAbrhM/NBLKKwT7uetu67E2NC1ZsMs8xMKrP6zViTk1TBlIGUgZSBjacgR/CFam/GpziJgAAAABJRU5ErkJggg==");background-size:cover}#toolPanel .round:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA4hJREFUaAXtWEFrE0EUfrNJTVJBRK1oK6JYEVoQigr1IFKwBxVE0ZP+C6+KB9Gr/0JPFUUQDxaK9GCgSg9SQawI0lalKlKwSUyy4/smOzEEMm+SbJXQncsm+2a+b743b2feG6KkJR5IPJB4IPHAZvaAikv86ILesvqpNFGl8AIpGiFNg/wcNPiaVvj3Cr97m6LgycD+zMzCqPodB3fXAgZm9J6wVLxFOrymibb5TIpJ10gF94NM9vbqhPriM6ZVn44FDL/XmZ8f1m9oUte11ltBwGDzWgWPA6JZSqtllcqs4L2ulgapoodColNKhxdZ6Jjpr9QvRfre9kP9dxcPqxLetds6EmC8Xiw80qTHQahITSkKbn47m33nM4Fdz4pHNIV3ePyVaHw+yOYudbIabQvYPV06Wi1XnzL5PlLqI6Xo6o/J/rzPxJv77Hi+Pk5VekBaH2QnLKXTqXNfJzNvmvu5/rclIPL8HCbPhC+yfbnLy2fUdxeBZBua1juL5cJDxjwNEbwSJ9pZCQ5Xv4aYD2thYyZ/YCA32e3kwQwMYMEhcAw4wOU3KyJvAbUPlmOewwaef31clX1JpH7AAiawWcQ4uKQx1u4VQrWtsrBodpu0OtlpzFvSVk/zTVT0S8W7U5DJDfuEktcKYJ/H5HmZpzZq8hAFbHCAy5wtrZQ2vBcF4ITFIYUx2Cobxm7IzzoHcxpugUUUgPQAJyzH2rzvPi9wOs3gABc4we3szEZRgMltuCNOWAksLrvlstwuXFEAx80IALjjrAsoTludK+J2YcsCkFWicW7jAorVZrkstwNcFhClxDYxc2DFZqpz2XTcgSwLiAbrPiSb/6bVufhUkxhlAShG0IqlvRJYbPa/XJ8lTFkAKik0zuclsNjslstyO4BlAVwGYjyKEQdOrKY6V8TtAhcFoIYFACopF1CcNstluV3YogAU4Pz1rqEMRCXlAovDVqvWaAyc4JYwRQHm9oALcAChDJQAu7XXOZjT5+bCa2vs+XQaeTluD4x3uYZFGditp5vHG0zUx9zA5VMLoK8YQuiEhqsPztXzKMBRwx57xcdNTA1YwIyK+zy4fKG9QsiC9XRRDxFY1lRf6jyvxBJuEQqVwpwpA63CNp8YCwxgARPXKr6hY6naWgE7KFqJ3rzYsiJ6+mrRisCztsX24OVuowj8/l/X683zSP4nHkg8kHgg8cDm8sAfhkzSnCu/+OAAAAAASUVORK5CYII=")}#toolPanel .round-active,#toolPanel .round:active{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAqJJREFUaAXtWDFLHEEUfrNn3LsIIRYGOcQml8YDu0BKr7BREKzzL2wDFopt/kXqQCBdwDZgKWeTsxE5FRsREr2Eu8l8uzewCLvvzbp7q9xMM3M7b973vjdzM+89It+8B7wHvAe8B6bZA6oo8u2unr0+G3SGNNoiRSukqWn6ZqRfU9+M++bbSY2CbwvL4WG3rf4Wgf1oAguHenE0uN8lPfqoiV5JjDKgt6SCL0FY37vuqEvJmjSZ3ARav3R4c/rnkya1o7WeSwPI+q6U+q1If3799uVB750aZMmmzeUiEHn9/u6rJv0hTbHLd0XqZ1BvbOfZDWcCb34MVof/ht+N8UsuRnKyhsT5zExt42o9POZkk/NOBMaePyraeGsQSJideO+yE4FdzPU486P42BTq+SQuHAMMYCW/Z43FBOI/bDFnPssg/K+AlSWTnBMdofiqvOvlvW2SgJIxbqcgbLQkR0m0A7jnJ2U8CAIrelsEbFkCeGHxSAl0FStiMCNsRitLAOGB9IVlsJymgQlsbhFLIIptOC0lzUuwWQJRYFaSgaxaBIVM4wkgqqyqCbB5AjYkroKEAJsnUIXhFtO8anaY1vMEkIxU1y44aJ4AMqmqmgCbJ2DSwKrsRwrKYbMEkMNySsqal2CzBJCAm4jvtiwj0/QCE9hp8/Y7SyCqHpgE3C6YWG8wJZULlgAMRvUAIe6kjI/D6fqeBE9EAHE5qgcShUXIAEuSCwBLRACCKH2geoBxmQ0YwJJiiAmgboPSBxJvqXJXuXFSv+1SIxITgDHY1tqL2mYZJKATZRXp0bHOEeXEVtj2T6mw5bQDlgC8NN9qrAWK9h9zO0W3jdEBXa6et7bk2gG7GH1csXiGxd0kCYyrKq8/tMP/9h7wHvAe8B6YLg/8B7td+kBEJNs9AAAAAElFTkSuQmCC")}#toolPanel .right-top{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAgNJREFUaAXtmE0rRkEUx6/XsrC1okRPYWWhbCQWFmxsbCyelKysZGFnISWSlJBIkpT0ZO8T2Nmy8QGQkrzn7X8yU9N97h0z923uZE79u3PPPXPmd05zPeN6njPXAdcB1wHXgf/cgQqDxddi7QLULqgJ4xNoFVKyLAqoB0kbJILSuBWqgvz2Cked3xl2Xx32IIa/C3OLEAdu1Mx1qxmfePgpMn7HEM1XtkrlSPXAKYTeqIeXRV6UeSSONAoggH4oahFaBUhqi/2oAxmuId3t1Bt75QQTRCmiIcH1E0mlU8Sd7oppvAN+hks4zvzOkPvc7H/ORz+UOxB/Dx6FMfeJV4rNlW2AhgPOY/zXdprOEz2dZzj8ggAmK2JQiDM6XBLgFwNIwopoDojN3EVbhXd+WbK6v4gnxGZxuJQged6sAL8ijfx9KBZxrhCfasgMsvPOK5/nMYeKuILmIGNGBzgOv2aMIuLCkwL8esQcxqZNYOUvVsCmMYqIC49h3ieD38LV+F8QnTpGBXj6+bcKfgTAHxC9tLu2wQ8D+J3B7+GaxWkWyyRjQ0jzBlHn9yGr4AcA/MLgD2yD7wPwM4M/xDXoYxTc+bQeYPF/Qo4wtgq+G8APEO35Y9vgOwF8z+BLuKbxCRJp07NtpKbO05di6+CpLS3QOFRDN85cB1wHXAdcB1wH8tqBH3D6o7sgJgNQAAAAAElFTkSuQmCC");background-size:cover}#toolPanel .right-top:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAwdJREFUaAXtmD1s00AUx9+7JCgBIdEoNJ1QyoDqAQkJNkCqYGgEMwMDCwsLLOyUAitsMDCzsVUdSghVJTYkmJBI+VhgoOJTgiLH+fA93nNICFHjnGNXMZKfFPt89+z7/d/dO58DkFgSgSQCSQSSCISIAIa4N9StpXXK2m7zELmuRZosjWgxzDQhvs5AdvHTAn426SBt4hTGh0H32U7daiPOAZKFRBYQWj+d+iwAqd6ziYDkgmi+hfYBLp3ptfkUIhWwRKTuVRtl7eqzgMCgxKD2jNc/AwqhBylHxDYCvuXiKxZWA1AbXLlJ5FaR4LgP8z9NkQq4W7Gva4LFDnCnH4a0GXCDo14DxT/NsOlUrTS1692LY9jqp5lZrZeaUoH4q7/erxypACI8ITFm6DWF6nY6Q7WPp7IfEDmmA/Zt4FouXYUWaC4Q8IiY2d85aObv66UQ7osD084T6anN07n328EPewhpbXltCDydzCxSAV/Kux8CKp5ClOJAPiis2ufNMDpempO8U5KcMLNIBUiX38u5W2OL4NXJw0Y1OQGhRPwZAaTsZAWMI6JYoWlOnjyvAD++lnHTGwmDQ+RTqL/PINPJRcebPijLbQDbUQHCkVKpFU7qrZGJ3VuBzBNYnr+jAvY/bh5xdWuN30x7ObGf+YngPVC8RqAHz/Oa3wXLs4XsSd/VSdOcRBSU+QrkuXs3RXwYhC8Vcudk2+CXE90RUGnzt7BgR76dHgbfH6P8o/o1IH2Tu3d5Dl/AbG7FdewtHinnykJuzxKibCiMLNIcMIEXqsGRcBv1G1JPRG+CwMs9kQkwhZdOxfpFMPlVqeMReCrnIBaJgKDwXUARoRRcQgT5+nqZIbzTbTM9h86BceFNAUf5hRIwaXgRN7aAOMCPLSAu8GMJiBN8YAFxgw8kII7wxgLiCm8kIM7wIwXEHd5XwP8ALwJSchi0YrVxuK3b6/KRLR8j3f38oF8crrf9a7HVbl9muNjDDw1g8YlzMF+pXzz6nDJDnZKGJAJJBJIIJBFIIhCDCPwGO3q+e4PmVA0AAAAASUVORK5CYII=")}#toolPanel .right-top-active,#toolPanel .right-top:active{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAjBJREFUaAXtmDlLA0EUgN/brMaINiEqgoIoglEEQf+A4AXWlja2WuRPWPtPBLXywsZSS402NlYeSSPGHJt9zrisSOIeM9llR5wpsuy8zcz3vTmYXQBddAZ0BnQGdAb+cwYwKfmZG+ouPdYn69jMA2EegNgVRsGA/fJq715YrtgFcpfUT9XKFFgGA2SQCBw0TwATDDrVCoqI1dJab6a13uve9ArI1udO3heIcPMLlmXWfquMOG3ZzoWR+xUWfvGLt8YiF6Am7BLQitNRAG0rDbtHouIv1Z5VhmdENmCaBUR4lv07ICYrUFpOF8k0F2Ulkh8BlvryUvpWVgINI9kRcKeOrIQBPXduG2Gu0a+BH70KSyCUn1ZRaP3EKsBduISV7loPtSZIbAHz9mMXGDipz5m1xiEhbgdKoNgWGrsAh2/ajXMiGEYbFoMWtqHSCLjw7NiQZceDg7GBTCFoTYjuQLGNQBt8LrNxvYAN3qGfRMoWn0KRH+b84LmAW7JntWm0rAs2vQZ5HQJWXtcyfWy0hM4fkS7isPAcuH0k6F4UnrcTmYAIPO+YF1eC5f+B7VBHTq3YbyRTSAZeDNP76Y4FkoTnWh0JJA3fkYAK8NICqsBLCagELyygGryQgIrwoQVUhQ8loDJ8oIDq8L4CfwGeC7R9m+SVQ6e1Wcu2Lr5fRn6c53lcpfLrp8WGZe0wSOdNSmF4z0QOnVXHs8cfW/NX1OX5kA7oDOgM6AzoDOgMKJCBTz35SoU1TFsiAAAAAElFTkSuQmCC")}#toolPanel .brush{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAArJJREFUaAXtl7tu1UAURS+IDokkvEOABkENFVADEl+UXwglXb4EiY6UvN+PyzMlFZCCBhpYi3ikKWznWJixI3ykfce58mTWGc/Zx3c2m2LagWkHph2YdmAX78Ap2G+hp2gN7Ue7Ji5D+gP9ynSP6wU0+rgI4U+Uw6fr0SexAvhmA/zokxD+fQX/hHHeksjonsQJYN9VwA8ZF9Fx9Lr6Lu1+PprEKApb+LcV6CPGJZRipyRupBuHGpdZOB2Vx1wfrAFpS+JFzf3FvhLsDfJYeObr4Pn6TzQlsZ5uKD0eY8EEb6M6FAAwiTlKdfCJ6yOBeb3fInwqzmdcR+CFsLA9ZiawiU6j4nGUFV8hIZ6jwygSwj9AzvuIfM0oHj7ul0gIiy8Krysl+A9cn0TFQ3ihE3z07ApvX3CeTW4QeHfa4yKET8BjFAldyb7gPJucnbp4CG+hCuHZ7wKfCtYmZ7MrHrqLFim8rqP7RMJ59gXnDQbv408Q+r0eHok8aT3fTl08hE+PX4gofH7cuiTda4K6Rio8H390B3WlVOget2jS3Npf5JbX5ezmFmuhR2ulP3L+k50y+bWWF3UNXUlrtWC7WCy39xd5m7fZRP16FPALAN9H7mCXNu8x8bg4zw7tMSoeB1jRn3VC+IIVbfMWqIXqPAt3EHh/i96tILq8HQqvRQpvh9Y6B4lLrCrEZxR9L9dS59U8O7RNa7C4zsomcDtIoCtprc6xQxeB38tCTaHzGFvbQ+un8HfQOST8FfQF/fPoIwEtdQMJ7+vFVfQVFYm2BOy6xrftofZTV9pAZ5GvF0XhWW+2z4+G2OkIJfgzzBf+GmpLtmGZv/s6ksAFllhFJpTrPH/rOr5eCL+FRhXr0OgobbJDm9Rg0fYEbkJljexB7m6d7LLf0RTTDkw7MO3Af7oDvwFjWdeSB4jgWgAAAABJRU5ErkJggg==");background-size:cover}#toolPanel .brush:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABOFJREFUaAXtmVtzU1UUgNfaSZOckwFKW8ql6DDeRaugCOMDTE5vMuMP4J/4pk/+AB/9J9RSmqI8OCqKBUUEsYNQSymYjvScxKRnudZOT8xkcrJ3GhJ8yOnDydnXb133pQD9p6+Bvgb6GuhroAMNYAd9O+46dImeg2Lpc6JwTBGcTyrn0wcf4GY7Az8zAUbP++9XABYBKBUBo8Jv9ihn5s40bkRlprcyNehG/fCCf6qMcKkeXuahkE5uhMHcCxdoj+28PbfA8EV/jMp4mWmPxEG2Y4meWkDgocxuI/AqcRUBbzYToh1L9EyAkbnNQwyfJ6KXEOHK7lTaUxknx79vtBJi/xeUbVYflfVEAIGnLRT4lxn4+2zWnV72sPDQw1WVdidaCVGh4OMIttm76wKMzNJBCnGBgF7hgPvBAXf67mn8K4IxCQGAH0Ztm727KsC+PB0gCBZY868CwlUH3al7Z/FxI4hBiMuN7eu/uybA6DztD0uBuM1rDP+jk2wOH8HUhKgPbIW/D7iZT6I2zd5dEUDgtyp+FR5gieEn70/ho2YA9WUcrUVA5UsZZ6jljMLc6hl8WN+m8XeysaDTb84ao5Wyzz4Pr/NY1zIZhvfM8EfyNPh3MbjAsXKc8e+kFeRWpp0/TDwJU4N26g98SfvKZT/Pfd5gFV5n+IkVD9dNYzz/Fe194mv4E6z53yADubUp956pn9Q/NQsI/D++vwBUhU+5DH/GDn5z02fNw7uIeJvS4D327OBFgKeylTiUp5FikeEBxnnEnwbQneBd5ZpM0Oo5PEtDATA8wTsMfwsGwHs06d5v1aexrmMLbMNf5IHHWRs/J9uBJ3+eNX+c3eZXVOStT2ZXGgFN3x3FwNg8DRfLvsC/LatpYsCdWJsxa176BaHuV4VPMPxM+/Ai3I5dSMzvA0MQHGPz/6LSjie53KQxDV/R/VhovIngeOtn8U9Tv7j6HQmgfTcyP0MwfM4Gvs7d3mpH6Dh4KW97IZOUpwMv8l3WoA28ZKntQGd4uGFrsVbwUtdWEAu8TnmSNSTwtO+azV9LsQBvSqAnkhwrHj4wwdnUW7uQXilLnDVI5+tbnDVyNoEnK3OZauuDdYq1gZc2VgLULfMn2Hdvc77O2eTrbsNbCSAH7I2KXubfk2WeeJm3WSn1hq66JzrKarouK7NpY2ar9fp2LdeBoa9pdynQ8CdlgyV7FBt4OQeEvCfiReooT3YtlXUnuwEvgsRmITmLYiGY4/28hs/w7tAaXp8D9G50STZ03YIXAWKzUFkF41ChUxwkq+kkejZbWzk+bh9i5AQmhxirrbSA7PSJtUBiSw3KoMQgDH/XNIE+uFOwyBarHh8tDzGmcU31sQIQhloA9v2CaZDarcP2wd0FuxOYaVyb+lgBgKgqALYWQN+0hbiobx34yiTu4G4Ds5M2sTFApPYChIAh1a5AGicYyvuHofTfZZXc99RfmTS278Z3rACAbAHOgxyMTV1I4LEIovkXeW9z5VnAi0JiBeBg1C4kB47hWf+jqkBqkIG5nAaxRMe47iAvbt/tSjvTy6dbu1o3tN9SAEQV8j8emJXOMeg5bQ12qeipGge/3ZVxZuSaMCrv9TvWAkj4GUMqdiH+wwJ/Fzgg+K0KfP3N77BAKWeJ4Z/0Gro/X18DfQ30NfD/0cC/yGVeCCJ5w/QAAAAASUVORK5CYII=")}#toolPanel .brush-active,#toolPanel .brush:active{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA45JREFUaAXtmFtPE0EUx8/ZFuwuQS5yE9EYjJdoiLeoL2rYUpAPZXwwfgA/DiBQ1BfjXcQbKhoFREQsUXYLpXs8U9xkQzLb2d22+LDtw+zOnDPz+59zdnZagPgTRyCOQByBOAIRIoARfCO7dt2j9oKVv0lEfQxyP6npt75fw/UgE++agO5R62DegSkA6nWBEfFhU0IfmhvENbevXKuVM6jGeGvW6tlwIOuFF+twJi6uFe2x3jvUpLpuzTOwb8I6AJtwl4COyCCDZKKmGSjBF2DKDz5oJmqWgbax9W5ycIrL5Kgs8jv7RSaSqKf9HuyaZKAEX8RsEHg3E1uOfX2nMO991QW0jdB+jvwkl80x78Kq1wRw2c+2qgLas9RFYE9y5I/7QfiNcRnN+I1XTUDHOHU6G7YomxN+AL5jiJ/qjNQNP5uqCBDwxS0rGjzgXCqB/UtX8YefgITfYJixzlHqKBYZHuBkGP9tH4bXoH9xyPhabo6KCiidbQoWv2HhVLmFZeMI+BFS0L+cMeZlNt7+ipWQgN+0rEmgCPCIH4jhV001eCGkIhnozlLbhs3wAH3e6AS55t3mPdSBuZo2FoL4Rc6AgM/nrYlI8ICzqFH/z4Fg8EJopAwcGKd9+UIJ/nSQqHltueZnMUHmylDDordf9Tr0WahnhFotYHiCM6qL7bTjsnmHoJsrw/ht55jqfVLV0Gsn4G2yxrkvCvxbbY9u/jBxyTt30OvAz8Ch+9Rig3WH9/mzQRdz7RHhTSXgxXyBBAj49XWGJzjnwgRtuWZfJ5JG5Mi76yoLOJyl5n/w513nwC3Cq6RmmMsZ/B7YV+Kg9AwI+N95W5RNJPg6NMSPk2UJS6jusruQ+IG9tiXg6UKoFYQTwky9YaTLHczCzO9bQq0PaK/4lyASPMDLasFvx0Yim0+VDVtkT/B5/pLERKV7OpUyBhZNXFExDmMjzUBBs/siwSO80OuMdDXhhWCpgERRaw4TkZIPwnM9aQwsZPBn6DkUHaUCCJ1QAnhXeGZAbeCFRqkA/p8vsAB+wz7V0cjMD+OqYgAjm0nfA0RaC4CjvADDP2loMAa/XMFfyk4VMJRnANUzsFvwQr9UAO9ASiXE5/nHjXuMTK0j7yZPKgBRK1s/DP+oMaUPfjYx505Y61b6DCDhbT77aHwM4C/m+D4H6HCr5VAT906O6vVphv9Ta+h4vTgCcQTiCPw/EfgLJV9RSXPyCEcAAAAASUVORK5CYII=")}#toolPanel .mosaicPen{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAOtJREFUaAXtmckNwjAQRcNSBg3QCkVRIXQBZxogghlxQ7Zl8YKSSG8kX2bx8r4PtmYYNAlIQAJLJXCOjT1jvGYet1j/FKNom6L348zN7xrx3tC1N7GSdwz/I8ahEq+6pyJfXaAzcIm83EvRtkXvipweYG6xVEAFIAGvEASIy1UAI4QTqAAEiMtVACOEE6xegdb58w2eb3Fqf/1XrF4BD0DvF61XAUqQ1qsAJUjrVYASpPUqQAnSehWgBGm9ClCCtH7fmOAesWwuTPEnaCzTFRq7sr6Ssq2T7Z2pPiS/zpOdomx3aRKQgAQWSOANmudym8Lt+O8AAAAASUVORK5CYII=");background-size:cover}#toolPanel .mosaicPen:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXxJREFUaAXtWU1Kw0AUfm90UeyuIih4Add6ATeinkP0TIrnqOLGC+gtFASxu0o2zpgpSUngvaTtS6YtfFkl37zf78tiZh4RHjAABsDAOhlgLfnBS3btvX8MIRxpNilwJv50O+72+2IwlvLtSmDEiuIPtfVlcGZ6X8a+ZhvoxP/5hxw7ruHFh9pAhfkxDfhucr73IQVowkZP0xDXfy6HZ012TWv7z9O3EOhUs3Hawhxfsfi5f88vrQ2swnzPNdfCtzZQs97ADzSwblGgABQwMoBfyEig2R0KmCk0BoACRgLN7uqBptwKmzN0FGByNRRr3fpfSD3QROLiScpyGClV1NhbRJwyhma79QqgAU3aVDgUSMW0lgcKaMykwqFAKqa1PFBAYyYVDgX6ZHr0+iteqVdzbqwCs+KzcF8tVnpXt9NxMkL5cCHez0uOi2D5vf7sadsSi7GywpkoMPOXaJODagNxrBMnI03DBS1ol3gs3jl302VMxAIDYAAMdMfAP+EdVKaWg/p6AAAAAElFTkSuQmCC")}#toolPanel .mosaicPen-active,#toolPanel .mosaicPen:active{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAV9JREFUaAXtmU1KBDEQhauiC9GdIih4Add6BhnmHOKhxHOoeAY9hjAgLkfcTGo6Mo2ZpivW2F3GgZdNJ5VKVfK9XuSHCAUEQAAEahJgLfnx0+c0xngnIqeaz1/Ymfg17ISbt6u9+758u33GZFtN/kTr38TOTC+b+K/5Cp3HRbxtbGdr9lVDXcA3ef4gkv2+wVbb++Tg0urb9Tt6nD+L0EXX3rZDW9G/wyavxx2nx7CAcRJ5RcECvMha40IBKykvPyjgRdYaFwpYSXn5QQEvsta4UMBKystP3U6PmfDwYS6/jddspYtl63+hogLpJDXkMDKEfBF71rn1CmABmZpVqlCgCvYsKRTIYFSpQoEq2LOkUCCDUaUKBapgz5L+cwXS1X65qNvp9DJCzeNCup8vh9B7fzqM6CPbnq+rfWHmWWvpftUFpGed9DJSelzoBvNop8mHEK49YiMmCIAACAwnsARsm0C5E2sdIAAAAABJRU5ErkJggg==")}#toolPanel .separateLine{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAoCAYAAADUgSt0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABlJREFUeNpi4WUQTWMAAiYGKBhl0IIBEGAA+zwA23Qf36YAAAAASUVORK5CYII=");background-size:cover;width:1px}#toolPanel .text{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAupJREFUaAXtmE2ITlEYx8dn1EiUSYkSKRNRzMpEUayQolgZpXyVBStqdmY1ZDGyIKywsSCFSSE7Y2OiFBuTCPlokPIR/j+et+68zX3Pe+49933vne5T/857znme//M/5z33nHNvS0tp5QyUM1DOwFidgXUa2Edhd1EHeE/C/whDwgShUNYutYivYHOh1EvsKRP/1sr+Ig2gVWKHTfhqld+E38JCoRC2VypZOvdN7Tmrn7B67otBE7zdlK6w+geVU60tt0WniX2jcnJE5QNr3xVpy+XPSyb0WJW6ndb+sKo9V9U2qfku/BLmVimbovp7gWejo6ovN9WjJvBqjKJe678Q09/U5vHK/kJghtcLo9kCNbKdsq3OHM2hmW2blBzxz4VxNYTcNL/DNXya0nXLhB1yZN9ofq6BOmjCdkeXxgwHdXSpbXD4Nqz7uDKxfM7XmfGI+V+r0z9TN7ZHTlgGsLLOTLPkV9lu59UZk5lbl5gRP+CZ4aLF9XjGBXdHOAPo8mReZXFct6NXDk+adO7RSxpLydceKYDB7/ANjPpPjFY8fx8w/36V8z1jcb8hLBP2C5eFhhrbJScqMxgCS5OqT/oPcC3mbs9XB9ZxUmMiZgv8C/uSkvjGcVV4JjDznKxpbLGC4fkiTEtD5BPLZY2kQwIna1q7IwL4Ks9UWj5nPNdlEnKihrCtIoHvSQgyFwcvKrywcJLyAhPCeA5fCQxijS+h7xLYowR8ZbsivPNNFuPPhJy1Ph7mzGySmHlZZ6Y4SUPaHJH9FH4I7EqZGJ9JED+YCfv/fxX+7oz4/32oIgHLKAtbK1L4Xwos06C2RGyQDwutQZlHkj1VlTxbRjanr5024r70VDUZDlqe2zW9PDs5IT8bcbtnrK/7dAV8Ffh6scg3OM6frY2/9W6cQ+D2M5bvZCjeyr19WyhCB89yG8AnlUFedgZE9FjgHGiUXVei1wI33tTGlhZ8W3Oo4oaQ9KrvoC67yxkYWzPwF7rCpZtbo68bAAAAAElFTkSuQmCC");background-size:cover}#toolPanel .text:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABOpJREFUaAXtWd1vG0UQ3zk7ju0koCROUkWhUFEqQVB4KH1rKVGIXQlUgSoEDy1qpVI+/4VK+SMQFLUIgQQtEkKt+LLr0FQUeIAi8ZUCUkE0qBWJ46A0sc92zzf87i6Oncj4bs/rB5D9cre3szO/38zuzO5aiPav7YG2B9oe+F96oP+8PtH3aW4pltSPtpKg1jLlZT4O3b2m4ONPMgdaZYdaobhvunifuGXMVnQTicez+7rOVdoqny2JABnlFy2QAL5gg2Vht1UCr+hSHoGBGe42C/nrLMRtAU3ba5qcZBLhgNB2ZPaFr1YMq3oqjwAX8wct8HD/pUwi8rkgPi2YqSzMF1SBrtWjnIDJwgaqkXjVMoRpZD+F4MMjX3Gk1riKd6UEBtL6boAaA+j5oZHIBxbAxUTXt0T0tWDRl79ZeFoF6FodSgmUy1xZrKdmR6m0bojIiQav9693NfuijMBQigfh5QOYNOVOotdrgfWEwu8JElkW/GD/dG5XbV+z78oIGFxAxeUQps9HNxLRP2uB/TFOBcH0pv3NUJtSlRCYYtaY+ZgFkDVtbdHWUhAiGNJOYEUjCPTUSJL7Nvb6bykh8Eoy/xig34nFejU72ZmuB2dhIvwbZFJgECkI/Ug9GT/flBAwyZkW8O9rIIEyUP9XSa0QeB4RU1JEmyYw+FnhbizcOAnSo90RZ57Xxy9ejkc/huw1gN8+lCzG/0VM6nPTBIxbqLCWN4nPzO2hvxtZnyJCsJwMVSazknIbDXHta4rAXTMcxry25zNplYrb2GZHV/gUolBiFo8Op/WtjaXde5sisFJAZUWFhVe/WYx3XXY3J8RfD1EGqfZ9EA8Uy+ZzXsY0kmmKAECsTQOn0jYyVNsXqEbr6Ogsh2r7ZN99E4ilcjuREnehwi71hMNnZAwvxKNfYtz3mEaD83M6qrf/X9DvUBh/yRlLqRWjtK0/XZRTZRqfQMcDprBT8Gm5wVVpX7l46yXuza3qOLSo2R53BINj85OdP1ZheX/zFYH8qn7EBo/pAw/Meze3SZJFL4raFqNsp1RfBx7pCFgVNJbSf8XzHk0T+7Hf/3ATLM9NTLt72TCuoHqvUndkeHE3rXgevCYovYhhdNICj43ZnFNZZU1W5bFv+hngZ6Cvm1fzz1R7vL9JEyDTqaDEdMKqrN5N1ZdEDbd3r5hKvqaQFIHhVP4OZA7sPKkU1MJv1Ick93UsFDmLKNxAQRyNndf3yo0WQopAkRmVkwNWJZ1P0IKssXryF8fJIOaTVh+uYKT3R54J7LzMHbBh33PWVNJ6mKS/4Rx3EmvKwMAncK+0RUaBZwLXsvoBTJ8hKP/BrqQyVlxksxPR60iH57Cr7SgXC8+6iG/o9kwA9z12eDGg7pFxg1Y/jerNxTGZy2BPBIZSxfvhnT3w0k0KR9/xg89tTDYRuYDF/AsK5MiFtL7fTb7S74mAwWuHD6K3M+O0Whms/Ikjqa1TYjG7Eoh9wT3w/kFLMQcDjgHlyB2FtwcjbyEKORY0EZsu7PBixpUA5/KHENYeKL649EjnFS9K/cr8PknLsPWufUQ1vF0GuxNg4dz3cIsW7ya2Aa3DThL4Z+ewl8OOKwFsGUo4fPy0bSBydpOtljQz8dB31u0eEoa+vCya/2vKSmkyaU0Fqync9D08w762+irst3W0PfBf8sA/GcCs3A4F3NoAAAAASUVORK5CYII=")}#toolPanel .text-active,#toolPanel .text:active{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABFBJREFUaAXtWd1rHFUUv2e/srumSpNNUkrUirSglbwU6UulhriJglRERIVWKmgltiCITxYhhfY/EBWKDwr65ENFhWxTuwU/HsQH8aMqSMFqimmaQtLd+Whm5/ib2S7sTnYyc+/cfajsPOzMPffe3zm/c8+5XytE/+l7oO+Bvgf+lx4YPmtODc3XV4cr9ZO9JJjqGXiD3xYs7hRMrz/LnO6Vnp4QGDpnP8iC93tGM/NgtWI9d1sRIKfxWrvBrsBo9Ogh3bgjVR50LWORBcKn9RAhhlK7lh/P/9kS6XprDyG2jYMdxnuWMlNDuKd0Gd2Oo52Ay2K2XUHrG6SeGv+OC62yrrdWAiML5j4YNiEQMkEDiXnAWLOPBOVJy1oJNBrcTF6ETHfD+M3ucnVpiCJ5wLEKj6675t+CRNaL+TAEytHelani92H1snJtI+Cw9TKyNbeZ8b5x66Q1mbUQmGNOYcGKFd8s3MnxeR6S9XRYey0E3pk3noT37+2WvBsUs0ibwnhjg1xRoIWASyIieTutY0GzGLHQPOlsvXkpMYHRr6z7haBpqNkwdYaqZh4aXbCfCK2XqEhMwFl3Z28lrpRHXXZPSNgZ2lRKaRBlR5Xza7axCN8rJCVxPkM7rpQLl4O4MuVEI3DDsp5XM94zkclyxVsyxnZrm4gAjOjYNndTsJkM24tDu3/F2pHgUSZQqtT34NDyMBLYVdWPmaj47z/WC6r9vX7KBJjF0aZiVsbw+oPE8SaO2q9SEt/zNW+t10wcWvRsj7OZzMRSeeBnFQoZlU5GzXzJN57EdXhgSQXD78NiKxaPbU7D9XKp6zkiClt6BLwVtFQx/8B7ZyolDlybuePzKCVh9cML9gPsOBeJqEaDhe3X9tGNsLZhcun4hdKyZzz2PZePTRe/DAOOI18pD/wG46vAG+Sa8WKcPsE20gTI9YdbENP7c6Q+A7UMwY7oXe8boaQUQlIEtleMuzH7YOdJNzOp/ActI5K8J3KFMxiFK2Cwu3TW3C+LJUXAZn4VvkoTiU+XZuiqrLJu7S9MkoMF7bRX57ryC2NsAnt+4Cx04NQlRDrVHHbvW8fDOTqNnHKA9TTulbbJYMYm8NeK+QzCZwzgP12dLn4roySqLc7Ii5gOP8Oqlm3Y1itR7dvrYxPAfY+/70EHP+naQbR8E/m4CKcjMpfBsQiMVeyH4J1H4KU1yhc/1mJwAGRlpnAeyfw7Fsjx8wvmgUB1aDEWAYebUyfi9KPlSaqFoiWtYPGeDyGRzJEESt/wFnj/oAfMmXRTQVJDQ/rflSl8iFGo48w8VTpn7Qpp1iGOJMB14xCGdQuAL1x/bOBiR2/NhUtlWoWuT+AwEg6OqjGeaAIs/PsezEC9Sd6AkelU1teD/xQOxznsRBLAluEmrgt/uW+kcCagqyfF5encj1gov8CEYa6uiuR/TXlTmsy0poPVHG76Hq2y0lZfh/4+Rt8Dt5MH/gPfHXmcyfgZhQAAAABJRU5ErkJggg==")}#toolPanel .save{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAY9JREFUaAXtWDFKQ0EQDSaNliFl5F9AyBEscgKLHMLGQ9jkCBYeIkUkNxAsLA0eQLAT7bQR8xYZEPmzM7t/d/iaWRgW9r19M/Mm+flkMPDlDrgDNR24gXiIP7u+UHmIauugmrKRsDdgZDSbxifAWmME+ASMjGbT+ARYa4wAn4CR0WwanwBrjRGw1xO4g8n0usztNAcOp/N7IqbuXSbwmposwn+LYNWgKZRfEORi7h6MaKpVKQifFWhgIeSoDl91aOK6enWKBIfgPGQ08Yg7Rwp9E8oJsrwjtN+DD3BnJpUlJDlPaOAiQTeZ2uW/nJWiiXVyRd8X1HXRxyAnzxiXnhCk8Xt/BjbJEf6hKV6npCKRIZzi/BNBOrSHszlzR3NMOiJXTYwoXQIjHdqXEb4GIh2RqyZGlIbAbhGkFd6bRhG+BiItkasmCkrHwLeI8LxvBK4GVtelJmqyFuS01tXlbbRgbflS3kC+d2Vu+gTK+Jiv4hPI967MzdivY3ju9n61fYQ2Pa66z7X12DYv7T87sAMM9Kzb7VMBMwAAAABJRU5ErkJggg==");background-size:cover}#toolPanel .save:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAuRJREFUaAXtWE1oE1EQntmkTXYLIok/KEGvQvVWKFgo5JKk9OShmoMepAp6KvTgxf+DFw+CPahIr5FCQT0U2xRK9VIU9VBQ8W6IKEktQjaJJjvOBgNJNtvd7PYFhbewZHfevO+b+Wb2vd0AyEMqIBUQpkBkpbRknsIIGDgoEhwIJoXiM7gimkA0vkxAtMJO+LICTgqJHpcVEK2wE76sgJNCosdlBUQr7IQvK+CkkOjx/74C6FWh6Ir+mohGvc5vnYcI74upoZFWm9trzxUgoB9uSRz9CLcdfWwcvH/QhPAiVGmTP1oiCDhTnNDmbDi6mqPZ0mUy4AEgbA8O4HRXJxdGzy1kYkdX9VNUp6ecQDWAwdHvqcFNF5xwMFs9XqP6W27BMACe3prQFt3M6+bjuYVMsGJCe4aoPOJ2CtWhtnD4HWndSFptsQ1Sf1NtoRE8wryf4E1cXwmYAOqe8Cy3wUcO6FiloN83bTsd5Z+Ve9x2w4j4ObxPm9nJ182Y7wRyJ7E8gME0B1ThwC5ElvUpO+JGy5FxqdFyEEznR1C383Vr952ASfQtGfoASLMNUqTHh9bKRzsDiKzrMTJo/q/9itvnpROn896SgNf/corJoYdchedchb3VX5SZIgo0yW4RKVCFTGPFQljqdcUycezisiTAJJONs8new68K6jS3Rw6Axtaz+s3m1Lls5RoQjfOG9TUU0s437T392sRlTaAn1HbnXAq3MIBneWk0DMKr+7Pl8QOr+hgHf8O0gaKcy8ex0D7L392uJmCGUkiorxSkO1wFhbPI1Ax4wtcB3nDuFhPqmr9wrbN3PQGTIp7UbgPiBu8PMVb/CD8bb06E1etWev8WIQksItbDCGlW/ZO53vOrwpmXcaz5D9eK4P1dyIrVZskntS9sGG4zCrgRUgEBcdpCygRspenTgKxAn4S2pZEVsJWmTwO2+0BkuUR9isEXTbcWeuELUezkfzk2sZlLdKmAjQJ/ANa802uhvjOOAAAAAElFTkSuQmCC")}#toolPanel .save:active{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAmNJREFUaAXtWL9rFEEUft/mcne7AYuY0v8gpDsQ7A7h7oIK6bxCi5AfrZDCLoWFjX+Bhf9BijRB0wixEVOkEIykDTkuGHKbNMkpqJO3p5tsuNnM3OwMKMzBcbPvx/fe+97sG26I/Mcz4BlwxsDk5tlG8nUWgIFLLsFJ0AOn+AweuA7gGt8X4JphFb7vgIoh13rfAdcMq/B9B1QMudb7DrhmWIXvO6BiyLX+v+8ATBm6vXn+SQhx19Q/6wfQTq81UcvKdNfGHRAkTnSDKO0ETpU2OQbGBVAFSwSKc3D1xaDTchkL+g7XLY0LiOtRBwEW/8BBXIfVeMJfH4Hlw/vhvoaH1MS4gASt14jWgeA1kRj9XRLsA3oTz0Zr0sw0hYUKSGKEt6ornMiuZrxLMwB71ano2aXAcFG4gM499MdRanNC33VzYOp/jFGp3a3hXNcnz65wAQnwt2blC0GsDIKke1sW8Ur3/KhV/iwzGVU2tHfTe5y4NfFwVDA+G9b5bJi7yY9n/gbP/Ec32ch0eXkN3wsVuMsJKVzoU7/GZ8QdWRKc/GGlEs3LdEpZTl5WtlAavNNCjDE8IcJvutourE5GJsuC4Gm3juPU3sav1QKShI4b4YcA4iUNxmR6Pggmn171GuF7G0lnMawXkIDXm9EL7sDHQRH8zBNqe6YarmYD21o7KWAN+FUFtZn1r8m8L4/j8VYdP20lncUZfomz2gLrbjM6YPfpAhBark46oBXZkpEvwBKRxjC+A8bUWXL0HbBEpDFM7jkw+e5s9L+JxmmYO8q20FtzOOee/3Juzov3ATwDMgYuAKebdW38MyGrAAAAAElFTkSuQmCC")}#toolPanel .close{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAUJJREFUaAXtmD0KwkAQhdPZWNho4wlEvIKnyDE8k3ewyE08hXaWWuh74MAihvzNbCY6C8MKgdnveybsJkURIxKIBCKBSCAS+JMEZvAsUYsMvnOLNQj/RJ1RS4sF0JMhnVB31BalOpg84a0kCF+9+18xm4TEphYSn/A7rGM2tCWywksqWhKjwGtJjAo/VMIFfF8JV/BdJVzCt5VwDd8kMQn4Ook1LlQo7uDcYU03KfRXGek+cUPHScFLAkxe4B/4vZcLU5jTe57wVgdAkyxSeN7zTN7iAJgFXh7Y9JmwfJ8YJJUmf0EngZemriWa4F1LtIV3KdEV3pVEX3gXEkPhR5XQgh9FQhs+q4QVfBYJa/g6CbXPmAeswAPZtx1WFteaV2gkZ6dSq+kGjY4o9e+VNYBMnvD852NEApFAJBAJRAK/m8ALlHeZDLF6LwcAAAAASUVORK5CYII=");background-size:cover}#toolPanel .close:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAjZJREFUaAXtmN1KAkEUx2d0V3EpCUUQuonozleIQC0Coa7qEXqlLrrpAYIgujEoBIleIKKLPugyNSwNdtGy055kY7VNZ2fPXESzIIoze+b3++/XYRnTm05AJ6AT0AnoBP5DAks3kMyc2FsLNZhT7ZurwYzoGjHRie17Z4N9wEG3Z5/n65AT3S/MPAwpW7WPBj2nna/2CiL7CgukE6lTxtkVA1bo23aNWgLh27f2IQBsMoAOsxJNUoGHIn9JWFZRhYQH7wJX3M+TaRilxxXeEhHgIpP8czB5PAJ4JFAGpUQX89fxfgfBN9aSl974tO/QAliQSiIqPLJICVBIUMBHEogiQQUfWUBGghKeRCCMBDU8mYCIhAp4UoFJEqrgyQWCJHjaWoeOveeOfT+kwtznseakTfo2OqnoyHOC8VfGYNad//WEpYRHBiUCWDh7AfPQca4RHjh/N0yz3CqbdRyj3ISbuTCL4jk/PG2G8BzAGLz1d6kbQGQiFxi/YDF5FQ2gFyipwDg8dpV42qjqYlGC7Brww7tFW4ZhlP0X7MiFTdDFekeARGAavLeYConIAqLwqiQiCYSFVyEhLSALTy0hJRAVnlIitAAVPJVEKAFqeAoJYQFV8FElhARUw/8mkU5ay/g+yhsP+hZqJZ7vnB1354pr++MJG1RU9j98v2Ryq+T1Tt2+szqtlpAAi8fPOGf7JjeK/vZgWnGZ8cY6b2LyLMa3M4upY5kaeh+dgE5AJ6AT0An8mQQ+AcXxBv2nkpz+AAAAAElFTkSuQmCC")}#toolPanel .undo-disabled{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA/pJREFUaAXtmU9Ik2Ecx93cdJbEDlIQBKvoZOVBbzL8n5jdOowET4HQH8MOXZW6ehHFpAjqErJDR7P8w4QQdhiBhR2izFOHFTRkObO59fmt94Wx+bx73V5lg/eBn8//7+/3/T2/93n2PFZV2cn2gO0B2wO2B0rwgKOEuXlTV1dXT+7s7FxNp9PtSKPD4fCRn5CBlLcob5KvIysej+d1a2trNA/kgA2WEFhaWvKj9wHSh5EuMzZAIsm4eWS8u7v7nZk5+40piQCGn8PgSYD7BRyj/pK9pW2BcqSuru6r1+uNSV8sFvMmEonz9LXQd4WmXspu6SPN1dTUDLe1tX37XzX/t2gCy8vLNzDgKVKPQTFkwul0Tnd0dPw0oz4UCjWkUqk7zB9BvMyPI0NdXV2zZubrYwwJAAymI60P1nM8P0rfQ6nTH8TT94qNZ/luWJlJ8AIa3hgh9UjXVShXElhcXLyEcSEx1OVyzeBZidmqLOP3qA739PTMFFJiph99txg3hVSj1zQJJQGW+GIymfwoygH8hNxnyRuovkTE+ADGvyK3LEHiOmBBpJpwHDATTkoCa2trx6PRaDzbOkh8Z0VO03bbKs9n40tZW4nH6Iq73e7LhT5sZy6AXm9qavpN+Ydel1wzPgn42XA4nNnfs/utKItjwA+iq353d1dCyjApCcgsgPbb1lyAP4jH45/5Hm5SNsQw1K7olE0B3bL99qNDzhhlKqR8PwIZMAw/hTxjOw1HIpFjSg1FdMiOBoEJbaockMpkSAADlQQ0RAmxN83NzX+UGorskDMFEnIw9slWq4IxJKAIIcEK0zfo8/nOsGePUpZdydKkHYhyqrvk95UK3PB3C4Z9ASAzl3KCwiz5NNvbexWgle3oXgDvGnk7+QskLxkS6OzsXCHGp5m1UVtb+9zv9//KQzjEBpwVEQcijSo1hgQASDHxrmryYbfLj8Ht7W3ZDX0qXYbfgGrSUbXrv2RZAeWZU9YEzDiqrAnIHUJIEEJbKjJlTUAuQGI4IbRZkQQwvEUMZwXWK5IAhsvVUwisVBwBuXJidC/GJ+UFwxICgHpUQFa3a/dlufTPG11XTX/EnMiDe3t7H4x+WFlFQnQQ/yMa3rgRrmkCeCQA6AW5gBsBWtGnXfJlC50r9GZkmgCxKJeMOCQC2rXPClvzMARbdIgueSvKG5DTYJoAntgAdEibP6VdwHPgSqtqmJlrpOgqdB8WbaYJyGB5JQB4jGI1ErRyJTSszIuE6DDzIiE2KV8lpFOVst6GZI8uz4ctlfF6Ox4bwPgnxGv5Pi3qxqpyVqJyH3ezSWlPH/J6UFnP69kkpCwH0FH/gyPXBrtue8D2gO0B2wMH8sA/gAT1Qeh5oB4AAAAASUVORK5CYII=");background-size:cover}#toolPanel .undo{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAp1JREFUaAXtmb1LHEEYxs8oiSiIgWDtR2lsJI2FcKRIYZsqoiAIAYs0/gEe2Aip0wqWqfVIbReS1GlSXRMQIwgKgh+QPL+wLyzDLsrM7N0uzgvP7czsvM/7sTuzM3OtVpKUgZSBlIGUgYAMDAXoFqlOqXFFaAvzwrQwISAXQk/4KRwLX4RToRayLC8OhVvh7wNBX3TQHZjMynJXMKdvVD4SPghLAk/kaQbKtHGPPvQ1PThmhL7KO1m7FHDiXOgIL4SHCn3RQRcOuOCMKmVjZEdWMAo+C2TXV9CFw/jgjiILYjkTeOQjOUZz/k5tW7n20CJccBJIlCBeZmQQMnO8EVazNgy9FWILnBZE8Os0LjJ7rHb9nbXFzLybBLixx5gIHtjM0+a8XZn+Pgo2v6sYXWxMMDsFyTdpm+Pu9UT3NoUnQRaKlRnYNjsFfScsE67z+fp3GRsr9iOotSNt7PCx85Y9aeaddcu8YrvCsLeFckW+E3zseGW9p+n3Unadpv5VWBOeCVXKkcixt+Fr5HVGAMmVsC8sCv0SvkHYPvA1yAD9JGwLz31JAvRYOxHAjwCOgary7hPAn4F6EWCclSwBXJdxVDGHl9mqpL3uAUxmUV+URV/3AOYyx3tNDeBV5jir4UKp+xNgCY8c//9t2E+UpYQb86jbUGG9I26m0KDFXN6/dVV+Cd4LqzzZPWVsRFlO5+10VSEjLLGrFlvGYzOazIqJbR5BNGZL6UbPRpsAGrGpd523emOOVczhoqsFYWMiZGCja+88fFHOhIqcdts4I7IxUdujRddpt87AttmJ7LGHZRvITorNCNllSQwo08Y9+tAXHQBH8BmQOLyFow8+OH0/Xi87vPWNhCyvCG2hUX9wyN8kKQMpAykDjzED/wAOt9HUp+PK6gAAAABJRU5ErkJggg==");background-size:cover}#toolPanel .undo:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABOlJREFUaAXtWU2IW1UUPufmZ/KSUcoknYhUqIouHEdcWLqxoDA2E/82goMFdzIgpcWFiriw1YWb2UilDAri30JmIYKlJhkLFQTpQhBGZ+NPZyitNm3mh2knL5kk93jOewam8b6Xl0wYI+TB5L137z0/37nnnXPuGYDBNbDAwAIDCwwssAML4A5o/0WaLtBoXVeeBNCPAeAYAe3n++3uQtpAwGUAWgRQ34VV7JtiBq+5c93/9gTA3rx9SBO9RghZIAoHUgexjgQ5hThzfdL6PhCNYdGOAKTPVe6p1RungOAphzdiDYEKgDgf0vAjKuuP1D5Yl7nSZdhD2r63oeARBnmYADN8j7h0cDaC6lgxYy057x38+AIgIuSLTPxSufILbPEPec0wICuJ6r1YNHb6z8exZFrfOnbneUpVtipHgfQrbIA9LOcmS5ouZeNftK71ezcC2H+eYhtVe5799SH2289jYevklQlcaTIaydtvseC3nXfEuQhax7v1Z/luamTzLtKUy0+dWJ203mnKanc3AkgWygdJ04VtxGuo8MR41JpdqFbedJXHBio6tpJJzG5b1/VjsrD5Mml8n40W4t0MDMIIIP1tdbxWry/w5HXW6Cf2ocOiGb9f5ud9/NTgl6nVyfiXXWtsIBzJl59jd5oTEArwSBB3UgY+0LCiy+44Dq9kExml4Fn20d9c5XkG4eeQUgsm2p2MiUFkV4WHfF/pgn13O35GAKVH8QYTljiOW6PnKF3KJM7ccZf1IFvldd6FDfbXhxsN/ctIrjwzcoH+ifPtRAWbd1ySvysJDjXS7FL+lxGAkLhJB6BOrhUWx3CLt3QmFInfz0Qf8RKO9/Qqrpd/3VuoZP3FdDYrQYEVWJfwLDnGj9oTALvLkhCqOtyyjdcmsFjKJl5SGD7AQhaJIK21/oqjScJPUCdzTkTjsCw0kiD9aD0BILoAOBPcAuAkkUoVNp/RUHuX9+kBlzmtccKq+QnqdE5yCifEmmR3CbVe9N4AgJwdINAOAEk8yYL9xqm8fVFr+Jq3N8OJpyLuRDE8IC7mJaSbcUmITlbn0sStr8xcPOsWRaElDQ12cziYzJc/q1bs5/mjHhI2HJF+Z+Vn48PWx5cO4ZqZdQ9GuSThgPG0WxzCJyaOngD0bUM/4E17k6PBuPyx2po/7DMhUKeLmaF5rxLDJKTbMamn6g4xjnnx8AQgoXQ0V36igTBNqJajGj69mrWWhRGH0l25pBgEXWYnkLLcfO2WLmbpbUbHFin616VylU22tZqNO+7bSuL5Ebcu7Nf3vgYgZwjXcLThZcC+BiAHIFG8WRWYQPQ1AOf05mgt52jz1dcAOAc4Zbw0Aczq84zXxH89LpnfOTfz4V86GF76dARAjppejHo97p6XKcIZP+d3XA0MIJm3X7xRtRf8CqtegXBkyGGfL2m7+PENDICLuikuKe5zDuB+HHsw5x7yOYQinG3XMwoMIBIOHZfWB39YU3IA74GeRhYOb5YhsqRXZFy0bTAwgOJE7CL747TQSvfAOYBvY9SLR+HpdiY49rOsII2uwABEQadLwC0PhhDiCmuulzvhWt7tSEhbJUhHQnTqqpjr+8aWIGt3pfL2ES5zP5DuAZuhv1qL7ZRvzvd9c7epaLv7/7a93gpMEtBu/4OjVYfB+8ACAwsMLDCwQEcW+BshWTaR4gPCwwAAAABJRU5ErkJggg==")}#toolPanel .confirm{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAN5JREFUaAXtmE0KwjAQhXsuvUZBxIU9RN17WZfeQNE3iwEXSqJmknnwAkMaOovvfSn9myYNGZABGZABGZABGagxMKNpX9OYsecEqAfqmhGuxOTwdzQeS83Zzq8AMvMGv6CoBjX862WzUGkHrOBH7ZjMu3l74h180WFubv4CaLv3nhnhjXmHuqGiQzQ3b/A+okOEwkeH6AIfFaIrfOsQQ+BbhRgK/2+IFPC/hkgF/22IlPC1IVLDl0JQwH8KQQX/LgTtB7i/O1H+PfCd2OBg6wvNMiADMiADMiADMkBg4Akg3m3A8SMAAwAAAABJRU5ErkJggg==");background-size:cover}#toolPanel .confirm:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAWBJREFUaAXtmDtOw0AQhmcCDa0xOQycgB4JIRokboCgBlo6JA5AQSoOsFruROlNQ3bZAQWCoyTY+/BG+t1Efmjn+z+vPesQYYMBGIABGIABGICBjQYqbU5qZc7aF47aB0rc9+A3ZN2rZffU5tttHyhtX+AtuQcitsx8VRrfWp5am+tKNa5SZravphdrLy7t5HbD+2mzveYBP9DDIG8bTBuR/9Xx9PQ8140INb/UidnRo7X2pVbNXeoQf5oU8eX78d5z15pLAUZMvtvxzBLdpgwRA35l2ANtTn33+5CHKkWI0GmzEnzxRKoQWeDnQWKHyAofO8Qg8LFCDAofGqII+L4hioLvGqJI+P+GKBp+U4jc8DwH6vMrfcKvOSZEbsevSe79EqT5+QDvubbpyhEUQIothvgu7v89yAQv9YIDyCC/IYhzwkvtaNtYm8PxmzmKNiAGggEYgAEYgAEYgIH0Bj4BteBmoOo+DxkAAAAASUVORK5CYII=")}.__screenshot-lock-scroll{height:100%!important;margin:0;overflow:hidden!important}.ico-panel{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #fff;height:0;left:23px;position:absolute;top:0;transform:rotate(180deg);width:0;z-index:9999}.ico-panel img{height:100%;width:100%}#optionPanel{background:#fff;border-radius:5px;box-sizing:content-box;height:20px;left:0;padding:10px;position:absolute;top:6px;z-index:9999}#optionPanel .text-size-panel{align-items:center;border:1px solid #bebfca;border-radius:3px;cursor:pointer;display:flex;float:left;font-size:14px;height:20px;justify-content:center;overflow:hidden;width:65px}#optionPanel .text-select-panel{background:#fff;border:1px solid #d8dcea;border-radius:3px;display:flex;flex-wrap:wrap;justify-content:center;left:10px;position:absolute;top:-321px;width:65px}#optionPanel .text-select-panel .text-item{cursor:pointer;font-size:14px;height:20px;margin-bottom:5px;text-align:center;width:45px}#optionPanel .text-select-panel .text-item:hover{background:#bebfca}#optionPanel .text-select-panel .text-item:first-child{margin-top:5px}#optionPanel .brush-select-panel{float:left;height:20px}#optionPanel .brush-select-panel .item-panel{float:left;height:20px;margin-right:18px;width:20px}#optionPanel .brush-select-panel .item-panel:first-child{margin-left:2px}#optionPanel .brush-select-panel .item-panel:last-child{margin-right:0}#optionPanel .brush-select-panel .brush-small{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKlJREFUeNrs18EKgkAUhWEnwmW1amObHqKeo0ftOfIh3OSmlba0xXSEK4SICAoz4X/gINwL8sE4C533Pok5myTyAAQIECBAgAAB/jdwO/cFO3dsH3v1qmY2LtWHWr/9KyxQOag3Nf2ZnQ17V6vQR3zp4bqktgv+DWYjuxO3eELKkd0zBmCuNgPzxnbBgZXd1kL9WIslbnAbx38xQIAAAQIECBDgqoFfAQYAhLQbgzDvXkAAAAAASUVORK5CYII=");background-size:cover}#optionPanel .brush-select-panel .brush-small-active,#optionPanel .brush-select-panel .brush-small:active,#optionPanel .brush-select-panel .brush-small:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALhJREFUeNpi/P//P8NgBkwMgxyMOnDUgaMOHHXgqANHHTjqwFEHDm0HslBqAB+jGIhSBeIOIHaBCu8B4gogvv3p/yuKzGektMEKdKA6kDoBxAJoUh+A2ALowJsDHcVtWBzHABVro9RwaoTgRxCFQ/oLMAR5R3MxAbAHj9yuweDAamiGYMCSSaoHgwNvgHIrEK8D4s9QvA4qdmPAM8loVTfqwFEHjjpw1IGjDhx14KgDRx04pB0IEGAAHeMoHW2kl/cAAAAASUVORK5CYII=")}#optionPanel .brush-select-panel .brush-medium{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAS9JREFUeNrs2EsLgkAQB/BWupQQHXpczbp36/EB6ptH1M2D17RLhx6XQG9lszCBxEa5zoTQDPxvjv52RR1UWZbVqlxOreIlQAEKUID/Dqx/e2BL9d4t0MP0IS7kBkkgZ0iMub82XrMjLdBQGjXTdgO6jRlpC2QDiX51ixVkClkacMbNhyywR/0COIGMLfrG2MsK9C1xeaTPBdTHzgkezHmR6zoFd88lAOpzDDmAHuHrzeMA9giBXQ5ggxDY5ADeq/4tTgmvm3IAL4TAEwcwJgTGHMAdTillK8FzsTwkawLgGkcylm+xXnlQAhcU2T3baWYLCS36QuzlmahzpX/mrCAHnPE+zYRXhO1strzMRK0n5D0OEQNIJzdMPEf+CGHWL3klf7cEKEABClCApeohwADD8zb9WRTsHgAAAABJRU5ErkJggg==");background-size:cover}#optionPanel .brush-select-panel .brush-medium-active,#optionPanel .brush-select-panel .brush-medium:active,#optionPanel .brush-select-panel .brush-medium:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAU9JREFUeNpi/P//P8NgBkwMgxyMOnDUgaMOHHXgSHcgC7EK+RjFsAmzAXEAFFsCsRQQ/wLiJ0B8HojXA/FGqBgK+PT/FVH2MhJb1WFxYCAQdwGxCgGtd4C4HIjXkeNAcqKYGYg7oRaqEKEepGYtVA8zzaIYCbQBcRkZ+mB6ymmZSULIdByyI0NI0UBKGgRliLtALENhxnwKxErANPiL2iEYSgXHgYA0EIfRIooDqFi8BdDCgaZUdKAJLRwoQUUHStLCgb8YBgCQ4sDnVLT3OS0ceImKDjxDCwduoKIDN9DCgauhrRRKwVOoWTTJJEVUcGAhEP+kVV0M8nk3BY7rJiX0yG1uVQLxFDL0TYXqpXmT/y8Q50JbJXeIUH8HWo/nQPWSBChpUcOa/KHQ1rUxtCEAywhnoU3+1XRp8o/26kYdOOrAUQeOOnDUgVgBQIABAPYuSgtJpajwAAAAAElFTkSuQmCC")}#optionPanel .brush-select-panel .brush-big{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAaNJREFUeNrcmMFKw0AQhpOqRdGUCloD2lMv1T6B6RMI4sOK4BM0b1Clh56skFahpVaUaln/wBQkzKYmTbJTB75TSPJlN7uzM7ZSypIc9sYIVuxa0nsdUAcuqIIDUKZrczADExCAJ/CW5OFTNUolaIMGaIGThB80BF3QByoPwVPQptFaJ8JR7YDnrAS3gAfOM/69HoEPFusI7oIrcJzTGngB9+AzjWAod5PBlP5lym+jkqsEt8E1qBW0m4Q2d+A7KljS3OAVKGfRuzzuQkmzWpsG9uQmvTtW0KatxFS0yUEr2ChgUcRFlRy0ghcC0m9LJ+hQXjUdYQqtcIJ1QYeYM07QFSTocoKHggSrnOC+IEGHEywLEtyJyySi4rfgXJDXFyf4LkhwxgmOBQmOOcFAkGDACQ4ECQ44wamQURySC7vNPAgQ7MYdt/pUxJiKCTloBRUV1abCj3YduEwSVvw9A3I9bqHqUl2HSsGiYqSbuY0t3JexR62Po5zkXqn18ZG2N7PsMlxaQptH0TrBs7Jpv/mrMte/bGByx/LiWsBSQ7zgjwADAPqYqQ1c9nN+AAAAAElFTkSuQmCC");background-size:cover}#optionPanel .brush-select-panel .brush-big-active,#optionPanel .brush-select-panel .brush-big:active,#optionPanel .brush-select-panel .brush-big:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAhRJREFUeNrUmLtPAkEQh+/UghCxw06JNuCjJURBK+OjsNVEW4KF6P+iYKGF9rYWhmClKKGg8wGNRu2kA4M25PyNGRKFPb0Fjlsm+SKG3MyXLLezs7phGJrK0acpHgP1D0P6sOyzY2AJRMAE8AEPf1cBz+ABZEAKPMkkLxtv33/1+hJbFOwHayAOZuh5i/WoSBYkwSmo2SG4ABIg0OaqFcAOuLAiaOU36AKHIN0BOY1zpDmnq92XxAsuQcyG33+Mc3tbFaQHr0DQxpc0yDW8soJucAb8XdhJ/FzLLSO4B0Jd3O5CXNOSIL2tUQf25CjX/lOQ/t93sHEkeK81FVznruBUBLgRmApuK9B+42aC1FtnFRCkFjouElyW6K12hs6HkCbBsEKnrLBIcEohwUmR4IhCgj6RoEchwcGeOfL/FKwo5PUuEnxVSPBFJHivkOCdSDCjkOC1SDDF05fTYbBLk+AjuFFAMMsuwm3mQAHB5K/G3DAX02HxtkPjZasz8zQN9mZzcY2Haqdit/HWQdRJaOI/cUDumAd6S1MdnWpzXZTLma2cmWAVrIJiF+SKXKsqe7NQAvMgb6NcnmuUWrn6oKBXaQ4c2SBHOSNcQ2tVkOIDbIHFDi15kXNRzk+Z49Z/keaxYIN3e9m2SM9sco605QlK8oZVaxhTV3iZaGMfpTT8XZmPTAU+hJxr7V4B98KJWsn4EmAAKPJ2SXt/mW0AAAAASUVORK5CYII=")}#optionPanel .right-panel{align-items:center;display:flex;float:left;margin-left:39px}#optionPanel .right-panel .color-panel{background:#fff;border:1px solid #e5e6e5;border-radius:5px;display:flex;flex-wrap:wrap;justify-content:center;position:absolute;right:28px;top:-225px;width:72px}#optionPanel .right-panel .color-panel .color-item{height:20px;margin-bottom:5px;width:62px}#optionPanel .right-panel .color-panel .color-item:first-child{background:#f53440;margin-top:5px}#optionPanel .right-panel .color-panel .color-item:nth-child(2){background:#f65e95}#optionPanel .right-panel .color-panel .color-item:nth-child(3){background:#d254cf}#optionPanel .right-panel .color-panel .color-item:nth-child(4){background:#12a9d7}#optionPanel .right-panel .color-panel .color-item:nth-child(5){background:#30a345}#optionPanel .right-panel .color-panel .color-item:nth-child(6){background:#facf50}#optionPanel .right-panel .color-panel .color-item:nth-child(7){background:#f66632}#optionPanel .right-panel .color-panel .color-item:nth-child(8){background:#989998}#optionPanel .right-panel .color-panel .color-item:nth-child(9){background:#000}#optionPanel .right-panel .color-panel .color-item:nth-child(10){background:#feffff;border:1px solid #e5e6e5}#optionPanel .right-panel .color-select-panel{background:#f53340;border:1px solid #e5e6e5;height:20px;width:62px}#optionPanel .right-panel .color-select-panel.text-select-status{margin-left:31px}#optionPanel .right-panel .pull-down-arrow{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAQCAYAAAABOs/SAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAANNJREFUeNq01TEKwjAUxvHXOAhKJ3Fwc9PVzbWipxCdHLyMV9AD6A2EegRdvYBOnd3E70ELIcT2JU0C/1BI4AeB8pKUhlMiOqAtKijuGqEj2ne61D/jY1V2QZ+IaI7maKywrdETzdAVDSKi/Lp3tGP4hRYRcRPlly1Uech4FgG3onygtEvvwDijNxtqwiHxCp3YUBscAm9E/8FtcBFaB/vgYrQJdsGdUAkswZ1RKVyH6+hDivJKMCTa/CY9DV26DBlX2MTJB/WFK/yEvmjjM05/AgwANuZSRB8r5twAAAAASUVORK5CYII=");background-size:cover;height:8px;margin-left:10px;width:15px}#cutBoxSizePanel{align-items:center;background:rgba(0,0,0,.4);border-radius:3px;color:#fff;display:flex;font-size:14px;height:25px;justify-content:center;width:85px}#cutBoxSizePanel,#textInputPanel{left:0;position:absolute;top:0;z-index:9999}#textInputPanel{border:none;box-sizing:border-box;font-weight:700;margin:0;min-height:20px;min-width:20px;outline:none;padding:0}.hidden-screen-shot-scroll{height:100vh;overflow:hidden;width:100vw}.no-cursor *{cursor:none}');var xt=function(){function t(){this.beginPoint={x:0,y:0},this.stopPoint={x:0,y:0},this.polygonVertex=[],this.angle=0,this.arrowInfo={edgeLen:50,angle:30},this.size=1}return t.prototype.draw=function(t,e,o,n,r,i,a){switch(this.beginPoint.x=e,this.beginPoint.y=o,this.stopPoint.x=n,this.stopPoint.y=r,this.arrowCord(this.beginPoint,this.stopPoint),this.sideCord(),this.drawArrow(t,i),a){case 2:default:this.size=1;break;case 5:this.size=1.3;break;case 10:this.size=1.7}},t.prototype.arrowCord=function(t,e){this.polygonVertex[0]=t.x,this.polygonVertex[1]=t.y,this.polygonVertex[6]=e.x,this.polygonVertex[7]=e.y,this.getRadian(t,e),this.polygonVertex[8]=e.x-this.arrowInfo.edgeLen*Math.cos(Math.PI/180*(this.angle+this.arrowInfo.angle)),this.polygonVertex[9]=e.y-this.arrowInfo.edgeLen*Math.sin(Math.PI/180*(this.angle+this.arrowInfo.angle)),this.polygonVertex[4]=e.x-this.arrowInfo.edgeLen*Math.cos(Math.PI/180*(this.angle-this.arrowInfo.angle)),this.polygonVertex[5]=e.y-this.arrowInfo.edgeLen*Math.sin(Math.PI/180*(this.angle-this.arrowInfo.angle))},t.prototype.getRadian=function(t,e){this.angle=Math.atan2(e.y-t.y,e.x-t.x)/Math.PI*180,this.setArrowInfo(50*this.size,30*this.size),this.dynArrowSize()},t.prototype.sideCord=function(){var t={x:0,y:0};t.x=(this.polygonVertex[4]+this.polygonVertex[8])/2,t.y=(this.polygonVertex[5]+this.polygonVertex[9])/2,this.polygonVertex[2]=(this.polygonVertex[4]+t.x)/2,this.polygonVertex[3]=(this.polygonVertex[5]+t.y)/2,this.polygonVertex[10]=(this.polygonVertex[8]+t.x)/2,this.polygonVertex[11]=(this.polygonVertex[9]+t.y)/2},t.prototype.setArrowInfo=function(t,e){this.arrowInfo.edgeLen=t,this.arrowInfo.angle=e},t.prototype.dynArrowSize=function(){var t=this.stopPoint.x-this.beginPoint.x,e=this.stopPoint.y-this.beginPoint.y,o=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));o<50?this.arrowInfo.edgeLen=o/2:o<250?this.arrowInfo.edgeLen/=2:o<500&&(this.arrowInfo.edgeLen=this.arrowInfo.edgeLen*o/500)},t.prototype.drawArrow=function(t,e){t.fillStyle=e,t.beginPath(),t.moveTo(this.polygonVertex[0],this.polygonVertex[1]),t.lineTo(this.polygonVertex[2],this.polygonVertex[3]),t.lineTo(this.polygonVertex[4],this.polygonVertex[5]),t.lineTo(this.polygonVertex[6],this.polygonVertex[7]),t.lineTo(this.polygonVertex[8],this.polygonVertex[9]),t.lineTo(this.polygonVertex[10],this.polygonVertex[11]),t.closePath(),t.fill()},t}(),It=function(t,e,o){var n=t.width,r=t.data,i=[];return i[0]=r[4*(o*n+e)],i[1]=r[4*(o*n+e)+1],i[2]=r[4*(o*n+e)+2],i[3]=r[4*(o*n+e)+3],i},Bt=function(t,e,o,n){var r=t.width,i=t.data;i[4*(o*r+e)]=n[0],i[4*(o*r+e)+1]=n[1],i[4*(o*r+e)+2]=n[2],i[4*(o*r+e)+3]=n[3]};function Et(t,e){var o=e.startX,n=e.startY,r=e.width,i=e.height,a=t/2,l=[];return l[0]={x:o+a,y:n+a,width:r-t,height:i-t,index:1,option:1},l[1]={x:o+a,y:n,width:r-t,height:a,index:2,option:2},l[2]={x:o-a+r/2,y:n-a,width:t,height:a,index:2,option:2},l[3]={x:o+a,y:n-a+i,width:r-t,height:a,index:2,option:3},l[4]={x:o-a+r/2,y:n+i,width:t,height:a,index:2,option:3},l[5]={x:o,y:n+a,width:a,height:i-t,index:3,option:4},l[6]={x:o-a,y:n-a+i/2,width:a,height:t,index:3,option:4},l[7]={x:o-a+r,y:n+a,width:a,height:i-t,index:3,option:5},l[8]={x:o+r,y:n-a+i/2,width:a,height:t,index:3,option:5},l[9]={x:o-a,y:n-a,width:t,height:t,index:4,option:6},l[10]={x:o-a+r,y:n-a+i,width:t,height:t,index:4,option:7},l[11]={x:o-a+r,y:n-a,width:t,height:t,index:5,option:8},l[12]={x:o-a,y:n-a+i,width:t,height:t,index:5,option:9},l}const Pt="[modern-screenshot]",kt="undefined"!=typeof window,Rt=kt&&"Worker"in window,Tt=kt?window.navigator?.userAgent:"",Ft=Tt.includes("Chrome"),Dt=Tt.includes("AppleWebKit")&&!Ft,Ut=Tt.includes("Firefox"),Nt=t=>1===t.nodeType,Xt=t=>"object"==typeof t.className,Ot=t=>"image"===t.tagName,zt=t=>Nt(t)&&void 0!==t.style&&!Xt(t),Yt=t=>8===t.nodeType,Mt=t=>"IMG"===t.tagName,Qt=t=>"VIDEO"===t.tagName,Lt=t=>"SLOT"===t.tagName;function Gt(t){const e=t?.createElement?.("canvas");return e&&(e.height=e.width=1),Boolean(e)&&"toDataURL"in e&&Boolean(e.toDataURL("image/webp").includes("image/webp"))}const Ht=t=>t.startsWith("data:");function Jt(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(kt&&t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;if(!kt)return t;const o=Kt().implementation.createHTMLDocument(),n=o.createElement("base"),r=o.createElement("a");return o.head.appendChild(n),o.body.appendChild(r),e&&(n.href=e),r.href=t,r.href}function Kt(t){return(t&&Nt(t)?t?.ownerDocument:t)??window.document}const Wt="http://www.w3.org/2000/svg";const Vt=t=>function(t,e){return new Promise(((o,n)=>{const r=new FileReader;r.onload=()=>o(r.result),r.onerror=()=>n(r.error),r.onabort=()=>n(new Error(`Failed read blob to ${e}`)),"dataUrl"===e?r.readAsDataURL(t):"arrayBuffer"===e&&r.readAsArrayBuffer(t)}))}(t,"dataUrl");function Zt(t,e){const o=Kt(e).createElement("img");return o.decoding="sync",o.loading="eager",o.src=t,o}function jt(t,e){return new Promise((o=>{const{timeout:n,ownerDocument:r,onError:i,onWarn:a}=e??{},l="string"==typeof t?Zt(t,Kt(r)):t;let s=null,c=null;function u(){o(l),s&&clearTimeout(s),c?.()}if(n&&(s=setTimeout(u,n)),Qt(l)){const t=l.currentSrc||l.src;if(!t)return l.poster?jt(l.poster,e).then(o):u();if(l.readyState>=2)return u();const n=u,r=e=>{a?.("Failed video load",t,e),i?.(e),u()};c=()=>{l.removeEventListener("loadeddata",n),l.removeEventListener("error",r)},l.addEventListener("loadeddata",n,{once:!0}),l.addEventListener("error",r,{once:!0})}else{const t=Ot(l)?l.href.baseVal:l.currentSrc||l.src;if(!t)return u();const e=async()=>{if(Mt(l)&&"decode"in l)try{await l.decode()}catch(e){a?.("Failed to decode image, trying to render anyway",l.dataset.originalSrc||t,e)}u()},o=e=>{a?.("Failed image load",l.dataset.originalSrc||t,e),u()};if(Mt(l)&&l.complete)return e();c=()=>{l.removeEventListener("load",e),l.removeEventListener("error",o)},l.addEventListener("load",e,{once:!0}),l.addEventListener("error",o,{once:!0})}}))}const qt=function(){let t=0;return()=>(t+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${t}`)}();function $t(t){return t?.split(",").map((t=>t.trim().replace(/"|'/g,"").toLowerCase())).filter(Boolean)}let _t=0;function te(t){const e=`${Pt}[#${_t}]`;return _t++,{time:o=>t&&console.time(`${e} ${o}`),timeEnd:o=>t&&console.timeEnd(`${e} ${o}`),warn:function(){return t&&function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return console.warn(Pt,...e)}(...arguments)}}}function ee(t){return{cache:t?"no-cache":"force-cache"}}async function oe(t,e){return(o=t)&&"__CONTEXT__"in o?t:async function(t,e){const{scale:o=1,workerUrl:n,workerNumber:r=1}=e||{},i=Boolean(e?.debug),a=e?.features??!0,l=t.ownerDocument??(kt?window.document:void 0),s=t.ownerDocument?.defaultView??(kt?window:void 0),c=new Map,u={width:0,height:0,quality:1,type:"image/png",scale:o,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:i,fetch:{requestInit:ee(e?.fetch?.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1,...e?.fetch},fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:r,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1,...e,__CONTEXT__:!0,log:te(i),node:t,ownerDocument:l,ownerWindow:s,dpi:1===o?null:96*o,svgStyleElement:ne(l),svgDefsElement:l?.createElementNS(Wt,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...Array.from({length:Rt&&n&&r?r:0})].map((()=>{try{const t=new Worker(n);return t.onmessage=async t=>{const{url:e,result:o}=t.data;o?c.get(e)?.resolve?.(o):c.get(e)?.reject?.(new Error(`Error receiving message from worker: ${e}`))},t.onmessageerror=t=>{const{url:e}=t.data;c.get(e)?.reject?.(new Error(`Error receiving message from worker: ${e}`))},t}catch(t){return u.log.warn("Failed to new Worker",t),null}})).filter(Boolean),fontFamilies:new Map,fontCssTexts:new Map,acceptOfImage:`${[Gt(l)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:c,drawImageCount:0,tasks:[],features:a,isEnable:t=>"restoreScrollPosition"===t?"boolean"!=typeof a&&(a[t]??!1):"boolean"==typeof a?a:a[t]??!0};u.log.time("wait until load"),await async function(t,e){zt(t)&&(Mt(t)||Qt(t)?await jt(t,e):await Promise.all(["img","video"].flatMap((o=>Array.from(t.querySelectorAll(o)).map((t=>jt(t,e)))))))}(t,{timeout:u.timeout,onWarn:u.log.warn}),u.log.timeEnd("wait until load");const{width:d,height:h}=function(t,e){let{width:o,height:n}=e;if(Nt(t)&&(!o||!n)){const e=t.getBoundingClientRect();o=o||e.width||Number(t.getAttribute("width"))||0,n=n||e.height||Number(t.getAttribute("height"))||0}return{width:o,height:n}}(t,u);return u.width=d,u.height=h,u}(t,{...e,autoDestruct:!0});var o}function ne(t){if(!t)return;const e=t.createElement("style"),o=e.ownerDocument.createTextNode("\n.______background-clip--text {\n  background-clip: text;\n  -webkit-background-clip: text;\n}\n");return e.appendChild(o),e}async function re(t,e){const{log:o,timeout:n,drawImageCount:r,drawImageInterval:i}=e;o.time("image to canvas");const a=await jt(t,{timeout:n,onWarn:e.log.warn}),{canvas:l,context2d:s}=function(t,e){const{width:o,height:n,scale:r,backgroundColor:i,maximumCanvasSize:a}=e,l=t.createElement("canvas");l.width=Math.floor(o*r),l.height=Math.floor(n*r),l.style.width=`${o}px`,l.style.height=`${n}px`,a&&(l.width>a||l.height>a)&&(l.width>a&&l.height>a?l.width>l.height?(l.height*=a/l.width,l.width=a):(l.width*=a/l.height,l.height=a):l.width>a?(l.height*=a/l.width,l.width=a):(l.width*=a/l.height,l.height=a));const s=l.getContext("2d");s&&i&&(s.fillStyle=i,s.fillRect(0,0,l.width,l.height));return{canvas:l,context2d:s}}(t.ownerDocument,e),c=()=>{try{s?.drawImage(a,0,0,l.width,l.height)}catch(t){e.log.warn("Failed to drawImage",t)}};if(c(),e.isEnable("fixSvgXmlDecode"))for(let t=0;t<r;t++)await new Promise((e=>{setTimeout((()=>{c(),e()}),t+i)}));return e.drawImageCount=0,o.timeEnd("image to canvas"),l}function ie(t,e){if(t.ownerDocument)try{const e=t.toDataURL();if("data:,"!==e)return Zt(e,t.ownerDocument)}catch(t){e.log.warn("Failed to clone canvas",t)}const o=t.cloneNode(!1),n=t.getContext("2d"),r=o.getContext("2d");try{return n&&r&&r.putImageData(n.getImageData(0,0,t.width,t.height),0,0),o}catch(t){e.log.warn("Failed to clone canvas",t)}return o}function ae(t,e){return(t=>"CANVAS"===t.tagName)(t)?ie(t,e):(t=>"IFRAME"===t.tagName)(t)?function(t,e){try{if(t?.contentDocument?.body)return fe(t.contentDocument.body,e)}catch(t){e.log.warn("Failed to clone iframe",t)}return t.cloneNode(!1)}(t,e):Mt(t)?function(t){const e=t.cloneNode(!1);return t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager"),e}(t):Qt(t)?async function(t,e){if(t.ownerDocument&&!t.currentSrc&&t.poster)return Zt(t.poster,t.ownerDocument);const o=t.cloneNode(!1);o.crossOrigin="anonymous",t.currentSrc&&t.currentSrc!==t.src&&(o.src=t.currentSrc);const n=o.ownerDocument;if(n){let r=!0;if(await jt(o,{onError:()=>r=!1,onWarn:e.log.warn}),!r)return t.poster?Zt(t.poster,t.ownerDocument):o;o.currentTime=t.currentTime,await new Promise((t=>{o.addEventListener("seeked",t,{once:!0})}));const i=n.createElement("canvas");i.width=t.offsetWidth,i.height=t.offsetHeight;try{const t=i.getContext("2d");t&&t.drawImage(o,0,0,i.width,i.height)}catch(n){return e.log.warn("Failed to clone video",n),t.poster?Zt(t.poster,t.ownerDocument):o}return ie(i,e)}return o}(t,e):t.cloneNode(!1)}const le=["width","height","-webkit-text-fill-color"],se=["stroke","fill"];function ce(t,e,o){const{defaultComputedStyles:n}=o,r=t.nodeName.toLowerCase(),i=Xt(t)&&"svg"!==r,a=i?se.map((e=>[e,t.getAttribute(e)])).filter((t=>{let[,e]=t;return null!==e})):[],l=[i&&"svg",r,a.map(((t,e)=>`${t}=${e}`)).join(","),e].filter(Boolean).join(":");if(n.has(l))return n.get(l);const s=function(t){let e=t.sandbox;if(!e){const{ownerDocument:o}=t;try{o&&(e=o.createElement("iframe"),e.id=`__SANDBOX__-${qt()}`,e.width="0",e.height="0",e.style.visibility="hidden",e.style.position="fixed",o.body.appendChild(e),e.contentWindow?.document.write('<!DOCTYPE html><meta charset="UTF-8"><title></title><body>'),t.sandbox=e)}catch(e){t.log.warn("Failed to getSandBox",e)}}return e}(o),c=s?.contentWindow;if(!c)return new Map;const u=c?.document;let d,h;i?(d=u.createElementNS(Wt,"svg"),h=d.ownerDocument.createElementNS(d.namespaceURI,r),a.forEach((t=>{let[e,o]=t;h.setAttributeNS(null,e,o)})),d.appendChild(h)):d=h=u.createElement(r),h.textContent=" ",u.body.appendChild(d);const A=c.getComputedStyle(h,e),g=new Map;for(let t=A.length,e=0;e<t;e++){const t=A.item(e);le.includes(t)||g.set(t,A.getPropertyValue(t))}return u.body.removeChild(d),n.set(l,g),g}function ue(t,e,o){const n=new Map,r=[],i=new Map;if(o)for(const t of o)a(t);else for(let e=t.length,o=0;o<e;o++){a(t.item(o))}for(let t=r.length,e=0;e<t;e++)i.get(r[e])?.forEach(((t,e)=>n.set(e,t)));function a(o){const a=t.getPropertyValue(o),l=t.getPropertyPriority(o),s=o.lastIndexOf("-"),c=s>-1?o.substring(0,s):void 0;if(c){let t=i.get(c);t||(t=new Map,i.set(c,t)),t.set(o,[a,l])}(e.get(o)!==a||l)&&(c?r.push(c):n.set(o,[a,l]))}return n}const de=[":before",":after"],he=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];const Ae=new Set(["symbol"]);async function ge(t,e,o,n,r){if(Nt(o)&&((t=>"STYLE"===t.tagName)(o)||(t=>"SCRIPT"===t.tagName)(o)))return;if(n.filter&&!n.filter(o))return;Ae.has(e.nodeName)||Ae.has(o.nodeName)?n.currentParentNodeStyle=void 0:n.currentParentNodeStyle=n.currentNodeStyle;const i=await fe(o,n,!1,r);n.isEnable("restoreScrollPosition")&&function(t,e){if(!zt(t)||!zt(e))return;const{scrollTop:o,scrollLeft:n}=t;if(!o&&!n)return;const{transform:r}=e.style,i=new DOMMatrix(r),{a:a,b:l,c:s,d:c}=i;i.a=1,i.b=0,i.c=0,i.d=1,i.translateSelf(-n,-o),i.a=a,i.b=l,i.c=s,i.d=c,e.style.transform=i.toString()}(t,i),e.appendChild(i)}async function pe(t,e,o,n){for(let r=(Nt(t)?t.shadowRoot?.firstChild:void 0)??t.firstChild;r;r=r.nextSibling)if(!Yt(r))if(Nt(r)&&Lt(r)&&"function"==typeof r.assignedNodes){const i=r.assignedNodes();for(let r=0;r<i.length;r++)await ge(t,e,i[r],o,n)}else await ge(t,e,r,o,n)}const me=/^[\w-:]+$/;async function fe(t,e){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;const{ownerDocument:r,ownerWindow:i,fontFamilies:a}=e;if(r&&(t=>3===t.nodeType)(t))return n&&/\S/.test(t.data)&&n(t.data),r.createTextNode(t.data);if(r&&i&&Nt(t)&&(zt(t)||Xt(t))){const n=await ae(t,e);if(e.isEnable("removeAbnormalAttributes")){const t=n.getAttributeNames();for(let e=t.length,o=0;o<e;o++){const e=t[o];me.test(e)||n.removeAttribute(e)}}const r=e.currentNodeStyle=function(t,e,o,n){const{ownerWindow:r,includeStyleProperties:i,currentParentNodeStyle:a}=n,l=e.style,s=r.getComputedStyle(t),c=ce(t,null,n);a?.forEach(((t,e)=>{c.delete(e)}));const u=ue(s,c,i);u.delete("transition-property"),u.delete("all"),u.delete("d"),u.delete("content"),o&&(u.delete("margin-top"),u.delete("margin-right"),u.delete("margin-bottom"),u.delete("margin-left"),u.delete("margin-block-start"),u.delete("margin-block-end"),u.delete("margin-inline-start"),u.delete("margin-inline-end"),u.set("box-sizing",["border-box",""])),"text"===u.get("background-clip")?.[0]&&e.classList.add("______background-clip--text"),Ft&&(u.has("font-kerning")||u.set("font-kerning",["normal",""]),"hidden"!==u.get("overflow-x")?.[0]&&"hidden"!==u.get("overflow-y")?.[0]||"ellipsis"!==u.get("text-overflow")?.[0]||t.scrollWidth!==t.clientWidth||u.set("text-overflow",["clip",""]));for(let t=l.length,e=0;e<t;e++)l.removeProperty(l.item(e));return u.forEach(((t,e)=>{let[o,n]=t;l.setProperty(e,o,n)})),u}(t,n,o,e);o&&function(t,e){const{backgroundColor:o,width:n,height:r,style:i}=e,a=t.style;if(o&&a.setProperty("background-color",o,"important"),n&&a.setProperty("width",`${n}px`,"important"),r&&a.setProperty("height",`${r}px`,"important"),i)for(const t in i)a[t]=i[t]}(n,e);let i=!1;if(e.isEnable("copyScrollbar")){const e=[r.get("overflow-x")?.[0],r.get("overflow-y")?.[0]];i=e.includes("scroll")||(e.includes("auto")||e.includes("overlay"))&&(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)}const l=r.get("text-transform")?.[0],s=$t(r.get("font-family")?.[0]),c=s?t=>{"uppercase"===l?t=t.toUpperCase():"lowercase"===l?t=t.toLowerCase():"capitalize"===l&&(t=t[0].toUpperCase()+t.substring(1)),s.forEach((e=>{let o=a.get(e);o||a.set(e,o=new Set),t.split("").forEach((t=>o.add(t)))}))}:void 0;return function(t,e,o,n,r){const{ownerWindow:i,svgStyleElement:a,svgStyles:l,currentNodeStyle:s}=n;function c(o){const a=i.getComputedStyle(t,o);let c=a.getPropertyValue("content");if(!c||"none"===c)return;r?.(c),c=c.replace(/(')|(")|(counter\(.+\))/g,"");const u=[qt()],d=ce(t,o,n);s?.forEach(((t,e)=>{d.delete(e)}));const h=ue(a,d,n.includeStyleProperties);h.delete("content"),h.delete("-webkit-locale"),"text"===h.get("background-clip")?.[0]&&e.classList.add("______background-clip--text");const A=[`content: '${c}';`];if(h.forEach(((t,e)=>{let[o,n]=t;A.push(`${e}: ${o}${n?" !important":""};`)})),1===A.length)return;try{e.className=[e.className,...u].join(" ")}catch(t){return void n.log.warn("Failed to copyPseudoClass",t)}const g=A.join("\n  ");let p=l.get(g);p||(p=[],l.set(g,p)),p.push(`.${u[0]}:${o}`)}a&&i&&(de.forEach(c),o&&he.forEach(c))}(t,n,i,e,c),function(t,e){((t=>"TEXTAREA"===t.tagName)(t)||(t=>"INPUT"===t.tagName)(t)||(t=>"SELECT"===t.tagName)(t))&&e.setAttribute("value",t.value)}(t,n),Qt(t)||await pe(t,n,e,c),n}const l=t.cloneNode(!1);return await pe(t,l,e),l}function Se(t,e){const{url:o,requestType:n="text",responseType:r="text",imageDom:i}=e;let a=o;const{timeout:l,acceptOfImage:s,requests:c,fetchFn:u,fetch:{requestInit:d,bypassingCache:h,placeholderImage:A},font:g,workers:p,fontFamilies:m}=t;"image"===n&&(Dt||Ut)&&t.drawImageCount++;let f=c.get(o);if(!f){h&&h instanceof RegExp&&h.test(a)&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());const e=n.startsWith("font")&&g&&g.minify,S=new Set;if(e){n.split(";")[1].split(",").forEach((t=>{m.has(t)&&m.get(t).forEach((t=>S.add(t)))}))}const C=e&&S.size,w={url:a,timeout:l,responseType:C?"arrayBuffer":r,headers:"image"===n?{accept:s}:void 0,...d};f={type:n,resolve:void 0,reject:void 0,response:null},f.response=(async()=>{if(u&&"image"===n){const t=await u(o);if(t)return t}return!Dt&&o.startsWith("http")&&p.length?new Promise(((t,e)=>{p[c.size&p.length-1].postMessage({rawUrl:o,...w}),f.resolve=t,f.reject=e})):function(t){const{url:e,timeout:o,responseType:n,...r}=t,i=new AbortController,a=o?setTimeout((()=>i.abort()),o):void 0;return fetch(e,{signal:i.signal,...r}).then((t=>{if(!t.ok)throw new Error("Failed fetch, not 2xx response",{cause:t});switch(n){case"arrayBuffer":return t.arrayBuffer();case"dataUrl":return t.blob().then(Vt);default:return t.text()}})).finally((()=>clearTimeout(a)))}(w)})().catch((e=>{if(c.delete(o),"image"===n&&A)return t.log.warn("Failed to fetch image base64, trying to use placeholder image",a),"string"==typeof A?A:A(i);throw e})),c.set(o,f)}return f.response}async function Ce(t,e,o,n){if(!we(t))return t;for(const[r,i]of function(t,e){const o=[];return t.replace(ve,((t,n,r)=>(o.push([r,Jt(r,e)]),t))),o.filter((t=>{let[e]=t;return!Ht(e)}))}(t,e))try{const e=await Se(o,{url:i,requestType:n?"image":"text",responseType:"dataUrl"});t=t.replace(ye(r),`$1${e}$3`)}catch(t){o.log.warn("Failed to fetch css data url",r,t)}return t}function we(t){return/url\((['"]?)([^'"]+?)\1\)/.test(t)}const ve=/url\((['"]?)([^'"]+?)\1\)/g;function ye(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}const be=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function xe(t,e){const{tasks:o}=e;Nt(t)&&((Mt(t)||Ot(t))&&o.push(...function(t,e){if(Mt(t)){const o=t.currentSrc||t.src;if(!Ht(o))return[Se(e,{url:o,imageDom:t,requestType:"image",responseType:"dataUrl"}).then((e=>{e&&(t.srcset="",t.dataset.originalSrc=o,t.src=e||"")}))];(Dt||Ut)&&e.drawImageCount++}else if(Xt(t)&&!Ht(t.href.baseVal)){const o=t.href.baseVal;return[Se(e,{url:o,imageDom:t,requestType:"image",responseType:"dataUrl"}).then((e=>{e&&(t.dataset.originalSrc=o,t.href.baseVal=e||"")}))]}return[]}(t,e)),"use"===t.tagName&&o.push(...function(t,e){const{ownerDocument:o,svgDefsElement:n}=e,r=t.getAttribute("href")??t.getAttribute("xlink:href");if(!r)return[];const[i,a]=r.split("#");if(a){const r=`#${a}`,l=o?.querySelector(`svg ${r}`);if(i&&t.setAttribute("href",r),n?.querySelector(r))return[];if(l)return n?.appendChild(l.cloneNode(!0)),[];if(i)return[Se(e,{url:i,responseType:"text"}).then((t=>{n?.insertAdjacentHTML("beforeend",t)}))]}return[]}(t,e))),zt(t)&&o.push(...function(t,e){return be.map((o=>{const n=t.getPropertyValue(o);return n&&"none"!==n?((Dt||Ut)&&e.drawImageCount++,Ce(n,null,e,!0).then((e=>{e&&n!==e&&t.setProperty(o,e,t.getPropertyPriority(o))}))):null})).filter(Boolean)}(t.style,e)),t.childNodes.forEach((t=>{xe(t,e)}))}async function Ie(t,e){const{ownerDocument:o,svgStyleElement:n,fontFamilies:r,fontCssTexts:i,tasks:a,font:l}=e;if(o&&n&&r.size)if(l&&l.cssText){const t=Re(l.cssText,e);n.appendChild(o.createTextNode(`${t}\n`))}else{const t=Array.from(o.styleSheets).filter((t=>{try{return"cssRules"in t&&Boolean(t.cssRules.length)}catch(o){return e.log.warn(`Error while reading CSS rules from ${t.href}`,o),!1}}));await Promise.all(t.flatMap((t=>Array.from(t.cssRules).map((async(o,n)=>{if("CSSImportRule"===o.constructor.name){let r=n+1;const i=o.href;let a="";try{a=await Se(e,{url:i,requestType:"text",responseType:"text"})}catch(t){e.log.warn(`Error fetch remote css import from ${i}`,t)}const l=a.replace(ve,((t,e,o)=>t.replace(o,Jt(o,i))));for(const o of function(t){if(null==t)return[];const e=[];let o=t.replace(Be,"");for(;;){const t=Ee.exec(o);if(!t)break;e.push(t[0])}o=o.replace(Ee,"");const n=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,r=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let t=n.exec(o);if(t)r.lastIndex=n.lastIndex;else{if(t=r.exec(o),!t)break;n.lastIndex=r.lastIndex}e.push(t[0])}return e}(l))try{t.insertRule(o,o.startsWith("@import")?r+=1:t.cssRules.length)}catch(t){e.log.warn("Error inserting rule from remote css import",{rule:o,error:t})}}})))));t.flatMap((t=>Array.from(t.cssRules))).filter((t=>"CSSFontFaceRule"===t.constructor.name&&we(t.style.getPropertyValue("src"))&&$t(t.style.getPropertyValue("font-family"))?.some((t=>r.has(t))))).forEach((t=>{const r=t,l=i.get(r.cssText);l?n.appendChild(o.createTextNode(`${l}\n`)):a.push(Ce(r.cssText,r.parentStyleSheet?r.parentStyleSheet.href:null,e).then((t=>{t=Re(t,e),i.set(r.cssText,t),n.appendChild(o.createTextNode(`${t}\n`))})))}))}}const Be=/(\/\*[\s\S]*?\*\/)/g,Ee=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;const Pe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ke=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Re(t,e){const{font:o}=e,n=o?o?.preferredFormat:void 0;return n?t.replace(ke,(t=>{for(;;){const[e,,o]=Pe.exec(t)||[];if(!o)return"";if(o===n)return`src: ${e};`}})):t}async function Te(t,e){const o=await oe(t,e);if(Nt(o.node)&&Xt(o.node))return o.node;const{ownerDocument:n,log:r,tasks:i,svgStyleElement:a,svgDefsElement:l,svgStyles:s,font:c,progress:u,autoDestruct:d,onCloneNode:h,onEmbedNode:A,onCreateForeignObjectSvg:g}=o;r.time("clone node");const p=await fe(o.node,o,!0);if(a&&n){let t="";s.forEach(((e,o)=>{t+=`${e.join(",\n")} {\n  ${o}\n}\n`})),a.appendChild(n.createTextNode(t))}r.timeEnd("clone node"),await(h?.(p)),!1!==c&&Nt(p)&&(r.time("embed web font"),await Ie(0,o),r.timeEnd("embed web font")),r.time("embed node"),xe(p,o);const m=i.length;let f=0;u?.(f,m),await Promise.all([...Array.from({length:4})].map((async()=>{for(;;){const t=i.pop();if(!t)break;try{await t}catch(t){o.log.warn("Failed to run task",t)}u?.(++f,m)}}))),r.timeEnd("embed node"),await(A?.(p));const S=function(t,e){const{width:o,height:n}=e,r=function(t,e,o){const n=Kt(o).createElementNS(Wt,"svg");return n.setAttributeNS(null,"width",t.toString()),n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"viewBox",`0 0 ${t} ${e}`),n}(o,n,t.ownerDocument),i=r.ownerDocument.createElementNS(r.namespaceURI,"foreignObject");return i.setAttributeNS(null,"x","0%"),i.setAttributeNS(null,"y","0%"),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),i.append(t),r.appendChild(i),r}(p,o);return l&&S.insertBefore(l,S.children[0]),a&&S.insertBefore(a,S.children[0]),d&&function(t){if(t.ownerDocument=void 0,t.ownerWindow=void 0,t.svgStyleElement=void 0,t.svgDefsElement=void 0,t.svgStyles.clear(),t.defaultComputedStyles.clear(),t.sandbox){try{t.sandbox.remove()}catch(e){t.log.warn("Failed to destroyContext",e)}t.sandbox=void 0}t.workers=[],t.fontFamilies.clear(),t.fontCssTexts.clear(),t.requests.clear(),t.tasks=[]}(o),await(g?.(S)),S}async function Fe(t,e){const o=await oe(t,e),n=await Te(o),r=function(t,e){let o=(new XMLSerializer).serializeToString(t);return e&&(o=o.replace(/[\u0000-\u0008\v\f\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(o)}`}(n,o.isEnable("removeControlCharacter"));o.autoDestruct||(o.svgStyleElement=ne(o.ownerDocument),o.svgDefsElement=o.ownerDocument?.createElementNS(Wt,"defs"),o.svgStyles.clear());const i=Zt(r,n.ownerDocument);return await re(i,o)}function De(t,e,o){return!(t<o.startX||e<o.startY||t>o.startX+o.width||e>o.startY+o.height)}var Ue=function(){function t(t,e){var o=this;this.toolController=null;var n=new st,r=document.getElementById("textInputPanel");this.toolController=e,t.tabIndex=9999,document.body.addEventListener("keydown",(function(t){n.getTextEditState()?n.setTextEditState(!1):("Escape"===t.code&&o.triggerEvent("close"),"Enter"===t.code&&r&&"block"!==r.style.display&&o.triggerEvent("confirm"),(t.metaKey||t.ctrlKey)&&"KeyZ"===t.code&&o.triggerEvent("undo"))}))}return t.prototype.triggerEvent=function(t){if(null!=this.toolController)for(var e=0;e<this.toolController.childNodes.length;e++){var o=this.toolController.childNodes[e];o.getAttribute("data-title")===t&&o.click()}},t}();function Ne(t,e){if("text"===e)t.style.cursor="text";else t.style.cursor="default"}function Xe(){var t="maxTouchPoints"in navigator&&navigator.maxTouchPoints>0,e="msMaxTouchPoints"in navigator&&navigator.msMaxTouchPoints>0,o="ontouchstart"in window,n=window.matchMedia&&window.matchMedia("(pointer: coarse)").matches;return t||e||o||n}var Oe=function(){function n(n){var r=this;this.screenShotDom=null,this.wrcReplyTime=500,this.keyboardEventHandle=null,this.drawGraphPosition={startX:0,startY:0,width:0,height:0},this.tempGraphPosition={startX:0,startY:0,width:0,height:0},this.wrcImgPosition={x:0,y:0,w:0,h:0},this.hiddenScrollBar={color:"#000000",fillState:!1,state:!1,fillWidth:0,fillHeight:0},this.wrcWindowMode=!1,this.cutOutBoxBorderArr=[],this.borderOption=null,this.movePosition={moveStartX:0,moveStartY:0},this.dragFlag=!1,this.clickCutFullScreen=!1,this.getFullScreenStatus=!1,this.drawGraphPrevX=0,this.drawGraphPrevY=0,this.degreeOfBlur=5,this.dpr=window.devicePixelRatio||1,this.fullScreenDiffHeight=60,this.position={left:0,top:0},this.imgSrc=null,this.loadCrossImg=!1,this.mouseInsideCropBox=!1,this.proxyUrl=void 0,this.h2cIgnoreElementsFn=function(){return!1},this.useCORS=!1,this.drawStatus=!1,this.captureStream=null,this.cropBoxInfo=null,this.textInputPosition={mouseX:0,mouseY:0},this.placement="center",this.drawArrow=new xt,this.customRightClickEvent={state:!1},this.sendStream=function(t,e,o){if(!(t instanceof MediaStream))throw null!=e&&e({code:-1,msg:"视频流接入失败"}),r.data.destroyDOM(),"视频流接入失败";return r.videoController.srcObject=t,r.loadScreenFlowData(o),t},this.startCapture=function(n){return e(r,void 0,void 0,(function(){var e,r,i,a,l,s;return o(this,(function(o){switch(o.label){case 0:e=null,r=this.screenShotImageController.width*this.dpr,i=this.screenShotImageController.height*this.dpr,a=!0,l={},this.wrcWindowMode&&(r=window.screen.width*this.dpr,i=window.screen.height*this.dpr,a=!1,l={displaySurface:"window"}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,navigator.mediaDevices.getDisplayMedia({audio:!1,video:t({width:r,height:i},l),preferCurrentTab:a})];case 2:return e=o.sent(),this.videoController.srcObject=e,this.captureStream=e,[3,4];case 3:if(s=o.sent(),null!=n&&n({code:-1,msg:"浏览器不支持webrtc或者用户未授权",errorInfo:s}),this.data.destroyDOM(),null==n)throw"浏览器不支持webrtc或者用户未授权( ".concat(s," )");return[3,4];case 4:return[2,e]}}))}))},this.stopCapture=function(){var t=r.videoController.srcObject;t&&"getTracks"in t&&(t.getTracks().forEach((function(t){return t.stop()})),r.videoController.srcObject=null)},this.screenShot=function(t,e){r.startCapture(t).then((function(){r.loadScreenFlowData(e)}))},this.mouseDownEvent=function(t){var e;if(r.data.setColorPanelStatus(!1),r.data.setTextSizeOptionStatus(!1),!(t instanceof MouseEvent&&0!=t.button)&&(Xe()&&t instanceof TouchEvent&&r.screenShotCanvas&&r.operatingCutOutBox(t.touches[0].pageX,t.touches[0].pageY,r.tempGraphPosition.startX,r.tempGraphPosition.startY,r.tempGraphPosition.width,r.tempGraphPosition.height,r.screenShotCanvas),"undo"!=r.data.getToolName())){r.data.setDragging(!0),r.drawStatus=!1,r.data.setToolPositionStatus(!1);var o=yt(t instanceof MouseEvent?t.offsetX:t.touches[0].pageX),n=yt(t instanceof MouseEvent?t.offsetY:t.touches[0].pageY);if(r.data.getToolClickStatus()&&(r.drawGraphPosition.startX=o,r.drawGraphPosition.startY=n,r.isCustomTool()&&(null===(e=r.plugInParameters.getCanvasEvents())||void 0===e||e.mouseDownFn(t,o,n,At))),"brush"==r.data.getToolName()&&r.screenShotCanvas&&function(t,e,o){t.beginPath(),t.moveTo(e,o)}(r.screenShotCanvas,o,n),"text"==r.data.getToolName()&&r.textInputController&&r.screenShotContainer&&r.screenShotCanvas){if(!r.mouseInsideCropBox)return;r.data.setTextStatus(!0),0!=r.textInputPosition.mouseX&&0!=r.textInputPosition.mouseY&&r.textInputPosition.mouseX!=o&&r.textInputPosition.mouseY!=n&&(ht(r.textInputController.innerText,r.textInputPosition.mouseX,r.textInputPosition.mouseY,r.data.getSelectedColor(),r.data.getFontSize(),r.screenShotCanvas),""!==r.textInputController.innerText&&r.data.setTextStatus(!1),r.textInputController.innerHTML="",At());var i=o+r.position.left;r.textInputController.style.left=i+"px",r.textInputController.style.fontSize=r.data.getFontSize()+"px",r.textInputController.style.fontFamily="none",r.textInputController.style.color=r.data.getSelectedColor(),setTimeout((function(){if(r.textInputController){var t=r.textInputController.offsetHeight,e=n-Math.floor(t/2)+r.position.top;r.textInputController.style.top=e+"px",r.textInputController.focus(),r.textInputPosition={mouseX:o,mouseY:n},r.data.setTextInfo({positionX:o,positionY:n,color:r.data.getSelectedColor(),size:r.data.getFontSize()})}}))}r.borderOption?(r.data.setDraggingTrim(!0),r.movePosition.moveStartX=o,r.movePosition.moveStartY=n):(r.drawGraphPrevX=r.drawGraphPosition.startX,r.drawGraphPrevY=r.drawGraphPosition.startY,r.drawGraphPosition.startX=o,r.drawGraphPosition.startY=n)}},this.mouseMoveEvent=function(t){var e;if(null!=r.screenShotCanvas&&null!=r.screenShotContainer&&"undo"!=r.data.getToolName()){t.preventDefault(),!r.data.getToolClickStatus()&&r.data.getDragging()&&(r.dragFlag=!0,r.data.setToolStatus(!1),r.data.setCutBoxSizeStatus(!1));var o=r.drawGraphPosition,n=o.startX,i=o.startY,a=o.width,l=o.height,s=yt(t instanceof MouseEvent?t.offsetX:t.touches[0].pageX),c=yt(t instanceof MouseEvent?t.offsetY:t.touches[0].pageY),u=s-n,d=c-i;if(r.data.getToolClickStatus()&&r.data.getDragging()){var h=r.data.getCutOutBoxPosition();if(!De(n,i,h)||!De(s,c,h))return;switch("mosaicPen"!=r.data.getToolName()&&(r.showLastHistory(),r.drawStatus=!0),r.isCustomTool()&&(null===(e=r.plugInParameters.getCanvasEvents())||void 0===e||e.mouseMoveFn(t,{startX:n,startY:i,currentX:s,currentY:c},gt)),r.data.getToolName()){case"square":!function(t,e,o,n,r,i,a){a.save(),a.strokeStyle=r,a.lineWidth=i,a.beginPath(),a.rect(t,e,o,n),a.stroke(),a.restore()}(n,i,u,d,r.data.getSelectedColor(),r.data.getPenSize(),r.screenShotCanvas);break;case"round":!function(t,e,o,n,r,i,a){var l=e<n?e:n,s=o<r?o:r,c=.5*((e>=n?e:n)-l),u=.5*((o>=r?o:r)-s),d=l+c,h=s+u;if(t.save(),t.beginPath(),t.lineWidth=i,t.strokeStyle=a,"function"!=typeof t.ellipse)throw"你的浏览器不支持ellipse，无法绘制椭圆";t.ellipse(d,h,c,u,0,0,2*Math.PI),t.stroke(),t.closePath(),t.restore()}(r.screenShotCanvas,s,c,n,i,r.data.getPenSize(),r.data.getSelectedColor());break;case"right-top":if(r.plugInParameters.getRatioArrow())return void function(t,e,o,n,r,i,a,l,s){var c=180*Math.atan2(o-r,e-n)/Math.PI,u=(c+i)*Math.PI/180,d=(c-i)*Math.PI/180,h=a*Math.cos(u),A=a*Math.sin(u),g=a*Math.cos(d),p=a*Math.sin(d);t.save(),t.beginPath();var m=e-h,f=o-A;t.moveTo(m,f),t.moveTo(e,o),t.lineTo(n,r),m=n+h,f=r+A,t.moveTo(m,f),t.lineTo(n,r),m=n+g,f=r+p,t.lineTo(m,f),t.strokeStyle=s,t.lineWidth=l,t.stroke(),t.restore()}(r.screenShotCanvas,n,i,s,c,30,10,r.data.getPenSize(),r.data.getSelectedColor());r.drawArrow.draw(r.screenShotCanvas,n,i,s,c,r.data.getSelectedColor(),r.data.getPenSize());break;case"brush":A=r.screenShotCanvas,g=s,p=c,m=r.data.getPenSize(),f=r.data.getSelectedColor(),A.save(),A.lineWidth=m,A.strokeStyle=f,A.lineTo(g,p),A.stroke(),A.restore();break;case"mosaicPen":r.drawStatus||(r.showLastHistory(),r.drawStatus=!0),function(t,e,o,n,r){for(var i=window.devicePixelRatio||1,a=r.getImageData(t*i,e*i,o*i,o*i),l=a.width/n,s=a.height/n,c=0;c<s;c++)for(var u=0;u<l;u++)for(var d=It(a,u*n+Math.floor(Math.random()*n),c*n+Math.floor(Math.random()*n)),h=0;h<n;h++)for(var A=0;A<n;A++)Bt(a,u*n+A,c*n+h,d);r.putImageData(a,t*i,e*i)}(s-10,c-10,r.data.getMosaicPenSize(),r.degreeOfBlur,r.screenShotCanvas)}}else{var A,g,p,m,f;r.operatingCutOutBox(s,c,n,i,a,l,r.screenShotCanvas),r.data.getDragging()&&!r.data.getDraggingTrim()&&(r.tempGraphPosition=dt(n,i,u,d,r.screenShotCanvas,r.data.getBorderSize(),r.screenShotContainer,r.screenShotImageController))}}},this.mouseUpEvent=function(){var t;if("undo"!=r.data.getToolName()&&(r.data.setDragging(!1),r.data.setDraggingTrim(!1),null!=r.screenShotCanvas&&null!=r.screenShotContainer)){if(!r.data.getToolClickStatus()&&!r.dragFlag&&!r.clickCutFullScreen)return r.drawGraphPosition.startX=r.drawGraphPrevX,void(r.drawGraphPosition.startY=r.drawGraphPrevY);var e=r.data.getCutOutBoxPosition();if(0===e.width&&0===e.height&&0===e.startX&&0===e.startY&&!r.dragFlag&&r.clickCutFullScreen){var o=r.data.getBorderSize();r.getFullScreenStatus=!0,r.tempGraphPosition=dt(0,0,r.screenShotContainer.width-o/2,r.screenShotContainer.height-o/2,r.screenShotCanvas,o,r.screenShotContainer,r.screenShotImageController)}if(null!=r.screenShotContainer&&null!=r.screenShotCanvas){if(r.data.getToolClickStatus()&&r.drawStatus)return r.isCustomTool()&&(null===(t=r.plugInParameters.getCanvasEvents())||void 0===t||t.mouseUpFn(gt)),void At();if(!r.data.getToolClickStatus()||r.drawStatus){if(r.drawGraphPosition=r.tempGraphPosition,!r.data.getToolClickStatus()){var n=r.drawGraphPosition,i=n.startX,a=n.startY,l=n.width,s=n.height;r.data.setCutOutBoxPosition(i,a,l,s)}r.cutOutBoxBorderArr=Et(r.data.getBorderSize(),r.drawGraphPosition),(null!=r.screenShotContainer&&r.dragFlag||r.clickCutFullScreen)&&(r.screenShotContainer.style.cursor="move",r.data.setToolStatus(!0),r.data.setCutBoxSizeStatus(!0),r.dragFlag=!1,null!=r.toolController&&r.showToolBar())}}}},this.plugInParameters=new k,function(t){var e=new k;!1===(null==t?void 0:t.enableWebRtc)&&(e.setWebRtcStatus(!1),e.setInitStatus(!1)),(null==t?void 0:t.screenFlow)instanceof MediaStream&&e.setScreenFlow(t.screenFlow),(null==t?void 0:t.canvasWidth)&&(null==t?void 0:t.canvasHeight)&&e.setCanvasSize(t.canvasWidth,t.canvasHeight),!0===(null==t?void 0:t.showScreenData)&&e.setShowScreenDataStatus(!0),(null==t?void 0:t.maskColor)&&"object"==typeof t.maskColor&&e.setMaskColor(t.maskColor),!1===(null==t?void 0:t.writeBase64)&&e.setWriteImgState(t.writeBase64),(null==t?void 0:t.screenShotDom)&&e.setScreenShotDom(t.screenShotDom),(null==t?void 0:t.cutBoxBdColor)&&e.setCutBoxBdColor(t.cutBoxBdColor),(null==t?void 0:t.saveCallback)&&e.setSaveCallback(t.saveCallback),(null==t?void 0:t.maxUndoNum)&&e.setMaxUndoNum(t.maxUndoNum),(null==t?void 0:t.useRatioArrow)&&e.setRatioArrow(t.useRatioArrow),(null==t?void 0:t.imgAutoFit)&&e.setImgAutoFit(t.imgAutoFit),(null==t?void 0:t.useCustomImgSize)&&(null==t?void 0:t.customImgSize)&&e.setUseCustomImgSize(t.useCustomImgSize,t.customImgSize),(null==t?void 0:t.saveImgTitle)&&e.setSaveImgTitle(t.saveImgTitle),!1===(null==t?void 0:t.destroyContainer)&&(console.log("状态设置",t.destroyContainer),e.setDestroyContainerState(t.destroyContainer)),(null==t?void 0:t.userToolbar)&&e.setUserToolbar(t.userToolbar),(null==t?void 0:t.h2cImgLoadErrCallback)&&e.setH2cCrossImgLoadErrFn(t.h2cImgLoadErrCallback),(null==t?void 0:t.canvasEvents)&&e.setCanvasEvents(t.canvasEvents)}(n),new vt(n),this.videoController=document.createElement("video"),this.videoController.autoplay=!0,this.screenShotImageController=document.createElement("canvas"),this.data=new st,this.setOptionalParameter(n),this.setGlobalParameter(),this.data.setNoScrollStatus(null==n?void 0:n.noScroll),this.load(null==n?void 0:n.triggerCallback,null==n?void 0:n.cancelCallback),null!=this.toolController&&null!=this.screenShotContainer&&null!=this.textInputController&&(this.adjustContainerLevels((null==n?void 0:n.level)?n.level:0),this.keyboardEventHandle=new Ue(this.screenShotContainer,this.toolController),this.registerContainerShortcuts(this.textInputController),this.customRightClickEvent.state&&this.registerForRightClickEvent(this.screenShotContainer))}return n.prototype.getCanvasController=function(){return this.screenShotContainer},n.prototype.destroyComponents=function(){this.data.destroyDOM(),this.data.setInitStatus(!0)},n.prototype.completeScreenshot=function(){this.keyboardEventHandle&&this.keyboardEventHandle.triggerEvent("confirm")},n.prototype.registerForRightClickEvent=function(t){var e=this;t.addEventListener("contextmenu",(function(t){t.preventDefault(),e.customRightClickEvent.handleFn?e.customRightClickEvent.handleFn():e.destroyComponents()}))},n.prototype.load=function(t,e){var o=this,n=this.plugInParameters.getCanvasSize(),r={width:parseFloat(window.getComputedStyle(document.body).width),height:parseFloat(window.getComputedStyle(document.body).height)};if(this.data.setScreenShotInfo(r.width,r.height),this.data.setScreenShotPosition(this.position.left,this.position.top),this.screenShotImageController.width=r.width,this.screenShotImageController.height=r.height,0!==n.canvasWidth&&0!==n.canvasHeight&&(this.data.setScreenShotInfo(n.canvasWidth,n.canvasHeight),this.screenShotImageController.width=n.canvasWidth,this.screenShotImageController.height=n.canvasHeight),null!=this.screenShotContainer){var i=ct(this.screenShotContainer,this.screenShotImageController.width,this.screenShotImageController.height);if(null!=i){if(this.data.showScreenShotPanel(),!this.plugInParameters.getWebRtcStatus())return null!=this.imgSrc?void this.drawPictures(t,i,this.imgSrc):void Fe(this.screenShotDom?this.screenShotDom:document.body,{}).then((function(e){null!=o.screenShotContainer&&(o.screenShotImageController=e,o.initScreenShot(t,i,e))})).catch((function(e){null!=t&&t({code:-1,msg:e})}));this.plugInParameters.getScreenFlow()?this.sendStream(this.plugInParameters.getScreenFlow(),e,t):(document.body.classList.add("no-cursor"),this.screenShot(e,t))}}},n.prototype.loadScreenFlowData=function(t){var e=this;setTimeout((function(){var o,n,r;if(null!=e.screenShotContainer){var i=e.plugInParameters.getCanvasSize(),a=null===(o=e.screenShotImageController)||void 0===o?void 0:o.width,l=null===(n=e.screenShotImageController)||void 0===n?void 0:n.height;0!==i.canvasWidth&&0!==i.canvasHeight&&(a=i.canvasWidth,l=i.canvasHeight);var s=a,c=l;e.wrcWindowMode&&(s=a*e.dpr,c=l*e.dpr);var u=ct(e.screenShotContainer,a,l),d=ct(e.screenShotImageController,s,c);if(null!=u&&null!=d){e.screenShotCanvas=u;var h=e.videoController,A=h.videoWidth,g=h.videoHeight;if(e.wrcWindowMode){var p=e.getWindowContentData(A,g,a*e.dpr,l*e.dpr);if(null==p)return;d.putImageData(p,0,0)}else{var m=a,f=g*a/A;f>l&&(m=a*l/f,f=l),m=e.wrcImgPosition.w>0?e.wrcImgPosition.w:m,f=e.wrcImgPosition.h>0?e.wrcImgPosition.h:f,null==d||d.drawImage(e.videoController,e.wrcImgPosition.x,e.wrcImgPosition.y,m,f);var S=l-f;if(e.hiddenScrollBar.state&&S>0&&e.hiddenScrollBar.fillState){d.beginPath();var C=a,w=S;e.hiddenScrollBar.fillWidth>0&&(C=e.hiddenScrollBar.fillWidth),e.hiddenScrollBar.fillHeight>0&&(w=e.hiddenScrollBar.fillHeight),d.rect(0,f,C,w),d.fillStyle=e.hiddenScrollBar.color,d.fill()}}e.initScreenShot(void 0,u,e.screenShotImageController);var v=null,y=null;e.captureStream&&(v=null===(r=e.captureStream.getVideoTracks()[0].getSettings())||void 0===r?void 0:r.displaySurface,y=e.captureStream.getVideoTracks()[0].label),t&&t({code:0,msg:"截图加载完成",displaySurface:v,displayLabel:y}),e.stopCapture(),document.body.classList.remove("no-cursor")}}}),this.wrcReplyTime)},n.prototype.adjustContainerLevels=function(t){null==this.screenShotContainer||null==this.toolController||null==this.textInputController||null==this.optionIcoController||null==this.optionController||null==this.cutBoxSizeContainer||t<=0||(this.screenShotContainer.style.zIndex="".concat(t),this.toolController.style.zIndex="".concat(t+1),this.textInputController.style.zIndex="".concat(t+1),this.optionIcoController.style.zIndex="".concat(t+1),this.optionController.style.zIndex="".concat(t+1),this.cutBoxSizeContainer.style.zIndex="".concat(t+1))},n.prototype.initCropBox=function(t){var e=t.x,o=t.y,n=t.w,r=t.h;null!=this.screenShotContainer&&(this.drawGraphPosition={startX:e,startY:o,width:n,height:r},this.data.setCutOutBoxPosition(e,o,n,r),dt(e,o,n,r,this.screenShotCanvas,this.data.getBorderSize(),this.screenShotContainer,this.screenShotImageController),this.cutOutBoxBorderArr=Et(this.data.getBorderSize(),this.drawGraphPosition),this.screenShotContainer.style.cursor="move",this.data.setToolStatus(!0),this.data.setCutBoxSizeStatus(!0),null!=this.toolController&&this.showToolBar())},n.prototype.getWindowContentData=function(t,e,o,n){var r=document.createElement("canvas");r.width=t,r.height=e;var i=ct(r,t,e);if(i){i.drawImage(this.videoController,0,0);var a=e-n,l=o,s=e-a;return i.getImageData(0*this.dpr,a*this.dpr,l*this.dpr,s*this.dpr)}return null},n.prototype.registerContainerShortcuts=function(t){var e=this;t.addEventListener("keydown",(function(o){if(null!=e.screenShotCanvas&&((o.metaKey||o.ctrlKey)&&"Enter"===o.code||"Escape"===o.code)){e.data.setTextEditState(!0);var n=t.innerText;if(!n||""===n)return void e.data.setTextStatus(!1);ht(n,e.textInputPosition.mouseX,e.textInputPosition.mouseY,e.data.getSelectedColor(),e.data.getFontSize(),e.screenShotCanvas),t.innerHTML="",e.data.setTextStatus(!1),At()}}))},n.prototype.showToolBar=function(){if(null!=this.toolController&&null!=this.screenShotContainer){var t=function(t,e,o,n,r){var i=(t.width-e)/2+(t.startX-r.left);"left"===n&&(i=t.startX),"right"===n&&(i=t.startX+t.width-e),i<0&&(i=0),i+e>o&&(i=o-e);var a=t.startY+t.height+10;return(t.width<0&&t.height<0||t.width>0&&t.height<0)&&(a=t.startY+10),{mouseX:i,mouseY:a-=r.top}}(this.drawGraphPosition,this.toolController.offsetWidth,this.screenShotContainer.width/this.dpr,this.placement,this.position),e=this.screenShotContainer.height/this.dpr;if(t.mouseY>e-64){if(t.mouseY-=this.drawGraphPosition.height+64,t.mouseY<0){var o=parseInt(this.screenShotContainer.style.height);t.mouseY=o-this.fullScreenDiffHeight}this.data.setToolPositionStatus(!0),this.data.setCutBoxSizeStatus(!1)}if(this.getFullScreenStatus){var n=parseInt(this.screenShotContainer.style.height),r=(this.drawGraphPosition.width/this.dpr-this.toolController.offsetWidth)/2;t.mouseY=n-this.fullScreenDiffHeight,t.mouseX=r}this.data.setToolInfo(t.mouseX+this.position.left,t.mouseY+this.position.top),this.data.setCutBoxSizePosition(this.drawGraphPosition.startX,this.drawGraphPosition.startY-35),this.data.setCutBoxSize(this.drawGraphPosition.width,this.drawGraphPosition.height),this.getFullScreenStatus=!1}},n.prototype.setGlobalParameter=function(){this.screenShotContainer=this.data.getScreenShotContainer(),this.toolController=this.data.getToolController(),this.textInputController=this.data.getTextInputController(),this.optionController=this.data.getOptionController(),this.optionIcoController=this.data.getOptionIcoController(),this.cutBoxSizeContainer=this.data.getCutBoxSizeContainer()},n.prototype.setOptionalParameter=function(t){var e,o;if(!0===(null==t?void 0:t.clickCutFullScreen)&&(this.clickCutFullScreen=!0),null!=(null==t?void 0:t.imgSrc)&&(this.imgSrc=t.imgSrc),!0===(null==t?void 0:t.loadCrossImg)&&(this.loadCrossImg=!0),(null==t?void 0:t.proxyUrl)&&(this.proxyUrl=t.proxyUrl),(null==t?void 0:t.useCORS)&&(this.useCORS=t.useCORS),(null==t?void 0:t.h2cIgnoreElementsCallback)&&(this.h2cIgnoreElementsFn=t.h2cIgnoreElementsCallback),null!=(null==t?void 0:t.position)&&(null!=(null===(e=t.position)||void 0===e?void 0:e.top)&&(this.position.top=t.position.top),null!=(null===(o=t.position)||void 0===o?void 0:o.left)&&(this.position.left=t.position.left)),(null==t?void 0:t.screenShotDom)&&(this.screenShotDom=t.screenShotDom),(null==t?void 0:t.wrcReplyTime)&&(this.wrcReplyTime=t.wrcReplyTime),(null==t?void 0:t.cropBoxInfo)&&(this.cropBoxInfo=t.cropBoxInfo),(null==t?void 0:t.toolPosition)&&(this.placement=t.toolPosition),null==t?void 0:t.wrcImgPosition){var n=t.wrcImgPosition,r=n.x,i=n.y;this.wrcImgPosition.x=-1*Math.abs(r),this.wrcImgPosition.y=-1*Math.abs(i)}if(null!=(null==t?void 0:t.hiddenScrollBar)){var a=t.hiddenScrollBar,l=a.state,s=a.color,c=a.fillWidth,u=a.fillHeight,d=a.fillState;this.hiddenScrollBar={state:l,color:s||"#000000",fillWidth:c||0,fillHeight:u||0,fillState:d||!1},l&&(this.data.setResetScrollbarState(!0),document.documentElement.classList.add("hidden-screen-shot-scroll"),document.body.classList.add("hidden-screen-shot-scroll"))}null!=(null==t?void 0:t.wrcWindowMode)&&(this.wrcWindowMode=t.wrcWindowMode),null!=(null==t?void 0:t.customRightClickEvent)&&(this.customRightClickEvent=t.customRightClickEvent)},n.prototype.operatingCutOutBox=function(t,e,o,n,r,i,a){if(null!=this.screenShotContainer){var l=this.movePosition,s=l.moveStartX,c=l.moveStartY;if(this.cutOutBoxBorderArr.length>0&&!this.data.getDraggingTrim()){var u=!1;a.beginPath();for(var d=0;d<this.cutOutBoxBorderArr.length;d++)if(a.rect(this.cutOutBoxBorderArr[d].x,this.cutOutBoxBorderArr[d].y,this.cutOutBoxBorderArr[d].width,this.cutOutBoxBorderArr[d].height),a.isPointInPath(t*this.dpr,e*this.dpr)){switch(this.cutOutBoxBorderArr[d].index){case 1:this.data.getToolClickStatus()?Ne(this.screenShotContainer,this.data.getActiveToolName()):this.screenShotContainer.style.cursor="move";break;case 2:if(this.data.getToolClickStatus())break;this.screenShotContainer.style.cursor="ns-resize";break;case 3:if(this.data.getToolClickStatus())break;this.screenShotContainer.style.cursor="ew-resize";break;case 4:if(this.data.getToolClickStatus())break;this.screenShotContainer.style.cursor="nwse-resize";break;case 5:if(this.data.getToolClickStatus())break;this.screenShotContainer.style.cursor="nesw-resize"}this.borderOption=this.cutOutBoxBorderArr[d].option,u=!0;break}this.mouseInsideCropBox=u,a.closePath(),u||(this.screenShotContainer.style.cursor="default",this.borderOption=null)}if(this.data.getDraggingTrim())if(1===this.borderOption){var h=bt(t-(s-o),r,this.screenShotContainer.width),A=bt(e-(c-n),i,this.screenShotContainer.height),g=this.screenShotContainer.width/this.dpr,p=this.screenShotContainer.height/this.dpr;h+r>g&&(h=g-r),A+i>p&&(A=p-i),this.tempGraphPosition=dt(h,A,r,i,a,this.data.getBorderSize(),this.screenShotContainer,this.screenShotImageController)}else{var m=function(t,e,o,n,r,i,a){switch(a){case 2:return{tempStartX:o,tempStartY:e-(n+i)>0?n+i:e,tempWidth:r,tempHeight:yt(i-(e-n))};case 3:return{tempStartX:o,tempStartY:n,tempWidth:r,tempHeight:yt(e-n)};case 4:return{tempStartX:t-(o+r)>0?o+r:t,tempStartY:n,tempWidth:yt(r-(t-o)),tempHeight:i};case 5:return{tempStartX:o,tempStartY:n,tempWidth:yt(t-o),tempHeight:i};case 6:return{tempStartX:t-(o+r)>0?o+r:t,tempStartY:e-(n+i)>0?n+i:e,tempWidth:yt(r-(t-o)),tempHeight:yt(i-(e-n))};case 7:return{tempStartX:o,tempStartY:n,tempWidth:yt(t-o),tempHeight:yt(e-n)};case 8:return{tempStartX:o,tempStartY:e-(n+i)>0?n+i:e,tempWidth:yt(t-o),tempHeight:yt(i-(e-n))};case 9:return{tempStartX:t-(o+r)>0?o+r:t,tempStartY:n,tempWidth:yt(r-(t-o)),tempHeight:yt(e-n)}}}(t,e,o,n,r,i,this.borderOption),f=m.tempStartX,S=m.tempStartY,C=m.tempWidth,w=m.tempHeight;this.tempGraphPosition=dt(f,S,C,w,a,this.data.getBorderSize(),this.screenShotContainer,this.screenShotImageController)}}},n.prototype.showLastHistory=function(){if(null!=this.screenShotCanvas){var t=this.screenShotCanvas;this.data.getHistory().length<=0&&At(),t.putImageData(this.data.getHistory()[this.data.getHistory().length-1].data,0,0)}},n.prototype.setScreenShotContainerEventListener=function(){var t,e,o,n,r,i;(function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=!0,n=0;n<e.length;n++)if(t.indexOf(e[n])>0){o=!1;break}return o})()&&(null===(t=this.screenShotContainer)||void 0===t||t.addEventListener("mousedown",this.mouseDownEvent),null===(e=this.screenShotContainer)||void 0===e||e.addEventListener("mousemove",this.mouseMoveEvent),null===(o=this.screenShotContainer)||void 0===o||o.addEventListener("mouseup",this.mouseUpEvent)),Xe()&&(null===(n=this.screenShotContainer)||void 0===n||n.addEventListener("touchstart",this.mouseDownEvent,!1),null===(r=this.screenShotContainer)||void 0===r||r.addEventListener("touchmove",this.mouseMoveEvent,!1),null===(i=this.screenShotContainer)||void 0===i||i.addEventListener("touchend",this.mouseUpEvent,!1))},n.prototype.drawPictures=function(t,e,o){var n=this,r=new Image;r.src=o,r.width=this.screenShotImageController.width,r.height=this.screenShotImageController.height,r.crossOrigin="Anonymous",r.onload=function(){var o;null!=n.screenShotContainer&&(null===(o=n.screenShotImageController.getContext("2d"))||void 0===o||o.drawImage(r,0,0,n.screenShotImageController.width,n.screenShotImageController.height),n.initScreenShot(t,e,n.screenShotImageController))}},n.prototype.initScreenShot=function(t,e,o){null!=t&&t({code:0,msg:"截图加载完成"}),this.screenShotCanvas=e,this.data.setScreenShotImageController(o),function(t,e){var o=new k,n=new k,r=n.getCanvasSize(),i={width:parseFloat(window.getComputedStyle(document.body).width),height:parseFloat(window.getComputedStyle(document.body).height)},a=Math.max(i.width||0,Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),Math.max(document.body.clientWidth,document.documentElement.clientWidth)),l=Math.max(i.height||0,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight));t.clearRect(0,0,a,l),null!=e&&n.getShowScreenDataStatus()&&(0!==r.canvasWidth&&0!==r.canvasHeight?t.drawImage(e,0,0,r.canvasWidth,r.canvasHeight):t.drawImage(e,0,0,a,l)),t.save();var s=o.getMaskColor();t.fillStyle="rgba(0, 0, 0, .6)",s&&(t.fillStyle="rgba(".concat(s.r,", ").concat(s.g,", ").concat(s.b,", ").concat(s.a,")")),0!==r.canvasWidth&&0!==r.canvasHeight?t.fillRect(0,0,r.canvasWidth,r.canvasHeight):t.fillRect(0,0,a,l),t.restore()}(e,o),this.setScreenShotContainerEventListener(),null!=this.cropBoxInfo&&4==Object.keys(this.cropBoxInfo).length&&this.initCropBox(this.cropBoxInfo)},n.prototype.isCustomTool=function(){var t=this.data.getToolId();return t&&t>100},n}();return Oe}));
