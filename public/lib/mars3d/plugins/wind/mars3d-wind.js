/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.11
 * 编译日期：2025-06-03 23:27
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';function _0x188f(){const _0x180b4a=['particleSystem','west','pixelDatatype','nextParticlesPosition','387LxsDDC','getSegmentDrawVertexShader','getUVByXY','framebuffers','vmin','add','options','frameTime','reCreateWindTextures','data','PointTrans','bind','isDestroy','maxAge','viewport','Math','createRawRenderState','ymin','toGridXY','zIndex','createPrimitives','commandList','fragmentShaderSource','flipY','particlesTextureSize','_colorRamp','canvas','_onMouseMoveEvent','layer','sceneMode','beginPath','_canrefresh','framebuffer','fromCssColorString','log','onColorTableChange','grid','fixedHeight','atan2','OPAQUE','frameState.commandList\x20is\x20undefined','talt','vmax','xmin','defineProperty','lng','getSegmentDrawFragmentShader','DEPTH_COMPONENT','requestRender','camera','setOptions','xmax','lat','sources','textures','SCENE3D','tlng','call','mouse_move','auto','age','attributeLocations','_speedRate','alt','515562BzUaLm','_onMapWhellEvent','0px','segmentsColor','setGeometry','getUpdatePositionShader','updateViewerParameters','max','refreshTimer','clearFramebuffers','worker','vertexArray','ymax','reverse','speedRate','off','WindUtil','LINEAR','udata','push','scene','clear','applyViewerParameters','MAX_VALUE','removeEventListener','_randomParticle','_removedHook','mouse_down','toRadians','floor','segmentsDepth','commandToExecute','globalCompositeOperation','getOwnPropertyDescriptor','show','commandType','array','east','windTextures','Cartesian2','hasOwnProperty','cos','init','canvasHeight','_calcUV','shaderProgram','_animateFrame','globe','abs','moveTo','particlesTextures','computing','clientWidth','visible','top','latitude','keys','create','magnificationFilter','51006sjpVOI','pixelSize','_bilinearInterpolation','isPointVisible','rendering','enabled','fromCache','TRIANGLES','hidden','SceneMode','stringify','_drawLines','setData','resize','style','forEach','canvasWind','pow','_map','cols','primitives','blendEquation','updateOptions','pointerEvents','_mountedHook','addEventListener','ONE_MINUS_SRC_ALPHA','update','CanvasWindLayer','south','particles','windData','mouseHidden','warn','getPrimitives','BaseLayer','NEAREST','postProcessingPosition','clientHeight','wrapS','CLAMP_TO_EDGE','WindLayer','values','speed','length','geometry','redraw','remove','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','SRC_ALPHA','lineLength','EllipsoidalOccluder','8408720PMdqvW','270996sjhzaO','componentsPerAttribute','position','20360cSUbWC','unbindEvent','requestAnimationFrame','2117794JjSHWe','outputTexture','bounds','mouseMove','createColorTableTexture','Cesium','height','updatePosition','_updateIng2','RGBA','north','FLOAT','previousParticlesPosition','wrapT','Compute','minificationFilter','min\x20is\x20undefined,\x20calculate\x20min','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','particlesSpeed','windField','_createCanvas','clearCommand','colors','longitude','primitiveType','stroke','_onMouseDownEvent','createCommand','particlesNumber','dropRate','flatMap','object','initWorker','frameRate','pass','setDate','context','_addedHook','canvasContext','all','calculateSpeed','getRandomLatLng','morphComplete','Draw','register','_maxAge','speedFactor','width','frameRateAdjustment','_setOptionsHook','removeChild','random','mode','EventType','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','vertexShaderSource','35TuVjux','visibility','createParticlesTextures','initFrameRate','viewerParameters','rows','owner','postMessage','rawRenderState','8DoCTjF','domain','_pointerEvents','fromGeometry','colorTable','destroy','normal','positionWC','min','destroyParticlesTextures','autoClear','40344QxRjNW','_updateIng','tlat','isDynamic','preExecute','uniformMap','canvasWidth','lineWidth','currentParticlesPosition','green','drawingBufferWidth','createSegmentsGeometry','left','pickEllipsoid','dynamic'];_0x188f=function(){return _0x180b4a;};return _0x188f();}(function(_0x2fbbc2,_0x2a7c59){const _0x4c9ab9=_0x2fbbc2();function _0x9f0634(_0x278ec6,_0x2e1810){return _0x28c6(_0x278ec6- -0x29a,_0x2e1810);}function _0x1a1954(_0x3e8067,_0x59388e){return _0x28c6(_0x59388e- -0x2e3,_0x3e8067);}while(!![]){try{const _0x2f3685=-parseInt(_0x1a1954(-0x1d1,-0x189))/0x1+-parseInt(_0x1a1954(-0xdf,-0xe7))/0x2+parseInt(_0x9f0634(-0x143,-0x120))/0x3*(parseInt(_0x9f0634(-0xfc,-0x13a))/0x4)+-parseInt(_0x9f0634(-0x105,-0x155))/0x5*(parseInt(_0x1a1954(-0x1c9,-0x1c1))/0x6)+-parseInt(_0x9f0634(-0x13d,-0x114))/0x7+parseInt(_0x1a1954(-0x198,-0x13a))/0x8*(-parseInt(_0x1a1954(-0xed,-0x127))/0x9)+parseInt(_0x1a1954(-0x1a3,-0x18d))/0xa;if(_0x2f3685===_0x2a7c59)break;else _0x4c9ab9['push'](_0x4c9ab9['shift']());}catch(_0x45924e){_0x4c9ab9['push'](_0x4c9ab9['shift']());}}}(_0x188f,0x28291));function _interopNamespace(_0x589e4e){if(_0x589e4e&&_0x589e4e['__esModule'])return _0x589e4e;function _0x3e277f(_0x293c3c,_0x2a93f9){return _0x28c6(_0x293c3c- -0x158,_0x2a93f9);}var _0x53dd1e=Object['create'](null);return _0x589e4e&&Object[_0x3e277f(-0x39,-0x65)](_0x589e4e)['forEach'](function(_0x879601){function _0xd146f0(_0x4adeab,_0x231fce){return _0x3e277f(_0x4adeab-0x1c,_0x231fce);}function _0x1519c8(_0x3581bb,_0x151024){return _0x3e277f(_0x3581bb-0x52e,_0x151024);}if(_0x879601!=='default'){var _0x32ae76=Object[_0x1519c8(0x4de,0x563)](_0x589e4e,_0x879601);Object[_0xd146f0(0xac,0x72)](_0x53dd1e,_0x879601,_0x32ae76['get']?_0x32ae76:{'enumerable':!![],'get':function(){return _0x589e4e[_0x879601];}});}}),_0x53dd1e['default']=_0x589e4e,_0x53dd1e;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x42de2,_0xf8f851){const _0x5ee3d9=_0x42de2*Math[_0x1d9a42(0x185,0x17d)](Cesium$2['Math'][_0x33dda6(0x41b,0x3a1)](_0xf8f851));function _0x1d9a42(_0x4526ba,_0x2b6a8e){return _0x28c6(_0x2b6a8e-0x6d,_0x4526ba);}function _0x33dda6(_0x291173,_0x19b2c4){return _0x28c6(_0x19b2c4-0x29e,_0x291173);}return _0x5ee3d9;}function getV(_0x57f90f,_0x5f55a3){const _0x2bf2aa=_0x57f90f*Math['sin'](Cesium$2['Math']['toRadians'](_0x5f55a3));return _0x2bf2aa;}function getSpeed(_0xd031eb,_0x72259d){function _0x409ed9(_0x271d76,_0x259874){return _0x28c6(_0x271d76- -0x8a,_0x259874);}const _0x4611a6=Math['sqrt'](Math[_0x409ed9(0xa9,0xb5)](_0xd031eb,0x2)+Math['pow'](_0x72259d,0x2));return _0x4611a6;}function getDirection(_0x5110f0,_0x4ac955){let _0x80adc=Cesium$2['Math']['toDegrees'](Math[_0x6aa851(0x252,0x26a)](_0x4ac955,_0x5110f0));_0x80adc+=_0x80adc<0x0?0x168:0x0;function _0x6aa851(_0x209398,_0x5ccd1d){return _0x28c6(_0x209398-0x70,_0x5ccd1d);}return _0x80adc;}const _0x5e2737={};_0x5e2737['__proto__']=null,_0x5e2737['getU']=getU,_0x5e2737['getV']=getV,_0x5e2737['getSpeed']=getSpeed,_0x5e2737['getDirection']=getDirection;var WindUtil=_0x5e2737,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x15148f(0x496,0x454),postProcessingPositionFragmentShader=_0x4007c0(-0x120,-0x172),renderParticlesFragmentShader=_0x15148f(0x4d7,0x4d8);function _0x4007c0(_0x46ab9a,_0x43edea){return _0x28c6(_0x43edea- -0x2e0,_0x46ab9a);}var renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x15148f(0x4a6,0x42c)];class ShaderManager{static['getCalculateSpeedShader'](){const _0x42a466={};return _0x42a466['sources']=[calculateSpeedShader],new ShaderSource$1(_0x42a466);}static['getUpdatePositionShader'](){const _0x2d1634={};return _0x2d1634['sources']=[updatePositionShader],new ShaderSource$1(_0x2d1634);}static[_0x15148f(0x501,0x54e)](){function _0x1dd622(_0x5891d7,_0x1de08f){return _0x4007c0(_0x1de08f,_0x5891d7-0x1);}const _0x1d3ac4={};return _0x1d3ac4[_0x1dd622(-0xee,-0x108)]=[renderParticlesVertexShader],new ShaderSource$1(_0x1d3ac4);}static[_0x4007c0(-0x107,-0xf6)](){const _0x27629e={};function _0x5c22a1(_0x36922f,_0x52e95c){return _0x4007c0(_0x52e95c,_0x36922f-0x311);}return _0x27629e[_0x5c22a1(0x222,0x21b)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x27629e);}static['getPostProcessingPositionShader'](){const _0x48b6fa={};return _0x48b6fa['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x48b6fa);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x15ebab){this[_0x1ae30d(0x3ce,0x431)]=_0x15ebab[_0x1ae30d(0x46e,0x431)];function _0x425d1e(_0x151dcc,_0xcd4851){return _0x15148f(_0xcd4851- -0x6f2,_0x151dcc);}this[_0x425d1e(-0x2cd,-0x25f)]=_0x15ebab['geometry'];function _0x1ae30d(_0x57f120,_0x1a28b9){return _0x15148f(_0x1a28b9- -0x1d,_0x57f120);}this[_0x1ae30d(0x526,0x520)]=_0x15ebab['attributeLocations'],this[_0x425d1e(-0x2b3,-0x239)]=_0x15ebab['primitiveType'],this[_0x1ae30d(0x4e1,0x4d5)]=_0x15ebab[_0x1ae30d(0x47d,0x4d5)]||{},this['vertexShaderSource']=_0x15ebab['vertexShaderSource'],this[_0x425d1e(-0x1d8,-0x1dc)]=_0x15ebab['fragmentShaderSource'],this['rawRenderState']=_0x15ebab[_0x425d1e(-0x248,-0x211)],this['framebuffer']=_0x15ebab['framebuffer'],this[_0x1ae30d(0x40d,0x485)]=_0x15ebab[_0x425d1e(-0x20f,-0x250)],this[_0x1ae30d(0x47b,0x4cf)]=_0x15ebab[_0x1ae30d(0x498,0x4cf)]??![],this[_0x425d1e(-0x1e1,-0x201)]=_0x15ebab['preExecute'],this[_0x425d1e(-0x2b3,-0x2a5)]=!![],this[_0x425d1e(-0x270,-0x2a8)]=undefined,this[_0x425d1e(-0x1c7,-0x23c)]=undefined,this['isDynamic']=_0x15ebab['isDynamic']??(()=>!![]),this[_0x425d1e(-0x1af,-0x206)]&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}[_0x15148f(0x4bc,0x4bb)](_0xb72f08){function _0x290846(_0x33fab2,_0x252ce0){return _0x15148f(_0x33fab2- -0x6ca,_0x252ce0);}function _0x681bfa(_0x2e85dd,_0x11914d){return _0x15148f(_0x11914d- -0x410,_0x2e85dd);}if(this['commandType']===_0x681bfa(0x138,0xbc)){const _0x21a2a6={};_0x21a2a6[_0x290846(-0x205,-0x202)]=_0xb72f08,_0x21a2a6['geometry']=this['geometry'],_0x21a2a6[_0x681bfa(0x10c,0x12d)]=this['attributeLocations'],_0x21a2a6['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x48b099=VertexArray$1['fromGeometry'](_0x21a2a6),_0x5c2068={};_0x5c2068['context']=_0xb72f08,_0x5c2068[_0x290846(-0x1f2,-0x1d0)]=this[_0x681bfa(0x66,0xc8)],_0x5c2068[_0x290846(-0x1b4,-0x23b)]=this[_0x681bfa(0x146,0x106)],_0x5c2068[_0x290846(-0x18d,-0x1c7)]=this[_0x290846(-0x18d,-0x123)];const _0x5ed671=ShaderProgram['fromCache'](_0x5c2068),_0xb5fdb1=RenderState[_0x290846(-0x25e,-0x1fc)](this[_0x290846(-0x1e9,-0x204)]),_0x52cc49={};return _0x52cc49[_0x290846(-0x1eb,-0x234)]=this,_0x52cc49['vertexArray']=_0x48b099,_0x52cc49['primitiveType']=this['primitiveType'],_0x52cc49['modelMatrix']=Matrix4['IDENTITY'],_0x52cc49['renderState']=_0xb5fdb1,_0x52cc49[_0x290846(-0x272,-0x2d6)]=_0x5ed671,_0x52cc49['framebuffer']=this[_0x290846(-0x1aa,-0x121)],_0x52cc49[_0x290846(-0x1d8,-0x1a7)]=this['uniformMap'],_0x52cc49[_0x681bfa(0x7f,0xb3)]=Pass$1[_0x681bfa(0x9b,0x117)],new DrawCommand(_0x52cc49);}else{if(this[_0x681bfa(0xbc,0x3e)]===_0x681bfa(0xba,0x9f)){const _0x16165d={};return _0x16165d[_0x681bfa(0x49,0xcf)]=this,_0x16165d['fragmentShaderSource']=this['fragmentShaderSource'],_0x16165d[_0x681bfa(0x77,0xe2)]=this['uniformMap'],_0x16165d[_0x290846(-0x228,-0x256)]=this[_0x290846(-0x228,-0x214)],_0x16165d['persists']=!![],new ComputeCommand(_0x16165d);}else throw new Error('Unknown\x20command\x20type');}}[_0x15148f(0x544,0x503)](_0x2e9af9,_0x50e339){function _0x3310cf(_0x30dc1b,_0x393627){return _0x4007c0(_0x393627,_0x30dc1b-0x207);}function _0x1dd3f3(_0x350d3d,_0x5b1e17){return _0x15148f(_0x350d3d- -0xcd,_0x5b1e17);}this['geometry']=_0x50e339,defined(this['commandToExecute'])&&(this[_0x3310cf(0x2d,0x6c)][_0x3310cf(0x19,-0x3)]=VertexArray$1[_0x3310cf(0xc8,0x81)]({'context':_0x2e9af9,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}[_0x4007c0(-0x221,-0x1a3)](_0x508e2f){function _0x2ffea4(_0x39c822,_0x36b4c7){return _0x15148f(_0x39c822- -0x24c,_0x36b4c7);}if(!this[_0x353086(0x51b,0x58b)]())return;function _0x353086(_0x16e866,_0x3a4e5d){return _0x4007c0(_0x3a4e5d,_0x16e866-0x64f);}if(!this['show']||!defined(_0x508e2f))return;!defined(this[_0x353086(0x475,0x493)])&&(this['commandToExecute']=this['createCommand'](_0x508e2f['context']));defined(this['preExecute'])&&this['preExecute']();if(!_0x508e2f[_0x353086(0x540,0x4cd)]){console['warn'](_0x353086(0x553,0x537));return;}defined(this[_0x353086(0x4e1,0x4ef)])&&_0x508e2f['commandList']['push'](this[_0x353086(0x4e1,0x56c)]),defined(this[_0x353086(0x475,0x4c4)])&&_0x508e2f[_0x353086(0x540,0x5b8)][_0x353086(0x469,0x449)](this['commandToExecute']);}['isDestroyed'](){return![];}[_0x4007c0(-0xea,-0x13d)](){if(defined(this['commandToExecute'])){var _0x37cabb;(_0x37cabb=this['commandToExecute'][_0x533343(0x123,0x1a6)])===null||_0x37cabb===void 0x0||_0x37cabb[_0x533343(0x212,0x235)](),this[_0x533343(0x194,0x198)]['shaderProgram']=undefined;}function _0x533343(_0xd809fa,_0x59eb95){return _0x15148f(_0x59eb95- -0x2b2,_0xd809fa);}function _0x26a96b(_0x4b66a9,_0x5cd4e4){return _0x4007c0(_0x4b66a9,_0x5cd4e4- -0x32);}return destroyObject(this);}}function deepMerge(_0x3befc2,_0x23b954){if(!_0x3befc2)return _0x23b954;if(!_0x23b954)return _0x3befc2;const _0x55dd54={..._0x23b954};function _0x14c9aa(_0x39c4f2,_0x3d227e){return _0x4007c0(_0x39c4f2,_0x3d227e-0x9b);}const _0xf81790=_0x55dd54;function _0xe9e7e1(_0x22efba,_0xa02a1a){return _0x4007c0(_0x22efba,_0xa02a1a-0x72);}for(const _0x4a7fc7 in _0x3befc2){if(Object['prototype'][_0xe9e7e1(-0x12d,-0x15f)][_0x14c9aa(0x37,-0x50)](_0x3befc2,_0x4a7fc7)){const _0x252753=_0x3befc2[_0x4a7fc7],_0x544485=_0x23b954[_0x4a7fc7];if(Array['isArray'](_0x252753)){_0xf81790[_0x4a7fc7]=_0x252753['slice']();continue;}if(_0x252753&&typeof _0x252753===_0x14c9aa(-0x121,-0xc9)){_0xf81790[_0x4a7fc7]=deepMerge(_0x252753,_0x544485||{});continue;}_0x252753!==undefined&&(_0xf81790[_0x4a7fc7]=_0x252753);}}return _0xf81790;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x191bc2,_0x5d8bd4,_0x42ae17,_0x489a77,_0x766f2d){this['context']=_0x191bc2,this['options']=_0x42ae17,this[_0x9ee44d(-0x182,-0x1a1)]=_0x489a77,this['windData']=_0x5d8bd4,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0x554012={};_0x554012['scene']=_0x766f2d;function _0x9ee44d(_0x5225c9,_0x5c6dca){return _0x4007c0(_0x5c6dca,_0x5225c9- -0x3b);}_0x554012['samplingWindow']=0x1,_0x554012['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x554012),this['initFrameRate'](),this['createWindTextures'](),this['createParticlesTextures'](),this['createComputingPrimitives']();}[_0x15148f(0x4dc,0x4d2)](){function _0x458105(_0x258f75,_0x2a4250){return _0x4007c0(_0x258f75,_0x2a4250-0x564);}function _0x32fa27(_0x31c29c,_0x473f78){return _0x4007c0(_0x473f78,_0x31c29c-0x3ad);}const _0x4e7723=()=>{function _0x7e3257(_0x500aad,_0x14af33){return _0x28c6(_0x500aad- -0x1c,_0x14af33);}function _0x2236a6(_0x520b25,_0x1f86cc){return _0x28c6(_0x520b25-0x0,_0x1f86cc);}this['frameRateMonitor']['lastFramesPerSecond']>0x14&&(this['frameRate']=this['frameRateMonitor']['lastFramesPerSecond'],this[_0x2236a6(0x18d,0x104)]=0x3c/Math[_0x7e3257(0x1e7,0x1fb)](this[_0x2236a6(0x17e,0x145)],0x1));};_0x4e7723();const _0x46a7c6=setInterval(_0x4e7723,0x3e8),_0x471bb6=this[_0x32fa27(0x270,0x2f5)][_0x32fa27(0x294,0x226)](this);this['destroy']=()=>{clearInterval(_0x46a7c6),_0x471bb6();};}['createWindTextures'](){const _0x3cf98d={};_0x3cf98d['minificationFilter']=TextureMinificationFilter$1[_0x36db64(-0x99,-0x92)],_0x3cf98d[_0x3d97b2(0x502,0x501)]=TextureMagnificationFilter$1['LINEAR'];function _0x3d97b2(_0x1896ab,_0x332f72){return _0x4007c0(_0x1896ab,_0x332f72-0x6c0);}function _0x36db64(_0x8d195f,_0x52e85a){return _0x4007c0(_0x8d195f,_0x52e85a-0x156);}const _0x129d66={'context':this[_0x3d97b2(0x55f,0x561)],'width':this['windData'][_0x3d97b2(0x5b3,0x56c)],'height':this['windData']['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this['options'][_0x3d97b2(0x5ba,0x5b3)]??![],'sampler':new Sampler$1(_0x3cf98d)};this['windTextures']={'U':new Texture$1({..._0x129d66,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x129d66,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}[_0x4007c0(-0x187,-0x149)](){function _0x1b361d(_0x1f9a85,_0x72c0c2){return _0x4007c0(_0x1f9a85,_0x72c0c2-0x2a0);}const _0x150124={};_0x150124['minificationFilter']=TextureMinificationFilter$1[_0x1b361d(0xa3,0x106)];function _0xb28ac1(_0x41a7fe,_0x86592a){return _0x4007c0(_0x86592a,_0x41a7fe-0x56b);}_0x150124[_0x1b361d(0x160,0xe1)]=TextureMagnificationFilter$1['NEAREST'];const _0x4fe3a1={'context':this['context'],'width':this[_0x1b361d(0x1d1,0x182)]['particlesTextureSize'],'height':this['options'][_0x1b361d(0x1f0,0x194)],'pixelFormat':PixelFormat$1[_0x1b361d(0xa4,0x126)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0xb28ac1(0x45f,0x4e8)]*this['options']['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x150124)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x4fe3a1),'currentParticlesPosition':new Texture$1(_0x4fe3a1),'nextParticlesPosition':new Texture$1(_0x4fe3a1),'postProcessingPosition':new Texture$1(_0x4fe3a1),'particlesSpeed':new Texture$1(_0x4fe3a1)};}[_0x15148f(0x4eb,0x472)](){function _0xa2a78f(_0x4b68f4,_0x102f3e){return _0x4007c0(_0x102f3e,_0x4b68f4-0x2d6);}Object['values'](this[_0xa2a78f(0x10f,0xc7)])['forEach'](_0x3ae285=>_0x3ae285['destroy']());}['createComputingPrimitives'](){function _0x176616(_0x359857,_0x5c9999){return _0x4007c0(_0x359857,_0x5c9999-0x44);}function _0x4262b0(_0x3aa277,_0x37c04e){return _0x15148f(_0x37c04e- -0x126,_0x3aa277);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this[_0x4262b0(0x389,0x32b)]['V'],'uRange':()=>new Cartesian2$1(this['windData']['u']['min'],this['windData']['u'][_0x4262b0(0x3b6,0x421)]),'vRange':()=>new Cartesian2$1(this[_0x4262b0(0x3df,0x35f)]['v']['min'],this['windData']['v']['max']),'speedRange':()=>new Cartesian2$1(this[_0x176616(-0x123,-0x15b)]['speed']['min'],this['windData']['speed']['max']),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x271d3e(_0x4fae91,_0x1b5cd6){return _0x4262b0(_0x1b5cd6,_0x4fae91- -0x267);}return(this['viewerParameters']['pixelSize']+0x32)*this[_0x271d3e(0x179,0x1d2)]['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this[_0x4262b0(0x3ac,0x35f)]['width'],this['windData']['height']),'minimum':()=>new Cartesian2$1(this[_0x176616(-0x148,-0x15b)]['bounds'][_0x4262b0(0x36c,0x3d7)],this[_0x4262b0(0x36b,0x35f)]['bounds']['south']),'maximum':()=>new Cartesian2$1(this[_0x4262b0(0x3e3,0x35f)]['bounds']['east'],this['windData'][_0x176616(-0xc0,-0x13d)]['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this['particlesTextures'][_0x4262b0(0x310,0x38d)],'preExecute':()=>{function _0x993b07(_0x4c7220,_0x1e9b26){return _0x176616(_0x1e9b26,_0x4c7220-0x21a);}const _0x482043=this[_0x993b07(0x97,0x39)][_0x1edf81(-0x194,-0x1b6)];this[_0x993b07(0x97,0xfc)][_0x1edf81(-0x194,-0x1c1)]=this['particlesTextures']['currentParticlesPosition'];function _0x1edf81(_0x2c2478,_0x161f1e){return _0x4262b0(_0x161f1e,_0x2c2478- -0x51b);}this[_0x993b07(0x97,0xa7)]['currentParticlesPosition']=this['particlesTextures']['postProcessingPosition'],this['particlesTextures']['postProcessingPosition']=_0x482043,this['primitives'][_0x993b07(0x103,0x169)]['commandToExecute']&&(this['primitives'][_0x1edf81(-0x178,-0x163)]['commandToExecute']['outputTexture']=this['particlesTextures'][_0x1edf81(-0x18e,-0x109)]);},'isDynamic':()=>this[_0x176616(-0x11e,-0xda)][_0x176616(-0x156,-0xe5)]}),'updatePosition':new CustomPrimitive({'commandType':_0x4262b0(0x3d1,0x389),'uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x176616(-0xfb,-0xeb)],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed']},'fragmentShaderSource':ShaderManager[_0x176616(-0x5c,-0x9b)](),'outputTexture':this[_0x4262b0(0x356,0x337)][_0x4262b0(0x3a0,0x3d9)],'preExecute':()=>{function _0x52cd79(_0x250a91,_0x3a90a7){return _0x4262b0(_0x250a91,_0x3a90a7- -0x98);}function _0x1974b0(_0x2d2e19,_0x2790f1){return _0x4262b0(_0x2d2e19,_0x2790f1- -0xc5);}this[_0x52cd79(0x28f,0x2bc)]['updatePosition'][_0x52cd79(0x22b,0x28c)]&&(this[_0x52cd79(0x2a4,0x2bc)][_0x1974b0(0x250,0x2bd)]['commandToExecute']['outputTexture']=this[_0x1974b0(0x2d9,0x272)]['nextParticlesPosition']);},'isDynamic':()=>this[_0x176616(-0x106,-0xda)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x4262b0(0x35e,0x389),'uniformMap':{'nextParticlesPosition':()=>this[_0x176616(-0x12f,-0x183)][_0x176616(-0x68,-0xe1)],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this[_0x4262b0(0x3f2,0x3b7)]['lonRange'],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds'][_0x4262b0(0x307,0x32a)]),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds'][_0x4262b0(0x2f9,0x35d)],this['windData']['bounds']['north']),'randomCoefficient':function(){function _0x2f8933(_0x2167bb,_0x427914){return _0x176616(_0x2167bb,_0x427914-0x387);}return Math[_0x2f8933(0x271,0x27b)]();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this[_0x4262b0(0x394,0x337)][_0x176616(-0xfd,-0x155)],'preExecute':()=>{function _0x53833f(_0x296bdd,_0x20fc35){return _0x4262b0(_0x20fc35,_0x296bdd- -0x19e);}function _0x51b27d(_0x4d1339,_0x3a83a3){return _0x176616(_0x3a83a3,_0x4d1339-0x46c);}this['primitives']['postProcessingPosition'][_0x53833f(0x186,0x125)]&&(this[_0x53833f(0x1b6,0x142)][_0x51b27d(0x317,0x31e)]['commandToExecute']['outputTexture']=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this[_0x176616(-0xb5,-0xda)][_0x4262b0(0x366,0x3d5)]})};}[_0x15148f(0x508,0x4b2)](){this['windTextures']['U']['destroy']();function _0x595b70(_0x2a7999,_0x4cb064){return _0x15148f(_0x4cb064- -0x5fc,_0x2a7999);}this[_0x595b70(-0x210,-0x1ab)]['V'][_0x595b70(-0xd7,-0x115)]();function _0x3448a0(_0x141099,_0x663c2d){return _0x4007c0(_0x141099,_0x663c2d-0x61f);}this['createWindTextures']();}['updateWindData'](_0x1f59fd){function _0x42ce04(_0x12eb56,_0x5ce3f7){return _0x4007c0(_0x5ce3f7,_0x12eb56-0x4e6);}this[_0x24d854(0x11e,0x15f)]=_0x1f59fd;function _0x24d854(_0x11a587,_0x27511a){return _0x4007c0(_0x11a587,_0x27511a-0x2fe);}this[_0x24d854(0x1da,0x1e2)]();}[_0x4007c0(-0x12c,-0x1a8)](_0x389d7e){const _0x2cc7e0=_0x389d7e['flipY']!==undefined&&_0x389d7e['flipY']!==this['options'][_0x6212e3(0x2f6,0x33c)];this['options']=deepMerge(_0x389d7e,this['options']);function _0x4e93f7(_0x44f109,_0xf8724e){return _0x4007c0(_0x44f109,_0xf8724e-0x5c8);}function _0x6212e3(_0x37da5a,_0x5049c1){return _0x15148f(_0x5049c1- -0x1db,_0x37da5a);}_0x2cc7e0&&this[_0x4e93f7(0x45e,0x4ac)]();}['processWindData'](_0x13f73e){const {array:_0x1f1bb7}=_0x13f73e;let {min:_0x46afc5,max:_0x3fcb9c}=_0x13f73e;const _0x4f2d4f=new Float32Array(_0x1f1bb7['length']);function _0x1379ed(_0x1d7e66,_0x423034){return _0x15148f(_0x1d7e66- -0x59,_0x423034);}_0x46afc5===undefined&&(console['warn'](_0x214d12(0x33c,0x2fc)),_0x46afc5=Math[_0x214d12(0x375,0x32c)](..._0x1f1bb7));function _0x214d12(_0x404401,_0x57be2f){return _0x4007c0(_0x57be2f,_0x404401-0x4af);}_0x3fcb9c===undefined&&(console[_0x214d12(0x312,0x368)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x3fcb9c=Math[_0x1379ed(0x4ee,0x4c8)](..._0x1f1bb7));const _0x4a3b67=Math[_0x1379ed(0x4ee,0x49f)](Math[_0x214d12(0x2e6,0x2cf)](_0x46afc5),Math['abs'](_0x3fcb9c));for(let _0x12488d=0x0;_0x12488d<_0x1f1bb7['length'];_0x12488d++){const _0x454f81=_0x1f1bb7[_0x12488d]/_0x4a3b67;_0x4f2d4f[_0x12488d]=_0x454f81;}return _0x4f2d4f;}['destroy'](){Object[_0x5a811b(0x226,0x1a7)](this['windTextures'])[_0x1d192a(0x33e,0x36b)](_0x227577=>_0x227577['destroy']()),Object['values'](this[_0x5a811b(0x1ef,0x174)])[_0x1d192a(0x33a,0x36b)](_0x1f17aa=>_0x1f17aa['destroy']());function _0x5a811b(_0x4a95ae,_0x37ceae){return _0x15148f(_0x37ceae- -0x2e9,_0x4a95ae);}function _0x1d192a(_0x183df2,_0x52c920){return _0x15148f(_0x52c920- -0x10a,_0x183df2);}Object['values'](this['primitives'])['forEach'](_0x388031=>_0x388031[_0x1d192a(0x3a3,0x3dd)]()),this['frameRateMonitor'][_0x5a811b(0x1a7,0x1fe)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x4007c0(-0x129,-0x17e)];function _0x28c6(_0x32ef5c,_0x17d486){const _0x188f81=_0x188f();return _0x28c6=function(_0x28c6f3,_0x217f6f){_0x28c6f3=_0x28c6f3-0xf2;let _0xd06e70=_0x188f81[_0x28c6f3];return _0xd06e70;},_0x28c6(_0x32ef5c,_0x17d486);}class WindParticlesRendering{constructor(_0x5e57f3,_0x2c6382,_0x47e2e9,_0x27a099){this[_0x209b43(0x23d,0x273)]=_0x5e57f3,this['options']=_0x2c6382,this['viewerParameters']=_0x47e2e9,this['computing']=_0x27a099;(typeof this[_0x209b43(0x27e,0x306)]['particlesTextureSize']!=='number'||this[_0x209b43(0x27e,0x281)][_0x209b43(0x290,0x210)]<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this[_0x209b43(0x27e,0x1fc)][_0x209b43(0x290,0x2c9)]=0x100);this['colorTable']=this['createColorTableTexture']();function _0x209b43(_0x201668,_0x2ab10b){return _0x4007c0(_0x2ab10b,_0x201668-0x39c);}this[_0x31fa5b(0x4fa,0x502)]=this['createRenderingTextures']();function _0x31fa5b(_0x20230e,_0x245349){return _0x4007c0(_0x20230e,_0x245349-0x5f0);}this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this['createPrimitives']();}['createRenderingTextures'](){const _0x4826fa={};_0x4826fa[_0xe0e38b(0x2f1,0x371)]=this['context'],_0x4826fa['width']=this[_0xe0e38b(0x371,0x371)][_0xe0e38b(0x334,0x3a3)];function _0xe0e38b(_0x1b993b,_0x4b8385){return _0x4007c0(_0x1b993b,_0x4b8385-0x4d0);}function _0x4c0dd7(_0xcba459,_0x31a0ae){return _0x4007c0(_0xcba459,_0x31a0ae-0x52e);}_0x4826fa['height']=this['context']['drawingBufferHeight'],_0x4826fa['pixelFormat']=PixelFormat['RGBA'],_0x4826fa[_0x4c0dd7(0x43e,0x408)]=PixelDatatype['UNSIGNED_BYTE'];const _0x452eb5=_0x4826fa,_0x22937a={};_0x22937a['context']=this['context'],_0x22937a['width']=this['context']['drawingBufferWidth'],_0x22937a['height']=this['context']['drawingBufferHeight'],_0x22937a['pixelFormat']=PixelFormat[_0x4c0dd7(0x489,0x439)],_0x22937a['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x49b5d8=_0x22937a;return{'segmentsColor':new Texture(_0x452eb5),'segmentsDepth':new Texture(_0x49b5d8)};}['createRenderingFramebuffers'](){const _0x4aae69={};_0x4aae69['context']=this['context'];function _0x592328(_0x5d73e2,_0x308a46){return _0x4007c0(_0x5d73e2,_0x308a46-0x40c);}function _0x2dc8a4(_0x39bf92,_0x4cdcee){return _0x4007c0(_0x4cdcee,_0x39bf92-0x3f8);}return _0x4aae69['colorTextures']=[this[_0x2dc8a4(0x30a,0x34a)][_0x2dc8a4(0x317,0x2b4)]],_0x4aae69['depthTexture']=this[_0x2dc8a4(0x30a,0x337)][_0x2dc8a4(0x21d,0x1d9)],{'segments':new Framebuffer(_0x4aae69)};}['destoryRenderingFramebuffers'](){function _0x314b4b(_0x35a59a,_0x16000a){return _0x15148f(_0x16000a- -0x5a1,_0x35a59a);}function _0x230f0d(_0x55e864,_0x423203){return _0x15148f(_0x55e864- -0x46f,_0x423203);}Object['values'](this[_0x314b4b(-0xa9,-0x9e)])[_0x230f0d(0x6,0x10)](_0x3d475a=>{_0x3d475a['destroy']();});}[_0x15148f(0x4a5,0x506)](){const _0x4e28a7=new Float32Array(this[_0xf1d30a(0x45c,0x3e2)][_0x3fdc1e(-0x268,-0x201)][_0x3fdc1e(-0x1ee,-0x1f9)](_0x37a5b4=>{const _0x20f89d=Color$1[_0x517823(0x53d,0x4f4)](_0x37a5b4);function _0x517823(_0x434f87,_0x20d406){return _0x3fdc1e(_0x20d406,_0x434f87-0x6d4);}function _0x51e2ee(_0x498b94,_0x481876){return _0xf1d30a(_0x498b94- -0x664,_0x481876);}return[_0x20f89d['red'],_0x20f89d[_0x51e2ee(-0x218,-0x1dd)],_0x20f89d['blue'],_0x20f89d['alpha']];}));function _0xf1d30a(_0x176a19,_0x43803c){return _0x15148f(_0x176a19- -0xaa,_0x43803c);}const _0x49fec0={};_0x49fec0[_0x3fdc1e(-0x23b,-0x208)]=TextureMinificationFilter['LINEAR'];function _0x3fdc1e(_0x14a3a6,_0x52c7bd){return _0x15148f(_0x52c7bd- -0x6b8,_0x14a3a6);}return _0x49fec0['magnificationFilter']=TextureMagnificationFilter['LINEAR'],_0x49fec0[_0x3fdc1e(-0x21b,-0x22b)]=TextureWrap[_0xf1d30a(0x3e4,0x46d)],_0x49fec0[_0x3fdc1e(-0x269,-0x20a)]=TextureWrap[_0xf1d30a(0x3e4,0x3c1)],new Texture({'context':this['context'],'width':this[_0x3fdc1e(-0x13a,-0x1b2)]['colors']['length'],'height':0x1,'pixelFormat':PixelFormat[_0x3fdc1e(-0x185,-0x20e)],'pixelDatatype':PixelDatatype[_0x3fdc1e(-0x18b,-0x20c)],'sampler':new Sampler(_0x49fec0),'source':{'width':this[_0x3fdc1e(-0x22c,-0x1b2)][_0x3fdc1e(-0x177,-0x201)]['length'],'height':0x1,'arrayBufferView':_0x4e28a7}});}['createSegmentsGeometry'](){const _0x4cf5ef=0x4,_0xb7a45c=this['options'][_0x185d85(-0x79,-0x101)];let _0x406608=[];for(let _0x82689e=0x0;_0x82689e<_0xb7a45c;_0x82689e++){for(let _0x287fa2=0x0;_0x287fa2<_0xb7a45c;_0x287fa2++){for(let _0x54b329=0x0;_0x54b329<_0x4cf5ef;_0x54b329++){_0x406608['push'](_0x82689e/_0xb7a45c),_0x406608['push'](_0x287fa2/_0xb7a45c);}}}_0x406608=new Float32Array(_0x406608);const _0x3fe04b=this['options']['particlesTextureSize']**0x2;let _0x3e5c4c=[];for(let _0xd26f36=0x0;_0xd26f36<_0x3fe04b;_0xd26f36++){_0x3e5c4c['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x3e5c4c=new Float32Array(_0x3e5c4c);function _0x597227(_0xd97a3f,_0x25e362){return _0x4007c0(_0xd97a3f,_0x25e362- -0x81);}let _0x2cbf61=[];for(let _0x4b3516=0x0,_0x4e1635=0x0;_0x4b3516<_0x3fe04b;_0x4b3516++){_0x2cbf61['push'](_0x4e1635+0x0,_0x4e1635+0x1,_0x4e1635+0x2,_0x4e1635+0x2,_0x4e1635+0x1,_0x4e1635+0x3),_0x4e1635+=_0x4cf5ef;}_0x2cbf61=new Uint32Array(_0x2cbf61);const _0xe18e5d={};_0xe18e5d['componentDatatype']=ComponentDatatype[_0x597227(-0x1f7,-0x1f9)],_0xe18e5d[_0x185d85(-0x14f,-0x17d)]=0x2,_0xe18e5d['values']=_0x406608;const _0x25cd9a={};_0x25cd9a['componentDatatype']=ComponentDatatype['FLOAT'],_0x25cd9a[_0x597227(-0x1a7,-0x209)]=0x3,_0x25cd9a['values']=_0x3e5c4c;function _0x185d85(_0x517452,_0x2edeeb){return _0x4007c0(_0x517452,_0x2edeeb-0xb);}const _0xdcf5b4=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0xe18e5d),'normal':new GeometryAttribute(_0x25cd9a)}),'indices':_0x2cbf61});return _0xdcf5b4;}['createRawRenderState'](_0x1f43ad){const _0x29e98f={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x1f43ad};return Appearance['getDefaultRenderState'](!![],![],_0x29e98f);}[_0x15148f(0x514,0x53d)](){const _0x122194={};_0x122194['st']=0x0,_0x122194[_0x1d6c9c(0x198,0x158)]=0x1;function _0x15c9f1(_0x5742d1,_0x285dd9){return _0x15148f(_0x5742d1-0x21,_0x285dd9);}const _0x12ce9e={};_0x12ce9e['enabled']=!![];const _0x45b3ac={};_0x45b3ac[_0x1d6c9c(0x11b,0xbc)]=!![],_0x45b3ac[_0x1d6c9c(0x12b,0x18b)]=WebGLRenderingContext['FUNC_ADD'],_0x45b3ac['blendFuncSource']=WebGLRenderingContext[_0x15c9f1(0x4b8,0x4d7)],_0x45b3ac['blendFuncDestination']=WebGLRenderingContext[_0x1d6c9c(0x130,0x12a)];function _0x1d6c9c(_0x272fc3,_0x803885){return _0x4007c0(_0x803885,_0x272fc3-0x2d4);}const _0x4228e1={};_0x4228e1[_0x1d6c9c(0x1be,0x1bb)]=undefined,_0x4228e1['depthTest']=_0x12ce9e,_0x4228e1['depthMask']=!![],_0x4228e1['blending']=_0x45b3ac;const _0x4f9e85=new CustomPrimitive({'commandType':_0x1d6c9c(0x17c,0x100),'attributeLocations':_0x122194,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x1d6c9c(0x11d,0xbc)],'uniformMap':{'previousParticlesPosition':()=>this[_0x15c9f1(0x47f,0x4c9)][_0x1d6c9c(0x10d,0x16e)]['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0x15c9f1(0x47f,0x4e3)][_0x15c9f1(0x47e,0x501)][_0x15c9f1(0x516,0x541)],'postProcessingPosition':()=>this[_0x1d6c9c(0x10e,0x186)][_0x1d6c9c(0x10d,0xfe)][_0x1d6c9c(0x13b,0xcd)],'particlesSpeed':()=>this[_0x1d6c9c(0x10e,0xcd)][_0x1d6c9c(0x10d,0xc9)][_0x15c9f1(0x4d4,0x451)],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{function _0x5cf679(_0x44b972,_0x4c7396){return _0x15c9f1(_0x4c7396- -0x656,_0x44b972);}function _0x39a9f6(_0x38dbf7,_0x7c40ba){return _0x1d6c9c(_0x7c40ba- -0x3ba,_0x38dbf7);}var _0x2b4ab0,_0x33eaaa;const _0x39f3b6=new Cartesian2(((_0x2b4ab0=this[_0x39a9f6(-0x184,-0x204)]['domain'])===null||_0x2b4ab0===void 0x0?void 0x0:_0x2b4ab0[_0x39a9f6(-0x22f,-0x220)])??this['computing']['windData']['speed'][_0x5cf679(-0x1ac,-0x14b)],((_0x33eaaa=this[_0x39a9f6(-0x274,-0x204)][_0x5cf679(-0x111,-0x152)])===null||_0x33eaaa===void 0x0?void 0x0:_0x33eaaa[_0x5cf679(-0x136,-0xee)])??this[_0x5cf679(-0x1aa,-0x1d7)][_0x5cf679(-0x218,-0x1b0)]['speed']['max']);return _0x39f3b6;},'displayRange':()=>{function _0x2e28cf(_0x161b49,_0x2e0198){return _0x15c9f1(_0x161b49- -0x2ba,_0x2e0198);}var _0x13a055,_0x139595;function _0x61f76f(_0x382e7b,_0x13138f){return _0x1d6c9c(_0x13138f- -0x2c3,_0x382e7b);}const _0x1cd182=new Cartesian2(((_0x13a055=this['options']['displayRange'])===null||_0x13a055===void 0x0?void 0x0:_0x13a055['min'])??this['computing']['windData']['speed']['min'],((_0x139595=this[_0x61f76f(-0x152,-0x10d)]['displayRange'])===null||_0x139595===void 0x0?void 0x0:_0x139595['max'])??this['computing'][_0x2e28cf(0x1ec,0x222)]['speed']['max']);return _0x1cd182;},'particleHeight':()=>this['options'][_0x1d6c9c(0x1d5,0x253)]||0x0,'aspect':()=>this[_0x1d6c9c(0x175,0x19d)][_0x15c9f1(0x518,0x532)]/this['context']['drawingBufferHeight'],'pixelSize':()=>this[_0x1d6c9c(0x18d,0x142)]['pixelSize'],'lineWidth':()=>{const _0x221e7a={};_0x221e7a['min']=0x1,_0x221e7a[_0x513a16(0x58f,0x5b4)]=0x2;const _0x59f96d=this[_0x4064ec(-0x182,-0x149)]['lineWidth']||_0x221e7a;function _0x513a16(_0x15c777,_0x1ef6de){return _0x15c9f1(_0x1ef6de-0x4c,_0x15c777);}function _0x4064ec(_0x12fe48,_0x24d52d){return _0x15c9f1(_0x24d52d- -0x670,_0x12fe48);}return new Cartesian2(_0x59f96d['min'],_0x59f96d[_0x513a16(0x5d9,0x5b4)]);},'lineLength':()=>{const _0x4fdd0f={};_0x4fdd0f['min']=0x14;function _0x50a15d(_0x4ac2c8,_0x206a7d){return _0x1d6c9c(_0x206a7d- -0x117,_0x4ac2c8);}function _0x5eac9e(_0x3a5772,_0x2d31bf){return _0x1d6c9c(_0x2d31bf- -0x2ae,_0x3a5772);}_0x4fdd0f['max']=0x64;const _0x436e03=this['options'][_0x50a15d(0x21,0x31)]||_0x4fdd0f;return new Cartesian2(_0x436e03[_0x5eac9e(-0x186,-0x114)],_0x436e03['max']);},'is3D':()=>this['viewerParameters'][_0x15c9f1(0x53e,0x517)]===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this[_0x15c9f1(0x557,0x5d0)]['segmentsDepth']},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager[_0x1d6c9c(0x1de,0x1d4)](),'rawRenderState':this[_0x15c9f1(0x531,0x58f)](_0x4228e1)}),_0xa44c8a={};return _0xa44c8a['segments']=_0x4f9e85,_0xa44c8a;}['onParticlesTextureSizeChange'](){function _0x18f032(_0x1be8b3,_0x5b1f7c){return _0x15148f(_0x5b1f7c- -0x6d3,_0x1be8b3);}const _0x36d5ba=this[_0x18f032(-0x25b,-0x1db)]();this[_0x4b390c(0x47d,0x4b2)]['segments']['geometry']=_0x36d5ba;const _0x2f6353={};_0x2f6353[_0x4b390c(0x4c8,0x531)]=this[_0x4b390c(0x4c8,0x48d)];function _0x4b390c(_0x52e7c8,_0x25ea96){return _0x15148f(_0x52e7c8-0x3,_0x25ea96);}_0x2f6353[_0x4b390c(0x496,0x4be)]=_0x36d5ba,_0x2f6353['attributeLocations']=this['primitives']['segments']['attributeLocations'],_0x2f6353['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x2284eb=VertexArray[_0x4b390c(0x4e8,0x56a)](_0x2f6353);this[_0x18f032(-0x24c,-0x259)]['segments'][_0x18f032(-0x26d,-0x289)]&&(this['primitives']['segments']['commandToExecute'][_0x4b390c(0x439,0x499)]=_0x2284eb);}[_0x4007c0(-0x157,-0x101)](){function _0x29f5ec(_0x1378d5,_0x31c4fc){return _0x4007c0(_0x31c4fc,_0x1378d5-0x667);}this['colorTable']['destroy'](),this[_0x29f5ec(0x529,0x54a)]=this['createColorTableTexture']();}['updateOptions'](_0xe657dd){function _0xf76819(_0x30f313,_0x1bee62){return _0x15148f(_0x30f313- -0x3b7,_0x1bee62);}const _0x4a27e1=_0xe657dd['colors']&&JSON[_0xf76819(0xb9,0x45)](_0xe657dd['colors'])!==JSON['stringify'](this['options']['colors']);function _0x256c6d(_0x3ad262,_0x47e949){return _0x15148f(_0x47e949- -0x28b,_0x3ad262);}this['options']=deepMerge(_0xe657dd,this['options']),_0x4a27e1&&this[_0xf76819(0x16c,0x1cf)]();}[_0x15148f(0x4e7,0x50d)](){function _0xe98621(_0x2481e3,_0x22279f){return _0x15148f(_0x2481e3- -0x650,_0x22279f);}function _0x29e304(_0x3a9df9,_0x4b131b){return _0x15148f(_0x4b131b- -0x542,_0x3a9df9);}Object[_0xe98621(-0x1c0,-0x14b)](this['framebuffers'])['forEach'](_0x40dd25=>{_0x40dd25['destroy']();}),Object[_0x29e304(-0xf3,-0xb2)](this[_0x29e304(-0x7c,-0xc8)])['forEach'](_0x45a394=>{_0x45a394['destroy']();}),this[_0xe98621(-0x16a,-0x192)][_0xe98621(-0x169,-0x1b3)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x2595b4,_0x2e3e1e,_0x1fd886,_0x2ef1d7,_0xb94501){this['context']=_0x2595b4,this['options']=_0x1fd886,this[_0x4337af(0x469,0x4b9)]=_0x2ef1d7,this['computing']=new WindParticlesComputing(_0x2595b4,_0x2e3e1e,_0x1fd886,_0x2ef1d7,_0xb94501);function _0x46a827(_0x41d38c,_0x649847){return _0x4007c0(_0x649847,_0x41d38c-0x7a);}this['rendering']=new WindParticlesRendering(_0x2595b4,_0x1fd886,_0x2ef1d7,this[_0x4337af(0x3b2,0x43a)]);function _0x4337af(_0x374b11,_0xc38dee){return _0x15148f(_0xc38dee- -0x24,_0x374b11);}this['clearFramebuffers']();}['getPrimitives'](){function _0x19285c(_0x415394,_0x4f4382){return _0x4007c0(_0x415394,_0x4f4382-0x5a9);}const _0x3a0842=[this[_0x19285c(0x3c0,0x3e3)][_0x2ab8c1(0x21a,0x235)]['calculateSpeed'],this[_0x19285c(0x3c6,0x3e3)][_0x19285c(0x41d,0x3ff)]['updatePosition'],this['computing'][_0x2ab8c1(0x21a,0x247)]['postProcessingPosition'],this[_0x19285c(0x3f4,0x3ef)]['primitives']['segments']];function _0x2ab8c1(_0xce35af,_0x11f288){return _0x15148f(_0xce35af- -0x260,_0x11f288);}return _0x3a0842;}[_0x4007c0(-0x74,-0xdb)](){function _0x5afd1a(_0x4c0c4f,_0x1a0d6c){return _0x15148f(_0x1a0d6c- -0x450,_0x4c0c4f);}function _0x56276e(_0x1166d8,_0x117e79){return _0x15148f(_0x1166d8- -0x71e,_0x117e79);}const _0x1a0e6b=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x5afd1a(0xf4,0xd7)]});Object['keys'](this[_0x5afd1a(-0x12,0x1a)]['framebuffers'])['forEach'](_0xcd43ab=>{_0x1a0e6b['framebuffer']=this['rendering']['framebuffers'][_0xcd43ab],_0x1a0e6b['execute'](this['context']);});}['changeOptions'](_0x22316f){function _0x124a59(_0xcccbf1,_0x1976e9){return _0x15148f(_0x1976e9- -0xbf,_0xcccbf1);}let _0xbca3bb=![];_0x22316f['particlesTextureSize']&&this['options'][_0x124a59(0x48d,0x459)]!==_0x22316f['particlesTextureSize']&&(_0xbca3bb=!![]);const _0x206897=deepMerge(_0x22316f,this['options']);if(_0x206897[_0x34f7cf(0x3e,-0xa)]<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');function _0x34f7cf(_0x18dc1b,_0x467e75){return _0x4007c0(_0x18dc1b,_0x467e75-0x102);}this['options']=_0x206897,this['rendering']['updateOptions'](_0x22316f),this[_0x124a59(0x38e,0x39f)][_0x124a59(0x417,0x3bd)](_0x22316f),_0xbca3bb&&(this[_0x34f7cf(-0x60,-0xc4)]['destroyParticlesTextures'](),this[_0x34f7cf(-0xa1,-0xc4)]['createParticlesTextures'](),this[_0x124a59(0x435,0x3ab)]['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x2a3c10){this[_0x1c2561(-0x187,-0x12e)]=_0x2a3c10;function _0x1c2561(_0x1f6731,_0x316855){return _0x4007c0(_0x1f6731,_0x316855-0x19);}this['computing'][_0x15437f(-0xff,-0xff)]=_0x2a3c10;function _0x15437f(_0x4d75e6,_0xd5a443){return _0x15148f(_0x4d75e6- -0x5dc,_0xd5a443);}this['rendering']['viewerParameters']=_0x2a3c10;}[_0x15148f(0x4e7,0x53b)](){this['computing']['destroy']();function _0x21a65c(_0x4b912d,_0xfec5b8){return _0x15148f(_0x4b912d- -0x348,_0xfec5b8);}function _0x2aa213(_0x7b4e67,_0x5f1415){return _0x4007c0(_0x5f1415,_0x7b4e67-0x488);}this[_0x2aa213(0x2ce,0x25b)][_0x21a65c(0x19f,0x143)]();}}const Cesium$1=mars3d__namespace[_0x15148f(0x4a6,0x429)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x4897ae={};_0x4897ae['min']=0x1,_0x4897ae[_0x4007c0(-0xdc,-0xdd)]=0x2;const _0xbcdec9={};_0xbcdec9[_0x4007c0(-0xf1,-0x13a)]=0x14,_0xbcdec9[_0x4007c0(-0xe7,-0xdd)]=0x64;const _0x589cc4={};_0x589cc4['particlesTextureSize']=0x64,_0x589cc4[_0x4007c0(-0x11b,-0xff)]=0x0,_0x589cc4['lineWidth']=_0x4897ae,_0x589cc4['lineLength']=_0xbcdec9,_0x589cc4[_0x4007c0(-0x163,-0x155)]=0x1,_0x589cc4[_0x15148f(0x4be,0x504)]=0.003,_0x589cc4['dropRateBump']=0.001,_0x589cc4['colors']=['rgb(206,255,255)'],_0x589cc4['flipY']=![];function _0x15148f(_0x41d20d,_0x230faa){return _0x28c6(_0x41d20d-0x344,_0x230faa);}_0x589cc4[_0x15148f(0x4fb,0x50d)]=!![];const DEF_OPTIONS=_0x589cc4;class WindLayer extends BaseLayer$1{constructor(_0x18cbe4={}){_0x18cbe4={...DEF_OPTIONS,..._0x18cbe4},super(_0x18cbe4),this['_setOptionsHook'](_0x18cbe4,_0x18cbe4);}get[_0x4007c0(-0x16c,-0x108)](){function _0x14c88e(_0x2a6f11,_0x142e69){return _0x4007c0(_0x142e69,_0x2a6f11-0x50a);}return this[_0x14c88e(0x360,0x34f)];}get[_0x4007c0(-0xec,-0x11b)](){return this['options']['data'];}set[_0x15148f(0x509,0x55a)](_0x2c16cd){this['options']['data']=_0x2c16cd,this['setData'](_0x2c16cd);}get['colors'](){return this['options']['colors'];}set[_0x15148f(0x4b7,0x4bb)](_0x37c03a){this['options']['colors']=_0x37c03a;function _0x339d7a(_0x578e16,_0x3046e9){return _0x4007c0(_0x3046e9,_0x578e16-0x41b);}const _0x107c31={};_0x107c31['colors']=_0x37c03a,this[_0x339d7a(0x2c9,0x279)](this['options'],_0x107c31);}['_showHook'](_0x36ff55){_0x36ff55?this['_addedHook']():this['_removedHook']();}[_0x15148f(0x47e,0x495)](){}[_0x15148f(0x4c6,0x519)](){this['scene']=this[_0x8a57b0(0x64,0x6d)][_0x8a57b0(-0x55,0x34)],this[_0x8a57b0(0x148,0x126)]=this['_map']['camera'];this[_0x22a2c9(0x134,0xf4)][_0x8a57b0(0xbd,0xfe)]&&this['setData'](this['options']['data']);if(!this[_0x22a2c9(0xb3,0xf0)]||!this[_0x8a57b0(0xb2,0x42)])return;function _0x22a2c9(_0x17aae7,_0x3d2e84){return _0x4007c0(_0x3d2e84,_0x17aae7-0x252);}this[_0x8a57b0(0x70,0xd2)]={'lonRange':new Cesium$1[(_0x22a2c9(0x80,0x99))](-0xb4,0xb4),'latRange':new Cesium$1[(_0x22a2c9(0x80,0xa1))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this['updateViewerParameters']();function _0x8a57b0(_0x27aa17,_0x211f8c){return _0x4007c0(_0x27aa17,_0x211f8c-0x219);}this[_0x8a57b0(0x139,0xf1)]=new WindParticleSystem(this['scene']['context'],this[_0x8a57b0(0x4c,0x7a)],this[_0x22a2c9(0x134,0x1aa)],this['viewerParameters'],this['scene']),this[_0x22a2c9(0xa8,0xed)]=this['particleSystem'][_0x22a2c9(0xb6,0x60)](),this['primitives'][_0x8a57b0(0x8f,0x6a)](_0x357db7=>{function _0x5cb022(_0x553736,_0x4a52a5){return _0x8a57b0(_0x4a52a5,_0x553736-0xa7);}function _0x4406d1(_0x41f96a,_0x2ec86f){return _0x8a57b0(_0x2ec86f,_0x41f96a-0x431);}this[_0x4406d1(0x465,0x4a6)]['primitives'][_0x4406d1(0x52b,0x5a7)](_0x357db7);}),this[_0x22a2c9(0x15f,0x135)]['percentageChanged']=0.01,this[_0x8a57b0(0x184,0x126)]['changed']['addEventListener'](this[_0x8a57b0(0x12d,0x13b)]['bind'](this)),this['scene'][_0x22a2c9(0xf9,0xb4)]['addEventListener'](this['updateViewerParameters']['bind'](this)),window[_0x8a57b0(-0x11,0x74)](_0x8a57b0(0xd1,0x68),this[_0x22a2c9(0x174,0x119)][_0x22a2c9(0x139,0x163)](this));}['_removedHook'](){function _0x1da88e(_0x500a6a,_0x248582){return _0x15148f(_0x248582- -0x23b,_0x500a6a);}this['camera']['changed']['removeEventListener'](this[_0x1da88e(0x31d,0x30b)]['bind'](this));function _0x1e712b(_0x51f3b4,_0x5061fb){return _0x15148f(_0x5061fb- -0x1c6,_0x51f3b4);}this['scene']['morphComplete'][_0x1e712b(0x1fc,0x27d)](this['updateViewerParameters']['bind'](this)),window['removeEventListener'](_0x1e712b(0x228,0x2ad),this['updateViewerParameters'][_0x1da88e(0x2a7,0x2d0)](this)),this[_0x1e712b(0x2c9,0x2b4)]&&(this['primitives']['forEach'](_0x5337ee=>{function _0x5aad58(_0x817e75,_0x49b863){return _0x1e712b(_0x49b863,_0x817e75- -0x5);}this['scene']['primitives'][_0x5aad58(0x2ca,0x29a)](_0x5337ee);}),delete this[_0x1e712b(0x32b,0x2b4)]),this['particleSystem']&&(this['particleSystem'][_0x1e712b(0x30c,0x321)](),delete this['particleSystem']);}['setData'](_0x3ff14a,_0x1cc351){function _0x17ff70(_0xe35255,_0x533e15){return _0x15148f(_0xe35255- -0x71e,_0x533e15);}function _0x5b14aa(_0x268f99,_0x3acbe6){return _0x15148f(_0x3acbe6- -0x3cc,_0x268f99);}this['windData']=this['processWindData'](_0x3ff14a);if(_0x1cc351){this[_0x17ff70(-0x2d9,-0x2ff)](),this['_addedHook']();return;}this['particleSystem']?(this['particleSystem']['computing']['updateWindData'](this['windData']),this['scene'][_0x17ff70(-0x1ee,-0x207)]()):this[_0x17ff70(-0x258,-0x262)]();}[_0x4007c0(-0x1a1,-0x152)](_0x5adea2,_0x498060){function _0x1d12db(_0x3bad08,_0x1dd80f){return _0x15148f(_0x3bad08- -0x20e,_0x1dd80f);}function _0x4c3965(_0x23afaa,_0x5a8d24){return _0x15148f(_0x5a8d24- -0x1d7,_0x23afaa);}this['particleSystem']&&(this[_0x1d12db(0x2ee,0x335)]['changeOptions'](_0x498060),this['scene'][_0x4c3965(0x35a,0x359)]());}['processWindData'](_0x1cf5ef){var _0x3d9b38,_0x18e986;const _0x34bcd9={..._0x1cf5ef},_0x1d2f9e=_0x34bcd9;function _0xe705ac(_0x32bbf7,_0xa84cfe){return _0x4007c0(_0xa84cfe,_0x32bbf7-0x306);}!_0x1d2f9e[_0xe705ac(0x189,0x18d)]&&_0x1d2f9e['rows']&&(_0x1d2f9e[_0x3b69a7(0x181,0x102)]=_0x1d2f9e['rows']);!_0x1d2f9e[_0x3b69a7(0xbf,0x12b)]&&_0x1d2f9e['cols']&&(_0x1d2f9e['width']=_0x1d2f9e['cols']);!_0x1d2f9e[_0xe705ac(0x185,0x19a)]&&(_0x1d2f9e['bounds']={'west':_0x1d2f9e['xmin'],'south':_0x1d2f9e[_0xe705ac(0x1f3,0x1fb)],'east':_0x1d2f9e['xmax'],'north':_0x1d2f9e['ymax']});if(!_0x1d2f9e['u']){const _0x1db9b4={};_0x1db9b4['array']=_0x1cf5ef[_0xe705ac(0x11f,0x112)],_0x1db9b4['min']=_0x1cf5ef['umin'],_0x1db9b4['max']=_0x1cf5ef['umax'],_0x1d2f9e['u']=_0x1db9b4;}if(!_0x1d2f9e['v']){const _0x2fd51b={};_0x2fd51b['array']=_0x1cf5ef['vdata'],_0x2fd51b[_0xe705ac(0x1cc,0x1fd)]=_0x1cf5ef[_0x3b69a7(0xf3,0x15f)],_0x2fd51b[_0x3b69a7(0x229,0x1a2)]=_0x1cf5ef[_0xe705ac(0x20c,0x1aa)],_0x1d2f9e['v']=_0x2fd51b;}function _0x3b69a7(_0x4ffc9f,_0x328313){return _0x15148f(_0x328313- -0x3a5,_0x4ffc9f);}if(((_0x3d9b38=_0x1d2f9e[_0xe705ac(0x173,0x12b)])===null||_0x3d9b38===void 0x0?void 0x0:_0x3d9b38[_0x3b69a7(0x103,0x145)])===undefined||((_0x18e986=_0x1d2f9e['speed'])===null||_0x18e986===void 0x0?void 0x0:_0x18e986['max'])===undefined||_0x1d2f9e['speed']['array']===undefined){const _0x41e438={'array':new Float32Array(_0x1d2f9e['u']['array']['length']),'min':Number[_0xe705ac(0x124,0x186)],'max':Number['MIN_VALUE']};for(let _0x3abc3c=0x0;_0x3abc3c<_0x1d2f9e['u']['array']['length'];_0x3abc3c++){_0x41e438[_0x3b69a7(0xce,0xaa)][_0x3abc3c]=Math['sqrt'](_0x1d2f9e['u']['array'][_0x3abc3c]*_0x1d2f9e['u'][_0x3b69a7(0x92,0xaa)][_0x3abc3c]+_0x1d2f9e['v']['array'][_0x3abc3c]*_0x1d2f9e['v']['array'][_0x3abc3c]),_0x41e438[_0x3b69a7(0x6a,0xaa)][_0x3abc3c]!==0x0&&(_0x41e438['min']=Math['min'](_0x41e438['min'],_0x41e438['array'][_0x3abc3c]),_0x41e438[_0xe705ac(0x229,0x23e)]=Math['max'](_0x41e438[_0xe705ac(0x229,0x203)],_0x41e438['array'][_0x3abc3c]));}_0x1d2f9e['speed']=_0x41e438;}return _0x1d2f9e;}[_0x4007c0(-0xcd,-0xde)](){var _0xa5259b;const _0x11c64a=this['scene'];if(!_0x11c64a)return;const _0x1f3cdd=_0x11c64a['canvas'],_0x415348={};_0x415348['x']=0x0,_0x415348['y']=0x0;const _0x45d226={};_0x45d226['x']=0x0,_0x45d226['y']=_0x1f3cdd['clientHeight'];const _0x4bd650={};_0x4bd650['x']=_0x1f3cdd['clientWidth'],_0x4bd650['y']=0x0;const _0x356827={};_0x356827['x']=_0x1f3cdd[_0x31c136(-0x276,-0x23c)],_0x356827['y']=_0x1f3cdd['clientHeight'];const _0x199ad3=[_0x415348,_0x45d226,_0x4bd650,_0x356827];function _0x481b16(_0x350f99,_0x28f262){return _0x15148f(_0x350f99- -0x315,_0x28f262);}let _0xd22681=0xb4,_0x1352f8=-0xb4,_0x49510a=0x5a,_0x1979b7=-0x5a,_0xbf758d=![];for(const _0x577b47 of _0x199ad3){const _0x4b96ba=_0x11c64a['camera'][_0x31c136(-0x1f3,-0x1a1)](new Cesium$1[(_0x481b16(0x13d,0xe6))](_0x577b47['x'],_0x577b47['y']),_0x11c64a['globe']['ellipsoid']);if(!_0x4b96ba){_0xbf758d=!![];break;}const _0x4807be=_0x11c64a[_0x31c136(-0x208,-0x241)]['ellipsoid']['cartesianToCartographic'](_0x4b96ba),_0x2ce032=Cesium$1[_0x481b16(0x1fa,0x187)]['toDegrees'](_0x4807be[_0x481b16(0x1a3,0x145)]),_0x7939d2=Cesium$1[_0x31c136(-0x140,-0x18c)]['toDegrees'](_0x4807be[_0x31c136(-0x20b,-0x239)]);_0xd22681=Math[_0x31c136(-0x1f8,-0x1b1)](_0xd22681,_0x2ce032),_0x1352f8=Math[_0x31c136(-0x19d,-0x154)](_0x1352f8,_0x2ce032),_0x49510a=Math[_0x31c136(-0x12d,-0x1b1)](_0x49510a,_0x7939d2),_0x1979b7=Math[_0x481b16(0x232,0x27d)](_0x1979b7,_0x7939d2);}function _0x31c136(_0x320442,_0x20b02b){return _0x4007c0(_0x320442,_0x20b02b- -0x77);}if(!_0xbf758d){const _0x29fc34=new Cesium$1[(_0x481b16(0x13d,0x198))](Math[_0x481b16(0x232,0x26d)](this['windData']['bounds']['west'],_0xd22681),Math['min'](this['windData'][_0x31c136(-0x242,-0x1f8)][_0x481b16(0x13b,0x190)],_0x1352f8)),_0x188337=new Cesium$1[(_0x481b16(0x13d,0xbd))](Math['max'](this['windData'][_0x31c136(-0x1f9,-0x1f8)]['south'],_0x49510a),Math[_0x481b16(0x1d5,0x1c6)](this['windData']['bounds'][_0x31c136(-0x1cc,-0x1f0)],_0x1979b7)),_0xa71530=(_0x29fc34['y']-_0x29fc34['x'])*0.05,_0x3d88d1=(_0x188337['y']-_0x188337['x'])*0.05;_0x29fc34['x']=Math[_0x481b16(0x232,0x2a7)](this[_0x481b16(0x170,0x1e6)][_0x31c136(-0x232,-0x1f8)][_0x31c136(-0x1fe,-0x19e)],_0x29fc34['x']-_0xa71530),_0x29fc34['y']=Math[_0x481b16(0x1d5,0x25b)](this[_0x31c136(-0x1a4,-0x216)][_0x481b16(0x18e,0x175)]['east'],_0x29fc34['y']+_0xa71530),_0x188337['x']=Math['max'](this[_0x481b16(0x170,0x1b6)][_0x481b16(0x18e,0x1a5)]['south'],_0x188337['x']-_0x3d88d1),_0x188337['y']=Math['min'](this['windData']['bounds'][_0x31c136(-0x196,-0x1f0)],_0x188337['y']+_0x3d88d1),this[_0x481b16(0x1c8,0x1af)]['lonRange']=_0x29fc34,this['viewerParameters']['latRange']=_0x188337;const _0x23a05e=this['windData']['bounds'][_0x31c136(-0x22f,-0x24b)]-this['windData'][_0x31c136(-0x178,-0x1f8)]['west'],_0x1ac57c=this['windData']['bounds']['north']-this['windData']['bounds']['south'],_0x1936f1=(_0x29fc34['y']-_0x29fc34['x'])/_0x23a05e,_0x3ac268=(_0x188337['y']-_0x188337['x'])/_0x1ac57c,_0x345d3c=Math[_0x481b16(0x1d5,0x259)](_0x1936f1,_0x3ac268),_0x56f1d1=0x3e8*_0x345d3c;_0x56f1d1>0x0&&(this[_0x481b16(0x1c8,0x18f)][_0x481b16(0x152,0x18f)]=Math['max'](0x0,Math['min'](0x3e8,_0x56f1d1)));}this[_0x31c136(-0x1b8,-0x1be)][_0x31c136(-0xf8,-0x17e)]=this['scene']['mode'],(_0xa5259b=this['particleSystem'])===null||_0xa5259b===void 0x0||_0xa5259b[_0x481b16(0x12c,0xea)](this['viewerParameters']);}['getDataAtLonLat'](_0x260ba6,_0x5d1356){const {bounds:_0x3c922b,width:_0x3eded0,height:_0x402fe6,u:_0x40bd59,v:_0x4829d1,speed:_0x45632e}=this['windData'],{flipY:_0x1596fb}=this['options'];function _0x22a7f3(_0x17687d,_0x298506){return _0x4007c0(_0x17687d,_0x298506-0x5a4);}if(_0x260ba6<_0x3c922b[_0x22a7f3(0x4e8,0x47d)]||_0x260ba6>_0x3c922b['east']||_0x5d1356<_0x3c922b[_0x22a7f3(0x45c,0x403)]||_0x5d1356>_0x3c922b['north'])return null;const _0x1da606=(_0x260ba6-_0x3c922b[_0x22a7f3(0x503,0x47d)])/(_0x3c922b[_0x4ac21f(-0xde,-0x137)]-_0x3c922b['west'])*(_0x3eded0-0x1);let _0x36f32d=(_0x5d1356-_0x3c922b[_0x4ac21f(-0xd2,-0x104)])/(_0x3c922b['north']-_0x3c922b[_0x4ac21f(-0xc4,-0x104)])*(_0x402fe6-0x1);_0x1596fb&&(_0x36f32d=_0x402fe6-0x1-_0x36f32d);const _0x3f7d21=Math[_0x22a7f3(0x3c9,0x3c8)](_0x1da606),_0x5cf98b=Math['floor'](_0x36f32d),_0x3b6542=Math['floor'](_0x1da606),_0x2fde63=Math[_0x22a7f3(0x495,0x46a)](_0x3b6542+0x1,_0x3eded0-0x1),_0x53c3a1=Math[_0x4ac21f(-0x17f,-0x13f)](_0x36f32d),_0x3ac667=Math['min'](_0x53c3a1+0x1,_0x402fe6-0x1),_0x56d205=_0x1da606-_0x3b6542;function _0x4ac21f(_0x5b9595,_0x5852c8){return _0x4007c0(_0x5b9595,_0x5852c8-0x9d);}const _0x278877=_0x36f32d-_0x53c3a1,_0x581591=_0x5cf98b*_0x3eded0+_0x3f7d21,_0x2b8387=_0x53c3a1*_0x3eded0+_0x3b6542,_0xed4782=_0x53c3a1*_0x3eded0+_0x2fde63,_0x3fbc62=_0x3ac667*_0x3eded0+_0x3b6542,_0xbcab6c=_0x3ac667*_0x3eded0+_0x2fde63,_0x40e84a=_0x40bd59['array'][_0x2b8387],_0x55117d=_0x40bd59['array'][_0xed4782],_0x3b3208=_0x40bd59[_0x22a7f3(0x3f3,0x3cf)][_0x3fbc62],_0x28895b=_0x40bd59['array'][_0xbcab6c],_0x30f54a=(0x1-_0x56d205)*(0x1-_0x278877)*_0x40e84a+_0x56d205*(0x1-_0x278877)*_0x55117d+(0x1-_0x56d205)*_0x278877*_0x3b3208+_0x56d205*_0x278877*_0x28895b,_0x486897=_0x4829d1['array'][_0x2b8387],_0x3b5791=_0x4829d1['array'][_0xed4782],_0x40a2ee=_0x4829d1[_0x4ac21f(-0x152,-0x138)][_0x3fbc62],_0xd97ebd=_0x4829d1['array'][_0xbcab6c],_0x45ba5f=(0x1-_0x56d205)*(0x1-_0x278877)*_0x486897+_0x56d205*(0x1-_0x278877)*_0x3b5791+(0x1-_0x56d205)*_0x278877*_0x40a2ee+_0x56d205*_0x278877*_0xd97ebd,_0x309440=Math['sqrt'](_0x30f54a*_0x30f54a+_0x45ba5f*_0x45ba5f),_0x248c92={};_0x248c92['u']=_0x40bd59['array'][_0x581591],_0x248c92['v']=_0x4829d1['array'][_0x581591],_0x248c92[_0x22a7f3(0x48d,0x411)]=_0x45632e['array'][_0x581591];const _0x188022={};_0x188022['u']=_0x30f54a,_0x188022['v']=_0x45ba5f,_0x188022[_0x4ac21f(-0x168,-0xf6)]=_0x309440;const _0x5b0a6={};return _0x5b0a6['original']=_0x248c92,_0x5b0a6['interpolated']=_0x188022,_0x5b0a6;}}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace['layer'][_0x15148f(0x48f,0x47c)]=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this['lat']=null,this[_0x1d15ff(0x20b,0x242)]=null;function _0x1d15ff(_0x59ada1,_0x155ae5){return _0x15148f(_0x155ae5- -0x2f6,_0x59ada1);}this['tlat']=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x10bc1b in this){delete this[_0x10bc1b];}}}class CanvasWindField{constructor(_0x12309c){this['setOptions'](_0x12309c);}get[_0x4007c0(-0x1f1,-0x1eb)](){return this['_speedRate'];}set[_0x4007c0(-0x16e,-0x1eb)](_0x5e0d4a){function _0x15ba4c(_0x1caba3,_0x465c25){return _0x15148f(_0x1caba3- -0x612,_0x465c25);}function _0x23321a(_0x2639be,_0x37ff76){return _0x4007c0(_0x2639be,_0x37ff76-0x4eb);}this['_speedRate']=(0x64-(_0x5e0d4a>0x63?0x63:_0x5e0d4a))*0x64,this['_calc_speedRate']=[(this['xmax']-this[_0x23321a(0x3a6,0x3f2)])/this[_0x23321a(0x45f,0x405)],(this[_0x23321a(0x2b2,0x2fe)]-this['ymin'])/this['_speedRate']];}get[_0x15148f(0x50d,0x493)](){return this['_maxAge'];}set['maxAge'](_0x3f37cc){function _0x149661(_0xf578a8,_0x27a89e){return _0x15148f(_0x27a89e- -0x512,_0xf578a8);}this[_0x149661(-0x27,-0x44)]=_0x3f37cc;}[_0x4007c0(-0x145,-0xf2)](_0x55c0e4){this['options']=_0x55c0e4,this['maxAge']=_0x55c0e4['maxAge']||0x78,this[_0x34d507(0x327,0x2d9)]=_0x55c0e4['speedRate']||0x32;function _0x34d507(_0x3bfcf4,_0x51e09a){return _0x15148f(_0x51e09a- -0x160,_0x3bfcf4);}this[_0x5b5b95(-0x18,0x28)]=[];function _0x5b5b95(_0x2d4441,_0x4c1493){return _0x15148f(_0x4c1493- -0x45c,_0x2d4441);}const _0xf47480=_0x55c0e4['particlesNumber']||0x1000;for(let _0x5a88ca=0x0;_0x5a88ca<_0xf47480;_0x5a88ca++){const _0x50960d=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x50960d);}}[_0x15148f(0x4c4,0x4ab)](_0x3166b5){this[_0x4d1480(0x595,0x573)]=_0x3166b5['rows'],this['cols']=_0x3166b5['cols'],this[_0x4d1480(0x5ea,0x5c0)]=_0x3166b5['xmin'],this['xmax']=_0x3166b5['xmax'],this[_0x4d1480(0x56b,0x5a6)]=_0x3166b5['ymin'],this[_0x22fc4f(0x1b2,0x1ab)]=_0x3166b5['ymax'],this['grid']=[];const _0x13bcc1=_0x3166b5['udata'],_0x54c444=_0x3166b5['vdata'];let _0x1bacc3=![];_0x13bcc1[_0x22fc4f(0x20d,0x282)]===this['rows']&&_0x13bcc1[0x0][_0x4d1480(0x4c1,0x527)]===this[_0x4d1480(0x4ea,0x50e)]&&(_0x1bacc3=!![]);let _0x402528=0x0;function _0x4d1480(_0x545e5e,_0x426de1){return _0x4007c0(_0x545e5e,_0x426de1-0x6b9);}function _0x22fc4f(_0x527ed1,_0x56596c){return _0x4007c0(_0x56596c,_0x527ed1-0x39f);}let _0x592011=null,_0x1a6daa=null;for(let _0x2a3d0f=0x0;_0x2a3d0f<this['rows'];_0x2a3d0f++){_0x592011=[];for(let _0x538d60=0x0;_0x538d60<this['cols'];_0x538d60++,_0x402528++){_0x1bacc3?_0x1a6daa=this['_calcUV'](_0x13bcc1[_0x2a3d0f][_0x538d60],_0x54c444[_0x2a3d0f][_0x538d60]):_0x1a6daa=this['_calcUV'](_0x13bcc1[_0x402528],_0x54c444[_0x402528]),_0x592011['push'](_0x1a6daa);}this['grid']['push'](_0x592011);}!this['options']['flipY']&&this[_0x4d1480(0x55e,0x5b9)][_0x22fc4f(0x1b3,0x1af)]();}[_0x4007c0(-0x20d,-0x1e4)](){function _0x1c3501(_0x30abc6,_0x20a1c9){return _0x4007c0(_0x30abc6,_0x20a1c9-0x684);}delete this['rows'],delete this[_0x1c3501(0x50d,0x4d9)],delete this['xmin'],delete this['xmax'];function _0x29ee43(_0x54b2fb,_0x2bc1b4){return _0x15148f(_0x2bc1b4- -0x617,_0x54b2fb);}delete this[_0x29ee43(-0x140,-0x106)],delete this['ymax'],delete this[_0x29ee43(-0xd2,-0xf3)],delete this['particles'];}['toGridXY'](_0x296913,_0x2a8fb2){function _0x8054d1(_0x21936b,_0x18fbc7){return _0x15148f(_0x18fbc7- -0x576,_0x21936b);}const _0xee1699=(_0x296913-this['xmin'])/(this['xmax']-this[_0x8054d1(-0x42,-0x4b)])*(this['cols']-0x1);function _0x1dfa2b(_0x3b9439,_0x2ccf6d){return _0x15148f(_0x3b9439- -0x5f5,_0x2ccf6d);}const _0x5d79d4=(this['ymax']-_0x2a8fb2)/(this[_0x8054d1(-0x136,-0x13f)]-this[_0x8054d1(-0xc,-0x65)])*(this['rows']-0x1);return[_0xee1699,_0x5d79d4];}['getUVByXY'](_0x22f4cd,_0x4937f0){if(_0x22f4cd<0x0||_0x22f4cd>=this['cols']||_0x4937f0>=this['rows'])return[0x0,0x0,0x0];const _0x44379d=Math['floor'](_0x22f4cd),_0x1fbba3=Math[_0x2196fe(0x3df,0x3a7)](_0x4937f0);if(_0x44379d===_0x22f4cd&&_0x1fbba3===_0x4937f0)return this['grid'][_0x4937f0][_0x22f4cd];function _0x1b2635(_0x2b0bf5,_0x4b38cd){return _0x15148f(_0x4b38cd- -0x659,_0x2b0bf5);}const _0xd0420c=_0x44379d+0x1,_0x4eb3c3=_0x1fbba3+0x1,_0xf2402c=this['getUVByXY'](_0x44379d,_0x1fbba3);function _0x2196fe(_0x1d4aa1,_0x48a067){return _0x4007c0(_0x48a067,_0x1d4aa1-0x5bb);}const _0x5d575e=this['getUVByXY'](_0xd0420c,_0x1fbba3),_0x3c12b0=this[_0x1b2635(-0x1b9,-0x157)](_0x44379d,_0x4eb3c3),_0x210bdf=this['getUVByXY'](_0xd0420c,_0x4eb3c3);let _0x4c9f5d=null;try{_0x4c9f5d=this['_bilinearInterpolation'](_0x22f4cd-_0x44379d,_0x4937f0-_0x1fbba3,_0xf2402c,_0x5d575e,_0x3c12b0,_0x210bdf);}catch(_0x1e3c33){console[_0x1b2635(-0x131,-0x137)](_0x22f4cd,_0x4937f0);}return _0x4c9f5d;}[_0x15148f(0x468,0x45c)](_0x2e771b,_0x42c1cf,_0x3b7877,_0x2935b1,_0x467a94,_0x2e0a88){const _0x30fe35=0x1-_0x2e771b,_0x3fc7a1=0x1-_0x42c1cf;function _0x24dba9(_0x29666f,_0x31dca3){return _0x15148f(_0x31dca3- -0x533,_0x29666f);}const _0x5f3583=_0x30fe35*_0x3fc7a1,_0x2b21c0=_0x2e771b*_0x3fc7a1,_0x44a4d7=_0x30fe35*_0x42c1cf,_0x2f2ee3=_0x2e771b*_0x42c1cf,_0x2b22e7=_0x3b7877[0x0]*_0x5f3583+_0x2935b1[0x0]*_0x2b21c0+_0x467a94[0x0]*_0x44a4d7+_0x2e0a88[0x0]*_0x2f2ee3,_0xa18f3a=_0x3b7877[0x1]*_0x5f3583+_0x2935b1[0x1]*_0x2b21c0+_0x467a94[0x1]*_0x44a4d7+_0x2e0a88[0x1]*_0x2f2ee3;return this[_0x24dba9(-0x8f,-0xdc)](_0x2b22e7,_0xa18f3a);}['_calcUV'](_0x12e2b2,_0x207a4c){return[+_0x12e2b2,+_0x207a4c,Math['sqrt'](_0x12e2b2*_0x12e2b2+_0x207a4c*_0x207a4c)];}['getUVByPoint'](_0x27b489,_0x46127b){if(!this['isInExtent'](_0x27b489,_0x46127b))return null;const _0x5d126f=this[_0x5bc4c1(-0x151,-0x107)](_0x27b489,_0x46127b);function _0x5bc4c1(_0x394c67,_0x46a0fd){return _0x4007c0(_0x46a0fd,_0x394c67- -0x3f);}const _0x17a7d7=this['getUVByXY'](_0x5d126f[0x0],_0x5d126f[0x1]);return _0x17a7d7;}['isInExtent'](_0x273531,_0x35ebbc){function _0x541b14(_0x46059d,_0x1112f){return _0x4007c0(_0x46059d,_0x1112f-0x36f);}return _0x273531>=this[_0x541b14(0x2b5,0x276)]&&_0x273531<=this['xmax']&&_0x35ebbc>=this['ymin']&&_0x35ebbc<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x4c75d1=fRandomByfloat(this['xmin'],this[_0x544708(0x352,0x303)]),_0x465805=fRandomByfloat(this[_0x172ceb(0xb5,0x8b)],this['ymax']),_0xc0b644={};function _0x544708(_0x541e0a,_0x2c64ad){return _0x4007c0(_0x2c64ad,_0x541e0a-0x443);}_0xc0b644[_0x172ceb(0xd8,0x84)]=_0x465805;function _0x172ceb(_0x56cffd,_0x6048c2){return _0x15148f(_0x56cffd- -0x45c,_0x6048c2);}return _0xc0b644[_0x544708(0x34c,0x389)]=_0x4c75d1,_0xc0b644;}['getParticles'](){let _0x1d9754,_0x2b559a,_0x3d3ea1;for(let _0x84460e=0x0,_0x583d73=this['particles']['length'];_0x84460e<_0x583d73;_0x84460e++){let _0x19a913=this['particles'][_0x84460e];_0x19a913['age']<=0x0&&(_0x19a913=this['_randomParticle'](_0x19a913));if(_0x19a913[_0x5cab1c(0x4c4,0x478)]>0x0){const _0x47f694=_0x19a913['tlng'],_0x52c7ef=_0x19a913['tlat'];_0x3d3ea1=this['getUVByPoint'](_0x47f694,_0x52c7ef),_0x3d3ea1?(_0x1d9754=_0x47f694+this['_calc_speedRate'][0x0]*_0x3d3ea1[0x0],_0x2b559a=_0x52c7ef+this['_calc_speedRate'][0x1]*_0x3d3ea1[0x1],_0x19a913[_0xafa67(0x160,0x17d)]=_0x47f694,_0x19a913['lat']=_0x52c7ef,_0x19a913['tlng']=_0x1d9754,_0x19a913['tlat']=_0x2b559a,_0x19a913['speed']=_0x3d3ea1[0x2],_0x19a913[_0x5cab1c(0x4c4,0x4e9)]--):_0x19a913[_0x5cab1c(0x4c4,0x494)]=0x0;}}function _0xafa67(_0x1f811b,_0xbfcaf2){return _0x15148f(_0x1f811b- -0x3cd,_0xbfcaf2);}function _0x5cab1c(_0x45b19a,_0x2cc55c){return _0x4007c0(_0x2cc55c,_0x45b19a-0x5ac);}return this['particles'];}[_0x15148f(0x444,0x43b)](_0x130328){let _0x4cd7a4,_0xe5c7c4;for(let _0x5ae64f=0x0;_0x5ae64f<0x1e;_0x5ae64f++){_0x4cd7a4=this[_0x419166(0x3d9,0x396)](),_0xe5c7c4=this['getUVByPoint'](_0x4cd7a4['lng'],_0x4cd7a4[_0x419166(0x443,0x43a)]);if(_0xe5c7c4&&_0xe5c7c4[0x2]>0x0)break;}if(!_0xe5c7c4)return _0x130328;const _0x130256=_0x4cd7a4[_0x419166(0x43c,0x471)]+this['_calc_speedRate'][0x0]*_0xe5c7c4[0x0],_0x503c9d=_0x4cd7a4['lat']+this['_calc_speedRate'][0x1]*_0xe5c7c4[0x1];_0x130328['lng']=_0x4cd7a4['lng'],_0x130328['lat']=_0x4cd7a4['lat'];function _0x314e53(_0x5c7d2e,_0x408dfc){return _0x4007c0(_0x5c7d2e,_0x408dfc- -0x80);}_0x130328['tlng']=_0x130256,_0x130328['tlat']=_0x503c9d,_0x130328[_0x314e53(-0x198,-0x168)]=Math['round'](0xa+Math[_0x314e53(-0x1c1,-0x1d0)]()*this['maxAge']);function _0x419166(_0x44b39a,_0x3e1a8b){return _0x15148f(_0x44b39a- -0xf1,_0x3e1a8b);}return _0x130328[_0x314e53(-0x1cd,-0x213)]=_0xe5c7c4[0x2],_0x130328;}[_0x15148f(0x4e7,0x4bb)](){for(const _0x10283a in this){delete this[_0x10283a];}}}function fRandomByfloat(_0x523872,_0xaa832e){return _0x523872+Math['random']()*(_0xaa832e-_0x523872);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x4007c0(-0x129,-0x108)][_0x4007c0(-0x1ba,-0x19b)];class CanvasWindLayer extends BaseLayer{constructor(_0x3cda70={}){function _0x3ef759(_0x41d245,_0xfdd677){return _0x4007c0(_0xfdd677,_0x41d245-0x66e);}function _0x16da92(_0x5a0252,_0x444350){return _0x4007c0(_0x5a0252,_0x444350-0x1bb);}super(_0x3cda70),this['_setOptionsHook'](_0x3cda70),this[_0x3ef759(0x564,0x560)]=null,_0x3cda70[_0x3ef759(0x501,0x556)]&&_0x3cda70['steps']&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x3cda70));}['_setOptionsHook'](_0x5c7402,_0x4cef35){function _0x2754cc(_0x3bb7fc,_0xbee837){return _0x15148f(_0xbee837- -0x163,_0x3bb7fc);}this[_0xcfc438(0x3d5,0x445)]=0x3e8/(_0x5c7402['frameRate']||0xa),this['_pointerEvents']=this['options'][_0xcfc438(0x34b,0x361)]??![],this['color']=_0x5c7402['color']||'#ffffff',this[_0xcfc438(0x3c2,0x389)]=_0x5c7402['lineWidth']||0x1,this[_0x2754cc(0x3c9,0x3c2)]=_0x5c7402[_0x2754cc(0x416,0x3c2)]??0x0,this[_0x2754cc(0x418,0x3b4)]=_0x5c7402[_0x2754cc(0x3b8,0x3b4)]??![];function _0xcfc438(_0x4e262b,_0x43a91a){return _0x4007c0(_0x43a91a,_0x4e262b-0x4f2);}this[_0xcfc438(0x382,0x3e0)]&&this['windField']['setOptions'](_0x5c7402);}get['layer'](){function _0x456317(_0x3c324f,_0x3dfaac){return _0x4007c0(_0x3c324f,_0x3dfaac-0x2ab);}return this[_0x456317(0x127,0x1a1)];}get[_0x4007c0(-0x100,-0x131)](){function _0x8dca4f(_0x4e3e22,_0x3eefec){return _0x15148f(_0x3eefec- -0x221,_0x4e3e22);}return this[_0x8dca4f(0x205,0x257)]['scene']['canvas']['clientWidth'];}get[_0x15148f(0x456,0x41d)](){function _0x5a8c17(_0x36994a,_0x4bbd11){return _0x15148f(_0x4bbd11- -0x64f,_0x36994a);}function _0x5b70ab(_0x58ea9d,_0x4c1762){return _0x15148f(_0x58ea9d- -0x6c4,_0x4c1762);}return this['_map'][_0x5a8c17(-0x1bf,-0x210)]['canvas'][_0x5a8c17(-0x22c,-0x1c3)];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x4007c0(-0x202,-0x1a7)](_0x5178ca){function _0x36686d(_0x46c598,_0x21b97e){return _0x15148f(_0x21b97e- -0x380,_0x46c598);}this[_0x36686d(0x15a,0x164)]=_0x5178ca;function _0x48da57(_0x13cc0c,_0x1edd5c){return _0x4007c0(_0x1edd5c,_0x13cc0c-0x115);}if(!this[_0x48da57(0xb,0x18)])return;_0x5178ca?this[_0x36686d(0x1a5,0x19a)]['style']['pointer-events']=_0x48da57(-0x47,-0x6e):this[_0x36686d(0x21c,0x19a)]['style']['pointer-events']='none';}get[_0x4007c0(-0x15c,-0x167)](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x542f46){this[_0x3898e2(0x41c,0x45f)]['particlesNumber']=_0x542f46;function _0x38d8b7(_0x45905b,_0x47f5db){return _0x15148f(_0x45905b- -0x453,_0x47f5db);}clearTimeout(this['_canrefresh']);function _0x3898e2(_0x505501,_0x2e4f18){return _0x4007c0(_0x2e4f18,_0x505501-0x53a);}this[_0x38d8b7(0xcc,0x86)]=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x15148f(0x439,0x47b)](){function _0x5013bc(_0x313570,_0x4c58b){return _0x4007c0(_0x4c58b,_0x313570-0x68e);}function _0x5e1f65(_0x41f15c,_0x15e7e1){return _0x4007c0(_0x41f15c,_0x15e7e1-0x451);}return this[_0x5e1f65(0x36b,0x333)][_0x5013bc(0x4a3,0x446)];}set['speedRate'](_0x1832df){function _0x1f5d12(_0x2d771e,_0x4ee424){return _0x4007c0(_0x2d771e,_0x4ee424-0x129);}this['options'][_0x1f5d12(-0x12f,-0xc2)]=_0x1832df,this['windField']&&(this['windField']['speedRate']=_0x1832df);}get['maxAge'](){return this['options']['maxAge'];}set['maxAge'](_0x2a233a){function _0x230798(_0x5827f0,_0x1e53f5){return _0x15148f(_0x1e53f5- -0x400,_0x5827f0);}function _0x55e90c(_0x31c67f,_0x1d9680){return _0x4007c0(_0x31c67f,_0x1d9680-0xb0);}this[_0x55e90c(0xe,-0x6e)]['maxAge']=_0x2a233a,this['windField']&&(this['windField'][_0x55e90c(-0xef,-0x67)]=_0x2a233a);}get[_0x4007c0(-0xe3,-0x11b)](){function _0x487e06(_0x26ab29,_0x384db1){return _0x4007c0(_0x26ab29,_0x384db1- -0xa4);}return this[_0x487e06(-0x2bc,-0x243)];}set[_0x4007c0(-0x175,-0x11b)](_0x2735e4){function _0x261541(_0x260baf,_0x6e189a){return _0x15148f(_0x260baf- -0xdc,_0x6e189a);}this[_0x261541(0x396,0x31e)](_0x2735e4);}get['rectangle'](){let _0x31ac8f=this['windData'][_0x53e09b(0x48e,0x48c)],_0x46e6d9=this[_0x53e09b(0x408,0x3e6)][_0x53e09b(0x497,0x494)],_0x144b68=this['windData'][_0x53e09b(0x490,0x472)],_0x18b607=this['windData'][_0x6bb53(0x32a,0x31f)];_0x46e6d9>=0x167&&_0x31ac8f===0x0&&(_0x31ac8f=-0xb4,_0x46e6d9=0xb4);_0x31ac8f=Math[_0x53e09b(0x461,0x4a8)](_0x31ac8f,-0xb4),_0x46e6d9=Math['min'](_0x46e6d9,0xb4);function _0x6bb53(_0x23dad0,_0x558ff1){return _0x15148f(_0x23dad0- -0x10d,_0x558ff1);}_0x144b68=Math['max'](_0x144b68,-0x5a);function _0x53e09b(_0x37503d,_0x2d14cb){return _0x4007c0(_0x37503d,_0x2d14cb-0x585);}return _0x18b607=Math['min'](_0x18b607,0x5a),Cesium['Rectangle']['fromDegrees'](_0x31ac8f,_0x144b68,_0x46e6d9,_0x18b607);}['_showHook'](_0x2fa157){function _0x481910(_0x3dabca,_0x402511){return _0x4007c0(_0x3dabca,_0x402511-0x3ad);}_0x2fa157?this['_addedHook']():(this['windData']&&(this[_0x481910(0x284,0x28f)]['data']=this['windData']),this['_removedHook']());}[_0x15148f(0x47e,0x4b1)](){function _0x1cfa03(_0x502ceb,_0x24fae4){return _0x4007c0(_0x24fae4,_0x502ceb-0x169);}function _0x1d7aed(_0x4f9891,_0x9f12cd){return _0x4007c0(_0x9f12cd,_0x4f9891-0x651);}this['options'][_0x1d7aed(0x577,0x5b0)]?this[_0x1cfa03(0x6,0x36)]():this['windField']=new CanvasWindField(this[_0x1d7aed(0x533,0x552)]);}['_addedHook'](){function _0x2c09a8(_0x3ced7b,_0x32b156){return _0x15148f(_0x3ced7b- -0x717,_0x32b156);}this[_0x765c8b(0x389,0x340)]=this[_0x2c09a8(-0x262,-0x201)]();function _0x765c8b(_0x4f56b6,_0x35e847){return _0x4007c0(_0x35e847,_0x4f56b6-0x493);}const _0x5f0c93={};_0x5f0c93['willReadFrequently']=!![],this['canvasContext']=this['canvas']['getContext']('2d',_0x5f0c93),this['bindEvent'](),this['options'][_0x765c8b(0x378,0x382)]&&this[_0x2c09a8(-0x2a5,-0x21c)](this['options']['data']);}['_removedHook'](){function _0x2b4023(_0x3671ae,_0x402dd4){return _0x15148f(_0x3671ae- -0xb9,_0x402dd4);}this['clear'](),this['unbindEvent']();function _0x2037fe(_0x249312,_0x5ebd80){return _0x15148f(_0x249312- -0x3ce,_0x5ebd80);}this[_0x2b4023(0x461,0x411)]&&(this['_map']['container'][_0x2b4023(0x41a,0x429)](this['canvas']),delete this[_0x2b4023(0x461,0x410)]);}[_0x15148f(0x4b5,0x464)](){const _0x25f848=mars3d__namespace['DomUtil'][_0x78b1f6(-0xa3,-0x103)]('canvas','mars3d-canvasWind',this[_0x3e536e(-0x21f,-0x252)]['container']);_0x25f848['style'][_0x3e536e(-0x1fa,-0x23a)]='absolute';function _0x78b1f6(_0x45f48a,_0x1175ce){return _0x4007c0(_0x45f48a,_0x1175ce-0xbd);}_0x25f848[_0x78b1f6(-0xad,-0xf3)][_0x78b1f6(-0xae,-0x106)]='0px',_0x25f848[_0x78b1f6(-0xb2,-0xf3)][_0x3e536e(-0x19e,-0x1df)]=_0x78b1f6(0x26,-0x25),_0x25f848['style'][_0x3e536e(-0x1c7,-0x245)]=this[_0x78b1f6(-0x138,-0xef)]['scene'][_0x3e536e(-0x17d,-0x156)]['clientWidth']+'px',_0x25f848[_0x78b1f6(-0xdf,-0xf3)][_0x3e536e(-0x1f0,-0x22c)]=this['_map']['scene'][_0x78b1f6(-0x4a,-0x4d)]['clientHeight']+'px',_0x25f848['style'][_0x78b1f6(-0x83,-0xea)]=this['_pointerEvents']?_0x78b1f6(-0x15,-0x2c):'none';function _0x3e536e(_0x4e6348,_0x421d90){return _0x4007c0(_0x421d90,_0x4e6348- -0x73);}return _0x25f848['style'][_0x3e536e(-0x184,-0x116)]=this[_0x3e536e(-0x191,-0x16b)][_0x78b1f6(0x4,-0x54)]??0x9,_0x25f848[_0x3e536e(-0x1c7,-0x23f)]=this['_map']['scene'][_0x3e536e(-0x17d,-0x191)]['clientWidth'],_0x25f848['height']=this['_map'][_0x78b1f6(-0x179,-0x128)]['canvas']['clientHeight'],_0x25f848;}['resize'](){function _0x310506(_0x47e3da,_0x46c57d){return _0x15148f(_0x46c57d- -0x6dd,_0x47e3da);}function _0x4f9685(_0x264d06,_0x30f768){return _0x4007c0(_0x30f768,_0x264d06-0xe9);}this['canvas']&&(this[_0x4f9685(-0x21,0x15)][_0x4f9685(-0xc7,-0xa4)][_0x310506(-0x1b0,-0x20d)]=this['_map']['scene'][_0x310506(-0x14f,-0x1c3)][_0x310506(-0x239,-0x27e)]+'px',this['canvas'][_0x4f9685(-0xc7,-0xbe)][_0x4f9685(-0x94,-0x6c)]=this[_0x4f9685(-0xc3,-0xe1)][_0x4f9685(-0xfc,-0x142)][_0x310506(-0x13f,-0x1c3)][_0x310506(-0x237,-0x251)]+'px',this['canvas']['width']=this[_0x310506(-0x28b,-0x265)]['scene'][_0x310506(-0x145,-0x1c3)][_0x4f9685(-0xdc,-0x6d)],this[_0x4f9685(-0x21,0x44)]['height']=this['_map']['scene']['canvas'][_0x310506(-0x1d0,-0x251)]);}['bindEvent'](){const _0x1ce09c=this;let _0x352489=Date['now']();function _0x2d6e71(_0x4e612f,_0x57adce){return _0x15148f(_0x4e612f- -0x69f,_0x57adce);}function _0x2f5bc8(_0x31ec1a,_0x4f19bd){return _0x4007c0(_0x4f19bd,_0x31ec1a-0x30b);}(function _0x3f3e23(){function _0x254cca(_0x47b67b,_0x433d5d){return _0x28c6(_0x433d5d-0x23c,_0x47b67b);}function _0x3a785b(_0xa0a25e,_0x82e866){return _0x28c6(_0xa0a25e- -0x47,_0x82e866);}if(_0x1ce09c[_0x3a785b(0x181,0x185)])return;_0x1ce09c['_animateFrame']=window[_0x3a785b(0x115,0x187)](_0x3f3e23);if(_0x1ce09c['show']&&_0x1ce09c[_0x254cca(0x3d1,0x3ac)]){const _0x33dc63=Date['now'](),_0x262b07=_0x33dc63-_0x352489;_0x262b07>_0x1ce09c['frameTime']&&(_0x352489=_0x33dc63-_0x262b07%_0x1ce09c['frameTime'],_0x1ce09c['update']());}}(),window[_0x2d6e71(-0x220,-0x2a6)](_0x2f5bc8(0x15a,0x125),this['resize']['bind'](this),![]),this[_0x2d6e71(-0x259,-0x2bd)]=![],this[_0x2f5bc8(0x221,0x27f)]=![],this[_0x2d6e71(-0x199,-0x153)][_0x2d6e71(-0x219,-0x1ba)]&&(this[_0x2d6e71(-0x227,-0x1dc)]['on'](mars3d__namespace[_0x2d6e71(-0x1c9,-0x17e)]['wheel'],this[_0x2d6e71(-0x15e,-0x126)],this),this[_0x2d6e71(-0x227,-0x1b2)]['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x2f5bc8(0x1a2,0x217)],this),this['_map']['on'](mars3d__namespace[_0x2d6e71(-0x1c9,-0x224)]['mouseUp'],this['_onMouseUpEvent'],this)));}[_0x15148f(0x49f,0x440)](){window['cancelAnimationFrame'](this['_animateFrame']);function _0x39f2bf(_0x5d2f60,_0x3536ef){return _0x4007c0(_0x5d2f60,_0x3536ef-0x38);}function _0x240804(_0x289eb5,_0x30fa07){return _0x15148f(_0x30fa07- -0x2b0,_0x289eb5);}delete this[_0x39f2bf(-0x1ef,-0x193)],window['removeEventListener']('resize',this['resize']),this['options'][_0x240804(0x154,0x1d6)]&&(this['_map'][_0x39f2bf(-0x227,-0x1b2)](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x39f2bf(-0x186,-0x174)][_0x240804(0x127,0x18a)](mars3d__namespace[_0x39f2bf(-0x140,-0x116)]['mouseDown'],this['_onMouseDownEvent'],this),this[_0x39f2bf(-0xf5,-0x174)]['off'](mars3d__namespace[_0x240804(0x1c3,0x226)]['mouseUp'],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace[_0x240804(0x217,0x226)]['mouseMove'],this[_0x39f2bf(-0xf6,-0xd1)],this));}[_0x4007c0(-0x13e,-0xe3)](_0x5947d8){clearTimeout(this[_0x3f8389(0x328,0x2f4)]);function _0x474c6c(_0x32a7b6,_0x1bab74){return _0x4007c0(_0x32a7b6,_0x1bab74-0x623);}function _0x3f8389(_0x26a08f,_0x549b8b){return _0x4007c0(_0x26a08f,_0x549b8b-0x3d0);}if(!this[_0x474c6c(0x408,0x44c)]||!this['canvas'])return;this['canvas']['style']['visibility']='hidden',this['refreshTimer']=setTimeout(()=>{function _0x4dc75c(_0x48e9a3,_0xc8c207){return _0x3f8389(_0xc8c207,_0x48e9a3- -0x3);}if(!this['show'])return;this[_0x5b0751(0x1d1,0x19f)]();function _0x5b0751(_0x190c7a,_0x3c426c){return _0x3f8389(_0x3c426c,_0x190c7a- -0x6f);}this[_0x4dc75c(0x2c3,0x260)][_0x4dc75c(0x21d,0x290)][_0x5b0751(0x217,0x1cb)]=_0x4dc75c(0x209,0x1d3);},0xc8);}['_onMouseDownEvent'](_0x455b8a){function _0x4ba31e(_0x44899b,_0x420dcd){return _0x15148f(_0x44899b- -0x3db,_0x420dcd);}this[_0x36cb1c(-0x253,-0x216)]=!![];function _0x36cb1c(_0x1bba7d,_0x310eba){return _0x15148f(_0x1bba7d- -0x699,_0x310eba);}this['_map']['off'](mars3d__namespace[_0x4ba31e(0xfb,0x92)][_0x36cb1c(-0x1f5,-0x265)],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x36cb1c(-0x17e,-0x14b)],this);}[_0x4007c0(-0xe3,-0x109)](_0x8df784){function _0x500d57(_0x5aa1a4,_0x11ce2e){return _0x15148f(_0x11ce2e- -0x4b9,_0x5aa1a4);}if(!this['show']||!this[_0x500d57(0x6e,0x61)])return;function _0x3cfead(_0xfc395c,_0x250f47){return _0x4007c0(_0x250f47,_0xfc395c-0x74);}this['mouse_down']&&(this['canvas']['style'][_0x500d57(-0x20,0x21)]=_0x500d57(-0x70,-0x4b),this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x28e3bf){if(!this[_0x240a36(-0x174,-0x1d4)]||!this['canvas'])return;this['_map'][_0x422004(0x444,0x424)](mars3d__namespace[_0x240a36(-0xeb,-0xa3)][_0x422004(0x422,0x48e)],this[_0x240a36(-0xa6,-0x12b)],this);this['mouse_down']&&this['mouse_move']&&this[_0x422004(0x4d2,0x47e)]();function _0x240a36(_0x2e825c,_0x4ff27a){return _0x4007c0(_0x4ff27a,_0x2e825c-0x63);}function _0x422004(_0x500b7e,_0x16a3e0){return _0x4007c0(_0x500b7e,_0x16a3e0-0x60e);}this[_0x422004(0x53b,0x504)][_0x422004(0x468,0x45e)]['visibility']='visible',this['mouse_down']=![],this[_0x240a36(-0x87,-0x42)]=![];}['setData'](_0x1eda69){this['clear'](),this[_0x5d5d33(0x528,0x49e)]=_0x1eda69;function _0x5d5d33(_0x4dec31,_0x5f381b){return _0x4007c0(_0x5f381b,_0x4dec31-0x6c7);}this['windField']['setDate'](_0x1eda69),this['redraw']();}['redraw'](){if(!this[_0xb1d735(0x257,0x1ff)])return;function _0xb1d735(_0x528998,_0x491039){return _0x4007c0(_0x491039,_0x528998-0x42e);}function _0x3e2698(_0x25c22c,_0x199245){return _0x4007c0(_0x199245,_0x25c22c-0x12d);}this[_0x3e2698(-0x43,-0x26)]['setOptions'](this[_0xb1d735(0x310,0x289)]),this[_0x3e2698(-0x76,-0x10)]();}['update'](){if(this[_0x5ec88b(-0x13d,-0x18c)])return;this[_0x2c0480(0x1,0x5d)]=!![];function _0x2c0480(_0x31a44f,_0x28c5cd){return _0x4007c0(_0x28c5cd,_0x31a44f-0x137);}function _0x5ec88b(_0x598220,_0x428973){return _0x15148f(_0x598220- -0x62b,_0x428973);}if(this['worker'])this[_0x2c0480(-0x39,0x24)]['update']();else{const _0x5d7066=this[_0x5ec88b(-0x177,-0x126)]['getParticles']();this['_drawLines'](_0x5d7066);}this['_updateIng']=![];}['_drawLines'](_0x32a066){function _0xc8a6fa(_0x2e89a3,_0x228f71){return _0x15148f(_0x228f71- -0x52a,_0x2e89a3);}this['_canvasParticles']=_0x32a066,this['canvasContext']['globalCompositeOperation']='destination-in',this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']);function _0x405dd9(_0x411bdd,_0x11091e){return _0x15148f(_0x11091e- -0xb7,_0x411bdd);}this['canvasContext'][_0x405dd9(0x31b,0x394)]='lighter',this[_0xc8a6fa(-0xa2,-0x63)]['globalAlpha']=0.9;const _0x14c791=this['_map']['scene'][_0x405dd9(0x471,0x41e)]!==Cesium[_0x405dd9(0x427,0x3b8)][_0xc8a6fa(-0x58,0xd)],_0x15389f=this['canvasWidth']*0.25;if(this[_0x405dd9(0x490,0x462)])for(let _0x2da239=0x0,_0x46f375=_0x32a066['length'];_0x2da239<_0x46f375;_0x2da239++){const _0xa6ed4c=_0x32a066[_0x2da239],_0x293b60=this['_tomap'](_0xa6ed4c,_0xa6ed4c[_0x405dd9(0x478,0x476)],_0xa6ed4c['lat'],_0xa6ed4c[_0xc8a6fa(-0x3d,0x15)]),_0x1a7a40=this['_tomap'](_0xa6ed4c,_0xa6ed4c[_0x405dd9(0x4ce,0x481)],_0xa6ed4c[_0x405dd9(0x45c,0x438)],_0xa6ed4c[_0xc8a6fa(0x7,-0x1)]);if(!_0x293b60||!_0x1a7a40)continue;if(_0x14c791&&Math[_0x405dd9(0x408,0x3a4)](_0x293b60[0x0]-_0x1a7a40[0x0])>=_0x15389f)continue;this['canvasContext'][_0xc8a6fa(0x55,-0xc)](),this['canvasContext']['lineWidth']=this[_0x405dd9(0x46c,0x43d)],this['canvasContext']['strokeStyle']=this[_0x405dd9(0x457,0x462)]['getColor'](_0xa6ed4c['speed']),this['canvasContext']['moveTo'](_0x293b60[0x0],_0x293b60[0x1]),this['canvasContext']['lineTo'](_0x1a7a40[0x0],_0x1a7a40[0x1]),this['canvasContext']['stroke']();}else{this[_0xc8a6fa(-0x33,-0x63)][_0x405dd9(0x4e3,0x467)](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this['color'];for(let _0x47c9ca=0x0,_0xff8be5=_0x32a066['length'];_0x47c9ca<_0xff8be5;_0x47c9ca++){const _0x443171=_0x32a066[_0x47c9ca],_0x367be6=this['_tomap'](_0x443171,_0x443171['lng'],_0x443171['lat'],_0x443171['alt']),_0x118d4a=this['_tomap'](_0x443171,_0x443171[_0x405dd9(0x4dd,0x481)],_0x443171[_0x405dd9(0x3c9,0x438)],_0x443171['talt']);if(!_0x367be6||!_0x118d4a)continue;if(_0x14c791&&Math[_0x405dd9(0x396,0x3a4)](_0x367be6[0x0]-_0x118d4a[0x0])>=_0x15389f)continue;this['canvasContext'][_0x405dd9(0x32d,0x3a5)](_0x367be6[0x0],_0x367be6[0x1]),this['canvasContext']['lineTo'](_0x118d4a[0x0],_0x118d4a[0x1]);}this[_0xc8a6fa(-0x58,-0x63)][_0x405dd9(0x3a2,0x403)]();}}['_tomap'](_0xc8ae02,_0x1d2198,_0x4e5e04,_0x3d794d){function _0x27a706(_0x40ca5e,_0x5c474f){return _0x4007c0(_0x40ca5e,_0x5c474f- -0xd7);}const _0x40b535=Cesium['Cartesian3']['fromDegrees'](_0x1d2198,_0x4e5e04,_0x3d794d??this[_0x885f20(0xd3,0xf6)]),_0x14ada8=this['_map']['scene'];function _0x885f20(_0x12787a,_0x24ecb7){return _0x15148f(_0x24ecb7- -0x42f,_0x12787a);}if(_0x14ada8['mode']===Cesium['SceneMode']['SCENE3D']){const _0x1e01cc=new Cesium[(_0x885f20(0x26,0x6a))](_0x14ada8[_0x27a706(-0x23f,-0x2a1)]['ellipsoid'],_0x14ada8['camera'][_0x885f20(0x9c,0xba)]),_0x1f07ef=_0x1e01cc[_0x27a706(-0x24c,-0x292)](_0x40b535);if(!_0x1f07ef)return _0xc8ae02[_0x27a706(-0x21a,-0x1bf)]=0x0,null;}const _0x5c5a1d=mars3d__namespace[_0x885f20(0xb0,0xdb)]['toWindowCoordinates'](this['_map'][_0x27a706(-0x2ca,-0x2bc)],_0x40b535);return _0x5c5a1d?[_0x5c5a1d['x'],_0x5c5a1d['y']]:null;}['clear'](){function _0x5f48b(_0x344e4a,_0x5d5bb6){return _0x4007c0(_0x5d5bb6,_0x344e4a- -0xf2);}this['windField']['clear'](),delete this[_0x5f48b(-0x291,-0x286)];}['initWorker'](){function _0x2cdd33(_0xd05376,_0x31269b){return _0x4007c0(_0xd05376,_0x31269b- -0xc9);}this['worker']=new Worker(this['options']['worker']),this['worker']['onmessage']=_0x265661=>{function _0x5ac713(_0x49106b,_0x4c68f8){return _0x28c6(_0x49106b-0x251,_0x4c68f8);}this[_0x2ae016(0x89,0xe6)](_0x265661['data'][_0x2ae016(0x113,0xf9)]);function _0x2ae016(_0x1e5aac,_0x5032e8){return _0x28c6(_0x5032e8- -0x47,_0x1e5aac);}this['_updateIng2']=![];},this[_0x2cdd33(-0x2ba,-0x239)]={'init':_0x5eccf3=>{function _0x124f07(_0x3a0b90,_0x41c640){return _0x2cdd33(_0x41c640,_0x3a0b90-0x43);}const _0xf5e7e1={};_0xf5e7e1['type']=_0x124f07(-0x255,-0x2c9),_0xf5e7e1['options']=_0x5eccf3,this['worker']['postMessage'](_0xf5e7e1);},'setOptions':_0x4bb8ce=>{const _0x3e1707={};function _0x1d3d34(_0xc4e74b,_0x2580e6){return _0x2cdd33(_0x2580e6,_0xc4e74b-0x2b1);}_0x3e1707['type']='setOptions';function _0x3f729b(_0xa53310,_0x37c965){return _0x2cdd33(_0x37c965,_0xa53310-0x3b4);}_0x3e1707[_0x3f729b(0x1cd,0x1b3)]=_0x4bb8ce,this[_0x1d3d34(0x10e,0xd2)]['postMessage'](_0x3e1707);},'setDate':_0x112156=>{const _0x47d9d6={};_0x47d9d6['type']=_0x5473dc(-0x143,-0x1c9);function _0x2a1c44(_0x33dd22,_0xaa5146){return _0x2cdd33(_0x33dd22,_0xaa5146-0x692);}_0x47d9d6['data']=_0x112156;function _0x5473dc(_0x3b18fe,_0x361b6e){return _0x2cdd33(_0x3b18fe,_0x361b6e-0x60);}this['worker'][_0x5473dc(-0x17b,-0x1ad)](_0x47d9d6);},'update':()=>{if(this[_0x42da59(-0x100,-0xbb)])return;this['_updateIng2']=!![];function _0x38cd30(_0x887d76,_0x47847f){return _0x2cdd33(_0x47847f,_0x887d76-0x3bb);}const _0x3c0a47={};_0x3c0a47['type']='update';function _0x42da59(_0x254986,_0x4cfffa){return _0x2cdd33(_0x4cfffa,_0x254986-0x144);}this[_0x42da59(-0x5f,0x15)]['postMessage'](_0x3c0a47);},'clear':()=>{const _0x480a2a={};_0x480a2a['type']='clear';function _0x34f91d(_0x5d1058,_0x334d11){return _0x2cdd33(_0x5d1058,_0x334d11-0x80);}this[_0x34f91d(-0x119,-0x123)]['postMessage'](_0x480a2a);}},this['windField']['init'](this['options']);}}mars3d__namespace['LayerUtil'][_0x4007c0(-0x1ba,-0x157)](_0x15148f(0x476,0x487),CanvasWindLayer),mars3d__namespace['layer'][_0x4007c0(-0x1b0,-0x1a2)]=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace[_0x4007c0(-0x1fc,-0x1e9)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports[_0x4007c0(-0x192,-0x1a2)]=CanvasWindLayer,exports[_0x4007c0(-0x14a,-0x195)]=WindLayer,exports['WindUtil']=WindUtil;const _0xd2c1e9={};_0xd2c1e9['value']=!![],Object[_0x15148f(0x52c,0x575)](exports,'__esModule',_0xd2c1e9);
}));
