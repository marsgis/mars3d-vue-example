/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.11
 * 编译日期：2026-01-01 14:11
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x24e458,_0x3f9aef){function _0x1333ef(_0xb0430d,_0x3dcf0b){return _0x3ea8(_0x3dcf0b- -0x3b5,_0xb0430d);}const _0x13f82a=_0x24e458();function _0x1532da(_0x4abd74,_0x459b17){return _0x3ea8(_0x459b17- -0x3af,_0x4abd74);}while(!![]){try{const _0x22ff1b=parseInt(_0x1532da(-0x21c,-0x19d))/0x1+parseInt(_0x1333ef(-0x25c,-0x22d))/0x2*(-parseInt(_0x1532da(-0x1c8,-0x1e3))/0x3)+-parseInt(_0x1532da(-0x2ad,-0x24a))/0x4*(parseInt(_0x1333ef(-0x24c,-0x1f3))/0x5)+parseInt(_0x1532da(-0x27a,-0x29a))/0x6*(-parseInt(_0x1333ef(-0x260,-0x1f1))/0x7)+parseInt(_0x1333ef(-0x2a0,-0x22f))/0x8*(-parseInt(_0x1532da(-0x152,-0x197))/0x9)+-parseInt(_0x1333ef(-0x21a,-0x203))/0xa+parseInt(_0x1333ef(-0x303,-0x29e))/0xb;if(_0x22ff1b===_0x3f9aef)break;else _0x13f82a['push'](_0x13f82a['shift']());}catch(_0x519163){_0x13f82a['push'](_0x13f82a['shift']());}}}(_0x3822,0x9f897));function _interopNamespace(_0x1cefe2){if(_0x1cefe2&&_0x1cefe2[_0x3a4e27(0x30d,0x2ec)])return _0x1cefe2;function _0x3ca7e7(_0x254bd9,_0x14d537){return _0x3ea8(_0x254bd9- -0xe2,_0x14d537);}function _0x3a4e27(_0x4212f5,_0x4be858){return _0x3ea8(_0x4be858-0xd3,_0x4212f5);}var _0xc03f4=Object['create'](null);return _0x1cefe2&&Object[_0x3a4e27(0x229,0x27a)](_0x1cefe2)[_0x3a4e27(0x2c6,0x292)](function(_0x59d216){function _0x2029b3(_0xd65a27,_0x1c597a){return _0x3a4e27(_0x1c597a,_0xd65a27-0x166);}if(_0x59d216!==_0x2029b3(0x3e2,0x3ad)){var _0x12f2ac=Object['getOwnPropertyDescriptor'](_0x1cefe2,_0x59d216);Object['defineProperty'](_0xc03f4,_0x59d216,_0x12f2ac['get']?_0x12f2ac:{'enumerable':!![],'get':function(){return _0x1cefe2[_0x59d216];}});}}),_0xc03f4[_0x3ca7e7(0xc7,0xd5)]=_0x1cefe2,_0xc03f4;}function _0x3822(){const _0x1b87af=['postMessage','EventType','_map','rgb(206,255,255)','stringify','globalCompositeOperation','east','SCENE3D','blending','computing','fromGeometry','currentParticlesPosition','2026-01-01\x2014:10','getSegmentDrawVertexShader','autoClear','mode','now','NEAREST','keys','absolute','default','rectangle','_randomParticle','camera','DEPTH_COMPONENT','mars3d-wind插件注册成功\x20\x20\x20\x20\x20版本：','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','pickEllipsoid','reCreateWindTextures','853540SsCIqN','udata','bufferUsage','cos','RED','__proto__','wheel','init','isInExtent','getUVByPoint','resize','particlesSpeed','setDate','forEach','uniformMap','mouseUp','10OkyiRY','DomUtil','3961531etCiyQ','north','maxAge','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','frameRateMonitor','_speedRate','attributeLocations','BaseLayer','495195uySYAm','width','clientWidth','CanvasWindField','initWorker','createRenderingTextures','getUpdatePositionShader','_drawLines','_mountedHook','displayRange','removeChild','_onMapWhellEvent','west','cols','Compute','clearFramebuffers','rawRenderState','quietPeriod','visibility','domain','fillRect','length','canvasWind','layer','setGeometry','toWindowCoordinates','SceneMode','canvas','minificationFilter','mouseDown','CLAMP_TO_EDGE','segments','prototype','createWindTextures','_onMouseDownEvent','depthTest','preExecute','initFrameRate','bind','max\x20is\x20undefined,\x20calculate\x20max','createComputingPrimitives','createRenderingFramebuffers','getCalculateSpeedShader','update','getColor','worker','createSegmentsGeometry','isArray','_animateFrame','windTextures','min\x20is\x20undefined,\x20calculate\x20min','canvasContext','type','dropRateBump','particlesTextures','Cartesian2','particleSystem','frameRateAdjustment','pixelDatatype','toGridXY','south','wind','_onMouseUpEvent','canvasWidth','blendEquation','UNSIGNED_BYTE','lonRange','shaderProgram','cancelAnimationFrame','values','215040VxcOPs','dynamic','FLOAT','talt','max','mouse_down','468jBJMlx','__esModule','windField','LayerUtil','lng','min','destroyParticlesTextures','unbindEvent','clearCommand','bindEvent','commandToExecute','dropRate','lastFramesPerSecond','sources','updateWindData','getPostProcessingPositionShader','CanvasWindLayer','Draw','samplingWindow','grid','postProcessingPosition','primitives','hidden','textures','EllipsoidalOccluder','log','wrapS','magnificationFilter','floor','refreshTimer','_calcUV','isDynamic','canvasHeight','6dLbdBR','Cesium','23662859iNRmfP','getPrimitives','viewerParameters','redraw','clear','geometry','top','updateOptions','Cartesian3','pixelFormat','MAX_VALUE','_addedHook','particlesTextureSize','speedRate','particles','array','Log','vertexShaderSource','sceneMode','rows','atan2','context','style','toDegrees','ellipsoid','_updateIng2','lighter','_calc_speedRate','_removedHook','beginPath','updatePosition','updateViewerParameters','segmentsColor','sqrt','normal','framebuffer','onParticlesTextureSizeChange','globalAlpha','register','requestRender','_pointerEvents','\x20\x20\x20\x20编译日期：','blendFuncDestination','getDataAtLonLat','interpolated','onColorTableChange','setOptions','_setOptionsHook','createColorTableTexture','depthTexture','willReadFrequently','ymin','data','fromCache','_createCanvas','age','logInfo','xmax','flipY','colors','RGBA','_canvasParticles','changeOptions','segmentsDepth','removeEventListener','zIndex','positionWC','vertexArray','_onMouseMoveEvent','show','enabled','LINEAR','IDENTITY','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','original','bounds','push','getUVByXY','1783532fLSpDN','WindUtil','drawingBufferHeight','abs','WindLayer','toRadians','lat','Math','isPointVisible','fragmentShaderSource','pixelSize','colorTable','options','lineWidth','warn','ymax','create','processWindData','TRIANGLES','mouse_move','windData','outputTexture','height','frameTime','speed','particlesNumber','frameRate','componentsPerAttribute','off','primitiveType','xmin','scene','_updateIng','712cDqdDg','mouseMove','2FKKlYT','commandList','setData','tlat','tlng','lineLength','requestAnimationFrame','nextParticlesPosition','destroy','getU','_tomap','0px','clientHeight'];_0x3822=function(){return _0x1b87af;};return _0x3822();}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0x5dd9dc(0x4b1,0x4da)];function getU(_0x4c2571,_0x1b3cd1){const _0x403e28=_0x4c2571*Math[_0x283202(0x510,0x511)](Cesium$2[_0x2fb212(0x400,0x388)][_0x283202(0x4c5,0x451)](_0x1b3cd1));function _0x283202(_0x311700,_0x2430d2){return _0x5dd9dc(_0x2430d2,_0x311700- -0x69);}function _0x2fb212(_0x5179b3,_0x3cf6ea){return _0x5dd9dc(_0x5179b3,_0x3cf6ea- -0x1a8);}return _0x403e28;}function getV(_0x16af9c,_0x5dec96){const _0x440823=_0x16af9c*Math['sin'](Cesium$2['Math']['toRadians'](_0x5dec96));return _0x440823;}function getSpeed(_0xf84354,_0x432147){const _0x119ebd=Math[_0x110dcd(0x34b,0x2c0)](Math['pow'](_0xf84354,0x2)+Math['pow'](_0x432147,0x2));function _0x110dcd(_0xb1d9ea,_0x2f4cd7){return _0x5dd9dc(_0x2f4cd7,_0xb1d9ea- -0x1b1);}return _0x119ebd;}function getDirection(_0x467ca2,_0x1a6d55){function _0x44ef40(_0x5c02db,_0x283710){return _0x5dd9dc(_0x5c02db,_0x283710- -0x7f);}function _0x5d9221(_0x5dfae7,_0x2d850e){return _0x5dd9dc(_0x2d850e,_0x5dfae7- -0x19c);}let _0x5b03a0=Cesium$2['Math'][_0x44ef40(0x503,0x473)](Math[_0x5d9221(0x353,0x3a5)](_0x1a6d55,_0x467ca2));return _0x5b03a0+=_0x5b03a0<0x0?0x168:0x0,_0x5b03a0;}const _0x3de0aa={};_0x3de0aa[_0x5dd9dc(0x5d6,0x57b)]=null,_0x3de0aa[_0x5dd9dc(0x5c8,0x555)]=getU,_0x3de0aa['getV']=getV,_0x3de0aa['getSpeed']=getSpeed,_0x3de0aa['getDirection']=getDirection;var WindUtil=_0x3de0aa;const version='3.10.11',buildTime=_0x1ed6da(0x5,-0x55);var updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader=_0x5dd9dc(0x59f,0x524),renderParticlesFragmentShader=_0x5dd9dc(0x5e5,0x573),renderParticlesVertexShader=_0x1ed6da(0x3b,-0x2f);const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0x1ed6da(-0x88,0x0)](){const _0x548ed4={};return _0x548ed4['sources']=[calculateSpeedShader],new ShaderSource$1(_0x548ed4);}static['getUpdatePositionShader'](){const _0x1828d5={};return _0x1828d5['sources']=[updatePositionShader],new ShaderSource$1(_0x1828d5);}static['getSegmentDrawVertexShader'](){const _0xf63a4b={};_0xf63a4b[_0x3cb54d(0x4d7,0x537)]=[renderParticlesVertexShader];function _0x3cb54d(_0x3d2738,_0x534289){return _0x1ed6da(_0x534289,_0x3d2738-0x4a8);}return new ShaderSource$1(_0xf63a4b);}static['getSegmentDrawFragmentShader'](){const _0x50b677={};_0x50b677[_0x48648b(-0x1ea,-0x1b7)]=[renderParticlesFragmentShader];function _0x48648b(_0x2b3ec7,_0x332581){return _0x5dd9dc(_0x2b3ec7,_0x332581- -0x7a0);}return new ShaderSource$1(_0x50b677);}static[_0x5dd9dc(0x648,0x5eb)](){const _0x67b603={};return _0x67b603['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x67b603);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0x5dd9dc(0x4db,0x4da)];class CustomPrimitive{constructor(_0xab08){this['commandType']=_0xab08['commandType'],this['geometry']=_0xab08[_0x24418e(0x185,0x1c8)],this['attributeLocations']=_0xab08[_0x24418e(0x233,0x231)],this[_0x388fef(0x111,0x93)]=_0xab08['primitiveType'],this['uniformMap']=_0xab08['uniformMap']||{},this[_0x388fef(-0xd,0x39)]=_0xab08[_0x388fef(0x1,0x39)];function _0x388fef(_0x1f7b2d,_0x4a3696){return _0x5dd9dc(_0x1f7b2d,_0x4a3696- -0x4b3);}this[_0x388fef(0x18,0x7f)]=_0xab08[_0x388fef(0x97,0x7f)],this['rawRenderState']=_0xab08[_0x24418e(0x245,0x2d4)];function _0x24418e(_0x58fdab,_0x318206){return _0x5dd9dc(_0x318206,_0x58fdab- -0x35b);}this['framebuffer']=_0xab08['framebuffer'],this['outputTexture']=_0xab08['outputTexture'],this[_0x24418e(0x20c,0x206)]=_0xab08[_0x24418e(0x20c,0x1f1)]??![],this[_0x388fef(0xdc,0x101)]=_0xab08['preExecute'],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this[_0x388fef(0x94,0x24)]=_0xab08[_0x388fef(-0x7,0x24)]??(()=>!![]),this['autoClear']&&(this[_0x388fef(0x11a,0x131)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x24418e(0x1a3,0x18c)],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x2630c0){function _0x688f5d(_0x3dd741,_0x100035){return _0x1ed6da(_0x3dd741,_0x100035-0xa1);}function _0x153ca2(_0x2db480,_0x40f3bc){return _0x1ed6da(_0x40f3bc,_0x2db480- -0x18d);}if(this['commandType']===_0x153ca2(-0x15a,-0x171)){const _0x8f72f2={};_0x8f72f2['context']=_0x2630c0,_0x8f72f2[_0x688f5d(-0x8e,-0x39)]=this[_0x153ca2(-0x267,-0x26c)],_0x8f72f2[_0x153ca2(-0x1b9,-0x182)]=this['attributeLocations'],_0x8f72f2[_0x153ca2(-0x1cf,-0x18d)]=BufferUsage$1['STATIC_DRAW'];const _0x3db956=VertexArray$1[_0x153ca2(-0x1e4,-0x17c)](_0x8f72f2),_0x17f387={};_0x17f387['context']=_0x2630c0,_0x17f387['vertexShaderSource']=this[_0x153ca2(-0x25b,-0x252)],_0x17f387[_0x688f5d(0x1a,0x19)]=this[_0x688f5d(-0x71,0x19)],_0x17f387[_0x688f5d(0x6c,0x75)]=this['attributeLocations'];const _0x223bd7=ShaderProgram[_0x153ca2(-0x237,-0x24e)](_0x17f387),_0x16e257=RenderState['fromCache'](this[_0x153ca2(-0x1a7,-0x1fd)]),_0x32c655={};return _0x32c655['owner']=this,_0x32c655['vertexArray']=_0x3db956,_0x32c655['primitiveType']=this['primitiveType'],_0x32c655['modelMatrix']=Matrix4[_0x688f5d(-0x5d,0xa)],_0x32c655['renderState']=_0x16e257,_0x32c655['shaderProgram']=_0x223bd7,_0x32c655[_0x153ca2(-0x249,-0x243)]=this[_0x688f5d(-0x41,-0x1b)],_0x32c655[_0x688f5d(-0x19,0x6b)]=this[_0x688f5d(0x6,0x6b)],_0x32c655['pass']=Pass$1['OPAQUE'],new DrawCommand(_0x32c655);}else{if(this['commandType']==='Compute'){const _0x53f329={};return _0x53f329['owner']=this,_0x53f329[_0x153ca2(-0x215,-0x211)]=this['fragmentShaderSource'],_0x53f329[_0x688f5d(0x24,0x6b)]=this['uniformMap'],_0x53f329[_0x688f5d(-0xa,0x25)]=this[_0x153ca2(-0x209,-0x1b6)],_0x53f329['persists']=!![],new ComputeCommand(_0x53f329);}else throw new Error('Unknown\x20command\x20type');}}[_0x5dd9dc(0x5d6,0x5a8)](_0x427e37,_0xb0c12a){this['geometry']=_0xb0c12a;function _0x48a79b(_0xbbd9da,_0xe5dce4){return _0x5dd9dc(_0xe5dce4,_0xbbd9da- -0x5b2);}function _0x2c6c84(_0xa4905,_0x11ea38){return _0x5dd9dc(_0xa4905,_0x11ea38- -0x3de);}defined(this['commandToExecute'])&&(this[_0x48a79b(0x34,-0x38)]['vertexArray']=VertexArray$1['fromGeometry']({'context':_0x427e37,'geometry':this[_0x48a79b(-0xd2,-0xd2)],'attributeLocations':this[_0x48a79b(-0x24,-0x5d)],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x23005f){if(!this['isDynamic']())return;if(!this[_0x349cf8(0x133,0x141)]||!defined(_0x23005f))return;!defined(this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0x23005f['context']));defined(this['preExecute'])&&this['preExecute']();function _0x349cf8(_0x276cee,_0x9f54b9){return _0x1ed6da(_0x276cee,_0x9f54b9-0x1db);}function _0x453fed(_0x3d30b7,_0x1d4c4e){return _0x5dd9dc(_0x3d30b7,_0x1d4c4e- -0x5a4);}if(!_0x23005f[_0x453fed(-0x83,-0x57)]){console['warn']('frameState.commandList\x20is\x20undefined');return;}defined(this['clearCommand'])&&_0x23005f[_0x453fed(0x29,-0x57)][_0x453fed(-0xa,-0x7d)](this[_0x349cf8(0x1ce,0x205)]),defined(this['commandToExecute'])&&_0x23005f['commandList']['push'](this['commandToExecute']);}['isDestroyed'](){return![];}[_0x1ed6da(-0xba,-0x66)](){if(defined(this['commandToExecute'])){var _0x8786f5;(_0x8786f5=this['commandToExecute']['shaderProgram'])===null||_0x8786f5===void 0x0||_0x8786f5['destroy'](),this['commandToExecute'][_0x12810f(0x12a,0x190)]=undefined;}function _0x12810f(_0xeeca60,_0x423044){return _0x5dd9dc(_0xeeca60,_0x423044- -0x443);}return destroyObject(this);}}function deepMerge(_0x1deee3,_0x226add){if(!_0x1deee3)return _0x226add;if(!_0x226add)return _0x1deee3;const _0x5d93b8={..._0x226add};function _0x3c5183(_0xd73e58,_0x128aeb){return _0x5dd9dc(_0x128aeb,_0xd73e58- -0x4bd);}const _0x4d82e5=_0x5d93b8;for(const _0x2929f4 in _0x1deee3){if(Object[_0x3c5183(0xf3,0xa3)]['hasOwnProperty']['call'](_0x1deee3,_0x2929f4)){const _0x4933c9=_0x1deee3[_0x2929f4],_0x234de8=_0x226add[_0x2929f4];if(Array[_0x1fdc93(0x4bb,0x4fa)](_0x4933c9)){_0x4d82e5[_0x2929f4]=_0x4933c9['slice']();continue;}if(_0x4933c9&&typeof _0x4933c9==='object'){_0x4d82e5[_0x2929f4]=deepMerge(_0x4933c9,_0x234de8||{});continue;}_0x4933c9!==undefined&&(_0x4d82e5[_0x2929f4]=_0x4933c9);}}function _0x1fdc93(_0x28bcf5,_0x47305d){return _0x5dd9dc(_0x28bcf5,_0x47305d- -0xc5);}return _0x4d82e5;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];function _0x5dd9dc(_0xd7ffc7,_0x1a64f0){return _0x3ea8(_0x1a64f0-0x3c4,_0xd7ffc7);}class WindParticlesComputing{constructor(_0x120e35,_0x21a441,_0x471e16,_0x59f00d,_0x2243af){this[_0x35fa25(0x2fe,0x2eb)]=_0x120e35,this[_0x15c94e(0x1a3,0x1c4)]=_0x471e16,this[_0x15c94e(0x157,0x16c)]=_0x59f00d,this[_0x15c94e(0x15d,0x1cc)]=_0x21a441,this[_0x15c94e(0x251,0x1d2)]=0x3c,this['frameRateAdjustment']=0x1;const _0x1bb55b={};function _0x35fa25(_0xe537c1,_0xdac54e){return _0x5dd9dc(_0xe537c1,_0xdac54e- -0x205);}_0x1bb55b['scene']=_0x2243af,_0x1bb55b[_0x35fa25(0x403,0x3e9)]=0x1,_0x1bb55b[_0x15c94e(0x209,0x230)]=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x1bb55b),this['initFrameRate'](),this[_0x15c94e(0x238,0x240)](),this['createParticlesTextures']();function _0x15c94e(_0x1a315c,_0xe3ce3b){return _0x1ed6da(_0x1a315c,_0xe3ce3b-0x249);}this['createComputingPrimitives']();}[_0x1ed6da(0x6d,-0x5)](){const _0x7f21fd=()=>{function _0x3e4984(_0x32f754,_0x3338f7){return _0x3ea8(_0x32f754- -0x219,_0x3338f7);}function _0x211050(_0x1293b7,_0x334bc0){return _0x3ea8(_0x1293b7- -0xd6,_0x334bc0);}this[_0x211050(0xf2,0x125)]['lastFramesPerSecond']>0x14&&(this[_0x211050(0xa9,0xbe)]=this['frameRateMonitor'][_0x3e4984(0xb,-0x38)],this[_0x211050(0x12f,0x172)]=0x3c/Math['max'](this['frameRate'],0x1));};function _0x4d36a4(_0x4e0311,_0x5352f0){return _0x5dd9dc(_0x5352f0,_0x4e0311- -0xfd);}_0x7f21fd();const _0x538a4d=setInterval(_0x7f21fd,0x3e8),_0x19b3ec=this[_0x15b4f4(-0x114,-0x191)]['bind'](this);function _0x15b4f4(_0x4cbb76,_0x5285ba){return _0x5dd9dc(_0x4cbb76,_0x5285ba- -0x6e5);}this[_0x15b4f4(-0x189,-0x191)]=()=>{clearInterval(_0x538a4d),_0x19b3ec();};}['createWindTextures'](){const _0x8b52dc={};_0x8b52dc[_0x259a44(0x18d,0x142)]=TextureMinificationFilter$1[_0x259a44(0x103,0x151)];function _0x173298(_0xd5cdfe,_0x402e3e){return _0x1ed6da(_0x402e3e,_0xd5cdfe-0x50e);}function _0x259a44(_0x8fc2f8,_0x5ef14d){return _0x5dd9dc(_0x5ef14d,_0x8fc2f8- -0x41f);}_0x8b52dc[_0x173298(0x427,0x3ce)]=TextureMagnificationFilter$1['LINEAR'];const _0x274ab3={'context':this['context'],'width':this['windData']['width'],'height':this[_0x259a44(0x11e,0x9a)]['height'],'pixelFormat':PixelFormat$1[_0x173298(0x4ce,0x558)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this['options'][_0x173298(0x469,0x4ee)]??![],'sampler':new Sampler$1(_0x8b52dc)};this['windTextures']={'U':new Texture$1({..._0x274ab3,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x173298(0x43e,0x46a)])}}),'V':new Texture$1({..._0x274ab3,'source':{'arrayBufferView':new Float32Array(this[_0x173298(0x491,0x42d)]['v']['array'])}})};}['createParticlesTextures'](){const _0x3cbdd0={};_0x3cbdd0[_0x437a1f(0x4df,0x4fc)]=TextureMinificationFilter$1[_0x437a1f(0x49d,0x492)];function _0x437a1f(_0x1596e7,_0x2ee699){return _0x1ed6da(_0x2ee699,_0x1596e7-0x4ed);}function _0x1b5995(_0x9b8c03,_0x1d62bb){return _0x1ed6da(_0x9b8c03,_0x1d62bb-0x311);}_0x3cbdd0['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];const _0x5ccfa0={'context':this[_0x1b5995(0x1c0,0x247)],'width':this[_0x1b5995(0x23d,0x28c)][_0x437a1f(0x41a,0x3c9)],'height':this['options'][_0x1b5995(0x22c,0x23e)],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x1b5995(0x3bc,0x32f)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this['options']['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x3cbdd0)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x5ccfa0),'currentParticlesPosition':new Texture$1(_0x5ccfa0),'nextParticlesPosition':new Texture$1(_0x5ccfa0),'postProcessingPosition':new Texture$1(_0x5ccfa0),'particlesSpeed':new Texture$1(_0x5ccfa0)};}['destroyParticlesTextures'](){function _0x14ac7e(_0xf9bd22,_0x3f1394){return _0x5dd9dc(_0x3f1394,_0xf9bd22- -0x25a);}Object[_0x14ac7e(0x37b,0x3e5)](this['particlesTextures'])['forEach'](_0x145aed=>_0x145aed['destroy']());}[_0x1ed6da(0x6d,-0x2)](){function _0x3acf6f(_0x2264c4,_0x41b044){return _0x1ed6da(_0x2264c4,_0x41b044-0x2b2);}function _0x5d48ea(_0x417534,_0x504c8b){return _0x1ed6da(_0x504c8b,_0x417534-0x7b);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x5d48ea(0x5f,0x3f),'uniformMap':{'U':()=>this[_0x3acf6f(0x276,0x2b9)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u']['min'],this['windData']['u'][_0x3acf6f(0x2c3,0x2d2)]),'vRange':()=>new Cartesian2$1(this['windData']['v']['min'],this[_0x5d48ea(-0x2,0x42)]['v']['max']),'speedRange':()=>new Cartesian2$1(this[_0x5d48ea(-0x2,0x7)][_0x3acf6f(0x20e,0x239)]['min'],this['windData'][_0x5d48ea(0x2,0x9)]['max']),'currentParticlesPosition':()=>this[_0x5d48ea(0x87,0x80)][_0x3acf6f(0x213,0x25c)],'speedScaleFactor':()=>{function _0x1e15c2(_0x5d5b10,_0x3588de){return _0x3acf6f(_0x5d5b10,_0x3588de-0x15e);}function _0x173257(_0x3652c1,_0xd2d636){return _0x5d48ea(_0x3652c1-0x361,_0xd2d636);}return(this[_0x173257(0x2ff,0x2b3)][_0x1e15c2(0x36d,0x389)]+0x32)*this[_0x173257(0x357,0x366)]['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData']['width'],this['windData']['height']),'minimum':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds']['south']),'maximum':()=>new Cartesian2$1(this[_0x3acf6f(0x1c6,0x235)][_0x5d48ea(-0x19,0x42)][_0x3acf6f(0x24e,0x257)],this[_0x5d48ea(-0x2,0x2c)]['bounds']['north'])},'fragmentShaderSource':ShaderManager[_0x5d48ea(0x7b,0x83)](),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':()=>{const _0x4926c9=this[_0x34c8ab(-0x16a,-0x1b7)]['previousParticlesPosition'];this['particlesTextures']['previousParticlesPosition']=this['particlesTextures'][_0x34c8ab(-0x1cc,-0x1e3)],this[_0x227ad6(-0x166,-0x1ce)][_0x34c8ab(-0x1cc,-0x18c)]=this['particlesTextures']['postProcessingPosition'];function _0x227ad6(_0x5722c7,_0x4e1f1a){return _0x3acf6f(_0x4e1f1a,_0x5722c7- -0x424);}this['particlesTextures'][_0x227ad6(-0x13c,-0x146)]=_0x4926c9;function _0x34c8ab(_0x5879ca,_0x5af22d){return _0x5d48ea(_0x5879ca- -0x1f1,_0x5af22d);}this['primitives']['calculateSpeed']['commandToExecute']&&(this['primitives']['calculateSpeed']['commandToExecute']['outputTexture']=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0x3acf6f(0x261,0x2be)]['currentParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed']},'fragmentShaderSource':ShaderManager[_0x3acf6f(0x2ad,0x28e)](),'outputTexture':this[_0x5d48ea(0x87,0x88)]['nextParticlesPosition'],'preExecute':()=>{function _0x461f8b(_0x5362cc,_0x53322c){return _0x3acf6f(_0x5362cc,_0x53322c- -0x3a6);}function _0x224af8(_0x4f2814,_0x2c4734){return _0x3acf6f(_0x2c4734,_0x4f2814-0xf3);}this['primitives']['updatePosition'][_0x461f8b(-0x151,-0xc8)]&&(this[_0x224af8(0x3dc,0x393)][_0x461f8b(-0x158,-0x1b5)]['commandToExecute']['outputTexture']=this[_0x461f8b(-0xb7,-0xe8)]['nextParticlesPosition']);},'isDynamic':()=>this['options']['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x3acf6f(0x315,0x296),'uniformMap':{'nextParticlesPosition':()=>this[_0x5d48ea(0x87,0x98)][_0x5d48ea(0x14,-0x21)],'particlesSpeed':()=>this[_0x5d48ea(0x87,0x1c)][_0x3acf6f(0x1fc,0x279)],'lonRange':()=>this['viewerParameters'][_0x3acf6f(0x259,0x2ca)],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds']['west'],this[_0x5d48ea(-0x2,-0x56)][_0x3acf6f(0x286,0x21e)]['east']),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds']['south'],this[_0x3acf6f(0x285,0x235)][_0x3acf6f(0x1c9,0x21e)]['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options'][_0x3acf6f(0x28b,0x2df)],'dropRateBump':()=>this['options'][_0x3acf6f(0x2d3,0x2bd)],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures'][_0x3acf6f(0x2b7,0x2e8)],'preExecute':()=>{function _0x1b61d3(_0x450d2a,_0x1a8c6b){return _0x5d48ea(_0x1a8c6b- -0x215,_0x450d2a);}function _0x5ccfb5(_0x3e7f64,_0x49b0d9){return _0x3acf6f(_0x3e7f64,_0x49b0d9- -0x367);}this[_0x1b61d3(-0x162,-0x163)][_0x1b61d3(-0xee,-0x164)][_0x1b61d3(-0x1f7,-0x16e)]&&(this['primitives']['postProcessingPosition'][_0x1b61d3(-0x120,-0x16e)]['outputTexture']=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this[_0x5d48ea(-0xa,0x62)][_0x5d48ea(0x98,0x97)]})};}['reCreateWindTextures'](){function _0x368261(_0x2e286d,_0x422aeb){return _0x1ed6da(_0x422aeb,_0x2e286d-0x406);}this[_0x5a0ea0(0x456,0x4c8)]['U']['destroy'](),this['windTextures']['V'][_0x5a0ea0(0x3e9,0x399)]();function _0x5a0ea0(_0xa9f183,_0x2c2e8d){return _0x1ed6da(_0x2c2e8d,_0xa9f183-0x44f);}this[_0x5a0ea0(0x446,0x3b6)]();}[_0x5dd9dc(0x581,0x5ea)](_0x15da15){this['windData']=_0x15da15;function _0x23999a(_0x4df908,_0x2581fb){return _0x5dd9dc(_0x2581fb,_0x4df908- -0x2c3);}this[_0x23999a(0x2b2,0x250)]();}['updateOptions'](_0x54af90){const _0x55dcea=_0x54af90[_0x2233c8(0x140,0x1bd)]!==undefined&&_0x54af90['flipY']!==this[_0x2398f5(-0x10d,-0x117)]['flipY'];function _0x2233c8(_0x3c2867,_0x42e068){return _0x1ed6da(_0x42e068,_0x3c2867-0x1e5);}function _0x2398f5(_0x2c6cd9,_0x349d52){return _0x1ed6da(_0x2c6cd9,_0x349d52- -0x92);}this['options']=deepMerge(_0x54af90,this['options']),_0x55dcea&&this['reCreateWindTextures']();}[_0x5dd9dc(0x4dd,0x53a)](_0x32dd3b){const {array:_0x435f14}=_0x32dd3b;let {min:_0x2c61db,max:_0x168a91}=_0x32dd3b;const _0x5ceaf9=new Float32Array(_0x435f14['length']);_0x2c61db===undefined&&(console['warn'](_0x134f24(0x28,0xab)),_0x2c61db=Math['min'](..._0x435f14));_0x168a91===undefined&&(console[_0x3a6594(0x42a,0x39a)](_0x3a6594(0x4aa,0x4ef)),_0x168a91=Math['max'](..._0x435f14));const _0x1f4e54=Math['max'](Math[_0x134f24(-0x3c,0x15)](_0x2c61db),Math['abs'](_0x168a91));function _0x134f24(_0x46e2e8,_0x48707a){return _0x1ed6da(_0x46e2e8,_0x48707a-0xa3);}for(let _0x2c1eb7=0x0;_0x2c1eb7<_0x435f14['length'];_0x2c1eb7++){const _0x2203d3=_0x435f14[_0x2c1eb7]/_0x1f4e54;_0x5ceaf9[_0x2c1eb7]=_0x2203d3;}function _0x3a6594(_0x2b6209,_0x53ef0b){return _0x5dd9dc(_0x53ef0b,_0x2b6209- -0x10d);}return _0x5ceaf9;}['destroy'](){function _0x3f7119(_0x527aca,_0x28da70){return _0x5dd9dc(_0x527aca,_0x28da70-0x4);}Object['values'](this['windTextures'])['forEach'](_0x30aa54=>_0x30aa54['destroy']());function _0x3b80a0(_0x4ede12,_0x537212){return _0x5dd9dc(_0x537212,_0x4ede12- -0x78f);}Object[_0x3b80a0(-0x1ba,-0x161)](this[_0x3b80a0(-0x1c9,-0x14d)])[_0x3f7119(0x5f4,0x587)](_0x185c57=>_0x185c57['destroy']()),Object[_0x3f7119(0x56e,0x5d9)](this[_0x3b80a0(-0x19e,-0x1ab)])[_0x3b80a0(-0x20c,-0x190)](_0xc1f044=>_0xc1f044['destroy']()),this[_0x3b80a0(-0x203,-0x26b)]['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x169009,_0x3f1cf5,_0x517be2,_0x17dfbb){this[_0x47c983(0x52,0x4a)]=_0x169009;function _0x47c983(_0x493e53,_0x156d30){return _0x1ed6da(_0x156d30,_0x493e53-0x11c);}this['options']=_0x3f1cf5,this[_0x2a1a4b(0x3e3,0x473)]=_0x517be2,this['computing']=_0x17dfbb;function _0x2a1a4b(_0x3b292e,_0x39227c){return _0x1ed6da(_0x3b292e,_0x39227c-0x550);}(typeof this['options'][_0x47c983(0x49,0x8d)]!=='number'||this[_0x47c983(0x97,0x122)]['particlesTextureSize']<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this[_0x47c983(0x97,0x5b)]['particlesTextureSize']=0x100),this[_0x47c983(0x96,0x10e)]=this['createColorTableTexture'](),this['textures']=this['createRenderingTextures'](),this['framebuffers']=this[_0x2a1a4b(0x569,0x54f)](),this['primitives']=this['createPrimitives']();}[_0x5dd9dc(0x5fc,0x595)](){const _0x3db859={};_0x3db859[_0x3a3b98(-0x1cd,-0x1ca)]=this['context'];function _0x1156b5(_0x3c0a9c,_0x50b29e){return _0x1ed6da(_0x3c0a9c,_0x50b29e- -0x64);}_0x3db859['width']=this[_0x3a3b98(-0x170,-0x1ca)]['drawingBufferWidth'],_0x3db859['height']=this['context']['drawingBufferHeight'],_0x3db859[_0x1156b5(-0x14d,-0x13a)]=PixelFormat['RGBA'],_0x3db859['pixelDatatype']=PixelDatatype[_0x1156b5(-0x3e,-0x4d)];const _0x3cc347=_0x3db859,_0x34524a={};_0x34524a[_0x1156b5(-0x13f,-0x12e)]=this['context'],_0x34524a[_0x1156b5(-0x17,-0x8d)]=this[_0x1156b5(-0x176,-0x12e)]['drawingBufferWidth'],_0x34524a['height']=this[_0x3a3b98(-0x1b9,-0x1ca)]['drawingBufferHeight'],_0x34524a[_0x3a3b98(-0x246,-0x1d6)]=PixelFormat[_0x1156b5(-0xd3,-0xad)];function _0x3a3b98(_0x55a3dc,_0xdcbffc){return _0x1ed6da(_0x55a3dc,_0xdcbffc- -0x100);}_0x34524a[_0x3a3b98(-0x97,-0xf0)]=PixelDatatype['UNSIGNED_INT'];const _0xd183df=_0x34524a;return{'segmentsColor':new Texture(_0x3cc347),'segmentsDepth':new Texture(_0xd183df)};}[_0x5dd9dc(0x643,0x5b9)](){const _0x4ffc50={};_0x4ffc50[_0x36a991(0x514,0x4f7)]=this[_0x47fb6f(0x226,0x1de)];function _0x47fb6f(_0x2b1f7c,_0x351efd){return _0x1ed6da(_0x351efd,_0x2b1f7c-0x2f0);}_0x4ffc50['colorTextures']=[this['textures'][_0x36a991(0x53c,0x502)]],_0x4ffc50[_0x36a991(0x4ad,0x513)]=this[_0x36a991(0x4be,0x4d6)]['segmentsDepth'];function _0x36a991(_0x4ff153,_0x524955){return _0x1ed6da(_0x4ff153,_0x524955-0x5c1);}return{'segments':new Framebuffer(_0x4ffc50)};}['destoryRenderingFramebuffers'](){function _0x23f6ac(_0x5723fa,_0x6176e2){return _0x5dd9dc(_0x5723fa,_0x6176e2- -0x224);}Object[_0x23f6ac(0x328,0x3b1)](this['framebuffers'])['forEach'](_0x16da3c=>{_0x16da3c['destroy']();});}[_0x5dd9dc(0x4db,0x50b)](){const _0x464ad1=new Float32Array(this['options'][_0x5e3170(0x25f,0x222)]['flatMap'](_0x38f44a=>{const _0x211089=Color$1['fromCssColorString'](_0x38f44a);return[_0x211089['red'],_0x211089['green'],_0x211089['blue'],_0x211089['alpha']];})),_0x5a157c={};function _0x5e3170(_0x136eae,_0x285ed6){return _0x5dd9dc(_0x136eae,_0x285ed6- -0x2f4);}_0x5a157c['minificationFilter']=TextureMinificationFilter[_0x4fdbe2(0x1bc,0x18a)],_0x5a157c['magnificationFilter']=TextureMagnificationFilter['LINEAR'],_0x5a157c[_0x4fdbe2(0x16c,0xf6)]=TextureWrap[_0x5e3170(0x242,0x2ba)];function _0x4fdbe2(_0x2fabe1,_0x1db18d){return _0x5dd9dc(_0x1db18d,_0x2fabe1- -0x366);}return _0x5a157c['wrapT']=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this[_0x4fdbe2(0x18a,0x121)],'width':this[_0x5e3170(0x267,0x241)]['colors']['length'],'height':0x1,'pixelFormat':PixelFormat[_0x5e3170(0x275,0x223)],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x5a157c),'source':{'width':this['options']['colors'][_0x5e3170(0x28f,0x2b1)],'height':0x1,'arrayBufferView':_0x464ad1}});}['createSegmentsGeometry'](){const _0x289b34=0x4,_0x39a615=this['options'][_0x1972c4(-0x1e1,-0x192)];let _0x26763b=[];for(let _0x3f8e3f=0x0;_0x3f8e3f<_0x39a615;_0x3f8e3f++){for(let _0x34bf40=0x0;_0x34bf40<_0x39a615;_0x34bf40++){for(let _0x454505=0x0;_0x454505<_0x289b34;_0x454505++){_0x26763b[_0x1972c4(-0x172,-0x152)](_0x3f8e3f/_0x39a615),_0x26763b['push'](_0x34bf40/_0x39a615);}}}_0x26763b=new Float32Array(_0x26763b);const _0x5596e6=this['options'][_0x5770ec(0x1e1,0x236)]**0x2;let _0x2ee747=[];function _0x5770ec(_0x42ba7d,_0x58d86d){return _0x1ed6da(_0x58d86d,_0x42ba7d-0x2b4);}for(let _0xd81267=0x0;_0xd81267<_0x5596e6;_0xd81267++){_0x2ee747['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x2ee747=new Float32Array(_0x2ee747);let _0x354af0=[];for(let _0x4ed5fe=0x0,_0x2eb2d1=0x0;_0x4ed5fe<_0x5596e6;_0x4ed5fe++){_0x354af0[_0x5770ec(0x221,0x276)](_0x2eb2d1+0x0,_0x2eb2d1+0x1,_0x2eb2d1+0x2,_0x2eb2d1+0x2,_0x2eb2d1+0x1,_0x2eb2d1+0x3),_0x2eb2d1+=_0x289b34;}_0x354af0=new Uint32Array(_0x354af0);const _0x5ac0d5={};_0x5ac0d5['componentDatatype']=ComponentDatatype['FLOAT'],_0x5ac0d5[_0x5770ec(0x23e,0x290)]=0x2,_0x5ac0d5[_0x1972c4(-0x115,-0xa4)]=_0x26763b;const _0x81c77a={};_0x81c77a['componentDatatype']=ComponentDatatype[_0x1972c4(-0xb6,-0xa1)],_0x81c77a[_0x5770ec(0x23e,0x25a)]=0x3,_0x81c77a['values']=_0x2ee747;const _0x5487be=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x5ac0d5),'normal':new GeometryAttribute(_0x81c77a)}),'indices':_0x354af0});function _0x1972c4(_0x593aea,_0x29e1ae){return _0x1ed6da(_0x593aea,_0x29e1ae- -0xbf);}return _0x5487be;}['createRawRenderState'](_0x3b422d){const _0x4aea3b={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x3b422d};return Appearance['getDefaultRenderState'](!![],![],_0x4aea3b);}['createPrimitives'](){const _0x1e3a14={};function _0x18b755(_0x5cdf09,_0x5b0387){return _0x5dd9dc(_0x5cdf09,_0x5b0387- -0x31e);}_0x1e3a14['st']=0x0,_0x1e3a14[_0x3dea31(0x469,0x43a)]=0x1;const _0x2ad2a0={};_0x2ad2a0['enabled']=!![];const _0x2218a1={};function _0x3dea31(_0x3f30f1,_0x375591){return _0x1ed6da(_0x375591,_0x3f30f1-0x526);}_0x2218a1[_0x18b755(0x1d8,0x203)]=!![],_0x2218a1[_0x18b755(0x2ac,0x2b2)]=WebGLRenderingContext['FUNC_ADD'],_0x2218a1['blendFuncSource']=WebGLRenderingContext['SRC_ALPHA'],_0x2218a1[_0x18b755(0x26b,0x1e7)]=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x50146f={};_0x50146f['viewport']=undefined,_0x50146f[_0x18b755(0x25a,0x295)]=_0x2ad2a0,_0x50146f['depthMask']=!![],_0x50146f[_0x3dea31(0x4cd,0x525)]=_0x2218a1;const _0x54796e=new CustomPrimitive({'commandType':_0x18b755(0x2d1,0x2cf),'attributeLocations':_0x1e3a14,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x3dea31(0x4a7,0x523)],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this['computing']['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures'][_0x18b755(0x288,0x2d2)],'particlesSpeed':()=>this[_0x3dea31(0x4ce,0x55c)][_0x3dea31(0x532,0x4b2)]['particlesSpeed'],'frameRateAdjustment':()=>this[_0x18b755(0x2d2,0x244)]['frameRateAdjustment'],'colorTable':()=>this[_0x18b755(0x225,0x216)],'domain':()=>{function _0x46bd02(_0x1bb1d3,_0x56c617){return _0x3dea31(_0x1bb1d3- -0x234,_0x56c617);}function _0x1bed26(_0x1d4745,_0x4054cc){return _0x3dea31(_0x4054cc- -0x13e,_0x1d4745);}var _0x497873,_0x30d50b;const _0x387756=new Cartesian2(((_0x497873=this[_0x46bd02(0x26d,0x28d)][_0x46bd02(0x2db,0x2b3)])===null||_0x497873===void 0x0?void 0x0:_0x497873['min'])??this[_0x1bed26(0x361,0x390)]['windData']['speed'][_0x46bd02(0x319,0x2a8)],((_0x30d50b=this['options']['domain'])===null||_0x30d50b===void 0x0?void 0x0:_0x30d50b[_0x46bd02(0x312,0x319)])??this['computing']['windData'][_0x1bed26(0x345,0x36f)]['max']);return _0x387756;},'displayRange':()=>{function _0x194d02(_0x24f3eb,_0x7f2ec8){return _0x3dea31(_0x24f3eb- -0x14f,_0x7f2ec8);}function _0x18beee(_0x2e3fb5,_0x1c0fbb){return _0x3dea31(_0x2e3fb5- -0x655,_0x1c0fbb);}var _0x1f8890,_0x4caf6c;const _0x3c4623=new Cartesian2(((_0x1f8890=this['options']['displayRange'])===null||_0x1f8890===void 0x0?void 0x0:_0x1f8890[_0x194d02(0x3fe,0x425)])??this['computing']['windData'][_0x194d02(0x35e,0x3b2)]['min'],((_0x4caf6c=this[_0x18beee(-0x1b4,-0x221)][_0x194d02(0x3b6,0x33b)])===null||_0x4caf6c===void 0x0?void 0x0:_0x4caf6c[_0x18beee(-0x10f,-0xbe)])??this['computing'][_0x18beee(-0x1ac,-0x15d)]['speed']['max']);return _0x3c4623;},'particleHeight':()=>this[_0x18b755(0x2a9,0x217)]['fixedHeight']||0x0,'aspect':()=>this[_0x3dea31(0x45c,0x3ff)]['drawingBufferWidth']/this['context'][_0x18b755(0x1cc,0x20d)],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x2d0a43={};function _0x2c216e(_0x4ada6b,_0x32fcba){return _0x3dea31(_0x4ada6b- -0x389,_0x32fcba);}_0x2d0a43['min']=0x1,_0x2d0a43['max']=0x2;const _0x3b76c1=this['options'][_0x2c216e(0x119,0x8a)]||_0x2d0a43;return new Cartesian2(_0x3b76c1['min'],_0x3b76c1['max']);},'lineLength':()=>{function _0x2690ba(_0x3acc38,_0x24e1e1){return _0x18b755(_0x24e1e1,_0x3acc38- -0x3e9);}const _0x4b7aec={};_0x4b7aec['min']=0x14,_0x4b7aec['max']=0x64;function _0x363170(_0x5e1b36,_0x443f8b){return _0x3dea31(_0x443f8b- -0x5b,_0x5e1b36);}const _0x2b03d7=this['options']['lineLength']||_0x4b7aec;return new Cartesian2(_0x2b03d7[_0x363170(0x48e,0x4f2)],_0x2b03d7[_0x2690ba(-0x12d,-0x9e)]);},'is3D':()=>this['viewerParameters'][_0x3dea31(0x459,0x425)]===SceneMode[_0x3dea31(0x4cc,0x50a)],'segmentsDepthTexture':()=>this['textures'][_0x18b755(0x19a,0x1fc)]},'vertexShaderSource':ShaderManager[_0x18b755(0x29f,0x248)](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x50146f)}),_0x2f40e8={};return _0x2f40e8[_0x3dea31(0x51b,0x568)]=_0x54796e,_0x2f40e8;}['onParticlesTextureSizeChange'](){function _0x260fa2(_0x3ce2ee,_0x216d09){return _0x5dd9dc(_0x3ce2ee,_0x216d09- -0x75);}const _0x42a3cc=this[_0x10f5d1(0x29f,0x314)]();this[_0x260fa2(0x546,0x57c)]['segments']['geometry']=_0x42a3cc;function _0x10f5d1(_0x4106ad,_0x351b9b){return _0x1ed6da(_0x351b9b,_0x4106ad-0x29b);}const _0x2e1c35={};_0x2e1c35['context']=this[_0x260fa2(0x460,0x47b)],_0x2e1c35['geometry']=_0x42a3cc,_0x2e1c35[_0x260fa2(0x52a,0x519)]=this['primitives']['segments'][_0x260fa2(0x55c,0x519)],_0x2e1c35['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x5b550b=VertexArray['fromGeometry'](_0x2e1c35);this[_0x260fa2(0x5c6,0x57c)]['segments'][_0x10f5d1(0x2c7,0x2ad)]&&(this['primitives'][_0x10f5d1(0x290,0x233)]['commandToExecute'][_0x10f5d1(0x1ff,0x1bf)]=_0x5b550b);}[_0x5dd9dc(0x502,0x508)](){this['colorTable']['destroy']();function _0x2bd517(_0x2da5dd,_0x120575){return _0x1ed6da(_0x120575,_0x2da5dd-0xd4);}function _0x42b822(_0x55c4e0,_0x315979){return _0x1ed6da(_0x315979,_0x55c4e0- -0xb2);}this[_0x2bd517(0x4e,-0x3d)]=this[_0x2bd517(0x25,-0x5d)]();}[_0x1ed6da(-0x157,-0xd8)](_0x275850){function _0x4682d0(_0x5626bf,_0x58b823){return _0x5dd9dc(_0x58b823,_0x5626bf- -0x2a7);}const _0x37e6c8=_0x275850[_0x4682d0(0x26f,0x249)]&&JSON['stringify'](_0x275850['colors'])!==JSON[_0x4682d0(0x2b6,0x279)](this['options']['colors']);this['options']=deepMerge(_0x275850,this['options']);function _0x490c5a(_0x2fedb5,_0x3e0d8c){return _0x1ed6da(_0x3e0d8c,_0x2fedb5-0x471);}_0x37e6c8&&this['onColorTableChange']();}['destroy'](){function _0x534fed(_0x5cdd6e,_0x258159){return _0x1ed6da(_0x5cdd6e,_0x258159-0x416);}Object['values'](this['framebuffers'])['forEach'](_0x196888=>{_0x196888['destroy']();}),Object['values'](this['primitives'])[_0x534fed(0x361,0x3df)](_0x4c83c5=>{function _0x3cfc4b(_0x1bb178,_0xb6ad23){return _0x534fed(_0x1bb178,_0xb6ad23- -0x134);}_0x4c83c5[_0x3cfc4b(0x22f,0x27c)]();}),this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x1ed6da(-0xe6,-0xe0)];class WindParticleSystem{constructor(_0x5075c2,_0x38275d,_0x702bcb,_0x1a6465,_0x3d5819){this['context']=_0x5075c2,this[_0xddae11(0x231,0x1b5)]=_0x702bcb,this['viewerParameters']=_0x1a6465,this['computing']=new WindParticlesComputing(_0x5075c2,_0x38275d,_0x702bcb,_0x1a6465,_0x3d5819),this['rendering']=new WindParticlesRendering(_0x5075c2,_0x702bcb,_0x1a6465,this['computing']);function _0xddae11(_0x1444ff,_0x17e1d6){return _0x5dd9dc(_0x1444ff,_0x17e1d6- -0x380);}this['clearFramebuffers']();}['getPrimitives'](){function _0x942ef(_0x33fbf0,_0xec6415){return _0x5dd9dc(_0x33fbf0,_0xec6415- -0x2cf);}function _0x3bbedf(_0x3fe8e9,_0x497ba2){return _0x5dd9dc(_0x497ba2,_0x3fe8e9- -0x38b);}const _0x5ca76c=[this['computing'][_0x942ef(0x2ba,0x322)]['calculateSpeed'],this['computing'][_0x3bbedf(0x266,0x2bc)][_0x942ef(0x1b9,0x22a)],this[_0x3bbedf(0x1d7,0x221)]['primitives']['postProcessingPosition'],this['rendering']['primitives'][_0x942ef(0x32f,0x2e0)]];return _0x5ca76c;}[_0x5dd9dc(0x53b,0x59f)](){function _0x4984e3(_0x159a01,_0xc07199){return _0x5dd9dc(_0x159a01,_0xc07199- -0x4c1);}const _0x22bdb7=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});Object['keys'](this['rendering']['framebuffers'])[_0x4984e3(0x139,0xc2)](_0x39cf18=>{_0x22bdb7['framebuffer']=this['rendering']['framebuffers'][_0x39cf18],_0x22bdb7['execute'](this['context']);});}[_0x1ed6da(-0x116,-0xa1)](_0x5c279e){let _0x4e0a6c=![];_0x5c279e[_0xa3885(-0x83,-0x79)]&&this['options'][_0x217175(0x45,0xd0)]!==_0x5c279e[_0x217175(0x151,0xd0)]&&(_0x4e0a6c=!![]);function _0x217175(_0x126922,_0x1e471d){return _0x5dd9dc(_0x126922,_0x1e471d- -0x417);}function _0xa3885(_0x189d7a,_0x1386cf){return _0x1ed6da(_0x189d7a,_0x1386cf-0x5a);}const _0x462619=deepMerge(_0x5c279e,this[_0xa3885(-0x72,-0x2b)]);if(_0x462619['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x462619,this['rendering']['updateOptions'](_0x5c279e),this['computing']['updateOptions'](_0x5c279e),_0x4e0a6c&&(this['computing'][_0x217175(0x1c6,0x1cb)](),this[_0xa3885(0x11,0x2)]['createParticlesTextures'](),this['rendering'][_0xa3885(-0x7d,-0x61)]());}['applyViewerParameters'](_0x4e4a42){this['viewerParameters']=_0x4e4a42,this['computing']['viewerParameters']=_0x4e4a42,this['rendering']['viewerParameters']=_0x4e4a42;}[_0x1ed6da(-0xaa,-0x66)](){this[_0x456ae7(0x8c,0x75)]['destroy']();function _0x456ae7(_0x24de10,_0x10f900){return _0x5dd9dc(_0x10f900,_0x24de10- -0x4d6);}this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x1ed6da(-0x3b,-0x2b)],_0x52a9eb={};function _0x3ea8(_0x3f8b40,_0x55c739){const _0x382249=_0x3822();return _0x3ea8=function(_0x3ea874,_0x4c0363){_0x3ea874=_0x3ea874-0x10b;let _0x14deb1=_0x382249[_0x3ea874];return _0x14deb1;},_0x3ea8(_0x3f8b40,_0x55c739);}_0x52a9eb['min']=0x1,_0x52a9eb['max']=0x2;const _0x228e5f={};_0x228e5f[_0x1ed6da(0x26,0x27)]=0x14,_0x228e5f['max']=0x64;const _0x184c1c={};_0x184c1c[_0x5dd9dc(0x49a,0x4e7)]=0x64,_0x184c1c['fixedHeight']=0x0,_0x184c1c[_0x5dd9dc(0x545,0x536)]=_0x52a9eb,_0x184c1c[_0x1ed6da(-0x92,-0x69)]=_0x228e5f,_0x184c1c['speedFactor']=0x1,_0x184c1c['dropRate']=0.003,_0x184c1c['dropRateBump']=0.001,_0x184c1c[_0x5dd9dc(0x4f7,0x516)]=[_0x1ed6da(-0x97,-0x5e)],_0x184c1c['flipY']=![],_0x184c1c[_0x5dd9dc(0x5b4,0x5d7)]=!![];const DEF_OPTIONS=_0x184c1c;class WindLayer extends BaseLayer$1{constructor(_0x2ff011={}){_0x2ff011={...DEF_OPTIONS,..._0x2ff011},super(_0x2ff011);function _0x331727(_0xcfb094,_0x5588ff){return _0x1ed6da(_0x5588ff,_0xcfb094-0x438);}this[_0x331727(0x388,0x3e2)](_0x2ff011,_0x2ff011);}get[_0x1ed6da(-0x6,-0x13)](){return this['primitives'];}get['data'](){function _0x48c13d(_0x253bf1,_0x3393e3){return _0x5dd9dc(_0x3393e3,_0x253bf1- -0x367);}function _0x282a38(_0x2a491c,_0x4c8c66){return _0x1ed6da(_0x4c8c66,_0x2a491c- -0x105);}return this[_0x282a38(-0x18a,-0x15e)][_0x48c13d(0x1a8,0x13b)];}set[_0x5dd9dc(0x57a,0x50f)](_0x5903f7){function _0x22e96a(_0x202734,_0x2f67ab){return _0x1ed6da(_0x2f67ab,_0x202734- -0xaa);}function _0x1af43b(_0x524a5f,_0x3a6eba){return _0x5dd9dc(_0x3a6eba,_0x524a5f- -0x7a9);}this[_0x1af43b(-0x274,-0x21e)][_0x22e96a(-0x155,-0xe9)]=_0x5903f7,this['setData'](_0x5903f7);}get[_0x5dd9dc(0x567,0x516)](){return this['options']['colors'];}set[_0x5dd9dc(0x4ee,0x516)](_0x4d6962){this['options']['colors']=_0x4d6962;const _0x20dc57={};function _0x1600d3(_0x2b9e96,_0x346e93){return _0x1ed6da(_0x346e93,_0x2b9e96-0x233);}_0x20dc57['colors']=_0x4d6962,this[_0x1600d3(0x183,0x104)](this['options'],_0x20dc57);}['_showHook'](_0x4a4dd9){_0x4a4dd9?this['_addedHook']():this['_removedHook']();}[_0x1ed6da(-0x32,-0x22)](){}['_addedHook'](){this['scene']=this['_map']['scene'],this['camera']=this['_map']['camera'];this[_0x4a2a04(-0x152,-0x1a5)]['data']&&this[_0x4a2a04(-0x1ea,-0x18c)](this['options'][_0x4a2a04(-0x1e0,-0x1cb)]);if(!this['windData']||!this[_0x4a2a04(-0x190,-0x1ba)])return;this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1[(_0x4a2a04(-0x142,-0x113))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this['updateViewerParameters']();function _0x3d0f98(_0x4e18e8,_0x197ec3){return _0x5dd9dc(_0x197ec3,_0x4e18e8- -0x355);}this['particleSystem']=new WindParticleSystem(this[_0x4a2a04(-0x212,-0x192)]['context'],this['windData'],this[_0x4a2a04(-0x231,-0x1a5)],this[_0x3d0f98(0x188,0x13e)],this[_0x4a2a04(-0x201,-0x192)]),this[_0x3d0f98(0x29c,0x20c)]=this['particleSystem'][_0x4a2a04(-0x1b0,-0x1fe)](),this['primitives']['forEach'](_0x53bc5a=>{function _0x15a945(_0x1609c1,_0x2888ce){return _0x4a2a04(_0x2888ce,_0x1609c1-0xdd);}this['scene'][_0x15a945(-0xc,-0x3d)]['add'](_0x53bc5a);}),this[_0x4a2a04(-0x1f9,-0x16a)]['percentageChanged']=0.01,this['camera']['changed']['addEventListener'](this[_0x3d0f98(0x1a5,0x1cd)]['bind'](this)),this['scene']['morphComplete']['addEventListener'](this[_0x3d0f98(0x1a5,0x136)][_0x3d0f98(0x261,0x216)](this));function _0x4a2a04(_0x54a563,_0xf2d8f){return _0x1ed6da(_0x54a563,_0xf2d8f- -0x120);}window['addEventListener']('resize',this[_0x3d0f98(0x1a5,0x148)]['bind'](this));}['_removedHook'](){function _0x5948b5(_0x5b60a3,_0x318371){return _0x1ed6da(_0x318371,_0x5b60a3- -0x10f);}this['camera']['changed']['removeEventListener'](this['updateViewerParameters']['bind'](this));function _0x453266(_0x1b5d10,_0x59be66){return _0x5dd9dc(_0x59be66,_0x1b5d10- -0x8e);}this['scene']['morphComplete']['removeEventListener'](this[_0x5948b5(-0x1cf,-0x22d)]['bind'](this)),window[_0x453266(0x48d,0x515)](_0x453266(0x4f2,0x559),this['updateViewerParameters'][_0x453266(0x528,0x4b9)](this)),this[_0x5948b5(-0xd8,-0x65)]&&(this['primitives']['forEach'](_0xb7de8=>{this['scene']['primitives']['remove'](_0xb7de8);}),delete this['primitives']),this[_0x453266(0x53a,0x53c)]&&(this[_0x5948b5(-0x101,-0xed)][_0x453266(0x4c6,0x4e2)](),delete this['particleSystem']);}['setData'](_0x3c1ba2,_0x2085de){function _0x13cfad(_0x548f61,_0x2a8259){return _0x5dd9dc(_0x2a8259,_0x548f61- -0x218);}this['windData']=this['processWindData'](_0x3c1ba2);function _0x22cdfd(_0x18e736,_0x2ad6db){return _0x5dd9dc(_0x2ad6db,_0x18e736- -0x57c);}if(_0x2085de){this['_removedHook'](),this['_addedHook']();return;}this['particleSystem']?(this[_0x22cdfd(0x4c,0x3a)][_0x13cfad(0x34a,0x373)]['updateWindData'](this[_0x22cdfd(-0x3f,-0x59)]),this['scene']['requestRender']()):this['_addedHook']();}['_setOptionsHook'](_0x362db7,_0x5d2c39){function _0x460fbf(_0x1a0780,_0x2e2d31){return _0x5dd9dc(_0x2e2d31,_0x1a0780- -0x7e);}function _0x47e620(_0x11099c,_0x3a2644){return _0x5dd9dc(_0x3a2644,_0x11099c- -0x371);}this['particleSystem']&&(this['particleSystem'][_0x47e620(0x1a8,0x16e)](_0x5d2c39),this[_0x460fbf(0x4ca,0x534)][_0x47e620(0x191,0x1c8)]());}['processWindData'](_0x49d0db){var _0xcb6ab,_0x5ef3d9;const _0x414282={..._0x49d0db},_0x25baf0=_0x414282;function _0x3e3110(_0x58c5f1,_0x5844d6){return _0x1ed6da(_0x5844d6,_0x58c5f1-0x53f);}!_0x25baf0['height']&&_0x25baf0['rows']&&(_0x25baf0[_0x83ec70(-0x22c,-0x258)]=_0x25baf0[_0x3e3110(0x473,0x419)]);!_0x25baf0['width']&&_0x25baf0[_0x3e3110(0x522,0x4ed)]&&(_0x25baf0['width']=_0x25baf0['cols']);!_0x25baf0['bounds']&&(_0x25baf0[_0x83ec70(-0x201,-0x271)]={'west':_0x25baf0['xmin'],'south':_0x25baf0['ymin'],'east':_0x25baf0[_0x3e3110(0x499,0x48c)],'north':_0x25baf0['ymax']});if(!_0x25baf0['u']){const _0x2330d1={};_0x2330d1[_0x83ec70(-0x225,-0x2ad)]=_0x49d0db[_0x83ec70(-0x298,-0x220)],_0x2330d1['min']=_0x49d0db['umin'],_0x2330d1[_0x3e3110(0x55f,0x598)]=_0x49d0db['umax'],_0x25baf0['u']=_0x2330d1;}if(!_0x25baf0['v']){const _0x1719c9={};_0x1719c9['array']=_0x49d0db['vdata'],_0x1719c9[_0x3e3110(0x566,0x4de)]=_0x49d0db['vmin'],_0x1719c9[_0x83ec70(-0x1a0,-0x1bd)]=_0x49d0db['vmax'],_0x25baf0['v']=_0x1719c9;}function _0x83ec70(_0x14f33b,_0x43b614){return _0x5dd9dc(_0x14f33b,_0x43b614- -0x797);}if(((_0xcb6ab=_0x25baf0['speed'])===null||_0xcb6ab===void 0x0?void 0x0:_0xcb6ab[_0x83ec70(-0x1f6,-0x1b6)])===undefined||((_0x5ef3d9=_0x25baf0[_0x83ec70(-0x21b,-0x256)])===null||_0x5ef3d9===void 0x0?void 0x0:_0x5ef3d9[_0x83ec70(-0x167,-0x1bd)])===undefined||_0x25baf0['speed']['array']===undefined){const _0x2bdb6c={'array':new Float32Array(_0x25baf0['u']['array']['length']),'min':Number[_0x3e3110(0x46a,0x4bf)],'max':Number['MIN_VALUE']};for(let _0x51eb1e=0x0;_0x51eb1e<_0x25baf0['u'][_0x3e3110(0x46f,0x4b8)]['length'];_0x51eb1e++){_0x2bdb6c[_0x3e3110(0x46f,0x483)][_0x51eb1e]=Math['sqrt'](_0x25baf0['u']['array'][_0x51eb1e]*_0x25baf0['u']['array'][_0x51eb1e]+_0x25baf0['v'][_0x83ec70(-0x2f9,-0x2ad)][_0x51eb1e]*_0x25baf0['v']['array'][_0x51eb1e]),_0x2bdb6c['array'][_0x51eb1e]!==0x0&&(_0x2bdb6c['min']=Math['min'](_0x2bdb6c['min'],_0x2bdb6c['array'][_0x51eb1e]),_0x2bdb6c['max']=Math['max'](_0x2bdb6c['max'],_0x2bdb6c['array'][_0x51eb1e]));}_0x25baf0[_0x3e3110(0x4c6,0x491)]=_0x2bdb6c;}return _0x25baf0;}['updateViewerParameters'](){var _0x3e5cd3;const _0x320866=this['scene'];if(!_0x320866)return;const _0x52b395=_0x320866[_0x33ec66(0x31f,0x38a)],_0x508d8b={};_0x508d8b['x']=0x0,_0x508d8b['y']=0x0;const _0x28ca6={};_0x28ca6['x']=0x0,_0x28ca6['y']=_0x52b395[_0x33ec66(0x2cc,0x252)];const _0x19d02f={};function _0x33ec66(_0x17d381,_0x52f5fb){return _0x5dd9dc(_0x52f5fb,_0x17d381- -0x28c);}_0x19d02f['x']=_0x52b395['clientWidth'],_0x19d02f['y']=0x0;const _0x374941={};_0x374941['x']=_0x52b395[_0x5455c9(-0x18b,-0x157)],_0x374941['y']=_0x52b395['clientHeight'];const _0x32fa37=[_0x508d8b,_0x28ca6,_0x19d02f,_0x374941];let _0x59c946=0xb4,_0x1242f3=-0xb4,_0x30d52d=0x5a,_0x489f09=-0x5a,_0x43a634=![];for(const _0x28c9e4 of _0x32fa37){const _0x19256a=_0x320866['camera'][_0x5455c9(-0x155,-0x175)](new Cesium$1['Cartesian2'](_0x28c9e4['x'],_0x28c9e4['y']),_0x320866['globe']['ellipsoid']);if(!_0x19256a){_0x43a634=!![];break;}const _0x5edbd9=_0x320866['globe'][_0x33ec66(0x267,0x2b6)]['cartesianToCartographic'](_0x19256a),_0x3debe2=Cesium$1[_0x33ec66(0x2a4,0x2d7)]['toDegrees'](_0x5edbd9['longitude']),_0x1f224d=Cesium$1['Math']['toDegrees'](_0x5edbd9['latitude']);_0x59c946=Math[_0x33ec66(0x355,0x2f6)](_0x59c946,_0x3debe2),_0x1242f3=Math['max'](_0x1242f3,_0x3debe2),_0x30d52d=Math[_0x33ec66(0x355,0x340)](_0x30d52d,_0x1f224d),_0x489f09=Math['max'](_0x489f09,_0x1f224d);}if(!_0x43a634){const _0x32c30c=new Cesium$1[(_0x33ec66(0x33b,0x3c4))](Math[_0x5455c9(-0xe1,-0x10f)](this[_0x33ec66(0x2b1,0x282)][_0x5455c9(-0x1fb,-0x1c3)][_0x5455c9(-0x18f,-0x14d)],_0x59c946),Math[_0x5455c9(-0x149,-0x108)](this['windData']['bounds'][_0x5455c9(-0x10a,-0x18a)],_0x1242f3)),_0x43ff24=new Cesium$1[(_0x5455c9(-0x1b0,-0x122))](Math['max'](this[_0x5455c9(-0x12d,-0x1ac)]['bounds']['south'],_0x30d52d),Math['min'](this[_0x5455c9(-0x23a,-0x1ac)][_0x5455c9(-0x23d,-0x1c3)][_0x33ec66(0x2fd,0x31c)],_0x489f09)),_0x25ac11=(_0x32c30c['y']-_0x32c30c['x'])*0.05,_0x32f570=(_0x43ff24['y']-_0x43ff24['x'])*0.05;_0x32c30c['x']=Math['max'](this['windData']['bounds'][_0x5455c9(-0xf0,-0x14d)],_0x32c30c['x']-_0x25ac11),_0x32c30c['y']=Math['min'](this[_0x5455c9(-0x1d1,-0x1ac)][_0x5455c9(-0x1da,-0x1c3)][_0x5455c9(-0x209,-0x18a)],_0x32c30c['y']+_0x25ac11),_0x43ff24['x']=Math['max'](this['windData'][_0x33ec66(0x29a,0x2e9)]['south'],_0x43ff24['x']-_0x32f570),_0x43ff24['y']=Math[_0x5455c9(-0x17a,-0x108)](this['windData'][_0x33ec66(0x29a,0x242)]['north'],_0x43ff24['y']+_0x32f570),this['viewerParameters'][_0x33ec66(0x346,0x350)]=_0x32c30c,this['viewerParameters']['latRange']=_0x43ff24;const _0x41c2ad=this['windData']['bounds']['east']-this['windData']['bounds']['west'],_0x1d1e16=this[_0x5455c9(-0x190,-0x1ac)]['bounds']['north']-this[_0x5455c9(-0x202,-0x1ac)]['bounds']['south'],_0x4f0708=(_0x32c30c['y']-_0x32c30c['x'])/_0x41c2ad,_0xe886a4=(_0x43ff24['y']-_0x43ff24['x'])/_0x1d1e16,_0x22e911=Math['min'](_0x4f0708,_0xe886a4),_0x2f3896=0x3e8*_0x22e911;_0x2f3896>0x0&&(this['viewerParameters']['pixelSize']=Math['max'](0x0,Math[_0x5455c9(-0x11d,-0x108)](0x3e8,_0x2f3896)));}function _0x5455c9(_0x1767ab,_0x3e55d8){return _0x5dd9dc(_0x1767ab,_0x3e55d8- -0x6e9);}this[_0x5455c9(-0x1df,-0x20c)][_0x33ec66(0x261,0x2f0)]=this['scene'][_0x5455c9(-0x16b,-0x181)],(_0x3e5cd3=this['particleSystem'])===null||_0x3e5cd3===void 0x0||_0x3e5cd3['applyViewerParameters'](this['viewerParameters']);}[_0x1ed6da(-0x4a,-0xb4)](_0x51ec2f,_0x293dbb){const {bounds:_0x1e1db0,width:_0x3c5c42,height:_0x12155e,u:_0x38091c,v:_0x2de7e,speed:_0x9168c7}=this[_0x39bd65(-0x47,0x47)],{flipY:_0x38c730}=this['options'];if(_0x51ec2f<_0x1e1db0[_0xceaca7(0x451,0x491)]||_0x51ec2f>_0x1e1db0['east']||_0x293dbb<_0x1e1db0[_0x39bd65(0x48,0x33)]||_0x293dbb>_0x1e1db0[_0xceaca7(0x472,0x47e)])return null;const _0x25881d=(_0x51ec2f-_0x1e1db0[_0x39bd65(0x18,0x2a)])/(_0x1e1db0[_0x39bd65(-0x25,0x1d)]-_0x1e1db0[_0xceaca7(0x43f,0x491)])*(_0x3c5c42-0x1);let _0x21f889=(_0x293dbb-_0x1e1db0['south'])/(_0x1e1db0['north']-_0x1e1db0[_0xceaca7(0x45e,0x4c1)])*(_0x12155e-0x1);_0x38c730&&(_0x21f889=_0x12155e-0x1-_0x21f889);const _0x4aff44=Math[_0xceaca7(0x3c4,0x3c9)](_0x25881d),_0x1ed8ff=Math['floor'](_0x21f889),_0x4396f8=Math[_0xceaca7(0x40a,0x3c9)](_0x25881d),_0x33006e=Math['min'](_0x4396f8+0x1,_0x3c5c42-0x1),_0x22243e=Math[_0xceaca7(0x39d,0x3c9)](_0x21f889),_0x52d58a=Math['min'](_0x22243e+0x1,_0x12155e-0x1),_0x4ece8e=_0x25881d-_0x4396f8,_0x2ef5f3=_0x21f889-_0x22243e,_0x5674dd=_0x1ed8ff*_0x3c5c42+_0x4aff44,_0x5c5acd=_0x22243e*_0x3c5c42+_0x4396f8,_0x1e3615=_0x22243e*_0x3c5c42+_0x33006e,_0x4737c3=_0x52d58a*_0x3c5c42+_0x4396f8,_0x254689=_0x52d58a*_0x3c5c42+_0x33006e,_0x2f25c0=_0x38091c['array'][_0x5c5acd],_0xb5da7d=_0x38091c['array'][_0x1e3615],_0x521b63=_0x38091c[_0x39bd65(-0x9a,-0xd5)][_0x4737c3],_0x4a2595=_0x38091c[_0xceaca7(0x458,0x3df)][_0x254689],_0x32f6a0=(0x1-_0x4ece8e)*(0x1-_0x2ef5f3)*_0x2f25c0+_0x4ece8e*(0x1-_0x2ef5f3)*_0xb5da7d+(0x1-_0x4ece8e)*_0x2ef5f3*_0x521b63+_0x4ece8e*_0x2ef5f3*_0x4a2595;function _0xceaca7(_0x3cd471,_0x2bdb5f){return _0x5dd9dc(_0x3cd471,_0x2bdb5f- -0x10b);}const _0x39ab63=_0x2de7e['array'][_0x5c5acd],_0x153186=_0x2de7e['array'][_0x1e3615],_0x4e4be2=_0x2de7e['array'][_0x4737c3],_0x4e59ba=_0x2de7e[_0x39bd65(-0x9a,-0x1a)][_0x254689],_0x58b219=(0x1-_0x4ece8e)*(0x1-_0x2ef5f3)*_0x39ab63+_0x4ece8e*(0x1-_0x2ef5f3)*_0x153186+(0x1-_0x4ece8e)*_0x2ef5f3*_0x4e4be2+_0x4ece8e*_0x2ef5f3*_0x4e59ba,_0x82fab5=Math['sqrt'](_0x32f6a0*_0x32f6a0+_0x58b219*_0x58b219);function _0x39bd65(_0xd2514f,_0x5782ea){return _0x1ed6da(_0x5782ea,_0xd2514f-0x36);}const _0x1eb023={};_0x1eb023['u']=_0x38091c['array'][_0x5674dd],_0x1eb023['v']=_0x2de7e['array'][_0x5674dd],_0x1eb023['speed']=_0x9168c7[_0xceaca7(0x432,0x3df)][_0x5674dd];const _0x19aef5={};_0x19aef5['u']=_0x32f6a0,_0x19aef5['v']=_0x58b219,_0x19aef5['speed']=_0x82fab5;const _0x518bf9={};return _0x518bf9[_0xceaca7(0x463,0x41a)]=_0x1eb023,_0x518bf9[_0x39bd65(-0x7d,-0x10f)]=_0x19aef5,_0x518bf9;}}mars3d__namespace['LayerUtil'][_0x5dd9dc(0x4bd,0x501)](_0x1ed6da(0x93,0x13),WindLayer),mars3d__namespace['layer'][_0x5dd9dc(0x49c,0x52d)]=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this['lat']=null,this['tlng']=null,this['tlat']=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x1a2f7c in this){delete this[_0x1a2f7c];}}}class CanvasWindField{constructor(_0xba9eae){function _0x24859d(_0x45118d,_0x361913){return _0x5dd9dc(_0x45118d,_0x361913- -0x15b);}this[_0x24859d(0x3a8,0x3ae)](_0xba9eae);}get['speedRate'](){return this['_speedRate'];}set[_0x5dd9dc(0x508,0x4e8)](_0x2ec6de){function _0x13e2cc(_0x13671f,_0x65cd78){return _0x5dd9dc(_0x13671f,_0x65cd78- -0x2f1);}function _0x55d7f5(_0x1f7ba0,_0x3e7a6b){return _0x1ed6da(_0x3e7a6b,_0x1f7ba0- -0x1a0);}this[_0x55d7f5(-0x1cd,-0x252)]=(0x64-(_0x2ec6de>0x63?0x63:_0x2ec6de))*0x64,this[_0x55d7f5(-0x264,-0x29f)]=[(this['xmax']-this['xmin'])/this['_speedRate'],(this['ymax']-this['ymin'])/this['_speedRate']];}get['maxAge'](){return this['_maxAge'];}set['maxAge'](_0x38a52e){this['_maxAge']=_0x38a52e;}[_0x5dd9dc(0x593,0x509)](_0xf3809c){this['options']=_0xf3809c,this['maxAge']=_0xf3809c[_0x3673c7(0x2f,0x10)]||0x78,this['speedRate']=_0xf3809c[_0x3673c7(-0x73,-0x4a)]||0x32;function _0x3673c7(_0x55f84f,_0x46e4f0){return _0x1ed6da(_0x46e4f0,_0x55f84f-0x5f);}this['particles']=[];function _0x25e0cf(_0xa1fa90,_0x59638a){return _0x1ed6da(_0xa1fa90,_0x59638a-0x294);}const _0x347f13=_0xf3809c[_0x25e0cf(0x21c,0x21c)]||0x1000;for(let _0x2161a8=0x0;_0x2161a8<_0x347f13;_0x2161a8++){const _0x46559f=this['_randomParticle'](new CanvasParticle());this[_0x3673c7(-0x72,-0xe6)]['push'](_0x46559f);}}['setDate'](_0x35ff12){this['rows']=_0x35ff12[_0x5b4640(0x1a5,0x176)],this['cols']=_0x35ff12[_0xe75e19(0xf,-0x6d)],this['xmin']=_0x35ff12[_0x5b4640(0x226,0x1cf)],this[_0x5b4640(0x207,0x19c)]=_0x35ff12['xmax'],this['ymin']=_0x35ff12[_0xe75e19(-0x80,-0xdc)],this[_0x5b4640(0x150,0x1c0)]=_0x35ff12['ymax'],this['grid']=[];const _0x33498b=_0x35ff12['udata'],_0x1c6aa4=_0x35ff12['vdata'];let _0x502819=![];function _0x5b4640(_0x1db340,_0x2350c4){return _0x1ed6da(_0x1db340,_0x2350c4-0x242);}_0x33498b[_0xe75e19(0x17,-0x4c)]===this['rows']&&_0x33498b[0x0][_0x5b4640(0x287,0x22d)]===this['cols']&&(_0x502819=!![]);let _0x21d3c8=0x0;function _0xe75e19(_0xd8b7fe,_0xb21e4d){return _0x1ed6da(_0xb21e4d,_0xd8b7fe-0x2c);}let _0x4993c8=null,_0x5da06a=null;for(let _0x3d933f=0x0;_0x3d933f<this['rows'];_0x3d933f++){_0x4993c8=[];for(let _0x18eac8=0x0;_0x18eac8<this['cols'];_0x18eac8++,_0x21d3c8++){_0x502819?_0x5da06a=this['_calcUV'](_0x33498b[_0x3d933f][_0x18eac8],_0x1c6aa4[_0x3d933f][_0x18eac8]):_0x5da06a=this[_0xe75e19(-0xb8,-0x2b)](_0x33498b[_0x21d3c8],_0x1c6aa4[_0x21d3c8]),_0x4993c8['push'](_0x5da06a);}this[_0x5b4640(0x210,0x277)]['push'](_0x4993c8);}!this['options'][_0xe75e19(-0x79,-0x107)]&&this[_0xe75e19(0x61,0x5d)]['reverse']();}[_0x1ed6da(-0xf1,-0xdb)](){function _0xe92e03(_0x290260,_0x2a190a){return _0x1ed6da(_0x290260,_0x2a190a-0x37a);}delete this['rows'],delete this['cols'],delete this['xmin'],delete this[_0xe92e03(0x290,0x2d4)],delete this['ymin'],delete this['ymax'],delete this['grid'],delete this['particles'];}[_0x5dd9dc(0x647,0x5cb)](_0x229492,_0x399ef2){function _0x486539(_0x1110d1,_0x26478b){return _0x1ed6da(_0x26478b,_0x1110d1-0x2c1);}function _0x57b0c9(_0x2585b0,_0x58d788){return _0x5dd9dc(_0x58d788,_0x2585b0- -0x1c4);}const _0x523382=(_0x229492-this['xmin'])/(this['xmax']-this[_0x57b0c9(0x383,0x3c5)])*(this['cols']-0x1),_0x3c2426=(this['ymax']-_0x399ef2)/(this['ymax']-this['ymin'])*(this[_0x57b0c9(0x32a,0x347)]-0x1);return[_0x523382,_0x3c2426];}[_0x1ed6da(-0xcf,-0x92)](_0x4f1b87,_0xfef2bb){if(_0x4f1b87<0x0||_0x4f1b87>=this['cols']||_0xfef2bb>=this[_0x1f8419(-0x98,-0x15)])return[0x0,0x0,0x0];const _0x138824=Math[_0x2a4c70(-0x2eb,-0x26d)](_0x4f1b87),_0xaddd07=Math['floor'](_0xfef2bb);if(_0x138824===_0x4f1b87&&_0xaddd07===_0xfef2bb)return this['grid'][_0xfef2bb][_0x4f1b87];const _0x1f2e44=_0x138824+0x1,_0x57f345=_0xaddd07+0x1,_0x3a3702=this['getUVByXY'](_0x138824,_0xaddd07);function _0x1f8419(_0x52b119,_0x37a7a3){return _0x1ed6da(_0x52b119,_0x37a7a3-0xb7);}function _0x2a4c70(_0x3677ca,_0x2b5ae9){return _0x5dd9dc(_0x3677ca,_0x2b5ae9- -0x741);}const _0x36a3b2=this['getUVByXY'](_0x1f2e44,_0xaddd07),_0x5e7689=this['getUVByXY'](_0x138824,_0x57f345),_0x1382aa=this[_0x2a4c70(-0x1e1,-0x219)](_0x1f2e44,_0x57f345);let _0x4a007f=null;try{_0x4a007f=this['_bilinearInterpolation'](_0x4f1b87-_0x138824,_0xfef2bb-_0xaddd07,_0x3a3702,_0x36a3b2,_0x5e7689,_0x1382aa);}catch(_0x1c4d61){console[_0x1f8419(-0x72,-0x32)](_0x4f1b87,_0xfef2bb);}return _0x4a007f;}['_bilinearInterpolation'](_0x116f83,_0x40fa4e,_0x511318,_0x58b34a,_0x292989,_0x100fdd){const _0x3df8cb=0x1-_0x116f83,_0x46e3fb=0x1-_0x40fa4e;function _0x1bf651(_0x5af9ba,_0x433fd8){return _0x5dd9dc(_0x5af9ba,_0x433fd8- -0x72a);}const _0x2e85dd=_0x3df8cb*_0x46e3fb,_0x3eb21a=_0x116f83*_0x46e3fb,_0x6f80e4=_0x3df8cb*_0x40fa4e,_0x4ae9f6=_0x116f83*_0x40fa4e,_0x5b9e07=_0x511318[0x0]*_0x2e85dd+_0x58b34a[0x0]*_0x3eb21a+_0x292989[0x0]*_0x6f80e4+_0x100fdd[0x0]*_0x4ae9f6,_0x1df24c=_0x511318[0x1]*_0x2e85dd+_0x58b34a[0x1]*_0x3eb21a+_0x292989[0x1]*_0x6f80e4+_0x100fdd[0x1]*_0x4ae9f6;return this[_0x1bf651(-0x2c6,-0x254)](_0x5b9e07,_0x1df24c);}[_0x1ed6da(-0x110,-0xe4)](_0x424633,_0x1e7fa4){function _0x5e913a(_0x483510,_0x2a2ecf){return _0x1ed6da(_0x2a2ecf,_0x483510-0x4a5);}return[+_0x424633,+_0x1e7fa4,Math[_0x5e913a(0x3e7,0x455)](_0x424633*_0x424633+_0x1e7fa4*_0x1e7fa4)];}['getUVByPoint'](_0x559ba3,_0x3b6805){if(!this['isInExtent'](_0x559ba3,_0x3b6805))return null;const _0x4cf2b6=this['toGridXY'](_0x559ba3,_0x3b6805),_0x397ba1=this['getUVByXY'](_0x4cf2b6[0x0],_0x4cf2b6[0x1]);return _0x397ba1;}[_0x5dd9dc(0x4f5,0x57e)](_0x578a32,_0x33679e){return _0x578a32>=this['xmin']&&_0x578a32<=this['xmax']&&_0x33679e>=this['ymin']&&_0x33679e<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0xa3212=fRandomByfloat(this['xmin'],this[_0x24d541(0x278,0x26d)]),_0x2be0d9=fRandomByfloat(this[_0x5821f4(0x1fe,0x1b7)],this['ymax']),_0x474bad={};_0x474bad[_0x5821f4(0x1ec,0x1d8)]=_0x2be0d9,_0x474bad[_0x24d541(0x301,0x339)]=_0xa3212;function _0x5821f4(_0x1efc85,_0x3b3ef6){return _0x1ed6da(_0x1efc85,_0x3b3ef6-0x263);}function _0x24d541(_0x4638a9,_0xe9a856){return _0x5dd9dc(_0x4638a9,_0xe9a856- -0x2a7);}return _0x474bad;}['getParticles'](){let _0x511b8a,_0x226603,_0x429221;function _0x1f6404(_0x389e5b,_0x1c5e6e){return _0x1ed6da(_0x389e5b,_0x1c5e6e-0xfe);}function _0x1a16ca(_0x1c4518,_0x458ca7){return _0x5dd9dc(_0x1c4518,_0x458ca7- -0x5e2);}for(let _0x1a61b8=0x0,_0x1155c7=this['particles'][_0x1a16ca(-0x5c,-0x3d)];_0x1a61b8<_0x1155c7;_0x1a61b8++){let _0x8578b=this[_0x1a16ca(-0x127,-0xf9)][_0x1a61b8];_0x8578b['age']<=0x0&&(_0x8578b=this[_0x1f6404(0x2b,0xb3)](_0x8578b));if(_0x8578b[_0x1a16ca(-0x11f,-0xd0)]>0x0){const _0x326826=_0x8578b[_0x1a16ca(-0x85,-0x92)],_0x1eaa94=_0x8578b['tlat'];_0x429221=this[_0x1f6404(0x4b,0xc3)](_0x326826,_0x1eaa94),_0x429221?(_0x511b8a=_0x326826+this['_calc_speedRate'][0x0]*_0x429221[0x0],_0x226603=_0x1eaa94+this['_calc_speedRate'][0x1]*_0x429221[0x1],_0x8578b[_0x1f6404(0x195,0x124)]=_0x326826,_0x8578b[_0x1f6404(0x31,0x73)]=_0x1eaa94,_0x8578b['tlng']=_0x511b8a,_0x8578b[_0x1a16ca(-0xd,-0x93)]=_0x226603,_0x8578b[_0x1f6404(0xa8,0x85)]=_0x429221[0x2],_0x8578b[_0x1a16ca(-0x77,-0xd0)]--):_0x8578b[_0x1f6404(-0x1,0x56)]=0x0;}}return this['particles'];}['_randomParticle'](_0x33ab2e){let _0x1a2bfa,_0xc56c06;for(let _0x1c0f80=0x0;_0x1c0f80<0x1e;_0x1c0f80++){_0x1a2bfa=this['getRandomLatLng'](),_0xc56c06=this['getUVByPoint'](_0x1a2bfa[_0x54c45f(0x268,0x241)],_0x1a2bfa['lat']);if(_0xc56c06&&_0xc56c06[0x2]>0x0)break;}if(!_0xc56c06)return _0x33ab2e;const _0x1bc74c=_0x1a2bfa[_0x54c45f(0x221,0x241)]+this['_calc_speedRate'][0x0]*_0xc56c06[0x0],_0x4e0c1e=_0x1a2bfa['lat']+this['_calc_speedRate'][0x1]*_0xc56c06[0x1];_0x33ab2e['lng']=_0x1a2bfa[_0x2af424(0x12a,0xc7)],_0x33ab2e[_0x54c45f(0x138,0x190)]=_0x1a2bfa[_0x54c45f(0x148,0x190)];function _0x54c45f(_0x55573d,_0x11b6d7){return _0x1ed6da(_0x55573d,_0x11b6d7-0x21b);}_0x33ab2e['tlng']=_0x1bc74c;function _0x2af424(_0x286691,_0x48a5d0){return _0x1ed6da(_0x286691,_0x48a5d0-0xa1);}return _0x33ab2e['tlat']=_0x4e0c1e,_0x33ab2e['age']=Math['round'](0xa+Math['random']()*this['maxAge']),_0x33ab2e[_0x54c45f(0x11f,0x1a2)]=_0xc56c06[0x2],_0x33ab2e;}[_0x1ed6da(0x18,-0x66)](){for(const _0x5461a1 in this){delete this[_0x5461a1];}}}function fRandomByfloat(_0x13fcf7,_0x35b240){return _0x13fcf7+Math['random']()*(_0x35b240-_0x13fcf7);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x1ed6da(0x4e,-0x2b)];class CanvasWindLayer extends BaseLayer{constructor(_0x31ed72={}){super(_0x31ed72),this['_setOptionsHook'](_0x31ed72),this['canvas']=null,_0x31ed72['colors']&&_0x31ed72['steps']&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x31ed72));}['_setOptionsHook'](_0x1b2134,_0x2b0adf){this[_0x41c61e(0x359,0x324)]=0x3e8/(_0x1b2134[_0x60d737(-0x240,-0x22f)]||0xa),this['_pointerEvents']=this['options']['pointerEvents']??![],this['color']=_0x1b2134['color']||'#ffffff',this['lineWidth']=_0x1b2134['lineWidth']||0x1;function _0x41c61e(_0x4f1930,_0x9f53aa){return _0x5dd9dc(_0x9f53aa,_0x4f1930- -0x1e7);}this['fixedHeight']=_0x1b2134['fixedHeight']??0x0;function _0x60d737(_0x5b6b87,_0x2db781){return _0x5dd9dc(_0x2db781,_0x5b6b87- -0x783);}this[_0x41c61e(0x32e,0x397)]=_0x1b2134['flipY']??![],this['windField']&&this['windField'][_0x41c61e(0x322,0x2c5)](_0x1b2134);}get['layer'](){function _0x130d1f(_0x1fb605,_0x79b275){return _0x5dd9dc(_0x79b275,_0x1fb605- -0x3a6);}return this[_0x130d1f(0x205,0x1f1)];}get['canvasWidth'](){function _0x33deff(_0x3b29e0,_0x2a304e){return _0x1ed6da(_0x2a304e,_0x3b29e0-0x2df);}return this['_map']['scene'][_0x33deff(0x2d0,0x282)]['clientWidth'];}get[_0x1ed6da(-0xe7,-0xe2)](){function _0xe32b81(_0x484c3a,_0x3214e5){return _0x5dd9dc(_0x484c3a,_0x3214e5- -0x9a);}function _0x3a2166(_0x2afd37,_0x5c6b94){return _0x1ed6da(_0x5c6b94,_0x2afd37-0x410);}return this[_0xe32b81(0x49e,0x4c1)][_0x3a2166(0x39e,0x314)]['canvas']['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x1e134f){function _0x703637(_0x18e64f,_0x38a737){return _0x5dd9dc(_0x18e64f,_0x38a737- -0x2c8);}this[_0x703637(0x1bf,0x23b)]=_0x1e134f;if(!this['canvas'])return;function _0x4e22d8(_0x4fc4a7,_0x1c4422){return _0x5dd9dc(_0x4fc4a7,_0x1c4422- -0x10c);}_0x1e134f?this['canvas'][_0x4e22d8(0x35f,0x3e5)]['pointer-events']='all':this['canvas']['style']['pointer-events']='none';}get['particlesNumber'](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x396d16){this['options']['particlesNumber']=_0x396d16,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x1ed6da(-0x149,-0xd2)](){return this['options']['speedRate'];}set['speedRate'](_0x2bb537){function _0x21ff9e(_0x2b920c,_0x54fa4a){return _0x1ed6da(_0x2b920c,_0x54fa4a-0x1df);}function _0x35ce71(_0x2d5261,_0x137e32){return _0x1ed6da(_0x2d5261,_0x137e32-0x47c);}this[_0x21ff9e(0x147,0x15a)]['speedRate']=_0x2bb537,this['windField']&&(this[_0x35ce71(0x4af,0x4a0)][_0x35ce71(0x3cd,0x3aa)]=_0x2bb537);}get['maxAge'](){return this['options']['maxAge'];}set[_0x1ed6da(-0x19,-0x30)](_0x2a7893){this[_0x516e78(0x529,0x59a)][_0x516e78(0x57e,0x55b)]=_0x2a7893;function _0x516e78(_0x2cc91e,_0x16c779){return _0x5dd9dc(_0x16c779,_0x2cc91e- -0xc);}function _0x38bc1f(_0x5bcdff,_0x58bb59){return _0x5dd9dc(_0x5bcdff,_0x58bb59- -0x223);}this[_0x38bc1f(0x433,0x3bb)]&&(this['windField']['maxAge']=_0x2a7893);}get['data'](){return this['windData'];}set['data'](_0x2fe537){this['setData'](_0x2fe537);}get[_0x5dd9dc(0x559,0x56e)](){function _0x518254(_0x1d02cf,_0xef50ed){return _0x5dd9dc(_0xef50ed,_0x1d02cf- -0x70b);}let _0xabb04a=this['windData']['xmin'],_0x418943=this['windData'][_0x518254(-0x1f7,-0x1de)],_0x8359ac=this[_0x411a8b(0x5,0x5c)]['ymin'],_0x12d1e7=this['windData']['ymax'];_0x418943>=0x167&&_0xabb04a===0x0&&(_0xabb04a=-0xb4,_0x418943=0xb4);_0xabb04a=Math['max'](_0xabb04a,-0xb4),_0x418943=Math['min'](_0x418943,0xb4);function _0x411a8b(_0x53bc87,_0x333a94){return _0x1ed6da(_0x333a94,_0x53bc87-0x82);}return _0x8359ac=Math['max'](_0x8359ac,-0x5a),_0x12d1e7=Math['min'](_0x12d1e7,0x5a),Cesium['Rectangle']['fromDegrees'](_0xabb04a,_0x8359ac,_0x418943,_0x12d1e7);}['_showHook'](_0x3891d3){function _0x54d576(_0x1123ab,_0x17e4db){return _0x1ed6da(_0x17e4db,_0x1123ab-0x323);}function _0x37fada(_0x3a16fa,_0x3cfa5c){return _0x5dd9dc(_0x3a16fa,_0x3cfa5c- -0x728);}_0x3891d3?this['_addedHook']():(this[_0x54d576(0x2a6,0x2ce)]&&(this['options'][_0x54d576(0x278,0x25e)]=this['windData']),this[_0x37fada(-0x270,-0x231)]());}['_mountedHook'](){function _0xea1381(_0x2614ee,_0x24b8a8){return _0x5dd9dc(_0x24b8a8,_0x2614ee- -0xc);}function _0x314f91(_0x1b52fa,_0x4cc00f){return _0x1ed6da(_0x1b52fa,_0x4cc00f- -0x149);}this[_0xea1381(0x529,0x52c)]['worker']?this['initWorker']():this[_0xea1381(0x5d2,0x5a5)]=new CanvasWindField(this['options']);}[_0x1ed6da(-0xe9,-0xd4)](){this[_0x1b61ac(-0x189,-0x179)]=this[_0x1b61ac(-0x205,-0x213)]();function _0x1b61ac(_0x50d122,_0x52bcc8){return _0x1ed6da(_0x50d122,_0x52bcc8- -0x16a);}function _0x4143c8(_0x238d5b,_0x540ffc){return _0x5dd9dc(_0x238d5b,_0x540ffc- -0x274);}const _0x179fe7={};_0x179fe7[_0x1b61ac(-0x19d,-0x217)]=!![],this[_0x1b61ac(-0x1ba,-0x161)]=this[_0x1b61ac(-0x1bc,-0x179)]['getContext']('2d',_0x179fe7),this[_0x4143c8(0x31c,0x371)](),this['options']['data']&&this[_0x4143c8(0x361,0x2da)](this['options']['data']);}['_removedHook'](){function _0x250e32(_0x342d63,_0x1ed45b){return _0x1ed6da(_0x1ed45b,_0x342d63-0x175);}this['clear'](),this['unbindEvent']();function _0x300b7d(_0x4b7b57,_0x50e4b9){return _0x5dd9dc(_0x50e4b9,_0x4b7b57- -0x346);}this[_0x250e32(0x166,0xf5)]&&(this['_map']['container'][_0x250e32(0x155,0x156)](this['canvas']),delete this[_0x300b7d(0x265,0x2e5)]);}[_0x5dd9dc(0x558,0x511)](){function _0x565002(_0x41a129,_0x12c0aa){return _0x1ed6da(_0x12c0aa,_0x41a129-0x176);}const _0x328dac=mars3d__namespace[_0x565002(0x143,0xe0)][_0x565002(0xf5,0x129)](_0x3cd346(0x489,0x458),'mars3d-canvasWind',this['_map']['container']);_0x328dac[_0x565002(0xad,0x121)]['position']=_0x3cd346(0x3b3,0x419),_0x328dac['style'][_0x565002(0x9d,0x19)]='0px',_0x328dac[_0x3cd346(0x353,0x39e)]['left']=_0x565002(0x113,0xe3);function _0x3cd346(_0x3e1109,_0x49c420){return _0x1ed6da(_0x3e1109,_0x49c420-0x467);}return _0x328dac['style'][_0x3cd346(0x3ba,0x43e)]=this[_0x565002(0x117,0x12f)]['scene'][_0x3cd346(0x460,0x458)]['clientWidth']+'px',_0x328dac[_0x565002(0xad,0x6b)][_0x3cd346(0x387,0x3ec)]=this['_map'][_0x565002(0x104,0x146)][_0x3cd346(0x490,0x458)][_0x3cd346(0x413,0x405)]+'px',_0x328dac[_0x3cd346(0x3b1,0x39e)]['pointerEvents']=this[_0x565002(0xbf,0x90)]?'auto':'none',_0x328dac[_0x3cd346(0x34b,0x39e)]['zIndex']=this['options'][_0x565002(0xd8,0xef)]??0x9,_0x328dac[_0x565002(0x14d,0x142)]=this['_map']['scene']['canvas'][_0x3cd346(0x3af,0x43f)],_0x328dac['height']=this[_0x3cd346(0x3e7,0x408)][_0x3cd346(0x403,0x3f5)][_0x565002(0x167,0xe8)][_0x565002(0x114,0x1a3)],_0x328dac;}['resize'](){function _0x35e0b7(_0x42ab62,_0x26f0ef){return _0x1ed6da(_0x42ab62,_0x26f0ef-0x37e);}function _0x11a9dd(_0x1c3487,_0x1196a4){return _0x5dd9dc(_0x1196a4,_0x1c3487- -0x3af);}this['canvas']&&(this['canvas']['style']['width']=this[_0x11a9dd(0x1ac,0x200)]['scene'][_0x35e0b7(0x3b8,0x36f)][_0x11a9dd(0x1e3,0x169)]+'px',this[_0x11a9dd(0x1fc,0x280)][_0x35e0b7(0x315,0x2b5)][_0x11a9dd(0x190,0x1d4)]=this[_0x35e0b7(0x300,0x31f)][_0x35e0b7(0x314,0x30c)][_0x35e0b7(0x2f0,0x36f)][_0x35e0b7(0x368,0x31c)]+'px',this['canvas'][_0x11a9dd(0x1e2,0x227)]=this['_map']['scene']['canvas']['clientWidth'],this['canvas']['height']=this['_map']['scene']['canvas']['clientHeight']);}[_0x1ed6da(0x3a,0x2b)](){function _0x1fda28(_0x5559cc,_0x3bf17f){return _0x1ed6da(_0x3bf17f,_0x5559cc-0x197);}const _0x5cbf91=this;let _0xf3d152=Date[_0x318f17(0x44c,0x3cf)]();function _0x318f17(_0x3da23e,_0x87eda5){return _0x5dd9dc(_0x87eda5,_0x3da23e- -0x11d);}(function _0x3492e6(){function _0x29ada6(_0x46652f,_0x241621){return _0x318f17(_0x241621- -0x239,_0x46652f);}if(_0x5cbf91['isDestroy'])return;_0x5cbf91[_0x29ada6(0x28e,0x26a)]=window[_0xe482d0(0x45a,0x40d)](_0x3492e6);function _0xe482d0(_0x177bcc,_0x28f86e){return _0x318f17(_0x28f86e- -0x28,_0x177bcc);}if(_0x5cbf91[_0xe482d0(0x388,0x3db)]&&_0x5cbf91['windField']){const _0x229e70=Date['now'](),_0x12c7f6=_0x229e70-_0xf3d152;_0x12c7f6>_0x5cbf91['frameTime']&&(_0xf3d152=_0x229e70-_0x12c7f6%_0x5cbf91['frameTime'],_0x5cbf91[_0x29ada6(0x244,0x265)]());}}(),window['addEventListener']('resize',this['resize'][_0x1fda28(0x193,0x13d)](this),![]),this[_0x1fda28(0x1b8,0x1f1)]=![],this[_0x1fda28(0x119,0x158)]=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x318f17(0x43d,0x47b)][_0x318f17(0x45f,0x480)],this[_0x1fda28(0x178,0x1e3)],this),this[_0x1fda28(0x138,0xb4)]['on'](mars3d__namespace[_0x1fda28(0x137,0x156)][_0x318f17(0x490,0x511)],this[_0x1fda28(0x18f,0x172)],this),this[_0x318f17(0x43e,0x3de)]['on'](mars3d__namespace['EventType'][_0x318f17(0x468,0x3e8)],this[_0x318f17(0x4b1,0x4ed)],this)));}[_0x1ed6da(0xe,0x29)](){window[_0x41efb5(0x2ea,0x2c2)](this['_animateFrame']),delete this['_animateFrame'],window['removeEventListener']('resize',this[_0x531ecf(0x1ad,0x1ce)]);function _0x531ecf(_0x558a58,_0x4006c8){return _0x5dd9dc(_0x558a58,_0x4006c8- -0x3b2);}function _0x41efb5(_0x9f3417,_0x41027){return _0x1ed6da(_0x9f3417,_0x41027-0x2a8);}this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace['EventType']['wheel'],this[_0x531ecf(0x1ed,0x1e9)],this),this['_map']['off'](mars3d__namespace['EventType'][_0x41efb5(0x2ca,0x29b)],this['_onMouseDownEvent'],this),this['_map']['off'](mars3d__namespace[_0x41efb5(0x23b,0x248)]['mouseUp'],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace[_0x41efb5(0x1db,0x248)]['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x55dd82){function _0x2ea916(_0x5c5529,_0x17e425){return _0x1ed6da(_0x5c5529,_0x17e425-0x5ac);}clearTimeout(this[_0x2ea916(0x4fa,0x4c7)]);if(!this['show']||!this[_0x5492fe(0x31b,0x36c)])return;function _0x5492fe(_0x49ba8e,_0x257b69){return _0x1ed6da(_0x257b69,_0x49ba8e-0x32a);}this['canvas']['style']['visibility']='hidden',this['refreshTimer']=setTimeout(()=>{if(!this[_0x386cbc(0x414,0x3e5)])return;this[_0x386cbc(0x40b,0x3a3)]();function _0x13aa3d(_0x358b1b,_0x1ad530){return _0x5492fe(_0x1ad530- -0xb,_0x358b1b);}function _0x386cbc(_0x45fa37,_0x22b53f){return _0x5492fe(_0x22b53f-0x155,_0x45fa37);}this[_0x386cbc(0x4f9,0x470)]['style']['visibility']='visible';},0xc8);}['_onMouseDownEvent'](_0xf20cc6){function _0x3bb069(_0x50639e,_0x1137fa){return _0x5dd9dc(_0x50639e,_0x1137fa- -0x11e);}this['mouse_down']=!![],this[_0x3bb069(0x3b4,0x43d)]['off'](mars3d__namespace[_0x3bb069(0x456,0x43c)]['mouseMove'],this['_onMouseMoveEvent'],this);function _0x4b7b8d(_0x3e41a6,_0x5c1821){return _0x5dd9dc(_0x5c1821,_0x3e41a6- -0x2a5);}this[_0x4b7b8d(0x2b6,0x2f9)]['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x3bb069(0x3b4,0x401)],this);}['_onMouseMoveEvent'](_0x112d0c){function _0x5aac0b(_0x4f972a,_0x588da5){return _0x5dd9dc(_0x4f972a,_0x588da5- -0x1d5);}if(!this['show']||!this['canvas'])return;function _0x376df8(_0x4f1f57,_0x4e8308){return _0x5dd9dc(_0x4e8308,_0x4f1f57- -0x2c4);}this[_0x376df8(0x317,0x29b)]&&(this['canvas'][_0x5aac0b(0x30d,0x31c)][_0x376df8(0x2de,0x276)]=_0x376df8(0x32e,0x32a),this[_0x376df8(0x278,0x215)]=!![]);}['_onMouseUpEvent'](_0x4f1948){if(!this['show']||!this[_0x153c70(0x3c1,0x3da)])return;this[_0x38a77a(-0xf0,-0x15d)][_0x38a77a(-0x106,-0x14b)](mars3d__namespace[_0x153c70(0x327,0x389)][_0x153c70(0x31b,0x37a)],this['_onMouseMoveEvent'],this);function _0x38a77a(_0x29f53c,_0x25de0e){return _0x1ed6da(_0x25de0e,_0x29f53c- -0x91);}function _0x153c70(_0x49f54d,_0x34480c){return _0x5dd9dc(_0x49f54d,_0x34480c- -0x1d1);}this['mouse_down']&&this['mouse_move']&&this['redraw'](),this['canvas'][_0x153c70(0x2a6,0x320)]['visibility']='visible',this[_0x38a77a(-0x70,-0x41)]=![],this['mouse_move']=![];}[_0x5dd9dc(0x4c9,0x54e)](_0x15359b){this['clear']();function _0x4437e2(_0x3d6241,_0x32f9ef){return _0x1ed6da(_0x3d6241,_0x32f9ef- -0x42);}this['windData']=_0x15359b,this['windField']['setDate'](_0x15359b),this[_0x4437e2(-0x13b,-0x11e)]();}['redraw'](){function _0xf415e9(_0xb34a1b,_0x391f52){return _0x5dd9dc(_0x391f52,_0xb34a1b- -0x33f);}if(!this[_0xf415e9(0x1e1,0x161)])return;this[_0x3d4a3f(0x2e5,0x2fe)]['setOptions'](this['options']);function _0x3d4a3f(_0x43b0a8,_0x448e53){return _0x1ed6da(_0x448e53,_0x43b0a8-0x2c1);}this[_0x3d4a3f(0x2c2,0x340)]();}['update'](){if(this['_updateIng'])return;this[_0x2faae4(-0x1ef,-0x176)]=!![];function _0x500b4d(_0x417430,_0x51a5f3){return _0x5dd9dc(_0x51a5f3,_0x417430- -0x796);}if(this[_0x2faae4(-0x17b,-0x14d)])this[_0x2faae4(-0x15a,-0x1d0)][_0x500b4d(-0x1db,-0x21f)]();else{const _0x2b2204=this[_0x2faae4(-0x15a,-0x100)]['getParticles']();this['_drawLines'](_0x2b2204);}function _0x2faae4(_0x54d848,_0x53a8d1){return _0x5dd9dc(_0x53a8d1,_0x54d848- -0x738);}this['_updateIng']=![];}[_0x5dd9dc(0x5af,0x597)](_0x242dec){this[_0x5a4305(-0x1b8,-0x1fb)]=_0x242dec,this['canvasContext']['globalCompositeOperation']='destination-in',this['canvasContext'][_0x4a7115(0x1bd,0x14c)](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext'][_0x5a4305(-0x172,-0x1f0)]=_0x4a7115(0x10e,0xba),this['canvasContext'][_0x4a7115(0x119,0x173)]=0.9;function _0x4a7115(_0x2fb1ce,_0x100759){return _0x5dd9dc(_0x100759,_0x2fb1ce- -0x3e7);}function _0x5a4305(_0x3ddb07,_0x27b06d){return _0x1ed6da(_0x27b06d,_0x3ddb07- -0x116);}const _0x420a5b=this['_map']['scene'][_0x4a7115(0x181,0x1a2)]!==Cesium['SceneMode']['SCENE3D'],_0x4d0e51=this[_0x4a7115(0x1e8,0x1e8)]*0.25;if(this['_colorRamp'])for(let _0x100526=0x0,_0x2a1768=_0x242dec['length'];_0x100526<_0x2a1768;_0x100526++){const _0x219c36=_0x242dec[_0x100526],_0x7df1a0=this[_0x5a4305(-0x17a,-0xff)](_0x219c36,_0x219c36['lng'],_0x219c36['lat'],_0x219c36['alt']),_0x2d357c=this['_tomap'](_0x219c36,_0x219c36[_0x5a4305(-0x180,-0x1e1)],_0x219c36['tlat'],_0x219c36[_0x5a4305(-0xf7,-0x152)]);if(!_0x7df1a0||!_0x2d357c)continue;if(_0x420a5b&&Math[_0x4a7115(0x145,0x135)](_0x7df1a0[0x0]-_0x2d357c[0x0])>=_0x4d0e51)continue;this['canvasContext'][_0x5a4305(-0x1d8,-0x16c)](),this['canvasContext']['lineWidth']=this[_0x4a7115(0x14f,0x133)],this[_0x5a4305(-0x10d,-0x17b)]['strokeStyle']=this['_colorRamp'][_0x4a7115(0x1d5,0x1be)](_0x219c36[_0x4a7115(0x15a,0x185)]),this['canvasContext']['moveTo'](_0x7df1a0[0x0],_0x7df1a0[0x1]),this['canvasContext']['lineTo'](_0x2d357c[0x0],_0x2d357c[0x1]),this['canvasContext']['stroke']();}else{this['canvasContext'][_0x4a7115(0x111,0x10d)](),this['canvasContext']['lineWidth']=this[_0x5a4305(-0x19a,-0x16c)],this[_0x4a7115(0x1dc,0x1ab)]['strokeStyle']=this['color'];for(let _0x45faad=0x0,_0x4441ae=_0x242dec['length'];_0x45faad<_0x4441ae;_0x45faad++){const _0x49a4e8=_0x242dec[_0x45faad],_0x16c745=this['_tomap'](_0x49a4e8,_0x49a4e8['lng'],_0x49a4e8['lat'],_0x49a4e8['alt']),_0x33f67f=this['_tomap'](_0x49a4e8,_0x49a4e8['tlng'],_0x49a4e8['tlat'],_0x49a4e8[_0x4a7115(0x1f2,0x173)]);if(!_0x16c745||!_0x33f67f)continue;if(_0x420a5b&&Math['abs'](_0x16c745[0x0]-_0x33f67f[0x0])>=_0x4d0e51)continue;this['canvasContext']['moveTo'](_0x16c745[0x0],_0x16c745[0x1]),this['canvasContext']['lineTo'](_0x33f67f[0x0],_0x33f67f[0x1]);}this['canvasContext']['stroke']();}}[_0x1ed6da(-0x22,-0x64)](_0x16dfaa,_0x1aea9c,_0x1c2c99,_0x45310e){const _0x448f77=Cesium[_0x114554(0x281,0x301)]['fromDegrees'](_0x1aea9c,_0x1c2c99,_0x45310e??this['fixedHeight']),_0x38db81=this[_0xd130f2(-0x1b9,-0x1d4)][_0xd130f2(-0x1cc,-0x246)];function _0x114554(_0x46e23e,_0x48e2b4){return _0x1ed6da(_0x46e23e,_0x48e2b4-0x3d8);}if(_0x38db81[_0xd130f2(-0x1ac,-0x228)]===Cesium[_0x114554(0x3db,0x3c8)][_0xd130f2(-0x1b4,-0x182)]){const _0x5fec1=new Cesium[(_0x114554(0x272,0x2ee))](_0x38db81['globe']['ellipsoid'],_0x38db81['camera'][_0xd130f2(-0x1f7,-0x246)]),_0x49c854=_0x5fec1[_0xd130f2(-0x1e3,-0x161)](_0x448f77);if(!_0x49c854)return _0x16dfaa[_0x114554(0x2ee,0x330)]=0x0,null;}const _0x5a8f3f=mars3d__namespace['PointTrans'][_0xd130f2(-0x16b,-0x1a1)](this[_0x114554(0x3ca,0x379)]['scene'],_0x448f77);function _0xd130f2(_0x517471,_0x2f2b4e){return _0x5dd9dc(_0x2f2b4e,_0x517471- -0x714);}return _0x5a8f3f?[_0x5a8f3f['x'],_0x5a8f3f['y']]:null;}[_0x1ed6da(-0x152,-0xdb)](){this['windField']['clear']();function _0x20072d(_0x1e2abf,_0x1e2fde){return _0x5dd9dc(_0x1e2abf,_0x1e2fde- -0x162);}delete this[_0x20072d(0x44b,0x3db)];}[_0x5dd9dc(0x5fd,0x594)](){this[_0x5395dc(0x399,0x33d)]=new Worker(this['options']['worker']),this[_0x4e9a6a(0x46,0xbf)]['onmessage']=_0x2f2303=>{this['_drawLines'](_0x2f2303['data']['particles']),this['_updateIng2']=![];};function _0x5395dc(_0xc9af81,_0x598295){return _0x5dd9dc(_0x598295,_0xc9af81- -0x224);}function _0x4e9a6a(_0x5b98d6,_0x77a3f2){return _0x1ed6da(_0x77a3f2,_0x5b98d6-0x43);}this[_0x5395dc(0x3ba,0x33e)]={'init':_0x44f97d=>{const _0x44462a={};function _0xfe8d3f(_0x224a61,_0x1feffe){return _0x5395dc(_0x224a61-0x23d,_0x1feffe);}_0x44462a['type']=_0x35ac2b(0x3a4,0x410);function _0x35ac2b(_0x272791,_0x244351){return _0x4e9a6a(_0x244351-0x40a,_0x272791);}_0x44462a['options']=_0x44f97d,this[_0x35ac2b(0x430,0x450)][_0xfe8d3f(0x572,0x56b)](_0x44462a);},'setOptions':_0xf1f558=>{const _0x244637={};_0x244637[_0x5a54e2(-0x123,-0x141)]='setOptions';function _0x5a54e2(_0x192e7a,_0x39eba0){return _0x5395dc(_0x39eba0- -0x4e1,_0x192e7a);}_0x244637['options']=_0xf1f558;function _0x417112(_0x1f2ff9,_0x19dc39){return _0x5395dc(_0x1f2ff9-0x94,_0x19dc39);}this[_0x417112(0x42d,0x3df)][_0x417112(0x3c9,0x38f)](_0x244637);},'setDate':_0x4ad625=>{function _0x2bc6b2(_0x33df73,_0x52b51e){return _0x5395dc(_0x52b51e- -0x370,_0x33df73);}const _0x1e7883={};_0x1e7883['type']=_0x2bc6b2(-0x75,-0x12),_0x1e7883['data']=_0x4ad625,this['worker']['postMessage'](_0x1e7883);},'update':()=>{if(this[_0x47aee2(0x2f2,0x2c5)])return;this['_updateIng2']=!![];function _0x47aee2(_0x1a1244,_0x1a5758){return _0x5395dc(_0x1a1244-0x22,_0x1a5758);}const _0x2d8fdf={};_0x2d8fdf['type']=_0x47aee2(0x3b9,0x396);function _0x1b7bfc(_0x436883,_0x445052){return _0x4e9a6a(_0x436883-0x20d,_0x445052);}this[_0x1b7bfc(0x253,0x1f0)][_0x1b7bfc(0x1ef,0x208)](_0x2d8fdf);},'clear':()=>{const _0x571dd8={};function _0x122abe(_0x2f6cb0,_0x2f7faf){return _0x5395dc(_0x2f7faf-0x1f9,_0x2f6cb0);}_0x571dd8['type']='clear';function _0x3207d1(_0x55e482,_0x95e6dd){return _0x4e9a6a(_0x55e482-0x488,_0x95e6dd);}this[_0x3207d1(0x4ce,0x506)][_0x122abe(0x577,0x52e)](_0x571dd8);}},this['windField']['init'](this['options']);}}mars3d__namespace[_0x1ed6da(-0x1,0x25)]['register'](_0x5dd9dc(0x610,0x5a6),CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer;function _0x1ed6da(_0xc9fe6b,_0x29f23f){return _0x3ea8(_0x29f23f- -0x1f6,_0xc9fe6b);}mars3d__namespace[_0x5dd9dc(0x622,0x593)]=CanvasWindField,mars3d__namespace[_0x5dd9dc(0x4d2,0x4eb)][_0x1ed6da(-0xbc,-0xa7)](_0x1ed6da(0x2c,-0x48)+version+_0x1ed6da(-0x11e,-0xb6)+buildTime),mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports[_0x1ed6da(0xc2,0x32)]=CanvasWindLayer,exports[_0x1ed6da(-0x11d,-0x8d)]=WindLayer,exports[_0x5dd9dc(0x570,0x52a)]=WindUtil;const _0x27582c={};_0x27582c['value']=!![],Object['defineProperty'](exports,'__esModule',_0x27582c);
}));
