/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.2
 * 编译日期：2025-08-11 22:09
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0xdfa0fb,_0x416374){const _0x443b80=_0xdfa0fb();function _0x5cd654(_0x2dc386,_0x5eb5e3){return _0x44fb(_0x2dc386- -0x37c,_0x5eb5e3);}function _0x57288e(_0xce2d91,_0x3e37c0){return _0x44fb(_0x3e37c0- -0x2b4,_0xce2d91);}while(!![]){try{const _0x351f02=-parseInt(_0x5cd654(-0x29a,-0x312))/0x1*(parseInt(_0x5cd654(-0x2fd,-0x293))/0x2)+parseInt(_0x5cd654(-0x241,-0x2b1))/0x3+parseInt(_0x57288e(-0x1fb,-0x1ca))/0x4*(-parseInt(_0x57288e(-0x175,-0x13b))/0x5)+parseInt(_0x57288e(-0x1d8,-0x1f0))/0x6*(parseInt(_0x5cd654(-0x2f9,-0x2d6))/0x7)+parseInt(_0x57288e(-0x199,-0x1fc))/0x8+parseInt(_0x5cd654(-0x289,-0x2d8))/0x9*(-parseInt(_0x5cd654(-0x1fd,-0x1e7))/0xa)+parseInt(_0x5cd654(-0x2dd,-0x340))/0xb;if(_0x351f02===_0x416374)break;else _0x443b80['push'](_0x443b80['shift']());}catch(_0x49031d){_0x443b80['push'](_0x443b80['shift']());}}}(_0x47e0,0xe44fe));function _interopNamespace(_0x347df3){if(_0x347df3&&_0x347df3['__esModule'])return _0x347df3;var _0x35546d=Object['create'](null);return _0x347df3&&Object['keys'](_0x347df3)['forEach'](function(_0x44d705){function _0x130c59(_0x3bb3ef,_0x7db91b){return _0x44fb(_0x3bb3ef- -0x2bd,_0x7db91b);}function _0x2d6293(_0x359215,_0x8243c8){return _0x44fb(_0x8243c8- -0x13f,_0x359215);}if(_0x44d705!=='default'){var _0x43ae1c=Object[_0x130c59(-0x212,-0x1d1)](_0x347df3,_0x44d705);Object['defineProperty'](_0x35546d,_0x44d705,_0x43ae1c[_0x2d6293(-0xa6,-0x64)]?_0x43ae1c:{'enumerable':!![],'get':function(){return _0x347df3[_0x44d705];}});}}),_0x35546d['default']=_0x347df3,_0x35546d;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x413099,_0x375d4a){function _0x12dda7(_0x2353d7,_0x1cd1ea){return _0x44fb(_0x2353d7- -0x3b1,_0x1cd1ea);}function _0xd3f8c8(_0x4caa1,_0x66bd56){return _0x44fb(_0x4caa1- -0x132,_0x66bd56);}const _0x44873f=_0x413099*Math[_0xd3f8c8(-0x86,-0x57)](Cesium$2['Math'][_0x12dda7(-0x2b9,-0x2a2)](_0x375d4a));return _0x44873f;}function getV(_0x252975,_0x3d8b5d){const _0x28f7a3=_0x252975*Math['sin'](Cesium$2['Math']['toRadians'](_0x3d8b5d));return _0x28f7a3;}function getSpeed(_0x5c5b1e,_0x4ec494){function _0x317524(_0x4e3312,_0x3a8849){return _0x44fb(_0x3a8849- -0x355,_0x4e3312);}const _0x4b61ec=Math[_0x317524(-0x1dd,-0x1ca)](Math['pow'](_0x5c5b1e,0x2)+Math['pow'](_0x4ec494,0x2));return _0x4b61ec;}function getDirection(_0x395506,_0x214ad8){function _0xe571e5(_0xcd68c7,_0x4f0668){return _0x44fb(_0xcd68c7- -0x178,_0x4f0668);}let _0x2feca6=Cesium$2['Math']['toDegrees'](Math[_0xe571e5(-0x4b,-0xb0)](_0x214ad8,_0x395506));return _0x2feca6+=_0x2feca6<0x0?0x168:0x0,_0x2feca6;}const _0x1b7cf8={};_0x1b7cf8['__proto__']=null,_0x1b7cf8[_0x2adbdd(0x2b4,0x309)]=getU,_0x1b7cf8[_0x2adbdd(0x3a9,0x359)]=getV,_0x1b7cf8[_0x2b2a20(0x3e7,0x3b8)]=getSpeed,_0x1b7cf8[_0x2b2a20(0x447,0x4af)]=getDirection;var WindUtil=_0x1b7cf8,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x2adbdd(0x28b,0x2f9),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader=_0x2adbdd(0x276,0x2df);const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];function _0x2b2a20(_0x5ad468,_0x1cd6f9){return _0x44fb(_0x5ad468-0x36b,_0x1cd6f9);}class ShaderManager{static[_0x2b2a20(0x477,0x456)](){const _0x6e776={};return _0x6e776['sources']=[calculateSpeedShader],new ShaderSource$1(_0x6e776);}static['getUpdatePositionShader'](){const _0x2985f6={};return _0x2985f6['sources']=[updatePositionShader],new ShaderSource$1(_0x2985f6);}static['getSegmentDrawVertexShader'](){const _0x5ddf33={};_0x5ddf33[_0x3e4499(0x26f,0x2e9)]=[renderParticlesVertexShader];function _0x3e4499(_0x528204,_0x1cfa1c){return _0x2adbdd(_0x1cfa1c,_0x528204- -0xba);}return new ShaderSource$1(_0x5ddf33);}static['getSegmentDrawFragmentShader'](){function _0xc741c(_0x2d28aa,_0x1a722c){return _0x2adbdd(_0x2d28aa,_0x1a722c-0x39);}const _0x339ce8={};return _0x339ce8[_0xc741c(0x3d5,0x362)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x339ce8);}static[_0x2adbdd(0x342,0x346)](){function _0x3fb33e(_0x3c483f,_0x3c6441){return _0x2b2a20(_0x3c6441-0x16,_0x3c483f);}const _0x3085fd={};return _0x3085fd[_0x3fb33e(0x473,0x4c1)]=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x3085fd);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x501bb3){this[_0x53f3cb(0x31,0x96)]=_0x501bb3[_0x3aa59b(0x4c0,0x50f)];function _0x3aa59b(_0x368a97,_0x49891e){return _0x2b2a20(_0x368a97-0x52,_0x49891e);}this['geometry']=_0x501bb3['geometry'];function _0x53f3cb(_0x4818a3,_0xccb810){return _0x2adbdd(_0xccb810,_0x4818a3- -0x2bb);}this['attributeLocations']=_0x501bb3[_0x3aa59b(0x535,0x543)],this['primitiveType']=_0x501bb3['primitiveType'],this[_0x3aa59b(0x467,0x456)]=_0x501bb3['uniformMap']||{},this['vertexShaderSource']=_0x501bb3['vertexShaderSource'],this[_0x53f3cb(0xae,0xe9)]=_0x501bb3['fragmentShaderSource'],this[_0x53f3cb(-0xa,-0x5a)]=_0x501bb3[_0x53f3cb(-0xa,-0x79)],this['framebuffer']=_0x501bb3['framebuffer'],this['outputTexture']=_0x501bb3['outputTexture'],this['autoClear']=_0x501bb3[_0x53f3cb(-0x1b,-0x3e)]??![],this['preExecute']=_0x501bb3['preExecute'],this['show']=!![],this[_0x3aa59b(0x4df,0x4c7)]=undefined,this['clearCommand']=undefined,this[_0x3aa59b(0x4ee,0x4f3)]=_0x501bb3['isDynamic']??(()=>!![]),this[_0x3aa59b(0x474,0x451)]&&(this[_0x53f3cb(-0x8,-0x18)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x7bbb7){function _0xff2132(_0x2f821f,_0x43090a){return _0x2adbdd(_0x2f821f,_0x43090a- -0x1e7);}function _0xcbf3b7(_0x472036,_0xa68e25){return _0x2b2a20(_0xa68e25- -0x5c6,_0x472036);}if(this['commandType']==='Draw'){const _0xfbe5b9={};_0xfbe5b9[_0xff2132(0xaf,0x9d)]=_0x7bbb7,_0xfbe5b9['geometry']=this[_0xff2132(0xfa,0xdc)],_0xfbe5b9[_0xcbf3b7(-0x12a,-0xe3)]=this['attributeLocations'],_0xfbe5b9[_0xcbf3b7(-0x10d,-0x16f)]=BufferUsage$1[_0xcbf3b7(-0xd6,-0x11d)];const _0x25f71c=VertexArray$1[_0xcbf3b7(-0xcb,-0x124)](_0xfbe5b9),_0x126ddc={};_0x126ddc[_0xcbf3b7(-0x235,-0x1c0)]=_0x7bbb7,_0x126ddc['vertexShaderSource']=this[_0xcbf3b7(-0x189,-0x131)],_0x126ddc['fragmentShaderSource']=this['fragmentShaderSource'],_0x126ddc['attributeLocations']=this['attributeLocations'];const _0x30cb43=ShaderProgram['fromCache'](_0x126ddc),_0x5d4793=RenderState['fromCache'](this['rawRenderState']),_0x1bffc4={};return _0x1bffc4['owner']=this,_0x1bffc4['vertexArray']=_0x25f71c,_0x1bffc4['primitiveType']=this['primitiveType'],_0x1bffc4[_0xcbf3b7(-0x12d,-0xe7)]=Matrix4['IDENTITY'],_0x1bffc4['renderState']=_0x5d4793,_0x1bffc4[_0xff2132(0x139,0x130)]=_0x30cb43,_0x1bffc4['framebuffer']=this['framebuffer'],_0x1bffc4['uniformMap']=this['uniformMap'],_0x1bffc4['pass']=Pass$1[_0xcbf3b7(-0x15e,-0x122)],new DrawCommand(_0x1bffc4);}else{if(this['commandType']===_0xff2132(0x122,0x145)){const _0x1ccd7b={};return _0x1ccd7b[_0xcbf3b7(-0x20d,-0x187)]=this,_0x1ccd7b['fragmentShaderSource']=this['fragmentShaderSource'],_0x1ccd7b['uniformMap']=this['uniformMap'],_0x1ccd7b['outputTexture']=this['outputTexture'],_0x1ccd7b['persists']=!![],new ComputeCommand(_0x1ccd7b);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x137fbe,_0x6c9342){function _0x2ee222(_0x2f3ae1,_0xc4ea88){return _0x2b2a20(_0x2f3ae1- -0x3e,_0xc4ea88);}this[_0x2ee222(0x407,0x436)]=_0x6c9342;function _0x1038c2(_0x3304a5,_0x36f775){return _0x2b2a20(_0x3304a5- -0x341,_0x36f775);}defined(this[_0x2ee222(0x44f,0x4d9)])&&(this['commandToExecute'][_0x1038c2(0x16c,0x195)]=VertexArray$1[_0x2ee222(0x464,0x434)]({'context':_0x137fbe,'geometry':this[_0x2ee222(0x407,0x47f)],'attributeLocations':this[_0x1038c2(0x1a2,0x15c)],'bufferUsage':BufferUsage$1[_0x2ee222(0x46b,0x3e8)]}));}['update'](_0x2a4072){if(!this[_0x1d26b2(0x50c,0x4ca)]())return;if(!this[_0x1d26b2(0x521,0x4bc)]||!defined(_0x2a4072))return;!defined(this['commandToExecute'])&&(this['commandToExecute']=this[_0x1fa3e1(0x4,0x7b)](_0x2a4072['context']));function _0x1d26b2(_0x50b6f3,_0x34dd2f){return _0x2adbdd(_0x50b6f3,_0x34dd2f-0x1b0);}defined(this['preExecute'])&&this['preExecute']();if(!_0x2a4072['commandList']){console['warn']('frameState.commandList\x20is\x20undefined');return;}function _0x1fa3e1(_0x2ec42c,_0x5798df){return _0x2b2a20(_0x5798df- -0x36d,_0x2ec42c);}defined(this['clearCommand'])&&_0x2a4072[_0x1d26b2(0x57b,0x503)][_0x1d26b2(0x438,0x44f)](this['clearCommand']),defined(this[_0x1d26b2(0x47e,0x4bb)])&&_0x2a4072['commandList']['push'](this['commandToExecute']);}['isDestroyed'](){return![];}['destroy'](){function _0x35c5a5(_0x2e2456,_0x12460b){return _0x2adbdd(_0x2e2456,_0x12460b- -0x31c);}function _0x21a93d(_0x126004,_0x79ee79){return _0x2adbdd(_0x79ee79,_0x126004- -0xbe);}if(defined(this[_0x21a93d(0x24d,0x228)])){var _0x2a92df;(_0x2a92df=this[_0x35c5a5(0x24,-0x11)][_0x35c5a5(-0x35,-0x5)])===null||_0x2a92df===void 0x0||_0x2a92df['destroy'](),this['commandToExecute'][_0x35c5a5(-0x78,-0x5)]=undefined;}return destroyObject(this);}}function deepMerge(_0x242c47,_0x5b74a3){if(!_0x242c47)return _0x5b74a3;if(!_0x5b74a3)return _0x242c47;const _0x30c746={..._0x5b74a3};function _0x33670b(_0x2b93d0,_0x2d80bb){return _0x2adbdd(_0x2b93d0,_0x2d80bb-0xd1);}function _0x361f7f(_0x380653,_0x284e3d){return _0x2adbdd(_0x284e3d,_0x380653-0xf3);}const _0x515c66=_0x30c746;for(const _0x1a1967 in _0x242c47){if(Object['prototype']['hasOwnProperty']['call'](_0x242c47,_0x1a1967)){const _0x3f8b3b=_0x242c47[_0x1a1967],_0x23258a=_0x5b74a3[_0x1a1967];if(Array['isArray'](_0x3f8b3b)){_0x515c66[_0x1a1967]=_0x3f8b3b[_0x33670b(0x3ad,0x379)]();continue;}if(_0x3f8b3b&&typeof _0x3f8b3b===_0x33670b(0x4b1,0x435)){_0x515c66[_0x1a1967]=deepMerge(_0x3f8b3b,_0x23258a||{});continue;}_0x3f8b3b!==undefined&&(_0x515c66[_0x1a1967]=_0x3f8b3b);}}return _0x515c66;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x13cf21,_0x52b72a,_0x2a166e,_0x4e0e8d,_0x2bb76e){this[_0x3a7c9d(-0x1fc,-0x283)]=_0x13cf21,this['options']=_0x2a166e,this[_0x3a7c9d(-0x298,-0x277)]=_0x4e0e8d,this['windData']=_0x52b72a,this[_0x4f7283(0x377,0x312)]=0x3c,this[_0x3a7c9d(-0x1a2,-0x1b9)]=0x1;const _0x4aa189={};_0x4aa189[_0x3a7c9d(-0x2e9,-0x26a)]=_0x2bb76e,_0x4aa189['samplingWindow']=0x1,_0x4aa189['quietPeriod']=0x0;function _0x3a7c9d(_0x3bb54d,_0xa167f7){return _0x2b2a20(_0xa167f7- -0x689,_0x3bb54d);}this[_0x3a7c9d(-0x1c6,-0x1a2)]=new FrameRateMonitor(_0x4aa189),this['initFrameRate']();function _0x4f7283(_0x5512dd,_0x3f1b05){return _0x2adbdd(_0x3f1b05,_0x5512dd-0x8f);}this[_0x3a7c9d(-0x1cd,-0x21d)](),this[_0x3a7c9d(-0x1e2,-0x1c8)](),this['createComputingPrimitives']();}['initFrameRate'](){function _0x1a1186(_0x2aa69d,_0x4741de){return _0x2b2a20(_0x4741de- -0x345,_0x2aa69d);}const _0x4bec54=()=>{function _0x4ddc14(_0x18d18f,_0x4528c6){return _0x44fb(_0x18d18f- -0x1ea,_0x4528c6);}function _0x16700d(_0x142f1e,_0x4c93f7){return _0x44fb(_0x4c93f7- -0x29,_0x142f1e);}this['frameRateMonitor'][_0x4ddc14(-0x9c,-0x98)]>0x14&&(this['frameRate']=this['frameRateMonitor'][_0x4ddc14(-0x9c,-0x61)],this['frameRateAdjustment']=0x3c/Math[_0x4ddc14(-0x97,-0x110)](this[_0x4ddc14(-0xeb,-0x126)],0x1));};_0x4bec54();const _0x2d3c92=setInterval(_0x4bec54,0x3e8),_0x17b074=this[_0x1a1186(0x12d,0xab)]['bind'](this);this['destroy']=()=>{clearInterval(_0x2d3c92),_0x17b074();};}[_0x2b2a20(0x46c,0x46c)](){const _0x4fcc2f={};function _0x4d7803(_0x52e7da,_0x24cdfb){return _0x2b2a20(_0x52e7da- -0x38d,_0x24cdfb);}_0x4fcc2f[_0x4d7803(0x126,0x118)]=TextureMinificationFilter$1[_0x4d7803(0x7c,0x8f)],_0x4fcc2f['magnificationFilter']=TextureMagnificationFilter$1[_0x24cef0(0x77,0xa3)];const _0x559d8a={'context':this['context'],'width':this[_0x4d7803(0x16b,0x164)]['width'],'height':this[_0x24cef0(0x1f6,0x192)]['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this['options']['flipY']??![],'sampler':new Sampler$1(_0x4fcc2f)};function _0x24cef0(_0x5f079d,_0xe95e12){return _0x2b2a20(_0xe95e12- -0x366,_0x5f079d);}this[_0x24cef0(0x117,0x100)]={'U':new Texture$1({..._0x559d8a,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x559d8a,'source':{'arrayBufferView':new Float32Array(this['windData']['v'][_0x4d7803(0xec,0x135)])}})};}[_0x2adbdd(0x2f6,0x33f)](){const _0x1c7bc2={};_0x1c7bc2['minificationFilter']=TextureMinificationFilter$1[_0x59182a(0x46d,0x41e)];function _0x22fe23(_0x5f564e,_0x544e6b){return _0x2b2a20(_0x544e6b- -0x391,_0x5f564e);}function _0x59182a(_0xc1de2a,_0x3167c0){return _0x2b2a20(_0x3167c0- -0x32,_0xc1de2a);}_0x1c7bc2['magnificationFilter']=TextureMagnificationFilter$1[_0x59182a(0x47e,0x41e)];const _0x599ff9={'context':this['context'],'width':this['options']['particlesTextureSize'],'height':this[_0x59182a(0x49c,0x498)]['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x22fe23(0x6a,0xd1)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this['options']['particlesTextureSize']*0x4)[_0x22fe23(0x76,0xce)](0x0)},'sampler':new Sampler$1(_0x1c7bc2)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x599ff9),'currentParticlesPosition':new Texture$1(_0x599ff9),'nextParticlesPosition':new Texture$1(_0x599ff9),'postProcessingPosition':new Texture$1(_0x599ff9),'particlesSpeed':new Texture$1(_0x599ff9)};}['destroyParticlesTextures'](){function _0x57d2e5(_0x486b3d,_0x135bbc){return _0x2adbdd(_0x486b3d,_0x135bbc- -0x5c5);}Object[_0x57d2e5(-0x336,-0x2bf)](this['particlesTextures'])['forEach'](_0x24ddb2=>_0x24ddb2['destroy']());}['createComputingPrimitives'](){function _0x3c2357(_0x22be19,_0x432148){return _0x2b2a20(_0x432148- -0x2d,_0x22be19);}function _0x23b272(_0xfc16ca,_0x4b5fbd){return _0x2b2a20(_0xfc16ca-0x4d,_0x4b5fbd);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x23b272(0x4fb,0x4d0),'uniformMap':{'U':()=>this[_0x23b272(0x4b3,0x468)]['U'],'V':()=>this[_0x3c2357(0x3e3,0x439)]['V'],'uRange':()=>new Cartesian2$1(this['windData']['u']['min'],this[_0x3c2357(0x47a,0x4cb)]['u']['max']),'vRange':()=>new Cartesian2$1(this[_0x23b272(0x545,0x55e)]['v']['min'],this['windData']['v']['max']),'speedRange':()=>new Cartesian2$1(this[_0x3c2357(0x46e,0x4cb)]['speed'][_0x3c2357(0x48c,0x4a5)],this[_0x23b272(0x545,0x53c)]['speed'][_0x23b272(0x50b,0x4d6)]),'currentParticlesPosition':()=>this[_0x3c2357(0x39c,0x3bc)]['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x5c2aa3(_0x14cfd4,_0x2f5b92){return _0x3c2357(_0x2f5b92,_0x14cfd4- -0x6f1);}function _0x34835d(_0x10f029,_0x3c4ead){return _0x3c2357(_0x10f029,_0x3c4ead- -0x16);}return(this['viewerParameters'][_0x34835d(0x46b,0x49e)]+0x32)*this[_0x5c2aa3(-0x254,-0x1ec)]['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this[_0x3c2357(0x468,0x4cb)]['width'],this[_0x3c2357(0x466,0x4cb)]['height']),'minimum':()=>new Cartesian2$1(this['windData'][_0x23b272(0x484,0x4f3)]['west'],this['windData']['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData']['bounds'][_0x3c2357(0x531,0x4ac)],this[_0x3c2357(0x52f,0x4cb)]['bounds'][_0x3c2357(0x527,0x4bf)])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':()=>{const _0x20a78f=this['particlesTextures']['previousParticlesPosition'];this['particlesTextures']['previousParticlesPosition']=this['particlesTextures']['currentParticlesPosition'];function _0xb2618(_0x3a195e,_0x16dd0c){return _0x23b272(_0x3a195e- -0x782,_0x16dd0c);}this['particlesTextures'][_0xb2618(-0x330,-0x2d5)]=this['particlesTextures']['postProcessingPosition'],this['particlesTextures']['postProcessingPosition']=_0x20a78f;function _0x4d6598(_0x2dc153,_0x520cef){return _0x23b272(_0x2dc153- -0x64,_0x520cef);}this['primitives']['calculateSpeed']['commandToExecute']&&(this[_0x4d6598(0x3f0,0x3dd)]['calculateSpeed'][_0xb2618(-0x2a8,-0x274)]['outputTexture']=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this['options'][_0x3c2357(0x4a1,0x4a4)]}),'updatePosition':new CustomPrimitive({'commandType':_0x3c2357(0x4fe,0x481),'uniformMap':{'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'particlesSpeed':()=>this[_0x23b272(0x436,0x413)][_0x3c2357(0x407,0x448)]},'fragmentShaderSource':ShaderManager[_0x23b272(0x468,0x486)](),'outputTexture':this[_0x23b272(0x436,0x41d)][_0x3c2357(0x46f,0x4b1)],'preExecute':()=>{function _0x189f60(_0x56146b,_0x3f3a43){return _0x3c2357(_0x3f3a43,_0x56146b- -0x40);}function _0x5d7ab8(_0x4ff8c5,_0x59d8ec){return _0x3c2357(_0x59d8ec,_0x4ff8c5- -0x113);}this['primitives'][_0x189f60(0x47b,0x4fc)][_0x5d7ab8(0x34d,0x2d2)]&&(this['primitives']['updatePosition']['commandToExecute'][_0x5d7ab8(0x338,0x353)]=this['particlesTextures'][_0x5d7ab8(0x39e,0x32c)]);},'isDynamic':()=>this['options'][_0x23b272(0x51e,0x5aa)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this[_0x23b272(0x436,0x411)]['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this[_0x3c2357(0x46c,0x3e5)][_0x23b272(0x505,0x51f)],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds'][_0x23b272(0x44f,0x473)],this[_0x23b272(0x545,0x4c6)]['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x23b272(0x545,0x522)]['bounds'][_0x23b272(0x4ed,0x570)],this['windData'][_0x3c2357(0x413,0x40a)][_0x3c2357(0x48d,0x4bf)]),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options'][_0x23b272(0x53a,0x53f)],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x5b556d(_0xdefcdf,_0x11e7e2){return _0x23b272(_0x11e7e2- -0x5ec,_0xdefcdf);}function _0x367491(_0x25edde,_0x464355){return _0x3c2357(_0x464355,_0x25edde- -0x348);}this['primitives']['postProcessingPosition']['commandToExecute']&&(this[_0x367491(0x92,0x6)]['postProcessingPosition'][_0x5b556d(-0xd3,-0x112)]['outputTexture']=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this[_0x23b272(0x517,0x54d)]['dynamic']})};}['reCreateWindTextures'](){this[_0x983f22(0x3ba,0x335)]['U'][_0x3d1acb(-0xb3,-0xd0)](),this[_0x3d1acb(-0x3d,-0x86)]['V'][_0x983f22(0x344,0x360)]();function _0x3d1acb(_0x4bd1d0,_0x5480b9){return _0x2adbdd(_0x5480b9,_0x4bd1d0- -0x321);}function _0x983f22(_0x3e3169,_0x4fa203){return _0x2b2a20(_0x3e3169- -0xac,_0x4fa203);}this[_0x983f22(0x3c0,0x3f7)]();}['updateWindData'](_0x329ffa){this['windData']=_0x329ffa;function _0x2e98b3(_0x136083,_0x3f7cde){return _0x2adbdd(_0x136083,_0x3f7cde- -0x181);}this[_0x2e98b3(0x18b,0x164)]();}[_0x2b2a20(0x47c,0x45c)](_0x413f62){const _0x4c859a=_0x413f62['flipY']!==undefined&&_0x413f62['flipY']!==this['options'][_0x1e231b(0x128,0x15f)];this[_0x1cd783(0x24,-0x57)]=deepMerge(_0x413f62,this['options']);function _0x1cd783(_0x5555b2,_0x5118bc){return _0x2b2a20(_0x5118bc- -0x521,_0x5555b2);}function _0x1e231b(_0x381861,_0x472ed0){return _0x2b2a20(_0x381861- -0x3a5,_0x472ed0);}_0x4c859a&&this[_0x1cd783(-0x85,-0xba)]();}[_0x2adbdd(0x240,0x269)](_0x2c0768){const {array:_0x46b01f}=_0x2c0768;let {min:_0x435a9f,max:_0x27c619}=_0x2c0768;const _0x25e85a=new Float32Array(_0x46b01f[_0x1ed7de(-0x298,-0x21f)]);function _0x11175a(_0x1ab911,_0xf2439d){return _0x2adbdd(_0x1ab911,_0xf2439d-0x7d);}function _0x1ed7de(_0x4c7908,_0x19a293){return _0x2b2a20(_0x19a293- -0x64d,_0x4c7908);}_0x435a9f===undefined&&(console[_0x11175a(0x3ef,0x3ad)]('min\x20is\x20undefined,\x20calculate\x20min'),_0x435a9f=Math['min'](..._0x46b01f));_0x27c619===undefined&&(console['warn'](_0x1ed7de(-0x1fd,-0x197)),_0x27c619=Math['max'](..._0x46b01f));const _0x98b602=Math[_0x11175a(0x3e2,0x3b9)](Math['abs'](_0x435a9f),Math['abs'](_0x27c619));for(let _0x3bbc2a=0x0;_0x3bbc2a<_0x46b01f[_0x1ed7de(-0x25a,-0x21f)];_0x3bbc2a++){const _0x1bd473=_0x46b01f[_0x3bbc2a]/_0x98b602;_0x25e85a[_0x3bbc2a]=_0x1bd473;}return _0x25e85a;}['destroy'](){function _0xab47f4(_0x5b7295,_0x7e3d7b){return _0x2b2a20(_0x7e3d7b- -0x49f,_0x5b7295);}Object['values'](this[_0xab47f4(-0x15,-0x39)])['forEach'](_0x3db934=>_0x3db934[_0x5e1e07(0x396,0x345)]());function _0x5e1e07(_0x37beed,_0x326539){return _0x2b2a20(_0x37beed- -0x5a,_0x326539);}Object['values'](this['particlesTextures'])['forEach'](_0x2f521d=>_0x2f521d['destroy']()),Object[_0x5e1e07(0x42e,0x3a2)](this['primitives'])[_0x5e1e07(0x3a6,0x366)](_0x40e441=>_0x40e441['destroy']()),this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x4a5dae,_0x2acd54,_0x9b0a32,_0x2810b1){this[_0x2df4ec(-0x2f9,-0x343)]=_0x4a5dae;function _0x2df4ec(_0x1ffa46,_0x5e2f79){return _0x2b2a20(_0x5e2f79- -0x749,_0x1ffa46);}this['options']=_0x2acd54,this['viewerParameters']=_0x9b0a32;function _0x14e189(_0x3383ae,_0x1bbe9a){return _0x2adbdd(_0x1bbe9a,_0x3383ae- -0x146);}this['computing']=_0x2810b1,(typeof this[_0x2df4ec(-0x20d,-0x27f)][_0x2df4ec(-0x31f,-0x33a)]!=='number'||this['options']['particlesTextureSize']<=0x0)&&(console[_0x2df4ec(-0x223,-0x264)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options']['particlesTextureSize']=0x100),this[_0x2df4ec(-0x399,-0x34f)]=this['createColorTableTexture'](),this['textures']=this['createRenderingTextures'](),this[_0x14e189(0x1e2,0x239)]=this[_0x2df4ec(-0x2c3,-0x2f1)](),this[_0x14e189(0x13f,0x135)]=this['createPrimitives']();}['createRenderingTextures'](){const _0x4c23fb={};_0x4c23fb['context']=this['context'];function _0xf99d1(_0x35ebc8,_0x1bad61){return _0x2b2a20(_0x1bad61- -0x6b1,_0x35ebc8);}_0x4c23fb[_0xf99d1(-0x1f1,-0x23b)]=this[_0xf99d1(-0x312,-0x2ab)]['drawingBufferWidth'],_0x4c23fb['height']=this[_0x3aa40a(-0x270,-0x1f9)]['drawingBufferHeight'],_0x4c23fb[_0xf99d1(-0x2a3,-0x29e)]=PixelFormat[_0xf99d1(-0x229,-0x2b4)],_0x4c23fb['pixelDatatype']=PixelDatatype['UNSIGNED_BYTE'];const _0x3dbfb6=_0x4c23fb,_0x42ace0={};_0x42ace0['context']=this[_0xf99d1(-0x26a,-0x2ab)],_0x42ace0[_0x3aa40a(-0x200,-0x1d4)]=this['context']['drawingBufferWidth'],_0x42ace0['height']=this['context']['drawingBufferHeight'],_0x42ace0['pixelFormat']=PixelFormat['DEPTH_COMPONENT'];function _0x3aa40a(_0x574fa5,_0x5b9176){return _0x2adbdd(_0x5b9176,_0x574fa5- -0x4f4);}_0x42ace0[_0x3aa40a(-0x1f4,-0x1a4)]=PixelDatatype[_0xf99d1(-0x170,-0x1d9)];const _0xb9f97=_0x42ace0;return{'segmentsColor':new Texture(_0x3dbfb6),'segmentsDepth':new Texture(_0xb9f97)};}[_0x2b2a20(0x458,0x44b)](){const _0x4b7ec6={};_0x4b7ec6[_0x532270(0x5b,0xdd)]=this['context'],_0x4b7ec6['colorTextures']=[this['textures']['segmentsColor']],_0x4b7ec6['depthTexture']=this['textures'][_0x532270(0xf1,0x111)];function _0x12ade0(_0x79bf6e,_0xc9703e){return _0x2b2a20(_0xc9703e- -0x39e,_0x79bf6e);}function _0x532270(_0x58cc46,_0x4fa6c6){return _0x2adbdd(_0x58cc46,_0x4fa6c6- -0x1a7);}return{'segments':new Framebuffer(_0x4b7ec6)};}['destoryRenderingFramebuffers'](){function _0x21cf0c(_0x59b379,_0x4871e8){return _0x2b2a20(_0x59b379-0x32,_0x4871e8);}Object['values'](this['framebuffers'])[_0x21cf0c(0x432,0x45e)](_0x5b4bd3=>{_0x5b4bd3['destroy']();});}[_0x2adbdd(0x3cb,0x360)](){const _0x1d142e=new Float32Array(this['options'][_0x428d36(-0x2b1,-0x2bb)][_0x428d36(-0x229,-0x1c9)](_0x3bc4fa=>{function _0x35b284(_0x3e41d,_0x3e2626){return _0x428d36(_0x3e2626-0x16d,_0x3e41d);}const _0x7dcd82=Color$1[_0x35b284(-0xea,-0xfe)](_0x3bc4fa);return[_0x7dcd82['red'],_0x7dcd82['green'],_0x7dcd82['blue'],_0x7dcd82['alpha']];})),_0x17f842={};_0x17f842[_0x1603bc(-0x1c8,-0x1bb)]=TextureMinificationFilter['LINEAR'];function _0x428d36(_0x585d24,_0x331cc4){return _0x2adbdd(_0x331cc4,_0x585d24- -0x55b);}_0x17f842['magnificationFilter']=TextureMagnificationFilter['LINEAR'],_0x17f842['wrapS']=TextureWrap['CLAMP_TO_EDGE'];function _0x1603bc(_0x25bbc2,_0x4f6ceb){return _0x2adbdd(_0x25bbc2,_0x4f6ceb- -0x4ec);}return _0x17f842['wrapT']=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this[_0x428d36(-0x2d7,-0x30d)],'width':this[_0x428d36(-0x213,-0x1d7)][_0x1603bc(-0x1e0,-0x242)]['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x17f842),'source':{'width':this[_0x428d36(-0x213,-0x296)][_0x1603bc(-0x26c,-0x242)][_0x1603bc(-0x27d,-0x240)],'height':0x1,'arrayBufferView':_0x1d142e}});}['createSegmentsGeometry'](){const _0x1c41f2=0x4,_0x2c35fb=this[_0x35c2cc(0x2d9,0x292)]['particlesTextureSize'];let _0x383384=[];for(let _0x1b537b=0x0;_0x1b537b<_0x2c35fb;_0x1b537b++){for(let _0x1de931=0x0;_0x1de931<_0x2c35fb;_0x1de931++){for(let _0x55a123=0x0;_0x55a123<_0x1c41f2;_0x55a123++){_0x383384[_0x35c2cc(0x1ea,0x1e9)](_0x1b537b/_0x2c35fb),_0x383384[_0x4be49e(0x38e,0x357)](_0x1de931/_0x2c35fb);}}}_0x383384=new Float32Array(_0x383384);const _0x3d3461=this[_0x4be49e(0x3a1,0x400)][_0x35c2cc(0x208,0x1d7)]**0x2;let _0x3cae0e=[];for(let _0x111cff=0x0;_0x111cff<_0x3d3461;_0x111cff++){_0x3cae0e['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x3cae0e=new Float32Array(_0x3cae0e);let _0x318ac2=[];for(let _0x19d9ff=0x0,_0x3a05ba=0x0;_0x19d9ff<_0x3d3461;_0x19d9ff++){_0x318ac2[_0x35c2cc(0x15d,0x1e9)](_0x3a05ba+0x0,_0x3a05ba+0x1,_0x3a05ba+0x2,_0x3a05ba+0x2,_0x3a05ba+0x1,_0x3a05ba+0x3),_0x3a05ba+=_0x1c41f2;}_0x318ac2=new Uint32Array(_0x318ac2);const _0x326ff3={};_0x326ff3['componentDatatype']=ComponentDatatype['FLOAT'],_0x326ff3[_0x35c2cc(0x225,0x1ed)]=0x2,_0x326ff3[_0x35c2cc(0x236,0x250)]=_0x383384;const _0xffc039={};_0xffc039[_0x35c2cc(0x28a,0x216)]=ComponentDatatype['FLOAT'],_0xffc039['componentsPerAttribute']=0x3;function _0x35c2cc(_0xc0ecc7,_0x3b03ec){return _0x2b2a20(_0x3b03ec- -0x238,_0xc0ecc7);}function _0x4be49e(_0x1832dc,_0x53bed3){return _0x2b2a20(_0x53bed3- -0xca,_0x1832dc);}_0xffc039[_0x35c2cc(0x228,0x250)]=_0x3cae0e;const _0x26610c=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x326ff3),'normal':new GeometryAttribute(_0xffc039)}),'indices':_0x318ac2});return _0x26610c;}['createRawRenderState'](_0xbfcb68){const _0x110dfa={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0xbfcb68};return Appearance['getDefaultRenderState'](!![],![],_0x110dfa);}[_0x2b2a20(0x4c6,0x49e)](){const _0x4673ba={};_0x4673ba['st']=0x0,_0x4673ba['normal']=0x1;const _0x4cc5ba={};_0x4cc5ba['enabled']=!![];const _0x1e6678={};_0x1e6678[_0xdab0bf(0x27,0x5e)]=!![],_0x1e6678['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x1e6678['blendFuncSource']=WebGLRenderingContext[_0xdab0bf(0x50,-0xb)],_0x1e6678['blendFuncDestination']=WebGLRenderingContext[_0x52f8bb(-0x2d9,-0x267)];const _0x158db9={};_0x158db9[_0x52f8bb(-0x177,-0x1cb)]=undefined;function _0xdab0bf(_0x33413f,_0x3293c6){return _0x2b2a20(_0x3293c6- -0x441,_0x33413f);}_0x158db9[_0x52f8bb(-0x2c3,-0x259)]=_0x4cc5ba,_0x158db9['depthMask']=!![],_0x158db9['blending']=_0x1e6678;function _0x52f8bb(_0x4ec04f,_0xf50a9){return _0x2adbdd(_0x4ec04f,_0xf50a9- -0x526);}const _0x45180d=new CustomPrimitive({'commandType':_0x52f8bb(-0x237,-0x20b),'attributeLocations':_0x4673ba,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0xdab0bf(0x53,0x3)],'uniformMap':{'previousParticlesPosition':()=>this[_0x52f8bb(-0x32d,-0x2b5)][_0x52f8bb(-0x259,-0x2bf)][_0xdab0bf(-0x29,0x52)],'currentParticlesPosition':()=>this[_0x52f8bb(-0x2e5,-0x2b5)]['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this['computing'][_0xdab0bf(-0xb6,-0x58)]['postProcessingPosition'],'particlesSpeed':()=>this['computing']['particlesTextures'][_0x52f8bb(-0x24f,-0x233)],'frameRateAdjustment':()=>this['computing'][_0x52f8bb(-0x158,-0x1d8)],'colorTable':()=>this[_0x52f8bb(-0x251,-0x2ae)],'domain':()=>{function _0x38d29a(_0x379002,_0x541094){return _0xdab0bf(_0x379002,_0x541094-0xd2);}var _0x59d37d,_0x307757;const _0x12f0b8=new Cartesian2(((_0x59d37d=this['options'][_0x38d29a(0x8c,0x77)])===null||_0x59d37d===void 0x0?void 0x0:_0x59d37d['min'])??this['computing']['windData'][_0x38d29a(0xd0,0x110)]['min'],((_0x307757=this['options'][_0x2a838a(0x363,0x32d)])===null||_0x307757===void 0x0?void 0x0:_0x307757[_0x2a838a(0x43b,0x3b9)])??this[_0x38d29a(0x26,0x84)]['windData']['speed']['max']);function _0x2a838a(_0x70eaef,_0x36dfc7){return _0x52f8bb(_0x36dfc7,_0x70eaef-0x625);}return _0x12f0b8;},'displayRange':()=>{function _0x29d867(_0x32ef1c,_0x174c60){return _0x52f8bb(_0x32ef1c,_0x174c60-0x41b);}var _0x1bb936,_0x47b7b9;const _0x4459c4=new Cartesian2(((_0x1bb936=this[_0x29d867(0x2a0,0x23d)]['displayRange'])===null||_0x1bb936===void 0x0?void 0x0:_0x1bb936['min'])??this['computing'][_0x29d867(0x25c,0x26b)][_0x272664(0x40a,0x406)]['min'],((_0x47b7b9=this['options']['displayRange'])===null||_0x47b7b9===void 0x0?void 0x0:_0x47b7b9[_0x29d867(0x289,0x231)])??this[_0x272664(0x37e,0x33a)]['windData']['speed'][_0x29d867(0x2ab,0x231)]);function _0x272664(_0x165af2,_0x5d2044){return _0x52f8bb(_0x5d2044,_0x165af2-0x633);}return _0x4459c4;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this['context'][_0xdab0bf(0xa4,0x66)]/this[_0x52f8bb(-0x30c,-0x2a2)][_0xdab0bf(0x68,0x7c)],'pixelSize':()=>this[_0x52f8bb(-0x22c,-0x296)][_0xdab0bf(0xaa,0xa0)],'lineWidth':()=>{const _0x24ef9b={};_0x24ef9b['min']=0x1,_0x24ef9b['max']=0x2;const _0x491a1b=this[_0xc9c99f(0x296,0x31d)]['lineWidth']||_0x24ef9b;function _0x40697f(_0x9e47e8,_0x34e87a){return _0x52f8bb(_0x9e47e8,_0x34e87a-0x441);}function _0xc9c99f(_0x1ed16d,_0x52a5ea){return _0x52f8bb(_0x52a5ea,_0x1ed16d-0x474);}return new Cartesian2(_0x491a1b[_0xc9c99f(0x29e,0x2b9)],_0x491a1b[_0x40697f(0x207,0x257)]);},'lineLength':()=>{const _0x49527b={};_0x49527b['min']=0x14,_0x49527b['max']=0x64;const _0x38541c=this[_0x36d4c5(0x345,0x330)]['lineLength']||_0x49527b;function _0x4a0148(_0x3b0ba5,_0x2d6ae8){return _0x52f8bb(_0x2d6ae8,_0x3b0ba5-0x1ec);}function _0x36d4c5(_0x5d9251,_0x53c811){return _0xdab0bf(_0x5d9251,_0x53c811-0x2a7);}return new Cartesian2(_0x38541c['min'],_0x38541c[_0x4a0148(0x2,-0x14)]);},'is3D':()=>this['viewerParameters'][_0x52f8bb(-0x306,-0x2a4)]===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures']['segmentsDepth']},'vertexShaderSource':ShaderManager[_0xdab0bf(-0x54,-0x25)](),'fragmentShaderSource':ShaderManager[_0x52f8bb(-0x21b,-0x1d2)](),'rawRenderState':this[_0xdab0bf(-0x92,-0x4d)](_0x158db9)}),_0x196246={};return _0x196246[_0xdab0bf(0xf1,0x8a)]=_0x45180d,_0x196246;}[_0x2adbdd(0x353,0x36c)](){const _0x81d4cb=this[_0x280183(-0x185,-0x18c)]();this['primitives']['segments']['geometry']=_0x81d4cb;const _0x2c5a6b={};_0x2c5a6b['context']=this['context'];function _0x280183(_0x2cd79f,_0x39e0a3){return _0x2adbdd(_0x2cd79f,_0x39e0a3- -0x475);}_0x2c5a6b['geometry']=_0x81d4cb,_0x2c5a6b[_0x2a1278(-0xa0,-0x10c)]=this['primitives']['segments']['attributeLocations'],_0x2c5a6b[_0x2a1278(-0x12c,-0x14c)]=BufferUsage[_0x280183(-0x156,-0x14e)];function _0x2a1278(_0x348564,_0x2db15f){return _0x2adbdd(_0x2db15f,_0x348564- -0x401);}const _0x15255d=VertexArray['fromGeometry'](_0x2c5a6b);this['primitives'][_0x280183(-0x110,-0x12c)][_0x280183(-0x1eb,-0x16a)]&&(this['primitives'][_0x280183(-0x174,-0x12c)]['commandToExecute']['vertexArray']=_0x15255d);}[_0x2b2a20(0x496,0x41b)](){function _0x2c7238(_0x4f6639,_0x571bb2){return _0x2adbdd(_0x571bb2,_0x4f6639- -0x68);}function _0x1d701b(_0x1b0745,_0x185e59){return _0x2b2a20(_0x185e59- -0x668,_0x1b0745);}this[_0x1d701b(-0x27d,-0x26e)]['destroy'](),this[_0x2c7238(0x210,0x228)]=this[_0x1d701b(-0x1f5,-0x186)]();}['updateOptions'](_0x3b9f8f){function _0x57b301(_0x538d4b,_0x119b22){return _0x2b2a20(_0x119b22- -0x32a,_0x538d4b);}function _0x1d7804(_0x22b4ed,_0x3cbb35){return _0x2b2a20(_0x3cbb35-0x7b,_0x22b4ed);}const _0x38471a=_0x3b9f8f['colors']&&JSON['stringify'](_0x3b9f8f['colors'])!==JSON['stringify'](this['options']['colors']);this[_0x57b301(0x1a9,0x1a0)]=deepMerge(_0x3b9f8f,this[_0x57b301(0x19f,0x1a0)]),_0x38471a&&this['onColorTableChange']();}['destroy'](){Object['values'](this['framebuffers'])[_0x34face(0x4d7,0x456)](_0x3f6f79=>{function _0x585834(_0x5989c8,_0x45c281){return _0x34face(_0x45c281,_0x5989c8- -0x5c2);}_0x3f6f79[_0x585834(-0x17c,-0x10d)]();}),Object['values'](this['primitives'])['forEach'](_0x42e0ea=>{_0x42e0ea['destroy']();});function _0x34face(_0xd699ba,_0x3b1a1b){return _0x2b2a20(_0x3b1a1b-0x56,_0xd699ba);}this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x5e0c35,_0x2ce3e8,_0x3d80de,_0x56f7f4,_0xe6d915){function _0x3c44fe(_0x53ad47,_0xa0a037){return _0x2adbdd(_0xa0a037,_0x53ad47- -0x3a9);}this['context']=_0x5e0c35,this[_0x3c44fe(-0x61,-0x8d)]=_0x3d80de,this['viewerParameters']=_0x56f7f4;function _0x5d43c6(_0x113119,_0x563107){return _0x2adbdd(_0x113119,_0x563107-0xaf);}this['computing']=new WindParticlesComputing(_0x5e0c35,_0x2ce3e8,_0x3d80de,_0x56f7f4,_0xe6d915),this[_0x5d43c6(0x3d0,0x3fb)]=new WindParticlesRendering(_0x5e0c35,_0x3d80de,_0x56f7f4,this['computing']),this['clearFramebuffers']();}['getPrimitives'](){const _0x22cf88=[this['computing']['primitives']['calculateSpeed'],this['computing']['primitives']['updatePosition'],this['computing']['primitives'][_0x1474e4(0x4e8,0x563)],this['rendering'][_0x52b3e2(0x50,0x77)]['segments']];function _0x52b3e2(_0x3db285,_0x56eca1){return _0x2b2a20(_0x3db285- -0x3b7,_0x56eca1);}function _0x1474e4(_0xaa1948,_0x437f96){return _0x2b2a20(_0xaa1948-0x78,_0x437f96);}return _0x22cf88;}[_0x2adbdd(0x336,0x2bb)](){function _0xa05474(_0x1a7ca6,_0x2fbf3a){return _0x2adbdd(_0x1a7ca6,_0x2fbf3a- -0x485);}function _0x45034d(_0x55d7d8,_0x424c62){return _0x2adbdd(_0x55d7d8,_0x424c62-0x167);}const _0x63360a=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0xa05474(-0xfc,-0x163)]});Object[_0xa05474(-0x1a2,-0x140)](this['rendering']['framebuffers'])[_0x45034d(0x435,0x3e5)](_0x23afc6=>{function _0x464d05(_0x4bce76,_0x56024a){return _0xa05474(_0x56024a,_0x4bce76-0x121);}function _0x28aecd(_0x415743,_0x408d81){return _0x45034d(_0x415743,_0x408d81- -0x39f);}_0x63360a['framebuffer']=this['rendering'][_0x464d05(-0x3c,-0x3e)][_0x23afc6],_0x63360a[_0x28aecd(0xa5,0x33)](this[_0x464d05(-0xe0,-0x71)]);});}['changeOptions'](_0x33cb3a){let _0x56e460=![];function _0x4e198d(_0x161066,_0x4db533){return _0x2b2a20(_0x4db533- -0xc8,_0x161066);}_0x33cb3a[_0x4e198d(0x380,0x347)]&&this[_0x3a980d(0x308,0x337)]['particlesTextureSize']!==_0x33cb3a['particlesTextureSize']&&(_0x56e460=!![]);const _0x571679=deepMerge(_0x33cb3a,this['options']);if(_0x571679[_0x3a980d(0x2d1,0x27c)]<0x1)throw new Error(_0x4e198d(0x49a,0x42b));function _0x3a980d(_0x413a42,_0x13a76e){return _0x2adbdd(_0x413a42,_0x13a76e- -0x11);}this[_0x3a980d(0x304,0x337)]=_0x571679,this['rendering'][_0x4e198d(0x3ac,0x3b4)](_0x33cb3a),this[_0x4e198d(0x330,0x32b)]['updateOptions'](_0x33cb3a),_0x56e460&&(this[_0x3a980d(0x2bc,0x260)]['destroyParticlesTextures'](),this['computing'][_0x3a980d(0x3b2,0x32e)](),this['rendering'][_0x3a980d(0x33f,0x35b)]());}['applyViewerParameters'](_0x596624){function _0x4750db(_0x103bce,_0x5bdd29){return _0x2adbdd(_0x5bdd29,_0x103bce- -0x532);}function _0x3676d2(_0x1f3e15,_0x34372d){return _0x2adbdd(_0x34372d,_0x1f3e15- -0x4d6);}this[_0x4750db(-0x2a2,-0x264)]=_0x596624,this['computing'][_0x3676d2(-0x246,-0x1f3)]=_0x596624,this['rendering']['viewerParameters']=_0x596624;}[_0x2adbdd(0x29c,0x26e)](){this['computing']['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace[_0x2b2a20(0x47a,0x502)][_0x2adbdd(0x258,0x2b0)],_0x57c084={};function _0x2adbdd(_0x17bfbc,_0x50dde4){return _0x44fb(_0x50dde4-0x1e9,_0x17bfbc);}_0x57c084[_0x2b2a20(0x4d2,0x44d)]=0x1,_0x57c084['max']=0x2;const _0x574fcf={};_0x574fcf[_0x2adbdd(0x31c,0x350)]=0x14,_0x574fcf['max']=0x64;const _0x23b4da={};function _0x44fb(_0x4c6abd,_0x509e99){const _0x47e08d=_0x47e0();return _0x44fb=function(_0x44fbb0,_0x2949d7){_0x44fbb0=_0x44fbb0-0x78;let _0x3107b0=_0x47e08d[_0x44fbb0];return _0x3107b0;},_0x44fb(_0x4c6abd,_0x509e99);}_0x23b4da[_0x2b2a20(0x40f,0x3bd)]=0x64,_0x23b4da[_0x2b2a20(0x4d3,0x4d7)]=0x0,_0x23b4da[_0x2b2a20(0x3ff,0x470)]=_0x57c084,_0x23b4da[_0x2b2a20(0x439,0x45d)]=_0x574fcf,_0x23b4da['speedFactor']=0x1,_0x23b4da[_0x2adbdd(0x2e1,0x36b)]=0.003,_0x23b4da[_0x2adbdd(0x2b6,0x319)]=0.001,_0x23b4da[_0x2adbdd(0x31d,0x2aa)]=['rgb(206,255,255)'],_0x23b4da['flipY']=![],_0x23b4da['dynamic']=!![];const DEF_OPTIONS=_0x23b4da;class WindLayer extends BaseLayer$1{constructor(_0x22aaeb={}){_0x22aaeb={...DEF_OPTIONS,..._0x22aaeb},super(_0x22aaeb);function _0x2260d5(_0x57b68e,_0x33767f){return _0x2adbdd(_0x57b68e,_0x33767f- -0x374);}this[_0x2260d5(-0xe4,-0x78)](_0x22aaeb,_0x22aaeb);}get[_0x2b2a20(0x47a,0x3f0)](){function _0x130fe2(_0x523990,_0x1f1182){return _0x2b2a20(_0x1f1182- -0x436,_0x523990);}return this[_0x130fe2(-0xa,-0x2f)];}get['data'](){function _0x232287(_0x2e369a,_0xb14ed1){return _0x2b2a20(_0x2e369a- -0x42d,_0xb14ed1);}return this[_0x232287(0x9d,0x36)]['data'];}set[_0x2adbdd(0x383,0x35e)](_0x165442){this['options']['data']=_0x165442,this['setData'](_0x165442);}get['colors'](){return this['options']['colors'];}set['colors'](_0x48d45a){function _0xa9a54a(_0x5a81b2,_0x2df626){return _0x2b2a20(_0x5a81b2- -0x714,_0x2df626);}this[_0x2b4fd2(-0x15c,-0x194)][_0xa9a54a(-0x2e8,-0x27a)]=_0x48d45a;const _0x5a44ea={};function _0x2b4fd2(_0xe7a2d8,_0x3b5566){return _0x2b2a20(_0x3b5566- -0x65e,_0xe7a2d8);}_0x5a44ea['colors']=_0x48d45a,this['_setOptionsHook'](this['options'],_0x5a44ea);}[_0x2b2a20(0x48a,0x500)](_0x16405c){function _0x15cea0(_0x1f560d,_0x4fa0fe){return _0x2adbdd(_0x1f560d,_0x4fa0fe-0x65);}_0x16405c?this['_addedHook']():this[_0x15cea0(0x317,0x368)]();}['_mountedHook'](){}['_addedHook'](){this['scene']=this['_map']['scene'];function _0x540ede(_0x200023,_0xd3e36b){return _0x2adbdd(_0xd3e36b,_0x200023- -0x47a);}this['camera']=this[_0x540ede(-0x17c,-0x10c)]['camera'];this[_0x540ede(-0x132,-0x147)]['data']&&this['setData'](this['options'][_0x540ede(-0x11c,-0x130)]);if(!this['windData']||!this['show'])return;this['viewerParameters']={'lonRange':new Cesium$1[(_0x540ede(-0x13c,-0x109))](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x540ede(-0x1dd,-0x220)]['mode']},this['updateViewerParameters']();function _0x5b6c9d(_0x34f107,_0x284db0){return _0x2b2a20(_0x284db0- -0x63,_0x34f107);}this['particleSystem']=new WindParticleSystem(this[_0x5b6c9d(0x40d,0x3bc)][_0x540ede(-0x1f6,-0x1ba)],this[_0x540ede(-0x104,-0x185)],this['options'],this[_0x540ede(-0x1ea,-0x23c)],this[_0x540ede(-0x1dd,-0x19a)]),this['primitives']=this[_0x5b6c9d(0x42a,0x3d9)]['getPrimitives'](),this[_0x540ede(-0x1f5,-0x213)]['forEach'](_0xe137d7=>{this['scene']['primitives']['add'](_0xe137d7);}),this['camera'][_0x5b6c9d(0x4a8,0x42f)]=0.01,this['camera']['changed'][_0x540ede(-0x13d,-0xb9)](this[_0x5b6c9d(0x4ba,0x48c)]['bind'](this)),this['scene']['morphComplete']['addEventListener'](this['updateViewerParameters'][_0x5b6c9d(0x404,0x48e)](this)),window['addEventListener']('resize',this['updateViewerParameters']['bind'](this));}['_removedHook'](){function _0x20e264(_0x4bd769,_0x26b43b){return _0x2b2a20(_0x4bd769- -0x5c,_0x26b43b);}function _0x381afb(_0x1c7930,_0xe5fd45){return _0x2adbdd(_0x1c7930,_0xe5fd45- -0xad);}this['camera']['changed']['removeEventListener'](this['updateViewerParameters']['bind'](this)),this[_0x20e264(0x3c3,0x356)][_0x381afb(0x316,0x296)]['removeEventListener'](this['updateViewerParameters']['bind'](this)),window[_0x381afb(0x313,0x28d)](_0x381afb(0x1b7,0x1df),this['updateViewerParameters']['bind'](this)),this[_0x20e264(0x3ab,0x3b4)]&&(this[_0x381afb(0x233,0x1d8)]['forEach'](_0x46f720=>{function _0x1abb61(_0x191fa5,_0x458adb){return _0x20e264(_0x458adb- -0x4a9,_0x191fa5);}this[_0x1abb61(-0x102,-0xe6)]['primitives']['remove'](_0x46f720);}),delete this[_0x20e264(0x3ab,0x387)]),this['particleSystem']&&(this['particleSystem']['destroy'](),delete this['particleSystem']);}[_0x2b2a20(0x4da,0x4f1)](_0x4095b1,_0x429750){function _0x396787(_0x1cacba,_0x4fffb5){return _0x2b2a20(_0x1cacba- -0x27f,_0x4fffb5);}this['windData']=this['processWindData'](_0x4095b1);function _0x145e35(_0x360f84,_0x1fdbba){return _0x2b2a20(_0x1fdbba- -0x6c4,_0x360f84);}if(_0x429750){this['_removedHook'](),this[_0x145e35(-0x273,-0x25c)]();return;}this['particleSystem']?(this['particleSystem'][_0x396787(0x174,0x190)][_0x145e35(-0x295,-0x29b)](this[_0x145e35(-0x202,-0x1cc)]),this['scene']['requestRender']()):this[_0x145e35(-0x2ae,-0x25c)]();}['_setOptionsHook'](_0x3d272e,_0x5b65de){function _0x3f1cf9(_0x8c2e12,_0x5e0f4c){return _0x2adbdd(_0x5e0f4c,_0x8c2e12-0x8);}function _0x35ae01(_0x237eb2,_0x150bf6){return _0x2adbdd(_0x237eb2,_0x150bf6-0x32);}this[_0x35ae01(0x34e,0x2ec)]&&(this['particleSystem'][_0x35ae01(0x3ab,0x324)](_0x5b65de),this['scene']['requestRender']());}['processWindData'](_0x2b701a){var _0x1d4a74,_0x3eefc7;const _0x2c9130={..._0x2b701a},_0x15bbf0=_0x2c9130;function _0x824188(_0x506334,_0x1cb2dc){return _0x2adbdd(_0x1cb2dc,_0x506334-0x72);}!_0x15bbf0['height']&&_0x15bbf0['rows']&&(_0x15bbf0['height']=_0x15bbf0['rows']);function _0x208c95(_0x16ac29,_0xa2029){return _0x2b2a20(_0x16ac29- -0x309,_0xa2029);}!_0x15bbf0['width']&&_0x15bbf0['cols']&&(_0x15bbf0['width']=_0x15bbf0['cols']);!_0x15bbf0['bounds']&&(_0x15bbf0[_0x824188(0x327,0x33a)]={'west':_0x15bbf0[_0x208c95(0x117,0xff)],'south':_0x15bbf0['ymin'],'east':_0x15bbf0[_0x824188(0x39c,0x3cf)],'north':_0x15bbf0['ymax']});if(!_0x15bbf0['u']){const _0x44a6ef={};_0x44a6ef[_0x208c95(0x170,0x138)]=_0x2b701a[_0x824188(0x308,0x2cb)],_0x44a6ef[_0x208c95(0x1c9,0x19b)]=_0x2b701a['umin'],_0x44a6ef['max']=_0x2b701a[_0x824188(0x381,0x309)],_0x15bbf0['u']=_0x44a6ef;}if(!_0x15bbf0['v']){const _0x4a7f42={};_0x4a7f42['array']=_0x2b701a['vdata'],_0x4a7f42['min']=_0x2b701a['vmin'],_0x4a7f42['max']=_0x2b701a['vmax'],_0x15bbf0['v']=_0x4a7f42;}if(((_0x1d4a74=_0x15bbf0['speed'])===null||_0x1d4a74===void 0x0?void 0x0:_0x1d4a74['min'])===undefined||((_0x3eefc7=_0x15bbf0['speed'])===null||_0x3eefc7===void 0x0?void 0x0:_0x3eefc7['max'])===undefined||_0x15bbf0['speed']['array']===undefined){const _0xfb505d={'array':new Float32Array(_0x15bbf0['u']['array'][_0x824188(0x31e,0x2a0)]),'min':Number['MAX_VALUE'],'max':Number[_0x208c95(0x107,0x10c)]};for(let _0x4446ac=0x0;_0x4446ac<_0x15bbf0['u'][_0x824188(0x369,0x3c1)]['length'];_0x4446ac++){_0xfb505d['array'][_0x4446ac]=Math[_0x824188(0x3e6,0x391)](_0x15bbf0['u'][_0x208c95(0x170,0x141)][_0x4446ac]*_0x15bbf0['u']['array'][_0x4446ac]+_0x15bbf0['v']['array'][_0x4446ac]*_0x15bbf0['v']['array'][_0x4446ac]),_0xfb505d['array'][_0x4446ac]!==0x0&&(_0xfb505d[_0x824188(0x3c2,0x3b2)]=Math[_0x824188(0x3c2,0x432)](_0xfb505d['min'],_0xfb505d[_0x208c95(0x170,0xf7)][_0x4446ac]),_0xfb505d['max']=Math['max'](_0xfb505d['max'],_0xfb505d[_0x208c95(0x170,0xff)][_0x4446ac]));}_0x15bbf0['speed']=_0xfb505d;}return _0x15bbf0;}[_0x2adbdd(0x365,0x36d)](){var _0x57becf;const _0x37b4f5=this[_0xb37c34(-0x1ae,-0x1b4)];if(!_0x37b4f5)return;function _0x59c891(_0x13a6bd,_0x4e4007){return _0x2adbdd(_0x13a6bd,_0x4e4007- -0x3cf);}const _0x2e4ba0=_0x37b4f5[_0x59c891(-0x84,-0xa2)],_0x112dca={};_0x112dca['x']=0x0,_0x112dca['y']=0x0;function _0xb37c34(_0x572109,_0x21d3cd){return _0x2adbdd(_0x21d3cd,_0x572109- -0x44b);}const _0x336dee={};_0x336dee['x']=0x0,_0x336dee['y']=_0x2e4ba0[_0x59c891(-0x148,-0x11d)];const _0x28c387={};_0x28c387['x']=_0x2e4ba0[_0x59c891(-0x10f,-0xcd)],_0x28c387['y']=0x0;const _0x5cd8e5={};_0x5cd8e5['x']=_0x2e4ba0[_0x59c891(-0x137,-0xcd)],_0x5cd8e5['y']=_0x2e4ba0['clientHeight'];const _0x1f95a5=[_0x112dca,_0x336dee,_0x28c387,_0x5cd8e5];let _0x3e9602=0xb4,_0x1dcb81=-0xb4,_0x3bf263=0x5a,_0x1baf26=-0x5a,_0x363795=![];for(const _0x4f069f of _0x1f95a5){const _0x3960dd=_0x37b4f5[_0xb37c34(-0x16d,-0xf3)]['pickEllipsoid'](new Cesium$1[(_0x59c891(-0xe8,-0x91))](_0x4f069f['x'],_0x4f069f['y']),_0x37b4f5['globe']['ellipsoid']);if(!_0x3960dd){_0x363795=!![];break;}const _0x2707b0=_0x37b4f5['globe']['ellipsoid']['cartesianToCartographic'](_0x3960dd),_0x55510f=Cesium$1[_0x59c891(-0x125,-0x14e)]['toDegrees'](_0x2707b0['longitude']),_0x42e55e=Cesium$1['Math']['toDegrees'](_0x2707b0[_0x59c891(-0xfa,-0xed)]);_0x3e9602=Math['min'](_0x3e9602,_0x55510f),_0x1dcb81=Math['max'](_0x1dcb81,_0x55510f),_0x3bf263=Math['min'](_0x3bf263,_0x42e55e),_0x1baf26=Math['max'](_0x1baf26,_0x42e55e);}if(!_0x363795){const _0x41cbd9=new Cesium$1[(_0xb37c34(-0x10d,-0xeb))](Math['max'](this[_0xb37c34(-0xd5,-0x13f)][_0xb37c34(-0x196,-0x12f)]['west'],_0x3e9602),Math[_0xb37c34(-0xfb,-0x85)](this['windData'][_0x59c891(-0xd2,-0x11a)]['east'],_0x1dcb81)),_0x218bb2=new Cesium$1[(_0xb37c34(-0x10d,-0x136))](Math['max'](this[_0x59c891(-0x97,-0x59)][_0xb37c34(-0x196,-0x16b)]['south'],_0x3bf263),Math[_0xb37c34(-0xfb,-0x167)](this[_0x59c891(-0xa1,-0x59)]['bounds']['north'],_0x1baf26)),_0x262748=(_0x41cbd9['y']-_0x41cbd9['x'])*0.05,_0x2075f2=(_0x218bb2['y']-_0x218bb2['x'])*0.05;_0x41cbd9['x']=Math['max'](this['windData']['bounds'][_0x59c891(-0x110,-0x14f)],_0x41cbd9['x']-_0x262748),_0x41cbd9['y']=Math['min'](this['windData']['bounds']['east'],_0x41cbd9['y']+_0x262748),_0x218bb2['x']=Math['max'](this[_0xb37c34(-0xd5,-0xdc)]['bounds'][_0x59c891(-0x103,-0xb1)],_0x218bb2['x']-_0x2075f2),_0x218bb2['y']=Math['min'](this['windData']['bounds']['north'],_0x218bb2['y']+_0x2075f2),this['viewerParameters']['lonRange']=_0x41cbd9,this[_0xb37c34(-0x1bb,-0x22e)]['latRange']=_0x218bb2;const _0x353a19=this['windData']['bounds'][_0x59c891(-0xbf,-0x78)]-this[_0x59c891(-0x3c,-0x59)][_0x59c891(-0x155,-0x11a)]['west'],_0x3dbf56=this[_0x59c891(-0xd8,-0x59)]['bounds']['north']-this[_0x59c891(-0x72,-0x59)][_0xb37c34(-0x196,-0x1fb)]['south'],_0x2965dc=(_0x41cbd9['y']-_0x41cbd9['x'])/_0x353a19,_0x21d3da=(_0x218bb2['y']-_0x218bb2['x'])/_0x3dbf56,_0x295ccb=Math[_0xb37c34(-0xfb,-0x12d)](_0x2965dc,_0x21d3da),_0x42b83f=0x3e8*_0x295ccb;_0x42b83f>0x0&&(this['viewerParameters']['pixelSize']=Math['max'](0x0,Math['min'](0x3e8,_0x42b83f)));}this[_0x59c891(-0x12a,-0x13f)]['sceneMode']=this[_0x59c891(-0x15a,-0x132)][_0x59c891(-0x119,-0x15b)],(_0x57becf=this['particleSystem'])===null||_0x57becf===void 0x0||_0x57becf[_0xb37c34(-0x146,-0x1b3)](this[_0x59c891(-0x188,-0x13f)]);}['getDataAtLonLat'](_0x13a3d5,_0x2fd187){function _0x21e5cd(_0x228bd3,_0x2e668){return _0x2b2a20(_0x2e668- -0x3c3,_0x228bd3);}const {bounds:_0x44be2d,width:_0x764f78,height:_0x3f9375,u:_0x5965e2,v:_0x45112a,speed:_0x15f797}=this[_0x4a1ea3(0x1a3,0x11a)],{flipY:_0x3d9a9b}=this['options'];if(_0x13a3d5<_0x44be2d['west']||_0x13a3d5>_0x44be2d[_0x21e5cd(0xe2,0x116)]||_0x2fd187<_0x44be2d[_0x4a1ea3(0x14b,0x124)]||_0x2fd187>_0x44be2d[_0x4a1ea3(0x197,0x116)])return null;const _0x3b4a62=(_0x13a3d5-_0x44be2d['west'])/(_0x44be2d['east']-_0x44be2d['west'])*(_0x764f78-0x1);let _0x772ee8=(_0x2fd187-_0x44be2d[_0x21e5cd(0xc0,0xdd)])/(_0x44be2d[_0x21e5cd(0xf0,0x129)]-_0x44be2d['south'])*(_0x3f9375-0x1);_0x3d9a9b&&(_0x772ee8=_0x3f9375-0x1-_0x772ee8);const _0x5d1e2f=Math[_0x21e5cd(0x119,0x109)](_0x3b4a62),_0x10cdc0=Math['floor'](_0x772ee8),_0x54beb8=Math['floor'](_0x3b4a62),_0x3e2844=Math['min'](_0x54beb8+0x1,_0x764f78-0x1),_0x160067=Math['floor'](_0x772ee8),_0x225e54=Math[_0x4a1ea3(0x17d,0x187)](_0x160067+0x1,_0x3f9375-0x1),_0x586e1b=_0x3b4a62-_0x54beb8,_0x563f47=_0x772ee8-_0x160067,_0x3d38cf=_0x10cdc0*_0x764f78+_0x5d1e2f,_0x1110d8=_0x160067*_0x764f78+_0x54beb8,_0x3c0241=_0x160067*_0x764f78+_0x3e2844,_0x25a59c=_0x225e54*_0x764f78+_0x54beb8,_0x528b56=_0x225e54*_0x764f78+_0x3e2844,_0x1da1a4=_0x5965e2['array'][_0x1110d8];function _0x4a1ea3(_0x439abf,_0x4e5538){return _0x2b2a20(_0x439abf- -0x355,_0x4e5538);}const _0x3a861e=_0x5965e2[_0x21e5cd(0x11f,0xb6)][_0x3c0241],_0x2d0ff1=_0x5965e2['array'][_0x25a59c],_0x4e64e6=_0x5965e2['array'][_0x528b56],_0x344857=(0x1-_0x586e1b)*(0x1-_0x563f47)*_0x1da1a4+_0x586e1b*(0x1-_0x563f47)*_0x3a861e+(0x1-_0x586e1b)*_0x563f47*_0x2d0ff1+_0x586e1b*_0x563f47*_0x4e64e6,_0x50e044=_0x45112a['array'][_0x1110d8],_0x52ca4a=_0x45112a[_0x21e5cd(0x12e,0xb6)][_0x3c0241],_0x240943=_0x45112a[_0x21e5cd(0x3c,0xb6)][_0x25a59c],_0x5b1158=_0x45112a[_0x4a1ea3(0x124,0xcd)][_0x528b56],_0x299c6e=(0x1-_0x586e1b)*(0x1-_0x563f47)*_0x50e044+_0x586e1b*(0x1-_0x563f47)*_0x52ca4a+(0x1-_0x586e1b)*_0x563f47*_0x240943+_0x586e1b*_0x563f47*_0x5b1158,_0x307297=Math[_0x21e5cd(0x198,0x133)](_0x344857*_0x344857+_0x299c6e*_0x299c6e),_0xec6685={};_0xec6685['u']=_0x5965e2['array'][_0x3d38cf],_0xec6685['v']=_0x45112a[_0x4a1ea3(0x124,0xe9)][_0x3d38cf],_0xec6685['speed']=_0x15f797[_0x4a1ea3(0x124,0xb1)][_0x3d38cf];const _0x3153e1={};_0x3153e1['u']=_0x344857,_0x3153e1['v']=_0x299c6e,_0x3153e1[_0x21e5cd(0x9d,0xbc)]=_0x307297;const _0x5981ff={};return _0x5981ff[_0x4a1ea3(0x110,0x16d)]=_0xec6685,_0x5981ff[_0x4a1ea3(0x11a,0x114)]=_0x3153e1,_0x5981ff;}}mars3d__namespace['LayerUtil'][_0x2b2a20(0x42b,0x4a5)]('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this[_0x49abbb(-0x20f,-0x225)]=null,this[_0x4d2d6a(0x2bf,0x24b)]=null,this['tlat']=null;function _0x4d2d6a(_0x55f675,_0x51ebe8){return _0x2adbdd(_0x55f675,_0x51ebe8- -0xee);}this['age']=null;function _0x49abbb(_0x4670ab,_0x3dda8f){return _0x2adbdd(_0x4670ab,_0x3dda8f- -0x4bd);}this['speed']=null;}[_0x2adbdd(0x2bb,0x26e)](){for(const _0x3ceed2 in this){delete this[_0x3ceed2];}}}function _0x47e0(){const _0x267065=['18VEtAjz','fill','camera','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','FLOAT','toRadians','latitude','original','windTextures','reCreateWindTextures','_addedHook','steps','frameRate','createSegmentsGeometry','createWindTextures','now','commandType','interpolated','postProcessingPosition','value','fromCssColorString','off','changeOptions','particlesSpeed','width','getCalculateSpeedShader','outputTexture','array','layer','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','updateOptions','SceneMode','_setOptionsHook','speed','_map','random','pixelDatatype','redraw','clientWidth','_removedHook','#ffffff','applyViewerParameters','values','toGridXY','_showHook','getU','update','commandToExecute','show','_onMapWhellEvent','requestAnimationFrame','umax','percentageChanged','previousParticlesPosition','clear','vertexShaderSource','onColorTableChange','worker','atan2','shaderProgram','ColorRamp','dropRateBump','isDynamic','Draw','age','enabled','south','visible','fromGeometry','all','OPAQUE','setDate','4849710BAZIkI','drawingBufferWidth','mouseMove','STATIC_DRAW','framebuffers','sources','xmax','vertexArray','Compute','canvas','isInExtent','isDestroy','warn','minificationFilter','flatMap','_updateIng','max\x20is\x20undefined,\x20calculate\x20max','SCENE3D','lonRange','lastFramesPerSecond','_onMouseMoveEvent','tlng','removeEventListener','drawingBufferHeight','max','addEventListener','Cartesian2','createParticlesTextures','init','_calc_speedRate','toWindowCoordinates','morphComplete','createPrimitives','keys','getPostProcessingPositionShader','positionWC','options','segments','floor','flipY','rendering','particles','frameRateAdjustment','dynamic','min','fixedHeight','CanvasWindField','commandList','getSegmentDrawFragmentShader','postMessage','UNSIGNED_INT','east','setData','getV','initWorker','viewport','nextParticlesPosition','modelMatrix','data','pixelSize','createColorTableTexture','attributeLocations','7370SGXJbm','error','object','frameRateMonitor','updatePosition','__esModule','1994690nKCBxK','fragmentShaderSource','north','dropRate','onParticlesTextureSizeChange','updateViewerParameters','height','bind','_calcUV','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','particlesNumber','moveTo','sqrt','onmessage','windData','canvasContext','talt','windField','_pointerEvents','color','domain','getSpeed','createCommand','particlesTextures','62BWQMBx','processWindData','cols','execute','7DXosdo','tlat','destroy','canvasWidth','getUVByXY','computing','createRawRenderState','Rectangle','mode','alt','0px','refreshTimer','colorTable','setOptions','ymin','RGBA','getParticles','lineWidth','forEach','_maxAge','west','Math','sceneMode','currentParticlesPosition','context','primitives','EventType','LINEAR','481195voXIYG','_bilinearInterpolation','canvasHeight','grid','resize','particlesTextureSize','MIN_VALUE','abs','viewerParameters','pixelFormat','_updateIng2','uniformMap','getOwnPropertyDescriptor','cos','udata','style','lat','getUpdatePositionShader','getSegmentDrawVertexShader','lng','Cartesian3','scene','xmin','push','autoClear','5134192fpESHl','getUVByPoint','componentsPerAttribute','speedRate','unbindEvent','reverse','updateWindData','slice','register','colors','wheel','length','9208518rtGZwM','globalCompositeOperation','top','BaseLayer','rawRenderState','clientHeight','clearCommand','SRC_ALPHA','bounds','_onMouseUpEvent','lineLength','segmentsDepth','type','particleSystem','clearFramebuffers','_tomap','owner','left','ONE_MINUS_SRC_ALPHA','rows','stroke','TRIANGLES','geometry','get','getDirection','lighter','maxAge','_animateFrame','mouse_move','lineTo','34564naxMdh','componentDatatype','depthTest','NEAREST','frameTime','getContext','mars3d-canvasWind','_canrefresh','3884okdsPI','_onMouseDownEvent','bufferUsage','createRenderingFramebuffers','pointerEvents','CanvasWindLayer','none','_speedRate','ymax'];_0x47e0=function(){return _0x267065;};return _0x47e0();}class CanvasWindField{constructor(_0x5ccb08){function _0xf4551e(_0x13b6bf,_0x4554e4){return _0x2b2a20(_0x13b6bf- -0x6d2,_0x4554e4);}this[_0xf4551e(-0x2d7,-0x2d5)](_0x5ccb08);}get[_0x2b2a20(0x426,0x45c)](){return this['_speedRate'];}set[_0x2b2a20(0x426,0x46e)](_0x5952b7){this[_0x144ab9(0x187,0x1f2)]=(0x64-(_0x5952b7>0x63?0x63:_0x5952b7))*0x64;function _0x144ab9(_0x4ec165,_0x538bef){return _0x2adbdd(_0x4ec165,_0x538bef- -0xe8);}function _0x4a20cd(_0x3579c4,_0xb12d47){return _0x2adbdd(_0xb12d47,_0x3579c4- -0x320);}this['_calc_speedRate']=[(this[_0x4a20cd(0xa,-0x23)]-this[_0x4a20cd(-0x82,-0x15)])/this['_speedRate'],(this['ymax']-this['ymin'])/this['_speedRate']];}get[_0x2adbdd(0x285,0x2c7)](){return this['_maxAge'];}set['maxAge'](_0x4571d7){function _0x42ac6c(_0x31b9ed,_0x19679f){return _0x2adbdd(_0x31b9ed,_0x19679f- -0x433);}this[_0x42ac6c(-0x12d,-0x1b4)]=_0x4571d7;}['setOptions'](_0x39219a){this['options']=_0x39219a,this['maxAge']=_0x39219a['maxAge']||0x78,this[_0x19f299(0xa6,0xbc)]=_0x39219a[_0x19f299(0xa6,0xd0)]||0x32;function _0x19f299(_0x2cf45c,_0x5ada89){return _0x2adbdd(_0x5ada89,_0x2cf45c- -0x1fe);}this['particles']=[];const _0x4a97a4=_0x39219a['particlesNumber']||0x1000;function _0xd8192c(_0x28c2ba,_0x1a03f8){return _0x2b2a20(_0x1a03f8- -0x4be,_0x28c2ba);}for(let _0x747ee4=0x0;_0x747ee4<_0x4a97a4;_0x747ee4++){const _0x1caec8=this['_randomParticle'](new CanvasParticle());this[_0xd8192c(0x80,0x11)]['push'](_0x1caec8);}}['setDate'](_0x26ded1){function _0x4c9ab9(_0x3fea18,_0x345e50){return _0x2b2a20(_0x3fea18- -0x3cd,_0x345e50);}function _0x24e72b(_0x5a5995,_0x2b7e65){return _0x2adbdd(_0x5a5995,_0x2b7e65- -0x27c);}this[_0x24e72b(0x73,0x44)]=_0x26ded1['rows'],this[_0x4c9ab9(0x1f,0x54)]=_0x26ded1[_0x4c9ab9(0x1f,0x30)],this['xmin']=_0x26ded1['xmin'],this[_0x4c9ab9(0xdf,0xf7)]=_0x26ded1['xmax'],this[_0x4c9ab9(0x2f,-0x36)]=_0x26ded1['ymin'],this['ymax']=_0x26ded1[_0x4c9ab9(0x90,0xac)],this['grid']=[];const _0x468b0b=_0x26ded1['udata'],_0x105462=_0x26ded1['vdata'];let _0x35f08a=![];_0x468b0b['length']===this[_0x4c9ab9(0x75,-0x14)]&&_0x468b0b[0x0]['length']===this[_0x24e72b(0x48,-0x12)]&&(_0x35f08a=!![]);let _0x29b786=0x0,_0x55f0e4=null,_0xc82664=null;for(let _0x17ace4=0x0;_0x17ace4<this['rows'];_0x17ace4++){_0x55f0e4=[];for(let _0x55eb30=0x0;_0x55eb30<this[_0x4c9ab9(0x1f,-0x12)];_0x55eb30++,_0x29b786++){_0x35f08a?_0xc82664=this['_calcUV'](_0x468b0b[_0x17ace4][_0x55eb30],_0x105462[_0x17ace4][_0x55eb30]):_0xc82664=this[_0x4c9ab9(0x125,0x1ab)](_0x468b0b[_0x29b786],_0x105462[_0x29b786]),_0x55f0e4[_0x4c9ab9(0x54,0x2a)](_0xc82664);}this[_0x4c9ab9(0x40,0xc3)]['push'](_0x55f0e4);}!this['options']['flipY']&&this['grid'][_0x4c9ab9(0x5b,-0x11)]();}[_0x2adbdd(0x317,0x312)](){delete this['rows'],delete this['cols'],delete this['xmin'],delete this[_0x5bdd5c(0x5d,0x29)],delete this[_0x5b0e25(0x218,0x199)];function _0x5bdd5c(_0x755f6d,_0x801900){return _0x2b2a20(_0x755f6d- -0x44f,_0x801900);}function _0x5b0e25(_0x27c1f2,_0x2d495e){return _0x2b2a20(_0x27c1f2- -0x1e4,_0x2d495e);}delete this['ymax'],delete this['grid'],delete this[_0x5b0e25(0x2eb,0x32c)];}[_0x2adbdd(0x311,0x307)](_0x16d390,_0x45b037){const _0x5a951c=(_0x16d390-this['xmin'])/(this[_0x10d4a2(-0x1a7,-0x230)]-this[_0x3a9718(0x2d6,0x261)])*(this['cols']-0x1);function _0x3a9718(_0x2a39d7,_0x16b116){return _0x2b2a20(_0x16b116- -0x1bf,_0x2a39d7);}const _0x1655c2=(this['ymax']-_0x45b037)/(this['ymax']-this['ymin'])*(this[_0x10d4a2(-0x297,-0x29a)]-0x1);function _0x10d4a2(_0x5b6dac,_0x39f809){return _0x2adbdd(_0x5b6dac,_0x39f809- -0x55a);}return[_0x5a951c,_0x1655c2];}[_0x2b2a20(0x3f2,0x3fb)](_0x1229c4,_0x371322){if(_0x1229c4<0x0||_0x1229c4>=this[_0x2d348e(-0x15a,-0x1b8)]||_0x371322>=this['rows'])return[0x0,0x0,0x0];const _0x3f03ae=Math['floor'](_0x1229c4),_0x27ab65=Math[_0x2d348e(-0xfd,-0xd8)](_0x371322);if(_0x3f03ae===_0x1229c4&&_0x27ab65===_0x371322)return this[_0x35c147(-0x30f,-0x2f7)][_0x371322][_0x1229c4];const _0x3dfa9d=_0x3f03ae+0x1;function _0x35c147(_0x5d5b3e,_0x2a4c69){return _0x2b2a20(_0x5d5b3e- -0x71c,_0x2a4c69);}const _0x4325c2=_0x27ab65+0x1,_0x3fbb54=this[_0x2d348e(-0x1ba,-0x1b2)](_0x3f03ae,_0x27ab65),_0x24c787=this['getUVByXY'](_0x3dfa9d,_0x27ab65);function _0x2d348e(_0x243315,_0x4e7e55){return _0x2adbdd(_0x243315,_0x4e7e55- -0x422);}const _0x430772=this['getUVByXY'](_0x3f03ae,_0x4325c2),_0x228783=this['getUVByXY'](_0x3dfa9d,_0x4325c2);let _0x27d8c3=null;try{_0x27d8c3=this[_0x2d348e(-0x1d3,-0x199)](_0x1229c4-_0x3f03ae,_0x371322-_0x27ab65,_0x3fbb54,_0x24c787,_0x430772,_0x228783);}catch(_0x4b95a6){console['log'](_0x1229c4,_0x371322);}return _0x27d8c3;}['_bilinearInterpolation'](_0x4cbd09,_0x98204c,_0x5d5d5a,_0xe4eee4,_0x30b38a,_0x2dc54b){function _0x4790ca(_0x58018f,_0x20fc68){return _0x2adbdd(_0x20fc68,_0x58018f-0xd5);}const _0x705530=0x1-_0x4cbd09,_0x1ed47f=0x1-_0x98204c,_0x476df0=_0x705530*_0x1ed47f,_0x197393=_0x4cbd09*_0x1ed47f,_0x3a09e2=_0x705530*_0x98204c,_0xe824b9=_0x4cbd09*_0x98204c,_0x554ab0=_0x5d5d5a[0x0]*_0x476df0+_0xe4eee4[0x0]*_0x197393+_0x30b38a[0x0]*_0x3a09e2+_0x2dc54b[0x0]*_0xe824b9,_0x5b6bbc=_0x5d5d5a[0x1]*_0x476df0+_0xe4eee4[0x1]*_0x197393+_0x30b38a[0x1]*_0x3a09e2+_0x2dc54b[0x1]*_0xe824b9;return this[_0x4790ca(0x445,0x463)](_0x554ab0,_0x5b6bbc);}['_calcUV'](_0x11fa27,_0x1daebd){function _0x14b218(_0x5b4c31,_0x3cf2c8){return _0x2adbdd(_0x3cf2c8,_0x5b4c31- -0x429);}return[+_0x11fa27,+_0x1daebd,Math[_0x14b218(-0xb5,-0x120)](_0x11fa27*_0x11fa27+_0x1daebd*_0x1daebd)];}[_0x2adbdd(0x2c6,0x2a2)](_0x13f051,_0xc9e87b){function _0x285d57(_0x4a67be,_0x2add4f){return _0x2b2a20(_0x4a67be- -0x8d,_0x2add4f);}if(!this[_0x285d57(0x423,0x46c)](_0x13f051,_0xc9e87b))return null;const _0x4a80b2=this[_0x285d57(0x3fc,0x433)](_0x13f051,_0xc9e87b),_0x7dd7fd=this[_0x20b371(-0xcd,-0xe3)](_0x4a80b2[0x0],_0x4a80b2[0x1]);function _0x20b371(_0x3938c1,_0x425ea8){return _0x2adbdd(_0x3938c1,_0x425ea8- -0x353);}return _0x7dd7fd;}[_0x2b2a20(0x4b0,0x48e)](_0x267b7a,_0x51378c){function _0x318014(_0x1be1f7,_0x34e82d){return _0x2b2a20(_0x1be1f7-0xd,_0x34e82d);}function _0x13e0cc(_0x516525,_0xc3acab){return _0x2b2a20(_0x516525- -0x3db,_0xc3acab);}return _0x267b7a>=this[_0x318014(0x42d,0x3d0)]&&_0x267b7a<=this[_0x13e0cc(0xd1,0x93)]&&_0x51378c>=this[_0x318014(0x409,0x426)]&&_0x51378c<=this['ymax']?!![]:![];}['getRandomLatLng'](){function _0x19c671(_0x2d8116,_0x59177b){return _0x2b2a20(_0x2d8116- -0x730,_0x59177b);}function _0xf15ed6(_0x4e4a60,_0x5ebfab){return _0x2adbdd(_0x5ebfab,_0x4e4a60- -0x54e);}const _0x5dcbf5=fRandomByfloat(this['xmin'],this['xmax']),_0x339df7=fRandomByfloat(this['ymin'],this[_0xf15ed6(-0x273,-0x28f)]),_0xac3d46={};return _0xac3d46['lat']=_0x339df7,_0xac3d46[_0xf15ed6(-0x2b3,-0x2f8)]=_0x5dcbf5,_0xac3d46;}[_0x2adbdd(0x1f1,0x27c)](){function _0x3e1df0(_0x6873d3,_0x38cebd){return _0x2adbdd(_0x38cebd,_0x6873d3- -0x414);}let _0x4eb2da,_0x442b12,_0x51d13e;function _0x3323d2(_0x1a9ba1,_0x55a150){return _0x2b2a20(_0x1a9ba1- -0x523,_0x55a150);}for(let _0x1c23bb=0x0,_0x1f992d=this[_0x3e1df0(-0xc7,-0x142)][_0x3323d2(-0xf5,-0x133)];_0x1c23bb<_0x1f992d;_0x1c23bb++){let _0x5dd8a0=this[_0x3e1df0(-0xc7,-0x118)][_0x1c23bb];_0x5dd8a0[_0x3e1df0(-0xf8,-0x133)]<=0x0&&(_0x5dd8a0=this['_randomParticle'](_0x5dd8a0));if(_0x5dd8a0['age']>0x0){const _0x5d30bf=_0x5dd8a0[_0x3e1df0(-0xdb,-0xe1)],_0x19ee14=_0x5dd8a0['tlat'];_0x51d13e=this['getUVByPoint'](_0x5d30bf,_0x19ee14),_0x51d13e?(_0x4eb2da=_0x5d30bf+this[_0x3e1df0(-0xd3,-0x10a)][0x0]*_0x51d13e[0x0],_0x442b12=_0x19ee14+this['_calc_speedRate'][0x1]*_0x51d13e[0x1],_0x5dd8a0['lng']=_0x5d30bf,_0x5dd8a0[_0x3323d2(-0x109,-0xf5)]=_0x19ee14,_0x5dd8a0['tlng']=_0x4eb2da,_0x5dd8a0['tlat']=_0x442b12,_0x5dd8a0[_0x3e1df0(-0x117,-0x119)]=_0x51d13e[0x2],_0x5dd8a0['age']--):_0x5dd8a0[_0x3e1df0(-0xf8,-0x6e)]=0x0;}}return this['particles'];}['_randomParticle'](_0x4207){let _0xf12d51,_0xaee659;for(let _0x243c88=0x0;_0x243c88<0x1e;_0x243c88++){_0xf12d51=this['getRandomLatLng'](),_0xaee659=this['getUVByPoint'](_0xf12d51['lng'],_0xf12d51[_0x38d3d6(-0x138,-0x14a)]);if(_0xaee659&&_0xaee659[0x2]>0x0)break;}function _0x1d00e6(_0x54db3b,_0x4a7d3c){return _0x2adbdd(_0x54db3b,_0x4a7d3c- -0x3d5);}if(!_0xaee659)return _0x4207;function _0x38d3d6(_0x4591f3,_0x12e3d8){return _0x2b2a20(_0x12e3d8- -0x564,_0x4591f3);}const _0x57448c=_0xf12d51[_0x38d3d6(-0x101,-0x147)]+this['_calc_speedRate'][0x0]*_0xaee659[0x0],_0x3dfa29=_0xf12d51['lat']+this['_calc_speedRate'][0x1]*_0xaee659[0x1];return _0x4207['lng']=_0xf12d51['lng'],_0x4207['lat']=_0xf12d51['lat'],_0x4207['tlng']=_0x57448c,_0x4207[_0x1d00e6(-0x1dc,-0x168)]=_0x3dfa29,_0x4207[_0x1d00e6(-0xfa,-0xb9)]=Math['round'](0xa+Math['random']()*this['maxAge']),_0x4207['speed']=_0xaee659[0x2],_0x4207;}['destroy'](){for(const _0x48ba81 in this){delete this[_0x48ba81];}}}function fRandomByfloat(_0x3e5fe5,_0x29f370){function _0x49d840(_0x3750bd,_0x51fb99){return _0x2b2a20(_0x3750bd- -0x1e2,_0x51fb99);}return _0x3e5fe5+Math[_0x49d840(0x29f,0x265)]()*(_0x29f370-_0x3e5fe5);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x2adbdd(0x2cb,0x2b0)];class CanvasWindLayer extends BaseLayer{constructor(_0x57a087={}){function _0x1061e8(_0x4e4ac1,_0xda99d2){return _0x2adbdd(_0xda99d2,_0x4e4ac1- -0x4a2);}super(_0x57a087),this['_setOptionsHook'](_0x57a087);function _0x459e00(_0x150dd0,_0x23c63e){return _0x2b2a20(_0x150dd0- -0x439,_0x23c63e);}this['canvas']=null,_0x57a087['colors']&&_0x57a087[_0x459e00(0x30,-0x40)]&&(this['_colorRamp']=new mars3d__namespace[(_0x1061e8(-0x18a,-0x129))](_0x57a087));}['_setOptionsHook'](_0x29110a,_0x5cb86c){this[_0x4427c5(0x313,0x345)]=0x3e8/(_0x29110a[_0x2169e2(-0x21f,-0x26a)]||0xa),this['_pointerEvents']=this['options'][_0x4427c5(0x31b,0x377)]??![],this[_0x2169e2(-0x2a4,-0x294)]=_0x29110a['color']||_0x2169e2(-0x203,-0x266),this['lineWidth']=_0x29110a['lineWidth']||0x1;function _0x2169e2(_0x316716,_0x1b7d42){return _0x2adbdd(_0x1b7d42,_0x316716- -0x507);}this[_0x2169e2(-0x1b6,-0x240)]=_0x29110a['fixedHeight']??0x0;function _0x4427c5(_0x2f8a61,_0x254b0c){return _0x2adbdd(_0x254b0c,_0x2f8a61-0x44);}this[_0x2169e2(-0x1bc,-0x178)]=_0x29110a[_0x4427c5(0x38f,0x30f)]??![],this[_0x2169e2(-0x2a6,-0x2cd)]&&this[_0x4427c5(0x2a5,0x29c)][_0x4427c5(0x2bd,0x340)](_0x29110a);}get['layer'](){return this['canvas'];}get[_0x2b2a20(0x3f1,0x3e4)](){function _0x4f632a(_0x25d576,_0xc681b3){return _0x2b2a20(_0xc681b3- -0x5ca,_0x25d576);}return this['_map']['scene'][_0x4f632a(-0xc8,-0x11b)]['clientWidth'];}get[_0x2b2a20(0x40c,0x423)](){function _0x54de28(_0x23ced2,_0x25a8f1){return _0x2b2a20(_0x23ced2-0x37,_0x25a8f1);}return this['_map']['scene'][_0x54de28(0x4e6,0x49c)]['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x2adbdd(0x30d,0x2d7)](_0x1e1605){this['_pointerEvents']=_0x1e1605;function _0x182c3d(_0x2ab563,_0xfef509){return _0x2adbdd(_0x2ab563,_0xfef509- -0x5b);}if(!this[_0x182c3d(0x349,0x2d2)])return;function _0x501cad(_0x39cf5c,_0x5bad73){return _0x2adbdd(_0x39cf5c,_0x5bad73- -0x194);}_0x1e1605?this['canvas'][_0x501cad(0x181,0x103)]['pointer-events']=_0x501cad(0x1f6,0x18d):this['canvas']['style']['pointer-events']=_0x501cad(0x1c0,0x145);}get[_0x2adbdd(0x38a,0x372)](){function _0x4f4aad(_0x257359,_0x371b64){return _0x2b2a20(_0x257359- -0x11f,_0x371b64);}function _0xc70525(_0x4b83aa,_0x357e01){return _0x2adbdd(_0x357e01,_0x4b83aa- -0x428);}return this[_0xc70525(-0xe0,-0x110)][_0xc70525(-0xb6,-0x64)];}set[_0x2adbdd(0x370,0x372)](_0x4c21ac){this['options'][_0x5d2688(0x410,0x3f5)]=_0x4c21ac;function _0x5d2688(_0x14d3ed,_0x16e83a){return _0x2adbdd(_0x14d3ed,_0x16e83a-0x83);}clearTimeout(this['_canrefresh']);function _0x4a355b(_0x689b78,_0xcb7dbf){return _0x2b2a20(_0xcb7dbf- -0x64f,_0x689b78);}this[_0x4a355b(-0x263,-0x1fb)]=setTimeout(()=>{function _0x17ceff(_0x3b5068,_0x5f4d1b){return _0x5d2688(_0x5f4d1b,_0x3b5068-0xca);}this[_0x17ceff(0x44e,0x3cd)]();},0x1f4);}get['speedRate'](){function _0x348899(_0x2ce05b,_0x51a208){return _0x2b2a20(_0x51a208- -0x53e,_0x2ce05b);}return this['options'][_0x348899(-0x91,-0x118)];}set['speedRate'](_0x21e49a){function _0x1d431e(_0x566de7,_0x57f77d){return _0x2adbdd(_0x566de7,_0x57f77d-0x52);}this[_0x1d431e(0x3a3,0x39a)][_0x1350f9(0x4a4,0x46a)]=_0x21e49a;function _0x1350f9(_0x4ce79f,_0x1a6ce3){return _0x2adbdd(_0x4ce79f,_0x1a6ce3-0x1c6);}this['windField']&&(this['windField'][_0x1350f9(0x418,0x46a)]=_0x21e49a);}get['maxAge'](){function _0xc974c3(_0xcb689b,_0x1bfaa7){return _0x2adbdd(_0x1bfaa7,_0xcb689b- -0x224);}return this['options'][_0xc974c3(0xa3,0x60)];}set[_0x2b2a20(0x449,0x424)](_0x3f26ce){function _0x529031(_0x43a7d8,_0x1be145){return _0x2adbdd(_0x1be145,_0x43a7d8- -0x31d);}this['options']['maxAge']=_0x3f26ce,this[_0x529031(-0xbc,-0x114)]&&(this['windField']['maxAge']=_0x3f26ce);}get[_0x2b2a20(0x4e0,0x536)](){function _0x314b66(_0x3903ed,_0x55c440){return _0x2b2a20(_0x55c440- -0x66c,_0x3903ed);}return this[_0x314b66(-0x1eb,-0x174)];}set[_0x2b2a20(0x4e0,0x468)](_0xd1de2){this['setData'](_0xd1de2);}get['rectangle'](){let _0x430d9b=this['windData']['xmin'];function _0x4d3665(_0x4cd2af,_0x2a425c){return _0x2adbdd(_0x2a425c,_0x4cd2af- -0x79);}let _0x464279=this['windData']['xmax'],_0x47df37=this['windData']['ymin'],_0x4f7725=this['windData']['ymax'];_0x464279>=0x167&&_0x430d9b===0x0&&(_0x430d9b=-0xb4,_0x464279=0xb4);_0x430d9b=Math['max'](_0x430d9b,-0xb4);function _0x51f439(_0x3bb2ae,_0x24660b){return _0x2b2a20(_0x24660b- -0x590,_0x3bb2ae);}return _0x464279=Math[_0x51f439(-0x79,-0xbe)](_0x464279,0xb4),_0x47df37=Math[_0x4d3665(0x2c3,0x33f)](_0x47df37,-0x5a),_0x4f7725=Math['min'](_0x4f7725,0x5a),Cesium[_0x4d3665(0x1fa,0x1e4)]['fromDegrees'](_0x430d9b,_0x47df37,_0x464279,_0x4f7725);}['_showHook'](_0x33830e){function _0x205fd5(_0x737190,_0x2611eb){return _0x2b2a20(_0x737190- -0x2b9,_0x2611eb);}function _0x5e46be(_0x371a5e,_0x10e0e0){return _0x2b2a20(_0x10e0e0- -0x54e,_0x371a5e);}_0x33830e?this['_addedHook']():(this[_0x5e46be(0x4,-0x56)]&&(this['options']['data']=this[_0x5e46be(-0x1e,-0x56)]),this['_removedHook']());}['_mountedHook'](){this['options']['worker']?this['initWorker']():this['windField']=new CanvasWindField(this['options']);}[_0x2adbdd(0x2aa,0x2e6)](){function _0x4847a6(_0x129dab,_0x205dec){return _0x2adbdd(_0x129dab,_0x205dec- -0x453);}this['canvas']=this['_createCanvas']();const _0x4966c5={};_0x4966c5['willReadFrequently']=!![],this['canvasContext']=this['canvas'][_0x4847a6(-0x1a3,-0x183)]('2d',_0x4966c5),this['bindEvent']();function _0x1b8229(_0x46364c,_0x963776){return _0x2b2a20(_0x963776- -0x1a7,_0x46364c);}this['options'][_0x4847a6(-0xb1,-0xf5)]&&this[_0x4847a6(-0xf5,-0xfb)](this['options']['data']);}[_0x2b2a20(0x485,0x4e4)](){function _0x101278(_0x20e6c4,_0x1badfb){return _0x2b2a20(_0x1badfb- -0x4f3,_0x20e6c4);}this['clear'](),this[_0x230761(0x26e,0x1f9)]();function _0x230761(_0x43be90,_0x5b8ac5){return _0x2b2a20(_0x43be90- -0x1b9,_0x5b8ac5);}this['canvas']&&(this['_map']['container']['removeChild'](this[_0x101278(-0x76,-0x44)]),delete this['canvas']);}['_createCanvas'](){const _0x1c7659=mars3d__namespace['DomUtil']['create'](_0x358307(0x50e,0x544),_0x1af2f4(0x230,0x282),this['_map']['container']);_0x1c7659[_0x358307(0x478,0x46b)]['position']='absolute',_0x1c7659['style'][_0x1af2f4(0x20e,0x19f)]='0px',_0x1c7659['style'][_0x358307(0x49f,0x4bc)]=_0x358307(0x457,0x436),_0x1c7659['style']['width']=this[_0x1af2f4(0x25d,0x260)]['scene']['canvas']['clientWidth']+'px',_0x1c7659['style'][_0x1af2f4(0x2cd,0x24e)]=this[_0x1af2f4(0x25d,0x213)][_0x1af2f4(0x1fc,0x178)]['canvas']['clientHeight']+'px';function _0x1af2f4(_0x3c8d4d,_0x2a0617){return _0x2b2a20(_0x3c8d4d- -0x223,_0x2a0617);}_0x1c7659['style']['pointerEvents']=this[_0x1af2f4(0x1c1,0x1cb)]?'auto':_0x358307(0x4ba,0x4e5),_0x1c7659[_0x358307(0x478,0x4ae)]['zIndex']=this[_0x1af2f4(0x2a7,0x322)]['zIndex']??0x9,_0x1c7659[_0x358307(0x4d5,0x560)]=this['_map'][_0x358307(0x47e,0x4a0)]['canvas']['clientWidth'];function _0x358307(_0x436b2f,_0x361bb){return _0x2b2a20(_0x436b2f-0x5f,_0x361bb);}return _0x1c7659['height']=this['_map'][_0x1af2f4(0x1fc,0x1e5)]['canvas']['clientHeight'],_0x1c7659;}[_0x2adbdd(0x27f,0x28c)](){function _0x1585d9(_0x8c142e,_0x2fc92e){return _0x2adbdd(_0x2fc92e,_0x8c142e- -0x2ac);}function _0x58cd91(_0x21dab4,_0x4f55c1){return _0x2b2a20(_0x4f55c1- -0x347,_0x21dab4);}this[_0x1585d9(0x81,0x8e)]&&(this['canvas']['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this['canvas'][_0x1585d9(-0x15,-0x50)]['height']=this['_map']['scene'][_0x58cd91(0xef,0x168)]['clientHeight']+'px',this['canvas']['width']=this[_0x58cd91(0x130,0x139)]['scene']['canvas']['clientWidth'],this['canvas']['height']=this[_0x1585d9(0x52,0x36)]['scene'][_0x58cd91(0x150,0x168)][_0x1585d9(0x6,0x74)]);}['bindEvent'](){const _0x37f02c=this;let _0xb538e2=Date[_0x6edb18(-0x79,-0xdc)]();function _0x6edb18(_0x507bc0,_0x4d1152){return _0x2b2a20(_0x4d1152- -0x549,_0x507bc0);}(function _0x42efea(){function _0x5926e2(_0xc9d102,_0x38d0e1){return _0x6edb18(_0x38d0e1,_0xc9d102-0x1c8);}if(_0x37f02c[_0x5926e2(0x130,0x138)])return;function _0x2deeca(_0x7d125c,_0x1a9f3d){return _0x6edb18(_0x7d125c,_0x1a9f3d- -0x1e);}_0x37f02c['_animateFrame']=window[_0x2deeca(-0x97,-0xd7)](_0x42efea);if(_0x37f02c[_0x5926e2(0x10d,0x178)]&&_0x37f02c[_0x5926e2(0x62,0xb0)]){const _0x232192=Date[_0x5926e2(0xec,0xed)](),_0x4af5b2=_0x232192-_0xb538e2;_0x4af5b2>_0x37f02c['frameTime']&&(_0xb538e2=_0x232192-_0x4af5b2%_0x37f02c['frameTime'],_0x37f02c['update']());}}(),window['addEventListener']('resize',this['resize']['bind'](this),![]),this['mouse_down']=![]);function _0x81fafb(_0x1e036e,_0xb7f4f6){return _0x2b2a20(_0x1e036e- -0x327,_0xb7f4f6);}this['mouse_move']=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace['EventType'][_0x6edb18(-0x121,-0x11c)],this[_0x81fafb(0x168,0x1eb)],this),this[_0x81fafb(0x159,0x199)]['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x6edb18(-0x11a,-0xf3)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this));}[_0x2b2a20(0x427,0x444)](){window['cancelAnimationFrame'](this[_0xd53780(0x3a1,0x37c)]);function _0x294f6b(_0x3a7e2d,_0x5e114b){return _0x2b2a20(_0x3a7e2d- -0x490,_0x5e114b);}function _0xd53780(_0x5ce3f4,_0x47a0d9){return _0x2b2a20(_0x47a0d9- -0xce,_0x5ce3f4);}delete this[_0x294f6b(-0x46,0x2f)],window['removeEventListener'](_0x294f6b(-0x82,-0x34),this['resize']),this['options']['mouseHidden']&&(this['_map'][_0x294f6b(-0x1d,-0x26)](mars3d__namespace['EventType']['wheel'],this[_0xd53780(0x357,0x3c1)],this),this[_0xd53780(0x33c,0x3b2)][_0xd53780(0x34b,0x3a5)](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this[_0x294f6b(-0x10,0x44)]['off'](mars3d__namespace['EventType']['mouseUp'],this[_0x294f6b(-0x58,0x2)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}[_0x2b2a20(0x48f,0x40b)](_0x338b75){clearTimeout(this['refreshTimer']);function _0x3ad164(_0x2d8163,_0x1eb964){return _0x2b2a20(_0x1eb964- -0x267,_0x2d8163);}if(!this['show']||!this[_0x3628aa(0x4ae,0x49c)])return;function _0x3628aa(_0x58c71e,_0x1295ff){return _0x2adbdd(_0x58c71e,_0x1295ff-0x16f);}this[_0x3ad164(0x2bf,0x248)]['style']['visibility']='hidden',this[_0x3ad164(0x122,0x192)]=setTimeout(()=>{if(!this[_0x2c01d1(-0x16d,-0xee)])return;function _0x55f54e(_0x4fd4e0,_0x3d426f){return _0x3628aa(_0x3d426f,_0x4fd4e0- -0x1cf);}function _0x2c01d1(_0x23788b,_0x481327){return _0x3628aa(_0x23788b,_0x481327- -0x569);}this[_0x2c01d1(-0xa4,-0xf9)](),this[_0x2c01d1(-0x10c,-0xcd)][_0x2c01d1(-0x14f,-0x163)]['visibility']='visible';},0xc8);}['_onMouseDownEvent'](_0x3bec64){this['mouse_down']=!![];function _0x5e0d41(_0x539434,_0x8fe811){return _0x2adbdd(_0x539434,_0x8fe811-0x3e);}this['_map'][_0x27bdda(0x2fd,0x321)](mars3d__namespace[_0x27bdda(0x292,0x2da)]['mouseMove'],this['_onMouseMoveEvent'],this);function _0x27bdda(_0x444a7b,_0xb8eb0d){return _0x2b2a20(_0x444a7b- -0x176,_0xb8eb0d);}this['_map']['on'](mars3d__namespace[_0x27bdda(0x292,0x25f)][_0x5e0d41(0x360,0x364)],this[_0x5e0d41(0x372,0x376)],this);}['_onMouseMoveEvent'](_0x5bffe9){if(!this[_0x2eb6bc(-0x304,-0x2be)]||!this['canvas'])return;function _0x2eb6bc(_0x45321a,_0x28e184){return _0x2b2a20(_0x28e184- -0x74c,_0x45321a);}this['mouse_down']&&(this['canvas']['style']['visibility']='hidden',this['mouse_move']=!![]);}[_0x2adbdd(0x282,0x2b6)](_0x1a9f64){if(!this['show']||!this[_0x565bc1(0x25b,0x1e8)])return;this['_map']['off'](mars3d__namespace[_0x2d1c80(0xb2,0x4a)][_0x2d1c80(0x15e,0xea)],this[_0x2d1c80(0x13f,0xfc)],this);this['mouse_down']&&this[_0x2d1c80(0xfc,0x8d)]&&this[_0x2d1c80(0x3a,0xc5)]();this['canvas']['style']['visibility']=_0x2d1c80(0x59,0xe3);function _0x565bc1(_0x53796e,_0x1b370a){return _0x2adbdd(_0x1b370a,_0x53796e- -0xd2);}this['mouse_down']=![];function _0x2d1c80(_0x4d1ab7,_0x41f70b){return _0x2b2a20(_0x41f70b- -0x3be,_0x4d1ab7);}this['mouse_move']=![];}[_0x2b2a20(0x4da,0x503)](_0x11fc13){this['clear'](),this['windData']=_0x11fc13;function _0x3b6178(_0x39872f,_0x1536fd){return _0x2b2a20(_0x39872f- -0x297,_0x1536fd);}this['windField'][_0x3b6178(0x20e,0x1a8)](_0x11fc13),this['redraw']();}['redraw'](){function _0x19ac82(_0x4dfab4,_0x1537d6){return _0x2adbdd(_0x1537d6,_0x4dfab4- -0x1ce);}if(!this['show'])return;this['windField']['setOptions'](this[_0x19ac82(0x17a,0x17b)]),this['update']();}[_0x2b2a20(0x48c,0x440)](){if(this['_updateIng'])return;function _0x3534c0(_0x5a30f7,_0x298f2f){return _0x2b2a20(_0x5a30f7- -0x661,_0x298f2f);}function _0x4c1450(_0x5e60fd,_0x3766e6){return _0x2adbdd(_0x3766e6,_0x5e60fd- -0x503);}this[_0x3534c0(-0x1ac,-0x134)]=!![];if(this['worker'])this['windField']['update']();else{const _0x5e3692=this[_0x4c1450(-0x2a2,-0x248)]['getParticles']();this['_drawLines'](_0x5e3692);}this[_0x3534c0(-0x1ac,-0x181)]=![];}['_drawLines'](_0x466b5e){this['_canvasParticles']=_0x466b5e,this[_0x2bdb46(0x31b,0x36f)]['globalCompositeOperation']='destination-in';function _0x313551(_0x3a354c,_0x1bd1d3){return _0x2adbdd(_0x3a354c,_0x1bd1d3- -0x4bf);}this[_0x2bdb46(0x31b,0x321)]['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext'][_0x313551(-0x1e4,-0x211)]=_0x2bdb46(0x26a,0x2b7),this[_0x313551(-0x109,-0x148)]['globalAlpha']=0.9;const _0x213506=this['_map']['scene']['mode']!==Cesium[_0x313551(-0x143,-0x1c4)][_0x2bdb46(0x2d9,0x2eb)],_0x2c365e=this[_0x313551(-0x262,-0x250)]*0.25;function _0x2bdb46(_0xa2d14d,_0x1ee7f1){return _0x2adbdd(_0x1ee7f1,_0xa2d14d- -0x5c);}if(this['_colorRamp'])for(let _0x5ce728=0x0,_0x3f247d=_0x466b5e['length'];_0x5ce728<_0x3f247d;_0x5ce728++){const _0xe62bb5=_0x466b5e[_0x5ce728],_0x1099d2=this[_0x2bdb46(0x260,0x28a)](_0xe62bb5,_0xe62bb5[_0x313551(-0x19d,-0x224)],_0xe62bb5['lat'],_0xe62bb5[_0x2bdb46(0x219,0x2a1)]),_0x2f1dd3=this[_0x313551(-0x223,-0x203)](_0xe62bb5,_0xe62bb5[_0x313551(-0x136,-0x186)],_0xe62bb5[_0x313551(-0x1cf,-0x252)],_0xe62bb5[_0x2bdb46(0x31c,0x387)]);if(!_0x1099d2||!_0x2f1dd3)continue;if(_0x213506&&Math[_0x313551(-0x2a2,-0x230)](_0x1099d2[0x0]-_0x2f1dd3[0x0])>=_0x2c365e)continue;this['canvasContext']['beginPath'](),this['canvasContext'][_0x313551(-0x1be,-0x242)]=this['lineWidth'],this[_0x2bdb46(0x31b,0x2c0)]['strokeStyle']=this['_colorRamp']['getColor'](_0xe62bb5[_0x313551(-0x1b0,-0x1c2)]),this[_0x2bdb46(0x31b,0x294)]['moveTo'](_0x1099d2[0x0],_0x1099d2[0x1]),this['canvasContext'][_0x2bdb46(0x26e,0x234)](_0x2f1dd3[0x0],_0x2f1dd3[0x1]),this['canvasContext'][_0x313551(-0x1d4,-0x1fe)]();}else{this[_0x2bdb46(0x31b,0x2cf)]['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x2bdb46(0x207,0x262)];for(let _0x5c7cc5=0x0,_0x30ac2a=_0x466b5e['length'];_0x5c7cc5<_0x30ac2a;_0x5c7cc5++){const _0x5bd34d=_0x466b5e[_0x5c7cc5],_0x350592=this[_0x2bdb46(0x260,0x272)](_0x5bd34d,_0x5bd34d[_0x313551(-0x1b2,-0x224)],_0x5bd34d['lat'],_0x5bd34d['alt']),_0x1c9d07=this[_0x2bdb46(0x260,0x2cc)](_0x5bd34d,_0x5bd34d['tlng'],_0x5bd34d['tlat'],_0x5bd34d['talt']);if(!_0x350592||!_0x1c9d07)continue;if(_0x213506&&Math['abs'](_0x350592[0x0]-_0x1c9d07[0x0])>=_0x2c365e)continue;this['canvasContext'][_0x313551(-0x1ac,-0x14c)](_0x350592[0x0],_0x350592[0x1]),this['canvasContext'][_0x2bdb46(0x26e,0x2c9)](_0x1c9d07[0x0],_0x1c9d07[0x1]);}this['canvasContext'][_0x313551(-0x1e4,-0x1fe)]();}}['_tomap'](_0x1a5eda,_0x88b019,_0x50d259,_0x3bbb3d){function _0x1d7647(_0x3423a6,_0x37e28b){return _0x2b2a20(_0x37e28b- -0x15a,_0x3423a6);}const _0x1321b9=Cesium[_0x176054(0x291,0x297)]['fromDegrees'](_0x88b019,_0x50d259,_0x3bbb3d??this['fixedHeight']),_0x2de333=this['_map']['scene'];function _0x176054(_0x3623d8,_0x4e7fbd){return _0x2adbdd(_0x4e7fbd,_0x3623d8- -0xb);}if(_0x2de333['mode']===Cesium[_0x176054(0x2f0,0x266)]['SCENE3D']){const _0x49e73c=new Cesium['EllipsoidalOccluder'](_0x2de333['globe']['ellipsoid'],_0x2de333['camera'][_0x1d7647(0x340,0x36f)]),_0x37e41b=_0x49e73c['isPointVisible'](_0x1321b9);if(!_0x37e41b)return _0x1a5eda[_0x1d7647(0x2c7,0x344)]=0x0,null;}const _0x35115f=mars3d__namespace['PointTrans'][_0x176054(0x337,0x30d)](this[_0x1d7647(0x357,0x326)][_0x176054(0x292,0x233)],_0x1321b9);return _0x35115f?[_0x35115f['x'],_0x35115f['y']]:null;}['clear'](){this[_0x13cb11(-0x1fc,-0x206)]['clear']();function _0x13cb11(_0x3b42a2,_0x546cbe){return _0x2adbdd(_0x3b42a2,_0x546cbe- -0x467);}delete this['windData'];}[_0x2b2a20(0x4dc,0x462)](){function _0x2c4463(_0x559bf4,_0x4f4f06){return _0x2b2a20(_0x4f4f06- -0x5fd,_0x559bf4);}this[_0x1f22b6(0xf8,0x124)]=new Worker(this['options']['worker']);function _0x1f22b6(_0x35db1f,_0x5738b4){return _0x2b2a20(_0x35db1f- -0x39f,_0x5738b4);}this['worker'][_0x2c4463(-0xb4,-0x106)]=_0xe044d8=>{function _0xf177b8(_0x2912b0,_0x2a5b11){return _0x2c4463(_0x2a5b11,_0x2912b0- -0x140);}function _0x356ca4(_0xf646df,_0x1378bf){return _0x1f22b6(_0x1378bf-0x64,_0xf646df);}this['_drawLines'](_0xe044d8['data'][_0xf177b8(-0x26e,-0x1fb)]),this[_0xf177b8(-0x329,-0x2bf)]=![];},this[_0x1f22b6(0x44,0x63)]={'init':_0x3bf4fb=>{const _0xaa667b={};function _0xdcb7e3(_0x1cb021,_0x3c8e0e){return _0x2c4463(_0x1cb021,_0x3c8e0e-0x17b);}_0xaa667b[_0xdcb7e3(-0xb9,-0x47)]='init',_0xaa667b['options']=_0x3bf4fb;function _0x51310b(_0x2de617,_0x359e14){return _0x2c4463(_0x2de617,_0x359e14-0x21d);}this[_0xdcb7e3(0x3a,0x15)][_0xdcb7e3(0xd,0x55)](_0xaa667b);},'setOptions':_0x28b72a=>{const _0x5a954c={};_0x5a954c['type']='setOptions',_0x5a954c['options']=_0x28b72a,this['worker']['postMessage'](_0x5a954c);},'setDate':_0x599d24=>{const _0x294808={};_0x294808['type']='setDate',_0x294808['data']=_0x599d24,this['worker']['postMessage'](_0x294808);},'update':()=>{if(this['_updateIng2'])return;this[_0x97e5f8(0x330,0x38b)]=!![];function _0x28141e(_0xe8d145,_0xa2a385){return _0x1f22b6(_0xa2a385-0x179,_0xe8d145);}const _0x2e09e2={};function _0x97e5f8(_0x852dec,_0x53fbfa){return _0x2c4463(_0x852dec,_0x53fbfa-0x574);}_0x2e09e2[_0x28141e(0x242,0x215)]=_0x97e5f8(0x474,0x403),this['worker'][_0x28141e(0x293,0x2b1)](_0x2e09e2);},'clear':()=>{const _0x591704={};function _0x57036b(_0x337a43,_0x5a2648){return _0x2c4463(_0x5a2648,_0x337a43-0x4f2);}function _0x1a21a3(_0x2dc654,_0x5d9565){return _0x1f22b6(_0x2dc654- -0xf6,_0x5d9565);}_0x591704[_0x1a21a3(-0x5a,-0x97)]=_0x57036b(0x389,0x3c8),this[_0x1a21a3(0x2,-0x37)]['postMessage'](_0x591704);}},this[_0x1f22b6(0x44,0x3f)][_0x2c4463(-0x12d,-0x13b)](this[_0x1f22b6(0x12b,0x139)]);}}mars3d__namespace['LayerUtil']['register']('canvasWind',CanvasWindLayer),mars3d__namespace['layer'][_0x2b2a20(0x45a,0x472)]=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['Log']['logInfo']('mars3d-wind插件\x20注册成功'),mars3d__namespace['WindUtil']=WindUtil,exports[_0x2b2a20(0x4d4,0x44c)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x1b13aa={};_0x1b13aa[_0x2b2a20(0x471,0x4b8)]=!![],Object['defineProperty'](exports,_0x2adbdd(0x34c,0x367),_0x1b13aa);
}));
