/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.1
 * 编译日期：2025-08-03 16:33
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x503fc9,_0x184beb){function _0x2e731d(_0x21d7bf,_0x3e2ff1){return _0x5a73(_0x3e2ff1-0xb8,_0x21d7bf);}function _0x4b8bde(_0x2d9001,_0xd9b33f){return _0x5a73(_0xd9b33f-0x3c,_0x2d9001);}const _0x17682d=_0x503fc9();while(!![]){try{const _0x563e0c=-parseInt(_0x4b8bde(0x208,0x1f1))/0x1+-parseInt(_0x2e731d(0x359,0x322))/0x2*(-parseInt(_0x2e731d(0x2b5,0x2cc))/0x3)+-parseInt(_0x2e731d(0x302,0x2f0))/0x4+parseInt(_0x2e731d(0x2b7,0x29e))/0x5*(-parseInt(_0x4b8bde(0x1c4,0x1fc))/0x6)+parseInt(_0x4b8bde(0x2f9,0x2a5))/0x7*(-parseInt(_0x4b8bde(0x20a,0x291))/0x8)+-parseInt(_0x2e731d(0x287,0x300))/0x9*(parseInt(_0x2e731d(0x1f5,0x24f))/0xa)+parseInt(_0x4b8bde(0x26d,0x2a7))/0xb;if(_0x563e0c===_0x184beb)break;else _0x17682d['push'](_0x17682d['shift']());}catch(_0x43a279){_0x17682d['push'](_0x17682d['shift']());}}}(_0x2595,0xe3768));function _interopNamespace(_0x3192d2){function _0x1497e4(_0x456221,_0x2f96a4){return _0x5a73(_0x456221-0x209,_0x2f96a4);}if(_0x3192d2&&_0x3192d2[_0xdbc60b(-0xa6,-0x2f)])return _0x3192d2;var _0x4d6c84=Object['create'](null);_0x3192d2&&Object['keys'](_0x3192d2)[_0x1497e4(0x426,0x433)](function(_0x3bdcdb){function _0x3ef0bc(_0x5aedfe,_0x2d8e67){return _0xdbc60b(_0x5aedfe-0x392,_0x2d8e67);}if(_0x3bdcdb!==_0x3ef0bc(0x2af,0x283)){var _0x53649d=Object['getOwnPropertyDescriptor'](_0x3192d2,_0x3bdcdb);Object['defineProperty'](_0x4d6c84,_0x3bdcdb,_0x53649d['get']?_0x53649d:{'enumerable':!![],'get':function(){return _0x3192d2[_0x3bdcdb];}});}});_0x4d6c84['default']=_0x3192d2;function _0xdbc60b(_0x3b4e77,_0x1a0242){return _0x5a73(_0x3b4e77- -0x2d1,_0x1a0242);}return _0x4d6c84;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0x6a32fe(0x36c,0x3a7)];function getU(_0x14a2cd,_0x15283d){const _0x1fa655=_0x14a2cd*Math['cos'](Cesium$2['Math']['toRadians'](_0x15283d));return _0x1fa655;}function getV(_0x4e971a,_0x14721f){function _0x5c3958(_0x400b1c,_0x47f617){return _0x6a32fe(_0x400b1c,_0x47f617- -0x432);}function _0x29c6f1(_0x560c72,_0x28bc5f){return _0x6a32fe(_0x560c72,_0x28bc5f- -0x283);}const _0xad4bf4=_0x4e971a*Math[_0x29c6f1(0x18c,0x174)](Cesium$2[_0x29c6f1(0x11c,0x11e)][_0x5c3958(-0xb7,-0x7d)](_0x14721f));return _0xad4bf4;}function getSpeed(_0x23a186,_0x2d41f3){function _0x35d7cb(_0x231d0b,_0x4a399a){return _0x6a32fe(_0x231d0b,_0x4a399a- -0x40a);}function _0x4b2e28(_0x468f2b,_0xefd1a4){return _0x6a32fe(_0xefd1a4,_0x468f2b- -0xf6);}const _0x1e918b=Math[_0x4b2e28(0x270,0x20c)](Math[_0x4b2e28(0x280,0x299)](_0x23a186,0x2)+Math['pow'](_0x2d41f3,0x2));return _0x1e918b;}function getDirection(_0x4f5701,_0x21d27b){let _0x189bd5=Cesium$2['Math']['toDegrees'](Math['atan2'](_0x21d27b,_0x4f5701));return _0x189bd5+=_0x189bd5<0x0?0x168:0x0,_0x189bd5;}function _0x6a32fe(_0x22072c,_0x9b8552){return _0x5a73(_0x9b8552-0x1c6,_0x22072c);}const _0x59a288={};_0x59a288[_0x6a32fe(0x400,0x3a5)]=null,_0x59a288['getU']=getU,_0x59a288['getV']=getV,_0x59a288['getSpeed']=getSpeed,_0x59a288[_0x6a32fe(0x3ee,0x402)]=getDirection;var WindUtil=_0x59a288,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a';function _0x2595(){const _0x3dde42=['addEventListener','postProcessingPosition','getDefaultRenderState','windField','wheel','east','LINEAR','layer','particleSystem','umin','FLOAT','getRandomLatLng','length','fixedHeight','mode','south','floor','type','green','drawingBufferWidth','maxAge','array','bounds','random','particlesTextureSize','lineWidth','speedFactor','persists','ymax','10AKapcH','_onMapWhellEvent','PointTrans','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','updateViewerParameters','currentParticlesPosition','domain','clientHeight','autoClear','sqrt','ellipsoid','mouseHidden','scene','toGridXY','colorTextures','mouseMove','wrapS','getContext','createColorTableTexture','resize','context','cancelAnimationFrame','top','camera','windData','pow','frameState.commandList\x20is\x20undefined','vmin','processWindData','createWindTextures','1558827ukPvzg','_setOptionsHook','height','max\x20is\x20undefined,\x20calculate\x20max','commandType','keys','redraw','globalAlpha','initWorker','abs','fromGeometry','3252aijjuP','_speedRate','_onMouseUpEvent','reCreateWindTextures','RGBA','worker','options','_tomap','bind','lineTo','windTextures','clearCommand','segmentsDepth','max','Cartesian2','sources','speed','min\x20is\x20undefined,\x20calculate\x20min','previousParticlesPosition','particlesSpeed','stringify','style','canvasWidth','push','primitiveType','cols','ymin','Math','stroke','_pointerEvents','pointerEvents','__proto__','call','Cesium','north','DomUtil','setDate','defineProperty','35WDBnoZ','none','rendering','_calcUV','width','steps','_createCanvas','warn','default','toRadians','geometry','dropRate','changed','show','canvas','min','slice','framebuffers','fromCssColorString','isInExtent','age','sceneMode','blending','colors','getSegmentDrawVertexShader','grid','isDynamic','EventType','dynamic','setGeometry','clientWidth','zIndex','normal','update','changeOptions','updateWindData','unbindEvent','attributeLocations','UNSIGNED_BYTE','tlat','flipY','_onMouseMoveEvent','commandList','add','SceneMode','clear','1605uKDzqY','segments','getPostProcessingPositionShader','talt','createRenderingFramebuffers','OPAQUE','_calc_speedRate','canvasContext','_randomParticle','forEach','_canrefresh','absolute','blendEquation','NEAREST','vertexShaderSource','CLAMP_TO_EDGE','west','_onMouseDownEvent','updateOptions','xmax','lng','hidden','computing','__esModule','depthTest','percentageChanged','bufferUsage','beginPath','getUVByXY','sin','getSegmentDrawFragmentShader','visibility','fromCache','Compute','CanvasWindField','mars3d-wind插件\x20注册成功','5348604jraviB','primitives','remove','error','getDirection','canvasHeight','clearFramebuffers','uniformMap','xmin','0px','magnificationFilter','WindUtil','data','blendFuncDestination','_updateIng2','Unknown\x20command\x20type','10138563XOtoPd','getPrimitives','alt','_showHook','lat','MAX_VALUE','outputTexture','_updateIng','isDestroyed','createParticlesTextures','frameTime','vdata','fromDegrees','4728ULxToP','container','globalCompositeOperation','updatePosition','blendFuncSource','speedRate','latRange','setData','viewerParameters','getDataAtLonLat','particlesTextures','pixelSize','createSegmentsGeometry','particles','_drawLines','_maxAge','init','createComputingPrimitives','rgb(206,255,255)','values','8365MWrZNw','706IsxGJW','60228927KvOzfH','commandToExecute','isDestroy','getUpdatePositionShader','particlesNumber','Log','_addedHook','_map','vertexArray','fragmentShaderSource','frameRateAdjustment','off','enabled','dropRateBump','depthTexture','removeChild','morphComplete','moveTo','destroy','RED','setOptions','shaderProgram','componentDatatype','tlng','mouse_move','flatMap','onColorTableChange','wind','SCENE3D','frameRateMonitor','rows','onParticlesTextureSizeChange','framebuffer','BaseLayer','createRenderingTextures'];_0x2595=function(){return _0x3dde42;};return _0x2595();}function _0x5c3e0e(_0x393b48,_0x1cadfd){return _0x5a73(_0x1cadfd-0x35e,_0x393b48);}var calculateSpeedShader=_0x6a32fe(0x38f,0x360),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static['getCalculateSpeedShader'](){const _0x15c33c={};_0x15c33c[_0x928146(0x19c,0x11a)]=[calculateSpeedShader];function _0x928146(_0x2fc3a7,_0x372ecc){return _0x6a32fe(_0x2fc3a7,_0x372ecc- -0x27b);}return new ShaderSource$1(_0x15c33c);}static[_0x5c3e0e(0x565,0x5cc)](){const _0x315678={};function _0x25b4c2(_0x2c0d30,_0x314b19){return _0x6a32fe(_0x314b19,_0x2c0d30- -0x1c7);}return _0x315678[_0x25b4c2(0x1ce,0x1de)]=[updatePositionShader],new ShaderSource$1(_0x315678);}static[_0x6a32fe(0x42d,0x3c4)](){const _0x28c1b6={};return _0x28c1b6['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x28c1b6);}static[_0x6a32fe(0x3e7,0x3f8)](){const _0x4b758a={};_0x4b758a[_0x25a224(0x89,0xfc)]=[renderParticlesFragmentShader];function _0x25a224(_0x4f6211,_0x169456){return _0x5c3e0e(_0x4f6211,_0x169456- -0x431);}return new ShaderSource$1(_0x4b758a);}static[_0x5c3e0e(0x58f,0x574)](){const _0x1f7f1b={};return _0x1f7f1b['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x1f7f1b);}}function _0x5a73(_0x5ae868,_0x15f4ae){const _0x2595e6=_0x2595();return _0x5a73=function(_0x5a73eb,_0x26faac){_0x5a73eb=_0x5a73eb-0x180;let _0x35c4e0=_0x2595e6[_0x5a73eb];return _0x35c4e0;},_0x5a73(_0x5ae868,_0x15f4ae);}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x61efb9){this['commandType']=_0x61efb9[_0x44f49b(0xc4,0xf1)],this['geometry']=_0x61efb9['geometry'],this['attributeLocations']=_0x61efb9['attributeLocations'],this['primitiveType']=_0x61efb9['primitiveType'],this['uniformMap']=_0x61efb9[_0x59b9ec(0x30f,0x2ae)]||{},this[_0x59b9ec(0x2f2,0x309)]=_0x61efb9['vertexShaderSource'],this['fragmentShaderSource']=_0x61efb9['fragmentShaderSource'];function _0x59b9ec(_0x338f8c,_0x2b52a2){return _0x6a32fe(_0x2b52a2,_0x338f8c- -0xf6);}this['rawRenderState']=_0x61efb9['rawRenderState'],this[_0x59b9ec(0x35b,0x2db)]=_0x61efb9[_0x59b9ec(0x35b,0x2f9)],this[_0x59b9ec(0x31e,0x2fa)]=_0x61efb9['outputTexture'],this[_0x44f49b(0xaa,0x60)]=_0x61efb9[_0x59b9ec(0x26f,0x282)]??![],this['preExecute']=_0x61efb9['preExecute'],this['show']=!![];function _0x44f49b(_0x483148,_0x36906b){return _0x5c3e0e(_0x36906b,_0x483148- -0x453);}this['commandToExecute']=undefined,this[_0x59b9ec(0x29b,0x214)]=undefined,this[_0x59b9ec(0x2d0,0x2e8)]=_0x61efb9['isDynamic']??(()=>!![]),this['autoClear']&&(this[_0x59b9ec(0x29b,0x280)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x44f49b(0x196,0x1cb)],'pass':Pass$1[_0x59b9ec(0x2e9,0x347)]}));}['createCommand'](_0x3a416d){function _0x5f3d7a(_0x1ca4dc,_0x37b4f0){return _0x5c3e0e(_0x1ca4dc,_0x37b4f0- -0x2a9);}function _0x1ae4c1(_0x1d0608,_0x538525){return _0x6a32fe(_0x538525,_0x1d0608- -0x24e);}if(this['commandType']==='Draw'){const _0x10e2f8={};_0x10e2f8['context']=_0x3a416d,_0x10e2f8[_0x1ae4c1(0x168,0xee)]=this[_0x1ae4c1(0x168,0x15e)],_0x10e2f8['attributeLocations']=this['attributeLocations'],_0x10e2f8['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x14990c=VertexArray$1[_0x1ae4c1(0x137,0x1aa)](_0x10e2f8),_0x4fdadd={};_0x4fdadd['context']=_0x3a416d,_0x4fdadd[_0x1ae4c1(0x19a,0x1dc)]=this[_0x1ae4c1(0x19a,0x20c)],_0x4fdadd['fragmentShaderSource']=this['fragmentShaderSource'],_0x4fdadd[_0x5f3d7a(0x326,0x2c0)]=this['attributeLocations'];const _0x1872e9=ShaderProgram['fromCache'](_0x4fdadd),_0x30940b=RenderState[_0x1ae4c1(0x1ac,0x1df)](this['rawRenderState']),_0x46399c={};return _0x46399c['owner']=this,_0x46399c['vertexArray']=_0x14990c,_0x46399c['primitiveType']=this[_0x5f3d7a(0x253,0x28d)],_0x46399c['modelMatrix']=Matrix4['IDENTITY'],_0x46399c['renderState']=_0x30940b,_0x46399c['shaderProgram']=_0x1872e9,_0x46399c['framebuffer']=this['framebuffer'],_0x46399c['uniformMap']=this[_0x1ae4c1(0x1b7,0x1c1)],_0x46399c['pass']=Pass$1[_0x5f3d7a(0x357,0x2ce)],new DrawCommand(_0x46399c);}else{if(this['commandType']==='Compute'){const _0x5b11a8={};return _0x5b11a8['owner']=this,_0x5b11a8['fragmentShaderSource']=this[_0x5f3d7a(0x308,0x329)],_0x5b11a8['uniformMap']=this[_0x1ae4c1(0x1b7,0x15e)],_0x5b11a8['outputTexture']=this['outputTexture'],_0x5b11a8[_0x5f3d7a(0x2ce,0x24a)]=!![],new ComputeCommand(_0x5b11a8);}else throw new Error(_0x5f3d7a(0x279,0x2fc));}}[_0x6a32fe(0x3f4,0x3c9)](_0x164f41,_0x4ffbda){function _0x2e9fd0(_0x3437ec,_0x324030){return _0x6a32fe(_0x324030,_0x3437ec- -0x233);}function _0xee2df7(_0x3157f3,_0x4a5d0d){return _0x5c3e0e(_0x4a5d0d,_0x3157f3- -0x38e);}this[_0xee2df7(0x1c0,0x20b)]=_0x4ffbda,defined(this[_0xee2df7(0x23c,0x262)])&&(this['commandToExecute']['vertexArray']=VertexArray$1['fromGeometry']({'context':_0x164f41,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x1402e6){if(!this[_0x33a109(0x74,0x65)]())return;if(!this['show']||!defined(_0x1402e6))return;!defined(this[_0x4007c3(0x524,0x56a)])&&(this[_0x33a109(0xe0,0x98)]=this['createCommand'](_0x1402e6['context']));function _0x33a109(_0x1041d3,_0x2c926d){return _0x6a32fe(_0x2c926d,_0x1041d3- -0x352);}defined(this['preExecute'])&&this['preExecute']();if(!_0x1402e6[_0x33a109(0x84,0x57)]){console[_0x33a109(0x61,0x71)](_0x33a109(0x25,-0x41));return;}function _0x4007c3(_0x251583,_0x2ab17a){return _0x5c3e0e(_0x251583,_0x2ab17a- -0x60);}defined(this['clearCommand'])&&_0x1402e6['commandList']['push'](this['clearCommand']),defined(this['commandToExecute'])&&_0x1402e6['commandList'][_0x33a109(0x4b,0x65)](this[_0x4007c3(0x505,0x56a)]);}[_0x6a32fe(0x41b,0x416)](){return![];}['destroy'](){function _0x370420(_0x5bb9c6,_0x2c5718){return _0x6a32fe(_0x5bb9c6,_0x2c5718- -0x17d);}function _0x1d4c08(_0x98fda1,_0x279643){return _0x5c3e0e(_0x98fda1,_0x279643- -0x4a7);}if(defined(this['commandToExecute'])){var _0x3434ae;(_0x3434ae=this['commandToExecute'][_0x1d4c08(0x166,0x137)])===null||_0x3434ae===void 0x0||_0x3434ae['destroy'](),this['commandToExecute'][_0x1d4c08(0xe9,0x137)]=undefined;}return destroyObject(this);}}function deepMerge(_0x34f93e,_0x241049){if(!_0x34f93e)return _0x241049;if(!_0x241049)return _0x34f93e;const _0x3549aa={..._0x241049},_0x4ffc2b=_0x3549aa;function _0x280f88(_0x147dec,_0x4075f5){return _0x5c3e0e(_0x147dec,_0x4075f5-0x27);}function _0x1a418e(_0x1c5e16,_0x28dcab){return _0x6a32fe(_0x28dcab,_0x1c5e16- -0x4d4);}for(const _0x2a0541 in _0x34f93e){if(Object['prototype']['hasOwnProperty'][_0x280f88(0x5ab,0x565)](_0x34f93e,_0x2a0541)){const _0x207704=_0x34f93e[_0x2a0541],_0x1699e6=_0x241049[_0x2a0541];if(Array['isArray'](_0x207704)){_0x4ffc2b[_0x2a0541]=_0x207704[_0x1a418e(-0x118,-0x8e)]();continue;}if(_0x207704&&typeof _0x207704==='object'){_0x4ffc2b[_0x2a0541]=deepMerge(_0x207704,_0x1699e6||{});continue;}_0x207704!==undefined&&(_0x4ffc2b[_0x2a0541]=_0x207704);}}return _0x4ffc2b;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x381c3c,_0x529a2f,_0x26d930,_0x4388e9,_0x55106c){this['context']=_0x381c3c,this['options']=_0x26d930,this['viewerParameters']=_0x4388e9,this['windData']=_0x529a2f,this['frameRate']=0x3c,this[_0x393695(0x447,0x47a)]=0x1;const _0x5eabdf={};_0x5eabdf[_0x2bef33(0x159,0x1df)]=_0x55106c,_0x5eabdf['samplingWindow']=0x1;function _0x393695(_0x1486dc,_0x3ee946){return _0x5c3e0e(_0x3ee946,_0x1486dc- -0x18c);}_0x5eabdf['quietPeriod']=0x0,this[_0x393695(0x45a,0x437)]=new FrameRateMonitor(_0x5eabdf),this['initFrameRate']();function _0x2bef33(_0x434b88,_0x1e9ab2){return _0x6a32fe(_0x1e9ab2,_0x434b88- -0x210);}this['createWindTextures'](),this['createParticlesTextures'](),this[_0x393695(0x438,0x405)]();}['initFrameRate'](){function _0x5c491e(_0x1f6de0,_0x5e270e){return _0x6a32fe(_0x5e270e,_0x1f6de0- -0x1bb);}const _0xcd1e3f=()=>{function _0x2ceb75(_0x856b72,_0x4c9c32){return _0x5a73(_0x856b72-0x22a,_0x4c9c32);}this['frameRateMonitor']['lastFramesPerSecond']>0x14&&(this['frameRate']=this[_0x2ceb75(0x4b2,0x465)]['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math['max'](this['frameRate'],0x1));};_0xcd1e3f();function _0x403b7d(_0x249115,_0x3c3d23){return _0x5c3e0e(_0x249115,_0x3c3d23- -0x32a);}const _0x517379=setInterval(_0xcd1e3f,0x3e8),_0x3b174f=this[_0x5c491e(0x288,0x256)]['bind'](this);this[_0x403b7d(0x257,0x2b1)]=()=>{clearInterval(_0x517379),_0x3b174f();};}['createWindTextures'](){const _0x4d4f31={};_0x4d4f31['minificationFilter']=TextureMinificationFilter$1['LINEAR'],_0x4d4f31['magnificationFilter']=TextureMagnificationFilter$1[_0x36fc29(0x31f,0x2ae)];function _0x36fc29(_0x32b94b,_0x554d9b){return _0x5c3e0e(_0x554d9b,_0x32b94b- -0x1bf);}function _0x3b95ec(_0x1c4402,_0x855843){return _0x5c3e0e(_0x1c4402,_0x855843- -0x446);}const _0x456f25={'context':this['context'],'width':this[_0x3b95ec(0xd6,0xc7)]['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1[_0x3b95ec(0x1d1,0x196)],'pixelDatatype':PixelDatatype$1[_0x3b95ec(0xfd,0x9c)],'flipY':this['options'][_0x3b95ec(0x108,0x126)]??![],'sampler':new Sampler$1(_0x4d4f31)};this['windTextures']={'U':new Texture$1({..._0x456f25,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x456f25,'source':{'arrayBufferView':new Float32Array(this[_0x36fc29(0x34e,0x2c4)]['v'][_0x36fc29(0x32e,0x324)])}})};}['createParticlesTextures'](){const _0x5e6276={};_0x5e6276['minificationFilter']=TextureMinificationFilter$1[_0x364c84(0x473,0x4b6)];function _0x364c84(_0x37b572,_0x46e5e2){return _0x5c3e0e(_0x46e5e2,_0x37b572- -0x10c);}_0x5e6276['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];const _0x3f7cc0={'context':this[_0x364c84(0x3fd,0x41b)],'width':this[_0x364c84(0x418,0x390)]['particlesTextureSize'],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1[_0x364c84(0x416,0x411)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this['options'][_0x364c84(0x3e4,0x459)]*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x5e6276)};function _0x2ca8cd(_0x3486ce,_0x2ede23){return _0x5c3e0e(_0x2ede23,_0x3486ce- -0x3e);}this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x3f7cc0),'currentParticlesPosition':new Texture$1(_0x3f7cc0),'nextParticlesPosition':new Texture$1(_0x3f7cc0),'postProcessingPosition':new Texture$1(_0x3f7cc0),'particlesSpeed':new Texture$1(_0x3f7cc0)};}['destroyParticlesTextures'](){function _0x163609(_0xeab66,_0x175d73){return _0x6a32fe(_0x175d73,_0xeab66-0xd2);}Object['values'](this['particlesTextures'])['forEach'](_0x1f5b45=>_0x1f5b45[_0x163609(0x515,0x4b0)]());}['createComputingPrimitives'](){function _0x108945(_0x29a847,_0x5b1d6b){return _0x5c3e0e(_0x29a847,_0x5b1d6b- -0x470);}function _0x2a32cf(_0xb34107,_0x5bc21a){return _0x5c3e0e(_0xb34107,_0x5bc21a- -0x106);}this[_0x108945(0x10b,0x127)]={'calculateSpeed':new CustomPrimitive({'commandType':_0x2a32cf(0x4f1,0x48d),'uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this[_0x108945(0xf0,0xb8)]['V'],'uRange':()=>new Cartesian2$1(this['windData']['u']['min'],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v']['min'],this['windData']['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData']['speed'][_0x2a32cf(0x4bc,0x44d)],this['windData']['speed']['max']),'currentParticlesPosition':()=>this['particlesTextures'][_0x2a32cf(0x463,0x3f4)],'speedScaleFactor':()=>{function _0x25674b(_0x49e3f3,_0x5aa4de){return _0x108945(_0x5aa4de,_0x49e3f3-0x361);}return(this[_0x25674b(0x4ac,0x524)]['pixelSize']+0x32)*this['options']['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this[_0x108945(0xd5,0x9d)][_0x108945(0x84,0xd8)],this['windData'][_0x108945(0x40,0xa5)]),'minimum':()=>new Cartesian2$1(this['windData'][_0x2a32cf(0x419,0x3e8)]['west'],this[_0x2a32cf(0x386,0x407)]['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData'][_0x2a32cf(0x3a9,0x3e8)]['east'],this[_0x108945(0x8c,0x9d)]['bounds']['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':()=>{const _0x55374d=this['particlesTextures']['previousParticlesPosition'];this[_0x29b14c(0x62d,0x689)]['previousParticlesPosition']=this['particlesTextures'][_0x29b14c(0x56a,0x592)];function _0x29b14c(_0x53a1ab,_0x550c82){return _0x2a32cf(_0x550c82,_0x53a1ab-0x176);}function _0xc09240(_0x5f2422,_0x3bac8d){return _0x108945(_0x3bac8d,_0x5f2422-0xc3);}this['particlesTextures']['currentParticlesPosition']=this['particlesTextures'][_0xc09240(0x240,0x25d)],this[_0x29b14c(0x62d,0x6a4)]['postProcessingPosition']=_0x55374d,this['primitives']['calculateSpeed']['commandToExecute']&&(this['primitives']['calculateSpeed']['commandToExecute'][_0xc09240(0x1ff,0x25a)]=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this[_0x108945(0x77,0xb4)]['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x2a32cf(0x3a6,0x3f4)],'particlesSpeed':()=>this[_0x2a32cf(0x444,0x4b7)][_0x108945(0x6f,0xc1)]},'fragmentShaderSource':ShaderManager[_0x2a32cf(0x4d6,0x4c6)](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x523040(_0x63d3ae,_0x180f6d){return _0x2a32cf(_0x63d3ae,_0x180f6d-0x4d);}this['primitives']['updatePosition']['commandToExecute']&&(this['primitives']['updatePosition']['commandToExecute']['outputTexture']=this[_0x523040(0x53c,0x504)]['nextParticlesPosition']);},'isDynamic':()=>this[_0x108945(0x5e,0xb4)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this[_0x2a32cf(0x452,0x4b7)][_0x2a32cf(0x46f,0x42b)],'lonRange':()=>this[_0x108945(0x155,0x14b)]['lonRange'],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x108945(0x44,0x9d)]['bounds'][_0x108945(0x12,0x77)],this['windData']['bounds']['north']),'randomCoefficient':function(){function _0x5db684(_0x4f854b,_0x692b69){return _0x2a32cf(_0x4f854b,_0x692b69- -0x5c9);}return Math[_0x5db684(-0x25c,-0x1e0)]();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this[_0x108945(0xa6,0xb4)]['dropRateBump'],'useViewerBounds':()=>this[_0x108945(0xb5,0xb4)]['useViewerBounds']},'fragmentShaderSource':ShaderManager[_0x2a32cf(0x3f7,0x46e)](),'outputTexture':this['particlesTextures'][_0x108945(0x1d5,0x17d)],'preExecute':()=>{function _0xf1b78c(_0x29392d,_0x346eea){return _0x108945(_0x346eea,_0x29392d- -0x210);}function _0x337c19(_0x53c97d,_0x4c33e8){return _0x108945(_0x4c33e8,_0x53c97d- -0x26d);}this[_0xf1b78c(-0xe9,-0x75)][_0x337c19(-0xf0,-0x122)][_0x337c19(-0x113,-0xb3)]&&(this['primitives'][_0x337c19(-0xf0,-0x13d)]['commandToExecute'][_0xf1b78c(-0xd4,-0xb7)]=this['particlesTextures'][_0xf1b78c(-0x93,-0xa4)]);},'isDynamic':()=>this[_0x108945(0xd9,0xb4)][_0x108945(0x16c,0xf0)]})};}['reCreateWindTextures'](){function _0x4b8823(_0x4c104f,_0x5602eb){return _0x5c3e0e(_0x4c104f,_0x5602eb- -0x5f0);}function _0x261164(_0x43df57,_0x4a69b2){return _0x5c3e0e(_0x43df57,_0x4a69b2- -0x6b5);}this['windTextures']['U']['destroy'](),this[_0x261164(-0x178,-0x18d)]['V'][_0x261164(-0xe8,-0xda)](),this[_0x261164(-0x16d,-0x1a3)]();}[_0x6a32fe(0x3a6,0x3cf)](_0x3d582f){this['windData']=_0x3d582f,this['reCreateWindTextures']();}['updateOptions'](_0x3aa61f){const _0x4c84dc=_0x3aa61f[_0x539763(0x2b7,0x239)]!==undefined&&_0x3aa61f[_0x539763(0x2b7,0x2d7)]!==this['options'][_0x306820(0x1a5,0x182)];function _0x306820(_0x530db9,_0x40d291){return _0x5c3e0e(_0x530db9,_0x40d291- -0x3ea);}this['options']=deepMerge(_0x3aa61f,this[_0x306820(0xec,0x13a)]);function _0x539763(_0x596965,_0x4ac8e9){return _0x5c3e0e(_0x4ac8e9,_0x596965- -0x2b5);}_0x4c84dc&&this[_0x539763(0x26c,0x2d5)]();}['processWindData'](_0x39dfaa){const {array:_0x44fdb3}=_0x39dfaa;let {min:_0x597b93,max:_0x353217}=_0x39dfaa;const _0x54879b=new Float32Array(_0x44fdb3[_0x316175(-0x1f,-0x26)]);function _0x316175(_0x2092f9,_0xb2056c){return _0x6a32fe(_0x2092f9,_0xb2056c- -0x372);}function _0x582fff(_0x393594,_0x4eeb53){return _0x5c3e0e(_0x4eeb53,_0x393594- -0x69d);}_0x597b93===undefined&&(console['warn'](_0x582fff(-0x16e,-0x1ed)),_0x597b93=Math['min'](..._0x44fdb3));_0x353217===undefined&&(console['warn'](_0x316175(-0x21,0xc)),_0x353217=Math['max'](..._0x44fdb3));const _0x1fb345=Math[_0x582fff(-0x172,-0x112)](Math['abs'](_0x597b93),Math[_0x316175(0x87,0x12)](_0x353217));for(let _0x5bcf76=0x0;_0x5bcf76<_0x44fdb3['length'];_0x5bcf76++){const _0x2bf3f1=_0x44fdb3[_0x5bcf76]/_0x1fb345;_0x54879b[_0x5bcf76]=_0x2bf3f1;}return _0x54879b;}['destroy'](){Object['values'](this['windTextures'])['forEach'](_0x55fc97=>_0x55fc97['destroy']()),Object['values'](this['particlesTextures'])['forEach'](_0x5890f2=>_0x5890f2['destroy']()),Object[_0x4d9e93(-0x4f,0xf)](this['primitives'])[_0x562605(0x39c,0x35b)](_0x26af94=>_0x26af94['destroy']());function _0x562605(_0x27fe40,_0x2cb472){return _0x6a32fe(_0x27fe40,_0x2cb472- -0x88);}function _0x4d9e93(_0x1146af,_0x562c4c){return _0x6a32fe(_0x562c4c,_0x1146af- -0x47d);}this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x6a32fe(0x367,0x3a7)];class WindParticlesRendering{constructor(_0x3821fa,_0x5c2a09,_0x5c66d6,_0x22a41f){this['context']=_0x3821fa;function _0x2e1dab(_0x447d34,_0x1aa36a){return _0x6a32fe(_0x1aa36a,_0x447d34- -0x3eb);}this['options']=_0x5c2a09,this[_0x35df22(0x499,0x495)]=_0x5c66d6;function _0x35df22(_0x1e1672,_0x2ced20){return _0x6a32fe(_0x2ced20,_0x1e1672-0x76);}this['computing']=_0x22a41f,(typeof this['options'][_0x35df22(0x3ce,0x448)]!=='number'||this[_0x35df22(0x402,0x434)][_0x35df22(0x3ce,0x3ed)]<=0x0)&&(console[_0x35df22(0x477,0x477)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options']['particlesTextureSize']=0x100),this['colorTable']=this['createColorTableTexture'](),this['textures']=this[_0x2e1dab(0x68,0x51)](),this[_0x2e1dab(-0x2e,-0x5b)]=this['createRenderingFramebuffers'](),this[_0x2e1dab(0x14,0x60)]=this['createPrimitives']();}[_0x5c3e0e(0x5cf,0x5eb)](){const _0x484346={};_0x484346[_0x368c71(-0x1dc,-0x21d)]=this['context'];function _0x1873fc(_0xf8f3ab,_0x1c0559){return _0x6a32fe(_0x1c0559,_0xf8f3ab- -0x36f);}_0x484346['width']=this[_0x1873fc(0x2,0x7a)]['drawingBufferWidth'];function _0x368c71(_0x502dfa,_0x3c1283){return _0x6a32fe(_0x502dfa,_0x3c1283- -0x58e);}_0x484346['height']=this['context']['drawingBufferHeight'],_0x484346['pixelFormat']=PixelFormat['RGBA'],_0x484346['pixelDatatype']=PixelDatatype[_0x368c71(-0x178,-0x1bc)];const _0xe3a730=_0x484346,_0x14cfd7={};_0x14cfd7['context']=this['context'],_0x14cfd7[_0x1873fc(0x41,-0x33)]=this['context'][_0x368c71(-0x206,-0x23b)],_0x14cfd7['height']=this['context']['drawingBufferHeight'],_0x14cfd7['pixelFormat']=PixelFormat['DEPTH_COMPONENT'],_0x14cfd7['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x44df71=_0x14cfd7;return{'segmentsColor':new Texture(_0xe3a730),'segmentsDepth':new Texture(_0x44df71)};}[_0x5c3e0e(0x551,0x576)](){const _0x559a30={};_0x559a30[_0x1fc298(0xe9,0x140)]=this['context'],_0x559a30[_0x1b922c(0x3f4,0x3a4)]=[this['textures']['segmentsColor']];function _0x1fc298(_0x35e5c3,_0x7888fb){return _0x6a32fe(_0x7888fb,_0x35e5c3- -0x288);}_0x559a30[_0x1fc298(0x1b7,0x140)]=this['textures'][_0x1b922c(0x3bc,0x3cb)];function _0x1b922c(_0x380321,_0x15b788){return _0x5c3e0e(_0x380321,_0x15b788- -0x15f);}return{'segments':new Framebuffer(_0x559a30)};}['destoryRenderingFramebuffers'](){function _0x4ad889(_0x579afe,_0x1be04b){return _0x5c3e0e(_0x1be04b,_0x579afe- -0x167);}Object['values'](this[_0x4ad889(0x3ee,0x405)])['forEach'](_0x51c0f9=>{_0x51c0f9['destroy']();});}[_0x5c3e0e(0x4c1,0x507)](){const _0x464019=new Float32Array(this['options']['colors'][_0x38635b(0x24a,0x1d3)](_0x38a666=>{function _0x1579f7(_0x3f121b,_0x1e1c99){return _0x38635b(_0x3f121b,_0x1e1c99- -0x37);}const _0x15d891=Color$1[_0x1128d3(0x348,0x2fe)](_0x38a666);function _0x1128d3(_0x4cb25c,_0x1cf96d){return _0x38635b(_0x4cb25c,_0x1cf96d-0x1b7);}return[_0x15d891['red'],_0x15d891[_0x1128d3(0x22a,0x292)],_0x15d891['blue'],_0x15d891['alpha']];})),_0x55b10b={};function _0x293474(_0x1753ef,_0x31294b){return _0x5c3e0e(_0x1753ef,_0x31294b- -0xbe);}_0x55b10b['minificationFilter']=TextureMinificationFilter['LINEAR'];function _0x38635b(_0x1c1718,_0x345df3){return _0x5c3e0e(_0x1c1718,_0x345df3- -0x40f);}return _0x55b10b[_0x38635b(0x189,0x191)]=TextureMagnificationFilter[_0x38635b(0x109,0xcf)],_0x55b10b[_0x293474(0x45f,0x447)]=TextureWrap['CLAMP_TO_EDGE'],_0x55b10b['wrapT']=TextureWrap[_0x293474(0x539,0x4c3)],new Texture({'context':this['context'],'width':this[_0x293474(0x407,0x466)]['colors'][_0x293474(0x476,0x426)],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x55b10b),'source':{'width':this[_0x293474(0x3ff,0x466)]['colors']['length'],'height':0x1,'arrayBufferView':_0x464019}});}[_0x5c3e0e(0x643,0x5bf)](){function _0xdb9bcc(_0x633ce0,_0x5a28e4){return _0x5c3e0e(_0x633ce0,_0x5a28e4- -0x2e2);}const _0x160ee5=0x4,_0x59bf6a=this[_0x5ef516(0x568,0x52b)][_0x5ef516(0x54a,0x4f7)];let _0x199901=[];for(let _0x3497b2=0x0;_0x3497b2<_0x59bf6a;_0x3497b2++){for(let _0xe5933f=0x0;_0xe5933f<_0x59bf6a;_0xe5933f++){for(let _0x23492e=0x0;_0x23492e<_0x160ee5;_0x23492e++){_0x199901[_0xdb9bcc(0x234,0x253)](_0x3497b2/_0x59bf6a),_0x199901[_0x5ef516(0x4da,0x53c)](_0xe5933f/_0x59bf6a);}}}function _0x5ef516(_0x2e1b11,_0x474c35){return _0x5c3e0e(_0x2e1b11,_0x474c35-0x7);}_0x199901=new Float32Array(_0x199901);const _0x5c39a8=this['options']['particlesTextureSize']**0x2;let _0x35ad71=[];for(let _0x587e90=0x0;_0x587e90<_0x5c39a8;_0x587e90++){_0x35ad71['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x35ad71=new Float32Array(_0x35ad71);let _0x171f39=[];for(let _0x2c5a0b=0x0,_0xeba1b7=0x0;_0x2c5a0b<_0x5c39a8;_0x2c5a0b++){_0x171f39['push'](_0xeba1b7+0x0,_0xeba1b7+0x1,_0xeba1b7+0x2,_0xeba1b7+0x2,_0xeba1b7+0x1,_0xeba1b7+0x3),_0xeba1b7+=_0x160ee5;}_0x171f39=new Uint32Array(_0x171f39);const _0x98abe3={};_0x98abe3[_0xdb9bcc(0x30d,0x2fd)]=ComponentDatatype['FLOAT'],_0x98abe3['componentsPerAttribute']=0x2,_0x98abe3[_0xdb9bcc(0x268,0x2e4)]=_0x199901;const _0x1b6754={};_0x1b6754['componentDatatype']=ComponentDatatype['FLOAT'],_0x1b6754['componentsPerAttribute']=0x3,_0x1b6754['values']=_0x35ad71;const _0x55ce3e=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x98abe3),'normal':new GeometryAttribute(_0x1b6754)}),'indices':_0x171f39});return _0x55ce3e;}['createRawRenderState'](_0x25c130){const _0x4ba650={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x25c130};function _0x3cb6b4(_0x12acb3,_0x2c23e6){return _0x6a32fe(_0x2c23e6,_0x12acb3- -0x13d);}return Appearance[_0x3cb6b4(0x319,0x399)](!![],![],_0x4ba650);}['createPrimitives'](){const _0x3f4a45={};_0x3f4a45['st']=0x0,_0x3f4a45[_0x1446ed(0x5e7,0x5ac)]=0x1;const _0x11a2f8={};_0x11a2f8['enabled']=!![];const _0x1c4ba8={};_0x1c4ba8[_0x1446ed(0x658,0x69e)]=!![],_0x1c4ba8[_0x2c25e4(0x15b,0x15b)]=WebGLRenderingContext['FUNC_ADD'],_0x1c4ba8[_0x2c25e4(0x194,0x124)]=WebGLRenderingContext['SRC_ALPHA'],_0x1c4ba8[_0x2c25e4(0x180,0x111)]=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x31b806={};_0x31b806['viewport']=undefined,_0x31b806[_0x1446ed(0x60d,0x65c)]=_0x11a2f8;function _0x2c25e4(_0x4bb077,_0x3024d2){return _0x6a32fe(_0x3024d2,_0x4bb077- -0x28b);}_0x31b806['depthMask']=!![],_0x31b806[_0x2c25e4(0x137,0xf1)]=_0x1c4ba8;function _0x1446ed(_0x2741ba,_0x3030db){return _0x5c3e0e(_0x3030db,_0x2741ba-0x83);}const _0x40a82b=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x3f4a45,'geometry':this[_0x1446ed(0x642,0x5fb)](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this[_0x2c25e4(0x165,0x127)][_0x1446ed(0x640,0x696)][_0x2c25e4(0x10d,0xe6)],'currentParticlesPosition':()=>this['computing'][_0x2c25e4(0x19a,0x21b)]['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures'][_0x2c25e4(0x1ca,0x1e9)],'particlesSpeed':()=>this['computing']['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{var _0x1f0066,_0x33d8de;function _0x22521a(_0x11e645,_0x15f3ba){return _0x1446ed(_0x11e645- -0x635,_0x15f3ba);}function _0x41b1b5(_0x58a522,_0x590893){return _0x2c25e4(_0x590893- -0x1f,_0x58a522);}const _0x2d14d7=new Cartesian2(((_0x1f0066=this[_0x41b1b5(0x65,0xe2)][_0x22521a(-0xb7,-0xe7)])===null||_0x1f0066===void 0x0?void 0x0:_0x1f0066['min'])??this[_0x41b1b5(0x188,0x146)]['windData'][_0x41b1b5(0x15d,0xec)]['min'],((_0x33d8de=this['options']['domain'])===null||_0x33d8de===void 0x0?void 0x0:_0x33d8de[_0x41b1b5(0x97,0xe9)])??this['computing']['windData'][_0x22521a(-0x84,-0x41)]['max']);return _0x2d14d7;},'displayRange':()=>{function _0x384bcf(_0x509876,_0x55ffc6){return _0x2c25e4(_0x509876-0x130,_0x55ffc6);}function _0x58d21c(_0x45f1c3,_0x32ce5d){return _0x2c25e4(_0x32ce5d-0x26a,_0x45f1c3);}var _0x3b858c,_0x1a5819;const _0x4d36fd=new Cartesian2(((_0x3b858c=this['options']['displayRange'])===null||_0x3b858c===void 0x0?void 0x0:_0x3b858c[_0x384bcf(0x260,0x2ae)])??this['computing']['windData']['speed']['min'],((_0x1a5819=this['options']['displayRange'])===null||_0x1a5819===void 0x0?void 0x0:_0x1a5819['max'])??this['computing']['windData'][_0x58d21c(0x3e9,0x375)]['max']);return _0x4d36fd;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this[_0x1446ed(0x58c,0x55f)][_0x2c25e4(0xc8,0x71)]/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters'][_0x2c25e4(0x19b,0x1fc)],'lineWidth':()=>{function _0x5345ee(_0x44a2a7,_0x593ccf){return _0x2c25e4(_0x593ccf- -0x265,_0x44a2a7);}const _0x1c999b={};_0x1c999b['min']=0x1,_0x1c999b['max']=0x2;const _0x3dd340=this['options']['lineWidth']||_0x1c999b;return new Cartesian2(_0x3dd340[_0x5345ee(-0xc5,-0x135)],_0x3dd340['max']);},'lineLength':()=>{function _0x52f251(_0xa82b61,_0x484722){return _0x2c25e4(_0x484722-0x29b,_0xa82b61);}const _0x54b89b={};_0x54b89b['min']=0x14,_0x54b89b[_0x32f4ce(0x4a3,0x493)]=0x64;function _0x32f4ce(_0x41ad7e,_0x1db3d1){return _0x2c25e4(_0x1db3d1-0x38b,_0x41ad7e);}const _0x3b8f8a=this['options']['lineLength']||_0x54b89b;return new Cartesian2(_0x3b8f8a[_0x52f251(0x3b1,0x3cb)],_0x3b8f8a['max']);},'is3D':()=>this['viewerParameters'][_0x1446ed(0x5dc,0x619)]===SceneMode[_0x1446ed(0x668,0x5e1)],'segmentsDepthTexture':()=>this['textures'][_0x1446ed(0x5ad,0x608)]},'vertexShaderSource':ShaderManager[_0x1446ed(0x5df,0x616)](),'fragmentShaderSource':ShaderManager[_0x2c25e4(0x16d,0x1ed)](),'rawRenderState':this['createRawRenderState'](_0x31b806)}),_0x46fdc1={};return _0x46fdc1[_0x1446ed(0x5f6,0x605)]=_0x40a82b,_0x46fdc1;}[_0x5c3e0e(0x5f9,0x5e8)](){const _0x2cedf6=this[_0xb79d5f(0x479,0x4fe)]();this['primitives'][_0xb79d5f(0x42d,0x478)][_0xb79d5f(0x408,0x420)]=_0x2cedf6;function _0xb79d5f(_0x4ebe2f,_0x4bfb2c){return _0x6a32fe(_0x4bfb2c,_0x4ebe2f-0x52);}const _0x1eb1a8={};_0x1eb1a8[_0x1584bf(0x8e,0xca)]=this['context'];function _0x1584bf(_0x24dacb,_0x2e812c){return _0x5c3e0e(_0x24dacb,_0x2e812c- -0x43f);}_0x1eb1a8[_0xb79d5f(0x408,0x3aa)]=_0x2cedf6,_0x1eb1a8[_0x1584bf(0xaf,0x12a)]=this['primitives']['segments']['attributeLocations'],_0x1eb1a8[_0x1584bf(0x112,0x14d)]=BufferUsage['STATIC_DRAW'];const _0x2d1be8=VertexArray[_0xb79d5f(0x3d7,0x370)](_0x1eb1a8);this['primitives']['segments'][_0xb79d5f(0x484,0x4aa)]&&(this['primitives']['segments']['commandToExecute'][_0xb79d5f(0x48b,0x4c1)]=_0x2d1be8);}[_0x6a32fe(0x3fc,0x44b)](){this['colorTable'][_0x7bcd1c(0x3da,0x3d1)]();function _0x7bcd1c(_0x64af8a,_0x59c80f){return _0x5c3e0e(_0x59c80f,_0x64af8a- -0x201);}this['colorTable']=this['createColorTableTexture']();}[_0x6a32fe(0x3b4,0x3ec)](_0x3cf3c5){function _0xf91df8(_0x4abf52,_0x332aef){return _0x6a32fe(_0x332aef,_0x4abf52- -0x467);}const _0x37039b=_0x3cf3c5[_0x34af71(0x20f,0x27b)]&&JSON[_0x34af71(0x1e6,0x228)](_0x3cf3c5['colors'])!==JSON['stringify'](this[_0xf91df8(-0xdb,-0x96)][_0xf91df8(-0xa4,-0x52)]);this['options']=deepMerge(_0x3cf3c5,this['options']);function _0x34af71(_0x1911d0,_0xb06495){return _0x5c3e0e(_0xb06495,_0x1911d0- -0x34c);}_0x37039b&&this[_0x34af71(0x297,0x2dc)]();}['destroy'](){function _0x3cb28c(_0x5d2dc9,_0x576b21){return _0x6a32fe(_0x5d2dc9,_0x576b21- -0x109);}Object['values'](this[_0x25e8c8(0x39f,0x318)])['forEach'](_0x557a2e=>{_0x557a2e['destroy']();}),Object['values'](this[_0x25e8c8(0x34d,0x35a)])[_0x25e8c8(0x3c8,0x33e)](_0x2a3d34=>{_0x2a3d34['destroy']();});function _0x25e8c8(_0x514b4b,_0xcc48d4){return _0x6a32fe(_0x514b4b,_0xcc48d4- -0xa5);}this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0xff5371,_0x1eafc0,_0x23b348,_0x19461d,_0x265f42){this['context']=_0xff5371,this[_0x39397b(0x5aa,0x566)]=_0x23b348;function _0x2f0717(_0x6d849e,_0x122e57){return _0x5c3e0e(_0x122e57,_0x6d849e- -0x709);}this['viewerParameters']=_0x19461d,this[_0x2f0717(-0x181,-0x1de)]=new WindParticlesComputing(_0xff5371,_0x1eafc0,_0x23b348,_0x19461d,_0x265f42),this[_0x39397b(0x5f0,0x588)]=new WindParticlesRendering(_0xff5371,_0x23b348,_0x19461d,this['computing']);function _0x39397b(_0x34e13b,_0x26aa12){return _0x5c3e0e(_0x34e13b,_0x26aa12-0x42);}this[_0x2f0717(-0x16d,-0x12e)]();}[_0x6a32fe(0x45a,0x40f)](){const _0x133eed=[this['computing'][_0x149fc8(0x5cc,0x5e7)]['calculateSpeed'],this[_0x149fc8(0x589,0x5d8)]['primitives'][_0x149fc8(0x63a,0x606)],this['computing']['primitives']['postProcessingPosition'],this[_0x13a696(0x54a,0x4eb)]['primitives']['segments']];function _0x13a696(_0x245607,_0x3ca9d4){return _0x6a32fe(_0x3ca9d4,_0x245607-0x19c);}function _0x149fc8(_0x18b0d8,_0xe1899){return _0x5c3e0e(_0x18b0d8,_0xe1899-0x50);}return _0x133eed;}[_0x6a32fe(0x380,0x404)](){const _0x331e86=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});function _0x2d6afd(_0x1a5c3c,_0x70840d){return _0x5c3e0e(_0x70840d,_0x1a5c3c- -0x5fb);}function _0x170bc5(_0x26b473,_0x2f25ec){return _0x5c3e0e(_0x2f25ec,_0x26b473-0x3c);}Object[_0x2d6afd(-0xe3,-0xf1)](this[_0x170bc5(0x582,0x5c2)][_0x2d6afd(-0xa6,-0x73)])['forEach'](_0x339592=>{function _0x26ab56(_0xcf8230,_0x4f01bc){return _0x2d6afd(_0x4f01bc-0x51,_0xcf8230);}_0x331e86['framebuffer']=this['rendering'][_0x55fd90(0x8a,0xc6)][_0x339592];function _0x55fd90(_0x1259d4,_0x1dbd6a){return _0x170bc5(_0x1dbd6a- -0x4cb,_0x1259d4);}_0x331e86['execute'](this[_0x55fd90(0x3b,0x7a)]);});}[_0x6a32fe(0x38c,0x3ce)](_0x3a9d19){function _0x4e17f7(_0x1ceb1e,_0x543f10){return _0x6a32fe(_0x543f10,_0x1ceb1e- -0x501);}let _0xbc8e23=![];_0x3a9d19[_0x4e17f7(-0x1a9,-0x1ad)]&&this['options'][_0xadce4b(0x49d,0x44f)]!==_0x3a9d19[_0x4e17f7(-0x1a9,-0x221)]&&(_0xbc8e23=!![]);const _0x1aa0cf=deepMerge(_0x3a9d19,this[_0xadce4b(0x503,0x483)]);function _0xadce4b(_0x2f9b56,_0x482abd){return _0x5c3e0e(_0x2f9b56,_0x482abd- -0xa1);}if(_0x1aa0cf['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x1aa0cf,this[_0xadce4b(0x4d8,0x4a5)]['updateOptions'](_0x3a9d19),this[_0x4e17f7(-0x111,-0x18c)]['updateOptions'](_0x3a9d19),_0xbc8e23&&(this[_0xadce4b(0x464,0x4e7)]['destroyParticlesTextures'](),this['computing'][_0xadce4b(0x54e,0x50e)](),this['rendering']['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x3e32ea){function _0xb105dd(_0x461912,_0x1f6c34){return _0x5c3e0e(_0x461912,_0x1f6c34-0x71);}function _0x1d8fe3(_0x4d59c0,_0x4dd097){return _0x5c3e0e(_0x4d59c0,_0x4dd097-0x83);}this[_0x1d8fe3(0x642,0x63e)]=_0x3e32ea,this['computing'][_0xb105dd(0x6a4,0x62c)]=_0x3e32ea,this['rendering'][_0xb105dd(0x65d,0x62c)]=_0x3e32ea;}['destroy'](){this['computing']['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace[_0x6a32fe(0x320,0x3a7)],BaseLayer$1=mars3d__namespace['layer'][_0x6a32fe(0x3c8,0x452)],_0x4c8d9b={};_0x4c8d9b['min']=0x1,_0x4c8d9b['max']=0x2;const _0x4cab09={};_0x4cab09['min']=0x14,_0x4cab09[_0x5c3e0e(0x4c1,0x52b)]=0x64;const _0x1d0ccf={};_0x1d0ccf['particlesTextureSize']=0x64,_0x1d0ccf['fixedHeight']=0x0,_0x1d0ccf['lineWidth']=_0x4c8d9b,_0x1d0ccf['lineLength']=_0x4cab09,_0x1d0ccf[_0x6a32fe(0x310,0x35a)]=0x1,_0x1d0ccf[_0x6a32fe(0x37e,0x3b7)]=0.003,_0x1d0ccf[_0x6a32fe(0x3de,0x43e)]=0.001,_0x1d0ccf['colors']=[_0x5c3e0e(0x641,0x5c5)],_0x1d0ccf['flipY']=![],_0x1d0ccf['dynamic']=!![];const DEF_OPTIONS=_0x1d0ccf;class WindLayer extends BaseLayer$1{constructor(_0x24952b={}){_0x24952b={...DEF_OPTIONS,..._0x24952b},super(_0x24952b),this['_setOptionsHook'](_0x24952b,_0x24952b);}get['layer'](){return this['primitives'];}get['data'](){function _0xca6763(_0x399ef5,_0x299e83){return _0x6a32fe(_0x399ef5,_0x299e83- -0x48d);}return this[_0xca6763(-0xa0,-0x101)]['data'];}set[_0x6a32fe(0x3c2,0x40a)](_0x4689b5){this['options'][_0x1e1795(0x2ae,0x2e9)]=_0x4689b5;function _0x1e1795(_0x3e8dbd,_0x519bad){return _0x5c3e0e(_0x519bad,_0x3e8dbd- -0x2f4);}this['setData'](_0x4689b5);}get[_0x5c3e0e(0x5ce,0x55b)](){return this['options']['colors'];}set[_0x5c3e0e(0x4e7,0x55b)](_0x57dc91){this[_0x221a56(0x29,0x2)][_0x221a56(0x55,0x39)]=_0x57dc91;function _0x2cb2ba(_0x5719f2,_0x5f0449){return _0x5c3e0e(_0x5f0449,_0x5719f2- -0x3c2);}const _0x5f4c59={};function _0x221a56(_0x3a3f1e,_0x274498){return _0x6a32fe(_0x3a3f1e,_0x274498- -0x38a);}_0x5f4c59['colors']=_0x57dc91,this['_setOptionsHook'](this['options'],_0x5f4c59);}[_0x5c3e0e(0x60d,0x5a9)](_0x39b842){function _0x2de33b(_0x2fcba9,_0x13410e){return _0x5c3e0e(_0x13410e,_0x2fcba9- -0x6c2);}_0x39b842?this[_0x2de33b(-0xf3,-0xdf)]():this['_removedHook']();}['_mountedHook'](){}['_addedHook'](){this[_0x4d8d36(0x406,0x3e8)]=this['_map'][_0x4d8d36(0x406,0x3d6)],this['camera']=this['_map']['camera'];this['options'][_0x83cea5(-0x13d,-0x19b)]&&this[_0x83cea5(-0x125,-0x133)](this['options']['data']);function _0x83cea5(_0xcadd53,_0x6c78b5){return _0x5c3e0e(_0x6c78b5,_0xcadd53- -0x6df);}if(!this['windData']||!this[_0x83cea5(-0x18e,-0x1f9)])return;function _0x4d8d36(_0x22057a,_0x11f05c){return _0x6a32fe(_0x11f05c,_0x22057a-0x9d);}this[_0x83cea5(-0x124,-0x17c)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0x4d8d36(0x3eb,0x3dc)]},this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene']['context'],this[_0x83cea5(-0x1d2,-0x200)],this[_0x83cea5(-0x1bb,-0x190)],this['viewerParameters'],this[_0x4d8d36(0x406,0x3a1)]),this['primitives']=this['particleSystem']['getPrimitives'](),this[_0x4d8d36(0x49c,0x4de)][_0x83cea5(-0x164,-0x103)](_0x4e2121=>{function _0x325a9b(_0x473c23,_0x2ccbcd){return _0x83cea5(_0x473c23-0x1d4,_0x2ccbcd);}function _0x4196d5(_0x57e338,_0x1fdc08){return _0x4d8d36(_0x1fdc08- -0x163,_0x57e338);}this['scene'][_0x325a9b(0x8c,0xfa)][_0x4196d5(0x2b1,0x311)](_0x4e2121);}),this[_0x83cea5(-0x1d3,-0x1a3)][_0x83cea5(-0x154,-0x184)]=0.01,this['camera'][_0x83cea5(-0x18f,-0x1a3)][_0x4d8d36(0x4f1,0x558)](this['updateViewerParameters'][_0x83cea5(-0x1b9,-0x175)](this)),this['scene'][_0x4d8d36(0x4de,0x506)][_0x4d8d36(0x4f1,0x503)](this['updateViewerParameters'][_0x83cea5(-0x1b9,-0x14c)](this)),window['addEventListener']('resize',this['updateViewerParameters']['bind'](this));}['_removedHook'](){this[_0x5ad095(0x78,0x88)]['changed']['removeEventListener'](this['updateViewerParameters']['bind'](this)),this[_0x5ad095(0x6d,0x8)][_0x14fb96(0x9a,0x29)]['removeEventListener'](this[_0x5ad095(0x65,0xbf)]['bind'](this)),window['removeEventListener']('resize',this['updateViewerParameters']['bind'](this));function _0x14fb96(_0x140015,_0x54c5da){return _0x5c3e0e(_0x140015,_0x54c5da- -0x5b0);}this['primitives']&&(this['primitives']['forEach'](_0x51a09f=>{function _0x465389(_0xd1918c,_0x464435){return _0x5ad095(_0xd1918c- -0x124,_0x464435);}function _0x734312(_0x4fd8cd,_0x476d66){return _0x14fb96(_0x4fd8cd,_0x476d66-0x201);}this[_0x465389(-0xb7,-0x4a)][_0x465389(-0x21,-0x78)][_0x465389(-0x20,-0x5a)](_0x51a09f);}),delete this[_0x14fb96(0x17,-0x19)]);function _0x5ad095(_0x44ae12,_0x35003d){return _0x5c3e0e(_0x35003d,_0x44ae12- -0x494);}this['particleSystem']&&(this[_0x14fb96(-0xb1,-0xd0)][_0x5ad095(0x147,0x198)](),delete this['particleSystem']);}[_0x6a32fe(0x3b5,0x422)](_0x13aa62,_0x5d8ab5){this['windData']=this['processWindData'](_0x13aa62);function _0x273498(_0x3ca659,_0x46d065){return _0x6a32fe(_0x3ca659,_0x46d065- -0x59a);}function _0xb362c7(_0x49fca9,_0x24569a){return _0x5c3e0e(_0x49fca9,_0x24569a- -0x74);}if(_0x5d8ab5){this['_removedHook'](),this[_0xb362c7(0x5ba,0x55b)]();return;}this[_0x273498(-0x2c9,-0x252)]?(this['particleSystem']['computing']['updateWindData'](this['windData']),this[_0xb362c7(0x45d,0x48d)]['requestRender']()):this['_addedHook']();}['_setOptionsHook'](_0x5c0756,_0xf878b1){function _0x4984a2(_0x46faea,_0x2ae3d0){return _0x6a32fe(_0x46faea,_0x2ae3d0- -0x3b6);}function _0x5e2cb5(_0x272af9,_0x201939){return _0x6a32fe(_0x272af9,_0x201939- -0x4ee);}this[_0x5e2cb5(-0x22f,-0x1a6)]&&(this['particleSystem'][_0x4984a2(-0x3e,0x18)](_0xf878b1),this['scene']['requestRender']());}[_0x5c3e0e(0x560,0x511)](_0x499adb){var _0x23574f,_0xa7c044;const _0x482392={..._0x499adb},_0xc04949=_0x482392;!_0xc04949['height']&&_0xc04949[_0x9846b0(0x2f1,0x27a)]&&(_0xc04949['height']=_0xc04949['rows']);!_0xc04949['width']&&_0xc04949['cols']&&(_0xc04949[_0x3b4156(0x141,0xbe)]=_0xc04949['cols']);function _0x3b4156(_0x13dae0,_0x3c2f08){return _0x6a32fe(_0x3c2f08,_0x13dae0- -0x26f);}!_0xc04949[_0x3b4156(0xe7,0x12c)]&&(_0xc04949['bounds']={'west':_0xc04949['xmin'],'south':_0xc04949['ymin'],'east':_0xc04949[_0x3b4156(0x17e,0x1c3)],'north':_0xc04949['ymax']});if(!_0xc04949['u']){const _0x5bd7f0={};_0x5bd7f0['array']=_0x499adb['udata'],_0x5bd7f0['min']=_0x499adb[_0x9846b0(0x1a6,0x174)],_0x5bd7f0[_0x3b4156(0x124,0x120)]=_0x499adb['umax'],_0xc04949['u']=_0x5bd7f0;}if(!_0xc04949['v']){const _0x4c22ef={};_0x4c22ef[_0x9846b0(0x1b6,0x180)]=_0x499adb['vdata'],_0x4c22ef['min']=_0x499adb[_0x9846b0(0x1b1,0x1a3)],_0x4c22ef[_0x9846b0(0x1b9,0x1be)]=_0x499adb['vmax'],_0xc04949['v']=_0x4c22ef;}function _0x9846b0(_0x588a23,_0x470b17){return _0x6a32fe(_0x588a23,_0x470b17- -0x1d5);}if(((_0x23574f=_0xc04949['speed'])===null||_0x23574f===void 0x0?void 0x0:_0x23574f[_0x3b4156(0x14c,0x145)])===undefined||((_0xa7c044=_0xc04949[_0x9846b0(0x1dc,0x1c1)])===null||_0xa7c044===void 0x0?void 0x0:_0xa7c044[_0x9846b0(0x14d,0x1be)])===undefined||_0xc04949['speed'][_0x9846b0(0x11b,0x180)]===undefined){const _0x289f48={'array':new Float32Array(_0xc04949['u'][_0x9846b0(0x187,0x180)]['length']),'min':Number[_0x3b4156(0x1a4,0x1e4)],'max':Number['MIN_VALUE']};for(let _0x139dd1=0x0;_0x139dd1<_0xc04949['u']['array']['length'];_0x139dd1++){_0x289f48['array'][_0x139dd1]=Math['sqrt'](_0xc04949['u']['array'][_0x139dd1]*_0xc04949['u'][_0x3b4156(0xe6,0x9d)][_0x139dd1]+_0xc04949['v'][_0x3b4156(0xe6,0xa6)][_0x139dd1]*_0xc04949['v']['array'][_0x139dd1]),_0x289f48['array'][_0x139dd1]!==0x0&&(_0x289f48['min']=Math[_0x3b4156(0x14c,0x140)](_0x289f48[_0x3b4156(0x14c,0xe5)],_0x289f48['array'][_0x139dd1]),_0x289f48[_0x3b4156(0x124,0x19e)]=Math['max'](_0x289f48[_0x3b4156(0x124,0x1ad)],_0x289f48[_0x3b4156(0xe6,0x9a)][_0x139dd1]));}_0xc04949['speed']=_0x289f48;}return _0xc04949;}['updateViewerParameters'](){var _0x44bdfd;const _0x402df3=this[_0x1ef81e(0x5c,-0x22)];if(!_0x402df3)return;const _0xb1a96d=_0x402df3[_0x51ca35(0x4b6,0x444)],_0x21f19b={};_0x21f19b['x']=0x0,_0x21f19b['y']=0x0;const _0x434409={};_0x434409['x']=0x0,_0x434409['y']=_0xb1a96d['clientHeight'];const _0x4b70cd={};_0x4b70cd['x']=_0xb1a96d[_0x51ca35(0x48a,0x454)],_0x4b70cd['y']=0x0;const _0x3b8a43={};_0x3b8a43['x']=_0xb1a96d['clientWidth'],_0x3b8a43['y']=_0xb1a96d['clientHeight'];const _0x29a253=[_0x21f19b,_0x434409,_0x4b70cd,_0x3b8a43];let _0x2f5a5e=0xb4,_0x208971=-0xb4;function _0x1ef81e(_0x1f19a0,_0x163124){return _0x5c3e0e(_0x163124,_0x1f19a0- -0x4a5);}let _0x127ef0=0x5a,_0x3fb130=-0x5a,_0xe8ce9e=![];function _0x51ca35(_0x95846b,_0x12ecee){return _0x6a32fe(_0x95846b,_0x12ecee-0x8a);}for(const _0x408be9 of _0x29a253){const _0x559cfa=_0x402df3['camera']['pickEllipsoid'](new Cesium$1[(_0x51ca35(0x471,0x41e))](_0x408be9['x'],_0x408be9['y']),_0x402df3['globe'][_0x1ef81e(0x5a,0x27)]);if(!_0x559cfa){_0xe8ce9e=!![];break;}const _0x297566=_0x402df3['globe']['ellipsoid']['cartesianToCartographic'](_0x559cfa),_0x52af3c=Cesium$1['Math']['toDegrees'](_0x297566['longitude']),_0x24d972=Cesium$1[_0x51ca35(0x46a,0x42b)]['toDegrees'](_0x297566['latitude']);_0x2f5a5e=Math[_0x51ca35(0x40c,0x445)](_0x2f5a5e,_0x52af3c),_0x208971=Math[_0x51ca35(0x39b,0x41d)](_0x208971,_0x52af3c),_0x127ef0=Math[_0x51ca35(0x4bb,0x445)](_0x127ef0,_0x24d972),_0x3fb130=Math[_0x51ca35(0x3cf,0x41d)](_0x3fb130,_0x24d972);}if(!_0xe8ce9e){const _0x513459=new Cesium$1['Cartesian2'](Math[_0x51ca35(0x3d4,0x41d)](this[_0x1ef81e(0x68,0xe8)]['bounds'][_0x51ca35(0x425,0x474)],_0x2f5a5e),Math['min'](this[_0x1ef81e(0x68,-0x22)]['bounds'][_0x51ca35(0x4b4,0x4e3)],_0x208971)),_0x429987=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds']['south'],_0x127ef0),Math['min'](this['windData'][_0x1ef81e(0x49,0xa2)][_0x1ef81e(0x9b,0x76)],_0x3fb130)),_0x1e2847=(_0x513459['y']-_0x513459['x'])*0.05,_0x3b0487=(_0x429987['y']-_0x429987['x'])*0.05;_0x513459['x']=Math[_0x1ef81e(0x86,0xff)](this[_0x1ef81e(0x68,0x49)]['bounds']['west'],_0x513459['x']-_0x1e2847),_0x513459['y']=Math['min'](this[_0x51ca35(0x3ff,0x3ff)]['bounds']['east'],_0x513459['y']+_0x1e2847),_0x429987['x']=Math['max'](this[_0x51ca35(0x3f8,0x3ff)]['bounds'][_0x1ef81e(0x42,-0xd)],_0x429987['x']-_0x3b0487),_0x429987['y']=Math['min'](this['windData']['bounds'][_0x51ca35(0x404,0x432)],_0x429987['y']+_0x3b0487),this['viewerParameters']['lonRange']=_0x513459,this['viewerParameters'][_0x1ef81e(0x114,0x192)]=_0x429987;const _0x26b804=this[_0x1ef81e(0x68,0xcb)][_0x51ca35(0x445,0x3e0)]['east']-this[_0x51ca35(0x40d,0x3ff)][_0x1ef81e(0x49,0xa5)][_0x51ca35(0x3f8,0x474)],_0x297ce4=this[_0x51ca35(0x43f,0x3ff)]['bounds'][_0x1ef81e(0x9b,0xcf)]-this[_0x51ca35(0x3bb,0x3ff)]['bounds'][_0x1ef81e(0x42,-0x8)],_0x56582c=(_0x513459['y']-_0x513459['x'])/_0x26b804,_0xe01aff=(_0x429987['y']-_0x429987['x'])/_0x297ce4,_0x37fdc1=Math['min'](_0x56582c,_0xe01aff),_0x1b8525=0x3e8*_0x37fdc1;_0x1b8525>0x0&&(this[_0x51ca35(0x465,0x4ad)][_0x51ca35(0x4f7,0x4b0)]=Math[_0x1ef81e(0x86,0xee)](0x0,Math[_0x51ca35(0x41a,0x445)](0x3e8,_0x1b8525)));}this['viewerParameters'][_0x51ca35(0x459,0x44b)]=this[_0x51ca35(0x36b,0x3f3)][_0x1ef81e(0x41,0x88)],(_0x44bdfd=this['particleSystem'])===null||_0x44bdfd===void 0x0||_0x44bdfd['applyViewerParameters'](this['viewerParameters']);}[_0x5c3e0e(0x590,0x5bc)](_0x21c067,_0x271625){const {bounds:_0x25ec02,width:_0x2131c4,height:_0x501a8c,u:_0x366f56,v:_0x20669f,speed:_0x2a7e42}=this[_0xbf79b8(0x4e2,0x478)],{flipY:_0x3f6752}=this[_0xbf79b8(0x4e3,0x48f)];if(_0x21c067<_0x25ec02['west']||_0x21c067>_0x25ec02['east']||_0x271625<_0x25ec02['south']||_0x271625>_0x25ec02['north'])return null;const _0x1e74d6=(_0x21c067-_0x25ec02['west'])/(_0x25ec02['east']-_0x25ec02['west'])*(_0x2131c4-0x1);let _0x158907=(_0x271625-_0x25ec02[_0x16d967(0x4fa,0x499)])/(_0x25ec02[_0x16d967(0x49d,0x4f2)]-_0x25ec02['south'])*(_0x501a8c-0x1);_0x3f6752&&(_0x158907=_0x501a8c-0x1-_0x158907);const _0x329956=Math['floor'](_0x1e74d6),_0x6c6f73=Math[_0xbf79b8(0x3cb,0x453)](_0x158907);function _0xbf79b8(_0x25eb40,_0x2c626d){return _0x6a32fe(_0x25eb40,_0x2c626d-0x103);}const _0x30b5a7=Math[_0x16d967(0x493,0x49a)](_0x1e74d6),_0x2d918f=Math['min'](_0x30b5a7+0x1,_0x2131c4-0x1),_0xeec0e4=Math['floor'](_0x158907),_0x33b341=Math[_0x16d967(0x49a,0x505)](_0xeec0e4+0x1,_0x501a8c-0x1),_0x266252=_0x1e74d6-_0x30b5a7,_0x3fed78=_0x158907-_0xeec0e4,_0x532375=_0x6c6f73*_0x2131c4+_0x329956,_0x31c0c8=_0xeec0e4*_0x2131c4+_0x30b5a7,_0x11d919=_0xeec0e4*_0x2131c4+_0x2d918f,_0x18bfca=_0x33b341*_0x2131c4+_0x30b5a7,_0x116797=_0x33b341*_0x2131c4+_0x2d918f,_0x4839a7=_0x366f56['array'][_0x31c0c8],_0x2001bf=_0x366f56[_0xbf79b8(0x486,0x458)][_0x11d919],_0x4d539f=_0x366f56[_0xbf79b8(0x420,0x458)][_0x18bfca],_0x5eb4db=_0x366f56['array'][_0x116797];function _0x16d967(_0xaf2187,_0x5bf83d){return _0x5c3e0e(_0xaf2187,_0x5bf83d- -0x4e);}const _0x5c09b9=(0x1-_0x266252)*(0x1-_0x3fed78)*_0x4839a7+_0x266252*(0x1-_0x3fed78)*_0x2001bf+(0x1-_0x266252)*_0x3fed78*_0x4d539f+_0x266252*_0x3fed78*_0x5eb4db,_0x1bd5e7=_0x20669f[_0x16d967(0x4af,0x49f)][_0x31c0c8],_0x355716=_0x20669f['array'][_0x11d919],_0x3521a7=_0x20669f['array'][_0x18bfca],_0x5d7327=_0x20669f[_0x16d967(0x516,0x49f)][_0x116797],_0x1d419a=(0x1-_0x266252)*(0x1-_0x3fed78)*_0x1bd5e7+_0x266252*(0x1-_0x3fed78)*_0x355716+(0x1-_0x266252)*_0x3fed78*_0x3521a7+_0x266252*_0x3fed78*_0x5d7327,_0x27b008=Math[_0xbf79b8(0x4bb,0x469)](_0x5c09b9*_0x5c09b9+_0x1d419a*_0x1d419a),_0x543e12={};_0x543e12['u']=_0x366f56['array'][_0x532375],_0x543e12['v']=_0x20669f['array'][_0x532375],_0x543e12[_0xbf79b8(0x477,0x499)]=_0x2a7e42['array'][_0x532375];const _0x4ce28b={};_0x4ce28b['u']=_0x5c09b9,_0x4ce28b['v']=_0x1d419a,_0x4ce28b[_0xbf79b8(0x494,0x499)]=_0x27b008;const _0x2f42f6={};return _0x2f42f6['original']=_0x543e12,_0x2f42f6['interpolated']=_0x4ce28b,_0x2f42f6;}}mars3d__namespace['LayerUtil']['register'](_0x6a32fe(0x3f2,0x44c),WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x5613c4(_0x43ed4e,_0x31d71c){return _0x6a32fe(_0x31d71c,_0x43ed4e- -0xb8);}this['lng']=null,this[_0x5613c4(0x35a,0x3c9)]=null;function _0x4b53f1(_0x5afbcb,_0x2a1881){return _0x6a32fe(_0x2a1881,_0x5afbcb- -0x245);}this['tlng']=null,this['tlat']=null,this['age']=null,this[_0x4b53f1(0x151,0x1c8)]=null;}[_0x5c3e0e(0x56c,0x5db)](){for(const _0xaadc99 in this){delete this[_0xaadc99];}}}class CanvasWindField{constructor(_0x23e348){this['setOptions'](_0x23e348);}get['speedRate'](){return this['_speedRate'];}set[_0x6a32fe(0x44f,0x420)](_0x2df7b3){function _0x28316d(_0x215d68,_0x4c1647){return _0x6a32fe(_0x4c1647,_0x215d68- -0x4b4);}function _0x5a993b(_0x2272f3,_0x22dd20){return _0x6a32fe(_0x22dd20,_0x2272f3- -0x163);}this[_0x28316d(-0x12d,-0x109)]=(0x64-(_0x2df7b3>0x63?0x63:_0x2df7b3))*0x64,this['_calc_speedRate']=[(this['xmax']-this[_0x28316d(-0xae,-0xb8)])/this['_speedRate'],(this['ymax']-this[_0x5a993b(0x23d,0x28e)])/this['_speedRate']];}get[_0x6a32fe(0x2de,0x354)](){function _0x16f15f(_0x186bb6,_0x8e615b){return _0x6a32fe(_0x186bb6,_0x8e615b- -0x58f);}return this[_0x16f15f(-0x183,-0x165)];}set['maxAge'](_0x5312d1){function _0xc61d75(_0x2c0212,_0x111796){return _0x5c3e0e(_0x111796,_0x2c0212- -0x30e);}this[_0xc61d75(0x2b4,0x244)]=_0x5312d1;}[_0x5c3e0e(0x5e2,0x5dd)](_0x2d4efb){this['options']=_0x2d4efb,this[_0x2e1415(0x185,0x151)]=_0x2d4efb['maxAge']||0x78;function _0x2e8049(_0x47c17e,_0x27ae4d){return _0x5c3e0e(_0x27ae4d,_0x47c17e- -0x4ea);}this['speedRate']=_0x2d4efb['speedRate']||0x32;function _0x2e1415(_0x3b6573,_0x5a72a7){return _0x5c3e0e(_0x3b6573,_0x5a72a7- -0x39b);}this[_0x2e1415(0x1ba,0x225)]=[];const _0x5613e5=_0x2d4efb['particlesNumber']||0x1000;for(let _0x24d98a=0x0;_0x24d98a<_0x5613e5;_0x24d98a++){const _0x336f11=this[_0x2e1415(0x1d8,0x1df)](new CanvasParticle());this['particles'][_0x2e1415(0x1fa,0x19a)](_0x336f11);}}[_0x5c3e0e(0x4ea,0x542)](_0x48de0b){this['rows']=_0x48de0b['rows'];function _0xe3f58f(_0x95e5c,_0x33b4b7){return _0x6a32fe(_0x95e5c,_0x33b4b7- -0x33b);}this[_0x581e28(-0x25f,-0x1f6)]=_0x48de0b['cols'],this[_0x581e28(-0x11d,-0x18f)]=_0x48de0b['xmin'],this['xmax']=_0x48de0b['xmax'],this['ymin']=_0x48de0b['ymin'],this[_0xe3f58f(0x9e,0x21)]=_0x48de0b[_0x581e28(-0x1e0,-0x239)],this['grid']=[];const _0x29291a=_0x48de0b['udata'],_0x15306b=_0x48de0b[_0x581e28(-0x190,-0x17c)];let _0x2166c5=![];_0x29291a[_0x581e28(-0x2cc,-0x249)]===this['rows']&&_0x29291a[0x0]['length']===this['cols']&&(_0x2166c5=!![]);let _0x3464ba=0x0,_0x2b9ebe=null,_0xac5ef8=null;function _0x581e28(_0xeeb8b9,_0x5277f9){return _0x6a32fe(_0xeeb8b9,_0x5277f9- -0x595);}for(let _0x1a1b2a=0x0;_0x1a1b2a<this['rows'];_0x1a1b2a++){_0x2b9ebe=[];for(let _0x5a046b=0x0;_0x5a046b<this['cols'];_0x5a046b++,_0x3464ba++){_0x2166c5?_0xac5ef8=this[_0x581e28(-0x21f,-0x1e6)](_0x29291a[_0x1a1b2a][_0x5a046b],_0x15306b[_0x1a1b2a][_0x5a046b]):_0xac5ef8=this[_0xe3f58f(0x89,0x74)](_0x29291a[_0x3464ba],_0x15306b[_0x3464ba]),_0x2b9ebe['push'](_0xac5ef8);}this[_0x581e28(-0x220,-0x1d0)]['push'](_0x2b9ebe);}!this['options']['flipY']&&this[_0x581e28(-0x21c,-0x1d0)]['reverse']();}['clear'](){function _0x5aa45a(_0x259d55,_0x5a10e1){return _0x5c3e0e(_0x259d55,_0x5a10e1- -0x546);}delete this[_0x43a427(-0x130,-0xeb)];function _0x43a427(_0x112a32,_0x238bd6){return _0x6a32fe(_0x112a32,_0x238bd6- -0x53a);}delete this[_0x5aa45a(0x30,-0xf)],delete this[_0x5aa45a(0x2,0x58)],delete this['xmax'],delete this['ymin'],delete this['ymax'],delete this[_0x43a427(-0x184,-0x175)],delete this[_0x5aa45a(0x8b,0x7a)];}['toGridXY'](_0x32c349,_0x239680){const _0x59717e=(_0x32c349-this[_0x391b22(0x21,0xa8)])/(this[_0x391b22(0x8,0x1d)]-this[_0x41eecd(0x288,0x200)])*(this[_0x41eecd(0x21b,0x199)]-0x1);function _0x41eecd(_0x59564f,_0x5ae5dd){return _0x6a32fe(_0x59564f,_0x5ae5dd- -0x206);}function _0x391b22(_0x5681f9,_0x25661a){return _0x6a32fe(_0x25661a,_0x5681f9- -0x3e5);}const _0x1f9ae0=(this[_0x41eecd(0x191,0x156)]-_0x239680)/(this[_0x391b22(-0x89,-0x11)]-this[_0x391b22(-0x45,-0x1d)])*(this[_0x391b22(0x6a,0x63)]-0x1);return[_0x59717e,_0x1f9ae0];}['getUVByXY'](_0x44e2c6,_0x48602b){function _0x43d4c2(_0x532eb5,_0x31e72f){return _0x5c3e0e(_0x532eb5,_0x31e72f- -0x28c);}if(_0x44e2c6<0x0||_0x44e2c6>=this[_0x73f785(-0x3c,-0x94)]||_0x48602b>=this['rows'])return[0x0,0x0,0x0];const _0x43d2f2=Math['floor'](_0x44e2c6),_0x358097=Math['floor'](_0x48602b);if(_0x43d2f2===_0x44e2c6&&_0x358097===_0x48602b)return this[_0x73f785(-0xec,-0x6e)][_0x48602b][_0x44e2c6];const _0x54d209=_0x43d2f2+0x1,_0x3f0f4e=_0x358097+0x1,_0x33c740=this[_0x43d4c2(0x368,0x302)](_0x43d2f2,_0x358097),_0x49e312=this['getUVByXY'](_0x54d209,_0x358097),_0x550128=this['getUVByXY'](_0x43d2f2,_0x3f0f4e);function _0x73f785(_0x392d3e,_0xfd865){return _0x5c3e0e(_0x392d3e,_0xfd865- -0x5cb);}const _0xe04991=this['getUVByXY'](_0x54d209,_0x3f0f4e);let _0x2cd5a9=null;try{_0x2cd5a9=this['_bilinearInterpolation'](_0x44e2c6-_0x43d2f2,_0x48602b-_0x358097,_0x33c740,_0x49e312,_0x550128,_0xe04991);}catch(_0x3711a0){console['log'](_0x44e2c6,_0x48602b);}return _0x2cd5a9;}['_bilinearInterpolation'](_0xb4ad9e,_0x20f15d,_0x7178c2,_0x115705,_0x3a236f,_0x1a7fe7){const _0x2f2d4d=0x1-_0xb4ad9e,_0x27e79f=0x1-_0x20f15d;function _0x401d5c(_0x376b7b,_0x2adc78){return _0x5c3e0e(_0x2adc78,_0x376b7b- -0x398);}const _0x36454d=_0x2f2d4d*_0x27e79f,_0x2cfc16=_0xb4ad9e*_0x27e79f,_0x16a4b5=_0x2f2d4d*_0x20f15d,_0x3ff41e=_0xb4ad9e*_0x20f15d,_0x4de75b=_0x7178c2[0x0]*_0x36454d+_0x115705[0x0]*_0x2cfc16+_0x3a236f[0x0]*_0x16a4b5+_0x1a7fe7[0x0]*_0x3ff41e,_0xc677b6=_0x7178c2[0x1]*_0x36454d+_0x115705[0x1]*_0x2cfc16+_0x3a236f[0x1]*_0x16a4b5+_0x1a7fe7[0x1]*_0x3ff41e;return this[_0x401d5c(0x1af,0x136)](_0x4de75b,_0xc677b6);}[_0x6a32fe(0x384,0x3af)](_0x41d4e0,_0x212c2d){return[+_0x41d4e0,+_0x212c2d,Math['sqrt'](_0x41d4e0*_0x41d4e0+_0x212c2d*_0x212c2d)];}['getUVByPoint'](_0x282666,_0x54d436){function _0x313ed7(_0x33d352,_0x53469e){return _0x5c3e0e(_0x33d352,_0x53469e- -0x1d3);}if(!this[_0xc12c7e(0x535,0x559)](_0x282666,_0x54d436))return null;const _0xb97865=this[_0x313ed7(0x32c,0x32f)](_0x282666,_0x54d436);function _0xc12c7e(_0x4f7b90,_0x5bfd15){return _0x6a32fe(_0x5bfd15,_0x4f7b90-0x176);}const _0x42fcba=this['getUVByXY'](_0xb97865[0x0],_0xb97865[0x1]);return _0x42fcba;}['isInExtent'](_0x1300ce,_0x4903fe){function _0x5271bf(_0x25b831,_0x1f2f9d){return _0x6a32fe(_0x25b831,_0x1f2f9d-0x104);}function _0x4a4d59(_0x58f407,_0x3c69ee){return _0x6a32fe(_0x3c69ee,_0x58f407- -0x280);}return _0x1300ce>=this[_0x4a4d59(0x186,0x1d0)]&&_0x1300ce<=this[_0x4a4d59(0x16d,0x1bf)]&&_0x4903fe>=this['ymin']&&_0x4903fe<=this[_0x5271bf(0x490,0x460)]?!![]:![];}[_0x6a32fe(0x34a,0x34b)](){const _0x5bb7ef=fRandomByfloat(this[_0x2ab326(0x5e0,0x5ce)],this['xmax']),_0x411eac=fRandomByfloat(this['ymin'],this['ymax']),_0x2a9d73={};_0x2a9d73['lat']=_0x411eac,_0x2a9d73['lng']=_0x5bb7ef;function _0x2ab326(_0x17ea8d,_0xfdc0ea){return _0x5c3e0e(_0x17ea8d,_0xfdc0ea-0x30);}return _0x2a9d73;}['getParticles'](){let _0xd688fc,_0x613d1d,_0x7a89ca;for(let _0x1a759d=0x0,_0x304d62=this[_0x2ec142(0x2bb,0x33f)]['length'];_0x1a759d<_0x304d62;_0x1a759d++){let _0x486487=this[_0x2ec142(0x33e,0x33f)][_0x1a759d];_0x486487[_0x4858d0(0x32e,0x30f)]<=0x0&&(_0x486487=this[_0x2ec142(0x325,0x2f9)](_0x486487));if(_0x486487['age']>0x0){const _0x59ea4a=_0x486487[_0x2ec142(0x355,0x35f)],_0x3e0dc0=_0x486487['tlat'];_0x7a89ca=this['getUVByPoint'](_0x59ea4a,_0x3e0dc0),_0x7a89ca?(_0xd688fc=_0x59ea4a+this['_calc_speedRate'][0x0]*_0x7a89ca[0x0],_0x613d1d=_0x3e0dc0+this[_0x2ec142(0x2d8,0x2f7)][0x1]*_0x7a89ca[0x1],_0x486487['lng']=_0x59ea4a,_0x486487['lat']=_0x3e0dc0,_0x486487['tlng']=_0xd688fc,_0x486487[_0x4858d0(0x2e0,0x322)]=_0x613d1d,_0x486487[_0x4858d0(0x326,0x2e5)]=_0x7a89ca[0x2],_0x486487['age']--):_0x486487[_0x4858d0(0x2a0,0x30f)]=0x0;}}function _0x2ec142(_0x2b3673,_0x2a31da){return _0x5c3e0e(_0x2b3673,_0x2a31da- -0x281);}function _0x4858d0(_0x208e3c,_0x4e0623){return _0x6a32fe(_0x208e3c,_0x4e0623- -0xb1);}return this[_0x2ec142(0x35b,0x33f)];}[_0x5c3e0e(0x504,0x57a)](_0x437832){let _0x11ba07,_0x20e8a0;for(let _0x3aaea4=0x0;_0x3aaea4<0x1e;_0x3aaea4++){_0x11ba07=this['getRandomLatLng'](),_0x20e8a0=this['getUVByPoint'](_0x11ba07[_0x240cc5(0x170,0x19a)],_0x11ba07['lat']);if(_0x20e8a0&&_0x20e8a0[0x2]>0x0)break;}if(!_0x20e8a0)return _0x437832;function _0x240cc5(_0x55207d,_0x1544ec){return _0x5c3e0e(_0x1544ec,_0x55207d- -0x416);}const _0x58dc64=_0x11ba07[_0x240cc5(0x170,0xfa)]+this['_calc_speedRate'][0x0]*_0x20e8a0[0x0],_0x200a75=_0x11ba07[_0x2459d6(0xe7,0x115)]+this['_calc_speedRate'][0x1]*_0x20e8a0[0x1];_0x437832[_0x240cc5(0x170,0x12b)]=_0x11ba07['lng'],_0x437832['lat']=_0x11ba07['lat'],_0x437832[_0x2459d6(0x12c,0x14b)]=_0x58dc64,_0x437832['tlat']=_0x200a75;function _0x2459d6(_0x5b9cea,_0x10d8a1){return _0x6a32fe(_0x5b9cea,_0x10d8a1- -0x2fd);}return _0x437832['age']=Math['round'](0xa+Math['random']()*this[_0x2459d6(-0x20,0x57)]),_0x437832['speed']=_0x20e8a0[0x2],_0x437832;}[_0x5c3e0e(0x589,0x5db)](){for(const _0x401917 in this){delete this[_0x401917];}}}function fRandomByfloat(_0x165b12,_0x32c464){function _0x439c4a(_0xb684ba,_0x1263e8){return _0x5c3e0e(_0x1263e8,_0xb684ba- -0x228);}return _0x165b12+Math[_0x439c4a(0x2c7,0x33a)]()*(_0x32c464-_0x165b12);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x2d582c={}){super(_0x2d582c),this[_0x52a93c(0x110,0x115)](_0x2d582c);function _0x52a93c(_0xb52321,_0x10c320){return _0x5c3e0e(_0xb52321,_0x10c320- -0x3ff);}this[_0x52a93c(0x18d,0x153)]=null;function _0x2f3cfb(_0x10e971,_0xb47be5){return _0x6a32fe(_0xb47be5,_0x10e971- -0x55a);}_0x2d582c[_0x52a93c(0x171,0x15c)]&&_0x2d582c[_0x2f3cfb(-0x1a9,-0x168)]&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x2d582c));}[_0x5c3e0e(0x543,0x514)](_0x2dd0ae,_0x1c99c6){this['frameTime']=0x3e8/(_0x2dd0ae['frameRate']||0xa),this[_0x5dfc9b(0x203,0x28b)]=this[_0x2e6a64(0x4e1,0x486)]['pointerEvents']??![],this['color']=_0x2dd0ae['color']||'#ffffff',this['lineWidth']=_0x2dd0ae[_0x2e6a64(0x3e0,0x453)]||0x1,this[_0x2e6a64(0x3de,0x447)]=_0x2dd0ae['fixedHeight']??0x0;function _0x2e6a64(_0x4d9622,_0x671d0c){return _0x6a32fe(_0x4d9622,_0x671d0c-0xfa);}function _0x5dfc9b(_0x54d0a5,_0x317873){return _0x5c3e0e(_0x317873,_0x54d0a5- -0x338);}this['flipY']=_0x2dd0ae[_0x5dfc9b(0x234,0x269)]??![],this['windField']&&this['windField'][_0x2e6a64(0x4e6,0x53f)](_0x2dd0ae);}get['layer'](){function _0x3c4dfc(_0x2b717e,_0x13f146){return _0x6a32fe(_0x2b717e,_0x13f146- -0x3c7);}return this[_0x3c4dfc(-0x41,-0xd)];}get[_0x6a32fe(0x372,0x39c)](){return this['_map']['scene']['canvas']['clientWidth'];}get['canvasHeight'](){function _0x5d0b21(_0x298fa2,_0x3277e3){return _0x6a32fe(_0x3277e3,_0x298fa2-0x1a6);}function _0x35a8d9(_0x994f74,_0x261706){return _0x5c3e0e(_0x261706,_0x994f74- -0x5f4);}return this[_0x35a8d9(-0x24,-0x5)][_0x35a8d9(-0xf3,-0x6d)][_0x35a8d9(-0xa2,-0xe4)]['clientHeight'];}get['pointerEvents'](){function _0x345570(_0x1fa06c,_0x2bb0da){return _0x6a32fe(_0x1fa06c,_0x2bb0da- -0x58);}return this[_0x345570(0x3c2,0x34b)];}set[_0x6a32fe(0x34a,0x3a4)](_0x4bb04f){this['_pointerEvents']=_0x4bb04f;function _0x434cfe(_0x361d35,_0x55494b){return _0x5c3e0e(_0x361d35,_0x55494b- -0x3cd);}if(!this[_0x434cfe(0x1e8,0x185)])return;function _0x7e2817(_0x1d22c9,_0x59cabb){return _0x6a32fe(_0x1d22c9,_0x59cabb-0x169);}_0x4bb04f?this['canvas']['style']['pointer-events']='all':this[_0x434cfe(0x1cf,0x185)][_0x7e2817(0x507,0x504)]['pointer-events']='none';}get['particlesNumber'](){function _0x1162b2(_0x23893e,_0x18028e){return _0x5c3e0e(_0x23893e,_0x18028e- -0xb6);}return this['options'][_0x1162b2(0x512,0x517)];}set[_0x5c3e0e(0x61a,0x5cd)](_0x1280d6){function _0x46d0ce(_0x35b2b2,_0x4e5497){return _0x6a32fe(_0x35b2b2,_0x4e5497- -0x596);}this[_0x159187(-0x83,-0xb4)][_0x46d0ce(-0xe0,-0x161)]=_0x1280d6;function _0x159187(_0x501482,_0x369457){return _0x5c3e0e(_0x369457,_0x501482- -0x5a7);}clearTimeout(this[_0x159187(-0x2b,-0x33)]),this['_canrefresh']=setTimeout(()=>{function _0x5aa530(_0x54ca0a,_0x2e3078){return _0x159187(_0x2e3078-0xf1,_0x54ca0a);}this[_0x5aa530(0x22,0x63)]();},0x1f4);}get[_0x5c3e0e(0x5c4,0x5b8)](){return this['options']['speedRate'];}set['speedRate'](_0x4f78ac){this['options']['speedRate']=_0x4f78ac;function _0x4e57bd(_0xd54de5,_0x174804){return _0x6a32fe(_0xd54de5,_0x174804-0x114);}this[_0x4e57bd(0x5e4,0x56b)]&&(this['windField']['speedRate']=_0x4f78ac);}get[_0x5c3e0e(0x486,0x4ec)](){function _0x11f13d(_0x42dd12,_0x461570){return _0x5c3e0e(_0x42dd12,_0x461570- -0x4d8);}return this['options'][_0x11f13d(0x5a,0x14)];}set['maxAge'](_0x5db22f){function _0x18c3f1(_0x1bf380,_0x49ed59){return _0x5c3e0e(_0x1bf380,_0x49ed59- -0x105);}function _0x1f3ed8(_0x14a3ce,_0x26caf0){return _0x6a32fe(_0x26caf0,_0x14a3ce- -0x45d);}this[_0x1f3ed8(-0xd1,-0x9d)]['maxAge']=_0x5db22f,this['windField']&&(this[_0x1f3ed8(-0x6,-0x24)]['maxAge']=_0x5db22f);}get['data'](){return this['windData'];}set[_0x5c3e0e(0x5c7,0x5a2)](_0x2f324e){function _0x55045b(_0x2ecd11,_0x5f56c9){return _0x6a32fe(_0x2ecd11,_0x5f56c9-0x143);}this[_0x55045b(0x591,0x565)](_0x2f324e);}get['rectangle'](){let _0x22875c=this[_0x4def70(0x485,0x4f9)]['xmin'],_0x29a380=this['windData']['xmax'],_0x4f0194=this['windData']['ymin'],_0x51232a=this[_0x21c855(0x44f,0x40b)][_0x21c855(0x436,0x47a)];_0x29a380>=0x167&&_0x22875c===0x0&&(_0x22875c=-0xb4,_0x29a380=0xb4);function _0x21c855(_0x1e3156,_0x25875b){return _0x6a32fe(_0x25875b,_0x1e3156-0xda);}_0x22875c=Math['max'](_0x22875c,-0xb4),_0x29a380=Math[_0x4def70(0x4cb,0x503)](_0x29a380,0xb4);function _0x4def70(_0x300b0f,_0x61e83f){return _0x6a32fe(_0x61e83f,_0x300b0f-0x110);}return _0x4f0194=Math[_0x4def70(0x4a3,0x508)](_0x4f0194,-0x5a),_0x51232a=Math['min'](_0x51232a,0x5a),Cesium['Rectangle'][_0x4def70(0x52a,0x508)](_0x22875c,_0x4f0194,_0x29a380,_0x51232a);}['_showHook'](_0x513a0e){function _0x521d52(_0x4f6be5,_0x3e0760){return _0x5c3e0e(_0x3e0760,_0x4f6be5-0x28);}function _0x28644f(_0x472dc8,_0x40c4b7){return _0x5c3e0e(_0x472dc8,_0x40c4b7- -0x1ef);}_0x513a0e?this[_0x521d52(0x5f7,0x612)]():(this['windData']&&(this['options'][_0x28644f(0x435,0x3b3)]=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x1f8814(_0x57c9f7,_0x1d5cce){return _0x5c3e0e(_0x1d5cce,_0x57c9f7- -0x69d);}function _0x511f37(_0x11a73d,_0x8777df){return _0x5c3e0e(_0x8777df,_0x11a73d- -0x684);}this['options']['worker']?this['initWorker']():this[_0x511f37(-0x95,-0x97)]=new CanvasWindField(this[_0x1f8814(-0x179,-0x182)]);}['_addedHook'](){function _0x2ffa1e(_0x289e6f,_0x4f0adc){return _0x6a32fe(_0x289e6f,_0x4f0adc- -0xfd);}this[_0x2ffa1e(0x2e4,0x2bd)]=this['_createCanvas']();const _0x3a9204={};_0x3a9204['willReadFrequently']=!![],this['canvasContext']=this[_0x2ffa1e(0x23c,0x2bd)][_0x2ffa1e(0x269,0x271)]('2d',_0x3a9204),this['bindEvent']();function _0x49732a(_0x526538,_0x5e390c){return _0x5c3e0e(_0x5e390c,_0x526538- -0x360);}this[_0x49732a(0x1c4,0x191)]['data']&&this['setData'](this[_0x49732a(0x1c4,0x1fe)]['data']);}['_removedHook'](){this[_0xdae946(-0x51,-0x9b)]();function _0xdae946(_0x3d0c18,_0x4c10af){return _0x6a32fe(_0x3d0c18,_0x4c10af- -0x474);}function _0x2b85eb(_0x3ee3a9,_0x44f8cb){return _0x5c3e0e(_0x3ee3a9,_0x44f8cb- -0x70b);}this['unbindEvent'](),this['canvas']&&(this[_0x2b85eb(-0xc3,-0x13b)]['container'][_0x2b85eb(-0xdd,-0x133)](this[_0x2b85eb(-0x1a8,-0x1b9)]),delete this[_0xdae946(-0x114,-0xba)]);}[_0x6a32fe(0x37a,0x3b2)](){const _0x51bf66=mars3d__namespace[_0x5b4b97(0x24a,0x258)]['create']('canvas','mars3d-canvasWind',this['_map'][_0x5b4b97(0x25d,0x2cb)]);_0x51bf66['style']['position']=_0x5b4b97(0x2a7,0x294),_0x51bf66[_0x36a0b5(0x4b6,0x536)][_0x5b4b97(0x1ae,0x222)]='0px',_0x51bf66['style']['left']=_0x36a0b5(0x522,0x4ba),_0x51bf66['style']['width']=this[_0x36a0b5(0x553,0x526)]['scene'][_0x36a0b5(0x4d5,0x506)]['clientWidth']+'px',_0x51bf66[_0x36a0b5(0x4b6,0x478)][_0x36a0b5(0x498,0x444)]=this[_0x36a0b5(0x553,0x500)][_0x36a0b5(0x484,0x42d)][_0x36a0b5(0x4d5,0x465)]['clientHeight']+'px',_0x51bf66['style']['pointerEvents']=this['_pointerEvents']?'auto':_0x5b4b97(0x28e,0x25c),_0x51bf66['style'][_0x5b4b97(0x2b4,0x27a)]=this['options']['zIndex']??0x9;function _0x5b4b97(_0x36c1e4,_0x3e2761){return _0x5c3e0e(_0x36c1e4,_0x3e2761- -0x2e9);}function _0x36a0b5(_0x577d03,_0x5f4dfc){return _0x5c3e0e(_0x5f4dfc,_0x577d03- -0x7d);}return _0x51bf66['width']=this['_map']['scene']['canvas']['clientWidth'],_0x51bf66['height']=this['_map'][_0x36a0b5(0x484,0x4c0)][_0x36a0b5(0x4d5,0x510)]['clientHeight'],_0x51bf66;}[_0x6a32fe(0x33a,0x370)](){function _0x1fffa8(_0xd435f1,_0xb6ac0b){return _0x6a32fe(_0xb6ac0b,_0xd435f1- -0x4cb);}function _0x261a07(_0x284fcb,_0x2d6fbe){return _0x5c3e0e(_0x284fcb,_0x2d6fbe- -0x415);}this['canvas']&&(this[_0x261a07(0x1a0,0x13d)]['style']['width']=this['_map'][_0x261a07(0x16c,0xec)][_0x1fffa8(-0x111,-0xe4)]['clientWidth']+'px',this[_0x1fffa8(-0x111,-0x10e)]['style'][_0x261a07(0xc7,0x100)]=this[_0x261a07(0x1c4,0x1bb)][_0x261a07(0x81,0xec)][_0x1fffa8(-0x111,-0x147)][_0x261a07(0xc8,0xe7)]+'px',this[_0x1fffa8(-0x111,-0x176)][_0x1fffa8(-0x11b,-0x16d)]=this['_map'][_0x1fffa8(-0x162,-0x1ae)]['canvas']['clientWidth'],this['canvas'][_0x1fffa8(-0x14e,-0x14c)]=this['_map']['scene'][_0x261a07(0xcd,0x13d)]['clientHeight']);}['bindEvent'](){function _0xd94599(_0x1ec214,_0x6e185f){return _0x5c3e0e(_0x1ec214,_0x6e185f- -0xb1);}const _0x1e3d6f=this;let _0x439d5b=Date['now']();(function _0x273348(){function _0x5bc6eb(_0x37ef8b,_0xd7dccc){return _0x5a73(_0xd7dccc- -0x266,_0x37ef8b);}if(_0x1e3d6f[_0x4bf157(0x104,0xc9)])return;_0x1e3d6f['_animateFrame']=window['requestAnimationFrame'](_0x273348);function _0x4bf157(_0x1f05ce,_0x3c2b25){return _0x5a73(_0x1f05ce- -0x169,_0x3c2b25);}if(_0x1e3d6f['show']&&_0x1e3d6f['windField']){const _0x2d1175=Date['now'](),_0x45c04c=_0x2d1175-_0x439d5b;_0x45c04c>_0x1e3d6f['frameTime']&&(_0x439d5b=_0x2d1175-_0x45c04c%_0x1e3d6f[_0x5bc6eb(-0x3e,-0x14)],_0x1e3d6f[_0x5bc6eb(-0x7e,-0x5f)]());}}(),window['addEventListener'](_0xd94599(0x46f,0x457),this[_0xd94599(0x3df,0x457)][_0xd94599(0x44a,0x475)](this),![]));function _0x201165(_0x419553,_0xedce4){return _0x6a32fe(_0xedce4,_0x419553-0x5d);}this['mouse_down']=![],this['mouse_move']=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x201165(0x424,0x44b)]['wheel'],this[_0x201165(0x3bb,0x411)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this[_0xd94599(0x51d,0x4d2)],this),this['_map']['on'](mars3d__namespace[_0x201165(0x424,0x3ec)]['mouseUp'],this[_0xd94599(0x476,0x46f)],this));}[_0x5c3e0e(0x4fa,0x568)](){function _0x18204f(_0x18e9e5,_0x1bba6d){return _0x5c3e0e(_0x1bba6d,_0x18e9e5- -0x46f);}window[_0x18204f(0x9b,0x1d)](this['_animateFrame']),delete this['_animateFrame'],window['removeEventListener']('resize',this['resize']);function _0x2e2d9a(_0x29fb06,_0x3795cf){return _0x6a32fe(_0x29fb06,_0x3795cf- -0x34b);}this['options'][_0x18204f(0x91,0x61)]&&(this[_0x2e2d9a(0x79,0xed)][_0x2e2d9a(0x14b,0xf1)](mars3d__namespace[_0x2e2d9a(0xfc,0x7c)][_0x2e2d9a(0x178,0x10d)],this['_onMapWhellEvent'],this),this['_map'][_0x18204f(0x165,0x182)](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this[_0x18204f(0x161,0x191)]['off'](mars3d__namespace['EventType']['mouseUp'],this[_0x18204f(0xb1,0xee)],this),this['_map'][_0x18204f(0x165,0x153)](mars3d__namespace[_0x18204f(0xf0,0xdb)][_0x18204f(0x95,0x73)],this[_0x2e2d9a(0x1c,0x8a)],this));}['_onMapWhellEvent'](_0x525cbf){function _0x1c04da(_0x498102,_0xc7b061){return _0x6a32fe(_0xc7b061,_0x498102-0x140);}clearTimeout(this['refreshTimer']);function _0x26a644(_0xc773ba,_0x5c2a00){return _0x6a32fe(_0xc773ba,_0x5c2a00- -0x378);}if(!this['show']||!this['canvas'])return;this['canvas'][_0x1c04da(0x4db,0x51f)]['visibility']=_0x1c04da(0x52f,0x4da),this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;function _0x7df5c5(_0x120693,_0x1e61ac){return _0x26a644(_0x1e61ac,_0x120693-0x4c8);}function _0x15aa4a(_0x2256ce,_0x366f2d){return _0x26a644(_0x2256ce,_0x366f2d-0x219);}this[_0x15aa4a(0x26c,0x222)](),this[_0x15aa4a(0x23d,0x25b)]['style'][_0x15aa4a(0x303,0x29a)]='visible';},0xc8);}['_onMouseDownEvent'](_0x231bf1){function _0x2d37e8(_0x532369,_0x4c988a){return _0x5c3e0e(_0x4c988a,_0x532369- -0xbd);}this['mouse_down']=!![];function _0x554f50(_0x3e9378,_0x1122fb){return _0x6a32fe(_0x3e9378,_0x1122fb-0x8d);}this[_0x2d37e8(0x513,0x590)]['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x554f50(0x39a,0x3f9)],this[_0x554f50(0x44f,0x462)],this);}['_onMouseMoveEvent'](_0x4c313f){if(!this['show']||!this['canvas'])return;function _0x5e9d6a(_0x49b98f,_0x5df7d4){return _0x6a32fe(_0x49b98f,_0x5df7d4-0x188);}function _0x11347c(_0x15d212,_0x46c71f){return _0x6a32fe(_0x46c71f,_0x15d212- -0x4a9);}this['mouse_down']&&(this['canvas']['style'][_0x5e9d6a(0x5d3,0x581)]=_0x11347c(-0xba,-0x68),this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x57fa38){if(!this[_0x54c83f(0xe9,0x84)]||!this['canvas'])return;this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);this['mouse_down']&&this['mouse_move']&&this[_0x536477(0x2c7,0x333)]();function _0x536477(_0x52a706,_0x458340){return _0x6a32fe(_0x52a706,_0x458340- -0x4e);}this[_0x54c83f(0xea,0x15d)]['style']['visibility']='visible';function _0x54c83f(_0x5ea334,_0x1be4ca){return _0x6a32fe(_0x1be4ca,_0x5ea334- -0x2d0);}this['mouse_down']=![],this[_0x54c83f(0x179,0x150)]=![];}['setData'](_0x3ee7be){this[_0xa7f81(0x4a3,0x4d9)]();function _0x315499(_0x170324,_0x1a26b5){return _0x6a32fe(_0x170324,_0x1a26b5- -0x52b);}function _0xa7f81(_0x220c94,_0x366bdd){return _0x6a32fe(_0x220c94,_0x366bdd-0x100);}this[_0x315499(-0x201,-0x1b6)]=_0x3ee7be,this['windField']['setDate'](_0x3ee7be),this['redraw']();}[_0x6a32fe(0x3b1,0x381)](){function _0x1b867e(_0x48c31b,_0x42fd13){return _0x5c3e0e(_0x42fd13,_0x48c31b- -0xe);}if(!this[_0x54c8c0(-0x16a,-0x10f)])return;this[_0x54c8c0(-0xa9,-0x71)][_0x54c8c0(-0x78,-0x83)](this['options']);function _0x54c8c0(_0x36dfc9,_0x577348){return _0x6a32fe(_0x36dfc9,_0x577348- -0x4c8);}this['update']();}['update'](){function _0x523e70(_0x1e7ef8,_0x3369cf){return _0x6a32fe(_0x1e7ef8,_0x3369cf- -0x587);}if(this[_0x572594(0x1fd,0x1ae)])return;this[_0x523e70(-0x1a5,-0x172)]=!![];function _0x572594(_0x5c46b3,_0x38c2fc){return _0x6a32fe(_0x5c46b3,_0x38c2fc- -0x267);}if(this[_0x572594(0x178,0x124)])this['windField']['update']();else{const _0x3c68db=this[_0x572594(0x26d,0x1f0)]['getParticles']();this['_drawLines'](_0x3c68db);}this[_0x572594(0x1d4,0x1ae)]=![];}[_0x6a32fe(0x498,0x429)](_0x5eb203){function _0x14b85c(_0x27f98d,_0x3c2ef9){return _0x5c3e0e(_0x27f98d,_0x3c2ef9- -0x1f3);}this['_canvasParticles']=_0x5eb203,this['canvasContext']['globalCompositeOperation']='destination-in';function _0x40d42a(_0x19fb08,_0x205260){return _0x5c3e0e(_0x205260,_0x19fb08- -0x15a);}this['canvasContext']['fillRect'](0x0,0x0,this[_0x40d42a(0x3da,0x447)],this[_0x14b85c(0x342,0x3a8)]),this['canvasContext'][_0x14b85c(0x3a1,0x3c2)]='lighter',this[_0x14b85c(0x3b0,0x386)][_0x14b85c(0x383,0x327)]=0.9;const _0x15c167=this[_0x40d42a(0x476,0x496)]['scene']['mode']!==Cesium['SceneMode'][_0x14b85c(0x3ce,0x3f2)],_0x20bf22=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x5166c6=0x0,_0x7c6032=_0x5eb203['length'];_0x5166c6<_0x7c6032;_0x5166c6++){const _0x1a9059=_0x5eb203[_0x5166c6],_0x54bc5e=this[_0x40d42a(0x3cb,0x42e)](_0x1a9059,_0x1a9059['lng'],_0x1a9059['lat'],_0x1a9059[_0x14b85c(0x410,0x3b5)]),_0x5802c2=this['_tomap'](_0x1a9059,_0x1a9059[_0x40d42a(0x486,0x465)],_0x1a9059[_0x40d42a(0x411,0x40c)],_0x1a9059[_0x14b85c(0x32a,0x382)]);if(!_0x54bc5e||!_0x5802c2)continue;if(_0x15c167&&Math['abs'](_0x54bc5e[0x0]-_0x5802c2[0x0])>=_0x20bf22)continue;this['canvasContext']['beginPath'](),this[_0x14b85c(0x31f,0x386)]['lineWidth']=this[_0x40d42a(0x397,0x40f)],this[_0x40d42a(0x41f,0x3d7)]['strokeStyle']=this['_colorRamp']['getColor'](_0x1a9059['speed']),this[_0x40d42a(0x41f,0x432)][_0x14b85c(0x46e,0x3e7)](_0x54bc5e[0x0],_0x54bc5e[0x1]),this[_0x14b85c(0x3c1,0x386)][_0x14b85c(0x2d6,0x334)](_0x5802c2[0x0],_0x5802c2[0x1]),this[_0x40d42a(0x41f,0x40f)][_0x40d42a(0x3e0,0x456)]();}else{this['canvasContext'][_0x14b85c(0x3a8,0x39a)](),this['canvasContext'][_0x14b85c(0x2a6,0x2fe)]=this[_0x14b85c(0x31e,0x2fe)],this[_0x14b85c(0x3fd,0x386)]['strokeStyle']=this['color'];for(let _0x17318f=0x0,_0x3f1189=_0x5eb203['length'];_0x17318f<_0x3f1189;_0x17318f++){const _0x1e56dc=_0x5eb203[_0x17318f],_0x327661=this[_0x40d42a(0x3cb,0x349)](_0x1e56dc,_0x1e56dc['lng'],_0x1e56dc['lat'],_0x1e56dc[_0x40d42a(0x44e,0x481)]),_0x53a287=this[_0x14b85c(0x2e2,0x332)](_0x1e56dc,_0x1e56dc[_0x14b85c(0x3f5,0x3ed)],_0x1e56dc[_0x40d42a(0x411,0x47a)],_0x1e56dc[_0x40d42a(0x41b,0x449)]);if(!_0x327661||!_0x53a287)continue;if(_0x15c167&&Math[_0x40d42a(0x3c2,0x33e)](_0x327661[0x0]-_0x53a287[0x0])>=_0x20bf22)continue;this['canvasContext']['moveTo'](_0x327661[0x0],_0x327661[0x1]),this[_0x40d42a(0x41f,0x3b1)]['lineTo'](_0x53a287[0x0],_0x53a287[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x241418,_0x5a651c,_0x798902,_0x3130c5){const _0x1029cf=Cesium['Cartesian3']['fromDegrees'](_0x5a651c,_0x798902,_0x3130c5??this[_0x2fb80c(-0xae,-0xb8)]);function _0x4eaa73(_0x6ac0d4,_0xf1d51){return _0x5c3e0e(_0x6ac0d4,_0xf1d51- -0x30b);}const _0x4f644c=this[_0x2fb80c(-0x24,0x33)]['scene'];function _0x2fb80c(_0x48dcab,_0x44bf30){return _0x6a32fe(_0x48dcab,_0x44bf30- -0x405);}if(_0x4f644c['mode']===Cesium[_0x4eaa73(0x1ef,0x265)][_0x4eaa73(0x2b8,0x2da)]){const _0x56f531=new Cesium['EllipsoidalOccluder'](_0x4f644c['globe']['ellipsoid'],_0x4f644c[_0x4eaa73(0x201,0x201)]['positionWC']),_0x39677e=_0x56f531['isPointVisible'](_0x1029cf);if(!_0x39677e)return _0x241418['age']=0x0,null;}const _0x5d943e=mars3d__namespace[_0x2fb80c(-0x101,-0xa6)]['toWindowCoordinates'](this[_0x4eaa73(0x2bf,0x2c5)][_0x4eaa73(0x16e,0x1f6)],_0x1029cf);return _0x5d943e?[_0x5d943e['x'],_0x5d943e['y']]:null;}['clear'](){this[_0x12d3fe(0x1aa,0x126)][_0x1b07db(0x537,0x540)]();function _0x1b07db(_0x14872d,_0x33074d){return _0x5c3e0e(_0x33074d,_0x14872d- -0x3a);}function _0x12d3fe(_0x28bbf2,_0x223850){return _0x6a32fe(_0x28bbf2,_0x223850- -0x331);}delete this[_0x1b07db(0x4d3,0x501)];}[_0x6a32fe(0x39f,0x383)](){this['worker']=new Worker(this['options'][_0x44f075(0x3a,-0x38)]);function _0xaced74(_0x382957,_0xbc5e99){return _0x6a32fe(_0xbc5e99,_0x382957- -0x416);}function _0x44f075(_0x26ad94,_0x4f30d3){return _0x5c3e0e(_0x4f30d3,_0x26ad94- -0x4e9);}this['worker']['onmessage']=_0x10fed6=>{this['_drawLines'](_0x10fed6['data']['particles']);function _0x43451c(_0x1dd5f5,_0x25e27d){return _0x44f075(_0x25e27d-0x2b5,_0x1dd5f5);}this[_0x43451c(0x335,0x370)]=![];},this[_0xaced74(0x41,0x55)]={'init':_0x2e4df6=>{const _0x348d9a={};_0x348d9a['type']=_0x3eb5d2(0x4a5,0x4e6);function _0x25591d(_0x18970b,_0x5cc81f){return _0xaced74(_0x18970b-0x4c1,_0x5cc81f);}_0x348d9a[_0x25591d(0x437,0x498)]=_0x2e4df6;function _0x3eb5d2(_0x4040ce,_0x194875){return _0xaced74(_0x194875-0x4d1,_0x4040ce);}this[_0x3eb5d2(0x462,0x446)]['postMessage'](_0x348d9a);},'setOptions':_0x3e5308=>{const _0x598af7={};function _0x290d50(_0x1dd963,_0x1b3f2d){return _0xaced74(_0x1b3f2d-0xba,_0x1dd963);}_0x598af7['type']=_0x290d50(0x16b,0xe9);function _0x4201de(_0x10be21,_0x3742d5){return _0x44f075(_0x3742d5- -0x221,_0x10be21);}_0x598af7[_0x290d50(0x4f,0x30)]=_0x3e5308,this['worker']['postMessage'](_0x598af7);},'setDate':_0x3da62a=>{const _0x3bf260={};function _0x32ebac(_0x3d87f6,_0x3e0211){return _0xaced74(_0x3e0211-0x2b2,_0x3d87f6);}_0x3bf260[_0x2e9c8c(0x226,0x1f5)]='setDate',_0x3bf260[_0x2e9c8c(0x27e,0x2ae)]=_0x3da62a;function _0x2e9c8c(_0x518e47,_0x414b9e){return _0xaced74(_0x414b9e-0x2ba,_0x518e47);}this[_0x2e9c8c(0x20d,0x22f)]['postMessage'](_0x3bf260);},'update':()=>{function _0x5d6d27(_0x3f4f3a,_0x2574a8){return _0xaced74(_0x2574a8-0x340,_0x3f4f3a);}if(this['_updateIng2'])return;this['_updateIng2']=!![];function _0x34fbf3(_0x1b2246,_0x147c29){return _0x44f075(_0x147c29-0xbd,_0x1b2246);}const _0x3e0942={};_0x3e0942[_0x34fbf3(0x6d,0xbd)]=_0x34fbf3(0x1af,0x139),this['worker']['postMessage'](_0x3e0942);},'clear':()=>{const _0x31f237={};_0x31f237[_0x19c4b0(0x1de,0x22c)]=_0x19c4b0(0x32a,0x2b4);function _0x19c4b0(_0x2a61ec,_0x1185b6){return _0xaced74(_0x1185b6-0x2f1,_0x2a61ec);}function _0x517198(_0x202e09,_0x341d99){return _0x44f075(_0x341d99-0x3b4,_0x202e09);}this[_0x517198(0x413,0x3ee)]['postMessage'](_0x31f237);}},this[_0xaced74(0x41,0x24)][_0xaced74(0x15,0x2f)](this[_0xaced74(-0x8a,-0x9a)]);}}mars3d__namespace['LayerUtil']['register']('canvasWind',CanvasWindLayer),mars3d__namespace[_0x5c3e0e(0x500,0x4df)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x6a32fe(0x47d,0x3fc)]=CanvasWindField,mars3d__namespace[_0x5c3e0e(0x570,0x5ce)]['logInfo'](_0x5c3e0e(0x58a,0x595)),mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0x5c3e0e(0x5c3,0x5a1)]=WindUtil;const _0x4cadce={};_0x4cadce['value']=!![],Object[_0x6a32fe(0x3af,0x3ab)](exports,'__esModule',_0x4cadce);
}));
