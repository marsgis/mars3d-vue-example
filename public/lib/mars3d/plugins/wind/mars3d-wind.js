/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.6
 * 编译日期：2025-04-13 21:17
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x5c468b,_0x450c1f){const _0x3406f0=_0x5c468b();function _0x466956(_0x79d296,_0x59f1f9){return _0x1314(_0x79d296-0x3f,_0x59f1f9);}function _0x4e0eb5(_0x39a172,_0x1c1fe6){return _0x1314(_0x39a172- -0x2e3,_0x1c1fe6);}while(!![]){try{const _0x405ad9=-parseInt(_0x4e0eb5(-0x14c,-0x140))/0x1+parseInt(_0x466956(0x24b,0x2ba))/0x2*(parseInt(_0x4e0eb5(-0x18f,-0x102))/0x3)+-parseInt(_0x466956(0x17d,0x1ca))/0x4+parseInt(_0x4e0eb5(-0x125,-0x138))/0x5+parseInt(_0x4e0eb5(-0x19a,-0x10d))/0x6+-parseInt(_0x4e0eb5(-0xda,-0x7d))/0x7+parseInt(_0x466956(0x169,0x15d))/0x8*(parseInt(_0x466956(0x21a,0x240))/0x9);if(_0x405ad9===_0x450c1f)break;else _0x3406f0['push'](_0x3406f0['shift']());}catch(_0x3104e2){_0x3406f0['push'](_0x3406f0['shift']());}}}(_0x5bfc,0xd9e36));function _interopNamespace(_0x41f3e8){if(_0x41f3e8&&_0x41f3e8[_0x438cfc(0x1a0,0x1ef)])return _0x41f3e8;var _0x11982c=Object[_0x1dd41e(-0xc1,-0x12a)](null);_0x41f3e8&&Object['keys'](_0x41f3e8)[_0x438cfc(0x24e,0x254)](function(_0x50b758){function _0x191867(_0xc1d069,_0x358b80){return _0x1dd41e(_0x358b80,_0xc1d069-0x33a);}function _0x4c7f61(_0x362e3d,_0x4533a3){return _0x1dd41e(_0x4533a3,_0x362e3d-0x325);}if(_0x50b758!=='default'){var _0x255c87=Object['getOwnPropertyDescriptor'](_0x41f3e8,_0x50b758);Object[_0x4c7f61(0x17b,0x181)](_0x11982c,_0x50b758,_0x255c87[_0x4c7f61(0x1bd,0x1ad)]?_0x255c87:{'enumerable':!![],'get':function(){return _0x41f3e8[_0x50b758];}});}});function _0x1dd41e(_0x1223a2,_0x56979f){return _0x1314(_0x56979f- -0x32d,_0x1223a2);}_0x11982c['default']=_0x41f3e8;function _0x438cfc(_0x2fa9b0,_0x261abc){return _0x1314(_0x261abc-0x68,_0x2fa9b0);}return _0x11982c;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0x280fac(-0x106,-0xac)];function getU(_0x3523fd,_0x25b40){const _0x119c81=_0x3523fd*Math['cos'](Cesium$2[_0x2c1eea(0x4ba,0x469)][_0x2c1eea(0x3f9,0x476)](_0x25b40));function _0x253228(_0x53d628,_0x2def3f){return _0x280fac(_0x53d628- -0x150,_0x2def3f);}function _0x2c1eea(_0x33b06b,_0x83b31d){return _0x280fac(_0x83b31d-0x505,_0x33b06b);}return _0x119c81;}function getV(_0x3e3646,_0x185272){const _0x237f84=_0x3e3646*Math[_0x3180a0(0x7,-0x29)](Cesium$2[_0xdecdf9(0x45d,0x451)]['toRadians'](_0x185272));function _0xdecdf9(_0x2dbf88,_0x5b4304){return _0x280fac(_0x5b4304-0x4ed,_0x2dbf88);}function _0x3180a0(_0xc09bbe,_0x2482fa){return _0x280fac(_0xc09bbe-0xbd,_0x2482fa);}return _0x237f84;}function getSpeed(_0x5941b3,_0x2a14cd){function _0x378cca(_0x21e55a,_0x18b848){return _0x280fac(_0x18b848-0x534,_0x21e55a);}const _0x49aaf9=Math['sqrt'](Math['pow'](_0x5941b3,0x2)+Math[_0x378cca(0x44d,0x476)](_0x2a14cd,0x2));return _0x49aaf9;}function getDirection(_0x58db72,_0x16f79b){function _0x2b1d1a(_0x3cca60,_0x5c29e1){return _0x280fac(_0x5c29e1-0x40f,_0x3cca60);}let _0x15329c=Cesium$2['Math']['toDegrees'](Math[_0x2b1d1a(0x354,0x38c)](_0x16f79b,_0x58db72));return _0x15329c+=_0x15329c<0x0?0x168:0x0,_0x15329c;}const _0x11744d={};_0x11744d[_0x177012(-0x159,-0xf1)]=null,_0x11744d['getU']=getU,_0x11744d['getV']=getV,_0x11744d['getSpeed']=getSpeed,_0x11744d['getDirection']=getDirection;var WindUtil=_0x11744d,updatePositionShader=_0x280fac(-0x74,-0x59),calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a';function _0x177012(_0x4440c4,_0x47e291){return _0x1314(_0x4440c4- -0x278,_0x47e291);}var postProcessingPositionFragmentShader=_0x177012(-0xf4,-0xac),renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader=_0x177012(-0x8e,-0x10c);const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x177012(-0x176,-0x153)];class ShaderManager{static['getCalculateSpeedShader'](){const _0x5b1ca1={};return _0x5b1ca1['sources']=[calculateSpeedShader],new ShaderSource$1(_0x5b1ca1);}static['getUpdatePositionShader'](){const _0x5ccf3e={};_0x5ccf3e[_0x50fd09(0x19d,0x174)]=[updatePositionShader];function _0x50fd09(_0x393ecb,_0x490f3d){return _0x280fac(_0x490f3d-0x1c6,_0x393ecb);}return new ShaderSource$1(_0x5ccf3e);}static['getSegmentDrawVertexShader'](){const _0x35cc7b={};return _0x35cc7b['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x35cc7b);}static['getSegmentDrawFragmentShader'](){const _0x240492={};return _0x240492['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x240492);}static['getPostProcessingPositionShader'](){const _0x238e0e={};return _0x238e0e['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x238e0e);}}function _0x1314(_0x2c8c54,_0x27057e){const _0x5bfc1c=_0x5bfc();return _0x1314=function(_0x131473,_0x38cf19){_0x131473=_0x131473-0xf8;let _0x25eb45=_0x5bfc1c[_0x131473];return _0x25eb45;},_0x1314(_0x2c8c54,_0x27057e);}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x54628b){this[_0x3bc7d9(0x27c,0x25a)]=_0x54628b['commandType'],this[_0x3bc7d9(0x270,0x26c)]=_0x54628b['geometry'],this[_0x1b1cbd(0x157,0x119)]=_0x54628b[_0x3bc7d9(0x31b,0x2d8)],this[_0x1b1cbd(0x8b,0x49)]=_0x54628b[_0x3bc7d9(0x24f,0x1e8)],this['uniformMap']=_0x54628b[_0x1b1cbd(0x96,0x11b)]||{},this[_0x1b1cbd(0x164,0x158)]=_0x54628b['vertexShaderSource'],this['fragmentShaderSource']=_0x54628b[_0x1b1cbd(0x90,0xa9)],this['rawRenderState']=_0x54628b['rawRenderState'],this['framebuffer']=_0x54628b['framebuffer'],this['outputTexture']=_0x54628b['outputTexture'],this['autoClear']=_0x54628b['autoClear']??![],this['preExecute']=_0x54628b[_0x1b1cbd(0x7c,0x3c)],this['show']=!![],this['commandToExecute']=undefined,this[_0x1b1cbd(0x13b,0x173)]=undefined,this['isDynamic']=_0x54628b['isDynamic']??(()=>!![]);function _0x1b1cbd(_0x5d2bdc,_0x245960){return _0x280fac(_0x5d2bdc-0x166,_0x245960);}function _0x3bc7d9(_0x2bacc1,_0x211ba0){return _0x177012(_0x2bacc1-0x39a,_0x211ba0);}this['autoClear']&&(this[_0x3bc7d9(0x2ff,0x36b)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1[_0x1b1cbd(0x13c,0x181)]}));}[_0x177012(-0x129,-0x135)](_0x2184c2){function _0x5f3387(_0x4a1217,_0x26721d){return _0x177012(_0x4a1217-0x467,_0x26721d);}function _0x2b23e2(_0x347990,_0x53bbff){return _0x177012(_0x53bbff-0x333,_0x347990);}if(this[_0x5f3387(0x349,0x2f3)]===_0x5f3387(0x39c,0x32a)){const _0x21b3b5={};_0x21b3b5['context']=_0x2184c2,_0x21b3b5[_0x2b23e2(0x19e,0x209)]=this[_0x5f3387(0x33d,0x2c7)],_0x21b3b5[_0x5f3387(0x3e8,0x37e)]=this[_0x5f3387(0x3e8,0x415)],_0x21b3b5[_0x5f3387(0x3f7,0x395)]=BufferUsage$1[_0x5f3387(0x3ab,0x3f5)];const _0x31de58=VertexArray$1[_0x2b23e2(0x255,0x26e)](_0x21b3b5),_0x131305={};_0x131305['context']=_0x2184c2,_0x131305['vertexShaderSource']=this['vertexShaderSource'],_0x131305['fragmentShaderSource']=this['fragmentShaderSource'],_0x131305['attributeLocations']=this['attributeLocations'];const _0x3b7811=ShaderProgram['fromCache'](_0x131305),_0x3f2689=RenderState['fromCache'](this['rawRenderState']),_0x36d8fb={};return _0x36d8fb[_0x2b23e2(0x343,0x2bf)]=this,_0x36d8fb['vertexArray']=_0x31de58,_0x36d8fb['primitiveType']=this[_0x5f3387(0x31c,0x322)],_0x36d8fb['modelMatrix']=Matrix4['IDENTITY'],_0x36d8fb['renderState']=_0x3f2689,_0x36d8fb['shaderProgram']=_0x3b7811,_0x36d8fb[_0x2b23e2(0x29b,0x217)]=this[_0x2b23e2(0x1be,0x217)],_0x36d8fb['uniformMap']=this['uniformMap'],_0x36d8fb[_0x5f3387(0x3b2,0x3cf)]=Pass$1[_0x5f3387(0x3cd,0x386)],new DrawCommand(_0x36d8fb);}else{if(this['commandType']===_0x5f3387(0x300,0x290)){const _0x5a0c9f={};return _0x5a0c9f['owner']=this,_0x5a0c9f['fragmentShaderSource']=this[_0x2b23e2(0x19e,0x1ed)],_0x5a0c9f[_0x5f3387(0x327,0x354)]=this['uniformMap'],_0x5a0c9f['outputTexture']=this[_0x5f3387(0x334,0x30e)],_0x5a0c9f['persists']=!![],new ComputeCommand(_0x5a0c9f);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x534a96,_0x1a4bb7){function _0x1c53fa(_0x2de09a,_0x5be5e0){return _0x177012(_0x5be5e0-0x2e5,_0x2de09a);}function _0x16b0af(_0x52a702,_0x6d964b){return _0x280fac(_0x52a702-0x425,_0x6d964b);}this[_0x1c53fa(0x135,0x1bb)]=_0x1a4bb7,defined(this['commandToExecute'])&&(this[_0x16b0af(0x340,0x2b2)]['vertexArray']=VertexArray$1['fromGeometry']({'context':_0x534a96,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}[_0x280fac(-0x56,-0xde)](_0x301edf){if(!this[_0x50ffec(0x4ba,0x440)]())return;if(!this['show']||!defined(_0x301edf))return;function _0x50ffec(_0x463990,_0x398a6a){return _0x177012(_0x463990-0x53e,_0x398a6a);}!defined(this['commandToExecute'])&&(this[_0x50ffec(0x3e9,0x43e)]=this[_0x1ed86c(0x35b,0x341)](_0x301edf[_0x50ffec(0x464,0x421)]));defined(this['preExecute'])&&this['preExecute']();if(!_0x301edf['commandList']){console[_0x50ffec(0x3bf,0x422)](_0x50ffec(0x3cd,0x391));return;}function _0x1ed86c(_0x1f8673,_0x1ea67f){return _0x177012(_0x1f8673-0x484,_0x1ea67f);}defined(this['clearCommand'])&&_0x301edf[_0x1ed86c(0x3bd,0x432)]['push'](this[_0x50ffec(0x4a3,0x52f)]),defined(this[_0x50ffec(0x3e9,0x36d)])&&_0x301edf[_0x1ed86c(0x3bd,0x38d)]['push'](this['commandToExecute']);}[_0x280fac(-0xe2,-0xc0)](){return![];}[_0x177012(-0xce,-0x150)](){if(defined(this['commandToExecute'])){var _0x6da691;(_0x6da691=this['commandToExecute']['shaderProgram'])===null||_0x6da691===void 0x0||_0x6da691['destroy'](),this['commandToExecute'][_0x2a74e9(0x51c,0x4c2)]=undefined;}function _0x2a74e9(_0x3d7bad,_0x6b0216){return _0x177012(_0x6b0216-0x5a9,_0x3d7bad);}return destroyObject(this);}}function deepMerge(_0x3d0322,_0x2f4ae2){if(!_0x3d0322)return _0x2f4ae2;if(!_0x2f4ae2)return _0x3d0322;const _0x82d4a8={..._0x2f4ae2},_0x1cfc7e=_0x82d4a8;function _0x35e2c6(_0x5446ad,_0x4e106b){return _0x280fac(_0x4e106b-0x459,_0x5446ad);}function _0x4f8edc(_0x2b2925,_0x153660){return _0x177012(_0x153660-0x313,_0x2b2925);}for(const _0x460294 in _0x3d0322){if(Object[_0x35e2c6(0x3bb,0x3a4)]['hasOwnProperty'][_0x4f8edc(0x17f,0x196)](_0x3d0322,_0x460294)){const _0x1c25df=_0x3d0322[_0x460294],_0x40e4c0=_0x2f4ae2[_0x460294];if(Array[_0x4f8edc(0x215,0x25c)](_0x1c25df)){_0x1cfc7e[_0x460294]=_0x1c25df['slice']();continue;}if(_0x1c25df&&typeof _0x1c25df==='object'){_0x1cfc7e[_0x460294]=deepMerge(_0x1c25df,_0x40e4c0||{});continue;}_0x1c25df!==undefined&&(_0x1cfc7e[_0x460294]=_0x1c25df);}}return _0x1cfc7e;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x5406bb,_0x350aa0,_0x1d39e6,_0x1c2fa6,_0x190fe5){this['context']=_0x5406bb,this['options']=_0x1d39e6,this['viewerParameters']=_0x1c2fa6,this[_0x2a963c(-0x6f,-0x1b)]=_0x350aa0,this['frameRate']=0x3c,this[_0x2a963c(-0xb6,-0x5c)]=0x1;function _0x2a963c(_0x226c5b,_0x2c4f27){return _0x280fac(_0x2c4f27-0x24,_0x226c5b);}const _0x5612f3={};_0x5612f3[_0x2a963c(-0xf7,-0x71)]=_0x190fe5;function _0x7a4c1d(_0x34fe9f,_0xd10b61){return _0x280fac(_0xd10b61-0x302,_0x34fe9f);}_0x5612f3[_0x2a963c(-0x42,-0x7d)]=0x1,_0x5612f3[_0x7a4c1d(0x358,0x2f1)]=0x0,this[_0x2a963c(-0xba,-0x9e)]=new FrameRateMonitor(_0x5612f3),this[_0x2a963c(0x1,-0x69)](),this['createWindTextures'](),this['createParticlesTextures'](),this[_0x7a4c1d(0x1b5,0x226)]();}['initFrameRate'](){const _0x266b72=()=>{function _0x375bd0(_0x1082d8,_0x47833d){return _0x1314(_0x47833d-0xd1,_0x1082d8);}function _0x1d8db0(_0x293f5e,_0x510081){return _0x1314(_0x510081- -0x1e6,_0x293f5e);}this[_0x1d8db0(-0xa0,-0xa0)][_0x1d8db0(-0x86,-0x32)]>0x14&&(this['frameRate']=this[_0x1d8db0(-0xbc,-0xa0)][_0x375bd0(0x295,0x285)],this['frameRateAdjustment']=0x3c/Math['max'](this[_0x1d8db0(0x46,-0x43)],0x1));};function _0x13a446(_0x277187,_0xba1b07){return _0x177012(_0x277187-0x57d,_0xba1b07);}function _0x4278a2(_0xcb5d15,_0x392dfc){return _0x280fac(_0x392dfc-0x3b6,_0xcb5d15);}_0x266b72();const _0x23df5d=setInterval(_0x266b72,0x3e8),_0x16cbfd=this[_0x13a446(0x4af,0x454)]['bind'](this);this[_0x13a446(0x4af,0x4f7)]=()=>{clearInterval(_0x23df5d),_0x16cbfd();};}['createWindTextures'](){const _0x224971={};_0x224971['minificationFilter']=TextureMinificationFilter$1['LINEAR'],_0x224971['magnificationFilter']=TextureMagnificationFilter$1['LINEAR'];function _0x37a6d9(_0x393ea1,_0x1704f1){return _0x280fac(_0x393ea1- -0x17,_0x1704f1);}function _0x2e703f(_0x1fcfe7,_0x57290f){return _0x280fac(_0x1fcfe7-0x4db,_0x57290f);}const _0x2db6a1={'context':this['context'],'width':this[_0x37a6d9(-0x56,-0x8e)][_0x37a6d9(-0x34,-0x8)],'height':this[_0x37a6d9(-0x56,-0xbf)][_0x37a6d9(-0x7d,-0xf1)],'pixelFormat':PixelFormat$1[_0x37a6d9(-0xce,-0x135)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0x37a6d9(-0xe0,-0x108)]['flipY']??![],'sampler':new Sampler$1(_0x224971)};this['windTextures']={'U':new Texture$1({..._0x2db6a1,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x37a6d9(-0xa9,-0x2a)])}}),'V':new Texture$1({..._0x2db6a1,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}[_0x280fac(-0x13,-0x59)](){const _0x388af2={};function _0x58d647(_0x47d69b,_0x5f32c1){return _0x177012(_0x47d69b-0x514,_0x5f32c1);}function _0x3c67e3(_0x4d9fd6,_0x58f4fd){return _0x280fac(_0x4d9fd6-0x56d,_0x58f4fd);}_0x388af2[_0x3c67e3(0x4c8,0x4a4)]=TextureMinificationFilter$1[_0x58d647(0x46e,0x408)],_0x388af2['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];const _0x462397={'context':this['context'],'width':this[_0x3c67e3(0x4a4,0x4a1)][_0x58d647(0x3d2,0x3a1)],'height':this[_0x3c67e3(0x4a4,0x457)]['particlesTextureSize'],'pixelFormat':PixelFormat$1[_0x58d647(0x42f,0x3e8)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0x58d647(0x3d2,0x3f3)]*this['options'][_0x58d647(0x3d2,0x426)]*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x388af2)};this[_0x3c67e3(0x485,0x4bb)]={'previousParticlesPosition':new Texture$1(_0x462397),'currentParticlesPosition':new Texture$1(_0x462397),'nextParticlesPosition':new Texture$1(_0x462397),'postProcessingPosition':new Texture$1(_0x462397),'particlesSpeed':new Texture$1(_0x462397)};}['destroyParticlesTextures'](){function _0x115ec2(_0x1841d7,_0x5168b4){return _0x280fac(_0x1841d7-0x585,_0x5168b4);}function _0x70abf0(_0x506ca9,_0x4a37e5){return _0x177012(_0x4a37e5- -0xb2,_0x506ca9);}Object[_0x70abf0(-0x2a1,-0x220)](this[_0x70abf0(-0x1b2,-0x20a)])['forEach'](_0x7c195f=>_0x7c195f[_0x70abf0(-0x19a,-0x180)]());}['createComputingPrimitives'](){function _0x5cdb0a(_0x204c78,_0x10a337){return _0x280fac(_0x10a337-0xf3,_0x204c78);}function _0x2f7cc0(_0x2de706,_0x200281){return _0x177012(_0x2de706-0x165,_0x200281);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this[_0x5cdb0a(0xbd,0xe5)]['U'],'V':()=>this[_0x5cdb0a(0xfb,0xe5)]['V'],'uRange':()=>new Cartesian2$1(this[_0x2f7cc0(0xb6,0xce)]['u'][_0x2f7cc0(0xe3,0x166)],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v']['min'],this[_0x2f7cc0(0xb6,0xc7)]['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData']['speed']['min'],this[_0x5cdb0a(0x120,0xb4)]['speed']['max']),'currentParticlesPosition':()=>this[_0x5cdb0a(-0x28,0xb)][_0x2f7cc0(0xfc,0x16f)],'speedScaleFactor':()=>{function _0x248d2f(_0x2c7bb8,_0xb96f15){return _0x2f7cc0(_0x2c7bb8-0x147,_0xb96f15);}return(this['viewerParameters'][_0x248d2f(0x184,0x210)]+0x32)*this['options']['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData']['width'],this['windData']['height']),'minimum':()=>new Cartesian2$1(this['windData']['bounds'][_0x2f7cc0(0x46,-0x19)],this['windData']['bounds']['south']),'maximum':()=>new Cartesian2$1(this[_0x5cdb0a(0xec,0xb4)]['bounds'][_0x5cdb0a(-0x77,0x14)],this[_0x5cdb0a(0x3e,0xb4)]['bounds']['north'])},'fragmentShaderSource':ShaderManager[_0x2f7cc0(-0x1,0x81)](),'outputTexture':this['particlesTextures'][_0x5cdb0a(0x5d,0x97)],'preExecute':()=>{const _0x2ef6db=this['particlesTextures']['previousParticlesPosition'];function _0x4f120a(_0x109275,_0x2e51e4){return _0x2f7cc0(_0x109275-0x34a,_0x2e51e4);}this[_0x4f120a(0x357,0x2e8)][_0x4f120a(0x3fe,0x393)]=this['particlesTextures'][_0x4fff96(-0x145,-0xd9)],this['particlesTextures'][_0x4f120a(0x446,0x3c8)]=this['particlesTextures'][_0x4fff96(-0x18e,-0x152)],this[_0x4f120a(0x357,0x3a1)]['postProcessingPosition']=_0x2ef6db;function _0x4fff96(_0x137ab6,_0x504c1d){return _0x5cdb0a(_0x504c1d,_0x137ab6- -0x23f);}this['primitives'][_0x4fff96(-0x207,-0x20d)]['commandToExecute']&&(this['primitives'][_0x4fff96(-0x207,-0x215)][_0x4fff96(-0x231,-0x1d0)]['outputTexture']=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':_0x5cdb0a(0x15,-0x4),'uniformMap':{'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'particlesSpeed':()=>this[_0x2f7cc0(0xd,0x51)]['particlesSpeed']},'fragmentShaderSource':ShaderManager[_0x5cdb0a(0xd4,0xa8)](),'outputTexture':this[_0x2f7cc0(0xd,0x68)]['nextParticlesPosition'],'preExecute':()=>{function _0x49e19d(_0x4488c0,_0x1ed708){return _0x2f7cc0(_0x1ed708-0xe2,_0x4488c0);}function _0x2821c9(_0xe15963,_0x7fc1ae){return _0x5cdb0a(_0x7fc1ae,_0xe15963-0x15b);}this[_0x49e19d(0x122,0x151)]['updatePosition']['commandToExecute']&&(this['primitives']['updatePosition'][_0x2821c9(0x169,0x19b)]['outputTexture']=this['particlesTextures'][_0x49e19d(0x237,0x1af)]);},'isDynamic':()=>this[_0x5cdb0a(0x43,0x2a)][_0x5cdb0a(0x95,0xa0)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this['viewerParameters'][_0x5cdb0a(0x9b,0x5f)],'latRange':()=>this[_0x5cdb0a(0xdb,0xd9)][_0x2f7cc0(0xb8,0xdf)],'dataLonRange':()=>new Cartesian2$1(this['windData'][_0x5cdb0a(0x11d,0xd3)][_0x2f7cc0(0x46,0x92)],this['windData'][_0x5cdb0a(0x127,0xd3)][_0x2f7cc0(0x16,0x36)]),'dataLatRange':()=>new Cartesian2$1(this[_0x2f7cc0(0xb6,0x91)][_0x5cdb0a(0x52,0xd3)][_0x2f7cc0(0x26,-0x3c)],this['windData']['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options'][_0x2f7cc0(0x43,0xc)],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this[_0x2f7cc0(0x2c,-0x4e)]['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this[_0x5cdb0a(0x85,0xb)]['postProcessingPosition'],'preExecute':()=>{function _0x26fd95(_0x2d3cf1,_0xfd0b87){return _0x5cdb0a(_0xfd0b87,_0x2d3cf1- -0x22c);}function _0x1f1967(_0x5d8b13,_0x3274f8){return _0x5cdb0a(_0x5d8b13,_0x3274f8-0x3d6);}this['primitives']['postProcessingPosition'][_0x1f1967(0x401,0x3e4)]&&(this[_0x26fd95(-0x1bf,-0x231)][_0x1f1967(0x4a4,0x487)][_0x1f1967(0x3b3,0x3e4)]['outputTexture']=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this[_0x5cdb0a(0x4b,0x2a)]['dynamic']})};}[_0x280fac(-0x46,-0x54)](){function _0x46ef41(_0x4919d8,_0x1e319e){return _0x177012(_0x1e319e-0xa2,_0x4919d8);}this[_0x46ef41(0x45,0x24)]['U']['destroy'](),this['windTextures']['V'][_0x51ded6(-0x7,0x1)]();function _0x51ded6(_0x4e41f8,_0x5a87eb){return _0x280fac(_0x5a87eb-0x5f,_0x4e41f8);}this[_0x51ded6(-0x22,0x5)]();}['updateWindData'](_0x289b1d){this[_0x30816d(0x46b,0x4b7)]=_0x289b1d;function _0x30816d(_0x33848d,_0x28d25d){return _0x280fac(_0x28d25d-0x4f6,_0x33848d);}this['reCreateWindTextures']();}[_0x280fac(-0xf2,-0x7d)](_0x2a66d1){const _0xb12be4=_0x2a66d1[_0x54d959(0x281,0x2c4)]!==undefined&&_0x2a66d1['flipY']!==this[_0x54d959(0x219,0x201)]['flipY'];function _0x54d959(_0x26a7e9,_0x426ba5){return _0x177012(_0x26a7e9-0x352,_0x426ba5);}function _0x3adb5d(_0x45c20c,_0x529541){return _0x280fac(_0x529541-0x64,_0x45c20c);}this['options']=deepMerge(_0x2a66d1,this[_0x54d959(0x219,0x1af)]),_0xb12be4&&this[_0x3adb5d(0xa,0x1e)]();}['processWindData'](_0x2dce1a){const {array:_0x17bf16}=_0x2dce1a;let {min:_0x34b458,max:_0x467eef}=_0x2dce1a;function _0x58ac2b(_0x1d616f,_0xb6449c){return _0x177012(_0x1d616f-0x17f,_0xb6449c);}function _0x1d8a00(_0x4df6a6,_0x50f4cf){return _0x177012(_0x50f4cf-0x20c,_0x4df6a6);}const _0x1a5784=new Float32Array(_0x17bf16['length']);_0x34b458===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x34b458=Math['min'](..._0x17bf16));_0x467eef===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0x467eef=Math[_0x58ac2b(0x23,0x17)](..._0x17bf16));const _0x6e8435=Math[_0x1d8a00(0xed,0xb0)](Math['abs'](_0x34b458),Math[_0x1d8a00(0xc0,0x14d)](_0x467eef));for(let _0x1109cf=0x0;_0x1109cf<_0x17bf16['length'];_0x1109cf++){const _0x3b3f36=_0x17bf16[_0x1109cf]/_0x6e8435;_0x1a5784[_0x1109cf]=_0x3b3f36;}return _0x1a5784;}['destroy'](){function _0x422da5(_0x3c2ddf,_0x1340a7){return _0x280fac(_0x1340a7-0xd1,_0x3c2ddf);}function _0x187775(_0x54b153,_0x288935){return _0x177012(_0x54b153-0x375,_0x288935);}Object[_0x187775(0x207,0x1e1)](this[_0x187775(0x2f7,0x308)])[_0x422da5(0x9f,0xb5)](_0x4081eb=>_0x4081eb['destroy']()),Object['values'](this['particlesTextures'])['forEach'](_0x3e19c7=>_0x3e19c7['destroy']()),Object['values'](this[_0x187775(0x27f,0x296)])['forEach'](_0x4ca5fc=>_0x4ca5fc[_0x422da5(0x39,0x73)]()),this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x280fac(-0x106,-0x129)];class WindParticlesRendering{constructor(_0x11388d,_0x305392,_0x58d00d,_0x30998c){function _0x29bc72(_0x31ff1d,_0x5c563b){return _0x280fac(_0x5c563b-0x598,_0x31ff1d);}this[_0x5a31a8(0x2ca,0x2af)]=_0x11388d;function _0x5a31a8(_0x4b2060,_0x1475dc){return _0x177012(_0x1475dc-0x389,_0x4b2060);}this['options']=_0x305392,this['viewerParameters']=_0x58d00d,this['computing']=_0x30998c,(typeof this['options'][_0x29bc72(0x4fc,0x4c6)]!==_0x5a31a8(0x277,0x241)||this['options']['particlesTextureSize']<=0x0)&&(console['error'](_0x5a31a8(0x34c,0x2cb)),this[_0x29bc72(0x4db,0x4cf)][_0x5a31a8(0x241,0x247)]=0x100),this['colorTable']=this[_0x29bc72(0x4d1,0x49b)](),this[_0x29bc72(0x5cc,0x561)]=this[_0x29bc72(0x4ec,0x49d)](),this['framebuffers']=this[_0x5a31a8(0x2fa,0x31b)](),this[_0x5a31a8(0x2b6,0x293)]=this[_0x5a31a8(0x3ad,0x31f)]();}[_0x177012(-0x16b,-0xf4)](){const _0x1029e9={};_0x1029e9['context']=this[_0x2be37e(0x1,0x75)],_0x1029e9['width']=this[_0x2be37e(0x9,0x75)]['drawingBufferWidth'],_0x1029e9['height']=this['context']['drawingBufferHeight'],_0x1029e9[_0x2be37e(0x9d,0x23)]=PixelFormat[_0x4b644a(-0xbf,-0x8e)],_0x1029e9['pixelDatatype']=PixelDatatype['UNSIGNED_BYTE'];const _0x27e389=_0x1029e9;function _0x2be37e(_0x3d6712,_0x1c8ef4){return _0x177012(_0x1c8ef4-0x14f,_0x3d6712);}const _0x432ce8={};function _0x4b644a(_0x162f91,_0x566799){return _0x280fac(_0x566799- -0x19,_0x162f91);}_0x432ce8[_0x4b644a(-0x2a,-0x83)]=this['context'],_0x432ce8['width']=this['context'][_0x4b644a(-0xc7,-0x52)],_0x432ce8[_0x4b644a(-0xcb,-0x7f)]=this[_0x4b644a(-0x6d,-0x83)][_0x4b644a(-0x9e,-0x76)],_0x432ce8[_0x2be37e(-0x32,0x23)]=PixelFormat[_0x4b644a(-0x93,-0x115)],_0x432ce8[_0x4b644a(-0x12d,-0xec)]=PixelDatatype['UNSIGNED_INT'];const _0x378c87=_0x432ce8;return{'segmentsColor':new Texture(_0x27e389),'segmentsDepth':new Texture(_0x378c87)};}[_0x177012(-0x6e,-0xf4)](){function _0x52bd5f(_0x3fb24c,_0x26d3ce){return _0x177012(_0x3fb24c-0x288,_0x26d3ce);}const _0x40c533={};function _0x4bcaf9(_0x20a7ce,_0x2cd42a){return _0x280fac(_0x20a7ce- -0xa4,_0x2cd42a);}return _0x40c533[_0x52bd5f(0x1ae,0x13a)]=this['context'],_0x40c533[_0x4bcaf9(-0xbf,-0x90)]=[this[_0x4bcaf9(-0xdb,-0x151)]['segmentsColor']],_0x40c533['depthTexture']=this['textures'][_0x52bd5f(0x167,0x1da)],{'segments':new Framebuffer(_0x40c533)};}['destoryRenderingFramebuffers'](){Object['values'](this['framebuffers'])['forEach'](_0xc73cc0=>{_0xc73cc0['destroy']();});}['createColorTableTexture'](){function _0x1aa0d9(_0x27201,_0x3e5317){return _0x280fac(_0x3e5317- -0x18e,_0x27201);}const _0x158ed8=new Float32Array(this['options']['colors']['flatMap'](_0x5026bb=>{const _0x1d0949=Color$1['fromCssColorString'](_0x5026bb);function _0x421e3f(_0x371cc8,_0x249a9b){return _0x1314(_0x371cc8-0x211,_0x249a9b);}return[_0x1d0949[_0x421e3f(0x314,0x394)],_0x1d0949['green'],_0x1d0949['blue'],_0x1d0949['alpha']];})),_0x7689e1={};_0x7689e1['minificationFilter']=TextureMinificationFilter['LINEAR'],_0x7689e1[_0x162d3a(0x437,0x474)]=TextureMagnificationFilter[_0x162d3a(0x4cb,0x497)],_0x7689e1[_0x162d3a(0x54a,0x4d7)]=TextureWrap['CLAMP_TO_EDGE'];function _0x162d3a(_0x2204b7,_0x5a6078){return _0x280fac(_0x5a6078-0x562,_0x2204b7);}return _0x7689e1['wrapT']=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this['options']['colors'][_0x1aa0d9(-0x2aa,-0x221)],'height':0x1,'pixelFormat':PixelFormat[_0x1aa0d9(-0x1cf,-0x203)],'pixelDatatype':PixelDatatype[_0x162d3a(0x480,0x468)],'sampler':new Sampler(_0x7689e1),'source':{'width':this['options'][_0x162d3a(0x4bb,0x4ef)][_0x162d3a(0x4f0,0x4cf)],'height':0x1,'arrayBufferView':_0x158ed8}});}['createSegmentsGeometry'](){const _0x1b6392=0x4,_0x5d2970=this['options'][_0x114806(0x246,0x209)];let _0x3b67bc=[];for(let _0x3bb7ec=0x0;_0x3bb7ec<_0x5d2970;_0x3bb7ec++){for(let _0x1f486a=0x0;_0x1f486a<_0x5d2970;_0x1f486a++){for(let _0x49c503=0x0;_0x49c503<_0x1b6392;_0x49c503++){_0x3b67bc['push'](_0x3bb7ec/_0x5d2970),_0x3b67bc[_0x45c78f(0x190,0x18d)](_0x1f486a/_0x5d2970);}}}_0x3b67bc=new Float32Array(_0x3b67bc);const _0x12486a=this[_0x45c78f(0xce,0xe3)]['particlesTextureSize']**0x2;let _0x4b33be=[];for(let _0x5aa3d5=0x0;_0x5aa3d5<_0x12486a;_0x5aa3d5++){_0x4b33be[_0x114806(0x2f9,0x2c2)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x4b33be=new Float32Array(_0x4b33be);function _0x114806(_0x1e129c,_0x2e94c8){return _0x177012(_0x1e129c-0x388,_0x2e94c8);}let _0x10ce93=[];for(let _0x2b30ce=0x0,_0xb94d50=0x0;_0x2b30ce<_0x12486a;_0x2b30ce++){_0x10ce93['push'](_0xb94d50+0x0,_0xb94d50+0x1,_0xb94d50+0x2,_0xb94d50+0x2,_0xb94d50+0x1,_0xb94d50+0x3),_0xb94d50+=_0x1b6392;}_0x10ce93=new Uint32Array(_0x10ce93);const _0x219fdb={};_0x219fdb['componentDatatype']=ComponentDatatype[_0x45c78f(0x2d,0xb2)],_0x219fdb[_0x114806(0x275,0x262)]=0x2,_0x219fdb['values']=_0x3b67bc;const _0x55f897={};_0x55f897[_0x45c78f(0x161,0x10d)]=ComponentDatatype['FLOAT'],_0x55f897[_0x45c78f(0xe3,0x109)]=0x3;function _0x45c78f(_0xb5f145,_0x4c2701){return _0x280fac(_0x4c2701-0x1ac,_0xb5f145);}_0x55f897['values']=_0x4b33be;const _0x3fb674=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x219fdb),'normal':new GeometryAttribute(_0x55f897)}),'indices':_0x10ce93});return _0x3fb674;}[_0x280fac(-0x30,-0x30)](_0x1d35f7){const _0xe8ae45={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x1d35f7};return Appearance['getDefaultRenderState'](!![],![],_0xe8ae45);}[_0x280fac(0x6,-0x86)](){const _0x48f961={};_0x48f961['st']=0x0,_0x48f961['normal']=0x1;const _0x43e3d6={};_0x43e3d6['enabled']=!![];function _0x5c14ff(_0x171847,_0x533015){return _0x177012(_0x171847-0x190,_0x533015);}const _0x3065cc={};_0x3065cc['enabled']=!![],_0x3065cc[_0xc2ba98(0x332,0x2f0)]=WebGLRenderingContext['FUNC_ADD'],_0x3065cc['blendFuncSource']=WebGLRenderingContext[_0x5c14ff(0x9e,0xd9)],_0x3065cc['blendFuncDestination']=WebGLRenderingContext[_0x5c14ff(0x109,0x12a)];const _0x19896b={};_0x19896b['viewport']=undefined,_0x19896b['depthTest']=_0x43e3d6,_0x19896b['depthMask']=!![],_0x19896b[_0x5c14ff(0x12,0x4a)]=_0x3065cc;const _0x29be01=new CustomPrimitive({'commandType':_0x5c14ff(0xc5,0x128),'attributeLocations':_0x48f961,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this['computing'][_0xc2ba98(0x34c,0x2e9)][_0x5c14ff(0xdf,0xc2)],'currentParticlesPosition':()=>this['computing'][_0xc2ba98(0x2d6,0x2e9)]['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this[_0x5c14ff(0x33,-0x44)]['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this[_0x5c14ff(0x33,-0x1f)]['frameRateAdjustment'],'colorTable':()=>this[_0xc2ba98(0x3bf,0x391)],'domain':()=>{var _0xdf5c4a,_0x232381;function _0x32b4c1(_0x342026,_0x568661){return _0xc2ba98(_0x568661,_0x342026- -0x1dd);}function _0x1cf9b5(_0x35c419,_0x186777){return _0x5c14ff(_0x186777-0x30d,_0x35c419);}const _0x3248c3=new Cartesian2(((_0xdf5c4a=this[_0x1cf9b5(0x3e1,0x364)]['domain'])===null||_0xdf5c4a===void 0x0?void 0x0:_0xdf5c4a['min'])??this['computing'][_0x1cf9b5(0x3e9,0x3ee)][_0x32b4c1(0x101,0x105)]['min'],((_0x232381=this[_0x1cf9b5(0x3e6,0x364)]['domain'])===null||_0x232381===void 0x0?void 0x0:_0x232381[_0x1cf9b5(0x301,0x341)])??this['computing'][_0x1cf9b5(0x474,0x3ee)][_0x32b4c1(0x101,0xd5)]['max']);return _0x3248c3;},'displayRange':()=>{var _0x12f9fa,_0x10b141;const _0x964e7e=new Cartesian2(((_0x12f9fa=this[_0xf07daa(0x16,-0x3d)]['displayRange'])===null||_0x12f9fa===void 0x0?void 0x0:_0x12f9fa[_0xf07daa(0xd4,0x7a)])??this['computing'][_0x17ea68(-0x206,-0x25c)][_0xf07daa(0x1f,-0x67)][_0x17ea68(-0x1d9,-0x1ad)],((_0x10b141=this['options']['displayRange'])===null||_0x10b141===void 0x0?void 0x0:_0x10b141[_0xf07daa(-0x5f,-0x60)])??this[_0xf07daa(-0x8e,-0x61)]['windData'][_0xf07daa(-0x17,-0x67)][_0xf07daa(-0xc1,-0x60)]);function _0x17ea68(_0x10743c,_0x5d84a0){return _0x5c14ff(_0x10743c- -0x2e7,_0x5d84a0);}function _0xf07daa(_0xeae9c4,_0xee4f79){return _0xc2ba98(_0xeae9c4,_0xee4f79- -0x345);}return _0x964e7e;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this[_0xc2ba98(0x2fd,0x367)][_0xc2ba98(0x40d,0x398)]/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x3c185c={};_0x3c185c['min']=0x1;function _0x4d1d71(_0x111a9f,_0x3d578e){return _0x5c14ff(_0x111a9f-0x361,_0x3d578e);}_0x3c185c[_0x4d1d71(0x395,0x420)]=0x2;const _0x5d2f5a=this[_0x36133c(0x296,0x2b4)][_0x4d1d71(0x45a,0x3d2)]||_0x3c185c;function _0x36133c(_0x49f0a4,_0x3e9e62){return _0xc2ba98(_0x49f0a4,_0x3e9e62- -0x54);}return new Cartesian2(_0x5d2f5a['min'],_0x5d2f5a[_0x4d1d71(0x395,0x345)]);},'lineLength':()=>{const _0x42c1f4={};_0x42c1f4[_0x5971c9(0x3,0x7a)]=0x14;function _0x5971c9(_0x3d1b47,_0x2a84e6){return _0x5c14ff(_0x2a84e6- -0x94,_0x3d1b47);}function _0x36162c(_0x2aba31,_0x57964f){return _0x5c14ff(_0x2aba31-0x45d,_0x57964f);}_0x42c1f4['max']=0x64;const _0x1f2ef7=this['options']['lineLength']||_0x42c1f4;return new Cartesian2(_0x1f2ef7[_0x36162c(0x56b,0x4f6)],_0x1f2ef7['max']);},'is3D':()=>this[_0x5c14ff(0x106,0x15c)]['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this[_0x5c14ff(0xe9,0x5d)][_0xc2ba98(0x2ab,0x320)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager[_0x5c14ff(0x2b,0x20)](),'rawRenderState':this[_0x5c14ff(0xf0,0xb4)](_0x19896b)}),_0x1134be={};function _0xc2ba98(_0x2faa61,_0x44403b){return _0x280fac(_0x44403b-0x3d1,_0x2faa61);}return _0x1134be['segments']=_0x29be01,_0x1134be;}['onParticlesTextureSizeChange'](){const _0x13216f=this['createSegmentsGeometry']();function _0x175c6b(_0x57626e,_0x376e02){return _0x177012(_0x376e02-0x1d2,_0x57626e);}this[_0x1b4ad8(-0x1cc,-0x22d)][_0x1b4ad8(-0x2d0,-0x28d)][_0x175c6b(0xaa,0xa8)]=_0x13216f;const _0x144fe9={};function _0x1b4ad8(_0x510862,_0x262590){return _0x177012(_0x262590- -0x137,_0x510862);}_0x144fe9['context']=this['context'],_0x144fe9[_0x1b4ad8(-0x246,-0x261)]=_0x13216f,_0x144fe9['attributeLocations']=this['primitives'][_0x175c6b(0x3f,0x7c)]['attributeLocations'],_0x144fe9[_0x1b4ad8(-0x226,-0x1a7)]=BufferUsage['STATIC_DRAW'];const _0x22913b=VertexArray[_0x175c6b(0xcc,0x10d)](_0x144fe9);this['primitives']['segments']['commandToExecute']&&(this['primitives'][_0x1b4ad8(-0x2f3,-0x28d)][_0x175c6b(0xd9,0x7d)][_0x1b4ad8(-0x1b9,-0x214)]=_0x22913b);}['onColorTableChange'](){function _0x3656b0(_0x22e6df,_0xbb99df){return _0x280fac(_0x22e6df- -0xd5,_0xbb99df);}this['colorTable'][_0x3656b0(-0x133,-0xe3)](),this['colorTable']=this['createColorTableTexture']();}[_0x177012(-0x162,-0x1bd)](_0x3fe077){function _0x95a0ed(_0x6f6501,_0x17c022){return _0x280fac(_0x6f6501-0xbd,_0x17c022);}const _0x33f955=_0x3fe077['colors']&&JSON[_0x95a0ed(0xb0,0x109)](_0x3fe077[_0x95a0ed(0x4a,-0x44)])!==JSON[_0x95a0ed(0xb0,0x9d)](this['options'][_0x4597bb(0x4eb,0x460)]);function _0x4597bb(_0x363d8f,_0x3ce7f8){return _0x280fac(_0x3ce7f8-0x4d3,_0x363d8f);}this['options']=deepMerge(_0x3fe077,this['options']),_0x33f955&&this['onColorTableChange']();}['destroy'](){Object['values'](this[_0xfb05d4(0x3b4,0x3bb)])['forEach'](_0x18e933=>{_0x18e933['destroy']();}),Object[_0xfb05d4(0x2c0,0x348)](this['primitives'])['forEach'](_0x53df24=>{function _0x298695(_0x56e9c4,_0x12d372){return _0x424756(_0x12d372,_0x56e9c4-0x46c);}_0x53df24[_0x298695(0x56f,0x591)]();});function _0xfb05d4(_0x176e11,_0x3c08f9){return _0x280fac(_0x176e11-0x3be,_0x3c08f9);}function _0x424756(_0x3213d1,_0x465405){return _0x177012(_0x465405-0x1d1,_0x3213d1);}this['colorTable'][_0x424756(0x118,0x103)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x14b2ad,_0x168999,_0x86e347,_0x2394b5,_0x7ff3bd){this[_0x17a3de(-0x250,-0x1fd)]=_0x14b2ad,this['options']=_0x86e347,this['viewerParameters']=_0x2394b5;function _0x4165b9(_0x2227d9,_0x6e6f90){return _0x177012(_0x2227d9-0x57d,_0x6e6f90);}this[_0x17a3de(-0x2bf,-0x280)]=new WindParticlesComputing(_0x14b2ad,_0x168999,_0x86e347,_0x2394b5,_0x7ff3bd);function _0x17a3de(_0x5731cd,_0x36f640){return _0x280fac(_0x36f640- -0x193,_0x5731cd);}this['rendering']=new WindParticlesRendering(_0x14b2ad,_0x86e347,_0x2394b5,this[_0x17a3de(-0x224,-0x280)]),this['clearFramebuffers']();}[_0x177012(-0x12d,-0x123)](){function _0x42586f(_0xcfda,_0x21dec1){return _0x177012(_0x21dec1-0x56e,_0xcfda);}function _0x3c7da9(_0x508502,_0x262ca8){return _0x177012(_0x262ca8- -0xe,_0x508502);}const _0x5b7a5b=[this['computing'][_0x42586f(0x46e,0x478)][_0x42586f(0x4a5,0x443)],this['computing']['primitives']['updatePosition'],this[_0x3c7da9(-0x12e,-0x16b)]['primitives'][_0x42586f(0x4f6,0x4bc)],this['rendering'][_0x3c7da9(-0x129,-0x104)]['segments']];return _0x5b7a5b;}['clearFramebuffers'](){function _0x4d5eb0(_0x4c8323,_0x10a1d3){return _0x280fac(_0x4c8323- -0x1ad,_0x10a1d3);}function _0x1c7df8(_0x2ec55e,_0x1ff4ef){return _0x177012(_0x2ec55e-0x352,_0x1ff4ef);}const _0x5df12c=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x1c7df8(0x2b8,0x23a)]});Object[_0x4d5eb0(-0x1cf,-0x1b2)](this[_0x4d5eb0(-0x2b1,-0x2e5)][_0x1c7df8(0x2d8,0x28a)])[_0x4d5eb0(-0x1c9,-0x21a)](_0x1056de=>{_0x5df12c['framebuffer']=this['rendering']['framebuffers'][_0x1056de];function _0x29aa28(_0x178629,_0x1c9098){return _0x1c7df8(_0x178629- -0x25c,_0x1c9098);}_0x5df12c[_0x29aa28(0x60,0xba)](this['context']);});}[_0x177012(-0xfc,-0xe0)](_0x23d14e){let _0x49858e=![];_0x23d14e[_0x386d1d(-0x6b,-0x8a)]&&this[_0x2eec44(-0x1bf,-0x1b0)][_0x2eec44(-0x1af,-0x1b9)]!==_0x23d14e['particlesTextureSize']&&(_0x49858e=!![]);function _0x386d1d(_0x5ba568,_0x5c1f09){return _0x280fac(_0x5ba568-0x67,_0x5c1f09);}const _0x660162=deepMerge(_0x23d14e,this[_0x386d1d(-0x62,-0xa9)]);if(_0x660162['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x660162;function _0x2eec44(_0x4b114b,_0x2a3a53){return _0x280fac(_0x2a3a53- -0xe7,_0x4b114b);}this['rendering'][_0x386d1d(-0x8b,-0xd4)](_0x23d14e),this['computing']['updateOptions'](_0x23d14e),_0x49858e&&(this['computing']['destroyParticlesTextures'](),this['computing'][_0x2eec44(-0x6e,-0xfa)](),this['rendering']['onParticlesTextureSizeChange']());}[_0x177012(-0x108,-0x176)](_0x22cef2){this['viewerParameters']=_0x22cef2,this[_0x1dd7e0(-0xb1,-0x106)]['viewerParameters']=_0x22cef2;function _0x1dd7e0(_0x4552db,_0x1eb490){return _0x280fac(_0x4552db-0x3c,_0x1eb490);}this['rendering']['viewerParameters']=_0x22cef2;}[_0x177012(-0xce,-0xca)](){this['computing']['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace[_0x177012(-0x176,-0x14c)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x4a180a={};_0x4a180a['min']=0x1,_0x4a180a['max']=0x2;function _0x5bfc(){const _0x857a80=['original','talt','mouseUp','_onMapWhellEvent','outputTexture','frameRateMonitor','SceneMode','globalCompositeOperation','5494248qEneVj','pow','getPrimitives','pixelFormat','calculateSpeed','geometry','createCommand','pixelSize','RED','sin','prototype','3JnaegU','canvasWidth','dropRate','segmentsDepth','init','west','commandType','maxAge','framebuffer','resize','setData','style','addEventListener','willReadFrequently','udata','minificationFilter','bindEvent','componentsPerAttribute','canvasContext','samplingWindow','_updateIng2','componentDatatype','isDestroy','_tomap','Math','_createCanvas','windField','changed','applyViewerParameters','cols','getUVByPoint','scene','lonRange','length','array','particlesNumber','toGridXY','toRadians','pointerEvents','initFrameRate','changeOptions','wrapS','Cartesian2','_addedHook','_map','getUVByXY','primitives','defineProperty','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','atan2','SRC_ALPHA','__esModule','frameRateAdjustment','removeChild','_setOptionsHook','SCENE3D','_removedHook','bind','ymax','lat','mouse_move','shaderProgram','ymin','RGBA','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a','colors','mouseMove','1542761gnaXkS','canvasHeight','mouseDown','#ffffff','vertexArray','updateViewerParameters','_calcUV','context','cartesianToCartographic','mouseHidden','_onMouseUpEvent','height','frameRate','random','processWindData','rows','flipY','BaseLayer','_animateFrame','destroy','drawingBufferHeight','particlesSpeed','Draw','createWindTextures','setOptions','data','commandList','update','fromGeometry','lastFramesPerSecond','dynamic','sources','CanvasWindField','globalAlpha','abs','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','WindUtil','STATIC_DRAW','getUpdatePositionShader','6131520QlUHBr','camera','floor','isArray','reCreateWindTextures','pass','sceneMode','get','postProcessingPosition','previousParticlesPosition','colorTable','windData','redraw','latRange','updateWindData','requestRender','destination-in','drawingBufferWidth','globe','textures','NEAREST','percentageChanged','worker','_updateIng','longitude','register','createRawRenderState','speedRate','_onMouseMoveEvent','144XXQOLm','stroke','clearCommand','OPAQUE','_showHook','nextParticlesPosition','lineWidth','execute','postMessage','beginPath','age','keys','CanvasWindLayer','bounds','push','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','width','forEach','colorTextures','viewerParameters','ColorRamp','wind','ONE_MINUS_SRC_ALPHA','cancelAnimationFrame','type','isDynamic','createParticlesTextures','min','quietPeriod','show','attributeLocations','windTextures','stringify','toWindowCoordinates','unbindEvent','framebuffers','canvas','xmax','setDate','initWorker','create','owner','left','vertexShaderSource','frameTime','bufferUsage','7211232idmqen','createRenderingFramebuffers','clientWidth','836018EYSiBw','grid','createPrimitives','currentParticlesPosition','getContext','top','visibility','EventType','particleSystem','warn','blending','call','mouse_down','getDataAtLonLat','clientHeight','latitude','layer','none','Cesium','red','rendering','_bilinearInterpolation','getParticles','frameState.commandList\x20is\x20undefined','_calc_speedRate','strokeStyle','values','createColorTableTexture','DEPTH_COMPONENT','createRenderingTextures','FLOAT','xmin','lng','Compute','getCalculateSpeedShader','getSegmentDrawFragmentShader','_colorRamp','speed','updateOptions','visible','_pointerEvents','color','magnificationFilter','computing','max','tlng','preExecute','__proto__','particlesTextures','mode','segments','commandToExecute','north','wheel','isDestroyed','blendEquation','Rectangle','east','511856zmJuFT','toDegrees','createComputingPrimitives','primitiveType','lineTo','removeEventListener','number','zIndex','fragmentShaderSource','vmin','PointTrans','pixelDatatype','particlesTextureSize','clear','uniformMap','south','_randomParticle','now','off','LINEAR','473304NudcES','options','WindLayer'];_0x5bfc=function(){return _0x857a80;};return _0x5bfc();}const _0x3f0221={};_0x3f0221[_0x177012(-0x82,-0x100)]=0x14,_0x3f0221[_0x280fac(-0xec,-0x16c)]=0x64;const _0x3e68d7={};_0x3e68d7['particlesTextureSize']=0x64,_0x3e68d7['fixedHeight']=0x0,_0x3e68d7[_0x177012(-0x97,-0x31)]=_0x4a180a,_0x3e68d7['lineLength']=_0x3f0221,_0x3e68d7['speedFactor']=0x1,_0x3e68d7['dropRate']=0.003,_0x3e68d7['dropRateBump']=0.001,_0x3e68d7[_0x280fac(-0x73,-0xca)]=['rgb(206,255,255)'],_0x3e68d7[_0x177012(-0xd1,-0x6d)]=![],_0x3e68d7[_0x177012(-0xc3,-0x116)]=!![];const DEF_OPTIONS=_0x3e68d7;class WindLayer extends BaseLayer$1{constructor(_0x102607={}){_0x102607={...DEF_OPTIONS,..._0x102607},super(_0x102607);function _0x37d024(_0x243336,_0x5c4914){return _0x280fac(_0x5c4914-0x491,_0x243336);}this[_0x37d024(0x3b6,0x413)](_0x102607,_0x102607);}get[_0x177012(-0x178,-0x1ae)](){return this['primitives'];}get['data'](){function _0xff6bb(_0x27f5ff,_0x5a7b87){return _0x280fac(_0x27f5ff-0x49d,_0x5a7b87);}function _0x5a837a(_0x369d10,_0x94b44){return _0x280fac(_0x369d10-0x35b,_0x94b44);}return this[_0xff6bb(0x3d4,0x3a6)][_0xff6bb(0x445,0x3df)];}set['data'](_0xf6449f){this[_0xe4951(0x2db,0x2a7)]['data']=_0xf6449f;function _0xe4951(_0x5efe26,_0xe02420){return _0x177012(_0x5efe26-0x414,_0xe02420);}this['setData'](_0xf6449f);}get['colors'](){return this['options']['colors'];}set['colors'](_0x380b18){this['options'][_0x24fc42(0x1cf,0x185)]=_0x380b18;const _0x3de8d0={};function _0x48dd8f(_0x3011fa,_0x418f5a){return _0x280fac(_0x418f5a-0x500,_0x3011fa);}function _0x24fc42(_0x25deb9,_0x5b260d){return _0x280fac(_0x25deb9-0x242,_0x5b260d);}_0x3de8d0[_0x24fc42(0x1cf,0x1d2)]=_0x380b18,this['_setOptionsHook'](this['options'],_0x3de8d0);}['_mountedHook'](){}[_0x177012(-0xf9,-0x123)](){this[_0x122535(0x354,0x359)]=this['_map']['scene'],this[_0x21eb74(0x11d,0x17e)]=this[_0x122535(0x3b8,0x366)][_0x21eb74(0x11d,0x99)];this['options'][_0x122535(0x309,0x396)]&&this[_0x21eb74(0xbc,0x9a)](this['options']['data']);function _0x122535(_0x3b49fc,_0x4c44ef){return _0x280fac(_0x4c44ef-0x3ee,_0x3b49fc);}if(!this['windData'])return;this[_0x21eb74(0x14c,0x165)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x122535(0x3d1,0x359)]['mode']},this['updateViewerParameters'](),this[_0x21eb74(0x56,0x1c)]=new WindParticleSystem(this[_0x122535(0x31a,0x359)][_0x21eb74(0xfc,0x136)],this[_0x21eb74(0x127,0x1a9)],this[_0x122535(0x384,0x325)],this['viewerParameters'],this[_0x21eb74(0xd1,0x5d)]),this['primitives']=this['particleSystem']['getPrimitives']();function _0x21eb74(_0x507352,_0x45c80b){return _0x177012(_0x507352-0x1d6,_0x45c80b);}this[_0x122535(0x330,0x368)]['forEach'](_0x470084=>{function _0x46cde6(_0x421d72,_0x1afef1){return _0x122535(_0x421d72,_0x1afef1- -0x11d);}this['scene'][_0x46cde6(0x218,0x24b)]['add'](_0x470084);}),this['camera'][_0x122535(0x345,0x3b9)]=0.01,this['camera']['changed'][_0x122535(0x367,0x346)](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete']['addEventListener'](this['updateViewerParameters']['bind'](this)),window[_0x21eb74(0xbe,0x147)]('resize',this['updateViewerParameters']['bind'](this));}['_removedHook'](){function _0x352604(_0x1f9139,_0x24897b){return _0x280fac(_0x1f9139-0x1ad,_0x24897b);}this[_0x352604(0x164,0x11c)][_0x2cdcb1(-0x248,-0x2c7)][_0x2cdcb1(-0x288,-0x2fb)](this[_0x2cdcb1(-0x21b,-0x269)][_0x352604(0x132,0x15c)](this));function _0x2cdcb1(_0x2bdd7d,_0xeefbb8){return _0x280fac(_0x2bdd7d- -0x1af,_0xeefbb8);}this[_0x352604(0x118,0xbd)]['morphComplete']['removeEventListener'](this['updateViewerParameters']['bind'](this)),window['removeEventListener'](_0x352604(0x102,0x122),this[_0x352604(0x141,0x12a)]['bind'](this)),this[_0x352604(0x127,0x143)]&&(this['primitives']['forEach'](_0x3d1d9f=>{this['scene']['primitives']['remove'](_0x3d1d9f);}),delete this['primitives']),this[_0x352604(0x9d,0xac)]&&(this[_0x352604(0x9d,0x60)]['destroy'](),delete this['particleSystem']);}['setData'](_0x337a5f,_0x1bcf87){function _0x5bf2f9(_0x4b54bc,_0x362022){return _0x177012(_0x4b54bc-0x65a,_0x362022);}this[_0x32721e(0x4a8,0x41f)]=this[_0x5bf2f9(0x587,0x4fa)](_0x337a5f);if(_0x1bcf87){this[_0x5bf2f9(0x56e,0x577)](),this[_0x5bf2f9(0x561,0x55a)]();return;}function _0x32721e(_0x19d145,_0x596540){return _0x280fac(_0x19d145-0x4e7,_0x596540);}this[_0x32721e(0x3d7,0x42d)]?(this['particleSystem']['computing'][_0x32721e(0x4ab,0x492)](this['windData']),this['scene'][_0x32721e(0x4ac,0x494)]()):this['_addedHook']();}['_setOptionsHook'](_0x43cd30,_0x3a3db7){function _0x1f044a(_0x32bd81,_0x2a8955){return _0x280fac(_0x2a8955-0x40b,_0x32bd81);}this['particleSystem']&&(this[_0x1f044a(0x2ba,0x2fb)]['changeOptions'](_0x3a3db7),this['scene']['requestRender']());}['processWindData'](_0x192f77){var _0x146f2b,_0x998aa2;const _0x5b2abf={..._0x192f77},_0x26f437=_0x5b2abf;function _0x12f109(_0x4c547a,_0xff0e2a){return _0x280fac(_0xff0e2a-0xa1,_0x4c547a);}!_0x26f437[_0xc1301a(0x417,0x418)]&&_0x26f437[_0xc1301a(0x3ca,0x41c)]&&(_0x26f437[_0xc1301a(0x411,0x418)]=_0x26f437[_0xc1301a(0x47a,0x41c)]);function _0xc1301a(_0x3419d3,_0x30e944){return _0x280fac(_0x30e944-0x47e,_0x3419d3);}!_0x26f437['width']&&_0x26f437[_0x12f109(-0x74,0xa)]&&(_0x26f437['width']=_0x26f437['cols']);!_0x26f437[_0xc1301a(0x424,0x45e)]&&(_0x26f437['bounds']={'west':_0x26f437[_0xc1301a(0x400,0x385)],'south':_0x26f437[_0x12f109(0x6,0x2b)],'east':_0x26f437[_0x12f109(0x5d,0x99)],'north':_0x26f437[_0x12f109(0x5,0x27)]});if(!_0x26f437['u']){const _0x101efe={};_0x101efe['array']=_0x192f77[_0x12f109(0x5d,-0x5)],_0x101efe['min']=_0x192f77['umin'],_0x101efe['max']=_0x192f77['umax'],_0x26f437['u']=_0x101efe;}if(!_0x26f437['v']){const _0x8aa468={};_0x8aa468[_0xc1301a(0x41d,0x3ec)]=_0x192f77['vdata'],_0x8aa468[_0x12f109(0xc9,0x8f)]=_0x192f77[_0x12f109(-0xb4,-0x34)],_0x8aa468[_0x12f109(-0x38,-0x4b)]=_0x192f77['vmax'],_0x26f437['v']=_0x8aa468;}if(((_0x146f2b=_0x26f437['speed'])===null||_0x146f2b===void 0x0?void 0x0:_0x146f2b['min'])===undefined||((_0x998aa2=_0x26f437['speed'])===null||_0x998aa2===void 0x0?void 0x0:_0x998aa2[_0xc1301a(0x411,0x392)])===undefined||_0x26f437[_0x12f109(-0x45,-0x52)][_0xc1301a(0x3c4,0x3ec)]===undefined){const _0x3a4540={'array':new Float32Array(_0x26f437['u']['array']['length']),'min':Number['MAX_VALUE'],'max':Number['MIN_VALUE']};for(let _0x8fb04d=0x0;_0x8fb04d<_0x26f437['u'][_0xc1301a(0x369,0x3ec)]['length'];_0x8fb04d++){_0x3a4540[_0x12f109(0x34,0xf)][_0x8fb04d]=Math['sqrt'](_0x26f437['u']['array'][_0x8fb04d]*_0x26f437['u'][_0xc1301a(0x3fd,0x3ec)][_0x8fb04d]+_0x26f437['v']['array'][_0x8fb04d]*_0x26f437['v'][_0x12f109(0x53,0xf)][_0x8fb04d]),_0x3a4540['array'][_0x8fb04d]!==0x0&&(_0x3a4540[_0xc1301a(0x431,0x46c)]=Math['min'](_0x3a4540['min'],_0x3a4540[_0x12f109(0x0,0xf)][_0x8fb04d]),_0x3a4540['max']=Math[_0x12f109(-0x26,-0x4b)](_0x3a4540['max'],_0x3a4540['array'][_0x8fb04d]));}_0x26f437['speed']=_0x3a4540;}return _0x26f437;}['updateViewerParameters'](){var _0x13ed6b;const _0x45ab03=this[_0x478a8b(0x1a2,0x191)];if(!_0x45ab03)return;const _0x1bee7e=_0x45ab03['canvas'];function _0x3cdf86(_0x38376f,_0xd4d95a){return _0x280fac(_0x38376f-0x86,_0xd4d95a);}const _0x377c59={};_0x377c59['x']=0x0,_0x377c59['y']=0x0;const _0x4124f0={};_0x4124f0['x']=0x0,_0x4124f0['y']=_0x1bee7e[_0x3cdf86(-0x84,-0x73)];const _0x42af32={};_0x42af32['x']=_0x1bee7e[_0x478a8b(0x23a,0x2c6)],_0x42af32['y']=0x0;const _0x2595e4={};_0x2595e4['x']=_0x1bee7e[_0x478a8b(0x23a,0x26b)],_0x2595e4['y']=_0x1bee7e['clientHeight'];const _0x4ded04=[_0x377c59,_0x4124f0,_0x42af32,_0x2595e4];function _0x478a8b(_0x163e2b,_0x26d726){return _0x280fac(_0x163e2b-0x237,_0x26d726);}let _0x2dda7f=0xb4,_0x19c202=-0xb4,_0x599e19=0x5a,_0x428a9f=-0x5a,_0x2646a2=![];for(const _0x6aa8a1 of _0x4ded04){const _0x291c86=_0x45ab03[_0x478a8b(0x1ee,0x250)]['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x6aa8a1['x'],_0x6aa8a1['y']),_0x45ab03['globe']['ellipsoid']);if(!_0x291c86){_0x2646a2=!![];break;}const _0x586ef9=_0x45ab03[_0x478a8b(0x1ff,0x183)]['ellipsoid'][_0x478a8b(0x1ce,0x216)](_0x291c86),_0x53a62f=Cesium$1['Math'][_0x478a8b(0x15a,0x1b3)](_0x586ef9[_0x478a8b(0x205,0x232)]),_0x13bc50=Cesium$1[_0x478a8b(0x19b,0x170)][_0x3cdf86(-0x57,0x14)](_0x586ef9[_0x3cdf86(-0x83,0x3)]);_0x2dda7f=Math['min'](_0x2dda7f,_0x53a62f),_0x19c202=Math['max'](_0x19c202,_0x53a62f),_0x599e19=Math[_0x478a8b(0x225,0x1df)](_0x599e19,_0x13bc50),_0x428a9f=Math[_0x3cdf86(-0x66,-0x63)](_0x428a9f,_0x13bc50);}if(!_0x2646a2){const _0x45d121=new Cesium$1[(_0x478a8b(0x1ad,0x16f))](Math['max'](this[_0x3cdf86(0x47,0x47)]['bounds'][_0x3cdf86(-0x29,0x26)],_0x2dda7f),Math['min'](this[_0x3cdf86(0x47,0x8c)]['bounds']['east'],_0x19c202)),_0x100464=new Cesium$1['Cartesian2'](Math['max'](this[_0x3cdf86(0x47,0x6a)][_0x478a8b(0x217,0x19b)][_0x3cdf86(-0x49,-0x16)],_0x599e19),Math['min'](this['windData']['bounds'][_0x3cdf86(-0x5e,-0xa2)],_0x428a9f)),_0x4c437c=(_0x45d121['y']-_0x45d121['x'])*0.05,_0x5442f4=(_0x100464['y']-_0x100464['x'])*0.05;_0x45d121['x']=Math['max'](this[_0x478a8b(0x1f8,0x1d7)][_0x478a8b(0x217,0x270)][_0x478a8b(0x188,0x13b)],_0x45d121['x']-_0x4c437c),_0x45d121['y']=Math['min'](this['windData']['bounds'][_0x3cdf86(-0x59,-0x47)],_0x45d121['y']+_0x4c437c),_0x100464['x']=Math['max'](this['windData'][_0x3cdf86(0x66,0x9c)]['south'],_0x100464['x']-_0x5442f4),_0x100464['y']=Math['min'](this[_0x3cdf86(0x47,-0x38)]['bounds']['north'],_0x100464['y']+_0x5442f4),this[_0x3cdf86(0x6c,0x0)][_0x478a8b(0x1a3,0x1fe)]=_0x45d121,this['viewerParameters'][_0x3cdf86(0x49,0xaa)]=_0x100464;const _0x2c077a=this['windData']['bounds']['east']-this[_0x478a8b(0x1f8,0x179)]['bounds'][_0x3cdf86(-0x29,-0x25)],_0x3e008d=this['windData']['bounds']['north']-this[_0x478a8b(0x1f8,0x240)]['bounds']['south'],_0xb53d=(_0x45d121['y']-_0x45d121['x'])/_0x2c077a,_0x290e64=(_0x100464['y']-_0x100464['x'])/_0x3e008d,_0x4e909d=Math[_0x478a8b(0x225,0x27d)](_0xb53d,_0x290e64),_0x5c4e71=0x3e8*_0x4e909d;_0x5c4e71>0x0&&(this['viewerParameters'][_0x478a8b(0x17f,0x1e8)]=Math['max'](0x0,Math['min'](0x3e8,_0x5c4e71)));}this[_0x3cdf86(0x6c,0x61)][_0x3cdf86(0x42,0xa9)]=this['scene'][_0x478a8b(0x150,0x129)],(_0x13ed6b=this['particleSystem'])===null||_0x13ed6b===void 0x0||_0x13ed6b['applyViewerParameters'](this['viewerParameters']);}[_0x177012(-0x17b,-0x17c)](_0xd03702,_0x4a9266){const {bounds:_0x464e0f,width:_0x1e37e4,height:_0x558370,u:_0x4250c3,v:_0x1719ea,speed:_0x425eff}=this[_0x29670f(0x194,0x194)],{flipY:_0x30e988}=this[_0x947a8f(-0x24,0x21)];if(_0xd03702<_0x464e0f['west']||_0xd03702>_0x464e0f['east']||_0x4a9266<_0x464e0f[_0x29670f(0x106,0x104)]||_0x4a9266>_0x464e0f['north'])return null;const _0x30795b=(_0xd03702-_0x464e0f[_0x29670f(0x169,0x124)])/(_0x464e0f['east']-_0x464e0f['west'])*(_0x1e37e4-0x1);let _0x80a666=(_0x4a9266-_0x464e0f['south'])/(_0x464e0f['north']-_0x464e0f['south'])*(_0x558370-0x1);_0x30e988&&(_0x80a666=_0x558370-0x1-_0x80a666);const _0x5b2d01=Math['floor'](_0x30795b);function _0x947a8f(_0x4fb803,_0x188129){return _0x177012(_0x188129-0x15a,_0x4fb803);}const _0x2e1372=Math[_0x29670f(0x139,0x18b)](_0x80a666),_0x4baae6=Math['floor'](_0x30795b),_0x103742=Math['min'](_0x4baae6+0x1,_0x1e37e4-0x1),_0x5be292=Math['floor'](_0x80a666),_0x389b80=Math['min'](_0x5be292+0x1,_0x558370-0x1),_0x27fece=_0x30795b-_0x4baae6,_0xba6021=_0x80a666-_0x5be292,_0x313a24=_0x2e1372*_0x1e37e4+_0x5b2d01,_0x28ea46=_0x5be292*_0x1e37e4+_0x4baae6,_0x1375d8=_0x5be292*_0x1e37e4+_0x103742,_0x42b6a3=_0x389b80*_0x1e37e4+_0x4baae6,_0xb2961f=_0x389b80*_0x1e37e4+_0x103742,_0x1b1a64=_0x4250c3['array'][_0x28ea46],_0x2a8aaa=_0x4250c3['array'][_0x1375d8],_0x1ec5e0=_0x4250c3['array'][_0x42b6a3],_0x240551=_0x4250c3[_0x29670f(0x1c7,0x141)][_0xb2961f],_0x58c5e2=(0x1-_0x27fece)*(0x1-_0xba6021)*_0x1b1a64+_0x27fece*(0x1-_0xba6021)*_0x2a8aaa+(0x1-_0x27fece)*_0xba6021*_0x1ec5e0+_0x27fece*_0xba6021*_0x240551,_0x150a99=_0x1719ea['array'][_0x28ea46],_0x37db7b=_0x1719ea['array'][_0x1375d8],_0x26918c=_0x1719ea['array'][_0x42b6a3],_0x2d0553=_0x1719ea['array'][_0xb2961f],_0x522197=(0x1-_0x27fece)*(0x1-_0xba6021)*_0x150a99+_0x27fece*(0x1-_0xba6021)*_0x37db7b+(0x1-_0x27fece)*_0xba6021*_0x26918c+_0x27fece*_0xba6021*_0x2d0553,_0x42ded8=Math['sqrt'](_0x58c5e2*_0x58c5e2+_0x522197*_0x522197),_0x2822a4={};_0x2822a4['u']=_0x4250c3['array'][_0x313a24];function _0x29670f(_0xa8d954,_0x51686d){return _0x177012(_0x51686d-0x243,_0xa8d954);}_0x2822a4['v']=_0x1719ea[_0x947a8f(0x42,0x58)][_0x313a24],_0x2822a4[_0x947a8f(-0xa,-0x9)]=_0x425eff[_0x947a8f(0x45,0x58)][_0x313a24];const _0x42c2dd={};_0x42c2dd['u']=_0x58c5e2,_0x42c2dd['v']=_0x522197,_0x42c2dd['speed']=_0x42ded8;const _0x9129a2={};return _0x9129a2[_0x947a8f(-0x52,0x23)]=_0x2822a4,_0x9129a2['interpolated']=_0x42c2dd,_0x9129a2;}}mars3d__namespace['LayerUtil']['register'](_0x280fac(-0x18,0x2),WindLayer),mars3d__namespace['layer'][_0x280fac(-0xc8,-0x149)]=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this['lat']=null;function _0x1ed226(_0x1e2a97,_0x4327c3){return _0x177012(_0x4327c3-0x584,_0x1e2a97);}this['tlng']=null,this['tlat']=null,this['age']=null,this[_0x1ed226(0x44e,0x421)]=null;}[_0x280fac(-0x5e,-0x43)](){for(const _0xeced89 in this){delete this[_0xeced89];}}}class CanvasWindField{constructor(_0x4c5fb6){this['setOptions'](_0x4c5fb6);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x31744c){this['_speedRate']=(0x64-(_0x31744c>0x63?0x63:_0x31744c))*0x64;function _0x192f91(_0x3f0c06,_0x500300){return _0x177012(_0x3f0c06- -0x10c,_0x500300);}this['_calc_speedRate']=[(this[_0x192f91(-0x184,-0x1d3)]-this['xmin'])/this['_speedRate'],(this['ymax']-this['ymin'])/this['_speedRate']];}get[_0x177012(-0x11d,-0x10d)](){return this['_maxAge'];}set['maxAge'](_0x1e72ce){this['_maxAge']=_0x1e72ce;}['setOptions'](_0x419ab2){this['options']=_0x419ab2,this['maxAge']=_0x419ab2[_0x385727(0x108,0xd8)]||0x78;function _0x385727(_0x525f06,_0x4dfaec){return _0x177012(_0x525f06-0x225,_0x4dfaec);}this[_0x385727(0x186,0x12a)]=_0x419ab2['speedRate']||0x32,this['particles']=[];function _0xc8701c(_0x3ba594,_0x112cd8){return _0x177012(_0x3ba594-0x313,_0x112cd8);}const _0x57bcdd=_0x419ab2['particlesNumber']||0x1000;for(let _0x1f806b=0x0;_0x1f806b<_0x57bcdd;_0x1f806b++){const _0x12ba98=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x12ba98);}}[_0x280fac(-0x7,0x6c)](_0x5575a8){this[_0xd62b97(-0x43,-0x1f)]=_0x5575a8[_0x20017b(-0x5c,0xd)],this['cols']=_0x5575a8['cols'],this[_0x20017b(-0x17,-0x8a)]=_0x5575a8[_0x20017b(-0x4a,-0x8a)],this['xmax']=_0x5575a8['xmax'],this['ymin']=_0x5575a8['ymin'],this['ymax']=_0x5575a8['ymax'],this[_0x20017b(0x21,0x74)]=[];function _0x20017b(_0x1de9c6,_0x4a0b06){return _0x177012(_0x4a0b06-0xdf,_0x1de9c6);}const _0x37abcb=_0x5575a8['udata'],_0x39441f=_0x5575a8['vdata'];let _0x117705=![];_0x37abcb['length']===this['rows']&&_0x37abcb[0x0]['length']===this['cols']&&(_0x117705=!![]);let _0x5ca5fb=0x0,_0x5a3daa=null;function _0xd62b97(_0x5e27ac,_0x556635){return _0x177012(_0x5e27ac-0x8f,_0x556635);}let _0x5d007f=null;for(let _0x4c59b7=0x0;_0x4c59b7<this['rows'];_0x4c59b7++){_0x5a3daa=[];for(let _0x1140be=0x0;_0x1140be<this['cols'];_0x1140be++,_0x5ca5fb++){_0x117705?_0x5d007f=this[_0x20017b(-0xa,0x4)](_0x37abcb[_0x4c59b7][_0x1140be],_0x39441f[_0x4c59b7][_0x1140be]):_0x5d007f=this['_calcUV'](_0x37abcb[_0x5ca5fb],_0x39441f[_0x5ca5fb]),_0x5a3daa['push'](_0x5d007f);}this[_0xd62b97(0x24,-0x1a)][_0xd62b97(0x0,-0x42)](_0x5a3daa);}!this['options'][_0x20017b(-0x28,0xe)]&&this[_0xd62b97(0x24,0x65)]['reverse']();}[_0x177012(-0x141,-0xf7)](){delete this['rows'],delete this['cols'],delete this['xmin'];function _0x30a61e(_0x3e8615,_0x38baec){return _0x280fac(_0x38baec-0x469,_0x3e8615);}delete this['xmax'];function _0x4e098d(_0x30ca73,_0x558eb1){return _0x177012(_0x30ca73-0x28,_0x558eb1);}delete this['ymin'],delete this[_0x30a61e(0x3c5,0x3ef)],delete this[_0x30a61e(0x4e7,0x46e)],delete this['particles'];}[_0x280fac(-0x90,-0xe8)](_0x2c19ef,_0x74b007){const _0x41a82c=(_0x2c19ef-this[_0x31a4aa(0x44,0x3)])/(this[_0x31a4aa(0x115,0xf4)]-this[_0x3d7e7c(0x486,0x478)])*(this[_0x3d7e7c(0x4e8,0x4b1)]-0x1);function _0x31a4aa(_0x4ddd8a,_0x1a7260){return _0x280fac(_0x1a7260-0xfc,_0x4ddd8a);}function _0x3d7e7c(_0x42267d,_0x39e4e0){return _0x177012(_0x42267d-0x5ef,_0x39e4e0);}const _0x492297=(this['ymax']-_0x74b007)/(this['ymax']-this['ymin'])*(this['rows']-0x1);return[_0x41a82c,_0x492297];}['getUVByXY'](_0x4ad84d,_0x5896eb){function _0x144a67(_0x361c88,_0xd777a6){return _0x280fac(_0x361c88-0x56e,_0xd777a6);}if(_0x4ad84d<0x0||_0x4ad84d>=this[_0x144a67(0x4d7,0x4f8)]||_0x5896eb>=this[_0x144a67(0x50c,0x54c)])return[0x0,0x0,0x0];const _0x41a549=Math['floor'](_0x4ad84d),_0x39cc1f=Math[_0x20efbe(0x71,0xa3)](_0x5896eb);function _0x20efbe(_0xfe07b8,_0x3353fe){return _0x177012(_0x3353fe-0x15b,_0xfe07b8);}if(_0x41a549===_0x4ad84d&&_0x39cc1f===_0x5896eb)return this['grid'][_0x5896eb][_0x4ad84d];const _0x4ba7d7=_0x41a549+0x1,_0x3a23fb=_0x39cc1f+0x1,_0x3b28d3=this['getUVByXY'](_0x41a549,_0x39cc1f),_0x3f746e=this['getUVByXY'](_0x4ba7d7,_0x39cc1f),_0x1ae5e8=this[_0x20efbe(0xb9,0x64)](_0x41a549,_0x3a23fb),_0x10f63a=this[_0x20efbe(0xac,0x64)](_0x4ba7d7,_0x3a23fb);let _0x33bd8d=null;try{_0x33bd8d=this[_0x144a67(0x46b,0x450)](_0x4ad84d-_0x41a549,_0x5896eb-_0x39cc1f,_0x3b28d3,_0x3f746e,_0x1ae5e8,_0x10f63a);}catch(_0x586026){console['log'](_0x4ad84d,_0x5896eb);}return _0x33bd8d;}['_bilinearInterpolation'](_0x45cbbf,_0x22a72d,_0xc638f8,_0x25553b,_0x4d0999,_0x5f31af){const _0x110943=0x1-_0x45cbbf,_0x396746=0x1-_0x22a72d,_0x584ee3=_0x110943*_0x396746,_0x3110bc=_0x45cbbf*_0x396746,_0x53485a=_0x110943*_0x22a72d,_0x299bf1=_0x45cbbf*_0x22a72d,_0x4af809=_0xc638f8[0x0]*_0x584ee3+_0x25553b[0x0]*_0x3110bc+_0x4d0999[0x0]*_0x53485a+_0x5f31af[0x0]*_0x299bf1,_0x1487e9=_0xc638f8[0x1]*_0x584ee3+_0x25553b[0x1]*_0x3110bc+_0x4d0999[0x1]*_0x53485a+_0x5f31af[0x1]*_0x299bf1;return this['_calcUV'](_0x4af809,_0x1487e9);}[_0x177012(-0xdb,-0x121)](_0x15ef5f,_0x161195){return[+_0x15ef5f,+_0x161195,Math['sqrt'](_0x15ef5f*_0x15ef5f+_0x161195*_0x161195)];}['getUVByPoint'](_0x3eeb19,_0x200354){if(!this['isInExtent'](_0x3eeb19,_0x200354))return null;const _0x2b664d=this[_0xa716c8(-0xdd,-0xa3)](_0x3eeb19,_0x200354);function _0xa716c8(_0x150ecb,_0x2caa17){return _0x280fac(_0x150ecb- -0x4d,_0x2caa17);}function _0x4599c1(_0x4030e0,_0x4ae9a3){return _0x177012(_0x4030e0-0x155,_0x4ae9a3);}const _0x3f80bc=this[_0x4599c1(0x5e,0x61)](_0x2b664d[0x0],_0x2b664d[0x1]);return _0x3f80bc;}['isInExtent'](_0x19d0f6,_0x52cb64){return _0x19d0f6>=this['xmin']&&_0x19d0f6<=this['xmax']&&_0x52cb64>=this['ymin']&&_0x52cb64<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x5d8ad7=fRandomByfloat(this['xmin'],this['xmax']),_0x585d2c=fRandomByfloat(this[_0x446eee(0x1e,-0x5c)],this[_0x175504(0x460,0x4d8)]),_0x188486={};_0x188486[_0x175504(0x489,0x4d9)]=_0x585d2c;function _0x446eee(_0x2a5f97,_0x579147){return _0x280fac(_0x579147-0x1a,_0x2a5f97);}function _0x175504(_0x2df4e4,_0x4c3776){return _0x280fac(_0x4c3776-0x552,_0x2df4e4);}return _0x188486[_0x175504(0x489,0x45a)]=_0x5d8ad7,_0x188486;}['getParticles'](){function _0x327579(_0x99e70f,_0x41452a){return _0x177012(_0x99e70f-0x3b6,_0x41452a);}let _0x12ff37,_0xa3fbaf,_0x359d14;function _0x2dd671(_0x53555c,_0x373931){return _0x280fac(_0x373931-0x55e,_0x53555c);}for(let _0x3552d6=0x0,_0x592562=this['particles']['length'];_0x3552d6<_0x592562;_0x3552d6++){let _0x1e4f29=this['particles'][_0x3552d6];_0x1e4f29[_0x2dd671(0x4ff,0x53b)]<=0x0&&(_0x1e4f29=this[_0x327579(0x278,0x226)](_0x1e4f29));if(_0x1e4f29[_0x2dd671(0x4ca,0x53b)]>0x0){const _0x280e9e=_0x1e4f29['tlng'],_0x5ce6d5=_0x1e4f29['tlat'];_0x359d14=this['getUVByPoint'](_0x280e9e,_0x5ce6d5),_0x359d14?(_0x12ff37=_0x280e9e+this['_calc_speedRate'][0x0]*_0x359d14[0x0],_0xa3fbaf=_0x5ce6d5+this['_calc_speedRate'][0x1]*_0x359d14[0x1],_0x1e4f29[_0x327579(0x24e,0x291)]=_0x280e9e,_0x1e4f29[_0x327579(0x2cd,0x2e2)]=_0x5ce6d5,_0x1e4f29['tlng']=_0x12ff37,_0x1e4f29['tlat']=_0xa3fbaf,_0x1e4f29['speed']=_0x359d14[0x2],_0x1e4f29['age']--):_0x1e4f29['age']=0x0;}}return this['particles'];}[_0x177012(-0x13e,-0x18b)](_0x3c408a){function _0x46b5c4(_0x4ab03b,_0x440c2f){return _0x280fac(_0x4ab03b- -0x69,_0x440c2f);}let _0x670091,_0x3fc6db;for(let _0x663c92=0x0;_0x663c92<0x1e;_0x663c92++){_0x670091=this['getRandomLatLng'](),_0x3fc6db=this[_0x46b5c4(-0xff,-0x83)](_0x670091[_0x46b5c4(-0x161,-0x1bc)],_0x670091[_0x46b5c4(-0xe2,-0x8f)]);if(_0x3fc6db&&_0x3fc6db[0x2]>0x0)break;}if(!_0x3fc6db)return _0x3c408a;const _0xd219a2=_0x670091['lng']+this['_calc_speedRate'][0x0]*_0x3fc6db[0x0],_0x4cb6c9=_0x670091['lat']+this[_0x46b5c4(-0x169,-0xe6)][0x1]*_0x3fc6db[0x1];_0x3c408a['lng']=_0x670091['lng'],_0x3c408a[_0x46b5c4(-0xe2,-0xe9)]=_0x670091['lat'],_0x3c408a['tlng']=_0xd219a2;function _0x4aa82f(_0x5da660,_0x4a9349){return _0x280fac(_0x4a9349- -0x35,_0x5da660);}return _0x3c408a['tlat']=_0x4cb6c9,_0x3c408a['age']=Math['round'](0xa+Math['random']()*this[_0x4aa82f(-0x12a,-0xe2)]),_0x3c408a['speed']=_0x3fc6db[0x2],_0x3c408a;}[_0x177012(-0xce,-0x133)](){for(const _0x5808d0 in this){delete this[_0x5808d0];}}}function fRandomByfloat(_0x58baac,_0x1d552b){function _0xd07d6d(_0x5719ca,_0x4baab2){return _0x177012(_0x4baab2- -0x143,_0x5719ca);}return _0x58baac+Math[_0xd07d6d(-0x277,-0x217)]()*(_0x1d552b-_0x58baac);}const Cesium=mars3d__namespace[_0x177012(-0x176,-0x180)],BaseLayer=mars3d__namespace['layer'][_0x280fac(-0x60,-0x22)];class CanvasWindLayer extends BaseLayer{constructor(_0x4c6cf4={}){super(_0x4c6cf4),this['_setOptionsHook'](_0x4c6cf4);function _0x31edd2(_0x23d43c,_0x279565){return _0x177012(_0x279565-0x370,_0x23d43c);}this['canvas']=null;function _0x5c398d(_0x566eb,_0x483204){return _0x280fac(_0x483204-0x4dc,_0x566eb);}_0x4c6cf4['colors']&&_0x4c6cf4['steps']&&(this[_0x5c398d(0x3c3,0x3e8)]=new mars3d__namespace[(_0x31edd2(0x267,0x2e7))](_0x4c6cf4));}[_0x280fac(-0x7e,-0x4e)](_0x1bd708,_0x423e6f){function _0x51fb4c(_0x2be3ff,_0x4d8eff){return _0x177012(_0x2be3ff-0x657,_0x4d8eff);}this['frameTime']=0x3e8/(_0x1bd708[_0x41eed0(0x304,0x28b)]||0xa),this['_pointerEvents']=this['options']['pointerEvents']??![];function _0x41eed0(_0x2c67ae,_0x252c7d){return _0x280fac(_0x2c67ae-0x369,_0x252c7d);}this['color']=_0x1bd708['color']||_0x41eed0(0x2fb,0x2be),this[_0x41eed0(0x342,0x38e)]=_0x1bd708['lineWidth']||0x1,this['fixedHeight']=_0x1bd708['fixedHeight']??0x0,this['flipY']=_0x1bd708['flipY']??![],this['windField']&&this[_0x51fb4c(0x54d,0x4cd)]['setOptions'](_0x1bd708);}get[_0x280fac(-0x108,-0x100)](){function _0x5b8a41(_0x56d3bb,_0x17ec13){return _0x177012(_0x56d3bb- -0xd7,_0x17ec13);}return this[_0x5b8a41(-0x150,-0x1c7)];}get[_0x177012(-0x123,-0xc3)](){function _0x4d459f(_0x136f3b,_0x4a637b){return _0x177012(_0x4a637b-0x2ed,_0x136f3b);}return this[_0x4d459f(0x1d0,0x1f5)]['scene']['canvas']['clientWidth'];}get['canvasHeight'](){function _0x579503(_0x5839b0,_0x28dce3){return _0x280fac(_0x28dce3-0x2c3,_0x5839b0);}function _0x4fa682(_0x4960b1,_0xa62eba){return _0x177012(_0x4960b1-0x3f2,_0xa62eba);}return this['_map'][_0x579503(0x206,0x22e)][_0x579503(0x264,0x2ba)]['clientHeight'];}get[_0x280fac(-0x8e,-0x64)](){function _0x3a5b5b(_0x4e6605,_0x34896a){return _0x280fac(_0x34896a-0x75,_0x4e6605);}return this[_0x3a5b5b(-0xcd,-0x7b)];}set['pointerEvents'](_0x15d470){function _0x574044(_0x3c8460,_0x424d1f){return _0x177012(_0x3c8460-0x3cf,_0x424d1f);}this['_pointerEvents']=_0x15d470;function _0x47e8cc(_0x2e2186,_0x42f111){return _0x280fac(_0x42f111-0x598,_0x2e2186);}if(!this[_0x47e8cc(0x575,0x58f)])return;_0x15d470?this['canvas']['style']['pointer-events']='all':this[_0x47e8cc(0x512,0x58f)][_0x47e8cc(0x543,0x4ef)]['pointer-events']=_0x47e8cc(0x4d3,0x491);}get['particlesNumber'](){function _0x472ace(_0x1501e6,_0x368af1){return _0x280fac(_0x368af1-0x320,_0x1501e6);}return this[_0x472ace(0x1d1,0x257)]['particlesNumber'];}set[_0x280fac(-0x91,-0x53)](_0x1ef296){this['options']['particlesNumber']=_0x1ef296,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{function _0x33ac08(_0x55fe43,_0x4dbd2f){return _0x1314(_0x55fe43- -0x3e8,_0x4dbd2f);}this[_0x33ac08(-0x21e,-0x1de)]();},0x1f4);}get['speedRate'](){function _0x1fd9b9(_0x1d496c,_0x3b62ab){return _0x177012(_0x3b62ab- -0x15b,_0x1d496c);}function _0x5b8280(_0x47cb80,_0x9f963a){return _0x177012(_0x9f963a-0x1dc,_0x47cb80);}return this[_0x5b8280(0x32,0xa3)][_0x1fd9b9(-0x18b,-0x1fa)];}set['speedRate'](_0x40c516){this['options']['speedRate']=_0x40c516;function _0x48a4dd(_0x3fb083,_0x241b7e){return _0x177012(_0x3fb083-0x2f6,_0x241b7e);}this['windField']&&(this[_0x48a4dd(0x1ec,0x20d)]['speedRate']=_0x40c516);}get['maxAge'](){function _0x4bc305(_0xe3460,_0x445086){return _0x177012(_0xe3460-0x4b7,_0x445086);}return this['options'][_0x4bc305(0x39a,0x38d)];}set[_0x177012(-0x11d,-0x12f)](_0xdaddaa){this[_0x554aa2(0x24e,0x220)]['maxAge']=_0xdaddaa;function _0x554aa2(_0x1815b7,_0x404706){return _0x280fac(_0x1815b7-0x317,_0x404706);}this['windField']&&(this['windField']['maxAge']=_0xdaddaa);}get[_0x280fac(-0x58,-0x3a)](){return this['windData'];}set[_0x280fac(-0x58,-0xa1)](_0x157e29){this['setData'](_0x157e29);}get['rectangle'](){let _0xdc3557=this['windData']['xmin'],_0xfcc270=this[_0x1583b1(-0x153,-0x122)][_0x23230f(-0x43,-0x8f)],_0x52175b=this[_0x23230f(-0x7a,-0x79)]['ymin'];function _0x23230f(_0x2b7d91,_0x1a7c1d){return _0x280fac(_0x2b7d91- -0x3b,_0x1a7c1d);}let _0x3f6dc5=this['windData']['ymax'];function _0x1583b1(_0x41fa71,_0x5a3dd3){return _0x280fac(_0x5a3dd3- -0xe3,_0x41fa71);}return _0xfcc270>=0x167&&_0xdc3557===0x0&&(_0xdc3557=-0xb4,_0xfcc270=0xb4),_0xdc3557=Math[_0x1583b1(-0x1e6,-0x1cf)](_0xdc3557,-0xb4),_0xfcc270=Math[_0x1583b1(-0x107,-0xf5)](_0xfcc270,0xb4),_0x52175b=Math[_0x1583b1(-0x159,-0x1cf)](_0x52175b,-0x5a),_0x3f6dc5=Math['min'](_0x3f6dc5,0x5a),Cesium[_0x1583b1(-0x230,-0x1c3)]['fromDegrees'](_0xdc3557,_0x52175b,_0xfcc270,_0x3f6dc5);}[_0x177012(-0x99,-0xd7)](_0x53f323){function _0xc01f61(_0xf54ce,_0x4bb9af){return _0x177012(_0xf54ce-0x68,_0x4bb9af);}function _0x163464(_0x17cbeb,_0x4aa5cf){return _0x280fac(_0x17cbeb-0x23,_0x4aa5cf);}_0x53f323?this[_0xc01f61(-0x91,-0xf2)]():(this[_0x163464(-0x1c,-0x1)]&&(this[_0xc01f61(-0xd1,-0x14d)]['data']=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x3fdf96(_0x58a289,_0x54aa5f){return _0x280fac(_0x58a289-0x25,_0x54aa5f);}function _0x877342(_0x1ffb47,_0x10e14c){return _0x177012(_0x10e14c-0x31e,_0x1ffb47);}this['options'][_0x877342(0x264,0x27a)]?this[_0x3fdf96(0x1f,-0x40)]():this['windField']=new CanvasWindField(this['options']);}[_0x280fac(-0x89,-0x1)](){this['canvas']=this[_0x298421(-0x1f6,-0x1d8)]();const _0x16a43a={};_0x16a43a[_0x35a55b(-0x83,-0x106)]=!![];function _0x298421(_0x18b5d7,_0x5be98b){return _0x177012(_0x18b5d7- -0xeb,_0x5be98b);}function _0x35a55b(_0x2547bd,_0x20ee6f){return _0x177012(_0x2547bd-0x94,_0x20ee6f);}this['canvasContext']=this[_0x298421(-0x164,-0x1c5)][_0x298421(-0x153,-0x144)]('2d',_0x16a43a),this[_0x298421(-0x1ff,-0x21d)](),this[_0x35a55b(-0xa5,-0x5b)]['data']&&this['setData'](this[_0x298421(-0x224,-0x2ad)][_0x35a55b(-0x34,-0x84)]);}[_0x280fac(-0x7c,-0xe0)](){function _0x4ad689(_0x33da58,_0xdd8d0b){return _0x280fac(_0xdd8d0b- -0x109,_0x33da58);}function _0x1892e6(_0x54f6d8,_0x52bae1){return _0x280fac(_0x54f6d8- -0x8a,_0x52bae1);}this[_0x4ad689(-0x1e3,-0x1da)](),this[_0x4ad689(-0x16b,-0x114)](),this[_0x1892e6(-0x93,-0x103)]&&(this[_0x1892e6(-0x112,-0xe8)]['container'][_0x4ad689(-0x14e,-0x188)](this[_0x4ad689(-0x168,-0x112)]),delete this[_0x4ad689(-0x17f,-0x112)]);}['_createCanvas'](){const _0x573dc4=mars3d__namespace['DomUtil'][_0x3c5487(-0x18b,-0x1f1)]('canvas','mars3d-canvasWind',this[_0x3c5487(-0x20e,-0x212)]['container']);_0x573dc4[_0x3c5487(-0x22f,-0x2b9)]['position']='absolute';function _0x3c5487(_0x2bf96a,_0x2ae0c3){return _0x280fac(_0x2bf96a- -0x186,_0x2ae0c3);}_0x573dc4[_0xb11659(0x2d7,0x2f8)][_0x3c5487(-0x17d,-0x177)]='0px',_0x573dc4['style'][_0x3c5487(-0x189,-0x20c)]='0px';function _0xb11659(_0x26c6c7,_0x2f7ec5){return _0x177012(_0x2f7ec5-0x411,_0x26c6c7);}return _0x573dc4['style']['width']=this['_map'][_0xb11659(0x375,0x30c)][_0xb11659(0x335,0x398)]['clientWidth']+'px',_0x573dc4[_0x3c5487(-0x22f,-0x1a8)]['height']=this['_map'][_0x3c5487(-0x21b,-0x286)]['canvas']['clientHeight']+'px',_0x573dc4['style'][_0xb11659(0x320,0x313)]=this['_pointerEvents']?'auto':'none',_0x573dc4['style'][_0x3c5487(-0x25d,-0x229)]=this['options'][_0x3c5487(-0x25d,-0x224)]??0x9,_0x573dc4[_0xb11659(0x3c4,0x384)]=this['_map']['scene']['canvas']['clientWidth'],_0x573dc4[_0x3c5487(-0x1ec,-0x196)]=this['_map']['scene']['canvas'][_0x3c5487(-0x290,-0x2fa)],_0x573dc4;}['resize'](){function _0x477fd2(_0x1d13a4,_0x10aa51){return _0x177012(_0x10aa51-0x523,_0x1d13a4);}function _0xae792e(_0x2aed91,_0x433d4e){return _0x177012(_0x2aed91-0x5aa,_0x433d4e);}this['canvas']&&(this['canvas']['style']['width']=this['_map'][_0x477fd2(0x3b8,0x41e)]['canvas']['clientWidth']+'px',this[_0x477fd2(0x45e,0x4aa)]['style']['height']=this['_map'][_0x477fd2(0x3f9,0x41e)][_0xae792e(0x531,0x4b3)]['clientHeight']+'px',this['canvas'][_0xae792e(0x51d,0x53a)]=this['_map'][_0xae792e(0x4a5,0x4e0)]['canvas']['clientWidth'],this['canvas']['height']=this['_map'][_0xae792e(0x4a5,0x4e4)]['canvas']['clientHeight']);}[_0x280fac(-0xa4,-0x82)](){function _0x3cd832(_0x175835,_0x3f8d1a){return _0x280fac(_0x175835-0x590,_0x3f8d1a);}const _0x29c9ff=this;let _0xdb9ee1=Date['now']();function _0xad3e96(_0x4af06f,_0x2ab894){return _0x177012(_0x2ab894-0x367,_0x4af06f);}(function _0xd63c05(){if(_0x29c9ff[_0x18f37b(0x1e,-0x45)])return;function _0x58bc47(_0x2a4181,_0x3ca4e7){return _0x1314(_0x2a4181- -0x29f,_0x3ca4e7);}_0x29c9ff['_animateFrame']=window['requestAnimationFrame'](_0xd63c05);function _0x18f37b(_0x55ed2f,_0x24da45){return _0x1314(_0x24da45- -0x1af,_0x55ed2f);}if(_0x29c9ff[_0x18f37b(0xb3,0x49)]&&_0x29c9ff[_0x58bc47(-0x131,-0xf0)]){const _0x2f96b5=Date[_0x58bc47(-0x164,-0x16c)](),_0xfa159d=_0x2f96b5-_0xdb9ee1;_0xfa159d>_0x29c9ff[_0x58bc47(-0x98,-0x11c)]&&(_0xdb9ee1=_0x2f96b5-_0xfa159d%_0x29c9ff['frameTime'],_0x29c9ff['update']());}}(),window['addEventListener'](_0x3cd832(0x4e5,0x508),this['resize']['bind'](this),![]),this['mouse_down']=![],this['mouse_move']=![],this['options'][_0xad3e96(0x2e3,0x28f)]&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x3cd832(0x508,0x593)]['on'](mars3d__namespace[_0x3cd832(0x59b,0x612)][_0xad3e96(0x229,0x288)],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this[_0xad3e96(0x277,0x290)],this)));}['unbindEvent'](){window[_0x50a179(-0x1b8,-0x17f)](this['_animateFrame']),delete this[_0x50a179(-0x164,-0x1c8)];function _0x50a179(_0x120d37,_0x20bc6f){return _0x280fac(_0x20bc6f- -0x169,_0x120d37);}window['removeEventListener']('resize',this[_0x584a67(-0x11e,-0x12f)]);function _0x584a67(_0x4a468c,_0x241d26){return _0x280fac(_0x4a468c- -0x73,_0x241d26);}this[_0x50a179(-0x2b7,-0x232)]['mouseHidden']&&(this['_map']['off'](mars3d__namespace['EventType'][_0x50a179(-0x217,-0x24c)],this[_0x50a179(-0x1fd,-0x22d)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this[_0x50a179(-0x27e,-0x1f1)]['off'](mars3d__namespace['EventType'][_0x584a67(-0x138,-0x127)],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}[_0x177012(-0x134,-0xcf)](_0x1190c1){clearTimeout(this['refreshTimer']);function _0x25e9d2(_0x5b9008,_0x4a431e){return _0x177012(_0x5b9008-0x659,_0x4a431e);}if(!this['show']||!this['canvas'])return;this['canvas'][_0x15f467(-0x251,-0x1e9)][_0x15f467(-0x19e,-0x12e)]='hidden';function _0x15f467(_0x168f0b,_0xf0fff7){return _0x177012(_0x168f0b- -0x138,_0xf0fff7);}this['refreshTimer']=setTimeout(()=>{function _0x20611f(_0x584fdc,_0x3b6c0c){return _0x25e9d2(_0x584fdc- -0x799,_0x3b6c0c);}if(!this[_0x20611f(-0x1c0,-0x15c)])return;function _0x3b0621(_0x4b19ab,_0x1f426e){return _0x15f467(_0x1f426e-0x1b6,_0x4b19ab);}this['redraw'](),this['canvas']['style']['visibility']=_0x20611f(-0x2a1,-0x230);},0xc8);}['_onMouseDownEvent'](_0x1f0cf5){this['mouse_down']=!![];function _0x2128ba(_0x162023,_0x23f7cb){return _0x177012(_0x162023-0x162,_0x23f7cb);}this['_map']['off'](mars3d__namespace[_0x2128ba(0xfd,0x12f)][_0x2128ba(0x80,0xc1)],this['_onMouseMoveEvent'],this);function _0x4d2c2f(_0x2fc7d2,_0x50e1fa){return _0x280fac(_0x2fc7d2-0x39c,_0x50e1fa);}this[_0x2128ba(0x6a,-0x2)]['on'](mars3d__namespace[_0x2128ba(0xfd,0x89)]['mouseMove'],this[_0x2128ba(0xc4,0x9b)],this);}[_0x280fac(-0x2e,-0x7f)](_0x47caea){function _0x3823c0(_0x3ceef8,_0x34e324){return _0x177012(_0x34e324-0x234,_0x3ceef8);}if(!this['show']||!this['canvas'])return;function _0x33ef9b(_0x1bc2e5,_0x57ff75){return _0x280fac(_0x1bc2e5- -0x1c7,_0x57ff75);}this['mouse_down']&&(this['canvas'][_0x33ef9b(-0x270,-0x25c)][_0x33ef9b(-0x1bd,-0x1cd)]='hidden',this[_0x3823c0(0xf7,0x14c)]=!![]);}['_onMouseUpEvent'](_0x40951c){if(!this['show']||!this['canvas'])return;this['_map'][_0x12e4bf(0x1f1,0x1a4)](mars3d__namespace['EventType'][_0x598741(0x5,0x35)],this[_0x598741(0x52,0x79)],this);this[_0x12e4bf(0x1b1,0x1ad)]&&this['mouse_move']&&this['redraw']();function _0x598741(_0x245978,_0x477748){return _0x177012(_0x477748-0x117,_0x245978);}function _0x12e4bf(_0x3fa2cf,_0xa24078){return _0x177012(_0x3fa2cf-0x32d,_0xa24078);}this[_0x12e4bf(0x2b4,0x27d)]['style']['visibility']='visible',this[_0x12e4bf(0x1b1,0x1ea)]=![],this['mouse_move']=![];}['setData'](_0x3ee852){function _0x2e1829(_0x2ad8c7,_0x2b5b1c){return _0x177012(_0x2ad8c7-0x62d,_0x2b5b1c);}this[_0x2e1829(0x4ec,0x4e8)](),this[_0x28e22c(0x503,0x578)]=_0x3ee852,this[_0x2e1829(0x523,0x558)]['setDate'](_0x3ee852);function _0x28e22c(_0x416449,_0x3a1e9f){return _0x177012(_0x416449-0x5b2,_0x3a1e9f);}this['redraw']();}['redraw'](){function _0x3f6e5f(_0x895230,_0xc6d16){return _0x177012(_0xc6d16-0x56d,_0x895230);}if(!this['show'])return;function _0x150b65(_0x2df014,_0xcb04c4){return _0x280fac(_0xcb04c4- -0x53,_0x2df014);}this[_0x150b65(-0xa7,-0xed)]['setOptions'](this['options']),this[_0x150b65(-0x113,-0xa9)]();}[_0x280fac(-0x56,-0x3d)](){if(this[_0x2f3484(-0x4d,0x28)])return;function _0x2f3484(_0x38f9c9,_0x4f4209){return _0x177012(_0x38f9c9-0x56,_0x4f4209);}function _0x24dbe8(_0x2dd0b5,_0x14a7c0){return _0x177012(_0x2dd0b5-0x6b,_0x14a7c0);}this['_updateIng']=!![];if(this['worker'])this['windField']['update']();else{const _0x536c95=this['windField'][_0x24dbe8(-0x107,-0xbe)]();this['_drawLines'](_0x536c95);}this['_updateIng']=![];}['_drawLines'](_0x4abfa2){function _0x4fb89c(_0x1d7fe5,_0x1fd96d){return _0x280fac(_0x1d7fe5-0x182,_0x1fd96d);}this['_canvasParticles']=_0x4abfa2;function _0xba9b38(_0x5b9619,_0x5babe5){return _0x177012(_0x5babe5-0xa1,_0x5b9619);}this[_0x4fb89c(0xe0,0x92)]['globalCompositeOperation']=_0x4fb89c(0x148,0x196),this[_0x4fb89c(0xe0,0x164)]['fillRect'](0x0,0x0,this['canvasWidth'],this[_0xba9b38(-0x8e,-0x3f)]),this[_0xba9b38(-0x8d,-0x71)][_0xba9b38(-0x108,-0x8f)]='lighter',this['canvasContext'][_0x4fb89c(0x132,0x121)]=0.9;const _0x3eb24d=this[_0xba9b38(-0xca,-0x57)]['scene']['mode']!==Cesium[_0xba9b38(-0xf7,-0x90)]['SCENE3D'],_0x276152=this['canvasWidth']*0.25;if(this[_0x4fb89c(0x8e,0x65)])for(let _0x1b0a20=0x0,_0x12e96d=_0x4abfa2['length'];_0x1b0a20<_0x12e96d;_0x1b0a20++){const _0x2518fd=_0x4abfa2[_0x1b0a20],_0x4ecbbf=this[_0xba9b38(0x0,-0x6c)](_0x2518fd,_0x2518fd['lng'],_0x2518fd[_0xba9b38(-0x3,-0x48)],_0x2518fd['alt']),_0x282328=this[_0xba9b38(-0xb4,-0x6c)](_0x2518fd,_0x2518fd[_0xba9b38(-0xf3,-0xba)],_0x2518fd['tlat'],_0x2518fd['talt']);if(!_0x4ecbbf||!_0x282328)continue;if(_0x3eb24d&&Math['abs'](_0x4ecbbf[0x0]-_0x282328[0x0])>=_0x276152)continue;this['canvasContext']['beginPath'](),this[_0xba9b38(-0xc5,-0x71)][_0xba9b38(0x2f,0xa)]=this['lineWidth'],this[_0x4fb89c(0xe0,0x65)]['strokeStyle']=this[_0xba9b38(-0x151,-0xc3)]['getColor'](_0x2518fd['speed']),this['canvasContext']['moveTo'](_0x4ecbbf[0x0],_0x4ecbbf[0x1]),this['canvasContext'][_0xba9b38(-0x92,-0xa9)](_0x282328[0x0],_0x282328[0x1]),this['canvasContext']['stroke']();}else{this[_0x4fb89c(0xe0,0xc2)][_0xba9b38(0x4e,0xd)](),this[_0xba9b38(-0x22,-0x71)]['lineWidth']=this[_0x4fb89c(0x15b,0xfd)],this['canvasContext'][_0xba9b38(-0xca,-0xce)]=this[_0xba9b38(-0x110,-0xbe)];for(let _0x5197d2=0x0,_0x40d785=_0x4abfa2['length'];_0x5197d2<_0x40d785;_0x5197d2++){const _0x2a2389=_0x4abfa2[_0x5197d2],_0x1f0356=this['_tomap'](_0x2a2389,_0x2a2389[_0xba9b38(-0x3f,-0xc7)],_0x2a2389['lat'],_0x2a2389['alt']),_0x56d4d7=this[_0x4fb89c(0xe5,0x135)](_0x2a2389,_0x2a2389['tlng'],_0x2a2389['tlat'],_0x2a2389[_0xba9b38(-0xc2,-0x95)]);if(!_0x1f0356||!_0x56d4d7)continue;if(_0x3eb24d&&Math['abs'](_0x1f0356[0x0]-_0x56d4d7[0x0])>=_0x276152)continue;this['canvasContext']['moveTo'](_0x1f0356[0x0],_0x1f0356[0x1]),this['canvasContext'][_0x4fb89c(0xa8,0x27)](_0x56d4d7[0x0],_0x56d4d7[0x1]);}this['canvasContext'][_0x4fb89c(0x156,0x1c2)]();}}['_tomap'](_0x2c18b3,_0x15068f,_0x245fac,_0x33950b){const _0x1b4d86=Cesium['Cartesian3']['fromDegrees'](_0x15068f,_0x245fac,_0x33950b??this['fixedHeight']),_0x16ca4f=this['_map'][_0x1d7ae2(0x15b,0x164)];if(_0x16ca4f['mode']===Cesium['SceneMode'][_0x1d7ae2(0x1c7,0x17c)]){const _0x185353=new Cesium['EllipsoidalOccluder'](_0x16ca4f[_0x1d7ae2(0x20b,0x1c1)]['ellipsoid'],_0x16ca4f['camera']['positionWC']),_0xfbe1d1=_0x185353['isPointVisible'](_0x1b4d86);if(!_0xfbe1d1)return _0x2c18b3['age']=0x0,null;}function _0x56249e(_0x5f6320,_0x43c39a){return _0x177012(_0x43c39a-0x2cf,_0x5f6320);}function _0x1d7ae2(_0x28c395,_0x3c92c0){return _0x280fac(_0x3c92c0-0x1f9,_0x28c395);}const _0x1bbc71=mars3d__namespace[_0x56249e(0x118,0x18b)][_0x56249e(0x1dd,0x253)](this['_map']['scene'],_0x1b4d86);return _0x1bbc71?[_0x1bbc71['x'],_0x1bbc71['y']]:null;}[_0x177012(-0x141,-0xe3)](){this[_0x508ae6(0x87,0x67)][_0x4c0ddd(0x79,0x3a)]();function _0x4c0ddd(_0x4070e7,_0x25b738){return _0x280fac(_0x25b738-0x10b,_0x4070e7);}function _0x508ae6(_0x4d677d,_0x8571db){return _0x177012(_0x8571db-0x171,_0x4d677d);}delete this['windData'];}['initWorker'](){function _0x641d3e(_0x26bd80,_0x32a3c3){return _0x177012(_0x26bd80-0x4b,_0x32a3c3);}this['worker']=new Worker(this['options'][_0x4c5a7c(0x410,0x43c)]),this[_0x641d3e(-0x59,-0xdd)]['onmessage']=_0x45fd92=>{this['_drawLines'](_0x45fd92[_0xe8111a(0x590,0x514)]['particles']);function _0x47bc09(_0x27742f,_0x499545){return _0x4c5a7c(_0x27742f-0xfc,_0x499545);}function _0xe8111a(_0x53bcc2,_0x10e850){return _0x4c5a7c(_0x53bcc2-0x1a4,_0x10e850);}this[_0x47bc09(0x4a0,0x521)]=![];};function _0x4c5a7c(_0x3a161f,_0x381e12){return _0x280fac(_0x3a161f-0x444,_0x381e12);}this['windField']={'init':_0x1bec33=>{const _0x51ad99={};function _0x344efc(_0x49b0d8,_0x3b3f4e){return _0x4c5a7c(_0x49b0d8- -0x1e7,_0x3b3f4e);}_0x51ad99[_0x344efc(0x248,0x249)]='init';function _0x586b4b(_0xec287a,_0x35f51d){return _0x641d3e(_0xec287a- -0x11f,_0x35f51d);}_0x51ad99['options']=_0x1bec33,this[_0x586b4b(-0x178,-0x125)][_0x586b4b(-0x169,-0x18c)](_0x51ad99);},'setOptions':_0x2165c3=>{const _0x39f316={};function _0x137a81(_0x49c5c3,_0x4d8515){return _0x641d3e(_0x4d8515-0x309,_0x49c5c3);}_0x39f316[_0x137a81(0x262,0x2cf)]=_0x137a81(0x28a,0x28b);function _0x412e42(_0x4fc731,_0x48769b){return _0x641d3e(_0x48769b- -0x145,_0x4fc731);}_0x39f316[_0x137a81(0x1b6,0x21b)]=_0x2165c3,this[_0x137a81(0x2a7,0x2b0)][_0x412e42(-0x17c,-0x18f)](_0x39f316);},'setDate':_0x4caea0=>{function _0x293e1a(_0x2b5a12,_0x317068){return _0x4c5a7c(_0x2b5a12- -0x1b6,_0x317068);}const _0x7fdb4={};function _0x232fde(_0x5cc9aa,_0x413312){return _0x641d3e(_0x413312-0x1e2,_0x5cc9aa);}_0x7fdb4[_0x293e1a(0x279,0x253)]='setDate',_0x7fdb4['data']=_0x4caea0,this[_0x293e1a(0x25a,0x1f3)]['postMessage'](_0x7fdb4);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];const _0xda567={};function _0x4cf6d6(_0x19eb2b,_0x4d5a36){return _0x641d3e(_0x4d5a36-0x4aa,_0x19eb2b);}_0xda567['type']='update',this['worker'][_0x4cf6d6(0x409,0x460)](_0xda567);},'clear':()=>{function _0x3f5742(_0x532f70,_0x3f9c20){return _0x641d3e(_0x3f9c20- -0x13,_0x532f70);}function _0x23225b(_0x3cf0de,_0x3b4c69){return _0x4c5a7c(_0x3b4c69-0x100,_0x3cf0de);}const _0x361bb3={};_0x361bb3[_0x3f5742(-0xc4,-0x4d)]=_0x3f5742(-0x18e,-0x109),this[_0x3f5742(-0xd3,-0x6c)]['postMessage'](_0x361bb3);}},this[_0x4c5a7c(0x3aa,0x3f1)][_0x641d3e(-0xd5,-0x5d)](this[_0x641d3e(-0xee,-0xb4)]);}}mars3d__namespace['LayerUtil'][_0x177012(-0xa1,-0x44)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer'][_0x280fac(-0x21,0x65)]=CanvasWindLayer,mars3d__namespace[_0x280fac(-0x51,-0x17)]=CanvasWindField,mars3d__namespace[_0x177012(-0xbd,-0x9f)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports[_0x280fac(-0x21,-0x10)]=CanvasWindLayer,exports[_0x177012(-0x138,-0xd6)]=WindLayer,exports['WindUtil']=WindUtil;const _0x311ab0={};_0x311ab0['value']=!![];function _0x280fac(_0x4d5ff1,_0x458cf8){return _0x1314(_0x4d5ff1- -0x208,_0x458cf8);}Object['defineProperty'](exports,_0x280fac(-0x81,-0xe2),_0x311ab0);
}));
