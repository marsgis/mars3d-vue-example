/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.4
 * 编译日期：2025-09-07 18:08
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x511b36,_0x375496){const _0x315cc3=_0x511b36();function _0x508e17(_0x56e8de,_0x5c9754){return _0x37c5(_0x56e8de- -0x1d,_0x5c9754);}function _0x2c5fa3(_0x4234f6,_0x1f1f81){return _0x37c5(_0x4234f6-0x391,_0x1f1f81);}while(!![]){try{const _0x261283=parseInt(_0x508e17(0x18f,0x1f7))/0x1*(parseInt(_0x508e17(0x190,0x156))/0x2)+parseInt(_0x2c5fa3(0x5c5,0x540))/0x3+parseInt(_0x2c5fa3(0x586,0x58f))/0x4+-parseInt(_0x508e17(0x258,0x2a4))/0x5*(parseInt(_0x508e17(0x218,0x1e4))/0x6)+parseInt(_0x2c5fa3(0x5fd,0x661))/0x7*(parseInt(_0x508e17(0x1f3,0x1cb))/0x8)+parseInt(_0x2c5fa3(0x58c,0x587))/0x9*(-parseInt(_0x508e17(0x296,0x27e))/0xa)+-parseInt(_0x2c5fa3(0x5f9,0x62f))/0xb*(parseInt(_0x508e17(0x286,0x23f))/0xc);if(_0x261283===_0x375496)break;else _0x315cc3['push'](_0x315cc3['shift']());}catch(_0x2dbff6){_0x315cc3['push'](_0x315cc3['shift']());}}}(_0x285e,0x7d36b));function _interopNamespace(_0x513d82){if(_0x513d82&&_0x513d82['__esModule'])return _0x513d82;var _0x8fce7f=Object['create'](null);return _0x513d82&&Object['keys'](_0x513d82)['forEach'](function(_0x22d779){function _0xa32785(_0x358047,_0x33bdf9){return _0x37c5(_0x33bdf9-0x365,_0x358047);}function _0x1c6163(_0x208721,_0x44e106){return _0x37c5(_0x208721-0x11c,_0x44e106);}if(_0x22d779!=='default'){var _0x23e08d=Object[_0xa32785(0x56b,0x556)](_0x513d82,_0x22d779);Object[_0xa32785(0x5a2,0x5ed)](_0x8fce7f,_0x22d779,_0x23e08d['get']?_0x23e08d:{'enumerable':!![],'get':function(){return _0x513d82[_0x22d779];}});}}),_0x8fce7f['default']=_0x513d82,_0x8fce7f;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x585644,_0x1ffd28){const _0x16f166=_0x585644*Math['cos'](Cesium$2['Math']['toRadians'](_0x1ffd28));return _0x16f166;}function getV(_0x4c386d,_0x3f1f0e){const _0x1205fc=_0x4c386d*Math[_0x53aa46(-0x71,-0xaa)](Cesium$2['Math'][_0x53aa46(0x28,-0x2d)](_0x3f1f0e));function _0x3114c8(_0x17b15e,_0xd6c8da){return _0x37c5(_0xd6c8da-0x149,_0x17b15e);}function _0x53aa46(_0x449b5f,_0x1137f6){return _0x37c5(_0x1137f6- -0x2b2,_0x449b5f);}return _0x1205fc;}function getSpeed(_0x3f1e22,_0x5c477f){function _0x139145(_0x176c40,_0x2d0c13){return _0x37c5(_0x2d0c13-0x361,_0x176c40);}const _0x3b7328=Math['sqrt'](Math['pow'](_0x3f1e22,0x2)+Math[_0x139145(0x5a4,0x58b)](_0x5c477f,0x2));return _0x3b7328;}function getDirection(_0xb1e8e3,_0x53018a){let _0x35b76a=Cesium$2['Math']['toDegrees'](Math['atan2'](_0x53018a,_0xb1e8e3));return _0x35b76a+=_0x35b76a<0x0?0x168:0x0,_0x35b76a;}const _0x4f3b51={};_0x4f3b51['__proto__']=null,_0x4f3b51['getU']=getU,_0x4f3b51[_0x48569e(-0x177,-0x1bf)]=getV,_0x4f3b51['getSpeed']=getSpeed,_0x4f3b51[_0x48569e(-0x159,-0x1c6)]=getDirection;var WindUtil=_0x4f3b51,updatePositionShader=_0x48569e(-0x189,-0x205),calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader=_0x219830(-0x15e,-0x121);const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x48569e(-0xcf,-0xae)];function _0x48569e(_0x113631,_0x55a9b6){return _0x37c5(_0x113631- -0x38a,_0x55a9b6);}class ShaderManager{static['getCalculateSpeedShader'](){const _0xb6254a={};_0xb6254a[_0x420bbe(0x4c3,0x472)]=[calculateSpeedShader];function _0x420bbe(_0x3bcf51,_0x3b8b76){return _0x219830(_0x3b8b76-0x5c4,_0x3bcf51);}return new ShaderSource$1(_0xb6254a);}static['getUpdatePositionShader'](){const _0x584d0f={};return _0x584d0f['sources']=[updatePositionShader],new ShaderSource$1(_0x584d0f);}static['getSegmentDrawVertexShader'](){const _0x21de84={};return _0x21de84['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x21de84);}static[_0x219830(-0x227,-0x232)](){const _0x29f372={};return _0x29f372['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x29f372);}static[_0x48569e(-0x127,-0x142)](){function _0x2cc1af(_0x1e43cc,_0x36c337){return _0x48569e(_0x1e43cc-0x356,_0x36c337);}const _0x413f45={};return _0x413f45[_0x2cc1af(0x252,0x2a7)]=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x413f45);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0x219830(-0x11d,-0xfb)];class CustomPrimitive{constructor(_0xf44ebc){function _0x4ed5ed(_0x1a9a9e,_0x48c1fd){return _0x219830(_0x1a9a9e-0xd,_0x48c1fd);}this['commandType']=_0xf44ebc['commandType'],this['geometry']=_0xf44ebc['geometry'],this['attributeLocations']=_0xf44ebc[_0xc1ea8b(0x1ff,0x1d8)],this[_0xc1ea8b(0x213,0x207)]=_0xf44ebc[_0xc1ea8b(0x20a,0x207)],this[_0x4ed5ed(-0x1e5,-0x227)]=_0xf44ebc['uniformMap']||{},this[_0xc1ea8b(0x2da,0x2a4)]=_0xf44ebc[_0xc1ea8b(0x233,0x2a4)],this['fragmentShaderSource']=_0xf44ebc['fragmentShaderSource'];function _0xc1ea8b(_0x51ffd7,_0x3ad7ca){return _0x219830(_0x3ad7ca-0x3c8,_0x51ffd7);}this[_0x4ed5ed(-0x175,-0x15c)]=_0xf44ebc['rawRenderState'],this['framebuffer']=_0xf44ebc[_0xc1ea8b(0x15b,0x1b6)],this['outputTexture']=_0xf44ebc[_0xc1ea8b(0x19c,0x1be)],this['autoClear']=_0xf44ebc['autoClear']??![],this['preExecute']=_0xf44ebc[_0x4ed5ed(-0x198,-0x1a8)],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this[_0x4ed5ed(-0x225,-0x1e9)]=_0xf44ebc['isDynamic']??(()=>!![]),this['autoClear']&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1[_0x4ed5ed(-0x122,-0x175)]}));}['createCommand'](_0x1f012a){function _0x15d1d2(_0x3264b3,_0x15fa06){return _0x219830(_0x3264b3-0x29,_0x15fa06);}function _0x327e41(_0x579a2,_0x59b3c5){return _0x219830(_0x59b3c5-0x3d7,_0x579a2);}if(this['commandType']===_0x15d1d2(-0x1c6,-0x237)){const _0x3b9629={};_0x3b9629[_0x327e41(0x205,0x1da)]=_0x1f012a,_0x3b9629[_0x15d1d2(-0x148,-0xc6)]=this[_0x327e41(0x287,0x266)],_0x3b9629[_0x15d1d2(-0x1c7,-0x239)]=this[_0x15d1d2(-0x1c7,-0x185)],_0x3b9629['bufferUsage']=BufferUsage$1[_0x327e41(0x29e,0x2b7)];const _0x45b0cb=VertexArray$1['fromGeometry'](_0x3b9629),_0x4356cc={};_0x4356cc['context']=_0x1f012a,_0x4356cc[_0x327e41(0x262,0x2b3)]=this['vertexShaderSource'],_0x4356cc[_0x15d1d2(-0x177,-0x15a)]=this['fragmentShaderSource'],_0x4356cc['attributeLocations']=this['attributeLocations'];const _0x452ebd=ShaderProgram['fromCache'](_0x4356cc),_0x5738a8=RenderState['fromCache'](this['rawRenderState']),_0x3e967a={};return _0x3e967a['owner']=this,_0x3e967a['vertexArray']=_0x45b0cb,_0x3e967a['primitiveType']=this['primitiveType'],_0x3e967a['modelMatrix']=Matrix4['IDENTITY'],_0x3e967a[_0x327e41(0x1c2,0x1b6)]=_0x5738a8,_0x3e967a['shaderProgram']=_0x452ebd,_0x3e967a['framebuffer']=this[_0x327e41(0x204,0x1c5)],_0x3e967a['uniformMap']=this['uniformMap'],_0x3e967a[_0x327e41(0x1fd,0x205)]=Pass$1['OPAQUE'],new DrawCommand(_0x3e967a);}else{if(this[_0x327e41(0x170,0x1dd)]===_0x15d1d2(-0x1c3,-0x1bd)){const _0x35c80c={};return _0x35c80c[_0x327e41(0x2ac,0x265)]=this,_0x35c80c[_0x15d1d2(-0x177,-0x1ac)]=this['fragmentShaderSource'],_0x35c80c['uniformMap']=this['uniformMap'],_0x35c80c['outputTexture']=this['outputTexture'],_0x35c80c['persists']=!![],new ComputeCommand(_0x35c80c);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x57a7ca,_0x325508){function _0xb68e20(_0x5da71d,_0x48e242){return _0x48569e(_0x48e242- -0x21,_0x5da71d);}this['geometry']=_0x325508;function _0x222288(_0x31af2e,_0x422600){return _0x48569e(_0x31af2e-0x1da,_0x422600);}defined(this['commandToExecute'])&&(this[_0xb68e20(-0x181,-0x197)]['vertexArray']=VertexArray$1['fromGeometry']({'context':_0x57a7ca,'geometry':this[_0x222288(0xb7,0x13a)],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}[_0x48569e(-0x1bd,-0x1de)](_0x19a2d1){if(!this['isDynamic']())return;if(!this[_0x33eb31(0xcb,0x8b)]||!defined(_0x19a2d1))return;function _0x33eb31(_0x398b40,_0x33ef14){return _0x219830(_0x398b40-0x284,_0x33ef14);}!defined(this[_0x201d2c(0x25e,0x21f)])&&(this['commandToExecute']=this['createCommand'](_0x19a2d1['context']));defined(this['preExecute'])&&this['preExecute']();if(!_0x19a2d1[_0x201d2c(0x224,0x292)]){console['warn']('frameState.commandList\x20is\x20undefined');return;}defined(this[_0x33eb31(0x119,0x139)])&&_0x19a2d1['commandList']['push'](this['clearCommand']);function _0x201d2c(_0x4dfbd0,_0x3205e0){return _0x48569e(_0x3205e0-0x395,_0x4dfbd0);}defined(this['commandToExecute'])&&_0x19a2d1['commandList']['push'](this[_0x201d2c(0x25c,0x21f)]);}['isDestroyed'](){return![];}['destroy'](){function _0x42c377(_0x477c81,_0x6efc31){return _0x48569e(_0x477c81-0x84,_0x6efc31);}if(defined(this['commandToExecute'])){var _0x560607;(_0x560607=this[_0x42c377(-0xf2,-0xbd)]['shaderProgram'])===null||_0x560607===void 0x0||_0x560607['destroy'](),this['commandToExecute']['shaderProgram']=undefined;}return destroyObject(this);}}function deepMerge(_0x344a13,_0x17233c){if(!_0x344a13)return _0x17233c;if(!_0x17233c)return _0x344a13;const _0x2f6095={..._0x17233c};function _0x2e0367(_0x3fa025,_0x38e467){return _0x48569e(_0x3fa025-0x58b,_0x38e467);}const _0x328b34=_0x2f6095;for(const _0x4b0cf9 in _0x344a13){if(Object['prototype'][_0x2e0367(0x41d,0x496)]['call'](_0x344a13,_0x4b0cf9)){const _0x3a14a3=_0x344a13[_0x4b0cf9],_0x15f15e=_0x17233c[_0x4b0cf9];if(Array['isArray'](_0x3a14a3)){_0x328b34[_0x4b0cf9]=_0x3a14a3['slice']();continue;}if(_0x3a14a3&&typeof _0x3a14a3==='object'){_0x328b34[_0x4b0cf9]=deepMerge(_0x3a14a3,_0x15f15e||{});continue;}_0x3a14a3!==undefined&&(_0x328b34[_0x4b0cf9]=_0x3a14a3);}}return _0x328b34;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x48569e(-0xcf,-0xb5)];class WindParticlesComputing{constructor(_0x5c477e,_0x334fb5,_0x20b893,_0x405bc3,_0x4fb0ed){this['context']=_0x5c477e,this[_0xf8c74(0x7a,0x7b)]=_0x20b893,this['viewerParameters']=_0x405bc3,this[_0xf8c74(0x10c,0x117)]=_0x334fb5,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;function _0xf8c74(_0x4c6965,_0x52e7d2){return _0x219830(_0x4c6965-0x286,_0x52e7d2);}const _0x1ea07d={};_0x1ea07d[_0xf8c74(0x63,-0xf)]=_0x4fb0ed,_0x1ea07d['samplingWindow']=0x1,_0x1ea07d[_0xf8c74(0x164,0x1f1)]=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x1ea07d),this['initFrameRate'](),this['createWindTextures'](),this['createParticlesTextures']();function _0x4c4b07(_0x42c625,_0x3db3f5){return _0x48569e(_0x3db3f5-0x616,_0x42c625);}this['createComputingPrimitives']();}[_0x219830(-0x1b3,-0x165)](){const _0x3ab71c=()=>{function _0x752813(_0x3482d3,_0x563c16){return _0x37c5(_0x3482d3-0xa9,_0x563c16);}function _0x2c2f4a(_0x5895fe,_0x24636f){return _0x37c5(_0x24636f-0x23,_0x5895fe);}this['frameRateMonitor'][_0x2c2f4a(0x1fd,0x21f)]>0x14&&(this['frameRate']=this[_0x752813(0x289,0x257)]['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math['max'](this['frameRate'],0x1));};_0x3ab71c();const _0x246541=setInterval(_0x3ab71c,0x3e8);function _0x1e3520(_0x1f1c9c,_0xb86e60){return _0x48569e(_0xb86e60-0x678,_0x1f1c9c);}function _0x50bda0(_0x465742,_0x33afff){return _0x219830(_0x465742-0x168,_0x33afff);}const _0x1fbfd5=this['destroy'][_0x1e3520(0x527,0x533)](this);this[_0x1e3520(0x557,0x598)]=()=>{clearInterval(_0x246541),_0x1fbfd5();};}['createWindTextures'](){const _0x4b7d3b={};function _0x34dfcd(_0x47aaab,_0x5e1b2a){return _0x48569e(_0x5e1b2a-0x4f4,_0x47aaab);}_0x4b7d3b['minificationFilter']=TextureMinificationFilter$1[_0x2aec69(0x5ec,0x5b7)],_0x4b7d3b[_0x34dfcd(0x36a,0x36f)]=TextureMagnificationFilter$1[_0x2aec69(0x590,0x5b7)];function _0x2aec69(_0x539437,_0x5834a2){return _0x48569e(_0x5834a2-0x688,_0x539437);}const _0x3ee5c3={'context':this['context'],'width':this[_0x2aec69(0x50c,0x55c)]['width'],'height':this[_0x34dfcd(0x3bc,0x3c8)][_0x2aec69(0x459,0x4b7)],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0x34dfcd(0x2b2,0x336)]['flipY']??![],'sampler':new Sampler$1(_0x4b7d3b)};this['windTextures']={'U':new Texture$1({..._0x3ee5c3,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x34dfcd(0x345,0x3cf)])}}),'V':new Texture$1({..._0x3ee5c3,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}['createParticlesTextures'](){const _0x4c00b1={};_0x4c00b1[_0x44ce3f(-0x93,-0x6b)]=TextureMinificationFilter$1['NEAREST'];function _0xa1cb73(_0x5eccbe,_0x1956c5){return _0x219830(_0x1956c5-0x1fb,_0x5eccbe);}_0x4c00b1[_0x44ce3f(-0x9d,-0x74)]=TextureMagnificationFilter$1['NEAREST'];const _0x106fd3={'context':this['context'],'width':this['options']['particlesTextureSize'],'height':this[_0x44ce3f(-0xcb,-0xad)][_0x44ce3f(0x7e,-0x3)],'pixelFormat':PixelFormat$1[_0x44ce3f(0xaa,0x2f)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0xa1cb73(0x45,0x99)]*this['options']['particlesTextureSize']*0x4)[_0x44ce3f(-0x10d,-0x96)](0x0)},'sampler':new Sampler$1(_0x4c00b1)};function _0x44ce3f(_0x22d90d,_0x3b6146){return _0x48569e(_0x3b6146-0x111,_0x22d90d);}this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x106fd3),'currentParticlesPosition':new Texture$1(_0x106fd3),'nextParticlesPosition':new Texture$1(_0x106fd3),'postProcessingPosition':new Texture$1(_0x106fd3),'particlesSpeed':new Texture$1(_0x106fd3)};}[_0x48569e(-0x106,-0xe6)](){function _0x38cc92(_0x97ac1b,_0x1a59da){return _0x219830(_0x1a59da-0x531,_0x97ac1b);}Object['values'](this['particlesTextures'])[_0x38cc92(0x386,0x322)](_0x163c27=>_0x163c27['destroy']());}[_0x48569e(-0x180,-0x1c2)](){function _0x3ab7c8(_0x1d5ae8,_0xcf1412){return _0x219830(_0xcf1412-0x459,_0x1d5ae8);}function _0xe03ee8(_0x33db6a,_0xfe18e7){return _0x48569e(_0x33db6a-0x5a0,_0xfe18e7);}this[_0x3ab7c8(0x26f,0x297)]={'calculateSpeed':new CustomPrimitive({'commandType':_0xe03ee8(0x402,0x48a),'uniformMap':{'U':()=>this[_0x3ab7c8(0x29b,0x230)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u']['min'],this[_0xe03ee8(0x474,0x495)]['u'][_0xe03ee8(0x4ad,0x517)]),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0xe03ee8(0x3b9,0x392)],this['windData']['v']['max']),'speedRange':()=>new Cartesian2$1(this[_0xe03ee8(0x474,0x41a)][_0x3ab7c8(0x1f1,0x239)]['min'],this['windData']['speed'][_0xe03ee8(0x4ad,0x4fe)]),'currentParticlesPosition':()=>this['particlesTextures'][_0x3ab7c8(0x213,0x26f)],'speedScaleFactor':()=>{function _0x2b0a67(_0x139c8f,_0x115fcb){return _0xe03ee8(_0x115fcb- -0x150,_0x139c8f);}function _0x41608f(_0x3792cb,_0x40d15c){return _0xe03ee8(_0x3792cb- -0x5a3,_0x40d15c);}return(this[_0x2b0a67(0x253,0x297)]['pixelSize']+0x32)*this[_0x41608f(-0x1c1,-0x208)]['speedFactor'];},'frameRateAdjustment':()=>this[_0x3ab7c8(0x368,0x31e)],'dimension':()=>new Cartesian2$1(this['windData']['width'],this[_0x3ab7c8(0x269,0x2df)][_0x3ab7c8(0x1ca,0x23a)]),'minimum':()=>new Cartesian2$1(this[_0xe03ee8(0x474,0x4ea)]['bounds']['west'],this['windData']['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData']['bounds']['east'],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':()=>{function _0x163e8a(_0x45736a,_0x1dd8de){return _0xe03ee8(_0x45736a-0xf4,_0x1dd8de);}function _0x338e3e(_0x146157,_0x1ef7d6){return _0xe03ee8(_0x146157- -0x418,_0x1ef7d6);}const _0x54e8bc=this[_0x338e3e(0xa3,0x45)]['previousParticlesPosition'];this[_0x163e8a(0x5af,0x622)][_0x338e3e(0xab,0x10d)]=this['particlesTextures']['currentParticlesPosition'],this[_0x163e8a(0x5af,0x608)]['currentParticlesPosition']=this[_0x338e3e(0xa3,0xd8)]['postProcessingPosition'],this['particlesTextures'][_0x338e3e(0x71,0xac)]=_0x54e8bc,this[_0x163e8a(0x520,0x579)][_0x163e8a(0x5a0,0x562)]['commandToExecute']&&(this[_0x338e3e(0x14,0x76)]['calculateSpeed']['commandToExecute']['outputTexture']=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this[_0x3ab7c8(0x244,0x24d)][_0x3ab7c8(0x2e1,0x28d)]}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'particlesSpeed':()=>this[_0x3ab7c8(0x2ee,0x326)]['particlesSpeed']},'fragmentShaderSource':ShaderManager[_0xe03ee8(0x448,0x410)](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x11deeb(_0x2f7422,_0x53e184){return _0xe03ee8(_0x53e184- -0xc4,_0x2f7422);}function _0x13ba98(_0x5cedb,_0x54076c){return _0x3ab7c8(_0x54076c,_0x5cedb- -0x278);}this[_0x11deeb(0x2f6,0x368)]['updatePosition'][_0x13ba98(0x1d,-0x3d)]&&(this['primitives']['updatePosition'][_0x11deeb(0x3e2,0x366)]['outputTexture']=this['particlesTextures'][_0x13ba98(-0x4c,-0x29)]);},'isDynamic':()=>this['options']['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures'][_0xe03ee8(0x3c1,0x415)],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this[_0x3ab7c8(0x23d,0x252)]['lonRange'],'latRange':()=>this['viewerParameters'][_0xe03ee8(0x4c2,0x51f)],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds'][_0x3ab7c8(0x338,0x2de)]),'dataLatRange':()=>new Cartesian2$1(this[_0xe03ee8(0x474,0x3f9)][_0xe03ee8(0x419,0x45b)]['south'],this['windData'][_0xe03ee8(0x419,0x44f)]['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options'][_0xe03ee8(0x488,0x4ce)],'dropRateBump':()=>this[_0xe03ee8(0x3e2,0x45c)][_0x3ab7c8(0x1bd,0x225)],'useViewerBounds':()=>this['options'][_0xe03ee8(0x4bc,0x507)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this[_0xe03ee8(0x4bb,0x4f7)][_0xe03ee8(0x489,0x459)],'preExecute':()=>{function _0x4cf84d(_0x5bba95,_0x5c37c8){return _0xe03ee8(_0x5bba95-0x37,_0x5c37c8);}function _0x27d8d0(_0x40f6df,_0x5e1d49){return _0x3ab7c8(_0x40f6df,_0x5e1d49- -0xb9);}this['primitives'][_0x27d8d0(0x215,0x23b)]['commandToExecute']&&(this[_0x4cf84d(0x463,0x483)]['postProcessingPosition']['commandToExecute']['outputTexture']=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this['options']['dynamic']})};}[_0x219830(-0x1a2,-0x127)](){function _0x46729a(_0x4662c5,_0x45ec6b){return _0x219830(_0x45ec6b-0x1bd,_0x4662c5);}this['windTextures']['U']['destroy']();function _0x31c21a(_0x309912,_0x48b43c){return _0x48569e(_0x48b43c-0x2f8,_0x309912);}this['windTextures']['V'][_0x31c21a(0x292,0x218)](),this[_0x31c21a(0x179,0x165)]();}['updateWindData'](_0x463caa){this[_0x258299(-0xd,-0x61)]=_0x463caa;function _0x258299(_0x43bcb9,_0x20d770){return _0x48569e(_0x20d770-0xcb,_0x43bcb9);}this['reCreateWindTextures']();}['updateOptions'](_0x3f8a2a){function _0x279be2(_0x56f66d,_0x5aa7d5){return _0x48569e(_0x5aa7d5-0x411,_0x56f66d);}const _0x59c53f=_0x3f8a2a[_0xf60fb1(0x57e,0x59b)]!==undefined&&_0x3f8a2a['flipY']!==this[_0xf60fb1(0x501,0x515)]['flipY'];function _0xf60fb1(_0x16ae5e,_0x1bd10e){return _0x219830(_0x1bd10e-0x721,_0x16ae5e);}this['options']=deepMerge(_0x3f8a2a,this[_0x279be2(0x20d,0x253)]),_0x59c53f&&this['reCreateWindTextures']();}['processWindData'](_0x25f6bc){const {array:_0x295417}=_0x25f6bc;let {min:_0x2e1144,max:_0x5dda98}=_0x25f6bc;const _0x1d381e=new Float32Array(_0x295417[_0xcc3290(0x101,0xcd)]);_0x2e1144===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x2e1144=Math['min'](..._0x295417));function _0x3cb07c(_0x4dfdce,_0x5561b2){return _0x48569e(_0x5561b2-0xed,_0x4dfdce);}_0x5dda98===undefined&&(console[_0xcc3290(0x14f,0x172)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x5dda98=Math['max'](..._0x295417));const _0x2525cf=Math['max'](Math[_0x3cb07c(-0x7d,-0xae)](_0x2e1144),Math['abs'](_0x5dda98));function _0xcc3290(_0x4ad42a,_0x6ae019){return _0x219830(_0x4ad42a-0x2a9,_0x6ae019);}for(let _0x5cd202=0x0;_0x5cd202<_0x295417['length'];_0x5cd202++){const _0x1fc737=_0x295417[_0x5cd202]/_0x2525cf;_0x1d381e[_0x5cd202]=_0x1fc737;}return _0x1d381e;}['destroy'](){function _0x111d62(_0xdf02ba,_0xb90883){return _0x219830(_0xb90883-0x7b3,_0xdf02ba);}Object['values'](this[_0xca2fe6(-0x142,-0x1c7)])['forEach'](_0x56a5be=>_0x56a5be['destroy']());function _0xca2fe6(_0x3de790,_0x355ad7){return _0x48569e(_0x355ad7-0x14,_0x3de790);}Object['values'](this[_0xca2fe6(-0xcd,-0xd1)])[_0x111d62(0x5d5,0x5a4)](_0x5e6a95=>_0x5e6a95[_0xca2fe6(-0xa3,-0xcc)]()),Object[_0x111d62(0x661,0x61d)](this[_0x111d62(0x5f2,0x5f1)])['forEach'](_0x135a99=>_0x135a99['destroy']()),this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x5d1b0e,_0x4effaa,_0x5875a0,_0x2d91b3){this['context']=_0x5d1b0e;function _0xede3da(_0x4f2d4d,_0x571edd){return _0x219830(_0x4f2d4d-0x5cf,_0x571edd);}this[_0xede3da(0x3c3,0x422)]=_0x4effaa,this[_0x5ad238(0x10a,0x97)]=_0x5875a0,this[_0xede3da(0x484,0x453)]=_0x2d91b3;(typeof this[_0xede3da(0x3c3,0x3cd)][_0xede3da(0x46d,0x3e9)]!==_0xede3da(0x423,0x427)||this['options']['particlesTextureSize']<=0x0)&&(console[_0x5ad238(0xde,0xcf)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options']['particlesTextureSize']=0x100);function _0x5ad238(_0x237627,_0x350066){return _0x219830(_0x350066-0x29e,_0x237627);}this['colorTable']=this['createColorTableTexture'](),this['textures']=this[_0xede3da(0x468,0x427)](),this[_0xede3da(0x3ba,0x3c9)]=this['createRenderingFramebuffers'](),this[_0x5ad238(0xa6,0xdc)]=this['createPrimitives']();}[_0x219830(-0x167,-0xf6)](){const _0x4befe8={};_0x4befe8['context']=this[_0x4b3479(-0x274,-0x1ec)],_0x4befe8[_0x576ae6(0x42c,0x3f9)]=this[_0x576ae6(0x3a8,0x42d)]['drawingBufferWidth'];function _0x4b3479(_0xa4702,_0x21f7fb){return _0x48569e(_0x21f7fb- -0x3d,_0xa4702);}_0x4befe8['height']=this['context'][_0x576ae6(0x536,0x4f6)],_0x4befe8[_0x576ae6(0x504,0x4b1)]=PixelFormat[_0x4b3479(-0xf9,-0x11f)],_0x4befe8['pixelDatatype']=PixelDatatype[_0x576ae6(0x3c5,0x41a)];const _0x55ea23=_0x4befe8,_0x5bb172={};_0x5bb172[_0x576ae6(0x4aa,0x42d)]=this[_0x4b3479(-0x223,-0x1ec)],_0x5bb172['width']=this[_0x4b3479(-0x1bb,-0x1ec)]['drawingBufferWidth'],_0x5bb172['height']=this[_0x4b3479(-0x200,-0x1ec)][_0x4b3479(-0x128,-0x123)],_0x5bb172['pixelFormat']=PixelFormat['DEPTH_COMPONENT'],_0x5bb172['pixelDatatype']=PixelDatatype[_0x576ae6(0x4f3,0x4dc)];const _0x11d166=_0x5bb172;function _0x576ae6(_0x5aa9e1,_0x213280){return _0x219830(_0x213280-0x62a,_0x5aa9e1);}return{'segmentsColor':new Texture(_0x55ea23),'segmentsDepth':new Texture(_0x11d166)};}[_0x219830(-0x17d,-0xf0)](){const _0xfbbf1d={};_0xfbbf1d[_0x18d28f(0x107,0x192)]=this[_0x18d28f(0x1f5,0x192)];function _0x5a5032(_0x293ada,_0x4d8904){return _0x219830(_0x4d8904-0x150,_0x293ada);}function _0x18d28f(_0x43bac5,_0xa2651e){return _0x219830(_0xa2651e-0x38f,_0x43bac5);}return _0xfbbf1d[_0x18d28f(0x24d,0x20e)]=[this['textures']['segmentsColor']],_0xfbbf1d['depthTexture']=this[_0x5a5032(-0x10,-0x14)]['segmentsDepth'],{'segments':new Framebuffer(_0xfbbf1d)};}['destoryRenderingFramebuffers'](){Object['values'](this['framebuffers'])['forEach'](_0x3e343d=>{_0x3e343d['destroy']();});}['createColorTableTexture'](){const _0x569220=new Float32Array(this['options']['colors'][_0x12a3b7(-0x2b,-0x3)](_0x354b2d=>{const _0x58b5af=Color$1['fromCssColorString'](_0x354b2d);return[_0x58b5af['red'],_0x58b5af['green'],_0x58b5af['blue'],_0x58b5af['alpha']];}));function _0x1a730f(_0x411664,_0x28a1b1){return _0x219830(_0x411664-0x65b,_0x28a1b1);}const _0x459181={};_0x459181['minificationFilter']=TextureMinificationFilter['LINEAR'],_0x459181['magnificationFilter']=TextureMagnificationFilter[_0x12a3b7(0x5b,0x6b)],_0x459181['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x459181['wrapT']=TextureWrap[_0x12a3b7(-0x1f,0x1)];function _0x12a3b7(_0x4e5d25,_0x1054e8){return _0x219830(_0x1054e8-0x18a,_0x4e5d25);}return new Texture({'context':this['context'],'width':this['options'][_0x12a3b7(-0x12,-0x7)]['length'],'height':0x1,'pixelFormat':PixelFormat[_0x1a730f(0x52b,0x564)],'pixelDatatype':PixelDatatype[_0x1a730f(0x4fc,0x4a2)],'sampler':new Sampler(_0x459181),'source':{'width':this['options']['colors'][_0x1a730f(0x4b3,0x454)],'height':0x1,'arrayBufferView':_0x569220}});}['createSegmentsGeometry'](){const _0xc1160b=0x4,_0x1617f4=this[_0x4ed119(0x55b,0x556)]['particlesTextureSize'];let _0x8de93a=[];for(let _0x10fa7b=0x0;_0x10fa7b<_0x1617f4;_0x10fa7b++){for(let _0x11e0b0=0x0;_0x11e0b0<_0x1617f4;_0x11e0b0++){for(let _0x3e3acd=0x0;_0x3e3acd<_0xc1160b;_0x3e3acd++){_0x8de93a['push'](_0x10fa7b/_0x1617f4),_0x8de93a['push'](_0x11e0b0/_0x1617f4);}}}_0x8de93a=new Float32Array(_0x8de93a);const _0x1059f7=this[_0x343424(0x3bd,0x351)]['particlesTextureSize']**0x2;let _0x25b071=[];for(let _0x3bfd71=0x0;_0x3bfd71<_0x1059f7;_0x3bfd71++){_0x25b071['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x25b071=new Float32Array(_0x25b071);let _0x560b75=[];for(let _0x121b54=0x0,_0x495286=0x0;_0x121b54<_0x1059f7;_0x121b54++){_0x560b75['push'](_0x495286+0x0,_0x495286+0x1,_0x495286+0x2,_0x495286+0x2,_0x495286+0x1,_0x495286+0x3),_0x495286+=_0xc1160b;}_0x560b75=new Uint32Array(_0x560b75);const _0x13239b={};_0x13239b['componentDatatype']=ComponentDatatype['FLOAT'],_0x13239b['componentsPerAttribute']=0x2;function _0x4ed119(_0x26f37b,_0x16e5cb){return _0x219830(_0x26f37b-0x767,_0x16e5cb);}_0x13239b['values']=_0x8de93a;const _0x80cbf={};_0x80cbf['componentDatatype']=ComponentDatatype['FLOAT'],_0x80cbf['componentsPerAttribute']=0x3;function _0x343424(_0x334ff8,_0x33a9ba){return _0x219830(_0x33a9ba-0x55d,_0x334ff8);}_0x80cbf[_0x343424(0x3c7,0x3c7)]=_0x25b071;const _0xbbaed1=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x13239b),'normal':new GeometryAttribute(_0x80cbf)}),'indices':_0x560b75});return _0xbbaed1;}[_0x48569e(-0x166,-0x1e1)](_0x56a67c){const _0x55d7ad={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x56a67c};function _0x1e601c(_0x54d773,_0x5c1bd7){return _0x48569e(_0x5c1bd7-0x6a7,_0x54d773);}return Appearance[_0x1e601c(0x441,0x4c6)](!![],![],_0x55d7ad);}['createPrimitives'](){const _0x37fd14={};_0x37fd14['st']=0x0,_0x37fd14[_0x20ea0a(0x279,0x238)]=0x1;function _0x20ea0a(_0x2cb305,_0x28ab2e){return _0x48569e(_0x28ab2e-0x3bb,_0x2cb305);}const _0x3b9bfc={};_0x3b9bfc['enabled']=!![];const _0x59ea57={};_0x59ea57['enabled']=!![],_0x59ea57['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x59ea57[_0x551098(-0x1d,0x34)]=WebGLRenderingContext['SRC_ALPHA'],_0x59ea57['blendFuncDestination']=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x36b60e={};function _0x551098(_0x3edd86,_0x2f2d4f){return _0x48569e(_0x2f2d4f-0x141,_0x3edd86);}_0x36b60e[_0x20ea0a(0x1c5,0x1d9)]=undefined,_0x36b60e[_0x551098(0x9a,0x2f)]=_0x3b9bfc,_0x36b60e['depthMask']=!![],_0x36b60e['blending']=_0x59ea57;const _0x4af0a5=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x37fd14,'geometry':this[_0x20ea0a(0x1a9,0x1ed)](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this[_0x20ea0a(0x2d4,0x2be)]['particlesTextures'][_0x20ea0a(0x298,0x2de)],'currentParticlesPosition':()=>this['computing']['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this[_0x551098(0x98,0x44)][_0x20ea0a(0x314,0x2d6)][_0x551098(0x56,-0x2f)],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{function _0x103c4a(_0x4047d5,_0x47a74e){return _0x20ea0a(_0x47a74e,_0x4047d5- -0x306);}function _0x2862df(_0xe5ffda,_0x5069e0){return _0x20ea0a(_0x5069e0,_0xe5ffda- -0x2b0);}var _0x22b61f,_0x11a038;const _0x3c92a1=new Cartesian2(((_0x22b61f=this['options'][_0x2862df(-0x6a,-0xc0)])===null||_0x22b61f===void 0x0?void 0x0:_0x22b61f[_0x2862df(-0xdc,-0xf6)])??this['computing']['windData']['speed']['min'],((_0x11a038=this['options'][_0x103c4a(-0xc0,-0xc6)])===null||_0x11a038===void 0x0?void 0x0:_0x11a038['max'])??this[_0x103c4a(-0x48,0x3b)][_0x103c4a(-0x77,-0x9e)]['speed'][_0x103c4a(-0x3e,-0xb7)]);return _0x3c92a1;},'displayRange':()=>{function _0x14e0cf(_0xbb5b0b,_0x4503d9){return _0x551098(_0x4503d9,_0xbb5b0b-0x522);}var _0x205473,_0x3bf5ec;const _0x1c63eb=new Cartesian2(((_0x205473=this[_0x14e0cf(0x4a5,0x498)]['displayRange'])===null||_0x205473===void 0x0?void 0x0:_0x205473['min'])??this[_0x14e0cf(0x566,0x5cf)][_0x35d193(-0x10,-0x24)][_0x14e0cf(0x491,0x478)]['min'],((_0x3bf5ec=this[_0x14e0cf(0x4a5,0x500)][_0x35d193(-0x6a,-0x88)])===null||_0x3bf5ec===void 0x0?void 0x0:_0x3bf5ec['max'])??this[_0x14e0cf(0x566,0x588)]['windData']['speed']['max']);function _0x35d193(_0x1f6381,_0x6e5226){return _0x20ea0a(_0x1f6381,_0x6e5226- -0x2b3);}return _0x1c63eb;},'particleHeight':()=>this[_0x20ea0a(0x21b,0x1fd)]['fixedHeight']||0x0,'aspect':()=>this['context'][_0x20ea0a(0x1ed,0x1eb)]/this['context']['drawingBufferHeight'],'pixelSize':()=>this[_0x551098(-0x15,-0x78)]['pixelSize'],'lineWidth':()=>{function _0x44975a(_0x524477,_0x4311af){return _0x551098(_0x524477,_0x4311af-0x568);}function _0x25f335(_0x1c2248,_0x3df4e8){return _0x551098(_0x1c2248,_0x3df4e8-0x579);}const _0x1bd95b={};_0x1bd95b[_0x25f335(0x48a,0x4d3)]=0x1,_0x1bd95b[_0x44975a(0x547,0x5b6)]=0x2;const _0x19dc23=this['options']['lineWidth']||_0x1bd95b;return new Cartesian2(_0x19dc23['min'],_0x19dc23['max']);},'lineLength':()=>{function _0x5410b4(_0x4ff11e,_0x353ae2){return _0x20ea0a(_0x353ae2,_0x4ff11e- -0x75);}const _0x530446={};_0x530446['min']=0x14;function _0x28e835(_0x5733cf,_0x139f6b){return _0x551098(_0x139f6b,_0x5733cf- -0x72);}_0x530446['max']=0x64;const _0x55833b=this[_0x28e835(-0xef,-0xf4)][_0x5410b4(0x24c,0x26c)]||_0x530446;return new Cartesian2(_0x55833b['min'],_0x55833b['max']);},'is3D':()=>this[_0x20ea0a(0x19e,0x202)][_0x551098(0x79,0x57)]===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this[_0x551098(-0x2f,0x2b)]['segmentsDepth']},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this[_0x20ea0a(0x2c8,0x255)](_0x36b60e)}),_0x20f07f={};return _0x20f07f[_0x551098(-0x79,-0x29)]=_0x4af0a5,_0x20f07f;}[_0x48569e(-0x1b2,-0x1d7)](){const _0xcd18d4=this['createSegmentsGeometry']();function _0x4f6050(_0xe1469a,_0x14fd61){return _0x219830(_0x14fd61-0x418,_0xe1469a);}this[_0x1ab883(0x439,0x493)][_0x4f6050(0x29b,0x260)]['geometry']=_0xcd18d4;const _0x158601={};_0x158601[_0x4f6050(0x205,0x21b)]=this['context'],_0x158601['geometry']=_0xcd18d4;function _0x1ab883(_0x1e1dcc,_0x4bbbb7){return _0x48569e(_0x1e1dcc-0x5ad,_0x4bbbb7);}_0x158601[_0x4f6050(0x21d,0x228)]=this['primitives']['segments']['attributeLocations'],_0x158601['bufferUsage']=BufferUsage[_0x1ab883(0x4db,0x47a)];const _0x103371=VertexArray[_0x4f6050(0x210,0x21d)](_0x158601);this[_0x1ab883(0x439,0x3f1)]['segments'][_0x1ab883(0x437,0x3bd)]&&(this[_0x1ab883(0x439,0x449)]['segments']['commandToExecute'][_0x1ab883(0x425,0x481)]=_0x103371);}['onColorTableChange'](){this['colorTable']['destroy']();function _0x4dbdca(_0xa94f38,_0x3fe4f6){return _0x48569e(_0x3fe4f6-0x586,_0xa94f38);}this['colorTable']=this[_0x4dbdca(0x458,0x454)]();}[_0x48569e(-0x1d4,-0x17f)](_0xc13f02){const _0x421f3e=_0xc13f02['colors']&&JSON[_0x1ce690(0x3e0,0x3b6)](_0xc13f02['colors'])!==JSON['stringify'](this['options'][_0x1ce690(0x42e,0x3e8)]);this[_0x774187(0x329,0x328)]=deepMerge(_0xc13f02,this[_0x774187(0x329,0x38f)]);function _0x1ce690(_0x572309,_0x55a1e0){return _0x48569e(_0x572309-0x571,_0x55a1e0);}function _0x774187(_0x797a79,_0x56a773){return _0x219830(_0x797a79-0x535,_0x56a773);}_0x421f3e&&this['onColorTableChange']();}['destroy'](){Object['values'](this['framebuffers'])[_0xcfbed(0x409,0x416)](_0x2c2a00=>{function _0x52383d(_0x5a771f,_0x2514b5){return _0xcfbed(_0x2514b5,_0x5a771f-0x18e);}_0x2c2a00[_0x52383d(0x685,0x687)]();});function _0xcfbed(_0x11b1bb,_0x43b6d4){return _0x48569e(_0x43b6d4-0x5d7,_0x11b1bb);}function _0x4e718a(_0x2355d0,_0x6e7131){return _0x48569e(_0x2355d0-0x89,_0x6e7131);}Object['values'](this['primitives'])[_0xcfbed(0x3a2,0x416)](_0x1fe990=>{function _0x53505c(_0x507d01,_0x3292c2){return _0x4e718a(_0x507d01-0x579,_0x3292c2);}_0x1fe990[_0x53505c(0x522,0x51d)]();}),this[_0x4e718a(-0x85,-0xdb)][_0x4e718a(-0x57,-0xa6)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x109b42,_0x5dc1dd,_0x3127ff,_0x40e9fc,_0x3a3af7){function _0x25e0f9(_0x1acceb,_0x3bfe12){return _0x48569e(_0x1acceb-0x6a5,_0x3bfe12);}this[_0x25e0f9(0x4f6,0x56d)]=_0x109b42;function _0x4f0ab3(_0x1bb91b,_0x195799){return _0x219830(_0x195799- -0xb,_0x1bb91b);}this[_0x25e0f9(0x4e7,0x46d)]=_0x3127ff,this['viewerParameters']=_0x40e9fc,this['computing']=new WindParticlesComputing(_0x109b42,_0x5dc1dd,_0x3127ff,_0x40e9fc,_0x3a3af7),this[_0x4f0ab3(-0x1c2,-0x135)]=new WindParticlesRendering(_0x109b42,_0x3127ff,_0x40e9fc,this['computing']),this[_0x4f0ab3(-0x1a1,-0x1d6)]();}['getPrimitives'](){const _0x42d884=[this['computing'][_0x178a05(0x3c4,0x3df)][_0x178a05(0x4c0,0x45f)],this['computing'][_0x2328f2(-0x39,-0x44)]['updatePosition'],this[_0x2328f2(0x42,0x33)][_0x2328f2(-0xab,-0x44)]['postProcessingPosition'],this['rendering'][_0x178a05(0x428,0x3df)][_0x178a05(0x3a3,0x3e9)]];function _0x2328f2(_0x127242,_0xb05ae1){return _0x219830(_0xb05ae1-0x17e,_0x127242);}function _0x178a05(_0x4f7631,_0xdf36f1){return _0x219830(_0xdf36f1-0x5a1,_0x4f7631);}return _0x42d884;}[_0x219830(-0x1cb,-0x17e)](){function _0x4b2cdf(_0x3e5fab,_0x350ff0){return _0x48569e(_0x350ff0-0x327,_0x3e5fab);}const _0xf11229=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x2ea099(0x40e,0x387)]});function _0x2ea099(_0x16d32f,_0x54bd22){return _0x219830(_0x16d32f-0x53d,_0x54bd22);}Object['keys'](this['rendering'][_0x2ea099(0x328,0x38e)])['forEach'](_0x96a4b8=>{_0xf11229['framebuffer']=this[_0x3b607a(0x91,0x48)]['framebuffers'][_0x96a4b8];function _0x3b607a(_0x197950,_0x22b4be){return _0x4b2cdf(_0x22b4be,_0x197950- -0x1ba);}function _0x2c9299(_0x3ec8e4,_0x384df3){return _0x2ea099(_0x384df3-0xa3,_0x3ec8e4);}_0xf11229[_0x2c9299(0x41b,0x441)](this[_0x2c9299(0x3c1,0x3e3)]);});}['changeOptions'](_0x1b176b){let _0x3837e2=![];function _0x3b5d6e(_0x28b749,_0x4a7020){return _0x219830(_0x4a7020-0xa6,_0x28b749);}_0x1b176b['particlesTextureSize']&&this[_0x3b5d6e(-0xdc,-0x166)][_0x4daefb(0x3f1,0x442)]!==_0x1b176b['particlesTextureSize']&&(_0x3837e2=!![]);function _0x4daefb(_0xac7fdd,_0x4f2e98){return _0x219830(_0xac7fdd-0x553,_0x4f2e98);}const _0x573db6=deepMerge(_0x1b176b,this['options']);if(_0x573db6['particlesTextureSize']<0x1)throw new Error(_0x4daefb(0x32f,0x384));this[_0x3b5d6e(-0x124,-0x166)]=_0x573db6,this['rendering']['updateOptions'](_0x1b176b),this['computing']['updateOptions'](_0x1b176b),_0x3837e2&&(this['computing'][_0x3b5d6e(-0x62,-0xae)](),this['computing']['createParticlesTextures'](),this['rendering']['onParticlesTextureSizeChange']());}[_0x219830(-0x188,-0x1fa)](_0x3d85e6){function _0x36850d(_0x350c14,_0x1768b6){return _0x48569e(_0x350c14-0x39b,_0x1768b6);}function _0x3ee896(_0x3747c6,_0x674aa2){return _0x48569e(_0x3747c6-0x2b1,_0x674aa2);}this[_0x36850d(0x1e2,0x1ba)]=_0x3d85e6,this[_0x3ee896(0x1b4,0x141)]['viewerParameters']=_0x3d85e6,this[_0x3ee896(0x1d5,0x22e)]['viewerParameters']=_0x3d85e6;}['destroy'](){function _0x15b93c(_0x1da2ca,_0x75427c){return _0x48569e(_0x75427c-0x392,_0x1da2ca);}this['computing'][_0x15b93c(0x276,0x2b2)](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace[_0x219830(-0x11d,-0x14f)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x223a08={};_0x223a08[_0x48569e(-0x1e7,-0x1b1)]=0x1,_0x223a08[_0x219830(-0x141,-0x169)]=0x2;const _0x330d01={};_0x330d01[_0x219830(-0x235,-0x27e)]=0x14;function _0x219830(_0xf69604,_0x40c5fc){return _0x37c5(_0xf69604- -0x3d8,_0x40c5fc);}_0x330d01['max']=0x64;const _0x3502f0={};_0x3502f0[_0x48569e(-0x114,-0x15a)]=0x64,_0x3502f0['fixedHeight']=0x0,_0x3502f0['lineWidth']=_0x223a08,_0x3502f0['lineLength']=_0x330d01,_0x3502f0[_0x48569e(-0x197,-0x165)]=0x1,_0x3502f0['dropRate']=0.003,_0x3502f0['dropRateBump']=0.001,_0x3502f0['colors']=[_0x48569e(-0x147,-0xd9)],_0x3502f0[_0x219830(-0x186,-0x14b)]=![],_0x3502f0['dynamic']=!![];const DEF_OPTIONS=_0x3502f0;class WindLayer extends BaseLayer$1{constructor(_0x8cb2c={}){_0x8cb2c={...DEF_OPTIONS,..._0x8cb2c},super(_0x8cb2c),this['_setOptionsHook'](_0x8cb2c,_0x8cb2c);}get['layer'](){function _0x4613da(_0x7ad317,_0x59b09f){return _0x48569e(_0x7ad317-0x631,_0x59b09f);}return this[_0x4613da(0x4bd,0x48c)];}get[_0x219830(-0x192,-0x13f)](){function _0x159342(_0x2c893a,_0xd02c9a){return _0x48569e(_0xd02c9a-0x271,_0x2c893a);}return this['options'][_0x159342(0x135,0x12d)];}set['data'](_0x52ffcb){function _0x1401e2(_0x4fb13f,_0x26931d){return _0x219830(_0x4fb13f-0x34b,_0x26931d);}this[_0x1401e2(0x13f,0x126)]['data']=_0x52ffcb,this['setData'](_0x52ffcb);}get['colors'](){return this['options']['colors'];}set[_0x48569e(-0x143,-0x17e)](_0x462cff){this['options']['colors']=_0x462cff;function _0x2b0f5b(_0x445b3b,_0x1f1552){return _0x48569e(_0x445b3b-0x152,_0x1f1552);}const _0x3b377d={};_0x3b377d['colors']=_0x462cff,this['_setOptionsHook'](this[_0x2b0f5b(-0x6c,-0x30)],_0x3b377d);}['_showHook'](_0x5f8b5d){function _0x17f930(_0x20d0f7,_0x21ea39){return _0x48569e(_0x20d0f7-0x6a6,_0x21ea39);}function _0x3a9db2(_0x16aa85,_0x282e34){return _0x48569e(_0x16aa85-0x7d,_0x282e34);}_0x5f8b5d?this[_0x17f930(0x545,0x509)]():this[_0x3a9db2(-0x6c,-0xc5)]();}['_mountedHook'](){}[_0x48569e(-0x161,-0x142)](){this[_0x3ae867(0x5a6,0x527)]=this['_map']['scene'],this['camera']=this[_0x584648(0x364,0x2e3)][_0x3ae867(0x48c,0x517)];this['options'][_0x3ae867(0x556,0x5b8)]&&this['setData'](this[_0x3ae867(0x521,0x53e)][_0x584648(0x37e,0x345)]);function _0x584648(_0x16a1a,_0x2a1a28){return _0x219830(_0x2a1a28-0x4d7,_0x16a1a);}if(!this['windData']||!this['show'])return;this['viewerParameters']={'lonRange':new Cesium$1[(_0x3ae867(0x5bf,0x607))](-0xb4,0xb4),'latRange':new Cesium$1[(_0x584648(0x3e5,0x394))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x3ae867(0x572,0x527)][_0x3ae867(0x624,0x60c)]},this[_0x3ae867(0x5ad,0x5fd)](),this[_0x3ae867(0x551,0x57d)]=new WindParticleSystem(this['scene'][_0x584648(0x252,0x2da)],this[_0x584648(0x351,0x35d)],this['options'],this[_0x3ae867(0x4f5,0x543)],this[_0x584648(0x23d,0x2b4)]),this[_0x3ae867(0x53f,0x588)]=this['particleSystem']['getPrimitives'](),this['primitives']['forEach'](_0x4d7d82=>{function _0x255aaa(_0x336941,_0x5df278){return _0x3ae867(_0x336941,_0x5df278- -0x4b6);}function _0x2a983a(_0x50cf33,_0x1a7d58){return _0x584648(_0x50cf33,_0x1a7d58- -0x379);}this['scene'][_0x2a983a(0x6,-0x64)][_0x255aaa(0xd2,0x96)](_0x4d7d82);}),this['camera']['percentageChanged']=0.01,this['camera']['changed'][_0x584648(0x2cf,0x32d)](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete'][_0x3ae867(0x5e0,0x5a0)](this[_0x584648(0x39c,0x38a)][_0x3ae867(0x564,0x5b7)](this));function _0x3ae867(_0x27bc3a,_0x55c5ec){return _0x48569e(_0x55c5ec-0x6fc,_0x27bc3a);}window['addEventListener']('resize',this['updateViewerParameters']['bind'](this));}['_removedHook'](){function _0x2ac5f6(_0x5df0af,_0x391c46){return _0x219830(_0x391c46-0x622,_0x5df0af);}this['camera']['changed'][_0x2ac5f6(0x50d,0x4fa)](this[_0x17c3b4(0x523,0x4f8)][_0x2ac5f6(0x500,0x48f)](this)),this[_0x17c3b4(0x407,0x422)]['morphComplete'][_0x2ac5f6(0x51c,0x4fa)](this['updateViewerParameters']['bind'](this)),window['removeEventListener']('resize',this[_0x2ac5f6(0x511,0x4d5)]['bind'](this));function _0x17c3b4(_0x9708db,_0x583342){return _0x48569e(_0x583342-0x5f7,_0x9708db);}this[_0x17c3b4(0x4fc,0x483)]&&(this[_0x2ac5f6(0x3d6,0x460)]['forEach'](_0x34f6cf=>{function _0xf36635(_0xe34581,_0x3d99cc){return _0x2ac5f6(_0xe34581,_0x3d99cc- -0x56f);}this[_0xf36635(-0x152,-0x170)]['primitives']['remove'](_0x34f6cf);}),delete this[_0x2ac5f6(0x4c3,0x460)]),this['particleSystem']&&(this['particleSystem']['destroy'](),delete this['particleSystem']);}[_0x48569e(-0x1dc,-0x1b9)](_0x285523,_0x29fddc){this[_0xf6f994(0x14e,0x153)]=this['processWindData'](_0x285523);function _0xf6f994(_0x59f974,_0x3c8531){return _0x48569e(_0x3c8531-0x27f,_0x59f974);}if(_0x29fddc){this['_removedHook'](),this[_0xe616a3(0x7c,0xe)]();return;}function _0xe616a3(_0x2f6c94,_0x4ff233){return _0x219830(_0x4ff233-0x1bd,_0x2f6c94);}this[_0xf6f994(0x9b,0x100)]?(this['particleSystem']['computing']['updateWindData'](this[_0xf6f994(0x148,0x153)]),this['scene']['requestRender']()):this['_addedHook']();}[_0x219830(-0x17c,-0x1ff)](_0x41cf06,_0x387cc5){function _0x2598dd(_0x1aafa8,_0x4c467b){return _0x219830(_0x4c467b-0x4ad,_0x1aafa8);}function _0x2461e7(_0x2095b3,_0x3ba865){return _0x48569e(_0x3ba865-0x269,_0x2095b3);}this[_0x2461e7(0xda,0xea)]&&(this['particleSystem']['changeOptions'](_0x387cc5),this['scene'][_0x2461e7(0xb9,0xa1)]());}['processWindData'](_0xad7fce){var _0xc11526,_0x5ada04;const _0x4891e0={..._0xad7fce};function _0x45d732(_0x38d2cd,_0x26d03f){return _0x48569e(_0x26d03f-0x656,_0x38d2cd);}const _0x1f2a9c=_0x4891e0;!_0x1f2a9c['height']&&_0x1f2a9c['rows']&&(_0x1f2a9c[_0x45d732(0x467,0x485)]=_0x1f2a9c[_0x13bd90(0x4a9,0x4fe)]);!_0x1f2a9c[_0x45d732(0x4d0,0x473)]&&_0x1f2a9c['cols']&&(_0x1f2a9c['width']=_0x1f2a9c[_0x45d732(0x4c0,0x50a)]);!_0x1f2a9c['bounds']&&(_0x1f2a9c['bounds']={'west':_0x1f2a9c['xmin'],'south':_0x1f2a9c['ymin'],'east':_0x1f2a9c['xmax'],'north':_0x1f2a9c[_0x45d732(0x4e6,0x47e)]});if(!_0x1f2a9c['u']){const _0x16f301={};_0x16f301['array']=_0xad7fce['udata'],_0x16f301['min']=_0xad7fce[_0x45d732(0x544,0x586)],_0x16f301[_0x45d732(0x531,0x563)]=_0xad7fce['umax'],_0x1f2a9c['u']=_0x16f301;}if(!_0x1f2a9c['v']){const _0x42d436={};_0x42d436[_0x13bd90(0x4bb,0x546)]=_0xad7fce['vdata'],_0x42d436[_0x45d732(0x49f,0x46f)]=_0xad7fce['vmin'],_0x42d436['max']=_0xad7fce['vmax'],_0x1f2a9c['v']=_0x42d436;}if(((_0xc11526=_0x1f2a9c['speed'])===null||_0xc11526===void 0x0?void 0x0:_0xc11526['min'])===undefined||((_0x5ada04=_0x1f2a9c['speed'])===null||_0x5ada04===void 0x0?void 0x0:_0x5ada04[_0x13bd90(0x5da,0x578)])===undefined||_0x1f2a9c['speed']['array']===undefined){const _0x3555eb={'array':new Float32Array(_0x1f2a9c['u']['array'][_0x13bd90(0x521,0x511)]),'min':Number['MAX_VALUE'],'max':Number[_0x13bd90(0x4f0,0x54a)]};for(let _0x23304d=0x0;_0x23304d<_0x1f2a9c['u'][_0x13bd90(0x5c9,0x546)][_0x13bd90(0x584,0x511)];_0x23304d++){_0x3555eb[_0x13bd90(0x5c1,0x546)][_0x23304d]=Math[_0x13bd90(0x495,0x4c0)](_0x1f2a9c['u']['array'][_0x23304d]*_0x1f2a9c['u'][_0x13bd90(0x4cc,0x546)][_0x23304d]+_0x1f2a9c['v'][_0x13bd90(0x59c,0x546)][_0x23304d]*_0x1f2a9c['v']['array'][_0x23304d]),_0x3555eb['array'][_0x23304d]!==0x0&&(_0x3555eb[_0x45d732(0x471,0x46f)]=Math['min'](_0x3555eb[_0x45d732(0x402,0x46f)],_0x3555eb[_0x13bd90(0x582,0x546)][_0x23304d]),_0x3555eb['max']=Math['max'](_0x3555eb[_0x13bd90(0x581,0x578)],_0x3555eb['array'][_0x23304d]));}_0x1f2a9c['speed']=_0x3555eb;}function _0x13bd90(_0x3a0dfd,_0xdaa115){return _0x48569e(_0xdaa115-0x66b,_0x3a0dfd);}return _0x1f2a9c;}['updateViewerParameters'](){var _0x32ad26;const _0x432807=this['scene'];if(!_0x432807)return;const _0x59011d=_0x432807[_0x2a5171(-0x129,-0xa2)],_0x271288={};_0x271288['x']=0x0,_0x271288['y']=0x0;const _0x4ad286={};_0x4ad286['x']=0x0,_0x4ad286['y']=_0x59011d['clientHeight'];const _0x5e8261={};_0x5e8261['x']=_0x59011d['clientWidth'],_0x5e8261['y']=0x0;const _0x22c644={};_0x22c644['x']=_0x59011d[_0x16b027(-0x131,-0x188)];function _0x16b027(_0x38c754,_0x2338f0){return _0x48569e(_0x38c754-0x37,_0x2338f0);}_0x22c644['y']=_0x59011d[_0x16b027(-0xb7,-0x109)];const _0x26a278=[_0x271288,_0x4ad286,_0x5e8261,_0x22c644];let _0x104a46=0xb4,_0x160e23=-0xb4,_0x54b3f8=0x5a,_0x5b5009=-0x5a;function _0x2a5171(_0xa1a4c1,_0x33e665){return _0x219830(_0xa1a4c1-0x3f,_0x33e665);}let _0x23ba66=![];for(const _0x5b3227 of _0x26a278){const _0x3382db=_0x432807['camera'][_0x16b027(-0xc2,-0x140)](new Cesium$1['Cartesian2'](_0x5b3227['x'],_0x5b3227['y']),_0x432807['globe'][_0x16b027(-0x141,-0x152)]);if(!_0x3382db){_0x23ba66=!![];break;}const _0x13ce37=_0x432807[_0x2a5171(-0x12a,-0x102)][_0x2a5171(-0x187,-0x1b5)]['cartesianToCartographic'](_0x3382db),_0x2c76b4=Cesium$1[_0x16b027(-0x114,-0x154)]['toDegrees'](_0x13ce37['longitude']),_0x49df9b=Cesium$1['Math']['toDegrees'](_0x13ce37[_0x2a5171(-0x1ce,-0x254)]);_0x104a46=Math[_0x16b027(-0x1b0,-0x12e)](_0x104a46,_0x2c76b4),_0x160e23=Math['max'](_0x160e23,_0x2c76b4),_0x54b3f8=Math['min'](_0x54b3f8,_0x49df9b),_0x5b5009=Math['max'](_0x5b5009,_0x49df9b);}if(!_0x23ba66){const _0x4f5559=new Cesium$1[(_0x16b027(-0xbe,-0x6e))](Math[_0x2a5171(-0x102,-0xe8)](this['windData']['bounds'][_0x16b027(-0x135,-0x140)],_0x104a46),Math['min'](this['windData']['bounds']['east'],_0x160e23)),_0x3f4d0d=new Cesium$1[(_0x16b027(-0xbe,-0x139))](Math['max'](this[_0x16b027(-0xf5,-0xb1)][_0x16b027(-0x150,-0x1ab)]['south'],_0x54b3f8),Math['min'](this['windData']['bounds']['north'],_0x5b5009)),_0x57c86c=(_0x4f5559['y']-_0x4f5559['x'])*0.05,_0x4b3cd6=(_0x3f4d0d['y']-_0x3f4d0d['x'])*0.05;_0x4f5559['x']=Math[_0x16b027(-0xbc,-0x9f)](this['windData'][_0x2a5171(-0x196,-0x19a)]['west'],_0x4f5559['x']-_0x57c86c),_0x4f5559['y']=Math[_0x2a5171(-0x1f6,-0x266)](this['windData'][_0x16b027(-0x150,-0x184)]['east'],_0x4f5559['y']+_0x57c86c),_0x3f4d0d['x']=Math[_0x2a5171(-0x102,-0x152)](this['windData'][_0x2a5171(-0x196,-0x15c)]['south'],_0x3f4d0d['x']-_0x4b3cd6),_0x3f4d0d['y']=Math['min'](this['windData']['bounds'][_0x16b027(-0x109,-0xea)],_0x3f4d0d['y']+_0x4b3cd6),this['viewerParameters']['lonRange']=_0x4f5559,this[_0x2a5171(-0x1c8,-0x206)]['latRange']=_0x3f4d0d;const _0x1074e1=this['windData']['bounds']['east']-this['windData']['bounds']['west'],_0x4b9c90=this[_0x2a5171(-0x13b,-0x139)]['bounds']['north']-this['windData'][_0x2a5171(-0x196,-0x10e)]['south'],_0x84d04c=(_0x4f5559['y']-_0x4f5559['x'])/_0x1074e1,_0x6d49b6=(_0x3f4d0d['y']-_0x3f4d0d['x'])/_0x4b9c90,_0x5cd10c=Math['min'](_0x84d04c,_0x6d49b6),_0x71360c=0x3e8*_0x5cd10c;_0x71360c>0x0&&(this['viewerParameters'][_0x16b027(-0x18f,-0x183)]=Math['max'](0x0,Math['min'](0x3e8,_0x71360c)));}this['viewerParameters']['sceneMode']=this['scene']['mode'],(_0x32ad26=this['particleSystem'])===null||_0x32ad26===void 0x0||_0x32ad26[_0x2a5171(-0x149,-0x122)](this['viewerParameters']);}['getDataAtLonLat'](_0x5e5904,_0x5f32b3){const {bounds:_0x4017a3,width:_0x50916a,height:_0xa9c276,u:_0x2dd546,v:_0x496356,speed:_0x438c89}=this[_0x1c0261(-0xac,-0x35)],{flipY:_0x18c8da}=this['options'];if(_0x5e5904<_0x4017a3['west']||_0x5e5904>_0x4017a3['east']||_0x5f32b3<_0x4017a3['south']||_0x5f32b3>_0x4017a3['north'])return null;const _0x1bb705=(_0x5e5904-_0x4017a3['west'])/(_0x4017a3[_0x1c0261(-0xad,-0x2f)]-_0x4017a3['west'])*(_0x50916a-0x1);let _0xfa4b37=(_0x5f32b3-_0x4017a3['south'])/(_0x4017a3[_0x169918(0x3fb,0x469)]-_0x4017a3['south'])*(_0xa9c276-0x1);_0x18c8da&&(_0xfa4b37=_0xa9c276-0x1-_0xfa4b37);const _0x4a7148=Math['floor'](_0x1bb705);function _0x1c0261(_0xf42cf3,_0x481546){return _0x219830(_0xf42cf3-0xce,_0x481546);}const _0x7c4bb1=Math[_0x1c0261(-0x134,-0x110)](_0xfa4b37),_0x12c006=Math['floor'](_0x1bb705),_0x2e84bb=Math[_0x169918(0x354,0x341)](_0x12c006+0x1,_0x50916a-0x1),_0x34414a=Math['floor'](_0xfa4b37),_0x5bc59a=Math['min'](_0x34414a+0x1,_0xa9c276-0x1),_0x498d89=_0x1bb705-_0x12c006,_0x2bcf83=_0xfa4b37-_0x34414a,_0x17a4f8=_0x7c4bb1*_0x50916a+_0x4a7148,_0x30ff7a=_0x34414a*_0x50916a+_0x12c006,_0x255c6e=_0x34414a*_0x50916a+_0x2e84bb,_0x1a9b3a=_0x5bc59a*_0x50916a+_0x12c006,_0x23ae2c=_0x5bc59a*_0x50916a+_0x2e84bb,_0x8b92cd=_0x2dd546['array'][_0x30ff7a],_0x3d0c08=_0x2dd546[_0x1c0261(-0xa5,-0x8f)][_0x255c6e],_0x489fa4=_0x2dd546['array'][_0x1a9b3a],_0x38b61a=_0x2dd546['array'][_0x23ae2c],_0x123921=(0x1-_0x498d89)*(0x1-_0x2bcf83)*_0x8b92cd+_0x498d89*(0x1-_0x2bcf83)*_0x3d0c08+(0x1-_0x498d89)*_0x2bcf83*_0x489fa4+_0x498d89*_0x2bcf83*_0x38b61a,_0x20088d=_0x496356[_0x1c0261(-0xa5,-0xc9)][_0x30ff7a],_0x2d10b5=_0x496356[_0x169918(0x416,0x42a)][_0x255c6e],_0xb9694e=_0x496356[_0x1c0261(-0xa5,-0xc0)][_0x1a9b3a],_0x5ec25b=_0x496356[_0x1c0261(-0xa5,-0x86)][_0x23ae2c],_0xaaaeda=(0x1-_0x498d89)*(0x1-_0x2bcf83)*_0x20088d+_0x498d89*(0x1-_0x2bcf83)*_0x2d10b5+(0x1-_0x498d89)*_0x2bcf83*_0xb9694e+_0x498d89*_0x2bcf83*_0x5ec25b,_0x51cbb4=Math['sqrt'](_0x123921*_0x123921+_0xaaaeda*_0xaaaeda),_0x14be5f={};_0x14be5f['u']=_0x2dd546['array'][_0x17a4f8],_0x14be5f['v']=_0x496356['array'][_0x17a4f8],_0x14be5f['speed']=_0x438c89[_0x1c0261(-0xa5,-0x9b)][_0x17a4f8];const _0x544b24={};_0x544b24['u']=_0x123921;function _0x169918(_0xfe93a4,_0x2cd103){return _0x48569e(_0xfe93a4-0x53b,_0x2cd103);}_0x544b24['v']=_0xaaaeda,_0x544b24[_0x1c0261(-0x152,-0xce)]=_0x51cbb4;const _0x11758b={};return _0x11758b['original']=_0x14be5f,_0x11758b[_0x1c0261(-0x63,-0x89)]=_0x544b24,_0x11758b;}}mars3d__namespace[_0x48569e(-0x1ae,-0x18a)][_0x48569e(-0x179,-0xf6)]('wind',WindLayer),mars3d__namespace[_0x219830(-0x139,-0x1be)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null;function _0x58b83f(_0x1d853b,_0x50178e){return _0x219830(_0x1d853b-0x57b,_0x50178e);}this[_0x58b83f(0x422,0x4a0)]=null,this['tlng']=null,this['tlat']=null,this['age']=null;function _0x484f3e(_0x227697,_0x1c5084){return _0x48569e(_0x1c5084-0x433,_0x227697);}this[_0x58b83f(0x35b,0x3ca)]=null;}[_0x219830(-0x12e,-0x109)](){for(const _0x4f25dd in this){delete this[_0x4f25dd];}}}class CanvasWindField{constructor(_0x3ddae4){this['setOptions'](_0x3ddae4);}get[_0x219830(-0x1b2,-0x23b)](){return this['_speedRate'];}set[_0x48569e(-0x164,-0x1bb)](_0x1abe3f){this[_0x38b043(-0x73,0x8)]=(0x64-(_0x1abe3f>0x63?0x63:_0x1abe3f))*0x64;function _0x5c0e44(_0x4bc070,_0xb56a64){return _0x48569e(_0xb56a64-0x3fc,_0x4bc070);}function _0x38b043(_0x4564db,_0x36a91b){return _0x219830(_0x4564db-0x142,_0x36a91b);}this[_0x38b043(-0x92,-0x7b)]=[(this[_0x38b043(-0xc2,-0xd1)]-this['xmin'])/this['_speedRate'],(this['ymax']-this['ymin'])/this[_0x38b043(-0x73,-0xcf)]];}get[_0x48569e(-0x1b5,-0x15e)](){return this['_maxAge'];}set[_0x219830(-0x203,-0x1ce)](_0xcd4874){this['_maxAge']=_0xcd4874;}['setOptions'](_0x52eaa4){this['options']=_0x52eaa4,this['maxAge']=_0x52eaa4[_0x1778b5(0x4a6,0x46d)]||0x78,this['speedRate']=_0x52eaa4[_0x15cb8f(0x273,0x265)]||0x32,this[_0x1778b5(0x4db,0x4d3)]=[];const _0x19f8a0=_0x52eaa4['particlesNumber']||0x1000;function _0x15cb8f(_0x3204aa,_0x46c8b2){return _0x48569e(_0x3204aa-0x3d7,_0x46c8b2);}function _0x1778b5(_0x2f4e51,_0x3ba6aa){return _0x219830(_0x3ba6aa-0x670,_0x2f4e51);}for(let _0x4ab4bc=0x0;_0x4ab4bc<_0x19f8a0;_0x4ab4bc++){const _0x544942=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x544942);}}['setDate'](_0x12ffdc){function _0x7a1572(_0xad4ac9,_0x2aab86){return _0x219830(_0xad4ac9-0x30a,_0x2aab86);}this['rows']=_0x12ffdc['rows'];function _0x47ec40(_0x1dece7,_0x50d059){return _0x219830(_0x1dece7-0x3ba,_0x50d059);}this['cols']=_0x12ffdc[_0x7a1572(0x170,0x183)],this['xmin']=_0x12ffdc['xmin'],this[_0x7a1572(0x106,0xe6)]=_0x12ffdc[_0x7a1572(0x106,0x12c)],this['ymin']=_0x12ffdc['ymin'],this['ymax']=_0x12ffdc[_0x7a1572(0xe4,0x14f)],this[_0x7a1572(0x11f,0xff)]=[];const _0x497288=_0x12ffdc['udata'],_0x53e6d1=_0x12ffdc['vdata'];let _0x2c1275=![];_0x497288['length']===this['rows']&&_0x497288[0x0]['length']===this[_0x7a1572(0x170,0x1ef)]&&(_0x2c1275=!![]);let _0x4ea00c=0x0,_0xcd645d=null,_0x1de963=null;for(let _0x36fc4f=0x0;_0x36fc4f<this['rows'];_0x36fc4f++){_0xcd645d=[];for(let _0x353b58=0x0;_0x353b58<this[_0x7a1572(0x170,0x12c)];_0x353b58++,_0x4ea00c++){_0x2c1275?_0x1de963=this['_calcUV'](_0x497288[_0x36fc4f][_0x353b58],_0x53e6d1[_0x36fc4f][_0x353b58]):_0x1de963=this['_calcUV'](_0x497288[_0x4ea00c],_0x53e6d1[_0x4ea00c]),_0xcd645d[_0x7a1572(0x16e,0x1db)](_0x1de963);}this['grid']['push'](_0xcd645d);}!this[_0x7a1572(0xfe,0x154)][_0x47ec40(0x234,0x1f1)]&&this['grid'][_0x47ec40(0x1a9,0x198)]();}['clear'](){delete this[_0x2b419a(0x5b2,0x598)],delete this[_0x45b3e3(0x48e,0x454)],delete this['xmin'];function _0x45b3e3(_0x1a6019,_0x14c5c1){return _0x48569e(_0x14c5c1-0x5a0,_0x1a6019);}delete this['xmax'],delete this[_0x2b419a(0x63d,0x5c7)],delete this['ymax'];function _0x2b419a(_0x2d81c4,_0x4e3433){return _0x219830(_0x4e3433-0x753,_0x2d81c4);}delete this['grid'],delete this[_0x45b3e3(0x475,0x451)];}[_0x219830(-0x177,-0x1d7)](_0x336c07,_0x317662){const _0x2ba1bf=(_0x336c07-this[_0x3fa3c3(0x17b,0x1c9)])/(this['xmax']-this[_0x3fa3c3(0x20f,0x1c9)])*(this['cols']-0x1),_0x3afd1f=(this[_0x55aaee(0x3d1,0x45b)]-_0x317662)/(this[_0x55aaee(0x411,0x45b)]-this['ymin'])*(this['rows']-0x1);function _0x3fa3c3(_0x12f3fe,_0x2465b2){return _0x48569e(_0x2465b2-0x2c0,_0x12f3fe);}function _0x55aaee(_0x40fcdb,_0x17997d){return _0x48569e(_0x17997d-0x633,_0x40fcdb);}return[_0x2ba1bf,_0x3afd1f];}[_0x48569e(-0x1cb,-0x1b0)](_0x591feb,_0x318868){function _0x2c4be2(_0x1c8edb,_0x25d489){return _0x48569e(_0x25d489-0x3af,_0x1c8edb);}if(_0x591feb<0x0||_0x591feb>=this['cols']||_0x318868>=this['rows'])return[0x0,0x0,0x0];const _0xcdf098=Math[_0x2c4be2(0x1ab,0x1fb)](_0x591feb),_0x56b75d=Math['floor'](_0x318868);if(_0xcdf098===_0x591feb&&_0x56b75d===_0x318868)return this['grid'][_0x318868][_0x591feb];const _0x5f0b2a=_0xcdf098+0x1,_0x1d5a05=_0x56b75d+0x1,_0x283466=this['getUVByXY'](_0xcdf098,_0x56b75d),_0x44d250=this[_0xb9d2ad(-0x10c,-0xae)](_0x5f0b2a,_0x56b75d),_0x3336d8=this[_0x2c4be2(0x222,0x1e4)](_0xcdf098,_0x1d5a05),_0x24b4aa=this['getUVByXY'](_0x5f0b2a,_0x1d5a05);let _0x3876ff=null;try{_0x3876ff=this['_bilinearInterpolation'](_0x591feb-_0xcdf098,_0x318868-_0x56b75d,_0x283466,_0x44d250,_0x3336d8,_0x24b4aa);}catch(_0x3194ac){console['log'](_0x591feb,_0x318868);}function _0xb9d2ad(_0x400197,_0x3da023){return _0x48569e(_0x3da023-0x11d,_0x400197);}return _0x3876ff;}['_bilinearInterpolation'](_0x1c3ca0,_0x3f1a24,_0x11781f,_0x300c44,_0x276be5,_0x51f540){const _0x436a4f=0x1-_0x1c3ca0,_0x28b4c3=0x1-_0x3f1a24,_0x449f7f=_0x436a4f*_0x28b4c3;function _0x7e952f(_0x3757e7,_0x342564){return _0x48569e(_0x3757e7-0x3e2,_0x342564);}const _0xe1938=_0x1c3ca0*_0x28b4c3,_0x36a35f=_0x436a4f*_0x3f1a24,_0x2fb876=_0x1c3ca0*_0x3f1a24,_0x193105=_0x11781f[0x0]*_0x449f7f+_0x300c44[0x0]*_0xe1938+_0x276be5[0x0]*_0x36a35f+_0x51f540[0x0]*_0x2fb876,_0x2f3090=_0x11781f[0x1]*_0x449f7f+_0x300c44[0x1]*_0xe1938+_0x276be5[0x1]*_0x36a35f+_0x51f540[0x1]*_0x2fb876;return this[_0x7e952f(0x28f,0x215)](_0x193105,_0x2f3090);}['_calcUV'](_0x1df025,_0xea340a){return[+_0x1df025,+_0xea340a,Math['sqrt'](_0x1df025*_0x1df025+_0xea340a*_0xea340a)];}[_0x219830(-0x13d,-0x107)](_0xa39ae0,_0x1d134){if(!this[_0x1ff645(0x399,0x3a3)](_0xa39ae0,_0x1d134))return null;function _0xe3debf(_0x55323d,_0x37107c){return _0x48569e(_0x37107c-0x5ed,_0x55323d);}const _0x9fc94c=this[_0xe3debf(0x522,0x4c4)](_0xa39ae0,_0x1d134);function _0x1ff645(_0x37b6d6,_0x3fd9cb){return _0x48569e(_0x3fd9cb-0x57d,_0x37b6d6);}const _0x476623=this[_0xe3debf(0x3a2,0x422)](_0x9fc94c[0x0],_0x9fc94c[0x1]);return _0x476623;}['isInExtent'](_0x355cb9,_0x497f41){function _0x4b732f(_0x42ffe9,_0x21047f){return _0x48569e(_0x42ffe9-0x766,_0x21047f);}return _0x355cb9>=this['xmin']&&_0x355cb9<=this[_0x4b732f(0x5b0,0x5cd)]&&_0x497f41>=this['ymin']&&_0x497f41<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x42a777=fRandomByfloat(this['xmin'],this['xmax']),_0x43c87b=fRandomByfloat(this[_0xbc6599(0x32e,0x3b3)],this['ymax']),_0x1f883e={};_0x1f883e[_0xbc6599(0x361,0x36a)]=_0x43c87b;function _0x22ccb1(_0x3c564f,_0x503ba5){return _0x48569e(_0x3c564f-0x3f1,_0x503ba5);}_0x1f883e['lng']=_0x42a777;function _0xbc6599(_0xb08a79,_0x390bee){return _0x219830(_0xb08a79-0x4ba,_0x390bee);}return _0x1f883e;}['getParticles'](){function _0x451082(_0x4f2f8b,_0x53e75f){return _0x219830(_0x53e75f-0x379,_0x4f2f8b);}function _0x3a3251(_0x2b5bd1,_0x1ea4aa){return _0x48569e(_0x2b5bd1-0x2c9,_0x1ea4aa);}let _0x12c259,_0x27da03,_0xf30fd3;for(let _0x1f2526=0x0,_0x36d500=this['particles'][_0x3a3251(0x16f,0x168)];_0x1f2526<_0x36d500;_0x1f2526++){let _0x80adb9=this[_0x451082(0x1db,0x1dc)][_0x1f2526];_0x80adb9['age']<=0x0&&(_0x80adb9=this['_randomParticle'](_0x80adb9));if(_0x80adb9[_0x3a3251(0x1f0,0x210)]>0x0){const _0x3d9063=_0x80adb9[_0x451082(0x16b,0x1ce)],_0x24f6fa=_0x80adb9['tlat'];_0xf30fd3=this[_0x451082(0x1b0,0x23c)](_0x3d9063,_0x24f6fa),_0xf30fd3?(_0x12c259=_0x3d9063+this['_calc_speedRate'][0x0]*_0xf30fd3[0x0],_0x27da03=_0x24f6fa+this[_0x3a3251(0x143,0x1c1)][0x1]*_0xf30fd3[0x1],_0x80adb9[_0x451082(0x1f3,0x1ba)]=_0x3d9063,_0x80adb9['lat']=_0x24f6fa,_0x80adb9['tlng']=_0x12c259,_0x80adb9['tlat']=_0x27da03,_0x80adb9['speed']=_0xf30fd3[0x2],_0x80adb9[_0x3a3251(0x1f0,0x1a3)]--):_0x80adb9['age']=0x0;}}return this[_0x451082(0x19f,0x1dc)];}[_0x48569e(-0x107,-0x81)](_0x2c5efe){let _0x501aba,_0x101261;for(let _0x5d75c2=0x0;_0x5d75c2<0x1e;_0x5d75c2++){_0x501aba=this[_0x579722(0x161,0x1b8)](),_0x101261=this[_0x579722(0x301,0x27c)](_0x501aba['lng'],_0x501aba['lat']);if(_0x101261&&_0x101261[0x2]>0x0)break;}if(!_0x101261)return _0x2c5efe;function _0x713ad3(_0x26ba3d,_0x3a880f){return _0x219830(_0x26ba3d-0x4ca,_0x3a880f);}const _0x7ccb27=_0x501aba[_0x579722(0x1ce,0x1fa)]+this['_calc_speedRate'][0x0]*_0x101261[0x0],_0x4ec8b0=_0x501aba[_0x579722(0x1fc,0x260)]+this['_calc_speedRate'][0x1]*_0x101261[0x1];function _0x579722(_0xe29d90,_0x19a792){return _0x48569e(_0x19a792-0x36b,_0xe29d90);}return _0x2c5efe['lng']=_0x501aba['lng'],_0x2c5efe['lat']=_0x501aba['lat'],_0x2c5efe[_0x579722(0x208,0x20e)]=_0x7ccb27,_0x2c5efe['tlat']=_0x4ec8b0,_0x2c5efe['age']=Math[_0x713ad3(0x2dd,0x335)](0xa+Math['random']()*this['maxAge']),_0x2c5efe[_0x713ad3(0x2aa,0x315)]=_0x101261[0x2],_0x2c5efe;}[_0x48569e(-0xe0,-0xce)](){for(const _0x359b10 in this){delete this[_0x359b10];}}}function _0x37c5(_0x2ce43d,_0x2de94){const _0x285e88=_0x285e();return _0x37c5=function(_0x37c529,_0x3b46ca){_0x37c529=_0x37c529-0x1a3;let _0x4da514=_0x285e88[_0x37c529];return _0x4da514;},_0x37c5(_0x2ce43d,_0x2de94);}function fRandomByfloat(_0x580cb8,_0x4afa4f){function _0x26c58f(_0x1a8ac9,_0x23c499){return _0x219830(_0x23c499-0x700,_0x1a8ac9);}return _0x580cb8+Math[_0x26c58f(0x58f,0x50f)]()*(_0x4afa4f-_0x580cb8);}const Cesium=mars3d__namespace[_0x48569e(-0xcf,-0x11d)],BaseLayer=mars3d__namespace[_0x219830(-0x139,-0xbe)][_0x48569e(-0x113,-0xcd)];function _0x285e(){const _0x1d3642=['LINEAR','umin','Cesium','min','dropRateBump','camera','isDynamic','width','viewport','getDefaultRenderState','worker','nextParticlesPosition','157253iRrWux','2GNoaXU','setData','windTextures','isInExtent','getSegmentDrawFragmentShader','ymax','particlesNumber','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','scene','updateOptions','renderState','speed','height','drawingBufferWidth','redraw','createSegmentsGeometry','mouseMove','all','getUVByXY','removeChild','strokeStyle','requestRender','framebuffers','pixelSize','DomUtil','framebuffer','reverse','UNSIGNED_BYTE','forEach','destination-in','latitude','options','update','outputTexture','EllipsoidalOccluder','mouseDown','viewerParameters','clear','_updateIng','xmax','maxAge','floor','getRandomLatLng','onParticlesTextureSizeChange','zIndex','add','context','LayerUtil','fromGeometry','commandType','sqrt','frameRateMonitor','_onMouseMoveEvent','now','fill','_map','lighter','uniformMap','random','attributeLocations','Draw','globalAlpha','round','Compute','grid','currentParticlesPosition','abs','_colorRamp','getOwnPropertyDescriptor','_drawLines','speedFactor','hidden','3381804xBcyQd','fixedHeight','createWindTextures','getColor','stringify','displayRange','603zMbgoz','lastFramesPerSecond','unbindEvent','setDate','_animateFrame','frameTime','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a','vertexArray','bounds','_calc_speedRate','magnificationFilter','pass','normal','sin','error','createComputingPrimitives','particleSystem','dynamic','clearFramebuffers','minificationFilter','EventType','2264aebSmU','register','ellipsoid','getV','commandToExecute','domain','primitives','primitiveType','pointerEvents','lng','particlesSpeed','_tomap','hasOwnProperty','rows','west','show','segments','windField','clientWidth','_speedRate','createRawRenderState','initFrameRate','speedRate','getParticles','tlat','_addedHook','pow','alt','number','tlng','addEventListener','_showHook','length','getDirection','getUpdatePositionShader','preExecute','2177052tKAKyf','54ImiTgo','reCreateWindTextures','_calcUV','fragmentShaderSource','execute','canvasContext','particles','push','_onMouseDownEvent','cols','Math','_createCanvas','_pointerEvents','values','rgb(206,255,255)','visible','bind','data','colors','steps','Log','north','flatMap','ymin','off','globalCompositeOperation','CLAMP_TO_EDGE','applyViewerParameters','lineWidth','flipY','_canrefresh','value','style','rawRenderState','colorTextures','createColorTableTexture','_mountedHook','auto','createRenderingFramebuffers','_setOptionsHook','east','windData','pixelFormat','stroke','toGridXY','fillRect','getPostProcessingPositionShader','SceneMode','array','owner','geometry','44rjvZTE','MIN_VALUE','resize','onmessage','17829sxsnCO','clearCommand','toWindowCoordinates','globe','canvas','createRenderingTextures','dropRate','postProcessingPosition','textures','485075iuBFTu','particlesTextureSize','BaseLayer','depthTest','FLOAT','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','container','colorTable','blendFuncSource','warn','lat','pointer-events','mouse_down','mouse_move','_randomParticle','destroyParticlesTextures','toRadians','sources','commandList','defineProperty','beginPath','UNSIGNED_INT','updateViewerParameters','canvasHeight','computing','postMessage','setOptions','lineLength','pickEllipsoid','WindUtil','xmin','wheel','Cartesian2','calculateSpeed','max','_onMouseUpEvent','visibility','mode','getUVByPoint','clientHeight','frameRateAdjustment','type','layer','sceneMode','_removedHook','CanvasWindField','1761432PuORAN','drawingBufferHeight','particlesTextures','useViewerBounds','interpolated','RGBA','OPAQUE','destroy','cancelAnimationFrame','latRange','previousParticlesPosition','rendering','canvasWidth','removeEventListener','age','SCENE3D','71050FceqDp','vertexShaderSource','color','quietPeriod','_updateIng2','STATIC_DRAW'];_0x285e=function(){return _0x1d3642;};return _0x285e();}class CanvasWindLayer extends BaseLayer{constructor(_0x26d814={}){super(_0x26d814),this['_setOptionsHook'](_0x26d814);function _0x3203e8(_0x2faedf,_0x30209a){return _0x48569e(_0x30209a-0x3ab,_0x2faedf);}function _0x3f5011(_0x24090d,_0x385a27){return _0x48569e(_0x24090d-0xe6,_0x385a27);}this['canvas']=null,_0x26d814['colors']&&_0x26d814[_0x3f5011(-0x5c,-0x1a)]&&(this[_0x3203e8(0x24e,0x211)]=new mars3d__namespace['ColorRamp'](_0x26d814));}[_0x219830(-0x17c,-0x1dd)](_0x28c9c1,_0x49fcf9){function _0xa5068d(_0x3fc07c,_0x1ae13b){return _0x48569e(_0x3fc07c-0x471,_0x1ae13b);}this[_0x484b2f(0x396,0x358)]=0x3e8/(_0x28c9c1['frameRate']||0xa),this['_pointerEvents']=this['options'][_0xa5068d(0x2ff,0x281)]??![],this[_0xa5068d(0x39c,0x317)]=_0x28c9c1['color']||'#ffffff',this['lineWidth']=_0x28c9c1['lineWidth']||0x1,this[_0xa5068d(0x2dd,0x33c)]=_0x28c9c1['fixedHeight']??0x0,this['flipY']=_0x28c9c1['flipY']??![];function _0x484b2f(_0x5c3e54,_0x21fe19){return _0x48569e(_0x21fe19-0x4e2,_0x5c3e54);}this[_0xa5068d(0x308,0x357)]&&this[_0xa5068d(0x308,0x286)]['setOptions'](_0x28c9c1);}get['layer'](){return this['canvas'];}get[_0x219830(-0x129,-0x109)](){function _0x42c3de(_0x582dbc,_0x4db12e){return _0x48569e(_0x582dbc-0x663,_0x4db12e);}function _0x147b4a(_0x45d601,_0x11e75b){return _0x48569e(_0x11e75b-0x3dc,_0x45d601);}return this[_0x42c3de(0x4bd,0x473)]['scene']['canvas'][_0x42c3de(0x4fb,0x553)];}get[_0x219830(-0x14c,-0x1a9)](){function _0x2e6821(_0x113145,_0x26f129){return _0x219830(_0x113145-0x44d,_0x26f129);}function _0x4b0a9e(_0x40d0a1,_0x54dbfa){return _0x48569e(_0x40d0a1-0x379,_0x54dbfa);}return this[_0x4b0a9e(0x1d3,0x17d)][_0x2e6821(0x22a,0x2a8)]['canvas'][_0x4b0a9e(0x28b,0x286)];}get[_0x219830(-0x1c0,-0x18d)](){function _0x2094a9(_0x210cf1,_0x827d03){return _0x219830(_0x210cf1-0x33f,_0x827d03);}return this[_0x2094a9(0x1a8,0x22a)];}set[_0x48569e(-0x172,-0xfb)](_0x42e2d3){this[_0x228466(0x6d,0x1a)]=_0x42e2d3;function _0x4d7926(_0x37865a,_0x2d4041){return _0x48569e(_0x2d4041-0x26d,_0x37865a);}if(!this['canvas'])return;function _0x228466(_0x12a399,_0xc800a2){return _0x219830(_0x12a399-0x204,_0xc800a2);}_0x42e2d3?this['canvas']['style'][_0x4d7926(0x110,0x163)]=_0x4d7926(0xb5,0xa1):this['canvas']['style'][_0x228466(0xac,0x3c)]='none';}get[_0x219830(-0x225,-0x26a)](){function _0xaace37(_0x441d9c,_0x5b147c){return _0x48569e(_0x5b147c-0x372,_0x441d9c);}return this[_0xaace37(0x159,0x1b4)]['particlesNumber'];}set['particlesNumber'](_0x276df7){function _0x99ee07(_0xd14d31,_0x4d4af4){return _0x48569e(_0xd14d31-0x605,_0x4d4af4);}function _0x58850f(_0x4fbdf7,_0x3bcfb2){return _0x219830(_0x3bcfb2-0xfe,_0x4fbdf7);}this['options'][_0x99ee07(0x42e,0x450)]=_0x276df7,clearTimeout(this['_canrefresh']),this[_0x58850f(-0x51,-0x87)]=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x219830(-0x1b2,-0x1f3)](){function _0x1594b1(_0x12ddc4,_0x24b625){return _0x48569e(_0x24b625-0x3aa,_0x12ddc4);}return this[_0x1594b1(0x190,0x1ec)]['speedRate'];}set[_0x219830(-0x1b2,-0x179)](_0x3f1ea1){function _0x142b96(_0x268fb0,_0xcdd34f){return _0x219830(_0xcdd34f-0x38f,_0x268fb0);}function _0x427979(_0x2351e1,_0x115859){return _0x48569e(_0x2351e1-0x59,_0x115859);}this[_0x142b96(0x111,0x183)]['speedRate']=_0x3f1ea1,this[_0x427979(-0x110,-0x15e)]&&(this[_0x142b96(0x19e,0x1d8)]['speedRate']=_0x3f1ea1);}get[_0x48569e(-0x1b5,-0x15a)](){function _0x43bcb5(_0x19f964,_0x5aead5){return _0x48569e(_0x19f964-0x139,_0x5aead5);}return this[_0x43bcb5(-0x85,-0x107)]['maxAge'];}set[_0x48569e(-0x1b5,-0x17f)](_0x355ef6){function _0x4ea2b1(_0x430fad,_0x296ceb){return _0x48569e(_0x296ceb-0x26a,_0x430fad);}this['options']['maxAge']=_0x355ef6,this['windField']&&(this[_0x4ea2b1(0x172,0x101)]['maxAge']=_0x355ef6);}get['data'](){function _0x10670b(_0x4d1ce5,_0x1939dd){return _0x219830(_0x1939dd-0x71b,_0x4d1ce5);}return this[_0x10670b(0x5ec,0x5a1)];}set[_0x48569e(-0x144,-0x130)](_0xbca33d){this['setData'](_0xbca33d);}get['rectangle'](){let _0x22490a=this['windData']['xmin'],_0x5df952=this['windData'][_0x5984f2(-0x13e,-0xf8)],_0xa0b27b=this[_0x5984f2(-0xb4,-0xab)][_0x1b0855(0x418,0x429)];function _0x1b0855(_0xe7875a,_0x1eac63){return _0x219830(_0x1eac63-0x5b5,_0xe7875a);}let _0x580c12=this[_0x1b0855(0x3b2,0x43b)]['ymax'];_0x5df952>=0x167&&_0x22490a===0x0&&(_0x22490a=-0xb4,_0x5df952=0xb4);_0x22490a=Math['max'](_0x22490a,-0xb4),_0x5df952=Math['min'](_0x5df952,0xb4),_0xa0b27b=Math['max'](_0xa0b27b,-0x5a),_0x580c12=Math['min'](_0x580c12,0x5a);function _0x5984f2(_0x4d3717,_0xf10415){return _0x219830(_0x4d3717-0xc6,_0xf10415);}return Cesium['Rectangle']['fromDegrees'](_0x22490a,_0xa0b27b,_0x5df952,_0x580c12);}[_0x219830(-0x1a9,-0x18c)](_0x12069c){function _0x387366(_0x5715e5,_0x5a4524){return _0x219830(_0x5715e5-0x544,_0x5a4524);}function _0x5987a6(_0xa7afd2,_0x44f232){return _0x48569e(_0x44f232-0x56f,_0xa7afd2);}_0x12069c?this[_0x387366(0x395,0x32f)]():(this['windData']&&(this[_0x387366(0x338,0x327)][_0x5987a6(0x3ee,0x42b)]=this[_0x5987a6(0x3f4,0x443)]),this[_0x387366(0x40d,0x394)]());}[_0x219830(-0x17f,-0x17f)](){function _0x15b91d(_0x4f4822,_0x1628cf){return _0x48569e(_0x1628cf-0x294,_0x4f4822);}this['options']['worker']?this['initWorker']():this['windField']=new CanvasWindField(this[_0x15b91d(0xaa,0xd6)]);}['_addedHook'](){function _0x5743a2(_0x48a3a8,_0x3e5f1c){return _0x48569e(_0x3e5f1c-0x4c0,_0x48a3a8);}this['canvas']=this[_0x5743a2(0x3f3,0x376)]();const _0x2ad5bf={};_0x2ad5bf['willReadFrequently']=!![],this[_0x384d84(0x4be,0x4c4)]=this[_0x384d84(0x4f4,0x47b)]['getContext']('2d',_0x2ad5bf),this['bindEvent']();function _0x384d84(_0x3afd23,_0x500e1f){return _0x48569e(_0x3afd23-0x60e,_0x500e1f);}this['options'][_0x384d84(0x4ca,0x476)]&&this['setData'](this['options'][_0x5743a2(0x345,0x37c)]);}['_removedHook'](){function _0x259728(_0x592592,_0x4cd9e9){return _0x219830(_0x4cd9e9-0x603,_0x592592);}function _0x3e971a(_0x59d927,_0x53577b){return _0x219830(_0x53577b-0x755,_0x59d927);}this[_0x259728(0x460,0x3fd)](),this[_0x259728(0x4ad,0x428)](),this[_0x3e971a(0x571,0x5ed)]&&(this[_0x259728(0x452,0x40f)][_0x3e971a(0x5f6,0x5f8)][_0x3e971a(0x4e1,0x53d)](this[_0x3e971a(0x562,0x5ed)]),delete this['canvas']);}[_0x219830(-0x198,-0x18b)](){function _0xe77137(_0x4c84df,_0x3bfbe0){return _0x48569e(_0x4c84df-0x715,_0x3bfbe0);}const _0x5701f3=mars3d__namespace[_0xe77137(0x550,0x546)]['create']('canvas','mars3d-canvasWind',this['_map'][_0x4b1d68(0x7,0x28)]);_0x5701f3['style']['position']='absolute';function _0x4b1d68(_0xecaf38,_0x387be1){return _0x48569e(_0xecaf38-0x116,_0x387be1);}return _0x5701f3[_0x4b1d68(-0x1f,-0x27)]['top']='0px',_0x5701f3[_0x4b1d68(-0x1f,0x40)]['left']='0px',_0x5701f3['style'][_0xe77137(0x532,0x4dc)]=this[_0xe77137(0x56f,0x525)]['scene']['canvas'][_0xe77137(0x5ad,0x5b0)]+'px',_0x5701f3[_0xe77137(0x5e0,0x5d6)]['height']=this['_map'][_0xe77137(0x540,0x526)]['canvas'][_0x4b1d68(0x28,0x35)]+'px',_0x5701f3[_0x4b1d68(-0x1f,-0xaa)]['pointerEvents']=this['_pointerEvents']?_0x4b1d68(-0x1a,-0x3f):'none',_0x5701f3[_0x4b1d68(-0x1f,0x5)][_0xe77137(0x564,0x547)]=this['options'][_0xe77137(0x564,0x4dc)]??0x9,_0x5701f3[_0x4b1d68(-0xcd,-0xd0)]=this[_0xe77137(0x56f,0x55b)][_0xe77137(0x540,0x50c)][_0xe77137(0x5fb,0x64b)][_0x4b1d68(-0x52,-0x9e)],_0x5701f3['height']=this[_0x4b1d68(-0x90,-0xca)]['scene'][_0xe77137(0x5fb,0x636)]['clientHeight'],_0x5701f3;}['resize'](){function _0x444b45(_0x1d5dc3,_0x37204d){return _0x219830(_0x1d5dc3-0x4b8,_0x37204d);}function _0xc00c1(_0x5c4141,_0x43be62){return _0x219830(_0x5c4141-0x19a,_0x43be62);}this['canvas']&&(this[_0x444b45(0x350,0x393)]['style']['width']=this[_0xc00c1(-0x5a,-0x32)]['scene'][_0xc00c1(0x32,0x53)]['clientWidth']+'px',this['canvas'][_0x444b45(0x335,0x36c)]['height']=this[_0x444b45(0x2c4,0x2fa)][_0x444b45(0x295,0x214)]['canvas']['clientHeight']+'px',this['canvas'][_0x444b45(0x287,0x217)]=this[_0xc00c1(-0x5a,-0xcf)][_0x444b45(0x295,0x20e)]['canvas']['clientWidth'],this[_0x444b45(0x350,0x3bf)]['height']=this[_0x444b45(0x2c4,0x2a6)][_0x444b45(0x295,0x2bc)]['canvas'][_0xc00c1(0x5e,0x7b)]);}['bindEvent'](){function _0x370167(_0x53681d,_0x3574a4){return _0x48569e(_0x3574a4-0x640,_0x53681d);}function _0x18644c(_0x5a05d5,_0x468be3){return _0x219830(_0x5a05d5-0x288,_0x468be3);}const _0x58b3cf=this;let _0x4ac37f=Date[_0x370167(0x459,0x498)]();(function _0x4dd314(){if(_0x58b3cf['isDestroy'])return;_0x58b3cf['_animateFrame']=window['requestAnimationFrame'](_0x4dd314);function _0x26dbc8(_0x1edf2d,_0x37c893){return _0x370167(_0x1edf2d,_0x37c893- -0x44b);}if(_0x58b3cf['show']&&_0x58b3cf['windField']){const _0x2d3ad8=Date['now'](),_0x4e0e36=_0x2d3ad8-_0x4ac37f;_0x4e0e36>_0x58b3cf[_0x26dbc8(0xc5,0x6b)]&&(_0x4ac37f=_0x2d3ad8-_0x4e0e36%_0x58b3cf['frameTime'],_0x58b3cf['update']());}}(),window['addEventListener'](_0x18644c(0x11a,0x166),this['resize'][_0x18644c(0xf5,0x175)](this),![]),this['mouse_down']=![],this['mouse_move']=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x370167(0x4d9,0x4c5)]['wheel'],this['_onMapWhellEvent'],this),this[_0x370167(0x461,0x49a)]['on'](mars3d__namespace['EventType'][_0x370167(0x504,0x486)],this['_onMouseDownEvent'],this),this[_0x18644c(0x94,0x27)]['on'](mars3d__namespace[_0x370167(0x444,0x4c5)]['mouseUp'],this[_0x370167(0x4ee,0x54e)],this)));}[_0x219830(-0x1db,-0x206)](){window[_0x4443ee(0x262,0x29a)](this['_animateFrame']);function _0x4443ee(_0x329409,_0x396a12){return _0x219830(_0x396a12-0x3c7,_0x329409);}delete this[_0x18842c(0x2fd,0x376)];function _0x18842c(_0x3ec9d9,_0x3737cb){return _0x48569e(_0x3737cb-0x501,_0x3ec9d9);}window['removeEventListener']('resize',this[_0x4443ee(0x238,0x259)]),this['options']['mouseHidden']&&(this['_map'][_0x18842c(0x39d,0x3c4)](mars3d__namespace['EventType'][_0x18842c(0x41f,0x40b)],this['_onMapWhellEvent'],this),this[_0x18842c(0x30d,0x35b)]['off'](mars3d__namespace['EventType']['mouseDown'],this[_0x18842c(0x41b,0x3b4)],this),this[_0x18842c(0x335,0x35b)]['off'](mars3d__namespace[_0x4443ee(0x213,0x1fe)]['mouseUp'],this[_0x18842c(0x3bc,0x40f)],this),this[_0x4443ee(0x202,0x1d3)]['off'](mars3d__namespace['EventType'][_0x18842c(0x2b1,0x334)],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x27bc70){clearTimeout(this['refreshTimer']);if(!this['show']||!this['canvas'])return;this['canvas']['style']['visibility']='hidden',this['refreshTimer']=setTimeout(()=>{if(!this[_0x23364f(-0x105,-0xf0)])return;function _0x3e6de4(_0x110f37,_0x1a1897){return _0x37c5(_0x110f37- -0x1e3,_0x1a1897);}this[_0x23364f(-0x143,-0x154)]();function _0x23364f(_0x381677,_0xc9f311){return _0x37c5(_0xc9f311- -0x30f,_0x381677);}this['canvas']['style']['visibility']=_0x3e6de4(0x61,0x20);},0xc8);}[_0x48569e(-0x14d,-0x13d)](_0x542c71){this['mouse_down']=!![];function _0x157674(_0x522ab6,_0x4e9e0e){return _0x219830(_0x522ab6-0x73d,_0x4e9e0e);}this[_0x39448c(0x572,0x567)]['off'](mars3d__namespace['EventType'][_0x157674(0x522,0x5ac)],this[_0x157674(0x546,0x519)],this);function _0x39448c(_0x366b5d,_0x195ba2){return _0x219830(_0x195ba2-0x75b,_0x366b5d);}this[_0x39448c(0x532,0x567)]['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x16fe1b){function _0x13a9e2(_0x122667,_0xae2175){return _0x48569e(_0xae2175-0x234,_0x122667);}if(!this['show']||!this['canvas'])return;function _0x44b94b(_0x166821,_0x44179d){return _0x219830(_0x44179d-0x4c6,_0x166821);}this['mouse_down']&&(this['canvas'][_0x44b94b(0x371,0x343)][_0x13a9e2(0xe6,0x143)]=_0x44b94b(0x2fe,0x2e2),this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x587e77){if(!this[_0x2da056(0x306,0x343)]||!this[_0x3083e6(0x103,0x85)])return;this['_map']['off'](mars3d__namespace[_0x2da056(0x2f6,0x2f3)]['mouseMove'],this[_0x3083e6(0x74,0xf8)],this);this['mouse_down']&&this['mouse_move']&&this['redraw']();this['canvas']['style'][_0x3083e6(0x12c,0x1b5)]=_0x2da056(0x32b,0x350);function _0x2da056(_0x2d5c87,_0x528c17){return _0x48569e(_0x2d5c87-0x471,_0x528c17);}function _0x3083e6(_0x16a518,_0x1741e1){return _0x48569e(_0x16a518-0x21d,_0x1741e1);}this[_0x2da056(0x368,0x3be)]=![],this[_0x3083e6(0x115,0xae)]=![];}['setData'](_0x3daa8a){function _0x4a3a03(_0x156fbb,_0x5834d9){return _0x48569e(_0x156fbb-0x369,_0x5834d9);}this[_0x4a3a03(0x1b1,0x17a)](),this['windData']=_0x3daa8a,this['windField'][_0x4a3a03(0x1dd,0x20c)](_0x3daa8a);function _0x192417(_0x4fd01e,_0x17d49b){return _0x219830(_0x17d49b-0x687,_0x4fd01e);}this['redraw']();}['redraw'](){if(!this['show'])return;function _0x9cb13a(_0x5e73b5,_0x60e2e3){return _0x48569e(_0x5e73b5-0x280,_0x60e2e3);}this['windField'][_0x9cb13a(0x185,0x110)](this[_0xecf3b3(0xbe,0x141)]);function _0xecf3b3(_0x2a0a17,_0xf14c8f){return _0x219830(_0x2a0a17-0x2ca,_0xf14c8f);}this[_0xecf3b3(0xbf,0xe3)]();}['update'](){if(this['_updateIng'])return;function _0x12801c(_0x463e51,_0x46bd22){return _0x219830(_0x46bd22-0x650,_0x463e51);}function _0x20e7c4(_0x52d206,_0x2c2a39){return _0x48569e(_0x2c2a39-0x3e0,_0x52d206);}this[_0x20e7c4(0x1b2,0x229)]=!![];if(this[_0x12801c(0x464,0x422)])this[_0x20e7c4(0x2e8,0x277)]['update']();else{const _0x4de4ee=this[_0x20e7c4(0x2cf,0x277)][_0x12801c(0x499,0x49f)]();this[_0x12801c(0x467,0x46a)](_0x4de4ee);}this['_updateIng']=![];}['_drawLines'](_0x211aed){this['_canvasParticles']=_0x211aed,this[_0x57b9d7(0xe5,0x128)][_0x57b9d7(0xf9,0x96)]=_0x346d6b(0x53f,0x539),this[_0x346d6b(0x5ac,0x5a9)][_0x57b9d7(0x10d,0x109)](0x0,0x0,this[_0x346d6b(0x644,0x61e)],this[_0x57b9d7(0x137,0x112)]),this['canvasContext']['globalCompositeOperation']=_0x346d6b(0x58a,0x554),this[_0x57b9d7(0xe5,0xca)][_0x346d6b(0x5c5,0x559)]=0.9;const _0x3cb907=this[_0x346d6b(0x5bf,0x553)][_0x346d6b(0x517,0x524)]['mode']!==Cesium['SceneMode']['SCENE3D'];function _0x346d6b(_0x3861a6,_0x121997){return _0x219830(_0x121997-0x747,_0x3861a6);}function _0x57b9d7(_0x2284f4,_0x42ae6d){return _0x219830(_0x2284f4-0x283,_0x42ae6d);}const _0x3d9047=this['canvasWidth']*0.25;if(this[_0x346d6b(0x562,0x55f)])for(let _0x3a0ad8=0x0,_0x42ce68=_0x211aed[_0x346d6b(0x628,0x59f)];_0x3a0ad8<_0x42ce68;_0x3a0ad8++){const _0x54669e=_0x211aed[_0x3a0ad8],_0x57c0d9=this[_0x57b9d7(0xc6,0xdf)](_0x54669e,_0x54669e['lng'],_0x54669e[_0x346d6b(0x62c,0x5ee)],_0x54669e['alt']),_0x256153=this[_0x346d6b(0x598,0x58a)](_0x54669e,_0x54669e[_0x346d6b(0x521,0x59c)],_0x54669e[_0x346d6b(0x60e,0x597)],_0x54669e['talt']);if(!_0x57c0d9||!_0x256153)continue;if(_0x3cb907&&Math[_0x346d6b(0x4d8,0x55e)](_0x57c0d9[0x0]-_0x256153[0x0])>=_0x3d9047)continue;this[_0x346d6b(0x562,0x5a9)]['beginPath'](),this['canvasContext'][_0x346d6b(0x5dd,0x5c0)]=this['lineWidth'],this[_0x57b9d7(0xe5,0x81)][_0x346d6b(0x4f3,0x530)]=this['_colorRamp'][_0x346d6b(0x518,0x567)](_0x54669e[_0x57b9d7(0x63,0x86)]),this['canvasContext']['moveTo'](_0x57c0d9[0x0],_0x57c0d9[0x1]),this[_0x346d6b(0x567,0x5a9)]['lineTo'](_0x256153[0x0],_0x256153[0x1]),this[_0x57b9d7(0xe5,0x5f)]['stroke']();}else{this[_0x57b9d7(0xe5,0xc2)][_0x57b9d7(0x134,0x19f)](),this[_0x346d6b(0x5db,0x5a9)]['lineWidth']=this['lineWidth'],this['canvasContext'][_0x57b9d7(0x6c,0xa)]=this['color'];for(let _0x268e56=0x0,_0x1b7784=_0x211aed[_0x57b9d7(0xdb,0xe6)];_0x268e56<_0x1b7784;_0x268e56++){const _0x360e9b=_0x211aed[_0x268e56],_0x468f59=this['_tomap'](_0x360e9b,_0x360e9b['lng'],_0x360e9b['lat'],_0x360e9b[_0x57b9d7(0xd6,0x56)]),_0x41f46d=this['_tomap'](_0x360e9b,_0x360e9b[_0x57b9d7(0xd8,0x10d)],_0x360e9b['tlat'],_0x360e9b['talt']);if(!_0x468f59||!_0x41f46d)continue;if(_0x3cb907&&Math[_0x346d6b(0x587,0x55e)](_0x468f59[0x0]-_0x41f46d[0x0])>=_0x3d9047)continue;this[_0x57b9d7(0xe5,0x6b)]['moveTo'](_0x468f59[0x0],_0x468f59[0x1]),this['canvasContext']['lineTo'](_0x41f46d[0x0],_0x41f46d[0x1]);}this['canvasContext'][_0x57b9d7(0x10b,0x9a)]();}}['_tomap'](_0x5c002e,_0x29d5dd,_0x561457,_0x1a542c){const _0x3687f5=Cesium['Cartesian3']['fromDegrees'](_0x29d5dd,_0x561457,_0x1a542c??this['fixedHeight']);function _0x236f07(_0xb939ca,_0x5bac5c){return _0x219830(_0xb939ca-0x684,_0x5bac5c);}const _0x55d3e5=this[_0x9d525b(-0x152,-0x18b)]['scene'];if(_0x55d3e5[_0x9d525b(-0xa6,-0xd5)]===Cesium[_0x9d525b(-0xd0,-0x10b)][_0x236f07(0x55e,0x546)]){const _0x532ba0=new Cesium[(_0x9d525b(-0x19a,-0x1a0))](_0x55d3e5[_0x9d525b(-0xc1,-0x100)][_0x236f07(0x4be,0x4c6)],_0x55d3e5['camera']['positionWC']),_0x339067=_0x532ba0['isPointVisible'](_0x3687f5);if(!_0x339067)return _0x5c002e['age']=0x0,null;}const _0x4b207b=mars3d__namespace['PointTrans'][_0x236f07(0x51a,0x4ff)](this['_map']['scene'],_0x3687f5);function _0x9d525b(_0x4bf0f6,_0x3645e3){return _0x219830(_0x3645e3-0x69,_0x4bf0f6);}return _0x4b207b?[_0x4b207b['x'],_0x4b207b['y']]:null;}[_0x48569e(-0x1b8,-0x175)](){function _0x15da02(_0x32944f,_0x10361e){return _0x219830(_0x32944f-0x778,_0x10361e);}function _0xe51eeb(_0x350d86,_0x1462eb){return _0x48569e(_0x1462eb-0x6a7,_0x350d86);}this['windField'][_0x15da02(0x572,0x52c)](),delete this[_0x15da02(0x5fe,0x5fc)];}['initWorker'](){function _0x4afe94(_0x15a90c,_0x563c69){return _0x219830(_0x563c69-0x61b,_0x15a90c);}this['worker']=new Worker(this[_0x4afe94(0x463,0x40f)][_0x4afe94(0x3a6,0x3ed)]),this['worker'][_0x13bd9d(0x39c,0x3f9)]=_0x410101=>{this['_drawLines'](_0x410101['data']['particles']);function _0x8ef28c(_0x536a1b,_0x4c5199){return _0x13bd9d(_0x4c5199,_0x536a1b- -0xbe);}this[_0x8ef28c(0x387,0x3b0)]=![];};function _0x13bd9d(_0x302d4d,_0x2bcdb4){return _0x219830(_0x2bcdb4-0x566,_0x302d4d);}this[_0x13bd9d(0x3de,0x3af)]={'init':_0x13612a=>{const _0xcd06f={};function _0x34a491(_0x337ff0,_0x1a6df7){return _0x4afe94(_0x1a6df7,_0x337ff0-0x52);}_0xcd06f['type']='init',_0xcd06f['options']=_0x13612a,this[_0x34a491(0x43f,0x3e3)]['postMessage'](_0xcd06f);},'setOptions':_0x36e229=>{function _0x39d6cc(_0x3901a7,_0x10918c){return _0x4afe94(_0x10918c,_0x3901a7- -0x25b);}function _0x14689c(_0x3a777a,_0xb4b43c){return _0x4afe94(_0xb4b43c,_0x3a777a-0x18f);}const _0x33aec3={};_0x33aec3['type']='setOptions',_0x33aec3[_0x14689c(0x59e,0x61a)]=_0x36e229,this[_0x14689c(0x57c,0x602)][_0x14689c(0x660,0x671)](_0x33aec3);},'setDate':_0x1b8c8d=>{function _0x1b11cc(_0x1ef342,_0x15c6e9){return _0x4afe94(_0x1ef342,_0x15c6e9-0x53);}const _0x255576={};_0x255576[_0x1b11cc(0x589,0x534)]=_0x1b11cc(0x493,0x494);function _0x3b5f3b(_0x543ae4,_0x3e3650){return _0x13bd9d(_0x543ae4,_0x3e3650- -0x4de);}_0x255576['data']=_0x1b8c8d,this['worker']['postMessage'](_0x255576);},'update':()=>{if(this['_updateIng2'])return;this[_0x48619c(-0x65,-0xe8)]=!![];const _0x509bc7={};function _0x4c6842(_0x566497,_0x486647){return _0x4afe94(_0x566497,_0x486647- -0x38d);}function _0x48619c(_0x5294e8,_0x1d5688){return _0x4afe94(_0x1d5688,_0x5294e8- -0x55f);}_0x509bc7['type']='update',this[_0x48619c(-0x172,-0x1be)]['postMessage'](_0x509bc7);},'clear':()=>{const _0x5189ec={};_0x5189ec[_0x58567f(0x2c0,0x329)]='clear';function _0x58567f(_0x1ba1f7,_0x418b0e){return _0x4afe94(_0x418b0e,_0x1ba1f7- -0x221);}this['worker']['postMessage'](_0x5189ec);}},this['windField']['init'](this[_0x4afe94(0x48a,0x40f)]);}}mars3d__namespace[_0x48569e(-0x1ae,-0x223)]['register']('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace[_0x219830(-0x18f,-0x204)]['logInfo']('mars3d-wind插件\x20注册成功'),mars3d__namespace['WindUtil']=WindUtil,exports[_0x48569e(-0xe8,-0xd0)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0x48569e(-0xf8,-0xe8)]=WindUtil;const _0x179012={};_0x179012[_0x219830(-0x184,-0x156)]=!![],Object[_0x219830(-0x150,-0xd3)](exports,'__esModule',_0x179012);
}));
