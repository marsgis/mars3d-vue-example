/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.11
 * 编译日期：2025-06-10 18:11
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x12b0b0,_0x23a95a){function _0x19b1c7(_0xc54e7f,_0x188b8b){return _0x4d4d(_0x188b8b- -0x2ad,_0xc54e7f);}const _0x4017e4=_0x12b0b0();function _0x2aebb2(_0x4559d7,_0x2b564f){return _0x4d4d(_0x4559d7-0x2d7,_0x2b564f);}while(!![]){try{const _0x53d324=parseInt(_0x19b1c7(-0x17b,-0x167))/0x1*(parseInt(_0x2aebb2(0x4cc,0x455))/0x2)+parseInt(_0x19b1c7(-0xfd,-0x146))/0x3*(parseInt(_0x2aebb2(0x447,0x408))/0x4)+-parseInt(_0x19b1c7(-0xf3,-0xc4))/0x5*(parseInt(_0x19b1c7(-0xc4,-0x133))/0x6)+-parseInt(_0x19b1c7(-0x140,-0x142))/0x7*(parseInt(_0x2aebb2(0x48d,0x4a8))/0x8)+-parseInt(_0x19b1c7(-0x1e1,-0x17f))/0x9+-parseInt(_0x19b1c7(-0x169,-0x143))/0xa+parseInt(_0x2aebb2(0x49d,0x4e1))/0xb;if(_0x53d324===_0x23a95a)break;else _0x4017e4['push'](_0x4017e4['shift']());}catch(_0x243595){_0x4017e4['push'](_0x4017e4['shift']());}}}(_0x4171,0xf3aec));function _interopNamespace(_0x3f3318){if(_0x3f3318&&_0x3f3318['__esModule'])return _0x3f3318;var _0x532019=Object[_0x6593de(0x133,0x146)](null);_0x3f3318&&Object[_0xc003fc(0x53f,0x52c)](_0x3f3318)[_0x6593de(0x114,0x142)](function(_0x52902b){function _0x17e4c7(_0x34ca17,_0x44cc4c){return _0xc003fc(_0x34ca17,_0x44cc4c- -0x48b);}if(_0x52902b!=='default'){var _0xe70962=Object['getOwnPropertyDescriptor'](_0x3f3318,_0x52902b);Object['defineProperty'](_0x532019,_0x52902b,_0xe70962[_0x17e4c7(-0x2e,-0x40)]?_0xe70962:{'enumerable':!![],'get':function(){return _0x3f3318[_0x52902b];}});}});function _0xc003fc(_0x53ee2e,_0xa8b222){return _0x4d4d(_0xa8b222-0x319,_0x53ee2e);}function _0x6593de(_0x385324,_0x2bb000){return _0x4d4d(_0x2bb000-0x1,_0x385324);}return _0x532019['default']=_0x3f3318,_0x532019;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function _0x468499(_0x5997d7,_0x330a18){return _0x4d4d(_0x5997d7-0x2df,_0x330a18);}function getU(_0x3d5cf5,_0x222510){function _0xb3dc78(_0x55859f,_0x8079ba){return _0x4d4d(_0x55859f-0x3ce,_0x8079ba);}const _0x363794=_0x3d5cf5*Math[_0x3ac374(0x1c,-0x5d)](Cesium$2['Math'][_0x3ac374(-0x26,-0x8c)](_0x222510));function _0x3ac374(_0x89ed99,_0x46e4eb){return _0x4d4d(_0x89ed99- -0x1bc,_0x46e4eb);}return _0x363794;}function getV(_0x1cc58a,_0x36e9b5){const _0x4601af=_0x1cc58a*Math['sin'](Cesium$2['Math']['toRadians'](_0x36e9b5));return _0x4601af;}function getSpeed(_0x423491,_0x194b5b){function _0x19fcea(_0x3d43d0,_0x317731){return _0x4d4d(_0x317731- -0x380,_0x3d43d0);}const _0x58cbbf=Math[_0x19fcea(-0x1a2,-0x16c)](Math['pow'](_0x423491,0x2)+Math['pow'](_0x194b5b,0x2));return _0x58cbbf;}function getDirection(_0x19b194,_0x394c12){function _0x520370(_0x3e9974,_0x513d10){return _0x4d4d(_0x3e9974-0x245,_0x513d10);}let _0xfcea59=Cesium$2['Math']['toDegrees'](Math[_0x520370(0x3e8,0x37d)](_0x394c12,_0x19b194));return _0xfcea59+=_0xfcea59<0x0?0x168:0x0,_0xfcea59;}const _0x3a01ca={};_0x3a01ca['__proto__']=null,_0x3a01ca[_0x468499(0x47d,0x4ac)]=getU,_0x3a01ca['getV']=getV,_0x3a01ca['getSpeed']=getSpeed,_0x3a01ca['getDirection']=getDirection;var WindUtil=_0x3a01ca,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x338b3a(0x11c,0x182),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader=_0x338b3a(0x101,0xab),renderParticlesVertexShader=_0x468499(0x4ee,0x482);const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x338b3a(0xf4,0x75)];class ShaderManager{static['getCalculateSpeedShader'](){const _0x19cac1={};return _0x19cac1['sources']=[calculateSpeedShader],new ShaderSource$1(_0x19cac1);}static[_0x338b3a(0x1a2,0x21f)](){const _0x383e94={};function _0x5dcc1d(_0x1d5fe3,_0x5b7c09){return _0x468499(_0x5b7c09- -0x44d,_0x1d5fe3);}return _0x383e94[_0x5dcc1d(-0x13,0x1f)]=[updatePositionShader],new ShaderSource$1(_0x383e94);}static['getSegmentDrawVertexShader'](){function _0x578479(_0x534078,_0x51f7b9){return _0x468499(_0x51f7b9- -0x46e,_0x534078);}const _0x4b8756={};return _0x4b8756[_0x578479(-0x7a,-0x2)]=[renderParticlesVertexShader],new ShaderSource$1(_0x4b8756);}static['getSegmentDrawFragmentShader'](){const _0x5d7983={};return _0x5d7983['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x5d7983);}static['getPostProcessingPositionShader'](){const _0x178b86={};return _0x178b86['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x178b86);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x1fdb4c){this['commandType']=_0x1fdb4c[_0x5393a7(0x35c,0x39c)],this['geometry']=_0x1fdb4c['geometry'],this['attributeLocations']=_0x1fdb4c['attributeLocations'],this[_0x382fa7(-0x18c,-0x136)]=_0x1fdb4c['primitiveType'],this['uniformMap']=_0x1fdb4c['uniformMap']||{};function _0x5393a7(_0x460f94,_0x84c624){return _0x338b3a(_0x84c624-0x1f5,_0x460f94);}this[_0x5393a7(0x341,0x389)]=_0x1fdb4c[_0x5393a7(0x336,0x389)];function _0x382fa7(_0xaa95cc,_0x55dbb6){return _0x338b3a(_0x55dbb6- -0x253,_0xaa95cc);}this['fragmentShaderSource']=_0x1fdb4c['fragmentShaderSource'],this['rawRenderState']=_0x1fdb4c['rawRenderState'],this['framebuffer']=_0x1fdb4c['framebuffer'],this['outputTexture']=_0x1fdb4c['outputTexture'],this[_0x382fa7(-0x12b,-0xfa)]=_0x1fdb4c['autoClear']??![],this['preExecute']=_0x1fdb4c[_0x382fa7(-0x10d,-0xef)],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this[_0x382fa7(-0x9e,-0xc6)]=_0x1fdb4c[_0x5393a7(0x34f,0x382)]??(()=>!![]),this['autoClear']&&(this[_0x5393a7(0x302,0x2e7)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x382fa7(-0x91,-0x99)],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x3953f5){function _0x3eb0e9(_0x689e3f,_0x5492d0){return _0x468499(_0x5492d0-0xee,_0x689e3f);}function _0x53192d(_0x2880e6,_0x1d54ee){return _0x468499(_0x2880e6- -0xf4,_0x1d54ee);}if(this[_0x3eb0e9(0x586,0x5ca)]===_0x3eb0e9(0x50f,0x575)){const _0x5304fe={};_0x5304fe['context']=_0x3953f5,_0x5304fe['geometry']=this['geometry'],_0x5304fe['attributeLocations']=this['attributeLocations'],_0x5304fe['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x1f7ba1=VertexArray$1['fromGeometry'](_0x5304fe),_0x1fdfe4={};_0x1fdfe4['context']=_0x3953f5,_0x1fdfe4['vertexShaderSource']=this['vertexShaderSource'],_0x1fdfe4['fragmentShaderSource']=this['fragmentShaderSource'],_0x1fdfe4[_0x3eb0e9(0x54a,0x5cb)]=this[_0x3eb0e9(0x56e,0x5cb)];const _0x32791b=ShaderProgram[_0x53192d(0x387,0x3c3)](_0x1fdfe4),_0x1a202a=RenderState['fromCache'](this['rawRenderState']),_0x5b2af1={};return _0x5b2af1[_0x3eb0e9(0x4ee,0x4f0)]=this,_0x5b2af1[_0x53192d(0x406,0x410)]=_0x1f7ba1,_0x5b2af1['primitiveType']=this['primitiveType'],_0x5b2af1['modelMatrix']=Matrix4[_0x3eb0e9(0x4f0,0x52e)],_0x5b2af1['renderState']=_0x1a202a,_0x5b2af1[_0x3eb0e9(0x5aa,0x5b3)]=_0x32791b,_0x5b2af1[_0x3eb0e9(0x64c,0x5dd)]=this['framebuffer'],_0x5b2af1['uniformMap']=this['uniformMap'],_0x5b2af1['pass']=Pass$1['OPAQUE'],new DrawCommand(_0x5b2af1);}else{if(this['commandType']===_0x53192d(0x341,0x38d)){const _0x2db2a9={};return _0x2db2a9['owner']=this,_0x2db2a9['fragmentShaderSource']=this[_0x3eb0e9(0x5c4,0x54a)],_0x2db2a9['uniformMap']=this['uniformMap'],_0x2db2a9[_0x53192d(0x324,0x3a3)]=this['outputTexture'],_0x2db2a9['persists']=!![],new ComputeCommand(_0x2db2a9);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0xe4f7e4,_0x3544a1){this['geometry']=_0x3544a1;function _0x282d99(_0x4f46d3,_0x4f3064){return _0x338b3a(_0x4f46d3- -0x364,_0x4f3064);}defined(this['commandToExecute'])&&(this['commandToExecute']['vertexArray']=VertexArray$1['fromGeometry']({'context':_0xe4f7e4,'geometry':this['geometry'],'attributeLocations':this[_0x282d99(-0x1bc,-0x17b)],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}[_0x338b3a(0xf6,0x109)](_0x5de8da){if(!this['isDynamic']())return;function _0x1d9d84(_0x301924,_0x36c24c){return _0x468499(_0x36c24c- -0xaf,_0x301924);}if(!this[_0x582934(-0x187,-0x14c)]||!defined(_0x5de8da))return;!defined(this['commandToExecute'])&&(this[_0x1d9d84(0x4a1,0x433)]=this['createCommand'](_0x5de8da['context']));defined(this[_0x582934(-0x177,-0x14b)])&&this[_0x582934(-0x15a,-0x14b)]();if(!_0x5de8da[_0x582934(-0xd5,-0x146)]){console[_0x582934(-0x215,-0x1be)](_0x582934(-0x144,-0x191));return;}function _0x582934(_0x16ee7b,_0x72c6c0){return _0x338b3a(_0x72c6c0- -0x2af,_0x16ee7b);}defined(this[_0x582934(-0x158,-0x1bd)])&&_0x5de8da['commandList']['push'](this['clearCommand']),defined(this[_0x1d9d84(0x44e,0x433)])&&_0x5de8da[_0x1d9d84(0x423,0x3ef)]['push'](this[_0x582934(-0x175,-0x102)]);}['isDestroyed'](){return![];}[_0x468499(0x3fb,0x3c9)](){function _0x523af(_0xc60b94,_0x5d14f1){return _0x468499(_0x5d14f1- -0x4c5,_0xc60b94);}if(defined(this['commandToExecute'])){var _0x38558c;(_0x38558c=this['commandToExecute']['shaderProgram'])===null||_0x38558c===void 0x0||_0x38558c['destroy'](),this[_0x523af(0x48,0x1d)]['shaderProgram']=undefined;}return destroyObject(this);}}function deepMerge(_0x50e0aa,_0x24130c){if(!_0x50e0aa)return _0x24130c;if(!_0x24130c)return _0x50e0aa;const _0x2fbbdc={..._0x24130c};function _0x5c4844(_0x333147,_0x5274da){return _0x468499(_0x333147- -0x435,_0x5274da);}const _0x1541cb=_0x2fbbdc;for(const _0x3d8a8b in _0x50e0aa){if(Object[_0x5c4844(0x19,-0x3a)][_0x4e4c57(0x403,0x421)][_0x5c4844(-0x13,-0x85)](_0x50e0aa,_0x3d8a8b)){const _0x20c6c1=_0x50e0aa[_0x3d8a8b],_0x4331e4=_0x24130c[_0x3d8a8b];if(Array['isArray'](_0x20c6c1)){_0x1541cb[_0x3d8a8b]=_0x20c6c1['slice']();continue;}if(_0x20c6c1&&typeof _0x20c6c1==='object'){_0x1541cb[_0x3d8a8b]=deepMerge(_0x20c6c1,_0x4331e4||{});continue;}_0x20c6c1!==undefined&&(_0x1541cb[_0x3d8a8b]=_0x20c6c1);}}function _0x4e4c57(_0x2832dc,_0x2cdfd2){return _0x338b3a(_0x2832dc-0x31d,_0x2cdfd2);}return _0x1541cb;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x468499(0x429,0x3e9)];class WindParticlesComputing{constructor(_0x11b5be,_0x2ca741,_0x27b35b,_0x3274d8,_0x169486){this['context']=_0x11b5be,this[_0x5750f5(0x260,0x239)]=_0x27b35b,this['viewerParameters']=_0x3274d8,this['windData']=_0x2ca741;function _0x1f76a8(_0x4229bf,_0x13d87a){return _0x468499(_0x4229bf- -0x450,_0x13d87a);}this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;function _0x5750f5(_0x3da4ce,_0x1a1781){return _0x338b3a(_0x3da4ce-0xe1,_0x1a1781);}const _0xa2455b={};_0xa2455b[_0x5750f5(0x216,0x1e8)]=_0x169486,_0xa2455b[_0x5750f5(0x236,0x24c)]=0x1,_0xa2455b[_0x1f76a8(0x23,0x61)]=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0xa2455b),this[_0x1f76a8(0x80,0x8d)](),this['createWindTextures'](),this['createParticlesTextures'](),this['createComputingPrimitives']();}[_0x338b3a(0x19b,0x214)](){const _0x47da46=()=>{function _0x3bb7a1(_0x234542,_0xb6f8cb){return _0x4d4d(_0xb6f8cb-0x2c,_0x234542);}function _0x328945(_0x1a4ce0,_0x584d1e){return _0x4d4d(_0x1a4ce0-0x1ca,_0x584d1e);}this['frameRateMonitor'][_0x328945(0x2fa,0x2d6)]>0x14&&(this[_0x3bb7a1(0x1a7,0x157)]=this['frameRateMonitor']['lastFramesPerSecond'],this[_0x328945(0x369,0x399)]=0x3c/Math['max'](this[_0x328945(0x2f5,0x333)],0x1));};_0x47da46();const _0x352bbe=setInterval(_0x47da46,0x3e8);function _0x175cd5(_0x1f050e,_0x29d9bc){return _0x338b3a(_0x29d9bc- -0x220,_0x1f050e);}const _0x283a98=this['destroy']['bind'](this);this[_0x175cd5(-0x118,-0x15a)]=()=>{clearInterval(_0x352bbe),_0x283a98();};}['createWindTextures'](){function _0x595e4b(_0x403c30,_0x412b10){return _0x338b3a(_0x403c30- -0x281,_0x412b10);}function _0x45a535(_0x598d88,_0x5aec39){return _0x468499(_0x5aec39- -0x5ae,_0x598d88);}const _0x2160a4={};_0x2160a4['minificationFilter']=TextureMinificationFilter$1['LINEAR'],_0x2160a4['magnificationFilter']=TextureMagnificationFilter$1[_0x595e4b(-0xc9,-0x5a)];const _0x5b7ca1={'context':this['context'],'width':this[_0x595e4b(-0x13a,-0x1a5)]['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1[_0x45a535(-0x104,-0xfc)],'pixelDatatype':PixelDatatype$1[_0x595e4b(-0x13c,-0x158)],'flipY':this[_0x45a535(-0xbe,-0xfa)][_0x595e4b(-0x1b1,-0x193)]??![],'sampler':new Sampler$1(_0x2160a4)};this['windTextures']={'U':new Texture$1({..._0x5b7ca1,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x5b7ca1,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}['createParticlesTextures'](){const _0x2e2409={};_0x2e2409[_0x2a13e6(-0x215,-0x261)]=TextureMinificationFilter$1['NEAREST'];function _0x2a13e6(_0x1ebb68,_0x38bad2){return _0x468499(_0x1ebb68- -0x65d,_0x38bad2);}_0x2e2409['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];const _0xefdce6={'context':this['context'],'width':this['options'][_0x2a13e6(-0x16c,-0x164)],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1[_0x569b09(-0x39,0x12)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0x2a13e6(-0x16c,-0x19d)]*this['options'][_0x2a13e6(-0x16c,-0x12e)]*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x2e2409)};function _0x569b09(_0x4e3da0,_0xcd52a){return _0x468499(_0x4e3da0- -0x490,_0xcd52a);}this[_0x2a13e6(-0x1a0,-0x134)]={'previousParticlesPosition':new Texture$1(_0xefdce6),'currentParticlesPosition':new Texture$1(_0xefdce6),'nextParticlesPosition':new Texture$1(_0xefdce6),'postProcessingPosition':new Texture$1(_0xefdce6),'particlesSpeed':new Texture$1(_0xefdce6)};}[_0x468499(0x49a,0x50a)](){function _0x4dfebb(_0x5b2a45,_0x44edf5){return _0x468499(_0x5b2a45- -0x406,_0x44edf5);}Object['values'](this[_0x4dfebb(0xb7,0xdd)])['forEach'](_0x1ea87d=>_0x1ea87d['destroy']());}[_0x338b3a(0xf5,0x130)](){function _0x52f004(_0xd24a9b,_0x2162b6){return _0x468499(_0x2162b6- -0x650,_0xd24a9b);}function _0x3c4543(_0x36d91e,_0x2b3dc7){return _0x338b3a(_0x36d91e-0xf7,_0x2b3dc7);}this[_0x3c4543(0x29a,0x2a4)]={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u']['min'],this['windData']['u'][_0x3c4543(0x26d,0x2c5)]),'vRange':()=>new Cartesian2$1(this[_0x52f004(-0x1ae,-0x1d4)]['v']['min'],this['windData']['v'][_0x3c4543(0x26d,0x254)]),'speedRange':()=>new Cartesian2$1(this['windData']['speed'][_0x52f004(-0x23f,-0x247)],this['windData']['speed']['max']),'currentParticlesPosition':()=>this[_0x3c4543(0x27f,0x205)][_0x3c4543(0x2b6,0x28c)],'speedScaleFactor':()=>{function _0x24128e(_0x593a2b,_0x19a0d1){return _0x52f004(_0x593a2b,_0x19a0d1-0x305);}function _0x55da21(_0x14f1a6,_0xc9a95e){return _0x52f004(_0x14f1a6,_0xc9a95e-0x1af);}return(this['viewerParameters'][_0x24128e(0x132,0x12c)]+0x32)*this['options'][_0x24128e(0x171,0x19d)];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this[_0x3c4543(0x23e,0x273)][_0x52f004(-0x22a,-0x1ac)],this['windData']['height']),'minimum':()=>new Cartesian2$1(this[_0x52f004(-0x223,-0x1d4)]['bounds']['west'],this[_0x52f004(-0x17e,-0x1d4)]['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData'][_0x52f004(-0x161,-0x1bf)][_0x52f004(-0x196,-0x1ee)],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this[_0x3c4543(0x27f,0x201)][_0x52f004(-0x13a,-0x19b)],'preExecute':()=>{const _0x360aed=this[_0x145284(-0x93,-0x8d)]['previousParticlesPosition'];this[_0x145284(-0x93,-0xba)]['previousParticlesPosition']=this['particlesTextures']['currentParticlesPosition'],this['particlesTextures']['currentParticlesPosition']=this['particlesTextures']['postProcessingPosition'];function _0x145284(_0x68883b,_0x24f4dd){return _0x3c4543(_0x68883b- -0x312,_0x24f4dd);}function _0x1020ef(_0x455731,_0x5635f6){return _0x52f004(_0x455731,_0x5635f6-0x19d);}this['particlesTextures']['postProcessingPosition']=_0x360aed,this[_0x145284(-0x78,-0x72)][_0x145284(-0x10c,-0xbc)]['commandToExecute']&&(this[_0x1020ef(0x63,0x25)]['calculateSpeed'][_0x145284(-0x6e,-0x1d)]['outputTexture']=this[_0x1020ef(-0x58,0xa)][_0x1020ef(0x72,0x2)]);},'isDynamic':()=>this['options'][_0x52f004(-0x189,-0x1a8)]}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x52f004(-0xe6,-0x15c)],'particlesSpeed':()=>this[_0x52f004(-0x1df,-0x193)][_0x3c4543(0x277,0x2d4)]},'fragmentShaderSource':ShaderManager[_0x52f004(-0x183,-0x179)](),'outputTexture':this[_0x52f004(-0x1bb,-0x193)]['nextParticlesPosition'],'preExecute':()=>{function _0x4af22e(_0x49c8e4,_0x4558a2){return _0x52f004(_0x4558a2,_0x49c8e4-0x46f);}function _0x5d4741(_0x3b0355,_0x5cdd41){return _0x3c4543(_0x3b0355- -0x1b9,_0x5cdd41);}this['primitives']['updatePosition'][_0x5d4741(0xeb,0x7f)]&&(this[_0x4af22e(0x2f7,0x2f1)]['updatePosition']['commandToExecute']['outputTexture']=this['particlesTextures']['nextParticlesPosition']);},'isDynamic':()=>this['options']['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x52f004(-0x207,-0x21b),'uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this[_0x3c4543(0x27f,0x2ef)]['particlesSpeed'],'lonRange':()=>this['viewerParameters'][_0x52f004(-0x12d,-0x191)],'latRange':()=>this['viewerParameters'][_0x3c4543(0x2bb,0x2c8)],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds'][_0x3c4543(0x1bf,0x174)],this[_0x3c4543(0x23e,0x20c)]['bounds'][_0x52f004(-0x268,-0x1ee)]),'dataLatRange':()=>new Cartesian2$1(this['windData'][_0x52f004(-0x23b,-0x1bf)]['south'],this[_0x3c4543(0x23e,0x27a)]['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options'][_0x52f004(-0x1f8,-0x198)],'dropRateBump':()=>this[_0x52f004(-0x172,-0x19c)][_0x52f004(-0x18b,-0x20d)],'useViewerBounds':()=>this[_0x3c4543(0x276,0x254)]['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x170a0a(_0x154a26,_0x5da21d){return _0x3c4543(_0x154a26-0x16d,_0x5da21d);}function _0x192ad8(_0x4ba9bf,_0x30624b){return _0x52f004(_0x4ba9bf,_0x30624b-0x4e4);}this[_0x170a0a(0x407,0x3b4)][_0x170a0a(0x3df,0x458)][_0x170a0a(0x411,0x47a)]&&(this['primitives']['postProcessingPosition'][_0x170a0a(0x411,0x3d3)][_0x192ad8(0x28f,0x2ac)]=this[_0x192ad8(0x300,0x351)]['postProcessingPosition']);},'isDynamic':()=>this['options']['dynamic']})};}['reCreateWindTextures'](){function _0x3d7224(_0x3230cb,_0x431b31){return _0x468499(_0x3230cb- -0x463,_0x431b31);}this[_0x3d7224(0x46,0xc1)]['U'][_0x3d7224(-0x68,-0x21)]();function _0x237ebc(_0x5ea785,_0x4cae1c){return _0x468499(_0x5ea785- -0x64f,_0x4cae1c);}this[_0x3d7224(0x46,-0xd)]['V']['destroy'](),this[_0x237ebc(-0x1c6,-0x213)]();}['updateWindData'](_0x33f9f8){this[_0x1b4a07(0x3c3,0x3fe)]=_0x33f9f8;function _0x1b4a07(_0x59b900,_0x563ac4){return _0x468499(_0x59b900- -0xb9,_0x563ac4);}function _0xad22e1(_0x18d3bd,_0x5718dc){return _0x468499(_0x5718dc- -0x16e,_0x18d3bd);}this[_0x1b4a07(0x3d7,0x3b2)]();}[_0x338b3a(0x10c,0x11b)](_0x43ff49){const _0x150108=_0x43ff49[_0x4bf481(0x1d0,0x1d4)]!==undefined&&_0x43ff49['flipY']!==this['options']['flipY'];this['options']=deepMerge(_0x43ff49,this['options']);function _0x4bf481(_0x22eb7b,_0x3e444f){return _0x468499(_0x3e444f- -0x231,_0x22eb7b);}_0x150108&&this['reCreateWindTextures']();}['processWindData'](_0xbebb27){const {array:_0x27be89}=_0xbebb27;function _0x289106(_0x502f23,_0x295e33){return _0x338b3a(_0x295e33- -0x1bf,_0x502f23);}function _0xf775c0(_0x5cc35a,_0x6d0ab9){return _0x468499(_0x6d0ab9-0xc0,_0x5cc35a);}let {min:_0x3b291c,max:_0x5afa64}=_0xbebb27;const _0x108d83=new Float32Array(_0x27be89[_0xf775c0(0x48e,0x502)]);_0x3b291c===undefined&&(console[_0xf775c0(0x4ac,0x4e6)](_0xf775c0(0x49c,0x51d)),_0x3b291c=Math[_0x289106(-0xd4,-0xeb)](..._0x27be89));_0x5afa64===undefined&&(console[_0xf775c0(0x47b,0x4e6)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x5afa64=Math[_0x289106(-0xa5,-0x49)](..._0x27be89));const _0x6f6038=Math[_0xf775c0(0x519,0x56b)](Math['abs'](_0x3b291c),Math['abs'](_0x5afa64));for(let _0x1eba07=0x0;_0x1eba07<_0x27be89['length'];_0x1eba07++){const _0x385132=_0x27be89[_0x1eba07]/_0x6f6038;_0x108d83[_0x1eba07]=_0x385132;}return _0x108d83;}[_0x468499(0x3fb,0x3c5)](){Object[_0x12a180(0xaf,0x10f)](this['windTextures'])[_0x12a180(0xd7,0xc9)](_0xea055b=>_0xea055b['destroy']());function _0x12a180(_0x118d2d,_0x5cf75a){return _0x468499(_0x5cf75a- -0x357,_0x118d2d);}Object[_0x12a180(0x113,0x10f)](this['particlesTextures'])[_0x12a180(0xef,0xc9)](_0x5a3d11=>_0x5a3d11[_0x12a180(0xe3,0xa4)]());function _0x421643(_0x4d2079,_0x5e5510){return _0x338b3a(_0x4d2079-0x35d,_0x5e5510);}Object['values'](this['primitives'])['forEach'](_0x3e4635=>_0x3e4635[_0x421643(0x423,0x401)]()),this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x338b3a(0xf4,0x10e)];function _0x4171(){const _0x3d19a8=['_onMouseDownEvent','normal','setData','width','8201138TQFflt','alt','componentDatatype','dynamic','windTextures','reverse','max','UNSIGNED_INT','green','worker','pointer-events','postProcessingPosition','clearFramebuffers','RED','speedRate','options','particlesSpeed','requestRender','cos','dropRate','tlat','south','context','ColorRamp','particlesTextures','ymax','lonRange','alpha','computing','isDynamic','componentsPerAttribute','_map','shaderProgram','speed','_addedHook','10RjrvMO','vertexShaderSource','createPrimitives','absolute','postMessage','layer','color','north','initFrameRate','toDegrees','clientHeight','camera','2ecEcIh','framebuffers','defineProperty','getUpdatePositionShader','primitives','#ffffff','_speedRate','pointerEvents','commandType','attributeLocations','_maxAge','vmin','auto','pixelDatatype','commandToExecute','array','off','strokeStyle','windField','removeEventListener','speedFactor','getDataAtLonLat','original','data','height','LINEAR','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','framebuffer','viewerParameters','particlesTextureSize','keys','sqrt','currentParticlesPosition','processWindData','sceneMode','ymin','getUVByPoint','latRange','vertexArray','ellipsoid','vdata','umin','colors','destroy','MAX_VALUE','west','xmin','flatMap','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','_onMouseMoveEvent','owner','_tomap','changed','flipY','type','CLAMP_TO_EDGE','fromDegrees','min','frameRate','domain','cols','623016aNdLPG','rendering','lastFramesPerSecond','canvas','get','push','age','wrapT','_colorRamp','_createCanvas','addEventListener','outputTexture','clientWidth','colorTable','hasOwnProperty','_randomParticle','bind','resize','_pointerEvents','forEach','_drawLines','call','udata','create','1234647CRjxjk','warn','clearCommand','mode','Cesium','createComputingPrimitives','update','UNSIGNED_BYTE','beginPath','clear','segments','displayRange','previousParticlesPosition','bindEvent','onParticlesTextureSizeChange','requestAnimationFrame','Compute','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','_updateIng','blendFuncDestination','particleSystem','wind','createRawRenderState','moveTo','_setOptionsHook','all','unbindEvent','IDENTITY','updateOptions','length','dropRateBump','calculateSpeed','canvasWind','3kJvVgt','style','minificationFilter','3700410PThIYU','301tEBihI','createRenderingTextures','xmax','mouseMove','prototype','6623836trrfVx','rows','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','primitiveType','frameState.commandList\x20is\x20undefined','maxAge','visibility','changeOptions','RGBA','blendFuncSource','2860356ihMloO','lineWidth','particlesNumber','fragmentShaderSource','min\x20is\x20undefined,\x20calculate\x20min','textures','now','mouse_down','getParticles','east','error','globalAlpha','_canrefresh','values','setOptions','onColorTableChange','tlng','scene','_onMouseUpEvent','sources','PointTrans','getPrimitives','MIN_VALUE','canvasContext','blue','setDate','quietPeriod','Math','toRadians','mars3d-canvasWind','pixelSize','WindLayer','DomUtil','FLOAT','fromCache','windData','getU','frameRateAdjustment','fillRect','mouse_move','init','atan2','fromGeometry','floor','pixelFormat','_onMapWhellEvent','Draw','lat','createWindTextures','samplingWindow','EventType','hidden','particles','autoClear','_removedHook','reCreateWindTextures','bounds','mouseUp','ONE_MINUS_SRC_ALPHA','rgb(206,255,255)','231688UgVqxA','updateViewerParameters','fixedHeight','show','preExecute','destroyParticlesTextures','updateWindData','drawingBufferHeight','0px','commandList','lng','getUVByXY'];_0x4171=function(){return _0x3d19a8;};return _0x4171();}class WindParticlesRendering{constructor(_0x5ce5f1,_0x57618a,_0x47f144,_0x4926ac){function _0x3a0343(_0x5d534e,_0x1fa8ea){return _0x338b3a(_0x1fa8ea- -0x1c3,_0x5d534e);}this['context']=_0x5ce5f1,this[_0x3a0343(-0xc2,-0x44)]=_0x57618a,this['viewerParameters']=_0x47f144;function _0x3dd645(_0x519413,_0x222ea1){return _0x338b3a(_0x519413- -0x20a,_0x222ea1);}this['computing']=_0x4926ac,(typeof this['options'][_0x3dd645(-0x4e,-0x9e)]!=='number'||this['options'][_0x3dd645(-0x4e,-0xb5)]<=0x0)&&(console[_0x3dd645(-0xdc,-0x129)](_0x3dd645(-0x13f,-0x18e)),this['options'][_0x3a0343(-0x1d,-0x7)]=0x100),this['colorTable']=this['createColorTableTexture'](),this[_0x3a0343(-0xc3,-0x9a)]=this['createRenderingTextures'](),this[_0x3dd645(-0x6a,-0x49)]=this['createRenderingFramebuffers'](),this['primitives']=this[_0x3a0343(0x30,-0x2e)]();}[_0x338b3a(0x116,0x154)](){const _0x37e09b={};function _0x3a613e(_0x4a6eb5,_0x35ec64){return _0x468499(_0x35ec64- -0x2c3,_0x4a6eb5);}_0x37e09b[_0x3a613e(0x276,0x1f8)]=this[_0x3a613e(0x18e,0x1f8)];function _0x2ddb5c(_0x52f575,_0x1e2e01){return _0x468499(_0x1e2e01- -0xc7,_0x52f575);}_0x37e09b['width']=this['context']['drawingBufferWidth'],_0x37e09b['height']=this['context']['drawingBufferHeight'],_0x37e09b[_0x3a613e(0x19b,0x1c2)]=PixelFormat[_0x2ddb5c(0x3cf,0x390)],_0x37e09b[_0x2ddb5c(0x3fa,0x41a)]=PixelDatatype[_0x3a613e(0xe9,0x169)];const _0x348925=_0x37e09b,_0x5eef65={};_0x5eef65['context']=this[_0x2ddb5c(0x3b5,0x3f4)],_0x5eef65[_0x2ddb5c(0x3cd,0x3dd)]=this[_0x3a613e(0x192,0x1f8)]['drawingBufferWidth'],_0x5eef65[_0x3a613e(0x1d3,0x229)]=this[_0x2ddb5c(0x3a0,0x3f4)]['drawingBufferHeight'],_0x5eef65['pixelFormat']=PixelFormat['DEPTH_COMPONENT'],_0x5eef65['pixelDatatype']=PixelDatatype[_0x3a613e(0x1b0,0x1e9)];const _0x2ae82e=_0x5eef65;return{'segmentsColor':new Texture(_0x348925),'segmentsDepth':new Texture(_0x2ae82e)};}['createRenderingFramebuffers'](){function _0x5f4cfe(_0x36066e,_0x4c2b02){return _0x338b3a(_0x4c2b02-0x64,_0x36066e);}const _0xc90a29={};return _0xc90a29[_0x5f4cfe(0x226,0x1ea)]=this['context'],_0xc90a29['colorTextures']=[this['textures']['segmentsColor']],_0xc90a29['depthTexture']=this['textures']['segmentsDepth'],{'segments':new Framebuffer(_0xc90a29)};}['destoryRenderingFramebuffers'](){function _0x53c497(_0x59b9c9,_0x36b382){return _0x468499(_0x36b382- -0x5a4,_0x59b9c9);}Object['values'](this['framebuffers'])[_0x53c497(-0x134,-0x184)](_0x3bdf1a=>{_0x3bdf1a['destroy']();});}['createColorTableTexture'](){const _0x2edbec=new Float32Array(this['options']['colors'][_0x3f35a0(-0x9d,-0x37)](_0x238c9f=>{function _0xa94674(_0x8013b,_0x461b4d){return _0x3f35a0(_0x8013b-0x1c6,_0x461b4d);}const _0x42333e=Color$1['fromCssColorString'](_0x238c9f);function _0xd7818a(_0x38bb48,_0x31cf1a){return _0x3f35a0(_0x38bb48-0xb0,_0x31cf1a);}return[_0x42333e['red'],_0x42333e[_0xa94674(0x1d7,0x1cf)],_0x42333e[_0xd7818a(0x85,0x17)],_0x42333e[_0xd7818a(0xd4,0x122)]];}));function _0x1bb5e4(_0x8ad658,_0x310ee1){return _0x468499(_0x310ee1-0x80,_0x8ad658);}const _0x3fd463={};_0x3fd463['minificationFilter']=TextureMinificationFilter[_0x1bb5e4(0x58d,0x56d)],_0x3fd463['magnificationFilter']=TextureMagnificationFilter['LINEAR'],_0x3fd463['wrapS']=TextureWrap[_0x3f35a0(-0x95,-0xff)];function _0x3f35a0(_0x34f767,_0x2b93fe){return _0x468499(_0x34f767- -0x49c,_0x2b93fe);}return _0x3fd463[_0x1bb5e4(0x446,0x494)]=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this[_0x1bb5e4(0x53d,0x534)]['colors']['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x3fd463),'source':{'width':this[_0x1bb5e4(0x4cd,0x534)]['colors']['length'],'height':0x1,'arrayBufferView':_0x2edbec}});}['createSegmentsGeometry'](){function _0x24ce3b(_0x2ddad3,_0x5940f7){return _0x468499(_0x2ddad3- -0x4b2,_0x5940f7);}const _0x2584fb=0x4,_0x43adcb=this['options'][_0x24ce3b(0x3f,-0x1a)];let _0x468221=[];for(let _0x3e63c1=0x0;_0x3e63c1<_0x43adcb;_0x3e63c1++){for(let _0x1e3e2e=0x0;_0x1e3e2e<_0x43adcb;_0x1e3e2e++){for(let _0x347f32=0x0;_0x347f32<_0x2584fb;_0x347f32++){_0x468221['push'](_0x3e63c1/_0x43adcb),_0x468221['push'](_0x1e3e2e/_0x43adcb);}}}_0x468221=new Float32Array(_0x468221);const _0x458407=this[_0x5da13e(0x1c2,0x147)][_0x24ce3b(0x3f,-0x1f)]**0x2;let _0x53acc3=[];for(let _0x271c4b=0x0;_0x271c4b<_0x458407;_0x271c4b++){_0x53acc3['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x53acc3=new Float32Array(_0x53acc3);let _0x4c30ff=[];function _0x5da13e(_0x1ccd6f,_0x4b6524){return _0x338b3a(_0x1ccd6f-0x43,_0x4b6524);}for(let _0x403274=0x0,_0x5dd353=0x0;_0x403274<_0x458407;_0x403274++){_0x4c30ff['push'](_0x5dd353+0x0,_0x5dd353+0x1,_0x5dd353+0x2,_0x5dd353+0x2,_0x5dd353+0x1,_0x5dd353+0x3),_0x5dd353+=_0x2584fb;}_0x4c30ff=new Uint32Array(_0x4c30ff);const _0x18fa02={};_0x18fa02['componentDatatype']=ComponentDatatype['FLOAT'],_0x18fa02[_0x24ce3b(0x11,0x82)]=0x2,_0x18fa02['values']=_0x468221;const _0x3b6f70={};_0x3b6f70[_0x24ce3b(-0xb,0x72)]=ComponentDatatype['FLOAT'],_0x3b6f70['componentsPerAttribute']=0x3,_0x3b6f70['values']=_0x53acc3;const _0x2bd5e1=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x18fa02),'normal':new GeometryAttribute(_0x3b6f70)}),'indices':_0x4c30ff});return _0x2bd5e1;}[_0x468499(0x43b,0x40d)](_0x18da91){const _0x3b2e08={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x18da91};return Appearance['getDefaultRenderState'](!![],![],_0x3b2e08);}['createPrimitives'](){const _0xd84b29={};_0xd84b29['st']=0x0;function _0x5bf04c(_0x1778d1,_0x153d50){return _0x468499(_0x1778d1- -0x158,_0x153d50);}_0xd84b29[_0x188c9a(0x5aa,0x5c5)]=0x1;const _0x28bbe3={};function _0x188c9a(_0x183d9b,_0x4588b0){return _0x338b3a(_0x183d9b-0x43d,_0x4588b0);}_0x28bbe3['enabled']=!![];const _0x5c67da={};_0x5c67da['enabled']=!![],_0x5c67da['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x5c67da[_0x5bf04c(0x300,0x30d)]=WebGLRenderingContext['SRC_ALPHA'],_0x5c67da[_0x188c9a(0x540,0x51f)]=WebGLRenderingContext[_0x5bf04c(0x33b,0x370)];const _0x1fdf7d={};_0x1fdf7d['viewport']=undefined,_0x1fdf7d['depthTest']=_0x28bbe3,_0x1fdf7d['depthMask']=!![],_0x1fdf7d['blending']=_0x5c67da;const _0x437b19=new CustomPrimitive({'commandType':_0x188c9a(0x58f,0x581),'attributeLocations':_0xd84b29,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures'][_0x188c9a(0x539,0x4ff)],'currentParticlesPosition':()=>this[_0x188c9a(0x5c9,0x609)][_0x188c9a(0x5c5,0x593)][_0x188c9a(0x5fc,0x62f)],'postProcessingPosition':()=>this[_0x5bf04c(0x369,0x35d)]['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this['computing'][_0x5bf04c(0x365,0x34d)]['particlesSpeed'],'frameRateAdjustment':()=>this[_0x188c9a(0x5c9,0x63f)]['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{var _0x2f9364,_0x3984f9;function _0x10e78d(_0x4538d6,_0x55a3f4){return _0x188c9a(_0x4538d6- -0x4bf,_0x55a3f4);}function _0x14ae3e(_0x456a1a,_0x5d33c2){return _0x188c9a(_0x456a1a- -0x2bb,_0x5d33c2);}const _0x453541=new Cartesian2(((_0x2f9364=this['options']['domain'])===null||_0x2f9364===void 0x0?void 0x0:_0x2f9364[_0x10e78d(0x52,0x54)])??this['computing']['windData']['speed'][_0x14ae3e(0x256,0x2b2)],((_0x3984f9=this['options'][_0x14ae3e(0x258,0x23a)])===null||_0x3984f9===void 0x0?void 0x0:_0x3984f9['max'])??this[_0x14ae3e(0x30e,0x326)]['windData']['speed']['max']);return _0x453541;},'displayRange':()=>{var _0x262769,_0x1f960b;const _0x5b89f3=new Cartesian2(((_0x262769=this['options'][_0x546f16(0x171,0x15e)])===null||_0x262769===void 0x0?void 0x0:_0x262769['min'])??this[_0x546f16(0x19a,0x1ef)][_0x595f66(-0xa5,-0xb4)]['speed'][_0x595f66(-0x118,-0x10b)],((_0x1f960b=this['options']['displayRange'])===null||_0x1f960b===void 0x0?void 0x0:_0x1f960b['max'])??this['computing']['windData'][_0x546f16(0x176,0x1f4)][_0x546f16(0x1cc,0x1d9)]);function _0x546f16(_0x2ebd3a,_0x2dac96){return _0x188c9a(_0x2dac96- -0x3da,_0x2ebd3a);}function _0x595f66(_0x331a02,_0x580c6c){return _0x188c9a(_0x331a02- -0x629,_0x580c6c);}return _0x5b89f3;},'particleHeight':()=>this[_0x188c9a(0x5bc,0x5e7)]['fixedHeight']||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this['context'][_0x188c9a(0x5a4,0x5f0)],'pixelSize':()=>this[_0x5bf04c(0x398,0x348)]['pixelSize'],'lineWidth':()=>{const _0x562cd8={};function _0x5a185c(_0x532ea4,_0x1689d6){return _0x5bf04c(_0x1689d6-0x201,_0x532ea4);}_0x562cd8[_0x22a15e(0xee,0x131)]=0x1,_0x562cd8[_0x5a185c(0x4f4,0x554)]=0x2;function _0x22a15e(_0x1e09bb,_0x49be9a){return _0x188c9a(_0x49be9a- -0x3e0,_0x1e09bb);}const _0x47daab=this[_0x22a15e(0x200,0x1dc)]['lineWidth']||_0x562cd8;return new Cartesian2(_0x47daab['min'],_0x47daab['max']);},'lineLength':()=>{function _0x42b802(_0x1d4bfd,_0x30aa81){return _0x188c9a(_0x30aa81- -0x40f,_0x1d4bfd);}const _0x14baa1={};function _0x339ec7(_0x5e6efc,_0x50393c){return _0x188c9a(_0x50393c- -0x31,_0x5e6efc);}_0x14baa1['min']=0x14,_0x14baa1[_0x42b802(0x183,0x1a4)]=0x64;const _0x14cfbd=this['options']['lineLength']||_0x14baa1;return new Cartesian2(_0x14cfbd[_0x339ec7(0x461,0x4e0)],_0x14cfbd[_0x339ec7(0x527,0x582)]);},'is3D':()=>this[_0x5bf04c(0x398,0x39e)][_0x188c9a(0x5fe,0x680)]===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this[_0x5bf04c(0x306,0x34b)]['segmentsDepth']},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x1fdf7d)}),_0x2cec59={};return _0x2cec59[_0x5bf04c(0x2d7,0x356)]=_0x437b19,_0x2cec59;}[_0x468499(0x433,0x3df)](){const _0x59108c=this['createSegmentsGeometry']();function _0x488563(_0x4a4065,_0x4bf84e){return _0x468499(_0x4a4065- -0x691,_0x4bf84e);}this['primitives']['segments']['geometry']=_0x59108c;const _0x13094e={};_0x13094e[_0x52b99e(0x149,0x144)]=this[_0x52b99e(0x149,0x14a)],_0x13094e['geometry']=_0x59108c,_0x13094e['attributeLocations']=this['primitives'][_0x488563(-0x262,-0x2df)][_0x52b99e(0x16b,0x19c)];function _0x52b99e(_0x6899f8,_0x580f47){return _0x338b3a(_0x6899f8- -0x3d,_0x580f47);}_0x13094e['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x329a81=VertexArray[_0x52b99e(0x111,0x183)](_0x13094e);this['primitives'][_0x488563(-0x262,-0x1fd)]['commandToExecute']&&(this['primitives'][_0x52b99e(0xbd,0x11c)][_0x52b99e(0x170,0x145)][_0x52b99e(0x188,0x128)]=_0x329a81);}['onColorTableChange'](){this['colorTable']['destroy'](),this['colorTable']=this['createColorTableTexture']();}['updateOptions'](_0x4f7e61){const _0x1648e0=_0x4f7e61[_0x3c385a(0x58,0x82)]&&JSON['stringify'](_0x4f7e61[_0x228ac6(-0x259,-0x2a4)])!==JSON['stringify'](this['options']['colors']);function _0x3c385a(_0x234e23,_0x2b8fdf){return _0x338b3a(_0x234e23- -0x6d,_0x2b8fdf);}function _0x228ac6(_0x5b56af,_0x193d0f){return _0x338b3a(_0x193d0f- -0x369,_0x5b56af);}this[_0x3c385a(0x112,0x14c)]=deepMerge(_0x4f7e61,this['options']),_0x1648e0&&this[_0x3c385a(0xc6,0xb2)]();}[_0x338b3a(0xc6,0xdb)](){function _0x1ed801(_0x5b94aa,_0x43db49){return _0x468499(_0x5b94aa-0x3e,_0x43db49);}Object['values'](this['framebuffers'])['forEach'](_0x1b7664=>{function _0x55f19a(_0x599713,_0x14de13){return _0x4d4d(_0x14de13-0x42,_0x599713);}_0x1b7664[_0x55f19a(0xdd,0x15e)]();});function _0x4b68f0(_0x5212f8,_0x14444b){return _0x338b3a(_0x14444b- -0x2d5,_0x5212f8);}Object['values'](this['primitives'])[_0x4b68f0(-0x183,-0x1ea)](_0x47c75e=>{function _0x3bc96d(_0x33d9aa,_0x2cf300){return _0x4b68f0(_0x33d9aa,_0x2cf300-0x40b);}_0x47c75e[_0x3bc96d(0x27b,0x1fc)]();}),this[_0x1ed801(0x458,0x49f)][_0x1ed801(0x439,0x3c5)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x14e3dc,_0xd1d58e,_0x14fad1,_0x32f4bf,_0x1721da){function _0x32d150(_0x1e661e,_0x2edd1a){return _0x468499(_0x1e661e-0x2f,_0x2edd1a);}this['context']=_0x14e3dc,this[_0x32d150(0x4e3,0x492)]=_0x14fad1;function _0x5e5579(_0x3d278e,_0x5e49f0){return _0x468499(_0x5e49f0- -0x438,_0x3d278e);}this[_0x5e5579(0x10e,0xb8)]=_0x32f4bf,this['computing']=new WindParticlesComputing(_0x14e3dc,_0xd1d58e,_0x14fad1,_0x32f4bf,_0x1721da),this['rendering']=new WindParticlesRendering(_0x14e3dc,_0x14fad1,_0x32f4bf,this['computing']),this['clearFramebuffers']();}[_0x468499(0x46e,0x491)](){const _0x402648=[this[_0xe2d468(0x3bd,0x3b5)]['primitives']['calculateSpeed'],this['computing']['primitives']['updatePosition'],this['computing']['primitives']['postProcessingPosition'],this['rendering']['primitives'][_0xe2d468(0x2bf,0x323)]];function _0x2f1f19(_0x26d788,_0x5cec84){return _0x338b3a(_0x26d788- -0xdb,_0x5cec84);}function _0xe2d468(_0x44038e,_0x4869cc){return _0x468499(_0x4869cc- -0x10c,_0x44038e);}return _0x402648;}[_0x338b3a(0x17c,0x12f)](){const _0x219f99=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});Object['keys'](this['rendering']['framebuffers'])['forEach'](_0x527212=>{function _0x505ab3(_0x395f41,_0x43bd63){return _0x4d4d(_0x43bd63- -0x3d1,_0x395f41);}_0x219f99['framebuffer']=this[_0x2cd60e(-0xcd,-0x90)][_0x2cd60e(0x23,0x37)][_0x527212];function _0x2cd60e(_0x5ee816,_0x11af64){return _0x4d4d(_0x11af64- -0x1bf,_0x5ee816);}_0x219f99['execute'](this['context']);});}[_0x468499(0x456,0x491)](_0x2033d4){let _0x5885cd=![];function _0x229662(_0x55a633,_0x46f632){return _0x338b3a(_0x55a633-0x3dc,_0x46f632);}_0x2033d4['particlesTextureSize']&&this[_0x229662(0x55b,0x4f1)]['particlesTextureSize']!==_0x2033d4['particlesTextureSize']&&(_0x5885cd=!![]);const _0x4662b2=deepMerge(_0x2033d4,this['options']);if(_0x4662b2['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');function _0x29844a(_0x4b4356,_0x51d8bf){return _0x338b3a(_0x51d8bf-0x127,_0x4b4356);}this[_0x229662(0x55b,0x5d0)]=_0x4662b2,this[_0x29844a(0x1e8,0x200)]['updateOptions'](_0x2033d4),this['computing']['updateOptions'](_0x2033d4),_0x5885cd&&(this[_0x29844a(0x2e5,0x2b3)]['destroyParticlesTextures'](),this[_0x229662(0x568,0x57c)]['createParticlesTextures'](),this['rendering'][_0x29844a(0x27f,0x225)]());}['applyViewerParameters'](_0x5bd80f){function _0x1bd92f(_0x470879,_0x336026){return _0x468499(_0x336026- -0x4d3,_0x470879);}this[_0x22c2d1(0x249,0x20c)]=_0x5bd80f;function _0x22c2d1(_0x6b612c,_0x12bd6f){return _0x338b3a(_0x12bd6f-0x51,_0x6b612c);}this['computing'][_0x1bd92f(0x2e,0x1d)]=_0x5bd80f,this['rendering'][_0x1bd92f(0xc,0x1d)]=_0x5bd80f;}[_0x468499(0x3fb,0x45a)](){function _0x3ee0dc(_0x50346f,_0x399632){return _0x338b3a(_0x50346f-0x2a1,_0x399632);}this['computing'][_0x3ee0dc(0x367,0x3c7)](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace[_0x468499(0x429,0x41a)],BaseLayer$1=mars3d__namespace[_0x338b3a(0x198,0x146)]['BaseLayer'],_0x4a7d05={};_0x4a7d05['min']=0x1,_0x4a7d05['max']=0x2;const _0x5aedcf={};function _0x338b3a(_0x2da97d,_0x9a0c62){return _0x4d4d(_0x2da97d- -0x56,_0x9a0c62);}_0x5aedcf[_0x468499(0x409,0x422)]=0x14,_0x5aedcf['max']=0x64;function _0x4d4d(_0x281d5d,_0x4f74ac){const _0x41711f=_0x4171();return _0x4d4d=function(_0x4d4d8c,_0x526e6a){_0x4d4d8c=_0x4d4d8c-0x119;let _0x52aaa5=_0x41711f[_0x4d4d8c];return _0x52aaa5;},_0x4d4d(_0x281d5d,_0x4f74ac);}const _0x2f029f={};_0x2f029f['particlesTextureSize']=0x64,_0x2f029f['fixedHeight']=0x0,_0x2f029f['lineWidth']=_0x4a7d05,_0x2f029f['lineLength']=_0x5aedcf,_0x2f029f['speedFactor']=0x1,_0x2f029f['dropRate']=0.003,_0x2f029f[_0x338b3a(0x10e,0xf3)]=0.001,_0x2f029f['colors']=[_0x468499(0x494,0x47c)],_0x2f029f['flipY']=![],_0x2f029f['dynamic']=!![];const DEF_OPTIONS=_0x2f029f;class WindLayer extends BaseLayer$1{constructor(_0x528529={}){_0x528529={...DEF_OPTIONS,..._0x528529},super(_0x528529),this['_setOptionsHook'](_0x528529,_0x528529);}get['layer'](){function _0x23b3d3(_0x1c86a4,_0x13e01f){return _0x468499(_0x1c86a4- -0x413,_0x13e01f);}return this[_0x23b3d3(0xc5,0x13b)];}get[_0x468499(0x4eb,0x530)](){function _0x159ae7(_0x300809,_0x26b596){return _0x338b3a(_0x300809- -0x268,_0x26b596);}return this['options'][_0x159ae7(-0xb2,-0x107)];}set['data'](_0xbd75e5){this['options']['data']=_0xbd75e5,this['setData'](_0xbd75e5);}get[_0x468499(0x3fa,0x3f3)](){function _0x543264(_0x9ed9c3,_0x3f22c0){return _0x338b3a(_0x9ed9c3- -0x347,_0x3f22c0);}return this[_0x543264(-0x1c8,-0x206)]['colors'];}set['colors'](_0x295f22){this[_0x20fa30(0x2b3,0x310)]['colors']=_0x295f22;const _0x288496={};function _0x20fa30(_0x29f8d5,_0x3e0e45){return _0x338b3a(_0x3e0e45-0x191,_0x29f8d5);}function _0x16db71(_0x135ce5,_0x400412){return _0x468499(_0x400412- -0x123,_0x135ce5);}_0x288496['colors']=_0x295f22,this[_0x20fa30(0x2d7,0x299)](this['options'],_0x288496);}['_showHook'](_0x11a591){function _0x591732(_0xbf9415,_0x596644){return _0x468499(_0x596644- -0x17d,_0xbf9415);}_0x11a591?this[_0x591732(0x301,0x34a)]():this['_removedHook']();}['_mountedHook'](){}['_addedHook'](){this[_0x2a4ee8(-0x25f,-0x20a)]=this[_0x2a4ee8(-0x180,-0x1b0)][_0x3042b5(0x3d8,0x3a3)],this[_0x3042b5(0x458,0x40c)]=this['_map'][_0x2a4ee8(-0x1f4,-0x1a1)];function _0x3042b5(_0x298dff,_0x3f40c2){return _0x468499(_0x3f40c2- -0xc7,_0x298dff);}this[_0x2a4ee8(-0x1b0,-0x1c0)]['data']&&this[_0x2a4ee8(-0x1f7,-0x1d1)](this['options']['data']);if(!this['windData']||!this['show'])return;this[_0x2a4ee8(-0x17e,-0x184)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0x3042b5(0x310,0x361)]},this[_0x2a4ee8(-0x204,-0x1de)](),this['particleSystem']=new WindParticleSystem(this['scene']['context'],this['windData'],this['options'],this[_0x3042b5(0x3b7,0x429)],this[_0x3042b5(0x3f5,0x3a3)]),this['primitives']=this[_0x2a4ee8(-0x228,-0x23b)][_0x3042b5(0x377,0x3a7)]();function _0x2a4ee8(_0x25bce9,_0x48efa3){return _0x468499(_0x48efa3- -0x674,_0x25bce9);}this['primitives']['forEach'](_0x30f876=>{function _0x191d4d(_0x1ca238,_0x2aa33b){return _0x3042b5(_0x1ca238,_0x2aa33b- -0x168);}this['scene'][_0x191d4d(0x29e,0x2a9)]['add'](_0x30f876);}),this[_0x3042b5(0x480,0x40c)]['percentageChanged']=0.01,this['camera'][_0x2a4ee8(-0x23a,-0x270)]['addEventListener'](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete'][_0x2a4ee8(-0x278,-0x25d)](this[_0x2a4ee8(-0x1d6,-0x1de)][_0x3042b5(0x33b,0x356)](this)),window[_0x3042b5(0x307,0x350)]('resize',this['updateViewerParameters'][_0x2a4ee8(-0x1e5,-0x257)](this));}['_removedHook'](){this['camera']['changed'][_0x40eabf(0x3da,0x41e)](this['updateViewerParameters'][_0x40eabf(0x310,0x360)](this)),this[_0x40eabf(0x35d,0x3c9)]['morphComplete']['removeEventListener'](this[_0x40eabf(0x389,0x3b0)]['bind'](this)),window['removeEventListener'](_0x5d8bd2(-0xaf,-0xb4),this['updateViewerParameters']['bind'](this));function _0x5d8bd2(_0x3256d3,_0x8a1595){return _0x338b3a(_0x3256d3- -0x198,_0x8a1595);}this[_0x5d8bd2(0xb,-0x11)]&&(this[_0x5d8bd2(0xb,0x52)]['forEach'](_0x2d2314=>{function _0x2725cc(_0x1a7372,_0x2c0e83){return _0x5d8bd2(_0x2c0e83-0x3cc,_0x1a7372);}this[_0x2725cc(0x3e2,0x369)]['primitives']['remove'](_0x2d2314);}),delete this['primitives']);function _0x40eabf(_0x4b38fd,_0x2dc571){return _0x338b3a(_0x4b38fd-0x228,_0x2dc571);}this[_0x5d8bd2(-0x94,-0xe3)]&&(this[_0x40eabf(0x32c,0x348)][_0x5d8bd2(-0xd2,-0xd3)](),delete this['particleSystem']);}['setData'](_0x10021d,_0x1f9def){function _0x346063(_0x4447a1,_0x212dcd){return _0x468499(_0x212dcd- -0x1b7,_0x4447a1);}this['windData']=this['processWindData'](_0x10021d);function _0x3599d5(_0x2c6d4d,_0x422f05){return _0x468499(_0x422f05- -0xb3,_0x2c6d4d);}if(_0x1f9def){this['_removedHook'](),this[_0x346063(0x345,0x310)]();return;}this['particleSystem']?(this[_0x346063(0x2e1,0x282)][_0x3599d5(0x39c,0x40e)][_0x3599d5(0x430,0x3e8)](this[_0x3599d5(0x378,0x3c9)]),this['scene']['requestRender']()):this['_addedHook']();}['_setOptionsHook'](_0x1602fa,_0x523fdd){function _0x4c5faa(_0x4480a6,_0x3d5957){return _0x468499(_0x3d5957- -0x156,_0x4480a6);}function _0x29cfbd(_0xf8b06a,_0x3c4577){return _0x338b3a(_0xf8b06a-0x8f,_0x3c4577);}this[_0x29cfbd(0x193,0x1fd)]&&(this['particleSystem'][_0x4c5faa(0x2d2,0x300)](_0x523fdd),this[_0x29cfbd(0x1c4,0x20c)][_0x29cfbd(0x210,0x1c7)]());}[_0x468499(0x4f5,0x477)](_0x213b5e){var _0x3900e9,_0xa59f4c;const _0x271b2f={..._0x213b5e},_0x233c58=_0x271b2f;!_0x233c58['height']&&_0x233c58['rows']&&(_0x233c58['height']=_0x233c58['rows']);function _0x33b6c9(_0x1ccb1e,_0x21f058){return _0x338b3a(_0x21f058-0x40b,_0x1ccb1e);}!_0x233c58['width']&&_0x233c58[_0x27f2e5(-0x26e,-0x24d)]&&(_0x233c58['width']=_0x233c58[_0x33b6c9(0x49b,0x4e2)]);function _0x27f2e5(_0x2ca909,_0x8f3fd3){return _0x468499(_0x8f3fd3- -0x659,_0x2ca909);}!_0x233c58['bounds']&&(_0x233c58['bounds']={'west':_0x233c58['xmin'],'south':_0x233c58[_0x27f2e5(-0xec,-0x162)],'east':_0x233c58[_0x33b6c9(0x4ae,0x522)],'north':_0x233c58[_0x27f2e5(-0x21c,-0x19b)]});if(!_0x233c58['u']){const _0x425351={};_0x425351[_0x33b6c9(0x61e,0x5b9)]=_0x213b5e[_0x33b6c9(0x578,0x4f9)],_0x425351['min']=_0x213b5e[_0x33b6c9(0x4cb,0x4cf)],_0x425351[_0x27f2e5(-0x1e6,-0x1ae)]=_0x213b5e['umax'],_0x233c58['u']=_0x425351;}if(!_0x233c58['v']){const _0x1cebe5={};_0x1cebe5['array']=_0x213b5e['vdata'],_0x1cebe5['min']=_0x213b5e[_0x33b6c9(0x561,0x5b5)],_0x1cebe5['max']=_0x213b5e['vmax'],_0x233c58['v']=_0x1cebe5;}if(((_0x3900e9=_0x233c58[_0x27f2e5(-0x1cf,-0x193)])===null||_0x3900e9===void 0x0?void 0x0:_0x3900e9['min'])===undefined||((_0xa59f4c=_0x233c58[_0x27f2e5(-0x19c,-0x193)])===null||_0xa59f4c===void 0x0?void 0x0:_0xa59f4c['max'])===undefined||_0x233c58['speed'][_0x27f2e5(-0x133,-0x176)]===undefined){const _0x3495b5={'array':new Float32Array(_0x233c58['u'][_0x27f2e5(-0x184,-0x176)]['length']),'min':Number[_0x33b6c9(0x52b,0x4d2)],'max':Number[_0x27f2e5(-0x19a,-0x1ea)]};for(let _0x1a0794=0x0;_0x1a0794<_0x233c58['u']['array']['length'];_0x1a0794++){_0x3495b5['array'][_0x1a0794]=Math[_0x33b6c9(0x547,0x5c9)](_0x233c58['u']['array'][_0x1a0794]*_0x233c58['u']['array'][_0x1a0794]+_0x233c58['v']['array'][_0x1a0794]*_0x233c58['v']['array'][_0x1a0794]),_0x3495b5['array'][_0x1a0794]!==0x0&&(_0x3495b5[_0x27f2e5(-0x218,-0x250)]=Math['min'](_0x3495b5['min'],_0x3495b5[_0x27f2e5(-0x137,-0x176)][_0x1a0794]),_0x3495b5[_0x27f2e5(-0x1af,-0x1ae)]=Math['max'](_0x3495b5['max'],_0x3495b5['array'][_0x1a0794]));}_0x233c58[_0x33b6c9(0x617,0x59c)]=_0x3495b5;}return _0x233c58;}[_0x468499(0x496,0x46a)](){var _0x5936cc;const _0x3b6ce3=this['scene'];if(!_0x3b6ce3)return;const _0x37694d=_0x3b6ce3[_0x2fc426(0x32a,0x3aa)],_0x1d29ea={};_0x1d29ea['x']=0x0;function _0xa51982(_0x26d821,_0x45b1a1){return _0x468499(_0x26d821- -0x3bb,_0x45b1a1);}_0x1d29ea['y']=0x0;const _0x4f8817={};_0x4f8817['x']=0x0,_0x4f8817['y']=_0x37694d[_0x2fc426(0x3ec,0x433)];const _0x381565={};_0x381565['x']=_0x37694d[_0x2fc426(0x333,0x345)],_0x381565['y']=0x0;const _0x31c639={};_0x31c639['x']=_0x37694d[_0xa51982(0x5e,0x2e)];function _0x2fc426(_0xbf1154,_0x19ac17){return _0x468499(_0xbf1154- -0xe6,_0x19ac17);}_0x31c639['y']=_0x37694d['clientHeight'];const _0x41bccc=[_0x1d29ea,_0x4f8817,_0x381565,_0x31c639];let _0x4bd497=0xb4,_0x521cc5=-0xb4,_0x263fda=0x5a,_0x462916=-0x5a,_0x52d53f=![];for(const _0x542ac1 of _0x41bccc){const _0x55e8b5=_0x3b6ce3['camera']['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x542ac1['x'],_0x542ac1['y']),_0x3b6ce3['globe'][_0x2fc426(0x415,0x461)]);if(!_0x55e8b5){_0x52d53f=!![];break;}const _0x34fe82=_0x3b6ce3['globe']['ellipsoid']['cartesianToCartographic'](_0x55e8b5),_0x225dc2=Cesium$1[_0xa51982(0xb9,0x104)]['toDegrees'](_0x34fe82['longitude']),_0x43f059=Cesium$1['Math'][_0x2fc426(0x3eb,0x3fb)](_0x34fe82['latitude']);_0x4bd497=Math['min'](_0x4bd497,_0x225dc2),_0x521cc5=Math['max'](_0x521cc5,_0x225dc2),_0x263fda=Math['min'](_0x263fda,_0x43f059),_0x462916=Math['max'](_0x462916,_0x43f059);}if(!_0x52d53f){const _0x2ccc63=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds']['west'],_0x4bd497),Math[_0xa51982(0x4e,0x33)](this[_0xa51982(0xc1,0x49)]['bounds'][_0x2fc426(0x37c,0x376)],_0x521cc5)),_0x2508a1=new Cesium$1['Cartesian2'](Math[_0xa51982(0xf0,0x14c)](this['windData']['bounds'][_0x2fc426(0x3d4,0x3c8)],_0x263fda),Math['min'](this['windData'][_0x2fc426(0x3ab,0x3f9)][_0xa51982(0x114,0x93)],_0x462916)),_0x4e56b8=(_0x2ccc63['y']-_0x2ccc63['x'])*0.05,_0x228ea4=(_0x2508a1['y']-_0x2508a1['x'])*0.05;_0x2ccc63['x']=Math[_0xa51982(0xf0,0x82)](this['windData'][_0x2fc426(0x3ab,0x3ee)]['west'],_0x2ccc63['x']-_0x4e56b8),_0x2ccc63['y']=Math['min'](this[_0x2fc426(0x396,0x346)][_0x2fc426(0x3ab,0x360)][_0x2fc426(0x37c,0x3a9)],_0x2ccc63['y']+_0x4e56b8),_0x2508a1['x']=Math[_0xa51982(0xf0,0x9c)](this['windData'][_0xa51982(0xd6,0x117)][_0x2fc426(0x3d4,0x3af)],_0x2508a1['x']-_0x228ea4),_0x2508a1['y']=Math[_0xa51982(0x4e,0x87)](this['windData'][_0xa51982(0xd6,0x10e)]['north'],_0x2508a1['y']+_0x228ea4),this['viewerParameters']['lonRange']=_0x2ccc63,this[_0x2fc426(0x40a,0x452)][_0x2fc426(0x413,0x39c)]=_0x2508a1;const _0x13acb6=this[_0xa51982(0xc1,0xae)]['bounds']['east']-this['windData'][_0x2fc426(0x3ab,0x3f4)]['west'],_0x56a0a7=this['windData']['bounds']['north']-this['windData']['bounds']['south'],_0x1e68da=(_0x2ccc63['y']-_0x2ccc63['x'])/_0x13acb6,_0x26a380=(_0x2508a1['y']-_0x2508a1['x'])/_0x56a0a7,_0x44309d=Math['min'](_0x1e68da,_0x26a380),_0x24bee8=0x3e8*_0x44309d;_0x24bee8>0x0&&(this['viewerParameters']['pixelSize']=Math['max'](0x0,Math['min'](0x3e8,_0x24bee8)));}this['viewerParameters'][_0xa51982(0x13b,0x18e)]=this[_0x2fc426(0x384,0x403)][_0xa51982(0x6d,0x8c)],(_0x5936cc=this['particleSystem'])===null||_0x5936cc===void 0x0||_0x5936cc['applyViewerParameters'](this['viewerParameters']);}[_0x468499(0x4e9,0x487)](_0x26fcdf,_0xc4d2be){const {bounds:_0x2882e3,width:_0x4520d8,height:_0x9fc195,u:_0x1989c1,v:_0x48827f,speed:_0x5967ff}=this[_0x7dc9aa(-0xf7,-0x12e)],{flipY:_0xcec48b}=this['options'];if(_0x26fcdf<_0x2882e3[_0x1321d8(0x1b4,0x177)]||_0x26fcdf>_0x2882e3['east']||_0xc4d2be<_0x2882e3[_0x7dc9aa(-0x150,-0xf0)]||_0xc4d2be>_0x2882e3['north'])return null;const _0x29a034=(_0x26fcdf-_0x2882e3[_0x7dc9aa(-0x20f,-0x1ad)])/(_0x2882e3['east']-_0x2882e3[_0x7dc9aa(-0x185,-0x1ad)])*(_0x4520d8-0x1);function _0x1321d8(_0x3a744b,_0x1312fa){return _0x338b3a(_0x1312fa-0xaf,_0x3a744b);}let _0x3bc9db=(_0xc4d2be-_0x2882e3['south'])/(_0x2882e3[_0x1321d8(0x22e,0x249)]-_0x2882e3['south'])*(_0x9fc195-0x1);_0xcec48b&&(_0x3bc9db=_0x9fc195-0x1-_0x3bc9db);const _0xfe388a=Math['floor'](_0x29a034),_0x3a8743=Math[_0x7dc9aa(-0x183,-0x126)](_0x3bc9db),_0x4c9c4e=Math['floor'](_0x29a034),_0x3dc6b5=Math[_0x7dc9aa(-0x202,-0x1a1)](_0x4c9c4e+0x1,_0x4520d8-0x1),_0x2819e0=Math[_0x1321d8(0x258,0x1fe)](_0x3bc9db),_0x2e4a88=Math[_0x7dc9aa(-0x14a,-0x1a1)](_0x2819e0+0x1,_0x9fc195-0x1),_0x5b2a09=_0x29a034-_0x4c9c4e,_0x51da99=_0x3bc9db-_0x2819e0,_0x2a8c60=_0x3a8743*_0x4520d8+_0xfe388a,_0x4e8b0c=_0x2819e0*_0x4520d8+_0x4c9c4e,_0x517f2d=_0x2819e0*_0x4520d8+_0x3dc6b5,_0x1f3602=_0x2e4a88*_0x4520d8+_0x4c9c4e,_0x1f451e=_0x2e4a88*_0x4520d8+_0x3dc6b5;function _0x7dc9aa(_0x503e82,_0x34fc0f){return _0x338b3a(_0x34fc0f- -0x275,_0x503e82);}const _0x5e2ed1=_0x1989c1['array'][_0x4e8b0c],_0x210712=_0x1989c1[_0x1321d8(0x28f,0x25d)][_0x517f2d],_0x13772f=_0x1989c1['array'][_0x1f3602],_0xc2774=_0x1989c1['array'][_0x1f451e],_0x512fef=(0x1-_0x5b2a09)*(0x1-_0x51da99)*_0x5e2ed1+_0x5b2a09*(0x1-_0x51da99)*_0x210712+(0x1-_0x5b2a09)*_0x51da99*_0x13772f+_0x5b2a09*_0x51da99*_0xc2774,_0x22643b=_0x48827f['array'][_0x4e8b0c],_0x72860a=_0x48827f[_0x1321d8(0x233,0x25d)][_0x517f2d],_0x2b70a7=_0x48827f['array'][_0x1f3602],_0x4a1081=_0x48827f['array'][_0x1f451e],_0x5cf39=(0x1-_0x5b2a09)*(0x1-_0x51da99)*_0x22643b+_0x5b2a09*(0x1-_0x51da99)*_0x72860a+(0x1-_0x5b2a09)*_0x51da99*_0x2b70a7+_0x5b2a09*_0x51da99*_0x4a1081,_0x1e480c=Math[_0x7dc9aa(-0xcf,-0xb7)](_0x512fef*_0x512fef+_0x5cf39*_0x5cf39),_0x566ac8={};_0x566ac8['u']=_0x1989c1[_0x1321d8(0x2a9,0x25d)][_0x2a8c60],_0x566ac8['v']=_0x48827f['array'][_0x2a8c60],_0x566ac8[_0x1321d8(0x2b3,0x240)]=_0x5967ff[_0x7dc9aa(-0xdb,-0xc7)][_0x2a8c60];const _0x1dda92={};_0x1dda92['u']=_0x512fef,_0x1dda92['v']=_0x5cf39,_0x1dda92['speed']=_0x1e480c;const _0x319a15={};return _0x319a15[_0x1321d8(0x213,0x264)]=_0x566ac8,_0x319a15['interpolated']=_0x1dda92,_0x319a15;}}mars3d__namespace['LayerUtil']['register'](_0x468499(0x43a,0x44c),WindLayer),mars3d__namespace[_0x338b3a(0x198,0x218)][_0x338b3a(0x143,0x187)]=WindLayer;class CanvasParticle{constructor(){this[_0x4516c3(0x1a7,0x1f1)]=null,this['lat']=null;function _0x1ad54a(_0x1fdaa7,_0x2e3a5d){return _0x468499(_0x2e3a5d- -0x341,_0x1fdaa7);}this[_0x1ad54a(0x11f,0x128)]=null,this['tlat']=null,this['age']=null;function _0x4516c3(_0x1239db,_0x5c9753){return _0x338b3a(_0x1239db-0x3d,_0x5c9753);}this[_0x1ad54a(0x192,0x185)]=null;}[_0x468499(0x3fb,0x476)](){for(const _0x3dcede in this){delete this[_0x3dcede];}}}class CanvasWindField{constructor(_0x2d70b6){this['setOptions'](_0x2d70b6);}get['speedRate'](){function _0x54711a(_0x187b01,_0x11021a){return _0x338b3a(_0x187b01- -0x220,_0x11021a);}return this[_0x54711a(-0x7b,-0x29)];}set['speedRate'](_0x537ea0){this[_0xc4507a(-0x182,-0x14f)]=(0x64-(_0x537ea0>0x63?0x63:_0x537ea0))*0x64;function _0xc4507a(_0x3832d4,_0x5ec2a5){return _0x468499(_0x5ec2a5- -0x629,_0x3832d4);}function _0x377e91(_0x4fe4a7,_0x53b49f){return _0x468499(_0x4fe4a7- -0x1bf,_0x53b49f);}this['_calc_speedRate']=[(this['xmax']-this[_0x377e91(0x23f,0x22b)])/this['_speedRate'],(this[_0xc4507a(-0x139,-0x16b)]-this[_0xc4507a(-0x1a7,-0x132)])/this[_0x377e91(0x31b,0x2ab)]];}get[_0x338b3a(0x11f,0x113)](){function _0x4f6003(_0x510275,_0x17b49b){return _0x338b3a(_0x510275-0x106,_0x17b49b);}return this[_0x4f6003(0x2af,0x25e)];}set['maxAge'](_0xf2a004){this['_maxAge']=_0xf2a004;}['setOptions'](_0x29b86f){this[_0x22240d(0x252,0x21c)]=_0x29b86f;function _0x29c0db(_0x1f7faa,_0x4ab2ac){return _0x338b3a(_0x4ab2ac- -0x1d7,_0x1f7faa);}function _0x22240d(_0x28fe88,_0x128100){return _0x468499(_0x128100- -0x298,_0x28fe88);}this['maxAge']=_0x29b86f['maxAge']||0x78,this['speedRate']=_0x29b86f['speedRate']||0x32,this['particles']=[];const _0x47d719=_0x29b86f['particlesNumber']||0x1000;for(let _0x4e46c0=0x0;_0x4e46c0<_0x47d719;_0x4e46c0++){const _0x5e1679=this[_0x29c0db(-0x161,-0xf0)](new CanvasParticle());this['particles'][_0x29c0db(-0xb3,-0xfa)](_0x5e1679);}}[_0x338b3a(0x13d,0xdb)](_0x232df2){this[_0x186969(0x28c,0x28b)]=_0x232df2['rows'],this[_0x4c8451(0x11b,0x146)]=_0x232df2[_0x186969(0x248,0x2a5)],this['xmin']=_0x232df2['xmin'],this['xmax']=_0x232df2['xmax'],this['ymin']=_0x232df2['ymin'],this['ymax']=_0x232df2[_0x186969(0x2fa,0x293)],this['grid']=[];const _0x29ae34=_0x232df2['udata'],_0x11e859=_0x232df2[_0x186969(0x234,0x2a1)];let _0x32c480=![];function _0x4c8451(_0x1450d6,_0x5ac93b){return _0x468499(_0x5ac93b- -0x2c6,_0x1450d6);}_0x29ae34['length']===this['rows']&&_0x29ae34[0x0][_0x186969(0x27e,0x27c)]===this[_0x4c8451(0x187,0x146)]&&(_0x32c480=!![]);function _0x186969(_0x221f1c,_0x530d7f){return _0x468499(_0x221f1c- -0x1c4,_0x530d7f);}let _0x5e74c7=0x0,_0x29a70c=null,_0x587d4a=null;for(let _0x2af130=0x0;_0x2af130<this[_0x186969(0x28c,0x2a4)];_0x2af130++){_0x29a70c=[];for(let _0x3ae74f=0x0;_0x3ae74f<this['cols'];_0x3ae74f++,_0x5e74c7++){_0x32c480?_0x587d4a=this['_calcUV'](_0x29ae34[_0x2af130][_0x3ae74f],_0x11e859[_0x2af130][_0x3ae74f]):_0x587d4a=this['_calcUV'](_0x29ae34[_0x5e74c7],_0x11e859[_0x5e74c7]),_0x29a70c['push'](_0x587d4a);}this['grid']['push'](_0x29a70c);}!this['options']['flipY']&&this['grid'][_0x186969(0x2e6,0x2b8)]();}['clear'](){delete this['rows'];function _0x1d8a66(_0x544933,_0x2436f4){return _0x338b3a(_0x2436f4-0x2d6,_0x544933);}delete this['cols'],delete this['xmin'],delete this['xmax'],delete this[_0x1d8a66(0x472,0x498)],delete this['ymax'],delete this['grid'],delete this['particles'];}['toGridXY'](_0x1ff1f8,_0x338d0c){function _0x553989(_0x12a5f5,_0x366329){return _0x468499(_0x12a5f5- -0x68,_0x366329);}const _0x498b02=(_0x1ff1f8-this['xmin'])/(this[_0x3865e1(-0x122,-0x149)]-this[_0x3865e1(-0x170,-0x127)])*(this['cols']-0x1),_0x478175=(this['ymax']-_0x338d0c)/(this[_0x553989(0x456,0x403)]-this['ymin'])*(this['rows']-0x1);function _0x3865e1(_0x53c8c6,_0x507497){return _0x468499(_0x53c8c6- -0x56e,_0x507497);}return[_0x498b02,_0x478175];}[_0x338b3a(0x16b,0x1a8)](_0x2ed65c,_0xafe69e){if(_0x2ed65c<0x0||_0x2ed65c>=this['cols']||_0xafe69e>=this[_0x5a6e50(0x20f,0x19d)])return[0x0,0x0,0x0];const _0x21c9cf=Math[_0xbc2e1b(0x316,0x313)](_0x2ed65c),_0x1b0b6a=Math['floor'](_0xafe69e);function _0xbc2e1b(_0x1c2371,_0x349e85){return _0x338b3a(_0x349e85-0x1c4,_0x1c2371);}if(_0x21c9cf===_0x2ed65c&&_0x1b0b6a===_0xafe69e)return this['grid'][_0xafe69e][_0x2ed65c];const _0x2acee0=_0x21c9cf+0x1,_0x12dd9a=_0x1b0b6a+0x1,_0x38f448=this[_0xbc2e1b(0x2d4,0x32f)](_0x21c9cf,_0x1b0b6a),_0x469aa0=this['getUVByXY'](_0x2acee0,_0x1b0b6a),_0x5d2c0e=this[_0xbc2e1b(0x3a1,0x32f)](_0x21c9cf,_0x12dd9a);function _0x5a6e50(_0x546c68,_0x4875be){return _0x468499(_0x546c68- -0x241,_0x4875be);}const _0x3b2d92=this['getUVByXY'](_0x2acee0,_0x12dd9a);let _0x57d3ad=null;try{_0x57d3ad=this['_bilinearInterpolation'](_0x2ed65c-_0x21c9cf,_0xafe69e-_0x1b0b6a,_0x38f448,_0x469aa0,_0x5d2c0e,_0x3b2d92);}catch(_0x729564){console['log'](_0x2ed65c,_0xafe69e);}return _0x57d3ad;}['_bilinearInterpolation'](_0x6be9df,_0x452d9a,_0x58dd47,_0x12f195,_0x137b7c,_0x3beeed){const _0x57c538=0x1-_0x6be9df,_0x47d126=0x1-_0x452d9a,_0x2fe44e=_0x57c538*_0x47d126,_0xc4899=_0x6be9df*_0x47d126,_0x2da7c9=_0x57c538*_0x452d9a,_0x24edd6=_0x6be9df*_0x452d9a,_0xed1fc8=_0x58dd47[0x0]*_0x2fe44e+_0x12f195[0x0]*_0xc4899+_0x137b7c[0x0]*_0x2da7c9+_0x3beeed[0x0]*_0x24edd6,_0x27c6e5=_0x58dd47[0x1]*_0x2fe44e+_0x12f195[0x1]*_0xc4899+_0x137b7c[0x1]*_0x2da7c9+_0x3beeed[0x1]*_0x24edd6;return this['_calcUV'](_0xed1fc8,_0x27c6e5);}['_calcUV'](_0xca7962,_0x2a5ce4){return[+_0xca7962,+_0x2a5ce4,Math['sqrt'](_0xca7962*_0xca7962+_0x2a5ce4*_0x2a5ce4)];}[_0x468499(0x4f8,0x48f)](_0x3617eb,_0x4f2646){if(!this['isInExtent'](_0x3617eb,_0x4f2646))return null;const _0x3431ce=this['toGridXY'](_0x3617eb,_0x4f2646),_0x5cb6ef=this['getUVByXY'](_0x3431ce[0x0],_0x3431ce[0x1]);return _0x5cb6ef;}['isInExtent'](_0x4a6bc2,_0x3658bd){function _0x226980(_0x27553f,_0x161a7e){return _0x338b3a(_0x27553f-0x2b2,_0x161a7e);}function _0x4afee7(_0x5116c3,_0x5cec75){return _0x468499(_0x5cec75-0x3a,_0x5116c3);}return _0x4a6bc2>=this['xmin']&&_0x4a6bc2<=this[_0x226980(0x3c9,0x3e5)]&&_0x3658bd>=this['ymin']&&_0x3658bd<=this[_0x4afee7(0x517,0x4f8)]?!![]:![];}['getRandomLatLng'](){const _0xc34c51=fRandomByfloat(this[_0x353321(0x88,0x8e)],this[_0x4b7d64(0x8c,0x3c)]),_0x410337=fRandomByfloat(this['ymin'],this['ymax']),_0x1ea322={};_0x1ea322['lat']=_0x410337;function _0x4b7d64(_0x18642e,_0x2aec33){return _0x468499(_0x2aec33- -0x410,_0x18642e);}function _0x353321(_0x5b5b0a,_0x207cbb){return _0x338b3a(_0x207cbb- -0x3b,_0x5b5b0a);}return _0x1ea322[_0x4b7d64(0x55,0x8f)]=_0xc34c51,_0x1ea322;}[_0x468499(0x461,0x425)](){let _0x56d3fc,_0x1b042b,_0x520de3;function _0x2c6cbd(_0x5ee029,_0x3c7b1b){return _0x338b3a(_0x3c7b1b- -0x33,_0x5ee029);}function _0x1d56d6(_0x4a576f,_0x467b85){return _0x338b3a(_0x467b85-0xdc,_0x4a576f);}for(let _0x1d53ec=0x0,_0x49408f=this[_0x1d56d6(0x279,0x234)]['length'];_0x1d53ec<_0x49408f;_0x1d53ec++){let _0x241779=this[_0x2c6cbd(0x10d,0x125)][_0x1d53ec];_0x241779[_0x1d56d6(0x1c3,0x1ba)]<=0x0&&(_0x241779=this['_randomParticle'](_0x241779));if(_0x241779['age']>0x0){const _0x3bcc4c=_0x241779['tlng'],_0x4e4753=_0x241779[_0x2c6cbd(0x108,0x151)];_0x520de3=this['getUVByPoint'](_0x3bcc4c,_0x4e4753),_0x520de3?(_0x56d3fc=_0x3bcc4c+this['_calc_speedRate'][0x0]*_0x520de3[0x0],_0x1b042b=_0x4e4753+this['_calc_speedRate'][0x1]*_0x520de3[0x1],_0x241779['lng']=_0x3bcc4c,_0x241779['lat']=_0x4e4753,_0x241779[_0x2c6cbd(0x8f,0x101)]=_0x56d3fc,_0x241779[_0x2c6cbd(0x11b,0x151)]=_0x1b042b,_0x241779[_0x2c6cbd(0xe0,0x15e)]=_0x520de3[0x2],_0x241779['age']--):_0x241779['age']=0x0;}}return this['particles'];}['_randomParticle'](_0x149e4f){let _0x396d38,_0x41abeb;for(let _0x13b4c8=0x0;_0x13b4c8<0x1e;_0x13b4c8++){_0x396d38=this['getRandomLatLng'](),_0x41abeb=this[_0x58bf54(0x2d5,0x2af)](_0x396d38['lng'],_0x396d38[_0x58bf54(0x23b,0x23f)]);if(_0x41abeb&&_0x41abeb[0x2]>0x0)break;}function _0x58bf54(_0x287025,_0x3e94c2){return _0x338b3a(_0x3e94c2-0xec,_0x287025);}if(!_0x41abeb)return _0x149e4f;const _0x48511c=_0x396d38['lng']+this['_calc_speedRate'][0x0]*_0x41abeb[0x0],_0x4f391d=_0x396d38['lat']+this['_calc_speedRate'][0x1]*_0x41abeb[0x1];_0x149e4f['lng']=_0x396d38['lng'],_0x149e4f['lat']=_0x396d38[_0x58bf54(0x1eb,0x23f)],_0x149e4f['tlng']=_0x48511c,_0x149e4f['tlat']=_0x4f391d;function _0x263ba9(_0x4de0a0,_0x3da2f7){return _0x338b3a(_0x3da2f7- -0x318,_0x4de0a0);}return _0x149e4f[_0x263ba9(-0x265,-0x23a)]=Math['round'](0xa+Math['random']()*this['maxAge']),_0x149e4f['speed']=_0x41abeb[0x2],_0x149e4f;}['destroy'](){for(const _0x245512 in this){delete this[_0x245512];}}}function fRandomByfloat(_0x29777c,_0x122f03){return _0x29777c+Math['random']()*(_0x122f03-_0x29777c);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x3a6eea={}){super(_0x3a6eea);function _0xc0fdf2(_0x23623e,_0x541879){return _0x338b3a(_0x23623e-0x2d9,_0x541879);}function _0x4cd13d(_0x34a6ea,_0x20f161){return _0x468499(_0x34a6ea- -0x32f,_0x20f161);}this['_setOptionsHook'](_0x3a6eea),this[_0xc0fdf2(0x3b4,0x40c)]=null,_0x3a6eea['colors']&&_0x3a6eea['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x4cd13d(0x18d,0x112))](_0x3a6eea));}['_setOptionsHook'](_0x4c7cf7,_0x41a529){this['frameTime']=0x3e8/(_0x4c7cf7[_0x49fc51(-0xc2,-0x99)]||0xa),this[_0x278cbe(0x2cd,0x24c)]=this[_0x278cbe(0x362,0x382)][_0x278cbe(0x389,0x3d4)]??![],this[_0x278cbe(0x37c,0x3ca)]=_0x4c7cf7[_0x278cbe(0x37c,0x302)]||_0x278cbe(0x387,0x329),this[_0x49fc51(-0x72,-0x85)]=_0x4c7cf7[_0x278cbe(0x308,0x2a4)]||0x1,this[_0x278cbe(0x345,0x399)]=_0x4c7cf7['fixedHeight']??0x0,this[_0x278cbe(0x2b3,0x2ad)]=_0x4c7cf7[_0x49fc51(-0xc7,-0x10e)]??![];function _0x278cbe(_0xdb1fb6,_0x2b41b1){return _0x338b3a(_0xdb1fb6-0x1e3,_0x2b41b1);}function _0x49fc51(_0x20f947,_0x4f037b){return _0x338b3a(_0x20f947- -0x197,_0x4f037b);}this[_0x49fc51(0x1a,0x6c)]&&this['windField'][_0x278cbe(0x315,0x2e8)](_0x4c7cf7);}get[_0x338b3a(0x198,0x1dd)](){return this['canvas'];}get['canvasWidth'](){function _0x45cf52(_0x6dc387,_0x1cc597){return _0x338b3a(_0x1cc597-0xf1,_0x6dc387);}function _0x5c9d67(_0x5c9100,_0x4be423){return _0x468499(_0x5c9100- -0x445,_0x4be423);}return this['_map'][_0x45cf52(0x272,0x226)][_0x5c9d67(-0x35,-0x1d)]['clientWidth'];}get['canvasHeight'](){function _0x2d9b3f(_0x134843,_0x1e1a56){return _0x468499(_0x1e1a56- -0x5ab,_0x134843);}function _0x461183(_0x8d80d,_0xdc6b9e){return _0x338b3a(_0x8d80d-0x391,_0xdc6b9e);}return this[_0x2d9b3f(-0x10f,-0xe7)]['scene'][_0x2d9b3f(-0x20b,-0x19b)]['clientHeight'];}get[_0x468499(0x4db,0x550)](){return this['_pointerEvents'];}set['pointerEvents'](_0xee4f40){this[_0x4b559f(0x2da,0x355)]=_0xee4f40;function _0x4b559f(_0x30eb9d,_0xbbc2e4){return _0x468499(_0xbbc2e4- -0xca,_0x30eb9d);}function _0x27959c(_0x305424,_0x306148){return _0x338b3a(_0x305424-0x37d,_0x306148);}if(!this['canvas'])return;_0xee4f40?this[_0x27959c(0x458,0x411)]['style'][_0x27959c(0x4f7,0x554)]=_0x27959c(0x486,0x484):this['canvas'][_0x27959c(0x48f,0x433)][_0x27959c(0x4f7,0x4e1)]='none';}get[_0x338b3a(0x126,0xdc)](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x32b5c1){function _0x3bdff7(_0x4ffd11,_0x25f131){return _0x468499(_0x4ffd11- -0x43c,_0x25f131);}function _0x34cbdd(_0x57fe79,_0x2f9789){return _0x338b3a(_0x2f9789- -0x2bd,_0x57fe79);}this[_0x34cbdd(-0xf3,-0x13e)]['particlesNumber']=_0x32b5c1,clearTimeout(this[_0x34cbdd(-0x1f8,-0x18d)]),this[_0x3bdff7(0x29,0x4c)]=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x338b3a(0x17e,0x1aa)](){return this['options']['speedRate'];}set['speedRate'](_0x16463c){this['options']['speedRate']=_0x16463c,this['windField']&&(this['windField']['speedRate']=_0x16463c);}get[_0x338b3a(0x11f,0xdb)](){return this['options']['maxAge'];}set['maxAge'](_0x4e0502){function _0x3fbe52(_0x951d37,_0x138b05){return _0x338b3a(_0x138b05- -0xac,_0x951d37);}function _0x294407(_0xfff430,_0x2255d4){return _0x338b3a(_0x2255d4- -0x36d,_0xfff430);}this[_0x294407(-0x1d2,-0x1ee)]['maxAge']=_0x4e0502,this[_0x3fbe52(0xd4,0x105)]&&(this[_0x3fbe52(0x17f,0x105)]['maxAge']=_0x4e0502);}get['data'](){return this['windData'];}set['data'](_0x4e89c8){function _0x11323d(_0x1cc388,_0x5a0174){return _0x468499(_0x1cc388- -0x3f0,_0x5a0174);}this[_0x11323d(0xb3,0x96)](_0x4e89c8);}get['rectangle'](){let _0x27d2f9=this[_0x321a3d(0x88,0xd7)]['xmin'],_0x47ebb1=this[_0x385a12(-0x15c,-0x16f)]['xmax'],_0x4e7d05=this[_0x321a3d(0xd4,0xd7)]['ymin'],_0x370420=this['windData']['ymax'];_0x47ebb1>=0x167&&_0x27d2f9===0x0&&(_0x27d2f9=-0xb4,_0x47ebb1=0xb4);_0x27d2f9=Math[_0x321a3d(0x16a,0x106)](_0x27d2f9,-0xb4),_0x47ebb1=Math[_0x321a3d(0xbc,0x64)](_0x47ebb1,0xb4);function _0x385a12(_0x556b73,_0x105268){return _0x338b3a(_0x556b73- -0x2a3,_0x105268);}_0x4e7d05=Math[_0x385a12(-0x12d,-0x158)](_0x4e7d05,-0x5a);function _0x321a3d(_0x4c8bd7,_0x3acb98){return _0x338b3a(_0x3acb98- -0x70,_0x4c8bd7);}return _0x370420=Math['min'](_0x370420,0x5a),Cesium['Rectangle']['fromDegrees'](_0x27d2f9,_0x4e7d05,_0x47ebb1,_0x370420);}['_showHook'](_0x4723cc){function _0x2575bd(_0x4cd8cc,_0x2b2aa7){return _0x338b3a(_0x4cd8cc- -0x13,_0x2b2aa7);}_0x4723cc?this['_addedHook']():(this['windData']&&(this['options']['data']=this[_0x2575bd(0x134,0x144)]),this['_removedHook']());}['_mountedHook'](){this['options']['worker']?this['initWorker']():this['windField']=new CanvasWindField(this['options']);}[_0x338b3a(0x192,0x19c)](){this[_0x2fe326(0x1aa,0x1ab)]=this['_createCanvas']();const _0x33a24e={};_0x33a24e['willReadFrequently']=!![],this['canvasContext']=this['canvas']['getContext']('2d',_0x33a24e);function _0x2fe326(_0x312ff0,_0x2c07fd){return _0x338b3a(_0x312ff0-0xcf,_0x2c07fd);}function _0x3676dd(_0x154062,_0x16d881){return _0x338b3a(_0x154062-0x162,_0x16d881);}this[_0x2fe326(0x1cc,0x200)](),this[_0x2fe326(0x24e,0x29f)]['data']&&this['setData'](this['options']['data']);}[_0x468499(0x48f,0x4ac)](){this['clear']();function _0x4b9601(_0x54ff9a,_0x21dbaf){return _0x468499(_0x54ff9a- -0x158,_0x21dbaf);}this[_0x4b9601(0x2e7,0x32e)]();function _0xf9ed09(_0x44870d,_0x594a2b){return _0x338b3a(_0x594a2b-0x124,_0x44870d);}this['canvas']&&(this['_map']['container']['removeChild'](this[_0xf9ed09(0x192,0x1ff)]),delete this[_0xf9ed09(0x22d,0x1ff)]);}[_0x468499(0x416,0x41b)](){function _0x49b8fc(_0x144108,_0x21221f){return _0x338b3a(_0x21221f- -0x1c1,_0x144108);}const _0x4a6be8=mars3d__namespace[_0x31d95c(0x53d,0x528)][_0x49b8fc(-0xc9,-0xd2)](_0x31d95c(0x4d4,0x4d3),_0x31d95c(0x53a,0x51c),this['_map']['container']);_0x4a6be8['style']['position']=_0x31d95c(0x58f,0x5a4),_0x4a6be8[_0x49b8fc(-0x125,-0xaf)]['top']=_0x31d95c(0x561,0x56a),_0x4a6be8[_0x31d95c(0x50b,0x53d)]['left']='0px',_0x4a6be8[_0x31d95c(0x50b,0x526)][_0x49b8fc(0x27,-0x52)]=this['_map']['scene']['canvas'][_0x49b8fc(-0x79,-0xdd)]+'px',_0x4a6be8[_0x49b8fc(-0x101,-0xaf)]['height']=this['_map'][_0x31d95c(0x52e,0x5ae)]['canvas'][_0x49b8fc(-0x7b,-0x24)]+'px',_0x4a6be8['style']['pointerEvents']=this['_pointerEvents']?_0x31d95c(0x5a4,0x58b):'none';function _0x31d95c(_0xc4ea79,_0x2298d7){return _0x338b3a(_0xc4ea79-0x3f9,_0x2298d7);}return _0x4a6be8[_0x49b8fc(-0x53,-0xaf)]['zIndex']=this[_0x31d95c(0x578,0x5f0)]['zIndex']??0x9,_0x4a6be8['width']=this[_0x49b8fc(0x31,-0x32)][_0x31d95c(0x52e,0x4f3)]['canvas']['clientWidth'],_0x4a6be8['height']=this[_0x49b8fc(-0x86,-0x32)]['scene']['canvas'][_0x49b8fc(-0x65,-0x24)],_0x4a6be8;}['resize'](){function _0xfe773f(_0x5cd253,_0x2b634f){return _0x338b3a(_0x5cd253- -0x1a3,_0x2b634f);}function _0x4343af(_0x46d685,_0x494c03){return _0x468499(_0x46d685- -0x26a,_0x494c03);}this['canvas']&&(this['canvas']['style']['width']=this[_0xfe773f(-0x14,0x2)]['scene']['canvas'][_0xfe773f(-0xbf,-0xf8)]+'px',this[_0x4343af(0x1a6,0x219)]['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this['canvas']['width']=this['_map'][_0xfe773f(-0x6e,-0x4e)]['canvas']['clientWidth'],this['canvas'][_0x4343af(0x282,0x23c)]=this[_0xfe773f(-0x14,0x6e)]['scene']['canvas']['clientHeight']);}[_0x468499(0x432,0x3bc)](){function _0x306395(_0x4177d7,_0x47b5a9){return _0x468499(_0x4177d7- -0x51d,_0x47b5a9);}const _0xf1b911=this;let _0x12bed5=Date[_0x2266d9(-0xfa,-0xa2)]();(function _0x28a344(){function _0x43482f(_0x19839a,_0x1eff89){return _0x2266d9(_0x19839a,_0x1eff89- -0x127);}function _0x3d5bcf(_0x37ff2d,_0x357c6a){return _0x2266d9(_0x357c6a,_0x37ff2d-0x516);}if(_0xf1b911['isDestroy'])return;_0xf1b911['_animateFrame']=window[_0x3d5bcf(0x449,0x418)](_0x28a344);if(_0xf1b911['show']&&_0xf1b911[_0x3d5bcf(0x4fb,0x558)]){const _0x42e387=Date['now'](),_0x48777b=_0x42e387-_0x12bed5;_0x48777b>_0xf1b911['frameTime']&&(_0x12bed5=_0x42e387-_0x48777b%_0xf1b911['frameTime'],_0xf1b911['update']());}}(),window['addEventListener']('resize',this['resize'][_0x2266d9(-0x73,-0xe4)](this),![]));function _0x2266d9(_0x4e5204,_0x542135){return _0x338b3a(_0x542135- -0x1cc,_0x4e5204);}this[_0x2266d9(-0xd0,-0xa1)]=![],this['mouse_move']=![],this['options']['mouseHidden']&&(this[_0x306395(-0x59,-0x8d)]['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x306395(-0x59,-0x31)]['on'](mars3d__namespace[_0x2266d9(0xb,-0x76)]['mouseDown'],this['_onMouseDownEvent'],this),this[_0x306395(-0x59,0x7)]['on'](mars3d__namespace[_0x2266d9(-0x24,-0x76)][_0x306395(-0x8b,-0x7b)],this['_onMouseUpEvent'],this));}[_0x468499(0x43f,0x3e1)](){window['cancelAnimationFrame'](this['_animateFrame']);function _0x446d38(_0x6b635b,_0x5e8e49){return _0x468499(_0x5e8e49- -0x10a,_0x6b635b);}function _0x5b5d7b(_0x2f27a6,_0x1d40c8){return _0x468499(_0x1d40c8- -0xcc,_0x2f27a6);}delete this['_animateFrame'],window['removeEventListener']('resize',this['resize']),this[_0x5b5d7b(0x3b4,0x3e8)]['mouseHidden']&&(this[_0x5b5d7b(0x3bd,0x3f8)]['off'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x5b5d7b(0x40f,0x3f8)][_0x446d38(0x379,0x3da)](mars3d__namespace[_0x5b5d7b(0x385,0x3bf)]['mouseDown'],this['_onMouseDownEvent'],this),this['_map'][_0x446d38(0x39c,0x3da)](mars3d__namespace[_0x446d38(0x329,0x381)][_0x446d38(0x402,0x388)],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x5b5d7b(0x3a6,0x335)],this));}[_0x338b3a(0x151,0x19c)](_0x16560e){clearTimeout(this['refreshTimer']);if(!this[_0x514567(-0x16b,-0x107)]||!this['canvas'])return;this[_0x400c79(0x202,0x18d)][_0x514567(-0x158,-0x158)]['visibility']=_0x400c79(0x27e,0x23e);function _0x514567(_0x320289,_0xccccec){return _0x338b3a(_0xccccec- -0x26a,_0x320289);}function _0x400c79(_0x280430,_0x4478ac){return _0x468499(_0x280430- -0x20e,_0x4478ac);}this['refreshTimer']=setTimeout(()=>{function _0x349f30(_0x963d4,_0x28f12d){return _0x400c79(_0x963d4- -0x331,_0x28f12d);}if(!this['show'])return;this['redraw'](),this['canvas']['style'][_0x349f30(-0xea,-0x132)]='visible';},0xc8);}[_0x468499(0x4a1,0x49a)](_0x583b04){function _0x5b18ac(_0xa2f108,_0x468825){return _0x338b3a(_0xa2f108-0x384,_0x468825);}function _0xa108b0(_0x6520e8,_0x41d400){return _0x338b3a(_0x41d400- -0x17a,_0x6520e8);}this['mouse_down']=!![],this[_0xa108b0(0x5e,0x15)]['off'](mars3d__namespace['EventType'][_0x5b18ac(0x49c,0x47f)],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace[_0x5b18ac(0x4da,0x46b)][_0x5b18ac(0x49c,0x4a9)],this[_0x5b18ac(0x450,0x498)],this);}['_onMouseMoveEvent'](_0x1df2a1){function _0x50496e(_0x521d09,_0x396361){return _0x338b3a(_0x396361-0x3ce,_0x521d09);}function _0x1a47a1(_0x34e3e0,_0x553c76){return _0x468499(_0x34e3e0- -0xc6,_0x553c76);}if(!this['show']||!this['canvas'])return;this[_0x50496e(0x48b,0x4f9)]&&(this['canvas'][_0x1a47a1(0x381,0x374)][_0x1a47a1(0x38f,0x3b7)]='hidden',this[_0x50496e(0x4e0,0x519)]=!![]);}[_0x468499(0x46b,0x4ad)](_0x479c88){function _0x45c0f9(_0x5f53e6,_0x3c70df){return _0x338b3a(_0x3c70df- -0x175,_0x5f53e6);}function _0x3a8765(_0x532982,_0x58b46a){return _0x468499(_0x58b46a- -0xc0,_0x532982);}if(!this['show']||!this['canvas'])return;this[_0x45c0f9(0x3e,0x1a)]['off'](mars3d__namespace[_0x3a8765(0x415,0x3cb)][_0x3a8765(0x322,0x38d)],this['_onMouseMoveEvent'],this),this['mouse_down']&&this['mouse_move']&&this['redraw'](),this[_0x3a8765(0x347,0x350)][_0x45c0f9(-0x63,-0x63)]['visibility']='visible',this[_0x3a8765(0x413,0x3a0)]=![],this['mouse_move']=![];}['setData'](_0x3c99a5){this[_0x4f67e3(0x252,0x277)](),this['windData']=_0x3c99a5,this['windField']['setDate'](_0x3c99a5);function _0x4f67e3(_0x3bc525,_0x10027a){return _0x338b3a(_0x3bc525-0x159,_0x10027a);}this['redraw']();}['redraw'](){if(!this[_0x762ae4(-0x1ec,-0x241)])return;function _0x762ae4(_0x976905,_0x56ccd1){return _0x338b3a(_0x976905- -0x34f,_0x56ccd1);}this[_0x762ae4(-0x19e,-0x154)]['setOptions'](this['options']);function _0x386790(_0x321433,_0x3cb244){return _0x468499(_0x3cb244- -0x266,_0x321433);}this['update']();}['update'](){if(this[_0x1f9717(0x44,0x37)])return;this['_updateIng']=!![];function _0x1f9717(_0x15fdda,_0x2f24fc){return _0x338b3a(_0x2f24fc- -0xcb,_0x15fdda);}if(this['worker'])this[_0x1f9717(0x9c,0xe6)][_0x1f9717(0x91,0x2b)]();else{const _0x4d26b6=this[_0x1f9717(0xe2,0xe6)]['getParticles']();this['_drawLines'](_0x4d26b6);}function _0x4cf93c(_0x184e54,_0x1e2a4e){return _0x468499(_0x184e54- -0x588,_0x1e2a4e);}this[_0x4cf93c(-0x151,-0x16b)]=![];}[_0x338b3a(0xec,0x165)](_0x286ba9){this['_canvasParticles']=_0x286ba9,this[_0x2f769e(0x3f2,0x428)]['globalCompositeOperation']='destination-in';function _0x4b6193(_0x316020,_0x48e6f0){return _0x468499(_0x316020- -0x654,_0x48e6f0);}this['canvasContext'][_0x2f769e(0x401,0x3f8)](0x0,0x0,this['canvasWidth'],this['canvasHeight']);function _0x2f769e(_0x44604f,_0x3fbfbe){return _0x468499(_0x44604f- -0x7e,_0x3fbfbe);}this['canvasContext']['globalCompositeOperation']='lighter',this[_0x4b6193(-0x1e4,-0x1d3)][_0x2f769e(0x3e6,0x3dc)]=0.9;const _0x3f1017=this[_0x4b6193(-0x190,-0x167)][_0x4b6193(-0x1ea,-0x178)][_0x2f769e(0x3aa,0x36c)]!==Cesium['SceneMode']['SCENE3D'],_0x58f1d2=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x1a2b7c=0x0,_0x473e95=_0x286ba9['length'];_0x1a2b7c<_0x473e95;_0x1a2b7c++){const _0x38bb4a=_0x286ba9[_0x1a2b7c],_0xd8f419=this[_0x2f769e(0x385,0x3ff)](_0x38bb4a,_0x38bb4a['lng'],_0x38bb4a['lat'],_0x38bb4a[_0x4b6193(-0x1ae,-0x1d5)]),_0x50fdd2=this['_tomap'](_0x38bb4a,_0x38bb4a['tlng'],_0x38bb4a[_0x2f769e(0x43b,0x42d)],_0x38bb4a['talt']);if(!_0xd8f419||!_0x50fdd2)continue;if(_0x3f1017&&Math['abs'](_0xd8f419[0x0]-_0x50fdd2[0x0])>=_0x58f1d2)continue;this[_0x2f769e(0x3f2,0x474)][_0x4b6193(-0x227,-0x1f1)](),this[_0x2f769e(0x3f2,0x406)]['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x4b6193(-0x23f,-0x279)]['getColor'](_0x38bb4a['speed']),this[_0x2f769e(0x3f2,0x380)][_0x2f769e(0x3be,0x417)](_0xd8f419[0x0],_0xd8f419[0x1]),this['canvasContext']['lineTo'](_0x50fdd2[0x0],_0x50fdd2[0x1]),this['canvasContext']['stroke']();}else{this['canvasContext'][_0x4b6193(-0x227,-0x26a)](),this[_0x4b6193(-0x1e4,-0x1ff)][_0x4b6193(-0x1fa,-0x244)]=this['lineWidth'],this[_0x4b6193(-0x1e4,-0x20a)][_0x4b6193(-0x16f,-0x131)]=this['color'];for(let _0x272379=0x0,_0x2a94ab=_0x286ba9[_0x2f769e(0x3c4,0x3f4)];_0x272379<_0x2a94ab;_0x272379++){const _0x3e0683=_0x286ba9[_0x272379],_0x4e58d5=this[_0x2f769e(0x385,0x3df)](_0x3e0683,_0x3e0683[_0x2f769e(0x421,0x3e1)],_0x3e0683[_0x4b6193(-0x1cc,-0x24c)],_0x3e0683[_0x4b6193(-0x1ae,-0x162)]),_0x8d1772=this['_tomap'](_0x3e0683,_0x3e0683['tlng'],_0x3e0683['tlat'],_0x3e0683['talt']);if(!_0x4e58d5||!_0x8d1772)continue;if(_0x3f1017&&Math['abs'](_0x4e58d5[0x0]-_0x8d1772[0x0])>=_0x58f1d2)continue;this['canvasContext'][_0x2f769e(0x3be,0x42d)](_0x4e58d5[0x0],_0x4e58d5[0x1]),this['canvasContext']['lineTo'](_0x8d1772[0x0],_0x8d1772[0x1]);}this['canvasContext']['stroke']();}}[_0x468499(0x403,0x484)](_0x227f11,_0x3370cc,_0xdfd6cc,_0x1b2db5){const _0x3a9f19=Cesium['Cartesian3'][_0x57fc11(0x7c,0x3e)](_0x3370cc,_0xdfd6cc,_0x1b2db5??this[_0xd17ff7(0x30f,0x302)]),_0x40587b=this['_map']['scene'];if(_0x40587b['mode']===Cesium['SceneMode']['SCENE3D']){const _0x2a2ee3=new Cesium['EllipsoidalOccluder'](_0x40587b['globe']['ellipsoid'],_0x40587b['camera']['positionWC']),_0x32910d=_0x2a2ee3['isPointVisible'](_0x3a9f19);if(!_0x32910d)return _0x227f11['age']=0x0,null;}function _0x57fc11(_0x35528b,_0x1903c3){return _0x338b3a(_0x35528b- -0x57,_0x1903c3);}function _0xd17ff7(_0x320c28,_0x20d796){return _0x338b3a(_0x320c28-0x1ad,_0x20d796);}const _0x50bfc6=mars3d__namespace[_0xd17ff7(0x2e5,0x344)]['toWindowCoordinates'](this[_0x57fc11(0x138,0x1a4)]['scene'],_0x3a9f19);return _0x50bfc6?[_0x50bfc6['x'],_0x50bfc6['y']]:null;}[_0x338b3a(0xf9,0xd0)](){this['windField']['clear'](),delete this['windData'];}['initWorker'](){this['worker']=new Worker(this['options'][_0x59666e(0x11f,0x182)]),this['worker']['onmessage']=_0x56882b=>{this['_drawLines'](_0x56882b['data']['particles']),this['_updateIng2']=![];};function _0x59666e(_0x25b105,_0x15011a){return _0x338b3a(_0x15011a-0x9,_0x25b105);}this['windField']={'init':_0x53556f=>{const _0x263284={};_0x263284[_0x34f2de(-0x64,-0x34)]=_0x34f2de(0x82,0x47);function _0x34f2de(_0x4d9a75,_0x2c4221){return _0x59666e(_0x4d9a75,_0x2c4221- -0x10e);}_0x263284['options']=_0x53556f;function _0xb7b8c3(_0x3163d6,_0x5deaf7){return _0x59666e(_0x5deaf7,_0x3163d6-0x54);}this[_0x34f2de(0xb9,0x74)]['postMessage'](_0x263284);},'setOptions':_0x28393e=>{const _0x27c21e={};_0x27c21e['type']='setOptions',_0x27c21e[_0x49c0b3(0x390,0x310)]=_0x28393e;function _0x49c0b3(_0x432957,_0x4c2d41){return _0x59666e(_0x432957,_0x4c2d41-0x188);}this['worker']['postMessage'](_0x27c21e);},'setDate':_0x18aff3=>{const _0x2e7933={};_0x2e7933['type']=_0x12b4a0(0x254,0x2bf);function _0x1abf0f(_0x187f3c,_0x94e361){return _0x59666e(_0x94e361,_0x187f3c-0xdb);}_0x2e7933['data']=_0x18aff3;function _0x12b4a0(_0x77e38e,_0xd7ef74){return _0x59666e(_0xd7ef74,_0x77e38e-0x10e);}this['worker'][_0x12b4a0(0x2ae,0x323)](_0x2e7933);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];function _0x5f1d40(_0x2677cf,_0x12b058){return _0x59666e(_0x2677cf,_0x12b058-0xef);}const _0x27d345={};function _0x4aa667(_0x11d811,_0x5bea36){return _0x59666e(_0x5bea36,_0x11d811- -0x356);}_0x27d345[_0x5f1d40(0x151,0x1c9)]=_0x5f1d40(0x250,0x1ee),this['worker'][_0x4aa667(-0x1b6,-0x1b7)](_0x27d345);},'clear':()=>{function _0x2b0a98(_0x5a009e,_0x2ec4be){return _0x59666e(_0x2ec4be,_0x5a009e- -0x210);}const _0x1c0494={};_0x1c0494['type']=_0x1c014c(-0x11f,-0x164);function _0x1c014c(_0x54f877,_0x257a07){return _0x59666e(_0x54f877,_0x257a07- -0x266);}this[_0x2b0a98(-0x8e,-0x1e)][_0x1c014c(-0x5e,-0xc6)](_0x1c0494);}},this['windField']['init'](this['options']);}}mars3d__namespace['LayerUtil']['register'](_0x338b3a(0x110,0xcf),CanvasWindLayer),mars3d__namespace[_0x338b3a(0x198,0x198)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x468499(0x478,0x415)]=WindLayer,exports['WindUtil']=WindUtil;const _0x4b3f87={};_0x4b3f87['value']=!![],Object[_0x468499(0x4d6,0x538)](exports,'__esModule',_0x4b3f87);
}));
