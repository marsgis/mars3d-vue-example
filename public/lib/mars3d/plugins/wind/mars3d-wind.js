/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.10
 * 编译日期：2025-12-07 17:43
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x2979ea,_0x1e5e7d){const _0x254dc8=_0x2979ea();function _0x20d592(_0xd6e69b,_0xafb565){return _0x4243(_0xd6e69b- -0x83,_0xafb565);}function _0x1d18cb(_0x146bf7,_0x58f988){return _0x4243(_0x58f988- -0x5d,_0x146bf7);}while(!![]){try{const _0xf1fa53=parseInt(_0x1d18cb(0x17f,0x128))/0x1+parseInt(_0x20d592(0x153,0x131))/0x2*(parseInt(_0x20d592(0xdc,0x105))/0x3)+-parseInt(_0x20d592(0xb6,0xdd))/0x4*(parseInt(_0x1d18cb(0x11b,0xe5))/0x5)+parseInt(_0x1d18cb(0x151,0x152))/0x6+parseInt(_0x20d592(0xbc,0x72))/0x7+-parseInt(_0x20d592(0xa5,0x75))/0x8*(-parseInt(_0x20d592(0x157,0x127))/0x9)+-parseInt(_0x1d18cb(0x43,0xbc))/0xa;if(_0xf1fa53===_0x1e5e7d)break;else _0x254dc8['push'](_0x254dc8['shift']());}catch(_0x5bca5d){_0x254dc8['push'](_0x254dc8['shift']());}}}(_0x3287,0xbfca2));function _interopNamespace(_0x5530b6){if(_0x5530b6&&_0x5530b6['__esModule'])return _0x5530b6;function _0x3e4983(_0x133f27,_0x40da65){return _0x4243(_0x40da65- -0x2f7,_0x133f27);}var _0x3f79c0=Object[_0x3e4983(-0x136,-0x126)](null);_0x5530b6&&Object[_0x3e4983(-0x159,-0xfb)](_0x5530b6)['forEach'](function(_0x211ce7){if(_0x211ce7!=='default'){var _0x44661a=Object['getOwnPropertyDescriptor'](_0x5530b6,_0x211ce7);Object['defineProperty'](_0x3f79c0,_0x211ce7,_0x44661a['get']?_0x44661a:{'enumerable':!![],'get':function(){return _0x5530b6[_0x211ce7];}});}});_0x3f79c0['default']=_0x5530b6;function _0x588b57(_0x3752c1,_0x5f351d){return _0x4243(_0x3752c1- -0xf2,_0x5f351d);}return _0x3f79c0;}function _0x3287(){const _0x120e3c=['talt','70SVnnGX','colors','layer','latRange','resize','uniformMap','xmax','frameRate','ymin','defineProperty','modelMatrix','getParticles','lineTo','_updateIng2','_updateIng','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a','getU','frameTime','Draw','getV','none','wrapT','Compute','windField','primitives','domain','tlng','top','updateWindData','150492kflgeL','prototype','bindEvent','reCreateWindTextures','beginPath','MIN_VALUE','min\x20is\x20undefined,\x20calculate\x20min','age','blending','rgb(206,255,255)','fill','vertexShaderSource','createParticlesTextures','LayerUtil','DEPTH_COMPONENT','tlat','fragmentShaderSource','EventType','camera','Unknown\x20command\x20type','toWindowCoordinates','type','changed','dropRate','flipY','forEach','clearFramebuffers','clientWidth','canvasWind','lat','setData','quietPeriod','magnificationFilter','clearCommand','attributeLocations','green','processWindData','setOptions','911055cxQTlp','pixelSize','push','pow','original','value','speedFactor','_calcUV','bind','particlesSpeed','min','lng','isDestroyed','number','warn','calculateSpeed','BaseLayer','height','Cesium','initFrameRate','getSegmentDrawVertexShader','south','getPostProcessingPositionShader','east','getDataAtLonLat','ellipsoid','red','_showHook','_canrefresh','_onMapWhellEvent','_addedHook','frameRateMonitor','unbindEvent','viewerParameters','rows','array','mode','pixelFormat','createColorTableTexture','_removedHook','textures','OPAQUE','2170056NpKNUf','getCalculateSpeedShader','SceneMode','canvas','sources','clientHeight','Math','north','_calc_speedRate','CLAMP_TO_EDGE','getSegmentDrawFragmentShader','udata','WindLayer','LINEAR','_animateFrame','ONE_MINUS_SRC_ALPHA','zIndex','values','frameRateAdjustment','colorTable','lighter','_map','windTextures','currentParticlesPosition','speed','clear','onParticlesTextureSizeChange','isPointVisible','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','globalAlpha','toRadians','context','fromCache','width','create','commandType','_bilinearInterpolation','postProcessingPosition','_tomap','4JxBpLS','canvasHeight','maxAge','particlesTextures','3955329UOSaOh','minificationFilter','isInExtent','particleSystem','particlesNumber','computing','CanvasWindField','speedRate','random','_randomParticle','blendFuncDestination','xmin','SRC_ALPHA','Cartesian2','updatePosition','blendEquation','west','color','max','getRandomLatLng','segmentsColor','_drawLines','off','visible','length','windData','WindUtil','canvasContext','ymax','destroyParticlesTextures','rectangle','FUNC_ADD','options','drawingBufferWidth','keys','normal','getPrimitives','container','FLOAT','createSegmentsGeometry','cartesianToCartographic','particlesTextureSize','pixelDatatype','bounds','framebuffer','updateOptions','mouseHidden','error','wrapS','floor','update','fixedHeight','willReadFrequently','data','rawRenderState','particles','applyViewerParameters','fromGeometry','createWindTextures','commandToExecute','_setOptionsHook','segments','getUVByXY','log','componentDatatype','_onMouseMoveEvent','left','nextParticlesPosition','_maxAge','mouseMove','framebuffers','_colorRamp','owner','8461100CpVKJl','cols','call','toDegrees','slice','abs','TRIANGLES','_mountedHook','style','preExecute','visibility','canvasWidth','sceneMode','worker','getUVByPoint','8CVJTAG','rendering','shaderProgram','DomUtil','mouse_move','mouse_down','show','Log','segmentsDepth','previousParticlesPosition','scene','lineWidth','updateViewerParameters','onColorTableChange','geometry','createComputingPrimitives','destroy','52424cCdjIj','mouseUp','NEAREST','postMessage','logInfo','outputTexture','18368OtIBBr','lastFramesPerSecond'];_0x3287=function(){return _0x120e3c;};return _0x3287();}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x33b0e8,_0xb33a22){const _0x20545b=_0x33b0e8*Math['cos'](Cesium$2['Math'][_0x1665f0(-0x13c,-0x17a)](_0xb33a22));function _0x1665f0(_0x12f880,_0x2636a6){return _0x4243(_0x2636a6- -0x347,_0x12f880);}return _0x20545b;}function getV(_0x5c42a8,_0x57bc07){function _0x5dc234(_0x1d5e30,_0x5d77ce){return _0x4243(_0x1d5e30- -0x225,_0x5d77ce);}const _0x308221=_0x5c42a8*Math['sin'](Cesium$2[_0x5dc234(-0x70,-0xb6)]['toRadians'](_0x57bc07));return _0x308221;}function getSpeed(_0x2ac750,_0x2102ff){function _0x210b7b(_0x58cca7,_0x45f43a){return _0x4243(_0x45f43a-0x262,_0x58cca7);}const _0x4f8813=Math['sqrt'](Math['pow'](_0x2ac750,0x2)+Math[_0x210b7b(0x38b,0x3ea)](_0x2102ff,0x2));return _0x4f8813;}function getDirection(_0xf64576,_0x3ae07a){let _0x17bb3d=Cesium$2['Math']['toDegrees'](Math['atan2'](_0x3ae07a,_0xf64576));return _0x17bb3d+=_0x17bb3d<0x0?0x168:0x0,_0x17bb3d;}const _0x9fa60d={};_0x9fa60d['__proto__']=null,_0x9fa60d[_0x5b619d(0x1dd,0x18e)]=getU,_0x9fa60d[_0x5661df(0x27e,0x267)]=getV,_0x9fa60d['getSpeed']=getSpeed,_0x9fa60d['getDirection']=getDirection;function _0x4243(_0x117c9a,_0x2163ec){const _0x3287d9=_0x3287();return _0x4243=function(_0x424302,_0x439cdc){_0x424302=_0x424302-0xf3;let _0x4eeb1e=_0x3287d9[_0x424302];return _0x4eeb1e;},_0x4243(_0x117c9a,_0x2163ec);}var WindUtil=_0x9fa60d,updatePositionShader=_0x5661df(0x283,0x263),calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader=_0x5b619d(0x256,0x2b3);const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x5b619d(0x222,0x1f7)];class ShaderManager{static[_0x5661df(0x33a,0x2c2)](){const _0x4077c3={};_0x4077c3[_0x34ae0d(0x125,0x121)]=[calculateSpeedShader];function _0x34ae0d(_0x625ced,_0x336da0){return _0x5b619d(_0x625ced- -0x119,_0x336da0);}return new ShaderSource$1(_0x4077c3);}static['getUpdatePositionShader'](){const _0x185630={};return _0x185630['sources']=[updatePositionShader],new ShaderSource$1(_0x185630);}static[_0x5661df(0x281,0x2ab)](){const _0x387026={};return _0x387026['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x387026);}static[_0x5b619d(0x244,0x226)](){const _0x4ebab7={};function _0x350e03(_0x1e60bd,_0x2bd3f2){return _0x5661df(_0x2bd3f2,_0x1e60bd- -0x165);}return _0x4ebab7[_0x350e03(0x160,0x1e5)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x4ebab7);}static[_0x5b619d(0x226,0x1c5)](){const _0xfcd30d={};return _0xfcd30d['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0xfcd30d);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x1ecf10){this['commandType']=_0x1ecf10[_0x56afb9(-0xde,-0x157)],this['geometry']=_0x1ecf10['geometry'],this['attributeLocations']=_0x1ecf10['attributeLocations'],this['primitiveType']=_0x1ecf10['primitiveType'],this[_0xa03c58(0x91,0x105)]=_0x1ecf10['uniformMap']||{},this[_0xa03c58(0x199,0x128)]=_0x1ecf10[_0x56afb9(-0x15c,-0x1bf)],this[_0xa03c58(0x1a4,0x12d)]=_0x1ecf10['fragmentShaderSource'],this[_0x56afb9(-0x261,-0x223)]=_0x1ecf10[_0x56afb9(-0x1f4,-0x223)];function _0x56afb9(_0x5471ed,_0x4f3248){return _0x5661df(_0x5471ed,_0x4f3248- -0x43b);}this[_0xa03c58(0x13c,0xba)]=_0x1ecf10['framebuffer'],this['outputTexture']=_0x1ecf10['outputTexture'],this['autoClear']=_0x1ecf10['autoClear']??![],this[_0x56afb9(-0x1be,-0x207)]=_0x1ecf10[_0x56afb9(-0x274,-0x207)],this[_0xa03c58(0xc8,0xec)]=!![];function _0xa03c58(_0x4d0c40,_0x40e1ca){return _0x5661df(_0x4d0c40,_0x40e1ca- -0x154);}this['commandToExecute']=undefined,this[_0x56afb9(-0x1a4,-0x1a9)]=undefined,this['isDynamic']=_0x1ecf10['isDynamic']??(()=>!![]),this['autoClear']&&(this[_0xa03c58(0xda,0x13e)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1[_0x56afb9(-0x174,-0x17b)]}));}['createCommand'](_0x26c276){function _0x324fde(_0x3900e2,_0x34cb05){return _0x5b619d(_0x34cb05- -0x1ba,_0x3900e2);}function _0x5632fb(_0x272211,_0x213872){return _0x5661df(_0x213872,_0x272211- -0x3d);}if(this['commandType']===_0x324fde(0x8a,0x25)){const _0x1314bb={};_0x1314bb[_0x5632fb(0x2a3,0x2c5)]=_0x26c276,_0x1314bb[_0x324fde(0x2d,0x7)]=this['geometry'],_0x1314bb[_0x324fde(-0x23,0x52)]=this[_0x324fde(0xc3,0x52)],_0x1314bb['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x2a32d2=VertexArray$1['fromGeometry'](_0x1314bb),_0xcb68fa={};_0xcb68fa['context']=_0x26c276,_0xcb68fa['vertexShaderSource']=this['vertexShaderSource'],_0xcb68fa['fragmentShaderSource']=this['fragmentShaderSource'],_0xcb68fa[_0x324fde(0xa8,0x52)]=this['attributeLocations'];const _0x295ae3=ShaderProgram['fromCache'](_0xcb68fa),_0x5559e7=RenderState[_0x324fde(0x7c,0xa0)](this['rawRenderState']),_0x5c7b68={};return _0x5c7b68['owner']=this,_0x5c7b68['vertexArray']=_0x2a32d2,_0x5c7b68['primitiveType']=this['primitiveType'],_0x5c7b68[_0x5632fb(0x221,0x275)]=Matrix4['IDENTITY'],_0x5c7b68['renderState']=_0x5559e7,_0x5c7b68['shaderProgram']=_0x295ae3,_0x5c7b68['framebuffer']=this['framebuffer'],_0x5c7b68['uniformMap']=this['uniformMap'],_0x5c7b68['pass']=Pass$1[_0x5632fb(0x283,0x2de)],new DrawCommand(_0x5c7b68);}else{if(this['commandType']==='Compute'){const _0x24a3d6={};return _0x24a3d6[_0x5632fb(0x1ed,0x271)]=this,_0x24a3d6[_0x324fde(0x73,0x40)]=this[_0x324fde(-0x1f,0x40)],_0x24a3d6['uniformMap']=this['uniformMap'],_0x24a3d6['outputTexture']=this['outputTexture'],_0x24a3d6['persists']=!![],new ComputeCommand(_0x24a3d6);}else throw new Error(_0x324fde(-0x35,0x43));}}['setGeometry'](_0x2960c2,_0x5ef880){function _0xbfecab(_0x6e82ee,_0x520376){return _0x5661df(_0x520376,_0x6e82ee- -0x2a9);}function _0x5a9e8a(_0x444b73,_0x3be169){return _0x5661df(_0x3be169,_0x444b73- -0x4aa);}this[_0xbfecab(-0x61,-0xb5)]=_0x5ef880,defined(this[_0xbfecab(-0x8c,-0x1b)])&&(this['commandToExecute']['vertexArray']=VertexArray$1[_0xbfecab(-0x8e,-0x34)]({'context':_0x2960c2,'geometry':this[_0x5a9e8a(-0x262,-0x2bf)],'attributeLocations':this[_0xbfecab(-0x16,0x14)],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x450df7){function _0x3f9929(_0x92c95b,_0x3e2276){return _0x5661df(_0x92c95b,_0x3e2276-0xed);}function _0x298060(_0xcf3e91,_0x108ae2){return _0x5b619d(_0x108ae2- -0x1bb,_0xcf3e91);}if(!this['isDynamic']())return;if(!this['show']||!defined(_0x450df7))return;!defined(this['commandToExecute'])&&(this[_0x298060(0x2d,-0x25)]=this['createCommand'](_0x450df7[_0x298060(0x23,0x9e)]));defined(this['preExecute'])&&this['preExecute']();if(!_0x450df7['commandList']){console[_0x3f9929(0x3d5,0x392)]('frameState.commandList\x20is\x20undefined');return;}defined(this['clearCommand'])&&_0x450df7['commandList']['push'](this['clearCommand']),defined(this[_0x298060(0x17,-0x25)])&&_0x450df7['commandList'][_0x3f9929(0x343,0x386)](this[_0x298060(0x41,-0x25)]);}[_0x5b619d(0x21c,0x24c)](){return![];}['destroy'](){function _0x4deeee(_0x10c5d5,_0x4a099c){return _0x5b619d(_0x4a099c-0x159,_0x10c5d5);}function _0x144291(_0x3f9719,_0x1a816d){return _0x5b619d(_0x3f9719- -0x1cf,_0x1a816d);}if(defined(this[_0x144291(-0x39,-0x7d)])){var _0x56dc7a;(_0x56dc7a=this[_0x144291(-0x39,-0x97)]['shaderProgram'])===null||_0x56dc7a===void 0x0||_0x56dc7a['destroy'](),this['commandToExecute'][_0x4deeee(0x293,0x30e)]=undefined;}return destroyObject(this);}}function _0x5b619d(_0x3ddd4a,_0x40f87c){return _0x4243(_0x3ddd4a-0x8b,_0x40f87c);}function deepMerge(_0x3f7772,_0x960957){function _0x439154(_0x2b5714,_0x4e1243){return _0x5661df(_0x4e1243,_0x2b5714-0x156);}if(!_0x3f7772)return _0x960957;if(!_0x960957)return _0x3f7772;const _0x1df137={..._0x960957};function _0x4470e9(_0x12f164,_0x459c09){return _0x5b619d(_0x12f164- -0x2cf,_0x459c09);}const _0x18d18d=_0x1df137;for(const _0x12e939 in _0x3f7772){if(Object[_0x4470e9(-0xe4,-0xa0)]['hasOwnProperty'][_0x4470e9(-0x129,-0x158)](_0x3f7772,_0x12e939)){const _0x40b0a7=_0x3f7772[_0x12e939],_0x4fb848=_0x960957[_0x12e939];if(Array['isArray'](_0x40b0a7)){_0x18d18d[_0x12e939]=_0x40b0a7[_0x439154(0x385,0x390)]();continue;}if(_0x40b0a7&&typeof _0x40b0a7==='object'){_0x18d18d[_0x12e939]=deepMerge(_0x40b0a7,_0x4fb848||{});continue;}_0x40b0a7!==undefined&&(_0x18d18d[_0x12e939]=_0x40b0a7);}}return _0x18d18d;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x4311e7,_0x4d23dc,_0x1fd8a9,_0x5e5db4,_0x5db3e5){this['context']=_0x4311e7,this[_0x29668f(0x2e3,0x317)]=_0x1fd8a9,this[_0x29668f(0x28f,0x2e1)]=_0x5e5db4,this['windData']=_0x4d23dc,this['frameRate']=0x3c,this[_0x526abe(0x138,0x132)]=0x1;function _0x526abe(_0xa09625,_0x35fb90){return _0x5661df(_0xa09625,_0x35fb90- -0x1a1);}const _0x179eab={};_0x179eab['scene']=_0x5db3e5,_0x179eab['samplingWindow']=0x1,_0x179eab[_0x526abe(0x10f,0xef)]=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x179eab),this[_0x526abe(0x162,0x109)](),this[_0x526abe(0xd3,0x7b)](),this[_0x29668f(0x254,0x214)]();function _0x29668f(_0x389d0,_0x1e6663){return _0x5661df(_0x1e6663,_0x389d0- -0x29);}this['createComputingPrimitives']();}['initFrameRate'](){function _0x2dc7b2(_0x144350,_0x52f42c){return _0x5661df(_0x144350,_0x52f42c- -0x4f1);}const _0x4691c=()=>{function _0xc01b75(_0x4c12d2,_0x3b97e2){return _0x4243(_0x3b97e2- -0x3cf,_0x4c12d2);}function _0x4162a5(_0x1896ef,_0x39d427){return _0x4243(_0x39d427-0x7d,_0x1896ef);}this['frameRateMonitor'][_0x4162a5(0x170,0x1bd)]>0x14&&(this[_0xc01b75(-0x2a0,-0x286)]=this[_0xc01b75(-0x264,-0x22b)][_0x4162a5(0x201,0x1bd)],this[_0xc01b75(-0x19a,-0x20e)]=0x3c/Math[_0xc01b75(-0x1f3,-0x1e3)](this[_0xc01b75(-0x305,-0x286)],0x1));};_0x4691c();const _0x19d285=setInterval(_0x4691c,0x3e8);function _0x4b9a92(_0x3921c5,_0x581006){return _0x5661df(_0x581006,_0x3921c5- -0x165);}const _0x369b0e=this[_0x2dc7b2(-0x293,-0x2a7)][_0x2dc7b2(-0x2c3,-0x252)](this);this['destroy']=()=>{clearInterval(_0x19d285),_0x369b0e();};}['createWindTextures'](){const _0x31d0ed={};_0x31d0ed['minificationFilter']=TextureMinificationFilter$1['LINEAR'],_0x31d0ed[_0x43bdf9(-0x1d3,-0x24f)]=TextureMagnificationFilter$1[_0x4ce156(0x4a8,0x475)];const _0x2d6a28={'context':this[_0x4ce156(0x4ba,0x494)],'width':this[_0x4ce156(0x4df,0x496)]['width'],'height':this['windData'][_0x43bdf9(-0x299,-0x238)],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1[_0x43bdf9(-0x2f4,-0x2d8)],'flipY':this['options']['flipY']??![],'sampler':new Sampler$1(_0x31d0ed)};function _0x43bdf9(_0x41d686,_0x15ee0d){return _0x5661df(_0x41d686,_0x15ee0d- -0x4e0);}function _0x4ce156(_0x4ade5a,_0x865adf){return _0x5b619d(_0x4ade5a-0x261,_0x865adf);}this['windTextures']={'U':new Texture$1({..._0x2d6a28,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x2d6a28,'source':{'arrayBufferView':new Float32Array(this[_0x43bdf9(-0x178,-0x1db)]['v']['array'])}})};}['createParticlesTextures'](){const _0x4225a6={};_0x4225a6[_0x196940(-0x208,-0x201)]=TextureMinificationFilter$1[_0x196940(-0x2a8,-0x29f)];function _0x196940(_0x2a14b5,_0x56349f){return _0x5661df(_0x56349f,_0x2a14b5- -0x4f5);}_0x4225a6[_0x27f0e6(0x160,0xe5)]=TextureMagnificationFilter$1['NEAREST'];function _0x27f0e6(_0x55e6dd,_0x2e8c32){return _0x5661df(_0x55e6dd,_0x2e8c32- -0x1ac);}const _0x578905={'context':this['context'],'width':this['options'][_0x196940(-0x2ea,-0x2ea)],'height':this[_0x27f0e6(0x1bd,0x160)]['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x196940(-0x2ed,-0x296)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this[_0x196940(-0x1e9,-0x169)]['particlesTextureSize']*0x4)[_0x196940(-0x27a,-0x2b3)](0x0)},'sampler':new Sampler$1(_0x4225a6)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x578905),'currentParticlesPosition':new Texture$1(_0x578905),'nextParticlesPosition':new Texture$1(_0x578905),'postProcessingPosition':new Texture$1(_0x578905),'particlesSpeed':new Texture$1(_0x578905)};}[_0x5661df(0x2c4,0x309)](){function _0x4d58e4(_0x599f33,_0x5e4fad){return _0x5b619d(_0x599f33-0x212,_0x5e4fad);}function _0x4c7a73(_0x28d52a,_0x276241){return _0x5661df(_0x28d52a,_0x276241-0x279);}Object['values'](this[_0x4d58e4(0x476,0x4e0)])['forEach'](_0xc8660=>_0xc8660[_0x4c7a73(0x544,0x4c3)]());}[_0x5b619d(0x1c2,0x1fc)](){function _0x422911(_0x584f02,_0x4f2252){return _0x5b619d(_0x4f2252- -0x239,_0x584f02);}function _0x29e9fe(_0x8a6bce,_0x58d2a6){return _0x5b619d(_0x58d2a6-0x1bb,_0x8a6bce);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x29e9fe(0x344,0x39e),'uniformMap':{'U':()=>this[_0x29e9fe(0x3bf,0x40b)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u']['min'],this['windData']['u'][_0x29e9fe(0x411,0x432)]),'vRange':()=>new Cartesian2$1(this[_0x29e9fe(0x406,0x439)]['v']['min'],this[_0x422911(0x68,0x45)]['v'][_0x29e9fe(0x438,0x432)]),'speedRange':()=>new Cartesian2$1(this[_0x422911(0x51,0x45)]['speed']['min'],this['windData']['speed']['max']),'currentParticlesPosition':()=>this[_0x29e9fe(0x42c,0x41f)]['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x4a2098(_0xe747b1,_0xebbe12){return _0x29e9fe(_0xebbe12,_0xe747b1- -0x27b);}function _0x34a34d(_0x27e177,_0x2ccd54){return _0x422911(_0x27e177,_0x2ccd54- -0xe3);}return(this[_0x4a2098(0x171,0xec)]['pixelSize']+0x32)*this['options'][_0x4a2098(0x156,0x119)];},'frameRateAdjustment':()=>this[_0x29e9fe(0x3fc,0x407)],'dimension':()=>new Cartesian2$1(this['windData']['width'],this['windData']['height']),'minimum':()=>new Cartesian2$1(this['windData'][_0x422911(-0x92,-0xb3)]['west'],this[_0x422911(0x75,0x45)][_0x29e9fe(0x380,0x341)][_0x422911(-0x3e,-0x14)]),'maximum':()=>new Cartesian2$1(this[_0x29e9fe(0x44f,0x439)]['bounds']['east'],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this['particlesTextures'][_0x29e9fe(0x3fc,0x3d4)],'preExecute':()=>{function _0x17a75a(_0x662bd1,_0x5ef055){return _0x422911(_0x662bd1,_0x5ef055-0x50d);}const _0x3d7721=this[_0x17a75a(0x526,0x538)]['previousParticlesPosition'];function _0x4f7ab1(_0x55d261,_0x2a75aa){return _0x29e9fe(_0x2a75aa,_0x55d261- -0x223);}this['particlesTextures']['previousParticlesPosition']=this['particlesTextures']['currentParticlesPosition'],this[_0x17a75a(0x4fb,0x538)]['currentParticlesPosition']=this['particlesTextures']['postProcessingPosition'],this['particlesTextures'][_0x4f7ab1(0x1f7,0x25e)]=_0x3d7721,this['primitives'][_0x4f7ab1(0x1b7,0x19d)]['commandToExecute']&&(this[_0x4f7ab1(0x17d,0x11a)][_0x17a75a(0x54c,0x4f3)]['commandToExecute'][_0x17a75a(0x508,0x49d)]=this[_0x17a75a(0x4df,0x538)][_0x17a75a(0x476,0x4ed)]);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x29e9fe(0x3a4,0x40c)],'particlesSpeed':()=>this[_0x422911(0x2a,0x2b)]['particlesSpeed']},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures'][_0x29e9fe(0x3a1,0x359)],'preExecute':()=>{function _0x5f5d44(_0xb08dd1,_0xc6eb73){return _0x422911(_0xc6eb73,_0xb08dd1-0x16f);}function _0x12d8c6(_0x44ad04,_0x216613){return _0x422911(_0x44ad04,_0x216613- -0x163);}this[_0x12d8c6(-0x166,-0x1b7)]['updatePosition']['commandToExecute']&&(this['primitives'][_0x5f5d44(0x1a9,0x174)]['commandToExecute']['outputTexture']=this[_0x12d8c6(-0x155,-0x138)][_0x12d8c6(-0x189,-0x1fe)]);},'isDynamic':()=>this[_0x422911(0x4c,0x4c)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x422911(0x2f,-0x56),'uniformMap':{'nextParticlesPosition':()=>this[_0x29e9fe(0x437,0x41f)]['nextParticlesPosition'],'particlesSpeed':()=>this[_0x422911(0x28,0x2b)][_0x422911(-0x7d,-0x20)],'lonRange':()=>this[_0x29e9fe(0x3b3,0x3ec)]['lonRange'],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this[_0x422911(0xb6,0x45)]['bounds'][_0x422911(0x5d,0x3c)],this['windData'][_0x29e9fe(0x2c2,0x341)]['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x422911(0xbe,0x45)]['bounds']['south'],this[_0x422911(-0xa,0x45)]['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options'][_0x422911(-0x43,-0x38)],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager[_0x422911(0x6c,-0x13)](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x412e4c(_0x4bcda7,_0x38d755){return _0x29e9fe(_0x4bcda7,_0x38d755- -0x5ca);}function _0x26ada3(_0x1b78b2,_0x2e5a5f){return _0x422911(_0x1b78b2,_0x2e5a5f-0x190);}this[_0x412e4c(-0x1b0,-0x22a)]['postProcessingPosition']['commandToExecute']&&(this['primitives']['postProcessingPosition'][_0x412e4c(-0x22f,-0x279)][_0x412e4c(-0x21d,-0x246)]=this[_0x26ada3(0x206,0x1bb)][_0x412e4c(-0x1af,-0x1b0)]);},'isDynamic':()=>this[_0x29e9fe(0x4aa,0x440)]['dynamic']})};}['reCreateWindTextures'](){this[_0x3d1a05(0x4e5,0x4fc)]['U'][_0x3d1a05(0x458,0x3fc)]();function _0x20aa90(_0x1a2174,_0x5e38f9){return _0x5b619d(_0x5e38f9-0x147,_0x1a2174);}function _0x3d1a05(_0x391cfd,_0x249d9a){return _0x5b619d(_0x391cfd-0x295,_0x249d9a);}this[_0x3d1a05(0x4e5,0x50c)]['V']['destroy'](),this[_0x3d1a05(0x42a,0x40c)]();}[_0x5661df(0x279,0x270)](_0x4f96bf){function _0x55853a(_0x2705d0,_0x410a12){return _0x5b619d(_0x2705d0- -0x10a,_0x410a12);}this[_0x55853a(0x174,0x141)]=_0x4f96bf;function _0x4efce3(_0x105514,_0x1c252b){return _0x5b619d(_0x1c252b-0x26c,_0x105514);}this[_0x55853a(0xe3,0x13b)]();}['updateOptions'](_0x2e85fc){function _0xa91b5(_0x203ddd,_0x4fb7f0){return _0x5b619d(_0x4fb7f0- -0x5,_0x203ddd);}const _0x393b26=_0x2e85fc[_0x5129cf(0x548,0x5ba)]!==undefined&&_0x2e85fc['flipY']!==this['options']['flipY'];this['options']=deepMerge(_0x2e85fc,this[_0x5129cf(0x5cb,0x569)]);function _0x5129cf(_0x33f3a5,_0x56055b){return _0x5661df(_0x56055b,_0x33f3a5-0x2bf);}_0x393b26&&this['reCreateWindTextures']();}['processWindData'](_0x5c48fb){const {array:_0xfd3e68}=_0x5c48fb;let {min:_0x3a9eeb,max:_0x2f56aa}=_0x5c48fb;const _0x1a4ee5=new Float32Array(_0xfd3e68[_0x871794(0x46b,0x415)]);_0x3a9eeb===undefined&&(console['warn'](_0x871794(0x3e4,0x388)),_0x3a9eeb=Math[_0x2de9e8(-0x16b,-0x19c)](..._0xfd3e68));function _0x2de9e8(_0x545c9b,_0x4cb5b5){return _0x5661df(_0x4cb5b5,_0x545c9b- -0x40c);}_0x2f56aa===undefined&&(console[_0x871794(0x344,0x3b6)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x2f56aa=Math['max'](..._0xfd3e68));function _0x871794(_0xb09219,_0x33e6be){return _0x5661df(_0xb09219,_0x33e6be-0x111);}const _0x452743=Math['max'](Math['abs'](_0x3a9eeb),Math[_0x2de9e8(-0x1dc,-0x206)](_0x2f56aa));for(let _0x36193f=0x0;_0x36193f<_0xfd3e68[_0x871794(0x3de,0x415)];_0x36193f++){const _0x4dab0a=_0xfd3e68[_0x36193f]/_0x452743;_0x1a4ee5[_0x36193f]=_0x4dab0a;}return _0x1a4ee5;}['destroy'](){function _0x440db6(_0x544315,_0x141a58){return _0x5661df(_0x141a58,_0x544315- -0x7f);}function _0x1c838f(_0x5e0e89,_0x4a5523){return _0x5b619d(_0x4a5523- -0x21d,_0x5e0e89);}Object[_0x440db6(0x253,0x299)](this['windTextures'])['forEach'](_0xc52d79=>_0xc52d79[_0x440db6(0x1cb,0x185)]()),Object['values'](this['particlesTextures'])[_0x1c838f(-0x64,-0x1a)](_0x116178=>_0x116178[_0x1c838f(-0x16,-0x5a)]()),Object['values'](this['primitives'])[_0x440db6(0x20b,0x222)](_0x24b5c2=>_0x24b5c2['destroy']()),this[_0x440db6(0x237,0x24d)]['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x5661df(0x2e1,0x2a9)];class WindParticlesRendering{constructor(_0x519cd3,_0x37401b,_0x2c21f8,_0x55a4ba){this[_0x3644f5(0x267,0x2da)]=_0x519cd3,this['options']=_0x37401b,this['viewerParameters']=_0x2c21f8,this['computing']=_0x55a4ba;(typeof this['options'][_0x3644f5(0x192,0x18e)]!==_0x3644f5(0x22b,0x229)||this['options'][_0x26f47c(-0x162,-0x11c)]<=0x0)&&(console[_0x26f47c(-0x126,-0x116)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this[_0x3644f5(0x293,0x214)]['particlesTextureSize']=0x100);this[_0x3644f5(0x25b,0x1e1)]=this['createColorTableTexture']();function _0x3644f5(_0x1d726f,_0x42f2fe){return _0x5661df(_0x42f2fe,_0x1d726f- -0x79);}this[_0x26f47c(-0xbe,-0x68)]=this['createRenderingTextures']();function _0x26f47c(_0x2fbbd5,_0x31e2c7){return _0x5b619d(_0x31e2c7- -0x2a0,_0x2fbbd5);}this[_0x26f47c(-0xbd,-0xff)]=this['createRenderingFramebuffers'](),this[_0x3644f5(0x1f3,0x1cd)]=this['createPrimitives']();}['createRenderingTextures'](){const _0x1668ee={};_0x1668ee[_0x45fc7c(0xcf,0x4c)]=this[_0x45fc7c(-0x2c,0x4c)],_0x1668ee[_0x45fc7c(0xa9,0x4e)]=this['context'][_0x45fc7c(0xa1,0x79)],_0x1668ee['height']=this['context']['drawingBufferHeight'],_0x1668ee['pixelFormat']=PixelFormat['RGBA'],_0x1668ee['pixelDatatype']=PixelDatatype['UNSIGNED_BYTE'];const _0x512c04=_0x1668ee,_0x251017={};_0x251017['context']=this[_0x11e86b(0x112,0xda)],_0x251017['width']=this['context']['drawingBufferWidth'];function _0x45fc7c(_0x17c83b,_0x143cdf){return _0x5661df(_0x17c83b,_0x143cdf- -0x294);}_0x251017[_0x45fc7c(-0x47,0x14)]=this['context']['drawingBufferHeight'],_0x251017[_0x11e86b(0xed,0xb6)]=PixelFormat[_0x11e86b(0x4f,0x79)],_0x251017[_0x11e86b(-0xe,0x6)]=PixelDatatype['UNSIGNED_INT'];const _0x284aa9=_0x251017;function _0x11e86b(_0xce9d71,_0x2f6c19){return _0x5b619d(_0x2f6c19- -0x17f,_0xce9d71);}return{'segmentsColor':new Texture(_0x512c04),'segmentsDepth':new Texture(_0x284aa9)};}['createRenderingFramebuffers'](){function _0x147d95(_0x2f9952,_0x2fcaa8){return _0x5661df(_0x2fcaa8,_0x2f9952-0x44);}const _0x33f041={};_0x33f041[_0x147d95(0x324,0x2b3)]=this['context'],_0x33f041['colorTextures']=[this['textures'][_0x97f188(0x3c4,0x41b)]],_0x33f041['depthTexture']=this['textures'][_0x97f188(0x306,0x2d3)];function _0x97f188(_0xfba870,_0x266b93){return _0x5661df(_0x266b93,_0xfba870-0xc4);}return{'segments':new Framebuffer(_0x33f041)};}['destoryRenderingFramebuffers'](){function _0x4910fa(_0x44a442,_0x18aa7a){return _0x5b619d(_0x44a442- -0x1d3,_0x18aa7a);}function _0x338880(_0x1c88f9,_0xe196f3){return _0x5b619d(_0x1c88f9- -0x37f,_0xe196f3);}Object[_0x338880(-0x134,-0x132)](this[_0x338880(-0x1de,-0x222)])[_0x4910fa(0x30,-0x2c)](_0x22a23f=>{_0x22a23f['destroy']();});}['createColorTableTexture'](){const _0x4d932d=new Float32Array(this['options']['colors']['flatMap'](_0x17d81c=>{function _0x2fb116(_0x4f0845,_0x1709b6){return _0x4243(_0x1709b6-0x3d,_0x4f0845);}const _0x36e345=Color$1['fromCssColorString'](_0x17d81c);function _0x3bedb0(_0x3116a6,_0x56e1e3){return _0x4243(_0x3116a6- -0xba,_0x56e1e3);}return[_0x36e345[_0x3bedb0(0xe5,0xb1)],_0x36e345[_0x3bedb0(0xc8,0x11e)],_0x36e345['blue'],_0x36e345['alpha']];})),_0x5ee2c6={};_0x5ee2c6['minificationFilter']=TextureMinificationFilter[_0x8c28a0(0x3fe,0x3f5)];function _0x5dbfcc(_0x2b357b,_0x4ba37a){return _0x5b619d(_0x4ba37a- -0x258,_0x2b357b);}function _0x8c28a0(_0x17ff35,_0x2ee954){return _0x5661df(_0x2ee954,_0x17ff35-0x130);}return _0x5ee2c6['magnificationFilter']=TextureMagnificationFilter[_0x5dbfcc(0x8,-0x11)],_0x5ee2c6[_0x8c28a0(0x342,0x311)]=TextureWrap[_0x5dbfcc(0x0,-0x15)],_0x5ee2c6[_0x8c28a0(0x399,0x3ad)]=TextureWrap[_0x5dbfcc(-0x73,-0x15)],new Texture({'context':this[_0x5dbfcc(-0x3b,0x1)],'width':this['options']['colors']['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x5ee2c6),'source':{'width':this['options'][_0x5dbfcc(-0xce,-0x8a)][_0x8c28a0(0x434,0x4b0)],'height':0x1,'arrayBufferView':_0x4d932d}});}['createSegmentsGeometry'](){const _0x117ac6=0x4,_0x362a90=this['options']['particlesTextureSize'];let _0x4f2713=[];for(let _0x1c14bf=0x0;_0x1c14bf<_0x362a90;_0x1c14bf++){for(let _0x30ea2f=0x0;_0x30ea2f<_0x362a90;_0x30ea2f++){for(let _0x221e69=0x0;_0x221e69<_0x117ac6;_0x221e69++){_0x4f2713['push'](_0x1c14bf/_0x362a90),_0x4f2713['push'](_0x30ea2f/_0x362a90);}}}_0x4f2713=new Float32Array(_0x4f2713);const _0x2f4eb3=this['options']['particlesTextureSize']**0x2;let _0x545c91=[];for(let _0x581110=0x0;_0x581110<_0x2f4eb3;_0x581110++){_0x545c91['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x545c91=new Float32Array(_0x545c91);let _0x3679ab=[];for(let _0x246227=0x0,_0x2dc8ea=0x0;_0x246227<_0x2f4eb3;_0x246227++){_0x3679ab['push'](_0x2dc8ea+0x0,_0x2dc8ea+0x1,_0x2dc8ea+0x2,_0x2dc8ea+0x2,_0x2dc8ea+0x1,_0x2dc8ea+0x3),_0x2dc8ea+=_0x117ac6;}function _0x1bbdf5(_0x4886e9,_0x33a62b){return _0x5b619d(_0x33a62b- -0x2fd,_0x4886e9);}_0x3679ab=new Uint32Array(_0x3679ab);function _0x5d4589(_0x3b1b45,_0x1c3ae6){return _0x5b619d(_0x1c3ae6-0x19e,_0x3b1b45);}const _0x10c695={};_0x10c695[_0x5d4589(0x2da,0x339)]=ComponentDatatype['FLOAT'],_0x10c695['componentsPerAttribute']=0x2,_0x10c695['values']=_0x4f2713;const _0x40a8b1={};_0x40a8b1[_0x5d4589(0x3a3,0x339)]=ComponentDatatype[_0x5d4589(0x387,0x31f)],_0x40a8b1['componentsPerAttribute']=0x3,_0x40a8b1[_0x1bbdf5(-0x39,-0xb2)]=_0x545c91;const _0xa665ab=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x10c695),'normal':new GeometryAttribute(_0x40a8b1)}),'indices':_0x3679ab});return _0xa665ab;}['createRawRenderState'](_0x2d38a3){const _0xad78a0={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x2d38a3};return Appearance['getDefaultRenderState'](!![],![],_0xad78a0);}['createPrimitives'](){const _0x148c68={};_0x148c68['st']=0x0,_0x148c68[_0x302938(0x1e2,0x18a)]=0x1;function _0x56d2a4(_0x53b04d,_0x28ba03){return _0x5661df(_0x53b04d,_0x28ba03- -0x2b0);}const _0x2ccac4={};_0x2ccac4['enabled']=!![];const _0x3100c9={};_0x3100c9['enabled']=!![],_0x3100c9[_0x302938(0x2d8,0x335)]=WebGLRenderingContext[_0x56d2a4(0x43,0x5b)],_0x3100c9['blendFuncSource']=WebGLRenderingContext[_0x302938(0x2d5,0x2e4)];function _0x302938(_0x5e5424,_0x13e02f){return _0x5661df(_0x13e02f,_0x5e5424- -0x23);}_0x3100c9[_0x302938(0x2d3,0x261)]=WebGLRenderingContext[_0x302938(0x2ad,0x26b)];const _0x3eeff0={};_0x3eeff0['viewport']=undefined,_0x3eeff0['depthTest']=_0x2ccac4,_0x3eeff0['depthMask']=!![],_0x3eeff0[_0x56d2a4(-0x12,-0x37)]=_0x3100c9;const _0x2badb5=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x148c68,'geometry':this[_0x302938(0x1e6,0x201)](),'primitiveType':PrimitiveType[_0x56d2a4(-0x9c,-0x7f)],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures'][_0x302938(0x220,0x239)],'currentParticlesPosition':()=>this[_0x56d2a4(-0x17,0x41)][_0x56d2a4(0x7d,0x3b)]['currentParticlesPosition'],'postProcessingPosition':()=>this['computing'][_0x302938(0x2c8,0x2b7)]['postProcessingPosition'],'particlesSpeed':()=>this[_0x302938(0x2ce,0x31b)]['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this[_0x302938(0x2b1,0x27b)],'domain':()=>{function _0x58eaa1(_0x57a1cd,_0x55d22f){return _0x302938(_0x57a1cd- -0x363,_0x55d22f);}var _0x2ca44b,_0x20eddf;const _0x5dca34=new Cartesian2(((_0x2ca44b=this[_0x56fdbd(0x418,0x3be)]['domain'])===null||_0x2ca44b===void 0x0?void 0x0:_0x2ca44b[_0x56fdbd(0x3ad,0x3d3)])??this[_0x56fdbd(0x3fd,0x3ba)]['windData']['speed']['min'],((_0x20eddf=this['options'][_0x58eaa1(-0x119,-0xe8)])===null||_0x20eddf===void 0x0?void 0x0:_0x20eddf['max'])??this[_0x58eaa1(-0x95,-0x63)]['windData']['speed']['max']);function _0x56fdbd(_0x1ce547,_0x2318d4){return _0x56d2a4(_0x2318d4,_0x1ce547-0x3bc);}return _0x5dca34;},'displayRange':()=>{function _0xe07bb3(_0x298700,_0x4252e5){return _0x56d2a4(_0x298700,_0x4252e5- -0x172);}var _0x218691,_0x22f955;function _0x4d6a73(_0x120869,_0x6d512b){return _0x302938(_0x6d512b-0x1f8,_0x120869);}const _0x1451e3=new Cartesian2(((_0x218691=this[_0xe07bb3(-0x116,-0x116)]['displayRange'])===null||_0x218691===void 0x0?void 0x0:_0x218691['min'])??this[_0xe07bb3(-0x12b,-0x131)]['windData'][_0x4d6a73(0x46a,0x4ae)]['min'],((_0x22f955=this['options']['displayRange'])===null||_0x22f955===void 0x0?void 0x0:_0x22f955['max'])??this[_0x4d6a73(0x4a0,0x4c6)][_0xe07bb3(-0xaf,-0x11d)][_0xe07bb3(-0x150,-0x149)]['max']);return _0x1451e3;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this[_0x302938(0x2bd,0x2ca)]['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x56a3cf={};function _0x3abf93(_0x5d046f,_0x3d5920){return _0x302938(_0x3d5920- -0x111,_0x5d046f);}_0x56a3cf['min']=0x1,_0x56a3cf[_0x3abf93(0x22f,0x1ca)]=0x2;const _0x3eb12d=this['options'][_0x3abf93(0x18d,0x111)]||_0x56a3cf;function _0x42efef(_0x4296a4,_0xfe4995){return _0x56d2a4(_0x4296a4,_0xfe4995-0x1d0);}return new Cartesian2(_0x3eb12d[_0x3abf93(0x1b9,0x16d)],_0x3eb12d['max']);},'lineLength':()=>{const _0x34207b={};_0x34207b[_0x334f4f(-0x3f,0x9)]=0x14;function _0x334f4f(_0x49281e,_0x4b5433){return _0x56d2a4(_0x4b5433,_0x49281e- -0x30);}_0x34207b['max']=0x64;function _0x4f2b19(_0x426d34,_0x2bf743){return _0x56d2a4(_0x2bf743,_0x426d34-0x1d8);}const _0x1932fe=this[_0x334f4f(0x2c,0x6e)]['lineLength']||_0x34207b;return new Cartesian2(_0x1932fe['min'],_0x1932fe[_0x4f2b19(0x226,0x1db)]);},'is3D':()=>this[_0x302938(0x295,0x2bc)][_0x302938(0x214,0x264)]===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures'][_0x302938(0x21f,0x1f4)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager[_0x302938(0x2a8,0x2c0)](),'rawRenderState':this['createRawRenderState'](_0x3eeff0)}),_0x5be478={};return _0x5be478['segments']=_0x2badb5,_0x5be478;}['onParticlesTextureSizeChange'](){function _0x25e806(_0xb22c48,_0x4835f8){return _0x5661df(_0x4835f8,_0xb22c48- -0x2a);}const _0xa7d144=this['createSegmentsGeometry']();this[_0x48bdc1(-0x24a,-0x25d)][_0x48bdc1(-0x297,-0x2c9)]['geometry']=_0xa7d144;const _0x1003fb={};_0x1003fb['context']=this['context'],_0x1003fb['geometry']=_0xa7d144,_0x1003fb['attributeLocations']=this[_0x48bdc1(-0x24a,-0x256)]['segments']['attributeLocations'],_0x1003fb['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x238734=VertexArray[_0x25e806(0x1f1,0x245)](_0x1003fb);function _0x48bdc1(_0x492852,_0x17db05){return _0x5661df(_0x17db05,_0x492852- -0x4b6);}this['primitives'][_0x25e806(0x1f5,0x1ec)]['commandToExecute']&&(this[_0x25e806(0x242,0x1c3)][_0x25e806(0x1f5,0x1a2)][_0x25e806(0x1f3,0x190)]['vertexArray']=_0x238734);}['onColorTableChange'](){function _0x1f24dc(_0x27c7e4,_0x156f2a){return _0x5661df(_0x27c7e4,_0x156f2a- -0x6f);}function _0x21d387(_0x50c5f6,_0xd1a50f){return _0x5b619d(_0x50c5f6- -0x379,_0xd1a50f);}this[_0x21d387(-0x12c,-0x197)]['destroy'](),this['colorTable']=this[_0x21d387(-0x143,-0x17f)]();}['updateOptions'](_0x229145){function _0x5d87d2(_0x47bbe5,_0x275125){return _0x5b619d(_0x47bbe5-0x105,_0x275125);}const _0x594592=_0x229145[_0x5d87d2(0x2d3,0x2a9)]&&JSON['stringify'](_0x229145['colors'])!==JSON['stringify'](this['options']['colors']);function _0x511c79(_0x5d559d,_0x29b3d7){return _0x5b619d(_0x5d559d- -0x363,_0x29b3d7);}this['options']=deepMerge(_0x229145,this[_0x5d87d2(0x38a,0x403)]),_0x594592&&this[_0x5d87d2(0x2c5,0x260)]();}['destroy'](){Object['values'](this[_0x26e043(0x2fb,0x292)])[_0x3c2b07(0x2c4,0x2c7)](_0x3e07c9=>{_0x3e07c9['destroy']();});function _0x26e043(_0xb39a40,_0x597423){return _0x5b619d(_0xb39a40-0x15a,_0x597423);}function _0x3c2b07(_0x12151c,_0x1770b6){return _0x5b619d(_0x1770b6-0xc4,_0x12151c);}Object[_0x3c2b07(0x381,0x30f)](this[_0x3c2b07(0x302,0x2a9)])['forEach'](_0x1e37d6=>{_0x1e37d6['destroy']();}),this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x84ebe0,_0x15544e,_0x342588,_0x8ea44a,_0x25d6aa){function _0x8b363b(_0x567640,_0x1ea4a0){return _0x5661df(_0x1ea4a0,_0x567640- -0x4d7);}this['context']=_0x84ebe0,this[_0x98510f(0x533,0x57d)]=_0x342588,this['viewerParameters']=_0x8ea44a,this['computing']=new WindParticlesComputing(_0x84ebe0,_0x15544e,_0x342588,_0x8ea44a,_0x25d6aa),this[_0x98510f(0x462,0x48c)]=new WindParticlesRendering(_0x84ebe0,_0x342588,_0x8ea44a,this[_0x98510f(0x518,0x596)]);function _0x98510f(_0x387ba7,_0x18d33d){return _0x5b619d(_0x387ba7-0x2ae,_0x18d33d);}this['clearFramebuffers']();}[_0x5661df(0x1e8,0x206)](){function _0x410f17(_0x23a926,_0x1d89f7){return _0x5b619d(_0x23a926- -0x2a3,_0x1d89f7);}const _0x227786=[this['computing'][_0x410f17(-0xbe,-0xdb)]['calculateSpeed'],this[_0x53f5ef(0x20f,0x1a2)][_0x410f17(-0xbe,-0x7c)][_0x410f17(-0x30,0x11)],this['computing']['primitives'][_0x410f17(-0x44,-0x6c)],this['rendering'][_0x410f17(-0xbe,-0x96)]['segments']];function _0x53f5ef(_0x451d79,_0x25bfaf){return _0x5661df(_0x25bfaf,_0x451d79- -0xe2);}return _0x227786;}[_0x5661df(0x289,0x28b)](){function _0x1ccd1f(_0x4c633a,_0x40dd9d){return _0x5661df(_0x4c633a,_0x40dd9d-0x3a);}const _0x4cf250=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x38c975(0x236,0x2a3)]});function _0x38c975(_0x124b59,_0xb33431){return _0x5661df(_0x124b59,_0xb33431- -0x1d);}Object['keys'](this[_0x1ccd1f(0x2c0,0x275)][_0x38c975(0x1bd,0x20b)])['forEach'](_0x15562c=>{_0x4cf250['framebuffer']=this[_0x39c2a2(0x293,0x289)]['framebuffers'][_0x15562c];function _0x39c2a2(_0x4c3078,_0x45d0dd){return _0x1ccd1f(_0x4c3078,_0x45d0dd-0x14);}function _0x5bc505(_0x1d9eb9,_0x5c388c){return _0x1ccd1f(_0x1d9eb9,_0x5c388c-0x9f);}_0x4cf250['execute'](this[_0x39c2a2(0x353,0x32e)]);});}['changeOptions'](_0x391073){let _0x4ad96e=![];_0x391073['particlesTextureSize']&&this[_0x43d632(0x341,0x375)]['particlesTextureSize']!==_0x391073['particlesTextureSize']&&(_0x4ad96e=!![]);function _0x43d632(_0x4468e2,_0x4cde1c){return _0x5b619d(_0x4cde1c-0xf0,_0x4468e2);}const _0x49adf6=deepMerge(_0x391073,this['options']);if(_0x49adf6['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x49adf6,this[_0x43d632(0x312,0x2a4)]['updateOptions'](_0x391073);function _0x5c3ff6(_0x3c9aa1,_0x1f53d9){return _0x5b619d(_0x1f53d9- -0xb0,_0x3c9aa1);}this[_0x5c3ff6(0x14e,0x1ba)][_0x43d632(0x2ba,0x278)](_0x391073),_0x4ad96e&&(this[_0x43d632(0x378,0x35a)][_0x43d632(0x324,0x372)](),this['computing']['createParticlesTextures'](),this['rendering'][_0x43d632(0x2cc,0x344)]());}['applyViewerParameters'](_0x41bc2d){function _0x131fdf(_0x35b242,_0x4fd92c){return _0x5661df(_0x4fd92c,_0x35b242- -0x4a1);}function _0x2317ad(_0x438977,_0x250287){return _0x5661df(_0x438977,_0x250287- -0x463);}this['viewerParameters']=_0x41bc2d,this['computing'][_0x2317ad(-0x1fd,-0x1ab)]=_0x41bc2d,this['rendering'][_0x131fdf(-0x1e9,-0x1a9)]=_0x41bc2d;}[_0x5661df(0x1e4,0x24a)](){function _0x573eee(_0x44ad5e,_0x373753){return _0x5661df(_0x44ad5e,_0x373753-0xd7);}this[_0x573eee(0x44a,0x3c8)]['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x5b619d(0x220,0x276)],_0x5d6531={};_0x5d6531['min']=0x1,_0x5d6531['max']=0x2;const _0x3e1f0a={};_0x3e1f0a[_0x5661df(0x2c2,0x2a1)]=0x14,_0x3e1f0a[_0x5b619d(0x277,0x24f)]=0x64;const _0x107536={};_0x107536['particlesTextureSize']=0x64,_0x107536['fixedHeight']=0x0,_0x107536['lineWidth']=_0x5d6531,_0x107536['lineLength']=_0x3e1f0a,_0x107536['speedFactor']=0x1,_0x107536[_0x5661df(0x203,0x288)]=0.003,_0x107536['dropRateBump']=0.001,_0x107536['colors']=[_0x5b619d(0x1f3,0x20f)],_0x107536['flipY']=![],_0x107536['dynamic']=!![];const DEF_OPTIONS=_0x107536;class WindLayer extends BaseLayer$1{constructor(_0x518a75={}){_0x518a75={...DEF_OPTIONS,..._0x518a75},super(_0x518a75),this['_setOptionsHook'](_0x518a75,_0x518a75);}get['layer'](){function _0x537bb7(_0x37f420,_0x2424ac){return _0x5661df(_0x2424ac,_0x37f420- -0x4e7);}return this[_0x537bb7(-0x27b,-0x299)];}get['data'](){function _0x2ad5a4(_0x3a91fd,_0x1d09e6){return _0x5b619d(_0x3a91fd-0x57,_0x1d09e6);}return this['options'][_0x2ad5a4(0x1e7,0x24d)];}set[_0x5661df(0x22b,0x217)](_0x51a226){this['options'][_0x3f734c(-0x231,-0x215)]=_0x51a226;function _0x3f734c(_0x51517a,_0x3d245e){return _0x5661df(_0x51517a,_0x3d245e- -0x42c);}this['setData'](_0x51a226);}get['colors'](){function _0x378e33(_0x118a97,_0x196375){return _0x5b619d(_0x118a97-0x142,_0x196375);}return this[_0x378e33(0x3c7,0x43c)]['colors'];}set[_0x5661df(0x1d0,0x255)](_0x3ea504){function _0x42aa01(_0x5efdca,_0x1bf72d){return _0x5b619d(_0x5efdca-0x5,_0x1bf72d);}this['options']['colors']=_0x3ea504;const _0x3c508e={};_0x3c508e[_0x3cd733(0x479,0x49d)]=_0x3ea504;function _0x3cd733(_0x48c9ba,_0x4e7a22){return _0x5b619d(_0x4e7a22-0x2cf,_0x48c9ba);}this[_0x42aa01(0x19c,0x14d)](this[_0x42aa01(0x28a,0x26a)],_0x3c508e);}[_0x5661df(0x2f6,0x2b2)](_0x117ea1){_0x117ea1?this['_addedHook']():this['_removedHook']();}['_mountedHook'](){}[_0x5b619d(0x22e,0x201)](){this['scene']=this['_map']['scene'],this['camera']=this['_map'][_0x5c10e7(0x385,0x330)];this['options']['data']&&this['setData'](this['options'][_0x374cf6(-0xc1,-0xf7)]);if(!this['windData']||!this['show'])return;function _0x5c10e7(_0x47c99e,_0x2bc93f){return _0x5661df(_0x47c99e,_0x2bc93f-0xad);}this[_0x374cf6(-0x20,0x2b)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this['updateViewerParameters']();function _0x374cf6(_0x1a36ae,_0x15a1fb){return _0x5b619d(_0x1a36ae- -0x251,_0x15a1fb);}this[_0x5c10e7(0x35f,0x39c)]=new WindParticleSystem(this[_0x374cf6(-0x94,-0x43)]['context'],this[_0x374cf6(0x2d,0x76)],this[_0x5c10e7(0x3ec,0x3b9)],this['viewerParameters'],this['scene']),this['primitives']=this[_0x5c10e7(0x3c2,0x39c)][_0x5c10e7(0x282,0x2b3)](),this['primitives']['forEach'](_0x44dc4a=>{function _0x275aa7(_0x40ba5c,_0x44cf73){return _0x5c10e7(_0x44cf73,_0x40ba5c-0x213);}function _0x2531bd(_0x906f08,_0x2e3bcc){return _0x5c10e7(_0x2e3bcc,_0x906f08- -0x322);}this[_0x275aa7(0x504,0x4d6)][_0x275aa7(0x52c,0x4c1)]['add'](_0x44dc4a);}),this['camera']['percentageChanged']=0.01,this['camera']['changed']['addEventListener'](this['updateViewerParameters'][_0x5c10e7(0x3c0,0x34c)](this)),this['scene']['morphComplete']['addEventListener'](this[_0x374cf6(-0x92,-0x17)][_0x5c10e7(0x2f9,0x34c)](this)),window['addEventListener'](_0x5c10e7(0x2ec,0x305),this['updateViewerParameters'][_0x374cf6(-0x39,-0x35)](this));}[_0x5661df(0x2e4,0x2be)](){this['camera'][_0x26be07(0x1c8,0x1a6)]['removeEventListener'](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete']['removeEventListener'](this[_0x26be07(0x187,0x142)][_0xfc1f32(-0xcd,-0xa6)](this)),window['removeEventListener'](_0xfc1f32(-0x114,-0x111),this['updateViewerParameters']['bind'](this));function _0x26be07(_0x5fa33b,_0x4a63b5){return _0x5661df(_0x4a63b5,_0x5fa33b- -0xbf);}function _0xfc1f32(_0xc46464,_0x5ed329){return _0x5661df(_0x5ed329,_0xc46464- -0x36c);}this[_0x26be07(0x1ad,0x1be)]&&(this['primitives'][_0xfc1f32(-0xe2,-0x86)](_0x59e11d=>{function _0x26e8b2(_0x25a01f,_0x45e370){return _0x26be07(_0x45e370-0x61,_0x25a01f);}this['scene'][_0x26e8b2(0x291,0x20e)]['remove'](_0x59e11d);}),delete this[_0x26be07(0x1ad,0x156)]),this['particleSystem']&&(this[_0xfc1f32(-0x7d,-0xfa)][_0x26be07(0x18b,0x123)](),delete this['particleSystem']);}[_0x5661df(0x2ea,0x28f)](_0x34b9ad,_0x5f04fb){function _0x2e7b59(_0x5756ef,_0x4f8bf7){return _0x5b619d(_0x5756ef- -0x209,_0x4f8bf7);}this[_0x579248(0x2c3,0x2a9)]=this['processWindData'](_0x34b9ad);if(_0x5f04fb){this['_removedHook'](),this[_0x579248(0x231,0x259)]();return;}function _0x579248(_0x1233ae,_0x3f809f){return _0x5b619d(_0x3f809f-0x2b,_0x1233ae);}this[_0x2e7b59(0x5f,0x5b)]?(this[_0x2e7b59(0x5f,0xc8)]['computing']['updateWindData'](this[_0x2e7b59(0x75,0x36)]),this[_0x579248(0x174,0x1e8)]['requestRender']()):this[_0x579248(0x23c,0x259)]();}['_setOptionsHook'](_0x33702d,_0x11af8b){this['particleSystem']&&(this['particleSystem']['changeOptions'](_0x11af8b),this['scene']['requestRender']());}[_0x5b619d(0x20e,0x1c2)](_0x57d9aa){var _0x394f70,_0x121a55;const _0x29b6e0={..._0x57d9aa},_0x4ac940=_0x29b6e0;!_0x4ac940['height']&&_0x4ac940[_0x4131f1(-0x1aa,-0x1ec)]&&(_0x4ac940['height']=_0x4ac940['rows']);!_0x4ac940['width']&&_0x4ac940['cols']&&(_0x4ac940[_0x4131f1(-0x1fe,-0x1c3)]=_0x4ac940['cols']);function _0xfad68a(_0x5a8223,_0xf0f03c){return _0x5661df(_0xf0f03c,_0x5a8223- -0x2bd);}!_0x4ac940['bounds']&&(_0x4ac940[_0xfad68a(-0xb0,-0x4a)]={'west':_0x4ac940['xmin'],'south':_0x4ac940['ymin'],'east':_0x4ac940[_0xfad68a(-0x63,0x3)],'north':_0x4ac940['ymax']});if(!_0x4ac940['u']){const _0x3b2d3f={};_0x3b2d3f[_0x4131f1(-0x1e1,-0x1eb)]=_0x57d9aa[_0xfad68a(0xf,0x13)],_0x3b2d3f[_0x4131f1(-0x229,-0x204)]=_0x57d9aa['umin'],_0x3b2d3f['max']=_0x57d9aa['umax'],_0x4ac940['u']=_0x3b2d3f;}if(!_0x4ac940['v']){const _0x564767={};_0x564767['array']=_0x57d9aa['vdata'],_0x564767['min']=_0x57d9aa['vmin'],_0x564767[_0x4131f1(-0x1c4,-0x1a7)]=_0x57d9aa['vmax'],_0x4ac940['v']=_0x564767;}if(((_0x394f70=_0x4ac940['speed'])===null||_0x394f70===void 0x0?void 0x0:_0x394f70['min'])===undefined||((_0x121a55=_0x4ac940[_0xfad68a(0x1c,0x35)])===null||_0x121a55===void 0x0?void 0x0:_0x121a55['max'])===undefined||_0x4ac940['speed'][_0xfad68a(-0x3,-0x4d)]===undefined){const _0x352099={'array':new Float32Array(_0x4ac940['u']['array']['length']),'min':Number['MAX_VALUE'],'max':Number[_0xfad68a(-0x47,-0x34)]};for(let _0x3d87f7=0x0;_0x3d87f7<_0x4ac940['u']['array'][_0x4131f1(-0x1a0,-0x1a1)];_0x3d87f7++){_0x352099[_0xfad68a(-0x3,-0x42)][_0x3d87f7]=Math['sqrt'](_0x4ac940['u']['array'][_0x3d87f7]*_0x4ac940['u']['array'][_0x3d87f7]+_0x4ac940['v']['array'][_0x3d87f7]*_0x4ac940['v'][_0xfad68a(-0x3,0x58)][_0x3d87f7]),_0x352099[_0xfad68a(-0x3,-0x42)][_0x3d87f7]!==0x0&&(_0x352099['min']=Math[_0x4131f1(-0x1d4,-0x204)](_0x352099[_0xfad68a(-0x1c,-0x28)],_0x352099['array'][_0x3d87f7]),_0x352099['max']=Math[_0x4131f1(-0x190,-0x1a7)](_0x352099['max'],_0x352099['array'][_0x3d87f7]));}_0x4ac940[_0xfad68a(0x1c,-0x4b)]=_0x352099;}function _0x4131f1(_0x1d91be,_0x249819){return _0x5661df(_0x1d91be,_0x249819- -0x4a5);}return _0x4ac940;}['updateViewerParameters'](){var _0x21edd6;const _0x1753cd=this[_0x4ba32e(0x2d2,0x290)];if(!_0x1753cd)return;const _0x334d3c=_0x1753cd[_0x3224eb(0x1cd,0x1fe)],_0x51c7c8={};_0x51c7c8['x']=0x0,_0x51c7c8['y']=0x0;const _0x2600fc={};_0x2600fc['x']=0x0,_0x2600fc['y']=_0x334d3c['clientHeight'];const _0x1d3473={};_0x1d3473['x']=_0x334d3c['clientWidth'],_0x1d3473['y']=0x0;const _0x3814fd={};function _0x4ba32e(_0x4afbb6,_0x12aec6){return _0x5b619d(_0x4afbb6-0x115,_0x12aec6);}_0x3814fd['x']=_0x334d3c['clientWidth'];function _0x3224eb(_0x197fce,_0x4eddef){return _0x5b619d(_0x4eddef- -0x3f,_0x197fce);}_0x3814fd['y']=_0x334d3c['clientHeight'];const _0x422706=[_0x51c7c8,_0x2600fc,_0x1d3473,_0x3814fd];let _0x45e420=0xb4,_0x1f5bbf=-0xb4,_0x623517=0x5a,_0x48d3dd=-0x5a,_0x20ecb4=![];for(const _0x457511 of _0x422706){const _0x56f22f=_0x1753cd[_0x4ba32e(0x311,0x392)]['pickEllipsoid'](new Cesium$1[(_0x4ba32e(0x387,0x32e))](_0x457511['x'],_0x457511['y']),_0x1753cd['globe']['ellipsoid']);if(!_0x56f22f){_0x20ecb4=!![];break;}const _0x4f7dbc=_0x1753cd['globe'][_0x4ba32e(0x33e,0x2e1)][_0x4ba32e(0x298,0x2f8)](_0x56f22f),_0x280583=Cesium$1[_0x3224eb(0x1c5,0x201)]['toDegrees'](_0x4f7dbc['longitude']),_0x4556e7=Cesium$1['Math'][_0x4ba32e(0x2bc,0x23b)](_0x4f7dbc['latitude']);_0x45e420=Math['min'](_0x45e420,_0x280583),_0x1f5bbf=Math['max'](_0x1f5bbf,_0x280583),_0x623517=Math[_0x4ba32e(0x32f,0x391)](_0x623517,_0x4556e7),_0x48d3dd=Math[_0x3224eb(0x270,0x238)](_0x48d3dd,_0x4556e7);}if(!_0x20ecb4){const _0x533f8f=new Cesium$1['Cartesian2'](Math[_0x4ba32e(0x38c,0x3cc)](this[_0x3224eb(0x231,0x23f)]['bounds']['west'],_0x45e420),Math['min'](this[_0x3224eb(0x28f,0x23f)][_0x3224eb(0x13c,0x147)][_0x3224eb(0x17c,0x1e8)],_0x1f5bbf)),_0x3ece16=new Cesium$1[(_0x3224eb(0x1d4,0x233))](Math['max'](this[_0x3224eb(0x291,0x23f)][_0x3224eb(0x14d,0x147)]['south'],_0x623517),Math['min'](this[_0x4ba32e(0x393,0x415)]['bounds'][_0x3224eb(0x221,0x202)],_0x48d3dd)),_0x35075e=(_0x533f8f['y']-_0x533f8f['x'])*0.05,_0x38ee4a=(_0x3ece16['y']-_0x3ece16['x'])*0.05;_0x533f8f['x']=Math['max'](this['windData']['bounds'][_0x3224eb(0x27a,0x236)],_0x533f8f['x']-_0x35075e),_0x533f8f['y']=Math['min'](this[_0x3224eb(0x1f7,0x23f)][_0x3224eb(0x167,0x147)]['east'],_0x533f8f['y']+_0x35075e),_0x3ece16['x']=Math[_0x3224eb(0x287,0x238)](this['windData'][_0x4ba32e(0x29b,0x240)]['south'],_0x3ece16['x']-_0x38ee4a),_0x3ece16['y']=Math['min'](this['windData'][_0x4ba32e(0x29b,0x250)]['north'],_0x3ece16['y']+_0x38ee4a),this[_0x4ba32e(0x346,0x304)]['lonRange']=_0x533f8f,this[_0x3224eb(0x217,0x1f2)][_0x3224eb(0x15a,0x191)]=_0x3ece16;const _0x47f4e5=this[_0x3224eb(0x28d,0x23f)]['bounds'][_0x3224eb(0x20f,0x1e8)]-this['windData']['bounds'][_0x4ba32e(0x38a,0x325)],_0x417d07=this[_0x4ba32e(0x393,0x3ef)][_0x3224eb(0x19a,0x147)]['north']-this['windData']['bounds'][_0x4ba32e(0x33a,0x316)],_0x26cde5=(_0x533f8f['y']-_0x533f8f['x'])/_0x47f4e5,_0x582e4a=(_0x3ece16['y']-_0x3ece16['x'])/_0x417d07,_0x4a0aa3=Math[_0x4ba32e(0x32f,0x2d0)](_0x26cde5,_0x582e4a),_0x180c33=0x3e8*_0x4a0aa3;_0x180c33>0x0&&(this[_0x4ba32e(0x346,0x373)][_0x3224eb(0x18d,0x1d2)]=Math['max'](0x0,Math['min'](0x3e8,_0x180c33)));}this['viewerParameters']['sceneMode']=this['scene'][_0x4ba32e(0x349,0x313)],(_0x21edd6=this['particleSystem'])===null||_0x21edd6===void 0x0||_0x21edd6[_0x4ba32e(0x2a8,0x2c0)](this['viewerParameters']);}[_0x5b619d(0x228,0x1d1)](_0x5b5bff,_0x535419){const {bounds:_0x33575a,width:_0x16bede,height:_0x12ad7f,u:_0x4fad63,v:_0x382b63,speed:_0x320a68}=this['windData'],{flipY:_0x5ced3a}=this[_0x5ef875(0xc5,0xc8)];if(_0x5b5bff<_0x33575a['west']||_0x5b5bff>_0x33575a['east']||_0x535419<_0x33575a[_0x461bfd(0x185,0x138)]||_0x535419>_0x33575a['north'])return null;const _0x34c89=(_0x5b5bff-_0x33575a['west'])/(_0x33575a['east']-_0x33575a['west'])*(_0x16bede-0x1);let _0x4e70b9=(_0x535419-_0x33575a['south'])/(_0x33575a['north']-_0x33575a[_0x461bfd(0x109,0x138)])*(_0x12ad7f-0x1);_0x5ced3a&&(_0x4e70b9=_0x12ad7f-0x1-_0x4e70b9);function _0x5ef875(_0x556779,_0x6e0c02){return _0x5b619d(_0x556779- -0x1c0,_0x6e0c02);}const _0x16f8aa=Math['floor'](_0x34c89),_0x604f7d=Math[_0x5ef875(-0x34,-0x3c)](_0x4e70b9),_0x346494=Math['floor'](_0x34c89),_0x355650=Math[_0x5ef875(0x5a,0x58)](_0x346494+0x1,_0x16bede-0x1),_0x3cfcfb=Math['floor'](_0x4e70b9),_0x45945d=Math[_0x461bfd(0xf0,0x12d)](_0x3cfcfb+0x1,_0x12ad7f-0x1),_0x2b060a=_0x34c89-_0x346494,_0x291bd4=_0x4e70b9-_0x3cfcfb,_0x4a6f59=_0x604f7d*_0x16bede+_0x16f8aa,_0x3b8cd4=_0x3cfcfb*_0x16bede+_0x346494,_0x30855c=_0x3cfcfb*_0x16bede+_0x355650,_0x56cbd4=_0x45945d*_0x16bede+_0x346494,_0x444eb2=_0x45945d*_0x16bede+_0x355650,_0x14cfec=_0x4fad63[_0x461bfd(0x147,0x146)][_0x3b8cd4],_0x56d98a=_0x4fad63['array'][_0x30855c],_0x25cca5=_0x4fad63['array'][_0x56cbd4],_0x320df6=_0x4fad63['array'][_0x444eb2],_0x423e5c=(0x1-_0x2b060a)*(0x1-_0x291bd4)*_0x14cfec+_0x2b060a*(0x1-_0x291bd4)*_0x56d98a+(0x1-_0x2b060a)*_0x291bd4*_0x25cca5+_0x2b060a*_0x291bd4*_0x320df6,_0x4d63a9=_0x382b63[_0x5ef875(0x73,0xae)][_0x3b8cd4];function _0x461bfd(_0x53397e,_0x440533){return _0x5661df(_0x53397e,_0x440533- -0x174);}const _0x5c2e10=_0x382b63['array'][_0x30855c],_0x4742f3=_0x382b63[_0x5ef875(0x73,0xbb)][_0x56cbd4],_0x257a47=_0x382b63['array'][_0x444eb2],_0x313d53=(0x1-_0x2b060a)*(0x1-_0x291bd4)*_0x4d63a9+_0x2b060a*(0x1-_0x291bd4)*_0x5c2e10+(0x1-_0x2b060a)*_0x291bd4*_0x4742f3+_0x2b060a*_0x291bd4*_0x257a47,_0xbf8541=Math['sqrt'](_0x423e5c*_0x423e5c+_0x313d53*_0x313d53),_0x1c7118={};_0x1c7118['u']=_0x4fad63['array'][_0x4a6f59],_0x1c7118['v']=_0x382b63['array'][_0x4a6f59],_0x1c7118['speed']=_0x320a68[_0x5ef875(0x73,0xb1)][_0x4a6f59];const _0x2ac778={};_0x2ac778['u']=_0x423e5c,_0x2ac778['v']=_0x313d53,_0x2ac778['speed']=_0xbf8541;const _0x54f801={};return _0x54f801[_0x5ef875(0x54,-0x17)]=_0x1c7118,_0x54f801['interpolated']=_0x2ac778,_0x54f801;}}mars3d__namespace[_0x5661df(0x2d5,0x27e)]['register']('wind',WindLayer),mars3d__namespace[_0x5b619d(0x1cf,0x22c)][_0x5b619d(0x246,0x2c7)]=WindLayer;class CanvasParticle{constructor(){this[_0x1e0132(-0x1d1,-0x1ca)]=null;function _0x1949ef(_0x255f64,_0x45076e){return _0x5661df(_0x255f64,_0x45076e- -0x28e);}this[_0x1949ef(0x24,0x0)]=null;function _0x1e0132(_0x3f3314,_0x35ce9e){return _0x5661df(_0x3f3314,_0x35ce9e- -0x46c);}this[_0x1949ef(-0x3,-0x20)]=null,this[_0x1e0132(-0x181,-0x1ec)]=null,this['age']=null,this['speed']=null;}[_0x5b619d(0x1c3,0x14d)](){for(const _0x4d1c7e in this){delete this[_0x4d1c7e];}}}class CanvasWindField{constructor(_0x11c400){this['setOptions'](_0x11c400);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x41d81b){this['_speedRate']=(0x64-(_0x41d81b>0x63?0x63:_0x41d81b))*0x64;function _0x576010(_0x3f2ba2,_0x2db66c){return _0x5b619d(_0x2db66c-0x124,_0x3f2ba2);}function _0x108cc4(_0x254a6c,_0x2b8049){return _0x5661df(_0x254a6c,_0x2b8049-0x2bc);}this['_calc_speedRate']=[(this[_0x108cc4(0x4c3,0x516)]-this['xmin'])/this['_speedRate'],(this[_0x576010(0x35e,0x3a5)]-this['ymin'])/this['_speedRate']];}get[_0x5b619d(0x263,0x2e1)](){function _0x387a69(_0x13cce4,_0x5091e2){return _0x5661df(_0x5091e2,_0x13cce4- -0x74);}return this[_0x387a69(0x1b2,0x155)];}set['maxAge'](_0x520518){this['_maxAge']=_0x520518;}[_0x5b619d(0x20f,0x1d6)](_0xbcb139){function _0x5a1c9d(_0x40dd22,_0x4aa6f1){return _0x5661df(_0x4aa6f1,_0x40dd22- -0x376);}this['options']=_0xbcb139,this['maxAge']=_0xbcb139[_0x5a1c9d(-0x8c,-0x34)]||0x78,this['speedRate']=_0xbcb139['speedRate']||0x32;function _0x2d5aab(_0x891d9,_0x4df4c7){return _0x5661df(_0x4df4c7,_0x891d9-0x292);}this['particles']=[];const _0x1a289b=_0xbcb139['particlesNumber']||0x1000;for(let _0x311291=0x0;_0x311291<_0x1a289b;_0x311291++){const _0x151e9f=this['_randomParticle'](new CanvasParticle());this['particles'][_0x5a1c9d(-0xdd,-0x101)](_0x151e9f);}}['setDate'](_0x3bcf7e){function _0x496f97(_0x2cc56d,_0x28f5b6){return _0x5661df(_0x2cc56d,_0x28f5b6- -0x1a9);}this[_0x496f97(0x18b,0x110)]=_0x3bcf7e['rows'],this['cols']=_0x3bcf7e['cols'],this['xmin']=_0x3bcf7e['xmin'],this['xmax']=_0x3bcf7e['xmax'],this['ymin']=_0x3bcf7e[_0x496f97(0xa4,0xb3)],this['ymax']=_0x3bcf7e[_0x496f97(0x1d2,0x15f)],this['grid']=[];const _0x2d2a32=_0x3bcf7e[_0x57af1c(0x2b1,0x335)],_0x1fbb06=_0x3bcf7e['vdata'];let _0x3098b9=![];function _0x57af1c(_0x1fc1cc,_0x2edbad){return _0x5b619d(_0x1fc1cc-0x6c,_0x2edbad);}_0x2d2a32['length']===this[_0x57af1c(0x29e,0x229)]&&_0x2d2a32[0x0]['length']===this[_0x496f97(0x5a,0x83)]&&(_0x3098b9=!![]);let _0x2f0ad3=0x0,_0x5c57ae=null,_0x4a4482=null;for(let _0x28cbbf=0x0;_0x28cbbf<this['rows'];_0x28cbbf++){_0x5c57ae=[];for(let _0x51f23b=0x0;_0x51f23b<this['cols'];_0x51f23b++,_0x2f0ad3++){_0x3098b9?_0x4a4482=this['_calcUV'](_0x2d2a32[_0x28cbbf][_0x51f23b],_0x1fbb06[_0x28cbbf][_0x51f23b]):_0x4a4482=this['_calcUV'](_0x2d2a32[_0x2f0ad3],_0x1fbb06[_0x2f0ad3]),_0x5c57ae['push'](_0x4a4482);}this['grid']['push'](_0x5c57ae);}!this['options'][_0x496f97(0xc9,0xe0)]&&this['grid']['reverse']();}['clear'](){delete this['rows'],delete this[_0x594b6c(0xb6,0x121)],delete this['xmin'];function _0x594b6c(_0x3d86a9,_0x3d17c5){return _0x5b619d(_0x3d17c5- -0x84,_0x3d86a9);}delete this['xmax'],delete this['ymin'],delete this['ymax'],delete this['grid'],delete this['particles'];}['toGridXY'](_0x1be483,_0x2f242e){function _0xa5a1ac(_0x402f18,_0x452d0a){return _0x5661df(_0x402f18,_0x452d0a-0x29b);}const _0x11eab1=(_0x1be483-this['xmin'])/(this[_0x51f605(0xf8,0x121)]-this['xmin'])*(this['cols']-0x1),_0x26e997=(this['ymax']-_0x2f242e)/(this[_0x51f605(0x1cf,0x1cf)]-this[_0x51f605(0x10e,0x123)])*(this['rows']-0x1);function _0x51f605(_0x398d7a,_0xcd1b9e){return _0x5661df(_0x398d7a,_0xcd1b9e- -0x139);}return[_0x11eab1,_0x26e997];}[_0x5b619d(0x199,0x1a9)](_0x1e3e7d,_0x1feef9){if(_0x1e3e7d<0x0||_0x1e3e7d>=this['cols']||_0x1feef9>=this[_0x273689(0x375,0x37b)])return[0x0,0x0,0x0];const _0x31991f=Math[_0x273689(0x2c4,0x2d5)](_0x1e3e7d);function _0x4bf16b(_0x559f13,_0x44bd75){return _0x5b619d(_0x44bd75- -0x209,_0x559f13);}const _0x3a098d=Math[_0x273689(0x2b3,0x2d5)](_0x1feef9);if(_0x31991f===_0x1e3e7d&&_0x3a098d===_0x1feef9)return this['grid'][_0x1feef9][_0x1e3e7d];const _0xa444bd=_0x31991f+0x1,_0x3bf1f5=_0x3a098d+0x1,_0x120e6b=this[_0x4bf16b(-0xaf,-0x70)](_0x31991f,_0x3a098d),_0x21950e=this[_0x273689(0x315,0x2e2)](_0xa444bd,_0x3a098d),_0x2caa9d=this[_0x273689(0x2e3,0x2e2)](_0x31991f,_0x3bf1f5),_0x30d888=this[_0x4bf16b(-0x14,-0x70)](_0xa444bd,_0x3bf1f5);let _0xc1ce5=null;try{_0xc1ce5=this[_0x273689(0x40f,0x3a7)](_0x1e3e7d-_0x31991f,_0x1feef9-_0x3a098d,_0x120e6b,_0x21950e,_0x2caa9d,_0x30d888);}catch(_0x1850b1){console[_0x4bf16b(-0x1d,-0x6f)](_0x1e3e7d,_0x1feef9);}function _0x273689(_0x3c81ec,_0x487d71){return _0x5b619d(_0x487d71-0x149,_0x3c81ec);}return _0xc1ce5;}['_bilinearInterpolation'](_0x43ddaa,_0x232df1,_0xaae1ee,_0x4eac80,_0x1ff5fa,_0x2268d0){const _0x47802b=0x1-_0x43ddaa,_0x50f473=0x1-_0x232df1;function _0x462c89(_0x1c14ba,_0x11fb58){return _0x5b619d(_0x1c14ba- -0xe,_0x11fb58);}const _0x272831=_0x47802b*_0x50f473,_0x24baed=_0x43ddaa*_0x50f473,_0x82767b=_0x47802b*_0x232df1,_0x550faf=_0x43ddaa*_0x232df1,_0x337ad=_0xaae1ee[0x0]*_0x272831+_0x4eac80[0x0]*_0x24baed+_0x1ff5fa[0x0]*_0x82767b+_0x2268d0[0x0]*_0x550faf,_0x44af17=_0xaae1ee[0x1]*_0x272831+_0x4eac80[0x1]*_0x24baed+_0x1ff5fa[0x1]*_0x82767b+_0x2268d0[0x1]*_0x550faf;return this[_0x462c89(0x209,0x199)](_0x337ad,_0x44af17);}[_0x5b619d(0x217,0x1e5)](_0x9b8b0f,_0x18736e){return[+_0x9b8b0f,+_0x18736e,Math['sqrt'](_0x9b8b0f*_0x9b8b0f+_0x18736e*_0x18736e)];}[_0x5b619d(0x1b2,0x18f)](_0x106c75,_0x4a3e28){if(!this[_0x5d8942(0x36e,0x2ee)](_0x106c75,_0x4a3e28))return null;const _0x4c8994=this['toGridXY'](_0x106c75,_0x4a3e28),_0x2e4624=this['getUVByXY'](_0x4c8994[0x0],_0x4c8994[0x1]);function _0x5d8942(_0x54c2ee,_0x39ba18){return _0x5b619d(_0x54c2ee-0x107,_0x39ba18);}return _0x2e4624;}['isInExtent'](_0x5925f4,_0x1a9a02){function _0x11888(_0x3ac56c,_0x3769d7){return _0x5b619d(_0x3769d7-0x60,_0x3ac56c);}function _0xf6af95(_0x324bbe,_0x5d5a34){return _0x5b619d(_0x5d5a34-0xde,_0x324bbe);}return _0x5925f4>=this[_0x11888(0x333,0x2d0)]&&_0x5925f4<=this[_0x11888(0x1d9,0x233)]&&_0x1a9a02>=this['ymin']&&_0x1a9a02<=this[_0xf6af95(0x2e3,0x35f)]?!![]:![];}[_0x5661df(0x2aa,0x2ff)](){function _0xc06d7b(_0x2169a5,_0x422f84){return _0x5661df(_0x2169a5,_0x422f84- -0x2fa);}const _0x534eae=fRandomByfloat(this['xmin'],this['xmax']),_0x3c8491=fRandomByfloat(this['ymin'],this['ymax']),_0x51f81e={};return _0x51f81e['lat']=_0x3c8491,_0x51f81e[_0xc06d7b(-0xd,-0x58)]=_0x534eae,_0x51f81e;}[_0x5661df(0x288,0x25f)](){let _0x1b8692,_0x479e4a,_0x4c216c;function _0x14dd0f(_0x16611b,_0x5b742f){return _0x5b619d(_0x16611b-0x2,_0x5b742f);}for(let _0x52c533=0x0,_0x52b949=this['particles']['length'];_0x52c533<_0x52b949;_0x52c533++){let _0x58340c=this['particles'][_0x52c533];_0x58340c[_0x14dd0f(0x1f3,0x264)]<=0x0&&(_0x58340c=this[_0x3272a8(0x27f,0x2fb)](_0x58340c));if(_0x58340c[_0x14dd0f(0x1f3,0x1f8)]>0x0){const _0x4ad706=_0x58340c['tlng'],_0x2f350a=_0x58340c['tlat'];_0x4c216c=this['getUVByPoint'](_0x4ad706,_0x2f350a),_0x4c216c?(_0x1b8692=_0x4ad706+this['_calc_speedRate'][0x0]*_0x4c216c[0x0],_0x479e4a=_0x2f350a+this['_calc_speedRate'][0x1]*_0x4c216c[0x1],_0x58340c[_0x3272a8(0x22c,0x1ee)]=_0x4ad706,_0x58340c['lat']=_0x2f350a,_0x58340c[_0x3272a8(0x1f8,0x1ef)]=_0x1b8692,_0x58340c['tlat']=_0x479e4a,_0x58340c['speed']=_0x4c216c[0x2],_0x58340c[_0x3272a8(0x202,0x203)]--):_0x58340c[_0x14dd0f(0x1f3,0x24e)]=0x0;}}function _0x3272a8(_0x1a18d6,_0x3d79cd){return _0x5b619d(_0x1a18d6-0x11,_0x3d79cd);}return this['particles'];}['_randomParticle'](_0x37c30e){function _0x1ce878(_0x7e095,_0x1351e7){return _0x5661df(_0x1351e7,_0x7e095- -0x3ed);}let _0x1bc496,_0x23247c;for(let _0x543246=0x0;_0x543246<0x1e;_0x543246++){_0x1bc496=this[_0x1ce878(-0xee,-0x127)](),_0x23247c=this[_0x1ce878(-0x1b4,-0x172)](_0x1bc496[_0x1ce878(-0x14b,-0x100)],_0x1bc496[_0x45ac1b(-0xea,-0x132)]);if(_0x23247c&&_0x23247c[0x2]>0x0)break;}if(!_0x23247c)return _0x37c30e;const _0x4ed2fe=_0x1bc496['lng']+this[_0x1ce878(-0x124,-0x18b)][0x0]*_0x23247c[0x0],_0x3f92cd=_0x1bc496[_0x1ce878(-0x15f,-0x1c7)]+this[_0x45ac1b(-0x15f,-0xf7)][0x1]*_0x23247c[0x1];_0x37c30e['lng']=_0x1bc496['lng'],_0x37c30e[_0x45ac1b(-0x180,-0x132)]=_0x1bc496['lat'],_0x37c30e['tlng']=_0x4ed2fe,_0x37c30e['tlat']=_0x3f92cd,_0x37c30e['age']=Math['round'](0xa+Math['random']()*this[_0x1ce878(-0x103,-0x172)]);function _0x45ac1b(_0x56588e,_0x1f2013){return _0x5661df(_0x56588e,_0x1f2013- -0x3c0);}return _0x37c30e['speed']=_0x23247c[0x2],_0x37c30e;}[_0x5661df(0x1c7,0x24a)](){for(const _0xb283d3 in this){delete this[_0xb283d3];}}}function fRandomByfloat(_0x8fef28,_0x26ed9a){function _0x526ed4(_0x18894d,_0x24d693){return _0x5b619d(_0x24d693- -0x2a0,_0x18894d);}return _0x8fef28+Math[_0x526ed4(-0x95,-0x33)]()*(_0x26ed9a-_0x8fef28);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x5661df(0x1f3,0x256)][_0x5b619d(0x220,0x228)];class CanvasWindLayer extends BaseLayer{constructor(_0x1654ae={}){super(_0x1654ae),this[_0x3bce2c(-0x1ec,-0x1aa)](_0x1654ae),this['canvas']=null;function _0x3bce2c(_0x2dc83e,_0x3c0fb4){return _0x5b619d(_0x3c0fb4- -0x341,_0x2dc83e);}_0x1654ae['colors']&&_0x1654ae['steps']&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x1654ae));}['_setOptionsHook'](_0x9b2fcd,_0xb52c8e){function _0x563d34(_0x1b438f,_0x4bf3be){return _0x5661df(_0x1b438f,_0x4bf3be- -0x48b);}this['frameTime']=0x3e8/(_0x9b2fcd['frameRate']||0xa),this['_pointerEvents']=this[_0x41d448(0x3ee,0x3df)]['pointerEvents']??![];function _0x41d448(_0x268927,_0x1e5440){return _0x5661df(_0x268927,_0x1e5440-0xd3);}this[_0x41d448(0x402,0x3d0)]=_0x9b2fcd[_0x563d34(-0x1c8,-0x18e)]||'#ffffff',this['lineWidth']=_0x9b2fcd['lineWidth']||0x1,this['fixedHeight']=_0x9b2fcd[_0x563d34(-0x27c,-0x276)]??0x0,this['flipY']=_0x9b2fcd['flipY']??![],this['windField']&&this[_0x563d34(-0x235,-0x220)]['setOptions'](_0x9b2fcd);}get['layer'](){return this['canvas'];}get['canvasWidth'](){function _0x536313(_0x2bf29e,_0x39f344){return _0x5b619d(_0x39f344-0x1aa,_0x2bf29e);}return this['_map']['scene']['canvas'][_0x536313(0x3b5,0x3af)];}get[_0x5661df(0x2c1,0x2e9)](){function _0x497eb4(_0x3bac20,_0x21cc45){return _0x5b619d(_0x3bac20-0x5c,_0x21cc45);}function _0xd2c34b(_0x22e72f,_0x5c6f41){return _0x5b619d(_0x5c6f41- -0x195,_0x22e72f);}return this[_0x497eb4(0x2ab,0x29d)]['scene'][_0x497eb4(0x299,0x283)]['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x150286){this['_pointerEvents']=_0x150286;function _0x14592e(_0x1be1c2,_0x443cbe){return _0x5b619d(_0x1be1c2-0x329,_0x443cbe);}if(!this['canvas'])return;function _0x1f596d(_0x1c5517,_0x117248){return _0x5b619d(_0x117248-0x151,_0x1c5517);}_0x150286?this['canvas']['style']['pointer-events']='all':this[_0x1f596d(0x3fe,0x38e)]['style']['pointer-events']=_0x1f596d(0x2ee,0x332);}get['particlesNumber'](){function _0x4aa17a(_0x47e392,_0x52df06){return _0x5661df(_0x47e392,_0x52df06- -0x252);}function _0x3a71d8(_0x2599a2,_0x4145f1){return _0x5661df(_0x2599a2,_0x4145f1-0xb8);}return this[_0x4aa17a(0x76,0xba)][_0x4aa17a(0x4a,0x9e)];}set['particlesNumber'](_0x161471){this['options'][_0x2cdd49(0x1b9,0x22b)]=_0x161471,clearTimeout(this['_canrefresh']);function _0x2cdd49(_0x128ffe,_0x43ddc4){return _0x5661df(_0x43ddc4,_0x128ffe- -0x137);}function _0x134bba(_0x4d254c,_0x596b95){return _0x5661df(_0x596b95,_0x4d254c-0x273);}this[_0x2cdd49(0x17c,0x120)]=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x5b619d(0x26c,0x26b)](){function _0x15246f(_0x618264,_0x3f3f39){return _0x5661df(_0x618264,_0x3f3f39- -0x90);}return this['options'][_0x15246f(0x2c9,0x263)];}set['speedRate'](_0x299062){this['options']['speedRate']=_0x299062;function _0x3dae32(_0x22fe58,_0x37e58f){return _0x5661df(_0x37e58f,_0x22fe58- -0x156);}this['windField']&&(this[_0x3dae32(0x115,0x120)]['speedRate']=_0x299062);}get['maxAge'](){function _0x1633e1(_0x125355,_0x5e4fd2){return _0x5661df(_0x125355,_0x5e4fd2- -0x3e3);}function _0x7ac5bd(_0x130f53,_0x1171bc){return _0x5661df(_0x1171bc,_0x130f53- -0x3c0);}return this[_0x1633e1(-0xdc,-0xd7)][_0x7ac5bd(-0xd6,-0x13c)];}set[_0x5661df(0x2c7,0x2ea)](_0x3975fa){function _0x170816(_0x22b0fe,_0x1c9869){return _0x5b619d(_0x1c9869- -0x2c5,_0x22b0fe);}this['options']['maxAge']=_0x3975fa,this['windField']&&(this['windField'][_0x170816(-0x40,-0x62)]=_0x3975fa);}get['data'](){return this['windData'];}set[_0x5661df(0x1ed,0x217)](_0x304c6c){this['setData'](_0x304c6c);}get[_0x5b619d(0x283,0x221)](){let _0x55e264=this['windData']['xmin'],_0x262e46=this['windData']['xmax'],_0x3b4ae8=this[_0x578ec8(0x1a1,0x225)]['ymin'],_0x4ab0c9=this[_0x587ce4(0x44c,0x446)]['ymax'];_0x262e46>=0x167&&_0x55e264===0x0&&(_0x55e264=-0xb4,_0x262e46=0xb4);function _0x578ec8(_0x438ad7,_0x38b092){return _0x5661df(_0x38b092,_0x438ad7- -0x164);}function _0x587ce4(_0x172406,_0x3e5193){return _0x5661df(_0x172406,_0x3e5193-0x141);}return _0x55e264=Math[_0x578ec8(0x19a,0x13b)](_0x55e264,-0xb4),_0x262e46=Math[_0x587ce4(0x3c4,0x3e2)](_0x262e46,0xb4),_0x3b4ae8=Math[_0x587ce4(0x44a,0x43f)](_0x3b4ae8,-0x5a),_0x4ab0c9=Math['min'](_0x4ab0c9,0x5a),Cesium['Rectangle']['fromDegrees'](_0x55e264,_0x3b4ae8,_0x262e46,_0x4ab0c9);}[_0x5b619d(0x22b,0x24d)](_0x26a6cc){function _0x1ffb85(_0x3a5510,_0x210d45){return _0x5b619d(_0x210d45-0x187,_0x3a5510);}function _0x5f0442(_0x223486,_0x5b3e93){return _0x5661df(_0x5b3e93,_0x223486-0x18d);}_0x26a6cc?this[_0x1ffb85(0x408,0x3b5)]():(this['windData']&&(this[_0x1ffb85(0x3b2,0x40c)]['data']=this['windData']),this[_0x5f0442(0x44b,0x3da)]());}[_0x5661df(0x23b,0x232)](){function _0x5eea50(_0xc89bff,_0x1d5659){return _0x5661df(_0x1d5659,_0xc89bff-0x259);}this['options']['worker']?this['initWorker']():this['windField']=new CanvasWindField(this[_0x5eea50(0x565,0x58c)]);}[_0x5b619d(0x22e,0x206)](){function _0x1fd0f7(_0x227f88,_0x11065e){return _0x5661df(_0x11065e,_0x227f88-0x115);}this[_0x21a604(0x245,0x269)]=this['_createCanvas']();const _0x1ea259={};_0x1ea259[_0x1fd0f7(0x32b,0x3a8)]=!![],this['canvasContext']=this[_0x1fd0f7(0x3d9,0x454)]['getContext']('2d',_0x1ea259);function _0x21a604(_0x493093,_0x21b8f4){return _0x5661df(_0x21b8f4,_0x493093- -0x7f);}this[_0x1fd0f7(0x388,0x3f7)](),this['options']['data']&&this[_0x21a604(0x210,0x287)](this[_0x21a604(0x28d,0x302)]['data']);}[_0x5661df(0x290,0x2be)](){function _0x8c32e0(_0x13602e,_0x249824){return _0x5b619d(_0x13602e-0x305,_0x249824);}this['clear'](),this['unbindEvent'](),this['canvas']&&(this['_map'][_0x8c32e0(0x485,0x464)]['removeChild'](this['canvas']),delete this['canvas']);}['_createCanvas'](){const _0x263bfa=mars3d__namespace[_0x3fd13f(0x1fd,0x23e)][_0x37693b(0x17b,0x1d7)](_0x37693b(0x1ca,0x1b8),'mars3d-canvasWind',this['_map']['container']);_0x263bfa['style']['position']='absolute',_0x263bfa[_0x37693b(0x17f,0x127)][_0x37693b(0x1d5,0x163)]='0px',_0x263bfa[_0x37693b(0x197,0x127)][_0x3fd13f(0x1e4,0x238)]='0px',_0x263bfa['style']['width']=this['_map']['scene']['canvas'][_0x37693b(0x14c,0x180)]+'px',_0x263bfa['style'][_0x3fd13f(0x268,0x1ef)]=this[_0x37693b(0x1e3,0x1ca)]['scene']['canvas'][_0x3fd13f(0x286,0x23f)]+'px',_0x263bfa['style']['pointerEvents']=this['_pointerEvents']?'auto':_0x3fd13f(0x228,0x25a),_0x263bfa[_0x37693b(0x175,0x127)][_0x3fd13f(0x291,0x2d8)]=this[_0x3fd13f(0x2cc,0x2e5)][_0x3fd13f(0x291,0x2ef)]??0x9,_0x263bfa['width']=this['_map'][_0x37693b(0x175,0x138)]['canvas']['clientWidth'];function _0x37693b(_0x5eaf76,_0x5d1d51){return _0x5b619d(_0x5d1d51- -0x85,_0x5eaf76);}_0x263bfa[_0x37693b(0x134,0x19c)]=this[_0x37693b(0x16f,0x1ca)]['scene']['canvas'][_0x3fd13f(0x286,0x234)];function _0x3fd13f(_0xb90421,_0x176ccc){return _0x5b619d(_0xb90421-0x47,_0x176ccc);}return _0x263bfa;}[_0x5b619d(0x1d1,0x187)](){function _0x46c32d(_0x4eea85,_0x17928d){return _0x5b619d(_0x4eea85- -0xff,_0x17928d);}function _0x7a4946(_0x30897b,_0x3aab64){return _0x5b619d(_0x3aab64- -0x3a9,_0x30897b);}this[_0x7a4946(-0x18b,-0x16c)]&&(this[_0x46c32d(0x13e,0x143)]['style']['width']=this[_0x7a4946(-0x1cc,-0x15a)][_0x7a4946(-0x1e9,-0x1ec)]['canvas']['clientWidth']+'px',this[_0x46c32d(0x13e,0x103)][_0x7a4946(-0x1b8,-0x1fd)][_0x7a4946(-0x184,-0x188)]=this['_map']['scene']['canvas'][_0x7a4946(-0x18d,-0x16a)]+'px',this[_0x7a4946(-0x184,-0x16c)]['width']=this['_map']['scene'][_0x46c32d(0x13e,0xc8)][_0x46c32d(0x106,0x124)],this['canvas']['height']=this[_0x7a4946(-0x184,-0x15a)]['scene']['canvas']['clientHeight']);}['bindEvent'](){const _0x4e6ab8=this;function _0x290716(_0x485162,_0xce8389){return _0x5b619d(_0xce8389- -0x407,_0x485162);}let _0x4dc2f8=Date['now']();(function _0x44178d(){if(_0x4e6ab8['isDestroy'])return;function _0xaa1cf1(_0x2dc68f,_0x3c1817){return _0x4243(_0x3c1817-0x253,_0x2dc68f);}function _0xcc69c7(_0x3e050f,_0x40af68){return _0x4243(_0x40af68-0xd6,_0x3e050f);}_0x4e6ab8['_animateFrame']=window['requestAnimationFrame'](_0x44178d);if(_0x4e6ab8['show']&&_0x4e6ab8[_0xcc69c7(0x229,0x22f)]){const _0x16c52d=Date['now'](),_0x5cfab9=_0x16c52d-_0x4dc2f8;_0x5cfab9>_0x4e6ab8['frameTime']&&(_0x4dc2f8=_0x16c52d-_0x5cfab9%_0x4e6ab8[_0xcc69c7(0x279,0x229)],_0x4e6ab8[_0xcc69c7(0x218,0x1d8)]());}}());function _0xed580d(_0x2ea024,_0x1c8496){return _0x5b619d(_0x2ea024-0x172,_0x1c8496);}window['addEventListener']('resize',this['resize']['bind'](this),![]),this['mouse_down']=![],this['mouse_move']=![],this['options']['mouseHidden']&&(this[_0xed580d(0x3c1,0x3d1)]['on'](mars3d__namespace[_0xed580d(0x36d,0x3a4)]['wheel'],this['_onMapWhellEvent'],this),this[_0xed580d(0x3c1,0x42b)]['on'](mars3d__namespace[_0xed580d(0x36d,0x365)]['mouseDown'],this['_onMouseDownEvent'],this),this[_0xed580d(0x3c1,0x350)]['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this));}[_0x5661df(0x29b,0x2b7)](){function _0x2aba28(_0x2be51e,_0x37d898){return _0x5b619d(_0x2be51e-0x343,_0x37d898);}window['cancelAnimationFrame'](this[_0x334aac(-0x84,-0x61)]),delete this['_animateFrame'];function _0x334aac(_0x41c0eb,_0x2a8d69){return _0x5b619d(_0x2a8d69- -0x2a9,_0x41c0eb);}window['removeEventListener']('resize',this['resize']),this['options'][_0x2aba28(0x4cc,0x547)]&&(this['_map']['off'](mars3d__namespace[_0x2aba28(0x53e,0x529)]['wheel'],this[_0x2aba28(0x570,0x568)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this[_0x334aac(0x24,-0x5a)][_0x334aac(-0xad,-0x2e)](mars3d__namespace['EventType'][_0x334aac(-0x12b,-0xe4)],this['_onMouseUpEvent'],this),this['_map'][_0x334aac(-0xa,-0x2e)](mars3d__namespace[_0x334aac(-0xad,-0xae)]['mouseMove'],this[_0x334aac(-0xb1,-0x10d)],this));}['_onMapWhellEvent'](_0x1341e4){clearTimeout(this['refreshTimer']);if(!this['show']||!this['canvas'])return;this['canvas']['style']['visibility']='hidden',this['refreshTimer']=setTimeout(()=>{function _0x4f8372(_0x2a3aed,_0x2254d9){return _0x4243(_0x2a3aed-0x293,_0x2254d9);}function _0x365f76(_0x3e1e0a,_0x57eee2){return _0x4243(_0x3e1e0a- -0x163,_0x57eee2);}if(!this[_0x4f8372(0x3c1,0x410)])return;this['redraw'](),this['canvas']['style']['visibility']=_0x4f8372(0x484,0x4b5);},0xc8);}['_onMouseDownEvent'](_0xb7d5de){this[_0xb33425(0x46e,0x40b)]=!![];function _0x3d0312(_0xfdaebb,_0x35fbdd){return _0x5661df(_0x35fbdd,_0xfdaebb-0x178);}this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x3d0312(0x39b,0x361)],this);function _0xb33425(_0x263b65,_0x3371d1){return _0x5661df(_0x3371d1,_0x263b65-0x22f);}this[_0x3d0312(0x44e,0x3f9)]['on'](mars3d__namespace[_0xb33425(0x4b1,0x4b7)][_0xb33425(0x456,0x3e1)],this[_0xb33425(0x452,0x478)],this);}['_onMouseMoveEvent'](_0x35ceba){function _0x15eff3(_0x26da9e,_0x5de100){return _0x5b619d(_0x26da9e- -0x24f,_0x5de100);}if(!this['show']||!this[_0x15eff3(-0x12,-0x27)])return;function _0x403041(_0x35a588,_0x494fb2){return _0x5b619d(_0x35a588-0x11d,_0x494fb2);}this[_0x15eff3(-0x97,-0xbc)]&&(this['canvas']['style'][_0x403041(0x2cb,0x26c)]='hidden',this['mouse_move']=!![]);}['_onMouseUpEvent'](_0xceab0a){function _0x234b52(_0x4ca22b,_0x2a69b1){return _0x5b619d(_0x4ca22b- -0x347,_0x2a69b1);}if(!this['show']||!this['canvas'])return;this['_map'][_0x1a81b5(0xfe,0x175)](mars3d__namespace[_0x234b52(-0x14c,-0xeb)][_0x234b52(-0x1a7,-0x14b)],this['_onMouseMoveEvent'],this);function _0x1a81b5(_0x26404d,_0x25599c){return _0x5b619d(_0x25599c- -0x106,_0x26404d);}this['mouse_down']&&this[_0x234b52(-0x190,-0x14e)]&&this['redraw'](),this['canvas'][_0x234b52(-0x19b,-0x16e)]['visibility']=_0x1a81b5(0x1b7,0x176),this['mouse_down']=![],this['mouse_move']=![];}['setData'](_0x4d87d5){this[_0x205122(0x414,0x46d)]();function _0x4dd7cf(_0x3ab0a7,_0x18087f){return _0x5661df(_0x18087f,_0x3ab0a7- -0x4b4);}this[_0x4dd7cf(-0x1af,-0x16f)]=_0x4d87d5,this[_0x4dd7cf(-0x249,-0x28d)]['setDate'](_0x4d87d5);function _0x205122(_0x1cc16a,_0x4f744e){return _0x5b619d(_0x1cc16a-0x1c1,_0x4f744e);}this['redraw']();}['redraw'](){if(!this['show'])return;this['windField']['setOptions'](this['options']),this['update']();}[_0x5b619d(0x18d,0x173)](){if(this[_0x341a6a(0x385,0x3b9)])return;function _0x341a6a(_0x932a4e,_0x338c9f){return _0x5661df(_0x932a4e,_0x338c9f-0x157);}this['_updateIng']=!![];function _0x4b4a15(_0x149c8e,_0x5eb0bb){return _0x5661df(_0x5eb0bb,_0x149c8e-0x1e8);}if(this['worker'])this[_0x341a6a(0x41b,0x3c2)]['update']();else{const _0x16ed16=this[_0x341a6a(0x39c,0x3c2)][_0x341a6a(0x401,0x3b6)]();this['_drawLines'](_0x16ed16);}this[_0x4b4a15(0x44a,0x411)]=![];}['_drawLines'](_0x15bcd2){this['_canvasParticles']=_0x15bcd2,this['canvasContext']['globalCompositeOperation']='destination-in',this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this[_0x350a81(0x67,-0xc)]['globalCompositeOperation']=_0x350a81(0x35,0x27),this[_0x350a81(0x67,0xec)][_0x81e030(0x2c0,0x252)]=0.9;function _0x350a81(_0x1aa2c7,_0x51cad7){return _0x5b619d(_0x1aa2c7- -0x219,_0x51cad7);}function _0x81e030(_0x5020b4,_0x49a64a){return _0x5b619d(_0x5020b4-0x69,_0x49a64a);}const _0x5da082=this['_map']['scene']['mode']!==Cesium[_0x81e030(0x2a5,0x322)]['SCENE3D'],_0x1e5bc8=this[_0x350a81(-0x6a,-0x59)]*0.25;if(this[_0x350a81(-0x77,-0xcd)])for(let _0x58d9b8=0x0,_0x20bf9e=_0x15bcd2[_0x350a81(0x64,0x35)];_0x58d9b8<_0x20bf9e;_0x58d9b8++){const _0x6ccc0a=_0x15bcd2[_0x58d9b8],_0x409965=this['_tomap'](_0x6ccc0a,_0x6ccc0a[_0x81e030(0x284,0x2d2)],_0x6ccc0a['lat'],_0x6ccc0a['alt']),_0xcedc5f=this[_0x350a81(0x47,-0x27)](_0x6ccc0a,_0x6ccc0a[_0x350a81(-0x32,0x2a)],_0x6ccc0a['tlat'],_0x6ccc0a['talt']);if(!_0x409965||!_0xcedc5f)continue;if(_0x5da082&&Math['abs'](_0x409965[0x0]-_0xcedc5f[0x0])>=_0x1e5bc8)continue;this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this['_colorRamp']['getColor'](_0x6ccc0a[_0x81e030(0x2bb,0x2ef)]),this['canvasContext']['moveTo'](_0x409965[0x0],_0x409965[0x1]),this['canvasContext'][_0x350a81(-0x40,-0x28)](_0xcedc5f[0x0],_0xcedc5f[0x1]),this[_0x350a81(0x67,-0x2)]['stroke']();}else{this['canvasContext'][_0x81e030(0x257,0x275)](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x350a81(0x67,0xe8)]['strokeStyle']=this[_0x81e030(0x2df,0x348)];for(let _0x50e3ac=0x0,_0x34d746=_0x15bcd2['length'];_0x50e3ac<_0x34d746;_0x50e3ac++){const _0x4f3b1f=_0x15bcd2[_0x50e3ac],_0x23606f=this[_0x350a81(0x47,-0x1e)](_0x4f3b1f,_0x4f3b1f['lng'],_0x4f3b1f[_0x350a81(-0x12,-0x36)],_0x4f3b1f['alt']),_0xb35e2c=this['_tomap'](_0x4f3b1f,_0x4f3b1f[_0x350a81(-0x32,-0x17)],_0x4f3b1f[_0x81e030(0x262,0x26f)],_0x4f3b1f[_0x81e030(0x235,0x1c1)]);if(!_0x23606f||!_0xb35e2c)continue;if(_0x5da082&&Math['abs'](_0x23606f[0x0]-_0xb35e2c[0x0])>=_0x1e5bc8)continue;this[_0x350a81(0x67,0xbd)]['moveTo'](_0x23606f[0x0],_0x23606f[0x1]),this[_0x350a81(0x67,0xcc)]['lineTo'](_0xb35e2c[0x0],_0xb35e2c[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x26634e,_0x1e390d,_0x59fce5,_0x583923){const _0x1e7a42=Cesium['Cartesian3']['fromDegrees'](_0x1e390d,_0x59fce5,_0x583923??this['fixedHeight']);function _0x4ae943(_0x2cb8fc,_0x3a1662){return _0x5b619d(_0x2cb8fc- -0x199,_0x3a1662);}const _0x1fb0a9=this[_0x4ae943(0xb6,0x42)]['scene'];if(_0x1fb0a9['mode']===Cesium[_0x4ae943(0xa3,0xe4)]['SCENE3D']){const _0xb83181=new Cesium['EllipsoidalOccluder'](_0x1fb0a9['globe']['ellipsoid'],_0x1fb0a9['camera']['positionWC']),_0x355225=_0xb83181[_0x572938(0x180,0x1d7)](_0x1e7a42);if(!_0x355225)return _0x26634e['age']=0x0,null;}function _0x572938(_0x428ae5,_0x580ac1){return _0x5b619d(_0x580ac1- -0x7e,_0x428ae5);}const _0x2c8cc4=mars3d__namespace['PointTrans'][_0x572938(0x14d,0x180)](this['_map'][_0x572938(0xc1,0x13f)],_0x1e7a42);return _0x2c8cc4?[_0x2c8cc4['x'],_0x2c8cc4['y']]:null;}['clear'](){function _0x12d088(_0x1e224d,_0x31c7f0){return _0x5b619d(_0x31c7f0-0x9f,_0x1e224d);}this[_0x12d088(0x2bd,0x283)]['clear'](),delete this['windData'];}['initWorker'](){function _0x33472f(_0x5f5be5,_0x3f1e4a){return _0x5661df(_0x3f1e4a,_0x5f5be5- -0x4e);}function _0x4ac304(_0x15f86d,_0x35f676){return _0x5b619d(_0x35f676- -0x3e7,_0x15f86d);}this[_0x33472f(0x1ea,0x23b)]=new Worker(this[_0x33472f(0x2be,0x262)][_0x33472f(0x1ea,0x192)]),this['worker']['onmessage']=_0x18e7ce=>{function _0x73254(_0x44a570,_0x55547f){return _0x4ac304(_0x55547f,_0x44a570-0x719);}this[_0x23adcd(0xc,0x17)](_0x18e7ce['data'][_0x23adcd(-0xdc,-0xd0)]);function _0x23adcd(_0x119811,_0x3a5d85){return _0x33472f(_0x119811- -0x2a7,_0x3a5d85);}this[_0x73254(0x50c,0x4ab)]=![];},this['windField']={'init':_0x1b8375=>{const _0x2cf2aa={};function _0x50f8dc(_0x30a453,_0x35f3d5){return _0x4ac304(_0x30a453,_0x35f3d5-0x4a6);}_0x2cf2aa['type']='init',_0x2cf2aa[_0x50f8dc(0x33c,0x344)]=_0x1b8375,this['worker']['postMessage'](_0x2cf2aa);},'setOptions':_0x1b264d=>{const _0x197460={};_0x197460['type']='setOptions',_0x197460['options']=_0x1b264d;function _0x32b92f(_0xb8734c,_0x380132){return _0x4ac304(_0x380132,_0xb8734c-0x59);}this['worker'][_0x32b92f(-0x1c7,-0x1c9)](_0x197460);},'setDate':_0x8a76ee=>{const _0x36b445={};_0x36b445[_0x10ce5d(0x488,0x4c4)]='setDate';function _0x10ce5d(_0x13186c,_0x407efd){return _0x4ac304(_0x407efd,_0x13186c-0x670);}function _0x5cdf65(_0x7b4ab8,_0x5d037b){return _0x33472f(_0x5d037b- -0x24,_0x7b4ab8);}_0x36b445['data']=_0x8a76ee,this[_0x10ce5d(0x43a,0x436)][_0x10ce5d(0x450,0x4d5)](_0x36b445);},'update':()=>{if(this['_updateIng2'])return;function _0x3e6316(_0x4f05cc,_0x484a00){return _0x33472f(_0x4f05cc- -0x3a8,_0x484a00);}this[_0x24bd71(-0x84,-0x103)]=!![];const _0x1b87e9={};_0x1b87e9[_0x24bd71(-0x5f,-0x86)]='update';function _0x24bd71(_0x22e6e1,_0x85b8fc){return _0x4ac304(_0x85b8fc,_0x22e6e1-0x189);}this['worker'][_0x24bd71(-0x97,-0xa1)](_0x1b87e9);},'clear':()=>{function _0x2b98a4(_0xf82a34,_0x4313d9){return _0x33472f(_0x4313d9- -0x34d,_0xf82a34);}const _0x1bb799={};_0x1bb799['type']='clear',this['worker'][_0x2b98a4(-0xef,-0x14d)](_0x1bb799);}},this['windField']['init'](this[_0x33472f(0x2be,0x243)]);}}mars3d__namespace[_0x5661df(0x2b5,0x27e)]['register'](_0x5b619d(0x206,0x200),CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace[_0x5661df(0x28d,0x241)][_0x5661df(0x28f,0x24f)]('mars3d-wind插件\x20注册成功'),mars3d__namespace['WindUtil']=WindUtil,exports[_0x5b619d(0x26b,0x215)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer;function _0x5661df(_0x1a6e35,_0x3b5219){return _0x4243(_0x3b5219-0x112,_0x1a6e35);}exports[_0x5b619d(0x246,0x1c6)]=WindLayer,exports[_0x5b619d(0x27f,0x249)]=WindUtil;const _0x45b38c={};_0x45b38c[_0x5661df(0x2e3,0x29c)]=!![],Object[_0x5661df(0x284,0x25d)](exports,'__esModule',_0x45b38c);
}));
