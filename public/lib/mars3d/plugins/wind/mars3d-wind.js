/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.5
 * 编译日期：2025-09-14 12:22
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x4f81ef,_0x71dcf9){function _0x2679fd(_0x522207,_0x5c6304){return _0x2cae(_0x522207-0x165,_0x5c6304);}function _0x1490dd(_0x3b2e40,_0x8dafc1){return _0x2cae(_0x3b2e40- -0x25f,_0x8dafc1);}const _0x82ad0c=_0x4f81ef();while(!![]){try{const _0x3b8521=parseInt(_0x1490dd(-0x1a5,-0x13e))/0x1*(-parseInt(_0x1490dd(-0x1c3,-0x18f))/0x2)+parseInt(_0x2679fd(0x2ee,0x278))/0x3*(parseInt(_0x2679fd(0x20a,0x20a))/0x4)+-parseInt(_0x2679fd(0x2e3,0x361))/0x5+parseInt(_0x1490dd(-0xd1,-0x4e))/0x6*(-parseInt(_0x1490dd(-0x1bf,-0x214))/0x7)+parseInt(_0x2679fd(0x1f8,0x175))/0x8*(parseInt(_0x2679fd(0x259,0x20b))/0x9)+-parseInt(_0x1490dd(-0x1b4,-0x241))/0xa+-parseInt(_0x2679fd(0x29d,0x249))/0xb*(-parseInt(_0x1490dd(-0x1cd,-0x161))/0xc);if(_0x3b8521===_0x71dcf9)break;else _0x82ad0c['push'](_0x82ad0c['shift']());}catch(_0xcc7c1d){_0x82ad0c['push'](_0x82ad0c['shift']());}}}(_0xd834,0xe2b3c));function _interopNamespace(_0x149f62){if(_0x149f62&&_0x149f62['__esModule'])return _0x149f62;var _0x5e39d3=Object[_0x4712ca(-0xe9,-0x166)](null);_0x149f62&&Object['keys'](_0x149f62)[_0x4712ca(-0x1a1,-0x170)](function(_0xf21471){if(_0xf21471!=='default'){var _0x199dbb=Object['getOwnPropertyDescriptor'](_0x149f62,_0xf21471);Object['defineProperty'](_0x5e39d3,_0xf21471,_0x199dbb['get']?_0x199dbb:{'enumerable':!![],'get':function(){return _0x149f62[_0xf21471];}});}});function _0x4712ca(_0xc9c32a,_0x14402e){return _0x2cae(_0x14402e- -0x256,_0xc9c32a);}_0x5e39d3[_0x4712ca(-0x74,-0xda)]=_0x149f62;function _0x41084b(_0x2b187e,_0x461a7d){return _0x2cae(_0x461a7d- -0x296,_0x2b187e);}return _0x5e39d3;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0x3c636e(-0xe9,-0x5b)];function getU(_0x64413d,_0x346343){function _0xbb0e(_0x311a70,_0x58a96d){return _0x3c636e(_0x58a96d,_0x311a70-0x37a);}const _0x58a568=_0x64413d*Math[_0xbb0e(0x273,0x216)](Cesium$2['Math']['toRadians'](_0x346343));return _0x58a568;}function _0xd834(){const _0x40da0f=['setData','segments','fromCache','Draw','context','unbindEvent','rows','colors','11squzkj','off','width','refreshTimer','_maxAge','position','scene','height','Unknown\x20command\x20type','outputTexture','0px','mode','latitude','getUVByPoint','style','setDate','lat','enabled','viewport','isDestroyed','stroke','type','owner','sqrt','alt','_pointerEvents','speed','ONE_MINUS_SRC_ALPHA','requestAnimationFrame','grid','pixelDatatype','getRandomLatLng','update','flatMap','speedRate','EventType','commandType','samplingWindow','frameRate','particles','ymin','ymax','lng','particleSystem','pointer-events','mouse_down','_onMapWhellEvent','SRC_ALPHA','initFrameRate','_addedHook','tlng','calculateSpeed','uniformMap','atan2','container','ColorRamp','_randomParticle','UNSIGNED_BYTE','CLAMP_TO_EDGE','auto','getUVByXY','dropRateBump','register','toGridXY','Cartesian3','segmentsDepth','_colorRamp','data','default','umin','7128585BojjzH','color','blendFuncSource','frameRateAdjustment','isInExtent','FLOAT','min','globe','zIndex','canvasWidth','primitiveType','2223645rmLoaz','WindUtil','xmin','requestRender','destroy','7007358NtOkLE','destination-in','tlat','viewerParameters','vertexShaderSource','cols','particlesSpeed','textures','interpolated','mouseHidden','age','createRenderingFramebuffers','south','bind','componentsPerAttribute','west','removeChild','postMessage','left','magnificationFilter','cos','max','toWindowCoordinates','FUNC_ADD','sources','wrapT','windTextures','_setOptionsHook','rendering','computing','lineWidth','onColorTableChange','globalCompositeOperation','wheel','object','34286808zlHYTh','2644120adjkkf','updateViewerParameters','domain','_updateIng','error','show','clientHeight','_onMouseMoveEvent','createParticlesTextures','96158sJBMWb','isDynamic','updateWindData','worker','7PqBJWE','preExecute','canvasContext','Math','addEventListener','8lZxJIc','redraw','wind','_onMouseUpEvent','_createCanvas','geometry','6911340vfaSgl','isPointVisible','previousParticlesPosition','_animateFrame','green','shaderProgram','STATIC_DRAW','nextParticlesPosition','drawingBufferWidth','mouseDown','maxAge','slice','_calc_speedRate','particlesTextureSize','_canrefresh','37ISMOGS','changed','_bilinearInterpolation','random','particlesNumber','getDefaultRenderState','mars3d-wind插件\x20注册成功','Rectangle','pixelFormat','commandList','none','camera','frameTime','positionWC','fromCssColorString','logInfo','framebuffer','primitives','getCalculateSpeedShader','reCreateWindTextures','latRange','options','values','displayRange','speedFactor','mouseMove','currentParticlesPosition','createSegmentsGeometry','_showHook','_mountedHook','_calcUV','toRadians','depthTest','frameRateMonitor','colorTable','execute','SceneMode','getParticles','rectangle','stringify','getSegmentDrawFragmentShader','vertexArray','length','createColorTableTexture','forEach','BaseLayer','createComputingPrimitives','clear','createPrimitives','framebuffers','modelMatrix','keys','umax','RGBA','create','getPostProcessingPositionShader','getUpdatePositionShader','attributeLocations','45dwwrtZ','_removedHook','clearFramebuffers','wrapS','lastFramesPerSecond','windField','onParticlesTextureSizeChange','remove','_speedRate','_map','_tomap','Compute','bounds','_drawLines','clientWidth','cartesianToCartographic','depthMask','minificationFilter','postProcessingPosition','array','ellipsoid','getU','particlesTextures','original','visibility','north','flipY','lineTo','floor','createCommand','value','PointTrans','push','canvas','setOptions','fragmentShaderSource','createRenderingTextures','lonRange','layer','moveTo','windData','bindEvent','east','add','alpha','vdata','destroyParticlesTextures','abs','fixedHeight','talt','__esModule','resize','now','steps','dynamic','Cartesian2','removeEventListener','xmax','commandToExecute','Cesium'];_0xd834=function(){return _0x40da0f;};return _0xd834();}function getV(_0x4c97e0,_0x1a0292){function _0x21b481(_0x3d2d28,_0x546e20){return _0x3c636e(_0x546e20,_0x3d2d28-0x412);}function _0x2fc6d6(_0x18d3c7,_0x58884e){return _0x3c636e(_0x58884e,_0x18d3c7- -0x1f);}const _0x134e8e=_0x4c97e0*Math['sin'](Cesium$2[_0x21b481(0x32b,0x2d7)][_0x2fc6d6(-0xd0,-0x106)](_0x1a0292));return _0x134e8e;}function getSpeed(_0x31cd28,_0x34fd72){function _0x3baec5(_0xbeee0f,_0x2d8a5c){return _0x3c636e(_0xbeee0f,_0x2d8a5c- -0x47);}const _0x384104=Math[_0x3baec5(-0xd0,-0x82)](Math['pow'](_0x31cd28,0x2)+Math['pow'](_0x34fd72,0x2));return _0x384104;}function getDirection(_0x100b30,_0x5ea71e){let _0x33e4e2=Cesium$2['Math']['toDegrees'](Math[_0x4bbc25(0x338,0x39c)](_0x5ea71e,_0x100b30));_0x33e4e2+=_0x33e4e2<0x0?0x168:0x0;function _0x4bbc25(_0x572b70,_0x418c64){return _0x3c636e(_0x418c64,_0x572b70-0x355);}return _0x33e4e2;}const _0x48f9a9={};_0x48f9a9['__proto__']=null,_0x48f9a9[_0x3c636e(-0x11,-0x81)]=getU,_0x48f9a9['getV']=getV,_0x48f9a9['getSpeed']=getSpeed,_0x48f9a9['getDirection']=getDirection;var WindUtil=_0x48f9a9,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0x3c636e(-0x13a,-0xbe)](){const _0x40959b={};return _0x40959b['sources']=[calculateSpeedShader],new ShaderSource$1(_0x40959b);}static[_0x3c636e(-0xb5,-0x98)](){const _0x1051ff={};return _0x1051ff['sources']=[updatePositionShader],new ShaderSource$1(_0x1051ff);}static['getSegmentDrawVertexShader'](){const _0x592920={};_0x592920[_0x1daef8(0xe9,0x82)]=[renderParticlesVertexShader];function _0x1daef8(_0x10db3d,_0x9e881e){return _0x2fca1e(_0x10db3d,_0x9e881e-0x1a2);}return new ShaderSource$1(_0x592920);}static[_0x2fca1e(-0x13f,-0xc5)](){function _0x8614b(_0x45d0d2,_0x54d776){return _0x3c636e(_0x45d0d2,_0x54d776-0xee);}const _0x2975a4={};return _0x2975a4[_0x8614b(0x2e,-0x15)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x2975a4);}static['getPostProcessingPositionShader'](){function _0x1b628e(_0x2cebe5,_0x170ab4){return _0x3c636e(_0x170ab4,_0x2cebe5- -0x154);}const _0x15ee5b={};return _0x15ee5b[_0x1b628e(-0x257,-0x2cb)]=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x15ee5b);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x3ac899){this[_0x54a876(0x463,0x48d)]=_0x3ac899['commandType'],this['geometry']=_0x3ac899[_0x68d841(-0xec,-0xc0)],this['attributeLocations']=_0x3ac899['attributeLocations'],this[_0x68d841(0x68,0x1e)]=_0x3ac899['primitiveType'],this['uniformMap']=_0x3ac899[_0x68d841(-0x2c,0x2)]||{},this[_0x68d841(0x36,0x28)]=_0x3ac899[_0x68d841(-0x26,0x28)],this['fragmentShaderSource']=_0x3ac899['fragmentShaderSource'];function _0x68d841(_0x46c960,_0x524832){return _0x3c636e(_0x46c960,_0x524832-0x20);}this['rawRenderState']=_0x3ac899['rawRenderState'],this['framebuffer']=_0x3ac899[_0x54a876(0x3bf,0x3fb)],this['outputTexture']=_0x3ac899[_0x68d841(0x13,-0x29)],this['autoClear']=_0x3ac899['autoClear']??![],this[_0x68d841(-0xa4,-0xc9)]=_0x3ac899['preExecute'],this[_0x68d841(-0xce,-0xd2)]=!![],this[_0x54a876(0x454,0x45f)]=undefined,this['clearCommand']=undefined;function _0x54a876(_0x57b01a,_0x11f9df){return _0x2fca1e(_0x57b01a,_0x11f9df-0x4d8);}this['isDynamic']=_0x3ac899[_0x68d841(-0xc9,-0xcd)]??(()=>!![]),this['autoClear']&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}[_0x3c636e(-0xb9,-0x79)](_0x1e1148){function _0x3fce7a(_0x331270,_0x2bd2c9){return _0x3c636e(_0x2bd2c9,_0x331270-0x42);}function _0x4de604(_0x6190d,_0x32eae5){return _0x2fca1e(_0x6190d,_0x32eae5-0x226);}if(this['commandType']==='Draw'){const _0x47e1fd={};_0x47e1fd['context']=_0x1e1148,_0x47e1fd[_0x3fce7a(-0x9e,-0xf7)]=this['geometry'],_0x47e1fd['attributeLocations']=this['attributeLocations'],_0x47e1fd['bufferUsage']=BufferUsage$1[_0x3fce7a(-0x97,-0x66)];const _0x1b9dbd=VertexArray$1['fromGeometry'](_0x47e1fd),_0x5e4e63={};_0x5e4e63[_0x3fce7a(-0x14,0x20)]=_0x1e1148,_0x5e4e63['vertexShaderSource']=this['vertexShaderSource'],_0x5e4e63['fragmentShaderSource']=this[_0x4de604(0x10c,0x196)],_0x5e4e63[_0x3fce7a(-0x55,-0x26)]=this['attributeLocations'];const _0x580c4e=ShaderProgram[_0x3fce7a(-0x16,-0x3c)](_0x5e4e63),_0x263504=RenderState['fromCache'](this['rawRenderState']),_0x7e7e18={};return _0x7e7e18['owner']=this,_0x7e7e18[_0x4de604(0x129,0x162)]=_0x1b9dbd,_0x7e7e18[_0x4de604(0x19a,0x207)]=this['primitiveType'],_0x7e7e18[_0x4de604(0x11f,0x16b)]=Matrix4['IDENTITY'],_0x7e7e18['renderState']=_0x263504,_0x7e7e18[_0x4de604(0xe3,0x12f)]=_0x580c4e,_0x7e7e18[_0x3fce7a(-0x7e,-0xbc)]=this[_0x4de604(0x11d,0x149)],_0x7e7e18[_0x3fce7a(0x24,-0x31)]=this[_0x4de604(0x1c4,0x1eb)],_0x7e7e18['pass']=Pass$1['OPAQUE'],new DrawCommand(_0x7e7e18);}else{if(this['commandType']==='Compute'){const _0x97abc3={};return _0x97abc3[_0x4de604(0x25c,0x1cd)]=this,_0x97abc3[_0x3fce7a(-0x31,-0x4d)]=this['fragmentShaderSource'],_0x97abc3['uniformMap']=this['uniformMap'],_0x97abc3[_0x3fce7a(-0x7,0x7c)]=this[_0x3fce7a(-0x7,0x35)],_0x97abc3['persists']=!![],new ComputeCommand(_0x97abc3);}else throw new Error(_0x3fce7a(-0x8,-0x6c));}}['setGeometry'](_0x359ae2,_0x3bba7c){function _0x42cedc(_0x45527f,_0x50808e){return _0x2fca1e(_0x45527f,_0x50808e-0x32);}this['geometry']=_0x3bba7c;function _0x37cb8b(_0x9b5a80,_0x5c4b3b){return _0x3c636e(_0x5c4b3b,_0x9b5a80- -0x1a3);}defined(this[_0x42cedc(-0x96,-0x47)])&&(this[_0x42cedc(-0x4c,-0x47)]['vertexArray']=VertexArray$1['fromGeometry']({'context':_0x359ae2,'geometry':this[_0x37cb8b(-0x283,-0x243)],'attributeLocations':this[_0x37cb8b(-0x23a,-0x1e1)],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x116e7){function _0x2bddd3(_0x208cb7,_0x3d2a86){return _0x3c636e(_0x208cb7,_0x3d2a86-0x4f);}if(!this[_0x2bddd3(-0x17,-0x9e)]())return;if(!this[_0x2bddd3(-0xbf,-0xa3)]||!defined(_0x116e7))return;!defined(this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0x116e7[_0x2bddd3(-0x31,-0x7)]));function _0x25a6e6(_0x599b22,_0x296892){return _0x3c636e(_0x599b22,_0x296892- -0x1f2);}defined(this['preExecute'])&&this[_0x2bddd3(-0x92,-0x9a)]();if(!_0x116e7[_0x25a6e6(-0x273,-0x2b9)]){console['warn']('frameState.commandList\x20is\x20undefined');return;}defined(this['clearCommand'])&&_0x116e7[_0x2bddd3(0x12,-0x78)]['push'](this['clearCommand']),defined(this[_0x25a6e6(-0x2dc,-0x24e)])&&_0x116e7[_0x25a6e6(-0x24a,-0x2b9)][_0x25a6e6(-0x2ec,-0x268)](this[_0x25a6e6(-0x23d,-0x24e)]);}[_0x2fca1e(-0xb8,-0x5c)](){return![];}['destroy'](){function _0x39198c(_0x1f2ad2,_0x4d4846){return _0x3c636e(_0x1f2ad2,_0x4d4846-0x1b8);}function _0x48b7e7(_0x3a93fd,_0x5eebb7){return _0x3c636e(_0x5eebb7,_0x3a93fd-0x235);}if(defined(this[_0x48b7e7(0x1d9,0x158)])){var _0x5a89fe;(_0x5a89fe=this['commandToExecute']['shaderProgram'])===null||_0x5a89fe===void 0x0||_0x5a89fe['destroy'](),this['commandToExecute'][_0x39198c(0x130,0xde)]=undefined;}return destroyObject(this);}}function deepMerge(_0x2c4680,_0x4cbed3){if(!_0x2c4680)return _0x4cbed3;function _0x57aea7(_0x93dcfd,_0x44f669){return _0x2fca1e(_0x44f669,_0x93dcfd- -0x1b5);}if(!_0x4cbed3)return _0x2c4680;function _0x285c46(_0x119dc7,_0x4af1ef){return _0x2fca1e(_0x4af1ef,_0x119dc7- -0x19c);}const _0x5be768={..._0x4cbed3},_0x26b237=_0x5be768;for(const _0x324896 in _0x2c4680){if(Object['prototype']['hasOwnProperty']['call'](_0x2c4680,_0x324896)){const _0x4c87e5=_0x2c4680[_0x324896],_0x96aece=_0x4cbed3[_0x324896];if(Array['isArray'](_0x4c87e5)){_0x26b237[_0x324896]=_0x4c87e5[_0x285c46(-0x28d,-0x20b)]();continue;}if(_0x4c87e5&&typeof _0x4c87e5===_0x57aea7(-0x2cb,-0x2fe)){_0x26b237[_0x324896]=deepMerge(_0x4c87e5,_0x96aece||{});continue;}_0x4c87e5!==undefined&&(_0x26b237[_0x324896]=_0x4c87e5);}}return _0x26b237;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x19b9f4,_0x58ce66,_0x27032f,_0x4f2a46,_0x488d53){this['context']=_0x19b9f4,this[_0x3b9ffc(0x1a7,0x185)]=_0x27032f,this[_0x3b9ffc(0x269,0x25b)]=_0x4f2a46,this[_0x19dbbc(-0x230,-0x1e4)]=_0x58ce66,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;function _0x3b9ffc(_0xf2a906,_0x3eed03){return _0x3c636e(_0x3eed03,_0xf2a906-0x262);}const _0x5d3e9d={};function _0x19dbbc(_0xacaa7c,_0xb6d47b){return _0x3c636e(_0xacaa7c,_0xb6d47b- -0x176);}_0x5d3e9d[_0x19dbbc(-0x152,-0x1c2)]=_0x488d53,_0x5d3e9d[_0x3b9ffc(0x235,0x23a)]=0x1,_0x5d3e9d['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x5d3e9d),this[_0x19dbbc(-0x10b,-0x198)](),this['createWindTextures'](),this['createParticlesTextures'](),this[_0x19dbbc(-0x22b,-0x218)]();}[_0x2fca1e(-0x60,-0x3f)](){const _0x1891d9=()=>{function _0x50c09a(_0x403cd3,_0x252bc0){return _0x2cae(_0x252bc0-0x252,_0x403cd3);}function _0x54bbc7(_0x5844dd,_0x44a336){return _0x2cae(_0x44a336- -0x220,_0x5844dd);}this[_0x50c09a(0x313,0x32d)]['lastFramesPerSecond']>0x14&&(this['frameRate']=this[_0x50c09a(0x312,0x32d)][_0x50c09a(0x32b,0x34a)],this[_0x54bbc7(-0x4d,-0x9f)]=0x3c/Math[_0x54bbc7(-0x183,-0x19c)](this['frameRate'],0x1));};_0x1891d9();function _0x55ec15(_0x458d69,_0x55a5ce){return _0x3c636e(_0x458d69,_0x55a5ce-0x2fe);}const _0x5a0f1a=setInterval(_0x1891d9,0x3e8);function _0x7af277(_0x5ba8f7,_0x41af85){return _0x2fca1e(_0x5ba8f7,_0x41af85-0x4ca);}const _0x579701=this[_0x55ec15(0x354,0x301)][_0x55ec15(0x2cb,0x30f)](this);this[_0x7af277(0x4ca,0x4b0)]=()=>{clearInterval(_0x5a0f1a),_0x579701();};}['createWindTextures'](){const _0x5d9605={};_0x5d9605[_0x4a995a(-0x2f5,-0x2b7)]=TextureMinificationFilter$1['LINEAR'],_0x5d9605[_0x4a995a(-0x1a2,-0x21b)]=TextureMagnificationFilter$1['LINEAR'];function _0x4a995a(_0x17dfc9,_0x585ebb){return _0x2fca1e(_0x17dfc9,_0x585ebb- -0x215);}function _0x2cf03d(_0x3587ad,_0x34b141){return _0x2fca1e(_0x3587ad,_0x34b141- -0xb1);}const _0x56ef6a={'context':this['context'],'width':this[_0x2cf03d(-0xee,-0x13c)]['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1[_0x2cf03d(-0x6e,-0xd5)],'flipY':this[_0x2cf03d(-0x107,-0x189)]['flipY']??![],'sampler':new Sampler$1(_0x5d9605)};this[_0x2cf03d(-0x1b0,-0x1cf)]={'U':new Texture$1({..._0x56ef6a,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x2cf03d(-0xfd,-0x151)])}}),'V':new Texture$1({..._0x56ef6a,'source':{'arrayBufferView':new Float32Array(this[_0x2cf03d(-0x124,-0x13c)]['v']['array'])}})};}[_0x2fca1e(-0x177,-0x10c)](){const _0x4c081f={};function _0x2da7b2(_0x223faa,_0x8a72e2){return _0x2fca1e(_0x8a72e2,_0x223faa-0x210);}function _0x238689(_0x40dadd,_0x420508){return _0x3c636e(_0x420508,_0x40dadd- -0x1f3);}_0x4c081f[_0x238689(-0x278,-0x207)]=TextureMinificationFilter$1['NEAREST'],_0x4c081f[_0x2da7b2(0x20a,0x1bb)]=TextureMagnificationFilter$1['NEAREST'];const _0x326ace={'context':this[_0x2da7b2(0x19d,0x1b9)],'width':this['options'][_0x2da7b2(0x121,0xfd)],'height':this[_0x2da7b2(0x138,0xc7)]['particlesTextureSize'],'pixelFormat':PixelFormat$1[_0x238689(-0x28e,-0x314)],'pixelDatatype':PixelDatatype$1[_0x238689(-0x1fa,-0x22f)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x238689(-0x2ae,-0x284)][_0x2da7b2(0x121,0x110)]*this['options']['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x4c081f)};this[_0x238689(-0x273,-0x2af)]={'previousParticlesPosition':new Texture$1(_0x326ace),'currentParticlesPosition':new Texture$1(_0x326ace),'nextParticlesPosition':new Texture$1(_0x326ace),'postProcessingPosition':new Texture$1(_0x326ace),'particlesSpeed':new Texture$1(_0x326ace)};}['destroyParticlesTextures'](){function _0x5525b3(_0x4c430e,_0x21c9f4){return _0x2fca1e(_0x21c9f4,_0x4c430e-0x291);}Object['values'](this['particlesTextures'])[_0x5525b3(0x1d0,0x1a1)](_0x496c90=>_0x496c90['destroy']());}[_0x2fca1e(-0x65,-0xbf)](){function _0x39907c(_0x6aabba,_0x57e8ea){return _0x3c636e(_0x57e8ea,_0x6aabba- -0x189);}function _0x4c9a7b(_0x401059,_0x6a057a){return _0x2fca1e(_0x6a057a,_0x401059-0x538);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this[_0x39907c(-0x1f7,-0x18e)]['u']['min'],this['windData']['u'][_0x4c9a7b(0x415,0x44c)]),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0x4c9a7b(0x515,0x492)],this['windData']['v']['max']),'speedRange':()=>new Cartesian2$1(this[_0x39907c(-0x1f7,-0x232)]['speed'][_0x39907c(-0x18f,-0x194)],this[_0x39907c(-0x1f7,-0x260)]['speed'][_0x39907c(-0x28f,-0x2b5)]),'currentParticlesPosition':()=>this['particlesTextures'][_0x4c9a7b(0x465,0x442)],'speedScaleFactor':()=>{function _0x104fb7(_0x43f807,_0x274bb3){return _0x39907c(_0x274bb3-0x100,_0x43f807);}function _0x1a5f1b(_0x534a33,_0x422ddb){return _0x4c9a7b(_0x534a33- -0x720,_0x422ddb);}return(this[_0x1a5f1b(-0x1fe,-0x184)]['pixelSize']+0x32)*this[_0x104fb7(-0x1a3,-0x144)]['speedFactor'];},'frameRateAdjustment':()=>this[_0x39907c(-0x192,-0x1a9)],'dimension':()=>new Cartesian2$1(this['windData'][_0x39907c(-0x1d9,-0x1b0)],this[_0x39907c(-0x1f7,-0x26e)]['height']),'minimum':()=>new Cartesian2$1(this['windData']['bounds']['west'],this[_0x4c9a7b(0x4ad,0x526)][_0x4c9a7b(0x491,0x4e2)][_0x39907c(-0x179,-0x190)]),'maximum':()=>new Cartesian2$1(this[_0x39907c(-0x1f7,-0x17f)]['bounds']['east'],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this[_0x4c9a7b(0x49b,0x422)]['particlesSpeed'],'preExecute':()=>{const _0x1d3a52=this[_0x20dd8e(0x141,0x12e)]['previousParticlesPosition'];function _0x20dd8e(_0x1b21de,_0x58319c){return _0x39907c(_0x58319c-0x337,_0x1b21de);}this['particlesTextures'][_0x20dd8e(0x147,0xd1)]=this[_0x20dd8e(0x185,0x12e)][_0x20dd8e(0xa1,0xf8)],this['particlesTextures']['currentParticlesPosition']=this['particlesTextures']['postProcessingPosition'];function _0x355299(_0x2c32fb,_0x1686c5){return _0x4c9a7b(_0x1686c5- -0x50a,_0x2c32fb);}this['particlesTextures']['postProcessingPosition']=_0x1d3a52,this['primitives']['calculateSpeed']['commandToExecute']&&(this['primitives'][_0x355299(-0x20,-0xe)][_0x20dd8e(0x10b,0x152)][_0x20dd8e(0x1b2,0x165)]=this[_0x20dd8e(0x1b8,0x12e)]['particlesSpeed']);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':_0x39907c(-0x214,-0x22d),'uniformMap':{'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'particlesSpeed':()=>this[_0x39907c(-0x209,-0x191)][_0x39907c(-0x17f,-0x15a)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0xdf56e8(_0x58fdd0,_0x33d268){return _0x4c9a7b(_0x33d268- -0x4db,_0x58fdd0);}function _0x5df074(_0x34a5b2,_0x4b4f07){return _0x39907c(_0x34a5b2- -0x86,_0x4b4f07);}this[_0x5df074(-0x2ce,-0x296)]['updatePosition']['commandToExecute']&&(this[_0xdf56e8(-0x8b,-0x7f)]['updatePosition'][_0xdf56e8(0x51,-0x1c)][_0xdf56e8(0x1f,-0x9)]=this[_0xdf56e8(0x3e,-0x40)][_0x5df074(-0x2e7,-0x2e0)]);},'isDynamic':()=>this['options'][_0x4c9a7b(0x4bb,0x446)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0x39907c(-0x17f,-0x1e3)],'lonRange':()=>this['viewerParameters'][_0x4c9a7b(0x4aa,0x531)],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData'][_0x39907c(-0x213,-0x1db)][_0x39907c(-0x176,-0x19d)],this['windData'][_0x39907c(-0x213,-0x23b)]['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x4c9a7b(0x4ad,0x511)]['bounds'][_0x39907c(-0x179,-0x100)],this[_0x4c9a7b(0x4ad,0x50a)]['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options'][_0x39907c(-0x19e,-0x1f8)],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager[_0x39907c(-0x222,-0x1be)](),'outputTexture':this[_0x4c9a7b(0x49b,0x4d9)]['postProcessingPosition'],'preExecute':()=>{function _0x63a70f(_0x6fed86,_0x7760fd){return _0x39907c(_0x7760fd-0x44d,_0x6fed86);}function _0x45a2fb(_0x51a273,_0x243bc6){return _0x4c9a7b(_0x51a273- -0x17a,_0x243bc6);}this['primitives']['postProcessingPosition']['commandToExecute']&&(this['primitives']['postProcessingPosition'][_0x45a2fb(0x345,0x34c)]['outputTexture']=this['particlesTextures'][_0x63a70f(0x263,0x240)]);},'isDynamic':()=>this['options']['dynamic']})};}['reCreateWindTextures'](){this['windTextures']['U']['destroy']();function _0x5c6948(_0x45cc24,_0x5680d9){return _0x3c636e(_0x5680d9,_0x45cc24- -0x1d5);}this[_0x5c6948(-0x2d6,-0x2d1)]['V']['destroy'](),this['createWindTextures']();}[_0x2fca1e(-0x17d,-0x109)](_0x36c9d6){this['windData']=_0x36c9d6,this['reCreateWindTextures']();}['updateOptions'](_0x4189f6){function _0x24e76c(_0x298e5d,_0x1acd9b){return _0x2fca1e(_0x298e5d,_0x1acd9b- -0x137);}function _0x428df4(_0x1a6bc9,_0x37d09e){return _0x3c636e(_0x37d09e,_0x1a6bc9-0x324);}const _0x4931aa=_0x4189f6['flipY']!==undefined&&_0x4189f6[_0x24e76c(-0x254,-0x1d0)]!==this['options'][_0x428df4(0x2a8,0x2ec)];this['options']=deepMerge(_0x4189f6,this['options']),_0x4931aa&&this[_0x428df4(0x267,0x29a)]();}['processWindData'](_0x391943){const {array:_0x47ac46}=_0x391943;function _0x151aae(_0x51520c,_0x463c2c){return _0x2fca1e(_0x51520c,_0x463c2c-0x36c);}let {min:_0x202463,max:_0x470b83}=_0x391943;function _0x336f46(_0x4d77a7,_0x5b6712){return _0x2fca1e(_0x5b6712,_0x4d77a7- -0x2a);}const _0x5cbf45=new Float32Array(_0x47ac46[_0x336f46(-0xed,-0xb4)]);_0x202463===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x202463=Math[_0x151aae(0x366,0x349)](..._0x47ac46));_0x470b83===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0x470b83=Math[_0x336f46(-0x14d,-0xe2)](..._0x47ac46));const _0x40545a=Math[_0x151aae(0x28e,0x249)](Math[_0x151aae(0x266,0x2e8)](_0x202463),Math['abs'](_0x470b83));for(let _0x131d1a=0x0;_0x131d1a<_0x47ac46[_0x151aae(0x2ab,0x2a9)];_0x131d1a++){const _0x129b14=_0x47ac46[_0x131d1a]/_0x40545a;_0x5cbf45[_0x131d1a]=_0x129b14;}return _0x5cbf45;}[_0x3c636e(-0x1c,0x3)](){Object['values'](this[_0x25cb06(-0xbc,-0x122)])['forEach'](_0x5b67a8=>_0x5b67a8['destroy']());function _0x25cb06(_0x51cb61,_0x5b738b){return _0x3c636e(_0x5b738b,_0x51cb61-0x45);}Object[_0x25cb06(-0x75,-0xc1)](this[_0x25cb06(-0x3b,-0xcb)])['forEach'](_0x31d217=>_0x31d217['destroy']()),Object['values'](this['primitives'])['forEach'](_0xbef2f4=>_0xbef2f4[_0x25cb06(0x48,0xa0)]());function _0x46d06a(_0x287106,_0x3b9951){return _0x3c636e(_0x3b9951,_0x287106-0x1f1);}this[_0x25cb06(-0x6a,-0x2a)][_0x46d06a(0x1f4,0x269)]();}}function _0x2fca1e(_0x1cbef5,_0x576d97){return _0x2cae(_0x576d97- -0x1a7,_0x1cbef5);}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x1302de,_0x2398b9,_0x17eae3,_0x1cc508){this['context']=_0x1302de;function _0x2d9371(_0x534a1a,_0x2ffb6d){return _0x3c636e(_0x534a1a,_0x2ffb6d- -0xc3);}function _0x2fb844(_0x491c7c,_0x13e7cb){return _0x2fca1e(_0x13e7cb,_0x491c7c- -0xb1);}this['options']=_0x2398b9,this['viewerParameters']=_0x17eae3,this[_0x2fb844(-0x1cc,-0x257)]=_0x1cc508,(typeof this[_0x2d9371(-0x183,-0x17e)]['particlesTextureSize']!=='number'||this['options']['particlesTextureSize']<=0x0)&&(console[_0x2fb844(-0x1c1,-0x1ff)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options']['particlesTextureSize']=0x100),this[_0x2d9371(-0xfd,-0x171)]=this['createColorTableTexture'](),this[_0x2fb844(-0xc3,-0x55)]=this[_0x2fb844(-0x140,-0x112)](),this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this['createPrimitives']();}[_0x2fca1e(-0xc8,-0x8f)](){function _0x3db34a(_0x4b4c5c,_0x372978){return _0x3c636e(_0x372978,_0x4b4c5c-0x212);}const _0x56cba6={};_0x56cba6[_0x3db34a(0x1bc,0x208)]=this['context'],_0x56cba6['width']=this['context'][_0x5499ba(0x397,0x3e5)],_0x56cba6[_0x3db34a(0x1c7,0x18b)]=this['context']['drawingBufferHeight'],_0x56cba6['pixelFormat']=PixelFormat[_0x3db34a(0x177,0x18c)],_0x56cba6['pixelDatatype']=PixelDatatype[_0x3db34a(0x1f9,0x1ef)];const _0x230acd=_0x56cba6,_0x3d58f2={};_0x3d58f2[_0x5499ba(0x465,0x466)]=this['context'],_0x3d58f2['width']=this['context']['drawingBufferWidth'],_0x3d58f2[_0x3db34a(0x1c7,0x18b)]=this['context']['drawingBufferHeight'],_0x3d58f2[_0x3db34a(0x14a,0xce)]=PixelFormat['DEPTH_COMPONENT'];function _0x5499ba(_0x22ec61,_0x1daeb2){return _0x2fca1e(_0x22ec61,_0x1daeb2-0x4d9);}_0x3d58f2[_0x3db34a(0x1de,0x211)]=PixelDatatype['UNSIGNED_INT'];const _0x30d2a0=_0x3d58f2;return{'segmentsColor':new Texture(_0x230acd),'segmentsDepth':new Texture(_0x30d2a0)};}[_0x3c636e(-0x4,0xf)](){const _0x3727ec={};function _0x2f255b(_0x58354f,_0x2b5e70){return _0x2fca1e(_0x2b5e70,_0x58354f-0x201);}_0x3727ec[_0x2f255b(0x18e,0x1ca)]=this['context'],_0x3727ec['colorTextures']=[this[_0x2f255b(0x1ef,0x25a)]['segmentsColor']],_0x3727ec['depthTexture']=this['textures'][_0x3ba47b(0xb4,0x139)];function _0x3ba47b(_0x2945aa,_0x2be522){return _0x3c636e(_0x2945aa,_0x2be522-0x14a);}return{'segments':new Framebuffer(_0x3727ec)};}['destoryRenderingFramebuffers'](){function _0x2b801d(_0x2792ad,_0x2e1411){return _0x3c636e(_0x2e1411,_0x2792ad-0x2eb);}Object['values'](this[_0x2b801d(0x24c,0x2d8)])['forEach'](_0xe8dfd6=>{function _0x2cc2b8(_0x47b797,_0x5178ef){return _0x2b801d(_0x5178ef-0x17b,_0x47b797);}_0xe8dfd6[_0x2cc2b8(0x3db,0x469)]();});}[_0x2fca1e(-0x86,-0xc2)](){const _0x5f3869=new Float32Array(this[_0x19af68(0x12,-0x2a)]['colors'][_0x290bc1(0x47,0xbf)](_0x39e7ca=>{function _0x54abd3(_0xf523d2,_0x2ce41a){return _0x19af68(_0xf523d2,_0x2ce41a-0x20a);}function _0x1139d3(_0x57a89d,_0x13b33d){return _0x19af68(_0x57a89d,_0x13b33d-0x60);}const _0x219dc7=Color$1[_0x54abd3(0x175,0x1d9)](_0x39e7ca);return[_0x219dc7['red'],_0x219dc7[_0x54abd3(0x1c4,0x1c0)],_0x219dc7['blue'],_0x219dc7[_0x1139d3(0x7b,0x87)]];})),_0x13b8ad={};_0x13b8ad[_0x19af68(-0x6,0xc)]=TextureMinificationFilter['LINEAR'],_0x13b8ad[_0x290bc1(0x14a,0x107)]=TextureMagnificationFilter['LINEAR'];function _0x19af68(_0x1e858a,_0x4ac9f4){return _0x2fca1e(_0x1e858a,_0x4ac9f4-0xae);}_0x13b8ad[_0x19af68(-0x62,-0x2)]=TextureWrap['CLAMP_TO_EDGE'],_0x13b8ad[_0x19af68(-0xf2,-0x71)]=TextureWrap[_0x19af68(0xcf,0x79)];function _0x290bc1(_0x46183c,_0x1b1cb0){return _0x2fca1e(_0x46183c,_0x1b1cb0-0x10d);}return new Texture({'context':this['context'],'width':this[_0x290bc1(0xac,0x35)]['colors']['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype[_0x19af68(0xf2,0x8a)],'sampler':new Sampler(_0x13b8ad),'source':{'width':this['options']['colors'][_0x290bc1(0x3d,0x4a)],'height':0x1,'arrayBufferView':_0x5f3869}});}[_0x2fca1e(-0x105,-0xd2)](){const _0xa5a6a=0x4,_0x590654=this['options']['particlesTextureSize'];let _0x1578d3=[];for(let _0xcc0762=0x0;_0xcc0762<_0x590654;_0xcc0762++){for(let _0x3b3172=0x0;_0x3b3172<_0x590654;_0x3b3172++){for(let _0x3d8e37=0x0;_0x3d8e37<_0xa5a6a;_0x3d8e37++){_0x1578d3['push'](_0xcc0762/_0x590654),_0x1578d3['push'](_0x3b3172/_0x590654);}}}_0x1578d3=new Float32Array(_0x1578d3);const _0x58261d=this['options']['particlesTextureSize']**0x2;let _0x29aeeb=[];for(let _0x1682c3=0x0;_0x1682c3<_0x58261d;_0x1682c3++){_0x29aeeb[_0x2bb553(0x2d8,0x2a4)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x29aeeb=new Float32Array(_0x29aeeb);let _0x5c3c13=[];for(let _0x142ada=0x0,_0x5a7d09=0x0;_0x142ada<_0x58261d;_0x142ada++){_0x5c3c13['push'](_0x5a7d09+0x0,_0x5a7d09+0x1,_0x5a7d09+0x2,_0x5a7d09+0x2,_0x5a7d09+0x1,_0x5a7d09+0x3),_0x5a7d09+=_0xa5a6a;}_0x5c3c13=new Uint32Array(_0x5c3c13);const _0x1e6cc7={};_0x1e6cc7['componentDatatype']=ComponentDatatype[_0x3e91fe(0x5e1,0x563)],_0x1e6cc7['componentsPerAttribute']=0x2,_0x1e6cc7[_0x3e91fe(0x44a,0x4b0)]=_0x1578d3;const _0x1b0efb={};_0x1b0efb['componentDatatype']=ComponentDatatype[_0x2bb553(0x347,0x2c6)];function _0x2bb553(_0x56de13,_0x40defc){return _0x2fca1e(_0x40defc,_0x56de13-0x36b);}_0x1b0efb[_0x3e91fe(0x4f0,0x57c)]=0x3;function _0x3e91fe(_0x273ecb,_0x443c40){return _0x3c636e(_0x273ecb,_0x443c40-0x56a);}_0x1b0efb['values']=_0x29aeeb;const _0x200cfb=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x1e6cc7),'normal':new GeometryAttribute(_0x1b0efb)}),'indices':_0x5c3c13});return _0x200cfb;}['createRawRenderState'](_0x3ca2eb){function _0x4f6f50(_0x2cfe90,_0x413ff6){return _0x3c636e(_0x2cfe90,_0x413ff6-0x4b0);}const _0x2ac00e={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x3ca2eb};return Appearance[_0x4f6f50(0x36e,0x3e5)](!![],![],_0x2ac00e);}[_0x2fca1e(-0x10c,-0xbd)](){const _0x5200bf={};_0x5200bf['st']=0x0,_0x5200bf['normal']=0x1;function _0x1d0b3c(_0x2abfa0,_0x7e04){return _0x2fca1e(_0x2abfa0,_0x7e04-0x294);}const _0x101581={};function _0x3511d1(_0x31f922,_0x93315a){return _0x2fca1e(_0x31f922,_0x93315a- -0x10f);}_0x101581['enabled']=!![];const _0x30ddd4={};_0x30ddd4[_0x3511d1(-0x1b5,-0x16d)]=!![],_0x30ddd4['blendEquation']=WebGLRenderingContext[_0x3511d1(-0x1dc,-0x230)],_0x30ddd4[_0x3511d1(-0x18d,-0x136)]=WebGLRenderingContext[_0x3511d1(-0x12b,-0x14f)],_0x30ddd4['blendFuncDestination']=WebGLRenderingContext[_0x1d0b3c(0x25f,0x240)];const _0x211fd9={};_0x211fd9[_0x1d0b3c(0x1ad,0x237)]=undefined,_0x211fd9[_0x1d0b3c(0x207,0x1c7)]=_0x101581,_0x211fd9[_0x3511d1(-0x20a,-0x1b2)]=!![],_0x211fd9['blending']=_0x30ddd4;const _0x4b1b92=new CustomPrimitive({'commandType':_0x3511d1(-0x117,-0x183),'attributeLocations':_0x5200bf,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures'][_0x1d0b3c(0x117,0x19a)],'currentParticlesPosition':()=>this[_0x1d0b3c(0x1ac,0x179)][_0x1d0b3c(0x27a,0x1f7)]['currentParticlesPosition'],'postProcessingPosition':()=>this['computing'][_0x1d0b3c(0x1a2,0x1f7)]['postProcessingPosition'],'particlesSpeed':()=>this['computing']['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{var _0x3e9545,_0x5343f6;function _0x8c2cb1(_0x29a6c1,_0x17d4de){return _0x1d0b3c(_0x17d4de,_0x29a6c1- -0x205);}const _0x13d150=new Cartesian2(((_0x3e9545=this['options'][_0x8c2cb1(-0x83,-0x15)])===null||_0x3e9545===void 0x0?void 0x0:_0x3e9545['min'])??this['computing'][_0x8c2cb1(0x4,0x6f)]['speed']['min'],((_0x5343f6=this[_0x8c2cb1(-0x49,-0xc4)]['domain'])===null||_0x5343f6===void 0x0?void 0x0:_0x5343f6['max'])??this['computing']['windData']['speed']['max']);function _0x58f0e7(_0x5973b7,_0x1bf8cd){return _0x1d0b3c(_0x1bf8cd,_0x5973b7-0x6);}return _0x13d150;},'displayRange':()=>{function _0x23ad01(_0x3eb8e2,_0x16da77){return _0x1d0b3c(_0x16da77,_0x3eb8e2- -0x319);}var _0x1836a1,_0x4dcd1c;const _0x152b1f=new Cartesian2(((_0x1836a1=this['options'][_0xcbb721(0x1db,0x17f)])===null||_0x1836a1===void 0x0?void 0x0:_0x1836a1['min'])??this[_0x23ad01(-0x1a0,-0x1c6)]['windData']['speed']['min'],((_0x4dcd1c=this[_0xcbb721(0x170,0x17d)]['displayRange'])===null||_0x4dcd1c===void 0x0?void 0x0:_0x4dcd1c[_0x23ad01(-0x1a8,-0x1e8)])??this[_0x23ad01(-0x1a0,-0x177)][_0x23ad01(-0x110,-0x93)]['speed'][_0x23ad01(-0x1a8,-0x1aa)]);function _0xcbb721(_0xbc4435,_0x43118e){return _0x3511d1(_0xbc4435,_0x43118e-0x364);}return _0x152b1f;},'particleHeight':()=>this['options'][_0x1d0b3c(0x210,0x211)]||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x3abce5={};_0x3abce5[_0x5cfcc6(0x387,0x3d3)]=0x1;function _0x1a5107(_0x375dcc,_0x245878){return _0x1d0b3c(_0x245878,_0x375dcc-0x26b);}_0x3abce5[_0x1a5107(0x3dc,0x364)]=0x2;function _0x5cfcc6(_0x3f1c2e,_0x5df937){return _0x1d0b3c(_0x3f1c2e,_0x5df937-0x162);}const _0x3260cd=this['options']['lineWidth']||_0x3abce5;return new Cartesian2(_0x3260cd['min'],_0x3260cd[_0x5cfcc6(0x2d3,0x2d3)]);},'lineLength':()=>{function _0x5b8480(_0x369f9a,_0x325bb3){return _0x3511d1(_0x369f9a,_0x325bb3-0x3db);}const _0x523882={};_0x523882[_0x5b8480(0x242,0x2a9)]=0x14,_0x523882['max']=0x64;const _0x5c7c9f=this[_0x3e12b4(0x3c2,0x357)]['lineLength']||_0x523882;function _0x3e12b4(_0x1d459a,_0x20ebeb){return _0x3511d1(_0x1d459a,_0x20ebeb-0x53e);}return new Cartesian2(_0x5c7c9f[_0x5b8480(0x338,0x2a9)],_0x5c7c9f['max']);},'is3D':()=>this[_0x3511d1(-0x184,-0x125)]['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures']['segmentsDepth']},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x211fd9)}),_0x5f5793={};return _0x5f5793[_0x1d0b3c(0x20b,0x21e)]=_0x4b1b92,_0x5f5793;}['onParticlesTextureSizeChange'](){const _0x4130dc=this[_0x1c1b61(0x6b,0xf5)]();function _0x1c1b61(_0x51a76d,_0x48d184){return _0x3c636e(_0x48d184,_0x51a76d-0x120);}this['primitives']['segments']['geometry']=_0x4130dc;function _0x14e33b(_0x58754b,_0x1611e7){return _0x2fca1e(_0x58754b,_0x1611e7- -0x49);}const _0x3aed53={};_0x3aed53['context']=this['context'],_0x3aed53['geometry']=_0x4130dc,_0x3aed53['attributeLocations']=this['primitives']['segments'][_0x1c1b61(0x89,0xd4)],_0x3aed53['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x5402d7=VertexArray['fromGeometry'](_0x3aed53);this[_0x1c1b61(0x61,-0x19)][_0x14e33b(-0xf9,-0xbf)]['commandToExecute']&&(this['primitives']['segments']['commandToExecute']['vertexArray']=_0x5402d7);}[_0x2fca1e(-0x104,-0x119)](){this['colorTable']['destroy']();function _0x2128e2(_0x10f051,_0xf4c474){return _0x3c636e(_0xf4c474,_0x10f051-0x39);}this['colorTable']=this[_0x2128e2(-0x6c,-0xd)]();}['updateOptions'](_0x3ff6c3){function _0x3e8a10(_0x2d4c20,_0x13e42d){return _0x2fca1e(_0x2d4c20,_0x13e42d-0x2f5);}const _0x32c560=_0x3ff6c3['colors']&&JSON[_0x3e8a10(0x274,0x22f)](_0x3ff6c3[_0x5d548f(0x255,0x271)])!==JSON[_0x5d548f(0x236,0x21b)](this[_0x3e8a10(0x1ad,0x21d)][_0x3e8a10(0x221,0x285)]);this[_0x3e8a10(0x1af,0x21d)]=deepMerge(_0x3ff6c3,this['options']);function _0x5d548f(_0x430cf6,_0x2ad0c4){return _0x2fca1e(_0x430cf6,_0x2ad0c4-0x2e1);}_0x32c560&&this[_0x3e8a10(0x246,0x1dc)]();}['destroy'](){Object[_0x460b60(0x397,0x330)](this[_0x54e285(0x364,0x34e)])['forEach'](_0x20b202=>{function _0x2a9b76(_0x414e38,_0x415b68){return _0x460b60(_0x415b68- -0x659,_0x414e38);}_0x20b202[_0x2a9b76(-0x1f9,-0x205)]();});function _0x460b60(_0x258e1e,_0x5a93e5){return _0x3c636e(_0x5a93e5,_0x258e1e-0x451);}function _0x54e285(_0x53cbe6,_0x1a4d34){return _0x2fca1e(_0x1a4d34,_0x53cbe6-0x420);}Object[_0x460b60(0x397,0x3d8)](this['primitives'])[_0x460b60(0x3ad,0x37b)](_0x5416ef=>{_0x5416ef['destroy']();}),this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0xe7a7d7,_0x2d85db,_0x4916de,_0x3b4ba1,_0x4da873){this['context']=_0xe7a7d7,this['options']=_0x4916de,this['viewerParameters']=_0x3b4ba1,this['computing']=new WindParticlesComputing(_0xe7a7d7,_0x2d85db,_0x4916de,_0x3b4ba1,_0x4da873),this['rendering']=new WindParticlesRendering(_0xe7a7d7,_0x4916de,_0x3b4ba1,this['computing']);function _0x29ea4d(_0x4b9f59,_0x4bb1f6){return _0x3c636e(_0x4bb1f6,_0x4b9f59-0x240);}this[_0x29ea4d(0x1ac,0x11f)]();}['getPrimitives'](){function _0x523a5e(_0x459497,_0xcac9b2){return _0x3c636e(_0x459497,_0xcac9b2-0x7f);}function _0x2c380c(_0x4c7ea3,_0x3ee34a){return _0x2fca1e(_0x4c7ea3,_0x3ee34a-0x157);}const _0x29e767=[this['computing']['primitives'][_0x523a5e(0xcc,0x60)],this['computing'][_0x523a5e(-0x2a,-0x40)]['updatePosition'],this['computing']['primitives']['postProcessingPosition'],this[_0x523a5e(-0x80,-0x80)][_0x2c380c(0x3f,0x7b)][_0x523a5e(-0x14,0x26)]];return _0x29e767;}['clearFramebuffers'](){function _0x2b2d2c(_0x36f135,_0x59821a){return _0x3c636e(_0x36f135,_0x59821a-0x4f2);}const _0x758742=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});function _0x38cafc(_0x364919,_0xc83f14){return _0x2fca1e(_0x364919,_0xc83f14-0x365);}Object[_0x2b2d2c(0x42c,0x455)](this['rendering']['framebuffers'])[_0x38cafc(0x2b5,0x2a4)](_0x500df4=>{_0x758742[_0x3cc41f(0x42d,0x464)]=this['rendering'][_0x3cc41f(0x46a,0x485)][_0x500df4];function _0x5e02cb(_0x4a96c8,_0x15d899){return _0x2b2d2c(_0x4a96c8,_0x15d899- -0x281);}function _0x3cc41f(_0x230da4,_0x2c83e2){return _0x38cafc(_0x230da4,_0x2c83e2-0x1dc);}_0x758742[_0x5e02cb(0x1bf,0x1c4)](this['context']);});}['changeOptions'](_0x1be2f8){let _0x1d5d7c=![];_0x1be2f8['particlesTextureSize']&&this['options'][_0x5a8b60(0x1c8,0x1c3)]!==_0x1be2f8['particlesTextureSize']&&(_0x1d5d7c=!![]);function _0x33e444(_0x260e8b,_0x3f4328){return _0x3c636e(_0x3f4328,_0x260e8b-0xaf);}const _0x422350=deepMerge(_0x1be2f8,this['options']);if(_0x422350['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x422350;function _0x5a8b60(_0x1de9da,_0x4f047e){return _0x2fca1e(_0x1de9da,_0x4f047e-0x2b2);}this[_0x33e444(-0x50,-0x37)]['updateOptions'](_0x1be2f8),this[_0x5a8b60(0x111,0x197)]['updateOptions'](_0x1be2f8),_0x1d5d7c&&(this[_0x33e444(-0x4f,-0x84)][_0x33e444(0x47,0xd5)](),this['computing']['createParticlesTextures'](),this['rendering'][_0x33e444(0x1f,-0x1)]());}['applyViewerParameters'](_0x45ed6f){this['viewerParameters']=_0x45ed6f;function _0x233516(_0x1ca97d,_0x3dfc83){return _0x2fca1e(_0x3dfc83,_0x1ca97d- -0x176);}this['computing'][_0x2be506(0x1dc,0x19c)]=_0x45ed6f;function _0x2be506(_0x16e967,_0x1e2572){return _0x3c636e(_0x1e2572,_0x16e967-0x1d5);}this['rendering'][_0x2be506(0x1dc,0x151)]=_0x45ed6f;}['destroy'](){function _0x76d1ff(_0xa2f6fc,_0x20388b){return _0x2fca1e(_0x20388b,_0xa2f6fc-0xa4);}function _0x147f09(_0x537faa,_0x3fd132){return _0x3c636e(_0x537faa,_0x3fd132-0x3d3);}this['computing'][_0x147f09(0x414,0x3d6)](),this[_0x147f09(0x26c,0x2d4)][_0x76d1ff(0x8a,0xe1)]();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x2fca1e(-0x60,-0xc0)],_0x5b6179={};_0x5b6179['min']=0x1,_0x5b6179['max']=0x2;const _0x4947df={};_0x4947df[_0x2fca1e(0x65,-0x23)]=0x14;function _0x2cae(_0x533d24,_0x1d3ac7){const _0xd834e4=_0xd834();return _0x2cae=function(_0x2cae8e,_0x3fb0ae){_0x2cae8e=_0x2cae8e-0x83;let _0x5a9381=_0xd834e4[_0x2cae8e];return _0x5a9381;},_0x2cae(_0x533d24,_0x1d3ac7);}function _0x3c636e(_0x112498,_0x37aebf){return _0x2cae(_0x37aebf- -0x18a,_0x112498);}_0x4947df[_0x2fca1e(-0x130,-0x123)]=0x64;const _0x4a547a={};_0x4a547a['particlesTextureSize']=0x64,_0x4a547a[_0x3c636e(-0x99,-0x66)]=0x0,_0x4a547a['lineWidth']=_0x5b6179,_0x4a547a['lineLength']=_0x4947df,_0x4a547a[_0x3c636e(-0x38,-0xb8)]=0x1,_0x4a547a['dropRate']=0.003,_0x4a547a[_0x2fca1e(0x0,-0x32)]=0.001,_0x4a547a[_0x3c636e(-0x61,-0x53)]=['rgb(206,255,255)'],_0x4a547a['flipY']=![],_0x4a547a['dynamic']=!![];const DEF_OPTIONS=_0x4a547a;class WindLayer extends BaseLayer$1{constructor(_0x4a0f33={}){_0x4a0f33={...DEF_OPTIONS,..._0x4a0f33},super(_0x4a0f33),this['_setOptionsHook'](_0x4a0f33,_0x4a0f33);}get['layer'](){return this['primitives'];}get['data'](){function _0x291a54(_0x596f30,_0x4d2141){return _0x2fca1e(_0x596f30,_0x4d2141-0x54a);}return this['options'][_0x291a54(0x53a,0x51e)];}set[_0x2fca1e(-0x1f,-0x2c)](_0x383c87){function _0x2055cd(_0x537703,_0xddcad3){return _0x2fca1e(_0x537703,_0xddcad3-0x3cd);}this[_0x2055cd(0x340,0x2f5)][_0x53596f(0x2b9,0x347)]=_0x383c87;function _0x53596f(_0x5c4017,_0x465c68){return _0x2fca1e(_0x5c4017,_0x465c68-0x373);}this['setData'](_0x383c87);}get[_0x2fca1e(0x1b,-0x70)](){function _0x115423(_0x151bbf,_0x552892){return _0x3c636e(_0x552892,_0x151bbf- -0x1e8);}function _0x3d2dbe(_0x274eb0,_0x4cf8a9){return _0x2fca1e(_0x4cf8a9,_0x274eb0- -0x14f);}return this[_0x3d2dbe(-0x227,-0x222)][_0x115423(-0x23b,-0x274)];}set['colors'](_0x14caaf){this['options'][_0x55eab0(-0x5a,-0xc5)]=_0x14caaf;const _0xf571cc={};_0xf571cc[_0x55eab0(-0x10d,-0xc5)]=_0x14caaf;function _0x37f45f(_0x280aca,_0x3a5f89){return _0x2fca1e(_0x3a5f89,_0x280aca- -0x45);}function _0x55eab0(_0x3533e3,_0x148806){return _0x2fca1e(_0x3533e3,_0x148806- -0x55);}this['_setOptionsHook'](this[_0x55eab0(-0x163,-0x12d)],_0xf571cc);}[_0x3c636e(-0xed,-0xb4)](_0x2fd72f){function _0x490759(_0xc0bcd5,_0x16d003){return _0x2fca1e(_0xc0bcd5,_0x16d003-0xfb);}function _0x400829(_0xd79387,_0x59210a){return _0x2fca1e(_0xd79387,_0x59210a-0x1bd);}_0x2fd72f?this[_0x400829(0x17c,0x17f)]():this[_0x400829(0x16a,0x10b)]();}[_0x3c636e(-0x110,-0xb3)](){}['_addedHook'](){this['scene']=this[_0x55c425(0x207,0x28f)]['scene'],this['camera']=this['_map'][_0x4ad013(0x1cb,0x241)];this['options']['data']&&this[_0x55c425(0x23a,0x2b9)](this[_0x55c425(0x1d9,0x1ea)][_0x55c425(0x285,0x206)]);if(!this['windData']||!this['show'])return;this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x55c425(0x248,0x1fc)]['mode']},this[_0x4ad013(0x19a,0x1ba)]();function _0x55c425(_0x4484a4,_0x3400ab){return _0x2fca1e(_0x3400ab,_0x4484a4-0x2b1);}this['particleSystem']=new WindParticleSystem(this[_0x55c425(0x248,0x1f1)]['context'],this['windData'],this[_0x4ad013(0x1d5,0x1e0)],this['viewerParameters'],this[_0x55c425(0x248,0x295)]),this[_0x55c425(0x1d5,0x262)]=this['particleSystem']['getPrimitives'](),this['primitives'][_0x55c425(0x1f0,0x1f3)](_0x530c0c=>{function _0x5439b1(_0xb9c4c8,_0x5a3dd3){return _0x4ad013(_0x5a3dd3-0x72,_0xb9c4c8);}this['scene']['primitives'][_0x5439b1(0x250,0x297)](_0x530c0c);}),this['camera']['percentageChanged']=0.01;function _0x4ad013(_0x544c1f,_0x530ed4){return _0x3c636e(_0x530ed4,_0x544c1f-0x290);}this['camera'][_0x4ad013(0x1c1,0x1b6)]['addEventListener'](this['updateViewerParameters']['bind'](this)),this[_0x55c425(0x248,0x286)]['morphComplete'][_0x55c425(0x1ae,0x12f)](this['updateViewerParameters']['bind'](this)),window['addEventListener']('resize',this['updateViewerParameters']['bind'](this));}['_removedHook'](){this['camera']['changed']['removeEventListener'](this['updateViewerParameters']['bind'](this)),this[_0x51a105(0x40d,0x44f)]['morphComplete'][_0x51a105(0x46e,0x43d)](this['updateViewerParameters']['bind'](this)),window['removeEventListener']('resize',this['updateViewerParameters']['bind'](this));function _0x328e1d(_0x1db277,_0xc9eb3e){return _0x2fca1e(_0x1db277,_0xc9eb3e-0xb6);}function _0x51a105(_0x2ebf03,_0x17d9f1){return _0x3c636e(_0x2ebf03,_0x17d9f1-0x49b);}this['primitives']&&(this['primitives']['forEach'](_0x1ad0da=>{function _0x50d189(_0xccc7eb,_0x14c107){return _0x328e1d(_0xccc7eb,_0x14c107-0x29a);}function _0x303163(_0x4676e6,_0x2e6e87){return _0x328e1d(_0x4676e6,_0x2e6e87-0x8d);}this[_0x303163(0x75,0xda)][_0x50d189(0x25c,0x274)][_0x303163(0x93,0x97)](_0x1ad0da);}),delete this[_0x51a105(0x3f5,0x3dc)]),this[_0x328e1d(0xcb,0x72)]&&(this['particleSystem']['destroy'](),delete this['particleSystem']);}[_0x2fca1e(-0xb7,-0x77)](_0x175f63,_0x1207e0){function _0x33c3b9(_0x7a9b72,_0x33c729){return _0x3c636e(_0x33c729,_0x7a9b72- -0x29);}this['windData']=this['processWindData'](_0x175f63);if(_0x1207e0){this['_removedHook'](),this['_addedHook']();return;}function _0x3ca195(_0xf28938,_0x16b492){return _0x3c636e(_0xf28938,_0x16b492-0x364);}this['particleSystem']?(this['particleSystem'][_0x3ca195(0x297,0x266)]['updateWindData'](this[_0x3ca195(0x2b7,0x2f6)]),this['scene']['requestRender']()):this['_addedHook']();}[_0x3c636e(-0x120,-0x100)](_0x19e8a9,_0x408b0f){function _0x3ec3ce(_0x10153c,_0x70507d){return _0x2fca1e(_0x70507d,_0x10153c- -0x1a3);}function _0x42bc8b(_0x18570d,_0x27b9b5){return _0x3c636e(_0x18570d,_0x27b9b5-0x357);}this[_0x3ec3ce(-0x1e7,-0x165)]&&(this['particleSystem']['changeOptions'](_0x408b0f),this['scene'][_0x42bc8b(0x2f4,0x359)]());}['processWindData'](_0x2a821c){var _0x30b230,_0xaf9813;const _0x48c35a={..._0x2a821c},_0x398a55=_0x48c35a;function _0x300d50(_0xda69f6,_0x169e05){return _0x3c636e(_0xda69f6,_0x169e05-0x414);}!_0x398a55['height']&&_0x398a55[_0x300d50(0x341,0x3c0)]&&(_0x398a55[_0x300d50(0x35a,0x3c9)]=_0x398a55['rows']);!_0x398a55[_0x3c99da(0x492,0x430)]&&_0x398a55['cols']&&(_0x398a55[_0x3c99da(0x492,0x46c)]=_0x398a55['cols']);!_0x398a55[_0x3c99da(0x458,0x3ee)]&&(_0x398a55['bounds']={'west':_0x398a55['xmin'],'south':_0x398a55[_0x300d50(0x453,0x3ea)],'east':_0x398a55['xmax'],'north':_0x398a55[_0x3c99da(0x4b9,0x48a)]});function _0x3c99da(_0x4539c6,_0x2fa1b1){return _0x2fca1e(_0x2fa1b1,_0x4539c6-0x4ff);}if(!_0x398a55['u']){const _0x3bd4ee={};_0x3bd4ee[_0x3c99da(0x45f,0x456)]=_0x2a821c['udata'],_0x3bd4ee[_0x3c99da(0x4dc,0x4fc)]=_0x2a821c[_0x3c99da(0x4d5,0x4b9)],_0x3bd4ee['max']=_0x2a821c[_0x300d50(0x34c,0x378)],_0x398a55['u']=_0x3bd4ee;}if(!_0x398a55['v']){const _0x28ad58={};_0x28ad58[_0x300d50(0x354,0x391)]=_0x2a821c['vdata'],_0x28ad58[_0x3c99da(0x4dc,0x534)]=_0x2a821c['vmin'],_0x28ad58['max']=_0x2a821c['vmax'],_0x398a55['v']=_0x28ad58;}if(((_0x30b230=_0x398a55[_0x300d50(0x3d2,0x3dc)])===null||_0x30b230===void 0x0?void 0x0:_0x30b230['min'])===undefined||((_0xaf9813=_0x398a55[_0x300d50(0x402,0x3dc)])===null||_0xaf9813===void 0x0?void 0x0:_0xaf9813[_0x3c99da(0x3dc,0x3a3)])===undefined||_0x398a55[_0x3c99da(0x4aa,0x4b3)][_0x3c99da(0x45f,0x476)]===undefined){const _0x25201c={'array':new Float32Array(_0x398a55['u'][_0x3c99da(0x45f,0x4b4)][_0x3c99da(0x43c,0x426)]),'min':Number['MAX_VALUE'],'max':Number['MIN_VALUE']};for(let _0x517938=0x0;_0x517938<_0x398a55['u'][_0x300d50(0x41f,0x391)][_0x300d50(0x2f5,0x36e)];_0x517938++){_0x25201c['array'][_0x517938]=Math[_0x300d50(0x3b3,0x3d9)](_0x398a55['u'][_0x300d50(0x329,0x391)][_0x517938]*_0x398a55['u']['array'][_0x517938]+_0x398a55['v']['array'][_0x517938]*_0x398a55['v'][_0x300d50(0x38d,0x391)][_0x517938]),_0x25201c['array'][_0x517938]!==0x0&&(_0x25201c['min']=Math['min'](_0x25201c[_0x3c99da(0x4dc,0x4a3)],_0x25201c['array'][_0x517938]),_0x25201c[_0x3c99da(0x3dc,0x390)]=Math[_0x3c99da(0x3dc,0x35c)](_0x25201c['max'],_0x25201c['array'][_0x517938]));}_0x398a55[_0x300d50(0x3ea,0x3dc)]=_0x25201c;}return _0x398a55;}['updateViewerParameters'](){function _0x2e2e13(_0x573826,_0x4b0430){return _0x2fca1e(_0x573826,_0x4b0430-0x427);}var _0x284f03;const _0x4df129=this['scene'];if(!_0x4df129)return;const _0x504c7a=_0x4df129[_0xdb08e9(0x365,0x300)],_0x2ee26a={};_0x2ee26a['x']=0x0,_0x2ee26a['y']=0x0;const _0x3ac5b0={};_0x3ac5b0['x']=0x0,_0x3ac5b0['y']=_0x504c7a['clientHeight'];const _0xd515c0={};function _0xdb08e9(_0x282a2c,_0x4f93f1){return _0x2fca1e(_0x4f93f1,_0x282a2c-0x3f7);}_0xd515c0['x']=_0x504c7a[_0xdb08e9(0x352,0x3db)],_0xd515c0['y']=0x0;const _0x216fbe={};_0x216fbe['x']=_0x504c7a['clientWidth'],_0x216fbe['y']=_0x504c7a['clientHeight'];const _0x157c80=[_0x2ee26a,_0x3ac5b0,_0xd515c0,_0x216fbe];let _0x2fcfb1=0xb4,_0x1e0f72=-0xb4,_0x25cb15=0x5a,_0x3b3f3b=-0x5a,_0x596c43=![];for(const _0x99fb0d of _0x157c80){const _0x514ab7=_0x4df129['camera']['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x99fb0d['x'],_0x99fb0d['y']),_0x4df129[_0x2e2e13(0x40a,0x405)]['ellipsoid']);if(!_0x514ab7){_0x596c43=!![];break;}const _0x118b38=_0x4df129['globe'][_0xdb08e9(0x358,0x39c)][_0x2e2e13(0x320,0x383)](_0x514ab7),_0x3d0c41=Cesium$1[_0xdb08e9(0x2f3,0x37e)]['toDegrees'](_0x118b38['longitude']),_0x262a13=Cesium$1['Math']['toDegrees'](_0x118b38[_0xdb08e9(0x394,0x3a0)]);_0x2fcfb1=Math[_0x2e2e13(0x3e3,0x404)](_0x2fcfb1,_0x3d0c41),_0x1e0f72=Math['max'](_0x1e0f72,_0x3d0c41),_0x25cb15=Math['min'](_0x25cb15,_0x262a13),_0x3b3f3b=Math['max'](_0x3b3f3b,_0x262a13);}if(!_0x596c43){const _0xbb1bbd=new Cesium$1[(_0xdb08e9(0x37b,0x3fd))](Math['max'](this['windData'][_0xdb08e9(0x350,0x363)]['west'],_0x2fcfb1),Math['min'](this['windData'][_0x2e2e13(0x39e,0x380)]['east'],_0x1e0f72)),_0xab06ff=new Cesium$1['Cartesian2'](Math['max'](this['windData'][_0x2e2e13(0x38f,0x380)]['south'],_0x25cb15),Math['min'](this[_0xdb08e9(0x36c,0x301)]['bounds'][_0xdb08e9(0x35d,0x355)],_0x3b3f3b)),_0x134fb8=(_0xbb1bbd['y']-_0xbb1bbd['x'])*0.05,_0x1c7eaa=(_0xab06ff['y']-_0xab06ff['x'])*0.05;_0xbb1bbd['x']=Math['max'](this['windData']['bounds'][_0x2e2e13(0x3e9,0x41d)],_0xbb1bbd['x']-_0x134fb8),_0xbb1bbd['y']=Math[_0x2e2e13(0x412,0x404)](this['windData']['bounds'][_0x2e2e13(0x3da,0x39e)],_0xbb1bbd['y']+_0x134fb8),_0xab06ff['x']=Math['max'](this[_0x2e2e13(0x3aa,0x39c)][_0x2e2e13(0x3a7,0x380)]['south'],_0xab06ff['x']-_0x1c7eaa),_0xab06ff['y']=Math['min'](this['windData']['bounds']['north'],_0xab06ff['y']+_0x1c7eaa),this['viewerParameters']['lonRange']=_0xbb1bbd,this['viewerParameters'][_0x2e2e13(0x2f6,0x34e)]=_0xab06ff;const _0x8fc15a=this[_0xdb08e9(0x36c,0x337)][_0xdb08e9(0x350,0x2db)]['east']-this['windData']['bounds'][_0x2e2e13(0x4a5,0x41d)],_0x5467a0=this[_0x2e2e13(0x39b,0x39c)]['bounds'][_0x2e2e13(0x324,0x38d)]-this['windData']['bounds'][_0x2e2e13(0x40c,0x41a)],_0x3a7478=(_0xbb1bbd['y']-_0xbb1bbd['x'])/_0x8fc15a,_0x4df053=(_0xab06ff['y']-_0xab06ff['x'])/_0x5467a0,_0x5cba20=Math['min'](_0x3a7478,_0x4df053),_0x485380=0x3e8*_0x5cba20;_0x485380>0x0&&(this['viewerParameters']['pixelSize']=Math[_0xdb08e9(0x2d4,0x357)](0x0,Math[_0x2e2e13(0x486,0x404)](0x3e8,_0x485380)));}this['viewerParameters']['sceneMode']=this['scene'][_0x2e2e13(0x3ad,0x3c3)],(_0x284f03=this['particleSystem'])===null||_0x284f03===void 0x0||_0x284f03['applyViewerParameters'](this['viewerParameters']);}['getDataAtLonLat'](_0xfea94c,_0x5b8928){const {bounds:_0x42f7eb,width:_0x15263b,height:_0x253635,u:_0x242230,v:_0xfa0f0b,speed:_0x1b9677}=this['windData'],{flipY:_0x338495}=this[_0x12b0e6(-0x1b8,-0x160)];if(_0xfea94c<_0x42f7eb[_0x12b0e6(-0xea,-0xbe)]||_0xfea94c>_0x42f7eb['east']||_0x5b8928<_0x42f7eb['south']||_0x5b8928>_0x42f7eb['north'])return null;const _0x4eb0a8=(_0xfea94c-_0x42f7eb[_0x333671(0x3d0,0x34f)])/(_0x42f7eb['east']-_0x42f7eb[_0x12b0e6(-0xea,-0xb1)])*(_0x15263b-0x1);let _0x12f198=(_0x5b8928-_0x42f7eb[_0x333671(0x394,0x34c)])/(_0x42f7eb[_0x333671(0x2b1,0x2bf)]-_0x42f7eb['south'])*(_0x253635-0x1);_0x338495&&(_0x12f198=_0x253635-0x1-_0x12f198);const _0x47d825=Math[_0x12b0e6(-0x177,-0x107)](_0x4eb0a8),_0x3ad17c=Math['floor'](_0x12f198),_0x5e8786=Math[_0x12b0e6(-0x177,-0x1a9)](_0x4eb0a8),_0x4c4257=Math[_0x333671(0x309,0x336)](_0x5e8786+0x1,_0x15263b-0x1),_0x4f37ab=Math['floor'](_0x12f198);function _0x12b0e6(_0x3c5a15,_0x5c9a8a){return _0x3c636e(_0x5c9a8a,_0x3c5a15- -0xfd);}const _0x1a7208=Math[_0x12b0e6(-0x103,-0xc5)](_0x4f37ab+0x1,_0x253635-0x1),_0x351fd8=_0x4eb0a8-_0x5e8786,_0x55601c=_0x12f198-_0x4f37ab,_0xaf93bb=_0x3ad17c*_0x15263b+_0x47d825,_0x3f3570=_0x4f37ab*_0x15263b+_0x5e8786,_0x20ca9b=_0x4f37ab*_0x15263b+_0x4c4257,_0x1a524c=_0x1a7208*_0x15263b+_0x5e8786;function _0x333671(_0x5b4cd3,_0x40acb7){return _0x3c636e(_0x5b4cd3,_0x40acb7-0x33c);}const _0x5d4312=_0x1a7208*_0x15263b+_0x4c4257,_0x44de60=_0x242230['array'][_0x3f3570],_0x2b51ae=_0x242230['array'][_0x20ca9b],_0x5a2fa9=_0x242230['array'][_0x1a524c],_0x152fb8=_0x242230['array'][_0x5d4312],_0x398b47=(0x1-_0x351fd8)*(0x1-_0x55601c)*_0x44de60+_0x351fd8*(0x1-_0x55601c)*_0x2b51ae+(0x1-_0x351fd8)*_0x55601c*_0x5a2fa9+_0x351fd8*_0x55601c*_0x152fb8,_0x526a58=_0xfa0f0b['array'][_0x3f3570],_0x340851=_0xfa0f0b['array'][_0x20ca9b],_0xf25206=_0xfa0f0b['array'][_0x1a524c],_0x2445f0=_0xfa0f0b['array'][_0x5d4312],_0x41556b=(0x1-_0x351fd8)*(0x1-_0x55601c)*_0x526a58+_0x351fd8*(0x1-_0x55601c)*_0x340851+(0x1-_0x351fd8)*_0x55601c*_0xf25206+_0x351fd8*_0x55601c*_0x2445f0,_0x5066f9=Math['sqrt'](_0x398b47*_0x398b47+_0x41556b*_0x41556b),_0x2844a2={};_0x2844a2['u']=_0x242230['array'][_0xaf93bb],_0x2844a2['v']=_0xfa0f0b['array'][_0xaf93bb],_0x2844a2['speed']=_0x1b9677[_0x12b0e6(-0x180,-0x1a5)][_0xaf93bb];const _0x3f204d={};_0x3f204d['u']=_0x398b47,_0x3f204d['v']=_0x41556b,_0x3f204d['speed']=_0x5066f9;const _0x4d12c8={};return _0x4d12c8[_0x12b0e6(-0x17c,-0x17c)]=_0x2844a2,_0x4d12c8[_0x333671(0x3a0,0x348)]=_0x3f204d,_0x4d12c8;}}mars3d__namespace['LayerUtil']['register'](_0x2fca1e(-0xd1,-0x100),WindLayer),mars3d__namespace[_0x2fca1e(-0xb3,-0x8d)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x4cce62(_0x21f69c,_0x15b66c){return _0x3c636e(_0x21f69c,_0x15b66c- -0x3);}this['lng']=null,this['lat']=null,this[_0x13d082(0x418,0x467)]=null,this[_0x13d082(0x43e,0x40a)]=null;function _0x13d082(_0xa4d08b,_0x10d8a8){return _0x2fca1e(_0x10d8a8,_0xa4d08b-0x455);}this['age']=null,this['speed']=null;}['destroy'](){for(const _0x20f56f in this){delete this[_0x20f56f];}}}class CanvasWindField{constructor(_0x273e51){function _0x4ccce5(_0x5e41d6,_0x5a7d10){return _0x3c636e(_0x5a7d10,_0x5e41d6-0x296);}this[_0x4ccce5(0x222,0x1c9)](_0x273e51);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x5d8019){function _0x5d7abb(_0x111734,_0x518b7c){return _0x2fca1e(_0x518b7c,_0x111734-0x281);}function _0x46cb96(_0x2d259f,_0x17e3c7){return _0x2fca1e(_0x17e3c7,_0x2d259f-0x1c7);}this[_0x46cb96(0x11c,0x8f)]=(0x64-(_0x5d8019>0x63?0x63:_0x5d8019))*0x64,this['_calc_speedRate']=[(this[_0x46cb96(0x14d,0x16a)]-this['xmin'])/this[_0x46cb96(0x11c,0x144)],(this[_0x5d7abb(0x23b,0x297)]-this[_0x46cb96(0x180,0x1a0)])/this['_speedRate']];}get['maxAge'](){function _0x2e6cdd(_0x79cb25,_0xb607a1){return _0x3c636e(_0x79cb25,_0xb607a1-0x82);}return this[_0x2e6cdd(0x3,0x34)];}set[_0x3c636e(-0x8f,-0xd5)](_0x559bff){this['_maxAge']=_0x559bff;}['setOptions'](_0x5019c5){this['options']=_0x5019c5,this[_0x4effe8(0x2c,-0x1d)]=_0x5019c5['maxAge']||0x78,this[_0x4d5b3d(0x3fc,0x449)]=_0x5019c5['speedRate']||0x32;function _0x4d5b3d(_0x23be87,_0x40f386){return _0x3c636e(_0x23be87,_0x40f386-0x479);}function _0x4effe8(_0x863e50,_0x2295ca){return _0x3c636e(_0x863e50,_0x2295ca-0xb8);}this[_0x4d5b3d(0x414,0x44e)]=[];const _0x2d98ee=_0x5019c5['particlesNumber']||0x1000;for(let _0x3fd6d0=0x0;_0x3fd6d0<_0x2d98ee;_0x3fd6d0++){const _0x5b512b=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x5b512b);}}[_0x2fca1e(-0x77,-0x60)](_0x495470){this['rows']=_0x495470[_0x271c1e(0x280,0x2ef)],this[_0x271c1e(0x3ab,0x34c)]=_0x495470[_0x49bdd8(0x1ae,0x194)],this[_0x49bdd8(0x1a6,0x130)]=_0x495470['xmin'],this[_0x49bdd8(0x148,0xcb)]=_0x495470['xmax'],this[_0x271c1e(0x2af,0x319)]=_0x495470['ymin'],this['ymax']=_0x495470[_0x49bdd8(0x17c,0x132)],this[_0x271c1e(0x297,0x30e)]=[];const _0x37d711=_0x495470['udata'],_0x1b7c55=_0x495470[_0x271c1e(0x2b6,0x2da)];function _0x271c1e(_0x2db234,_0x3a7901){return _0x3c636e(_0x2db234,_0x3a7901-0x343);}let _0x4d8193=![];_0x37d711['length']===this[_0x271c1e(0x291,0x2ef)]&&_0x37d711[0x0]['length']===this['cols']&&(_0x4d8193=!![]);function _0x49bdd8(_0x3d8b9,_0x4e4993){return _0x2fca1e(_0x4e4993,_0x3d8b9-0x1c2);}let _0x385c6c=0x0,_0x41bc03=null,_0xefa77d=null;for(let _0x582c29=0x0;_0x582c29<this['rows'];_0x582c29++){_0x41bc03=[];for(let _0x183da2=0x0;_0x183da2<this[_0x271c1e(0x367,0x34c)];_0x183da2++,_0x385c6c++){_0x4d8193?_0xefa77d=this['_calcUV'](_0x37d711[_0x582c29][_0x183da2],_0x1b7c55[_0x582c29][_0x183da2]):_0xefa77d=this['_calcUV'](_0x37d711[_0x385c6c],_0x1b7c55[_0x385c6c]),_0x41bc03['push'](_0xefa77d);}this['grid']['push'](_0x41bc03);}!this['options'][_0x49bdd8(0x129,0x18d)]&&this['grid']['reverse']();}['clear'](){delete this[_0x44bc69(-0x5c,-0x3e)],delete this['cols'],delete this[_0xb9f821(0x517,0x4c6)];function _0x44bc69(_0x405362,_0x57ee85){return _0x2fca1e(_0x405362,_0x57ee85-0x33);}delete this['xmax'],delete this['ymin'];function _0xb9f821(_0x436ecf,_0x44cfd0){return _0x2fca1e(_0x44cfd0,_0x436ecf-0x533);}delete this[_0xb9f821(0x4ed,0x4da)],delete this['grid'],delete this['particles'];}[_0x3c636e(0x7a,-0x13)](_0x153aab,_0x3cbb15){const _0x16be45=(_0x153aab-this['xmin'])/(this['xmax']-this[_0x2fec6c(-0x10d,-0x144)])*(this[_0x2fec6c(-0x105,-0xe1)]-0x1),_0x4b56d0=(this[_0x58c077(-0xa4,-0x99)]-_0x3cbb15)/(this['ymax']-this[_0x58c077(-0x2a,-0x9a)])*(this[_0x58c077(-0x139,-0xc4)]-0x1);function _0x2fec6c(_0x26b399,_0x343524){return _0x2fca1e(_0x343524,_0x26b399- -0xf1);}function _0x58c077(_0x5e4cd0,_0x363e07){return _0x2fca1e(_0x5e4cd0,_0x363e07- -0x53);}return[_0x16be45,_0x4b56d0];}['getUVByXY'](_0x3d9138,_0x5c4cb9){function _0x52e775(_0x57dcc5,_0x4c83b9){return _0x3c636e(_0x4c83b9,_0x57dcc5- -0x23c);}if(_0x3d9138<0x0||_0x3d9138>=this['cols']||_0x5c4cb9>=this['rows'])return[0x0,0x0,0x0];const _0x1d2297=Math[_0x52e775(-0x2b6,-0x23d)](_0x3d9138),_0x37d1c4=Math[_0x52e775(-0x2b6,-0x2ee)](_0x5c4cb9);if(_0x1d2297===_0x3d9138&&_0x37d1c4===_0x5c4cb9)return this['grid'][_0x5c4cb9][_0x3d9138];const _0x4d1148=_0x1d2297+0x1;function _0x28b113(_0x3b2019,_0x3d8bc1){return _0x2fca1e(_0x3d8bc1,_0x3b2019-0x1f4);}const _0x55e101=_0x37d1c4+0x1,_0x28831e=this['getUVByXY'](_0x1d2297,_0x37d1c4),_0x5f21de=this['getUVByXY'](_0x4d1148,_0x37d1c4),_0x34bda2=this[_0x52e775(-0x252,-0x21b)](_0x1d2297,_0x55e101),_0x2677ac=this['getUVByXY'](_0x4d1148,_0x55e101);let _0x4faf62=null;try{_0x4faf62=this['_bilinearInterpolation'](_0x3d9138-_0x1d2297,_0x5c4cb9-_0x37d1c4,_0x28831e,_0x5f21de,_0x34bda2,_0x2677ac);}catch(_0x3aa88f){console['log'](_0x3d9138,_0x5c4cb9);}return _0x4faf62;}[_0x2fca1e(-0x16f,-0xeb)](_0x451bca,_0x5caf3d,_0x33c526,_0x11493c,_0x3d8c03,_0x4540f7){const _0x13d7c4=0x1-_0x451bca,_0x52fc3b=0x1-_0x5caf3d,_0x196eeb=_0x13d7c4*_0x52fc3b,_0x4146c4=_0x451bca*_0x52fc3b,_0xdb3d85=_0x13d7c4*_0x5caf3d,_0x596831=_0x451bca*_0x5caf3d;function _0x4be42a(_0x40476c,_0x1de866){return _0x3c636e(_0x40476c,_0x1de866- -0x36);}const _0x34b18e=_0x33c526[0x0]*_0x196eeb+_0x11493c[0x0]*_0x4146c4+_0x3d8c03[0x0]*_0xdb3d85+_0x4540f7[0x0]*_0x596831,_0x262827=_0x33c526[0x1]*_0x196eeb+_0x11493c[0x1]*_0x4146c4+_0x3d8c03[0x1]*_0xdb3d85+_0x4540f7[0x1]*_0x596831;return this[_0x4be42a(-0x114,-0xe8)](_0x34b18e,_0x262827);}['_calcUV'](_0x349611,_0x3e1b18){function _0x40c3f6(_0x11052b,_0x5228cc){return _0x3c636e(_0x11052b,_0x5228cc- -0x1b0);}return[+_0x349611,+_0x3e1b18,Math[_0x40c3f6(-0x262,-0x1eb)](_0x349611*_0x349611+_0x3e1b18*_0x3e1b18)];}[_0x3c636e(0x2a,-0x45)](_0x4d3ae8,_0x16e714){function _0x1a9c62(_0x469eb3,_0x11ca1b){return _0x2fca1e(_0x11ca1b,_0x469eb3-0x178);}if(!this[_0x1911e5(-0xea,-0xde)](_0x4d3ae8,_0x16e714))return null;const _0x3b65ef=this[_0x1a9c62(0x148,0xcd)](_0x4d3ae8,_0x16e714);function _0x1911e5(_0x1c1c18,_0x5729d0){return _0x2fca1e(_0x5729d0,_0x1c1c18- -0xc5);}const _0x190724=this['getUVByXY'](_0x3b65ef[0x0],_0x3b65ef[0x1]);return _0x190724;}['isInExtent'](_0x527039,_0x1d7c95){function _0x2d810e(_0x4d7a94,_0x174e19){return _0x2fca1e(_0x174e19,_0x4d7a94- -0x122);}return _0x527039>=this[_0x2d810e(-0x13e,-0xcc)]&&_0x527039<=this['xmax']&&_0x1d7c95>=this['ymin']&&_0x1d7c95<=this['ymax']?!![]:![];}[_0x2fca1e(-0x22,-0x50)](){function _0x412abe(_0x7bb5cb,_0x555e04){return _0x3c636e(_0x7bb5cb,_0x555e04- -0x12b);}const _0x53d084=fRandomByfloat(this[_0x17831f(0x44,0x99)],this['xmax']),_0x236cb2=fRandomByfloat(this['ymin'],this[_0x412abe(-0x1a0,-0x154)]),_0x18a7e6={};_0x18a7e6['lat']=_0x236cb2;function _0x17831f(_0x1f5fb5,_0x53e2c5){return _0x2fca1e(_0x1f5fb5,_0x53e2c5-0xb5);}return _0x18a7e6['lng']=_0x53d084,_0x18a7e6;}[_0x3c636e(-0x7d,-0xab)](){function _0x533b3d(_0x38288e,_0xecb475){return _0x3c636e(_0x38288e,_0xecb475-0x358);}let _0x189885,_0x37b58c,_0x2ee4d0;function _0x431c21(_0x41718f,_0x344e12){return _0x2fca1e(_0x41718f,_0x344e12- -0x239);}for(let _0x44a86b=0x0,_0x5a70de=this['particles']['length'];_0x44a86b<_0x5a70de;_0x44a86b++){let _0x3fa7a5=this['particles'][_0x44a86b];_0x3fa7a5['age']<=0x0&&(_0x3fa7a5=this[_0x533b3d(0x2d5,0x33e)](_0x3fa7a5));if(_0x3fa7a5['age']>0x0){const _0x570416=_0x3fa7a5['tlng'],_0x414ffe=_0x3fa7a5[_0x431c21(-0x236,-0x250)];_0x2ee4d0=this[_0x533b3d(0x374,0x313)](_0x570416,_0x414ffe),_0x2ee4d0?(_0x189885=_0x570416+this[_0x533b3d(0x228,0x285)][0x0]*_0x2ee4d0[0x0],_0x37b58c=_0x414ffe+this['_calc_speedRate'][0x1]*_0x2ee4d0[0x1],_0x3fa7a5[_0x533b3d(0x340,0x330)]=_0x570416,_0x3fa7a5['lat']=_0x414ffe,_0x3fa7a5[_0x431c21(-0x268,-0x276)]=_0x189885,_0x3fa7a5['tlat']=_0x37b58c,_0x3fa7a5[_0x533b3d(0x2a2,0x320)]=_0x2ee4d0[0x2],_0x3fa7a5['age']--):_0x3fa7a5['age']=0x0;}}return this['particles'];}['_randomParticle'](_0x285312){let _0x500098,_0x2061f1;function _0x13c7fc(_0x2ecc3f,_0x55510d){return _0x2fca1e(_0x2ecc3f,_0x55510d-0xf9);}for(let _0x3ca6ec=0x0;_0x3ca6ec<0x1e;_0x3ca6ec++){_0x500098=this[_0xfd6b16(-0x129,-0x19e)](),_0x2061f1=this[_0xfd6b16(-0x13b,-0x150)](_0x500098['lng'],_0x500098['lat']);if(_0x2061f1&&_0x2061f1[0x2]>0x0)break;}if(!_0x2061f1)return _0x285312;function _0xfd6b16(_0x26f75c,_0x22414e){return _0x2fca1e(_0x22414e,_0x26f75c- -0xd9);}const _0x2fafb4=_0x500098['lng']+this[_0xfd6b16(-0x1c9,-0x1f4)][0x0]*_0x2061f1[0x0],_0x2822c9=_0x500098['lat']+this[_0x13c7fc(0x54,0x9)][0x1]*_0x2061f1[0x1];return _0x285312['lng']=_0x500098[_0x13c7fc(0xf9,0xb4)],_0x285312['lat']=_0x500098[_0xfd6b16(-0x138,-0xdf)],_0x285312[_0x13c7fc(0x67,0xbc)]=_0x2fafb4,_0x285312['tlat']=_0x2822c9,_0x285312[_0xfd6b16(-0xe8,-0xb9)]=Math['round'](0xa+Math[_0x13c7fc(0x75,0xf)]()*this['maxAge']),_0x285312['speed']=_0x2061f1[0x2],_0x285312;}['destroy'](){for(const _0x4ddaee in this){delete this[_0x4ddaee];}}}function fRandomByfloat(_0x5f2cd6,_0x429aac){return _0x5f2cd6+Math['random']()*(_0x429aac-_0x5f2cd6);}const Cesium=mars3d__namespace[_0x3c636e(-0x29,-0x5b)],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x3327f6={}){function _0x31dcf6(_0x58c790,_0x252501){return _0x3c636e(_0x252501,_0x58c790- -0x236);}function _0xbf7c7f(_0x598764,_0x28c3c8){return _0x3c636e(_0x598764,_0x28c3c8-0x4f3);}super(_0x3327f6),this['_setOptionsHook'](_0x3327f6),this[_0x31dcf6(-0x2ab,-0x282)]=null,_0x3327f6['colors']&&_0x3327f6[_0x31dcf6(-0x297,-0x20a)]&&(this['_colorRamp']=new mars3d__namespace[(_0xbf7c7f(0x47c,0x4d8))](_0x3327f6));}[_0x2fca1e(-0xbe,-0x11d)](_0x340d56,_0x21b229){this['frameTime']=0x3e8/(_0x340d56[_0x4de17e(0x2e9,0x2d7)]||0xa),this['_pointerEvents']=this[_0x5f0637(-0x175,-0x123)]['pointerEvents']??![],this[_0x4de17e(0x30a,0x28a)]=_0x340d56['color']||'#ffffff',this[_0x5f0637(-0x1b7,-0x14d)]=_0x340d56[_0x5f0637(-0x1b7,-0x213)]||0x1,this[_0x5f0637(-0x120,-0x109)]=_0x340d56['fixedHeight']??0x0;function _0x5f0637(_0x1419b3,_0x7010e8){return _0x2fca1e(_0x7010e8,_0x1419b3- -0x9d);}this['flipY']=_0x340d56['flipY']??![];function _0x4de17e(_0x97c24d,_0x34da19){return _0x3c636e(_0x34da19,_0x97c24d-0x315);}this['windField']&&this[_0x4de17e(0x284,0x2a0)][_0x5f0637(-0x12e,-0x113)](_0x340d56);}get[_0x2fca1e(-0x71,-0x8d)](){return this['canvas'];}get[_0x2fca1e(-0x3a,-0x20)](){function _0xa2b242(_0x31e3f8,_0x38d686){return _0x3c636e(_0x38d686,_0x31e3f8-0x3e);}function _0x39e9ea(_0xf0e5f2,_0x575caa){return _0x3c636e(_0xf0e5f2,_0x575caa-0x512);}return this['_map']['scene'][_0x39e9ea(0x463,0x49d)][_0x39e9ea(0x500,0x48a)];}get['canvasHeight'](){function _0x196419(_0x855c55,_0x83458c){return _0x2fca1e(_0x855c55,_0x83458c- -0x210);}return this['_map'][_0x196419(-0x268,-0x279)]['canvas']['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x122f44){function _0x570343(_0x27db89,_0x4107a2){return _0x3c636e(_0x27db89,_0x4107a2-0x28c);}this['_pointerEvents']=_0x122f44;if(!this['canvas'])return;function _0x5f207d(_0x350d69,_0x50fa73){return _0x3c636e(_0x350d69,_0x50fa73-0x4d6);}_0x122f44?this[_0x570343(0x275,0x217)][_0x570343(0x2b6,0x248)][_0x570343(0x24b,0x266)]='all':this['canvas']['style'][_0x570343(0x221,0x266)]=_0x570343(0x220,0x1c6);}get['particlesNumber'](){function _0x4ce306(_0x39a54d,_0x532453){return _0x2fca1e(_0x39a54d,_0x532453-0x4a3);}return this[_0x4ce306(0x361,0x3cb)]['particlesNumber'];}set[_0x3c636e(-0xcb,-0xcc)](_0x42c6ea){function _0x490a9f(_0x47f557,_0x6b3455){return _0x2fca1e(_0x47f557,_0x6b3455-0x15f);}this[_0x4c19ea(0x24c,0x257)]['particlesNumber']=_0x42c6ea,clearTimeout(this[_0x4c19ea(0x236,0x249)]);function _0x4c19ea(_0x3e011f,_0x577de4){return _0x2fca1e(_0x577de4,_0x3e011f-0x324);}this[_0x4c19ea(0x236,0x2ab)]=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){return this['options']['speedRate'];}set[_0x3c636e(0x18,-0x30)](_0x4665b3){function _0x20983a(_0x46e3ff,_0x38c87f){return _0x2fca1e(_0x38c87f,_0x46e3ff- -0x171);}function _0x4d12b4(_0x208eb5,_0x4830a0){return _0x2fca1e(_0x4830a0,_0x208eb5-0x2cb);}this[_0x4d12b4(0x1f3,0x17b)][_0x4d12b4(0x27e,0x2a4)]=_0x4665b3,this[_0x20983a(-0x21f,-0x266)]&&(this[_0x4d12b4(0x21d,0x293)]['speedRate']=_0x4665b3);}get['maxAge'](){return this['options']['maxAge'];}set['maxAge'](_0x3c65c1){this['options']['maxAge']=_0x3c65c1,this['windField']&&(this['windField']['maxAge']=_0x3c65c1);}get['data'](){return this['windData'];}set[_0x3c636e(-0x61,-0xf)](_0x4e6c98){function _0x2e44bf(_0x57a071,_0x363923){return _0x3c636e(_0x363923,_0x57a071-0x364);}this[_0x2e44bf(0x30a,0x359)](_0x4e6c98);}get[_0x3c636e(-0x85,-0xaa)](){let _0x3fa939=this[_0x4152a4(0x78,0x75)]['xmin'],_0x16cbb0=this[_0x2f5d07(0x292,0x30c)][_0x2f5d07(0x300,0x31d)],_0x47a5d4=this[_0x2f5d07(0x343,0x30c)]['ymin'],_0x4fd316=this['windData']['ymax'];_0x16cbb0>=0x167&&_0x3fa939===0x0&&(_0x3fa939=-0xb4,_0x16cbb0=0xb4);function _0x2f5d07(_0xb9971b,_0x269165){return _0x2fca1e(_0xb9971b,_0x269165-0x397);}_0x3fa939=Math[_0x2f5d07(0x24f,0x274)](_0x3fa939,-0xb4),_0x16cbb0=Math[_0x2f5d07(0x3d0,0x374)](_0x16cbb0,0xb4),_0x47a5d4=Math[_0x4152a4(-0x20,-0x59)](_0x47a5d4,-0x5a),_0x4fd316=Math[_0x2f5d07(0x39a,0x374)](_0x4fd316,0x5a);function _0x4152a4(_0x4c98d6,_0x386425){return _0x2fca1e(_0x386425,_0x4c98d6-0x103);}return Cesium[_0x4152a4(0x1d,-0x3c)]['fromDegrees'](_0x3fa939,_0x47a5d4,_0x16cbb0,_0x4fd316);}['_showHook'](_0x3e154f){function _0x573d5a(_0x28706e,_0x3512a6){return _0x2fca1e(_0x3512a6,_0x28706e- -0xf);}function _0x25b102(_0x3e43d0,_0x33143c){return _0x3c636e(_0x3e43d0,_0x33143c- -0x5);}_0x3e154f?this['_addedHook']():(this[_0x25b102(-0x4e,-0x73)]&&(this[_0x573d5a(-0xe7,-0x82)]['data']=this[_0x573d5a(-0x9a,-0xc8)]),this['_removedHook']());}[_0x3c636e(-0x118,-0xb3)](){function _0x57040c(_0x41358d,_0x2279c6){return _0x2fca1e(_0x41358d,_0x2279c6-0x1ae);}this['options']['worker']?this['initWorker']():this['windField']=new CanvasWindField(this[_0x57040c(0x14e,0xd6)]);}['_addedHook'](){this[_0x5ee051(-0x221,-0x245)]=this['_createCanvas']();const _0x5a196a={};function _0x381a0a(_0x448f20,_0xc03471){return _0x2fca1e(_0x448f20,_0xc03471-0x588);}_0x5a196a['willReadFrequently']=!![];function _0x5ee051(_0x50990a,_0x417957){return _0x3c636e(_0x50990a,_0x417957- -0x1d0);}this['canvasContext']=this['canvas']['getContext']('2d',_0x5a196a),this['bindEvent'](),this['options']['data']&&this['setData'](this['options'][_0x381a0a(0x594,0x55c)]);}[_0x3c636e(-0x97,-0x95)](){function _0x230bfd(_0x3b8b6d,_0x19ee32){return _0x3c636e(_0x3b8b6d,_0x19ee32- -0x27);}this['clear'](),this[_0x230bfd(-0x25,-0x7c)]();function _0x55276b(_0x3bc7bb,_0x7b6786){return _0x2fca1e(_0x3bc7bb,_0x7b6786-0x142);}this['canvas']&&(this[_0x230bfd(-0x12b,-0xb4)][_0x55276b(0x185,0x109)][_0x230bfd(-0x73,-0x13)](this[_0x55276b(0x7e,0xb0)]),delete this[_0x230bfd(-0x119,-0x9c)]);}[_0x2fca1e(-0xff,-0xfe)](){const _0x2bc841=mars3d__namespace['DomUtil'][_0x45e3a7(-0x1b0,-0x143)]('canvas','mars3d-canvasWind',this['_map']['container']);_0x2bc841['style'][_0x34bd84(-0x5c,-0x3a)]='absolute',_0x2bc841[_0x34bd84(-0x53,-0x92)]['top']='0px',_0x2bc841[_0x45e3a7(-0x15a,-0x14b)][_0x34bd84(0x7,0x13)]=_0x45e3a7(-0x15e,-0x117),_0x2bc841['style']['width']=this[_0x45e3a7(-0x1a3,-0x1c6)]['scene'][_0x45e3a7(-0x18b,-0x16c)][_0x45e3a7(-0x19e,-0x14d)]+'px',_0x2bc841[_0x34bd84(-0x53,-0x3f)][_0x34bd84(-0x5a,-0xa2)]=this[_0x34bd84(-0x9c,-0x6b)][_0x34bd84(-0x5b,-0x55)]['canvas']['clientHeight']+'px',_0x2bc841[_0x34bd84(-0x53,-0x18)]['pointerEvents']=this[_0x34bd84(-0x48,-0xa0)]?_0x45e3a7(-0x12d,-0xb6):_0x34bd84(-0xd5,-0x80),_0x2bc841['style'][_0x45e3a7(-0x11a,-0xc5)]=this['options']['zIndex']??0x9;function _0x45e3a7(_0x34882f,_0x2bce19){return _0x3c636e(_0x2bce19,_0x34882f- -0x116);}_0x2bc841[_0x34bd84(-0x5f,-0x4f)]=this[_0x45e3a7(-0x1a3,-0x139)]['scene'][_0x45e3a7(-0x18b,-0x139)][_0x45e3a7(-0x19e,-0x191)];function _0x34bd84(_0x1e6c7c,_0x415245){return _0x3c636e(_0x415245,_0x1e6c7c- -0xf);}return _0x2bc841[_0x45e3a7(-0x161,-0xfd)]=this['_map']['scene'][_0x34bd84(-0x84,-0xc1)]['clientHeight'],_0x2bc841;}['resize'](){function _0x126622(_0x35ff60,_0x111ca2){return _0x3c636e(_0x111ca2,_0x35ff60- -0x6c);}function _0xb7c385(_0x4f5073,_0x1f1d1c){return _0x3c636e(_0x1f1d1c,_0x4f5073- -0x19e);}this['canvas']&&(this['canvas']['style']['width']=this[_0xb7c385(-0x22b,-0x22e)][_0xb7c385(-0x1ea,-0x22e)]['canvas']['clientWidth']+'px',this['canvas'][_0x126622(-0xb0,-0x96)]['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this['canvas']['width']=this['_map'][_0xb7c385(-0x1ea,-0x1f8)]['canvas']['clientWidth'],this['canvas']['height']=this[_0xb7c385(-0x22b,-0x1de)]['scene']['canvas'][_0x126622(-0x15d,-0x15b)]);}[_0x2fca1e(-0x3b,-0x8a)](){function _0x24a3f5(_0xacd325,_0x294e6e){return _0x3c636e(_0x294e6e,_0xacd325-0x4a6);}const _0x25980c=this;let _0x527f7b=Date['now']();(function _0x418b92(){if(_0x25980c['isDestroy'])return;function _0x1e41b0(_0xbb9d0,_0x1a8ba1){return _0x2cae(_0xbb9d0-0x347,_0x1a8ba1);}_0x25980c['_animateFrame']=window[_0x1e41b0(0x49b,0x430)](_0x418b92);function _0x1d7008(_0xe6cf15,_0x100707){return _0x2cae(_0xe6cf15-0x31d,_0x100707);}if(_0x25980c['show']&&_0x25980c['windField']){const _0x4e3800=Date[_0x1d7008(0x445,0x3cf)](),_0x3f4f58=_0x4e3800-_0x527f7b;_0x3f4f58>_0x25980c[_0x1e41b0(0x40d,0x395)]&&(_0x527f7b=_0x4e3800-_0x3f4f58%_0x25980c['frameTime'],_0x25980c[_0x1d7008(0x475,0x3ea)]());}}(),window['addEventListener']('resize',this['resize'][_0x4a8646(0x406,0x3eb)](this),![]),this[_0x4a8646(0x3ef,0x3b5)]=![],this['mouse_move']=![]);function _0x4a8646(_0x3de7bb,_0x2d0c02){return _0x3c636e(_0x3de7bb,_0x2d0c02-0x3da);}this['options'][_0x24a3f5(0x4b3,0x52d)]&&(this['_map']['on'](mars3d__namespace[_0x24a3f5(0x477,0x4db)][_0x24a3f5(0x3ac,0x332)],this['_onMapWhellEvent'],this),this[_0x4a8646(0x34c,0x34d)]['on'](mars3d__namespace['EventType'][_0x4a8646(0x351,0x304)],this['_onMouseDownEvent'],this),this[_0x4a8646(0x34e,0x34d)]['on'](mars3d__namespace['EventType']['mouseUp'],this[_0x4a8646(0x27e,0x2f8)],this));}['unbindEvent'](){window['cancelAnimationFrame'](this[_0x1d822c(0x2dc,0x308)]),delete this[_0x1d853c(-0x305,-0x2dd)];function _0x1d853c(_0x251e4,_0x1a50de){return _0x2fca1e(_0x251e4,_0x1a50de- -0x1e4);}function _0x1d822c(_0x2c22f3,_0x3226a5){return _0x2fca1e(_0x3226a5,_0x2c22f3-0x3d5);}window[_0x1d853c(-0x2ea,-0x25f)](_0x1d822c(0x355,0x337),this['resize']),this['options'][_0x1d853c(-0x1c8,-0x1f4)]&&(this['_map']['off'](mars3d__namespace['EventType']['wheel'],this[_0x1d822c(0x394,0x316)],this),this[_0x1d822c(0x32b,0x380)]['off'](mars3d__namespace['EventType'][_0x1d822c(0x2e2,0x335)],this['_onMouseDownEvent'],this),this[_0x1d822c(0x32b,0x2df)]['off'](mars3d__namespace[_0x1d822c(0x389,0x3b3)]['mouseUp'],this['_onMouseUpEvent'],this),this[_0x1d853c(-0x20c,-0x28e)][_0x1d822c(0x367,0x2f5)](mars3d__namespace[_0x1d822c(0x389,0x303)]['mouseMove'],this[_0x1d853c(-0x357,-0x2f1)],this));}[_0x2fca1e(0x2c,-0x41)](_0x1860bd){function _0x129f54(_0x4ee279,_0x887f3){return _0x2fca1e(_0x4ee279,_0x887f3-0x570);}clearTimeout(this[_0x2a5e2e(-0x285,-0x237)]);if(!this['show']||!this[_0x2a5e2e(-0x1ea,-0x25d)])return;this['canvas']['style']['visibility']='hidden';function _0x2a5e2e(_0x2e2e9f,_0x482e31){return _0x2fca1e(_0x2e2e9f,_0x482e31- -0x1cb);}this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;function _0x167740(_0x31838d,_0x5f2a72){return _0x2a5e2e(_0x5f2a72,_0x31838d-0x2fa);}function _0x210920(_0x3742ec,_0x268663){return _0x129f54(_0x268663,_0x3742ec- -0x60c);}this[_0x210920(-0x19d,-0x1c0)](),this[_0x167740(0x9d,0xb6)]['style'][_0x210920(-0x137,-0x191)]='visible';},0xc8);}['_onMouseDownEvent'](_0x5a0710){function _0x3f0976(_0x46080b,_0x554ab7){return _0x2fca1e(_0x554ab7,_0x46080b-0x2f8);}this['mouse_down']=!![],this[_0x489071(0x3f3,0x386)][_0x3f0976(0x28a,0x2f8)](mars3d__namespace[_0x489071(0x451,0x3fc)]['mouseMove'],this['_onMouseMoveEvent'],this);function _0x489071(_0x40c67c,_0x56997d){return _0x3c636e(_0x56997d,_0x40c67c-0x480);}this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}[_0x2fca1e(-0x7f,-0x10d)](_0x5841fb){function _0x27abc2(_0x28d6e5,_0x1825da){return _0x3c636e(_0x1825da,_0x28d6e5-0x179);}if(!this['show']||!this[_0x173139(-0x14a,-0x190)])return;function _0x173139(_0x325c10,_0x33ccb1){return _0x2fca1e(_0x325c10,_0x33ccb1- -0xfe);}this['mouse_down']&&(this[_0x27abc2(0x104,0x11b)]['style'][_0x173139(-0x219,-0x199)]='hidden',this['mouse_move']=!![]);}[_0x3c636e(-0xe6,-0xe2)](_0x470f8a){if(!this['show']||!this['canvas'])return;function _0x5df077(_0x57b6f0,_0x5ac8a5){return _0x2fca1e(_0x5ac8a5,_0x57b6f0-0x3cf);}this[_0x5df077(0x325,0x3a8)]['off'](mars3d__namespace[_0xc575e5(0xbb,0xd8)][_0x5df077(0x2fb,0x296)],this['_onMouseMoveEvent'],this);this['mouse_down']&&this['mouse_move']&&this['redraw']();function _0xc575e5(_0x401696,_0x120b51){return _0x3c636e(_0x120b51,_0x401696-0xea);}this[_0x5df077(0x33d,0x380)]['style']['visibility']='visible',this[_0xc575e5(0xc5,0x69)]=![],this['mouse_move']=![];}['setData'](_0x4bd601){this['clear'](),this['windData']=_0x4bd601;function _0x34581f(_0x3e43af,_0x680f71){return _0x2fca1e(_0x3e43af,_0x680f71-0x427);}function _0x4c32c9(_0x43ddc7,_0x3ae23e){return _0x2fca1e(_0x3ae23e,_0x43ddc7- -0x1f8);}this[_0x4c32c9(-0x2a6,-0x29d)][_0x4c32c9(-0x258,-0x201)](_0x4bd601),this[_0x34581f(0x2d5,0x326)]();}[_0x2fca1e(-0xb0,-0x101)](){function _0x7c734b(_0x505ffd,_0x538950){return _0x2fca1e(_0x505ffd,_0x538950-0x111);}if(!this[_0x7c734b(0x1d,0x2)])return;function _0x2c8620(_0x22030e,_0xccbcee){return _0x2fca1e(_0x22030e,_0xccbcee-0x2bf);}this[_0x7c734b(0x8d,0x63)]['setOptions'](this['options']),this['update']();}['update'](){if(this[_0x561d61(-0x348,-0x385)])return;function _0x561d61(_0x4f42f2,_0x2cae0b){return _0x2fca1e(_0x2cae0b,_0x4f42f2- -0x237);}this[_0x306ded(0x2d2,0x24a)]=!![];if(this['worker'])this['windField']['update']();else{const _0x303c9d=this['windField']['getParticles']();this['_drawLines'](_0x303c9d);}function _0x306ded(_0x262b2b,_0x2aa70c){return _0x2fca1e(_0x262b2b,_0x2aa70c-0x35b);}this['_updateIng']=![];}[_0x3c636e(-0x3e,-0x89)](_0x55ebb0){this['_canvasParticles']=_0x55ebb0,this['canvasContext']['globalCompositeOperation']=_0x237fde(0x429,0x430);function _0x237fde(_0x31528e,_0x4d880a){return _0x2fca1e(_0x4d880a,_0x31528e-0x441);}this[_0x1c79e6(0x13b,0x1a0)]['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this[_0x1c79e6(0x143,0x1a0)][_0x237fde(0x329,0x305)]='lighter',this['canvasContext']['globalAlpha']=0.9;function _0x1c79e6(_0x48c2dd,_0x47b8cd){return _0x3c636e(_0x48c2dd,_0x47b8cd-0x288);}const _0x31de50=this[_0x1c79e6(0x179,0x1fb)][_0x237fde(0x3d8,0x3de)]['mode']!==Cesium[_0x1c79e6(0x202,0x1dc)]['SCENE3D'],_0x479f14=this[_0x1c79e6(0x287,0x285)]*0.25;if(this[_0x1c79e6(0x2fa,0x278)])for(let _0x19b38b=0x0,_0x127889=_0x55ebb0[_0x1c79e6(0x191,0x1e2)];_0x19b38b<_0x127889;_0x19b38b++){const _0x4fdece=_0x55ebb0[_0x19b38b],_0x1ef641=this['_tomap'](_0x4fdece,_0x4fdece['lng'],_0x4fdece['lat'],_0x4fdece[_0x237fde(0x3ea,0x425)]),_0x3bfc99=this['_tomap'](_0x4fdece,_0x4fdece[_0x237fde(0x404,0x3e4)],_0x4fdece[_0x1c79e6(0x297,0x28e)],_0x4fdece[_0x237fde(0x3bf,0x3c9)]);if(!_0x1ef641||!_0x3bfc99)continue;if(_0x31de50&&Math['abs'](_0x1ef641[0x0]-_0x3bfc99[0x0])>=_0x479f14)continue;this[_0x1c79e6(0x15b,0x1a0)]['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this['_colorRamp']['getColor'](_0x4fdece[_0x1c79e6(0x239,0x250)]),this['canvasContext'][_0x1c79e6(0x290,0x219)](_0x1ef641[0x0],_0x1ef641[0x1]),this['canvasContext']['lineTo'](_0x3bfc99[0x0],_0x3bfc99[0x1]),this['canvasContext'][_0x237fde(0x3e6,0x471)]();}else{this['canvasContext']['beginPath'](),this['canvasContext'][_0x237fde(0x327,0x3b5)]=this[_0x1c79e6(0x1b9,0x18b)],this['canvasContext']['strokeStyle']=this[_0x1c79e6(0x2d5,0x27d)];for(let _0x40ed6c=0x0,_0x4dab61=_0x55ebb0['length'];_0x40ed6c<_0x4dab61;_0x40ed6c++){const _0x587a22=_0x55ebb0[_0x40ed6c],_0x466a64=this[_0x237fde(0x398,0x311)](_0x587a22,_0x587a22['lng'],_0x587a22['lat'],_0x587a22['alt']),_0x5265ca=this['_tomap'](_0x587a22,_0x587a22[_0x1c79e6(0x1dc,0x268)],_0x587a22[_0x1c79e6(0x25d,0x28e)],_0x587a22[_0x1c79e6(0x279,0x223)]);if(!_0x466a64||!_0x5265ca)continue;if(_0x31de50&&Math['abs'](_0x466a64[0x0]-_0x5265ca[0x0])>=_0x479f14)continue;this['canvasContext'][_0x237fde(0x3b5,0x419)](_0x466a64[0x0],_0x466a64[0x1]),this[_0x1c79e6(0x182,0x1a0)][_0x1c79e6(0x20c,0x20d)](_0x5265ca[0x0],_0x5265ca[0x1]);}this['canvasContext'][_0x1c79e6(0x268,0x24a)]();}}['_tomap'](_0x105cfa,_0x4c0f7d,_0x4408da,_0x16c8ad){const _0x77d6e3=Cesium[_0x408bd9(-0x230,-0x2b1)]['fromDegrees'](_0x4c0f7d,_0x4408da,_0x16c8ad??this['fixedHeight']);function _0x517164(_0x27ba2c,_0x2be32a){return _0x3c636e(_0x27ba2c,_0x2be32a-0x385);}const _0x8c09cd=this['_map'][_0x408bd9(-0x26a,-0x21e)];if(_0x8c09cd[_0x408bd9(-0x265,-0x244)]===Cesium['SceneMode']['SCENE3D']){const _0x5efd74=new Cesium['EllipsoidalOccluder'](_0x8c09cd['globe'][_0x517164(0x29c,0x303)],_0x8c09cd['camera'][_0x408bd9(-0x2e1,-0x2bb)]),_0x1fa0e6=_0x5efd74[_0x517164(0x26b,0x2a7)](_0x77d6e3);if(!_0x1fa0e6)return _0x105cfa[_0x408bd9(-0x210,-0x1b9)]=0x0,null;}const _0x2d5e6f=mars3d__namespace[_0x517164(0x2cf,0x30e)][_0x408bd9(-0x323,-0x38d)](this[_0x408bd9(-0x2ab,-0x326)]['scene'],_0x77d6e3);function _0x408bd9(_0x20eb17,_0x156373){return _0x3c636e(_0x156373,_0x20eb17- -0x21e);}return _0x2d5e6f?[_0x2d5e6f['x'],_0x2d5e6f['y']]:null;}['clear'](){this['windField'][_0x2b2b80(-0x46,-0xd0)]();function _0x2b2b80(_0x33a750,_0x291e4d){return _0x3c636e(_0x291e4d,_0x33a750-0x5b);}function _0x46ce07(_0x1037a9,_0x6d0c7d){return _0x3c636e(_0x6d0c7d,_0x1037a9-0x3b4);}delete this[_0x46ce07(0x346,0x2b6)];}['initWorker'](){this['worker']=new Worker(this[_0x574c38(-0x1f5,-0x1fa)]['worker']);function _0x11d40b(_0x3259cf,_0x2768cf){return _0x3c636e(_0x3259cf,_0x2768cf- -0x1b7);}this[_0x574c38(-0x225,-0x22f)]['onmessage']=_0x43a646=>{this['_drawLines'](_0x43a646[_0x1f55f8(0x369,0x3ba)]['particles']);function _0x1f55f8(_0x2f26ca,_0x3fd6c1){return _0x11d40b(_0x2f26ca,_0x3fd6c1-0x580);}this['_updateIng2']=![];};function _0x574c38(_0x3b34da,_0x1a13fe){return _0x3c636e(_0x1a13fe,_0x3b34da- -0x13a);}this[_0x574c38(-0x1cb,-0x239)]={'init':_0x1aa935=>{const _0x442ca0={};_0x442ca0['type']='init',_0x442ca0['options']=_0x1aa935;function _0x31c986(_0x2776fe,_0x57455e){return _0x11d40b(_0x2776fe,_0x57455e- -0x3d);}this[_0x31c986(-0x254,-0x2df)]['postMessage'](_0x442ca0);},'setOptions':_0x5f1c6a=>{const _0x578ca3={};_0x578ca3['type']=_0x46ee43(0x2e1,0x2bb);function _0x46ee43(_0x533de1,_0x55ff23){return _0x574c38(_0x55ff23-0x469,_0x533de1);}function _0x2387f5(_0x35b778,_0x517a33){return _0x574c38(_0x517a33-0x506,_0x35b778);}_0x578ca3[_0x2387f5(0x2db,0x311)]=_0x5f1c6a,this[_0x46ee43(0x20d,0x244)]['postMessage'](_0x578ca3);},'setDate':_0x6e6a3c=>{const _0x167d73={};_0x167d73['type']='setDate',_0x167d73[_0x57d021(0x32a,0x2b9)]=_0x6e6a3c;function _0x57d021(_0x2ebbfd,_0x2feb0c){return _0x574c38(_0x2ebbfd-0x473,_0x2feb0c);}this['worker']['postMessage'](_0x167d73);},'update':()=>{if(this['_updateIng2'])return;function _0x35a135(_0x3a9171,_0x2f0a05){return _0x11d40b(_0x3a9171,_0x2f0a05-0x26b);}function _0x4a626e(_0x365584,_0x2217f9){return _0x574c38(_0x2217f9-0x3e,_0x365584);}this['_updateIng2']=!![];const _0x5ecaa7={};_0x5ecaa7[_0x4a626e(-0xc1,-0x139)]='update',this['worker'][_0x4a626e(-0x136,-0xe7)](_0x5ecaa7);},'clear':()=>{const _0x1a3dac={};function _0x4f1cd2(_0x573457,_0x2025d0){return _0x574c38(_0x2025d0-0x5f1,_0x573457);}_0x1a3dac[_0x4f1cd2(0x4ab,0x47a)]='clear',this['worker']['postMessage'](_0x1a3dac);}},this[_0x574c38(-0x1cb,-0x22a)]['init'](this[_0x11d40b(-0x200,-0x272)]);}}mars3d__namespace['LayerUtil'][_0x3c636e(0x59,-0x14)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['Log'][_0x2fca1e(-0x104,-0xde)](_0x2fca1e(-0xbb,-0xe7)),mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0x2fca1e(-0x6,-0x1d)]=WindUtil;const _0x19e23d={};_0x19e23d[_0x3c636e(-0xd0,-0x78)]=!![],Object['defineProperty'](exports,_0x2fca1e(-0x8f,-0x81),_0x19e23d);
}));
