/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.9
 * 编译日期：2025-05-05 21:46
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x5cf994,_0x216df7){const _0x9d16be=_0x5cf994();function _0x49625(_0x416c40,_0x4746ca){return _0x1034(_0x4746ca- -0x1c,_0x416c40);}function _0x2c5915(_0x116266,_0x4e63da){return _0x1034(_0x116266- -0x184,_0x4e63da);}while(!![]){try{const _0xf48207=-parseInt(_0x49625(0x297,0x21a))/0x1+-parseInt(_0x49625(0x238,0x2a4))/0x2*(-parseInt(_0x2c5915(0x111,0x92))/0x3)+-parseInt(_0x49625(0x24c,0x1cd))/0x4*(-parseInt(_0x2c5915(0xcc,0x10f))/0x5)+parseInt(_0x2c5915(0xef,0xf5))/0x6+parseInt(_0x49625(0x230,0x27e))/0x7+parseInt(_0x49625(0x1d5,0x20b))/0x8+-parseInt(_0x49625(0x245,0x2a0))/0x9;if(_0xf48207===_0x216df7)break;else _0x9d16be['push'](_0x9d16be['shift']());}catch(_0x292135){_0x9d16be['push'](_0x9d16be['shift']());}}}(_0x1c9a,0xb80cc));function _interopNamespace(_0x4457aa){if(_0x4457aa&&_0x4457aa['__esModule'])return _0x4457aa;var _0xbba6c2=Object['create'](null);_0x4457aa&&Object['keys'](_0x4457aa)['forEach'](function(_0x342565){function _0x9b0d50(_0x2c0456,_0x3cb504){return _0x1034(_0x3cb504- -0x68,_0x2c0456);}function _0x56547c(_0x10c035,_0x35959f){return _0x1034(_0x10c035-0x31c,_0x35959f);}if(_0x342565!==_0x9b0d50(0x235,0x26b)){var _0x599395=Object['getOwnPropertyDescriptor'](_0x4457aa,_0x342565);Object[_0x9b0d50(0x200,0x200)](_0xbba6c2,_0x342565,_0x599395[_0x56547c(0x59c,0x530)]?_0x599395:{'enumerable':!![],'get':function(){return _0x4457aa[_0x342565];}});}});_0xbba6c2[_0x34aeeb(0x5cf,0x5ba)]=_0x4457aa;function _0x34aeeb(_0x5ecc38,_0x3bae13){return _0x1034(_0x3bae13-0x2e7,_0x5ecc38);}return _0xbba6c2;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0x3b0072(0x580,0x53f)];function getU(_0x130792,_0x351571){const _0x3e1988=_0x130792*Math['cos'](Cesium$2[_0x2645ca(0x374,0x33b)]['toRadians'](_0x351571));function _0x2645ca(_0x4d83ba,_0xaa595c){return _0x3b0072(_0x4d83ba- -0x22b,_0xaa595c);}return _0x3e1988;}function getV(_0x3e63fb,_0x3ed7e2){const _0x5e2028=_0x3e63fb*Math['sin'](Cesium$2['Math'][_0x52db87(-0x59,-0xd5)](_0x3ed7e2));function _0x52db87(_0x16c118,_0x3e50ae){return _0x3b0072(_0x3e50ae- -0x639,_0x16c118);}return _0x5e2028;}function getSpeed(_0x5b16cb,_0x109b25){const _0xa223d4=Math['sqrt'](Math['pow'](_0x5b16cb,0x2)+Math['pow'](_0x109b25,0x2));return _0xa223d4;}function getDirection(_0x50c1ee,_0x4e2473){let _0x444017=Cesium$2[_0x1871c4(0x106,0xfc)][_0x50576e(-0x92,-0x103)](Math['atan2'](_0x4e2473,_0x50c1ee));function _0x50576e(_0x399a1f,_0x593f72){return _0x3b0072(_0x593f72- -0x5f7,_0x399a1f);}_0x444017+=_0x444017<0x0?0x168:0x0;function _0x1871c4(_0x81b73c,_0x1876a3){return _0x3b0072(_0x81b73c- -0x499,_0x1876a3);}return _0x444017;}const _0x18b8a1={};_0x18b8a1[_0x3b0072(0x553,0x528)]=null,_0x18b8a1[_0x23a763(0xd7,0x84)]=getU,_0x18b8a1['getV']=getV,_0x18b8a1[_0x3b0072(0x507,0x484)]=getSpeed,_0x18b8a1[_0x23a763(0x1d,-0x2e)]=getDirection;var WindUtil=_0x18b8a1,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x23a763(0x3a,0x1c),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a';function _0x23a763(_0x5a6d04,_0x3d42fc){return _0x1034(_0x5a6d04- -0x218,_0x3d42fc);}var renderParticlesVertexShader=_0x23a763(0x46,0x71);const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static['getCalculateSpeedShader'](){const _0x57f449={};return _0x57f449['sources']=[calculateSpeedShader],new ShaderSource$1(_0x57f449);}static['getUpdatePositionShader'](){function _0x5226cd(_0x486371,_0x3a5435){return _0x23a763(_0x3a5435-0x41c,_0x486371);}const _0x3d74d9={};return _0x3d74d9[_0x5226cd(0x476,0x4ec)]=[updatePositionShader],new ShaderSource$1(_0x3d74d9);}static['getSegmentDrawVertexShader'](){function _0x22d1d7(_0x2eedd7,_0x12e90c){return _0x3b0072(_0x2eedd7- -0x65,_0x12e90c);}const _0x162b8b={};return _0x162b8b[_0x22d1d7(0x557,0x5b1)]=[renderParticlesVertexShader],new ShaderSource$1(_0x162b8b);}static['getSegmentDrawFragmentShader'](){const _0x243dce={};return _0x243dce['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x243dce);}static['getPostProcessingPositionShader'](){const _0x58e643={};return _0x58e643['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x58e643);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x553b59){this['commandType']=_0x553b59[_0x50bb8e(0x278,0x289)],this[_0x390876(0x290,0x2c8)]=_0x553b59['geometry'],this['attributeLocations']=_0x553b59['attributeLocations'],this[_0x50bb8e(0x256,0x212)]=_0x553b59['primitiveType'],this[_0x50bb8e(0x245,0x245)]=_0x553b59['uniformMap']||{};function _0x390876(_0xf74a96,_0x379c43){return _0x23a763(_0x379c43-0x245,_0xf74a96);}this['vertexShaderSource']=_0x553b59['vertexShaderSource'],this['fragmentShaderSource']=_0x553b59[_0x50bb8e(0x20e,0x28b)],this['rawRenderState']=_0x553b59['rawRenderState'],this['framebuffer']=_0x553b59['framebuffer'],this['outputTexture']=_0x553b59[_0x50bb8e(0x29d,0x290)],this[_0x50bb8e(0x2a8,0x302)]=_0x553b59[_0x390876(0x294,0x30c)]??![];function _0x50bb8e(_0x33b2e3,_0x5f39a7){return _0x23a763(_0x33b2e3-0x1e1,_0x5f39a7);}this[_0x50bb8e(0x20a,0x1b8)]=_0x553b59['preExecute'],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this['isDynamic']=_0x553b59['isDynamic']??(()=>!![]),this[_0x390876(0x299,0x30c)]&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x390876(0x1ee,0x237)],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x128076){function _0x45d580(_0x2199cc,_0xafc66e){return _0x23a763(_0x2199cc-0xf2,_0xafc66e);}function _0x54c884(_0x55072b,_0x137e8d){return _0x23a763(_0x137e8d-0x181,_0x55072b);}if(this['commandType']==='Draw'){const _0x8dab7d={};_0x8dab7d['context']=_0x128076,_0x8dab7d[_0x45d580(0x175,0x1fc)]=this['geometry'],_0x8dab7d['attributeLocations']=this[_0x45d580(0x125,0x165)],_0x8dab7d['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x41c88e=VertexArray$1['fromGeometry'](_0x8dab7d),_0x1491db={};_0x1491db['context']=_0x128076,_0x1491db['vertexShaderSource']=this['vertexShaderSource'],_0x1491db['fragmentShaderSource']=this['fragmentShaderSource'],_0x1491db[_0x45d580(0x125,0x111)]=this[_0x45d580(0x125,0xaf)];const _0x31bbe5=ShaderProgram[_0x54c884(0x114,0x155)](_0x1491db),_0x4f70ad=RenderState[_0x45d580(0xc6,0xaa)](this['rawRenderState']),_0x30757f={};return _0x30757f[_0x45d580(0xe9,0xe0)]=this,_0x30757f['vertexArray']=_0x41c88e,_0x30757f['primitiveType']=this['primitiveType'],_0x30757f[_0x54c884(0x1c9,0x15f)]=Matrix4['IDENTITY'],_0x30757f['renderState']=_0x4f70ad,_0x30757f[_0x45d580(0x1c0,0x22c)]=_0x31bbe5,_0x30757f[_0x45d580(0xe4,0x95)]=this[_0x54c884(0x149,0x173)],_0x30757f['uniformMap']=this['uniformMap'],_0x30757f['pass']=Pass$1['OPAQUE'],new DrawCommand(_0x30757f);}else{if(this['commandType']==='Compute'){const _0x1d0721={};return _0x1d0721[_0x54c884(0x191,0x178)]=this,_0x1d0721['fragmentShaderSource']=this['fragmentShaderSource'],_0x1d0721[_0x45d580(0x156,0x1aa)]=this['uniformMap'],_0x1d0721['outputTexture']=this[_0x54c884(0x29a,0x23d)],_0x1d0721['persists']=!![],new ComputeCommand(_0x1d0721);}else throw new Error('Unknown\x20command\x20type');}}[_0x23a763(0xc4,0xe1)](_0x542b05,_0x21759b){this['geometry']=_0x21759b;function _0x394b82(_0x56852c,_0x1612d1){return _0x3b0072(_0x56852c- -0x623,_0x1612d1);}function _0x174db7(_0x8b364f,_0x2eaee5){return _0x23a763(_0x2eaee5-0x4c0,_0x8b364f);}defined(this[_0x174db7(0x5cb,0x558)])&&(this['commandToExecute'][_0x174db7(0x4a1,0x4ee)]=VertexArray$1['fromGeometry']({'context':_0x542b05,'geometry':this[_0x174db7(0x5b8,0x543)],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1[_0x394b82(-0x6d,-0x63)]}));}[_0x3b0072(0x4f7,0x4b4)](_0x304cde){if(!this[_0x136320(0x27b,0x2e7)]())return;if(!this['show']||!defined(_0x304cde))return;!defined(this[_0xe8949c(0x184,0x1b2)])&&(this[_0x136320(0x3c3,0x353)]=this['createCommand'](_0x304cde['context']));defined(this['preExecute'])&&this[_0x136320(0x310,0x2e4)]();if(!_0x304cde[_0x136320(0x392,0x310)]){console['warn'](_0xe8949c(0xd1,0x117));return;}function _0xe8949c(_0x2f2467,_0x17136f){return _0x3b0072(_0x17136f- -0x3d2,_0x2f2467);}function _0x136320(_0x465750,_0x12969d){return _0x23a763(_0x12969d-0x2bb,_0x465750);}defined(this['clearCommand'])&&_0x304cde['commandList']['push'](this[_0xe8949c(0x18c,0x18d)]),defined(this[_0xe8949c(0x1eb,0x1b2)])&&_0x304cde['commandList']['push'](this[_0x136320(0x2ed,0x353)]);}[_0x23a763(0x1c,0x9a)](){return![];}[_0x3b0072(0x582,0x51d)](){function _0x2244e5(_0x3f4e3b,_0x3b9832){return _0x23a763(_0x3b9832-0x177,_0x3f4e3b);}function _0x4de4f2(_0xa9e7d,_0x3135f5){return _0x23a763(_0xa9e7d- -0x1b3,_0x3135f5);}if(defined(this['commandToExecute'])){var _0xcb6865;(_0xcb6865=this['commandToExecute'][_0x4de4f2(-0xe5,-0x6b)])===null||_0xcb6865===void 0x0||_0xcb6865[_0x4de4f2(-0x11d,-0x131)](),this['commandToExecute']['shaderProgram']=undefined;}return destroyObject(this);}}function deepMerge(_0x39e1e2,_0xb0d2bd){if(!_0x39e1e2)return _0xb0d2bd;if(!_0xb0d2bd)return _0x39e1e2;const _0x1e8f6c={..._0xb0d2bd},_0x51dd62=_0x1e8f6c;for(const _0x11b9dc in _0x39e1e2){if(Object['prototype']['hasOwnProperty']['call'](_0x39e1e2,_0x11b9dc)){const _0x1a132f=_0x39e1e2[_0x11b9dc],_0x1cc6ba=_0xb0d2bd[_0x11b9dc];if(Array['isArray'](_0x1a132f)){_0x51dd62[_0x11b9dc]=_0x1a132f[_0x535a2f(0xab,0x87)]();continue;}if(_0x1a132f&&typeof _0x1a132f==='object'){_0x51dd62[_0x11b9dc]=deepMerge(_0x1a132f,_0x1cc6ba||{});continue;}_0x1a132f!==undefined&&(_0x51dd62[_0x11b9dc]=_0x1a132f);}}function _0x535a2f(_0x33045a,_0xfa648e){return _0x3b0072(_0xfa648e- -0x461,_0x33045a);}return _0x51dd62;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x5118c0,_0x587369,_0x2ff79f,_0x2f2712,_0x58bf9d){function _0x1d6a91(_0x395cc7,_0x46c6b2){return _0x3b0072(_0x395cc7- -0x16b,_0x46c6b2);}this['context']=_0x5118c0,this['options']=_0x2ff79f,this['viewerParameters']=_0x2f2712;function _0x2f8f8f(_0x457a1f,_0x4aacc3){return _0x3b0072(_0x4aacc3- -0x4df,_0x457a1f);}this['windData']=_0x587369,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0x34530a={};_0x34530a['scene']=_0x58bf9d,_0x34530a[_0x2f8f8f(0x9,0x49)]=0x1,_0x34530a['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x34530a),this[_0x1d6a91(0x361,0x396)](),this[_0x2f8f8f(0x51,0x3c)](),this['createParticlesTextures'](),this['createComputingPrimitives']();}['initFrameRate'](){const _0x361c60=()=>{function _0x14d609(_0x277caa,_0x4b3405){return _0x1034(_0x4b3405-0xfa,_0x277caa);}function _0x58f58b(_0x4f6fb6,_0x1632d5){return _0x1034(_0x4f6fb6-0x1a9,_0x1632d5);}this['frameRateMonitor']['lastFramesPerSecond']>0x14&&(this['frameRate']=this[_0x14d609(0x355,0x2ff)]['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math[_0x14d609(0x392,0x3ea)](this[_0x58f58b(0x3d4,0x453)],0x1));};_0x361c60();const _0x21d7c9=setInterval(_0x361c60,0x3e8);function _0x34e972(_0x11a469,_0x5b471c){return _0x3b0072(_0x11a469- -0x26d,_0x5b471c);}const _0x200593=this['destroy'][_0x34e972(0x340,0x33d)](this);this['destroy']=()=>{clearInterval(_0x21d7c9),_0x200593();};}[_0x23a763(0x2f,0x92)](){const _0x2c9d5d={};function _0x29b4ab(_0x224a12,_0x5e7960){return _0x3b0072(_0x224a12- -0x4bd,_0x5e7960);}function _0xc469c1(_0x12b466,_0x425f09){return _0x3b0072(_0x12b466- -0x1b7,_0x425f09);}_0x2c9d5d['minificationFilter']=TextureMinificationFilter$1['LINEAR'],_0x2c9d5d[_0xc469c1(0x3b1,0x3a7)]=TextureMagnificationFilter$1[_0x29b4ab(0x8c,0xa4)];const _0x3af6f5={'context':this['context'],'width':this['windData']['width'],'height':this[_0xc469c1(0x40b,0x3f9)][_0x29b4ab(0x15,-0x5a)],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this['options']['flipY']??![],'sampler':new Sampler$1(_0x2c9d5d)};this['windTextures']={'U':new Texture$1({..._0x3af6f5,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x3af6f5,'source':{'arrayBufferView':new Float32Array(this[_0x29b4ab(0x105,0xc2)]['v']['array'])}})};}[_0x3b0072(0x517,0x4c3)](){const _0x2d3d97={};function _0x433392(_0x51ff3f,_0x512fa1){return _0x23a763(_0x512fa1- -0xcf,_0x51ff3f);}_0x2d3d97[_0x433392(-0xa5,-0x63)]=TextureMinificationFilter$1['NEAREST'],_0x2d3d97[_0x433392(-0x8d,-0x53)]=TextureMagnificationFilter$1['NEAREST'];const _0x245005={'context':this['context'],'width':this['options']['particlesTextureSize'],'height':this[_0x26d884(0x49e,0x4a5)]['particlesTextureSize'],'pixelFormat':PixelFormat$1[_0x26d884(0x4eb,0x50a)],'pixelDatatype':PixelDatatype$1[_0x26d884(0x44e,0x42b)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this[_0x433392(-0xfb,-0x90)]['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x2d3d97)};function _0x26d884(_0x171fbb,_0x6e8f77){return _0x3b0072(_0x171fbb- -0x8d,_0x6e8f77);}this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x245005),'currentParticlesPosition':new Texture$1(_0x245005),'nextParticlesPosition':new Texture$1(_0x245005),'postProcessingPosition':new Texture$1(_0x245005),'particlesSpeed':new Texture$1(_0x245005)};}['destroyParticlesTextures'](){function _0x42913a(_0xb9f954,_0x51fc74){return _0x3b0072(_0x51fc74- -0x2d,_0xb9f954);}function _0x14b42c(_0x537dd2,_0x53654f){return _0x23a763(_0x53654f-0x333,_0x537dd2);}Object['values'](this['particlesTextures'])[_0x14b42c(0x3ea,0x3be)](_0x5ad8c7=>_0x5ad8c7[_0x42913a(0x5c4,0x555)]());}[_0x23a763(0x5a,0x8)](){function _0x2ba9b3(_0x338b0b,_0x100521){return _0x23a763(_0x338b0b-0x3d7,_0x100521);}function _0x30d786(_0x3556b3,_0x4a37a5){return _0x3b0072(_0x4a37a5- -0x511,_0x3556b3);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x2ba9b3(0x3d9,0x451),'uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this[_0x30d786(-0x3b,0x25)]['V'],'uRange':()=>new Cartesian2$1(this[_0x2ba9b3(0x4ad,0x4d4)]['u']['min'],this['windData']['u'][_0x30d786(0x10a,0xb3)]),'vRange':()=>new Cartesian2$1(this['windData']['v']['min'],this[_0x2ba9b3(0x4ad,0x4d0)]['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData']['speed']['min'],this['windData'][_0x30d786(-0x7f,-0xb)]['max']),'currentParticlesPosition':()=>this[_0x30d786(-0xad,-0x42)][_0x2ba9b3(0x457,0x4a3)],'speedScaleFactor':()=>{function _0x4557af(_0x4d7613,_0x812906){return _0x30d786(_0x4d7613,_0x812906- -0x1a7);}function _0xb4984c(_0x5e71a2,_0x571b13){return _0x2ba9b3(_0x5e71a2- -0x45a,_0x571b13);}return(this['viewerParameters'][_0xb4984c(0x49,0x6d)]+0x32)*this['options'][_0x4557af(-0x21a,-0x1d4)];},'frameRateAdjustment':()=>this[_0x30d786(0x64,0x4c)],'dimension':()=>new Cartesian2$1(this['windData']['width'],this[_0x2ba9b3(0x4ad,0x50d)]['height']),'minimum':()=>new Cartesian2$1(this['windData'][_0x2ba9b3(0x439,0x424)][_0x30d786(0x5c,0xb6)],this[_0x2ba9b3(0x4ad,0x476)]['bounds']['south']),'maximum':()=>new Cartesian2$1(this[_0x2ba9b3(0x4ad,0x527)]['bounds'][_0x2ba9b3(0x45d,0x3e4)],this['windData'][_0x2ba9b3(0x439,0x3c0)][_0x2ba9b3(0x3af,0x355)])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this[_0x30d786(0x2f,-0x42)]['particlesSpeed'],'preExecute':()=>{const _0x192c11=this[_0x1d76a0(0x1a8,0x159)][_0x1d76a0(0x233,0x283)];this[_0x4c1b3d(0x2a2,0x325)]['previousParticlesPosition']=this['particlesTextures']['currentParticlesPosition'];function _0x1d76a0(_0x14bc1c,_0x134fe0){return _0x2ba9b3(_0x14bc1c- -0x212,_0x134fe0);}this[_0x1d76a0(0x1a8,0x12d)][_0x1d76a0(0x245,0x26c)]=this['particlesTextures']['postProcessingPosition'],this[_0x1d76a0(0x1a8,0x220)]['postProcessingPosition']=_0x192c11;function _0x4c1b3d(_0x497089,_0x262fda){return _0x30d786(_0x262fda,_0x497089-0x2e4);}this[_0x1d76a0(0x1d2,0x222)][_0x4c1b3d(0x2a6,0x253)][_0x4c1b3d(0x357,0x38b)]&&(this[_0x4c1b3d(0x2cc,0x2f0)]['calculateSpeed'][_0x1d76a0(0x25d,0x20b)]['outputTexture']=this[_0x4c1b3d(0x2a2,0x2f6)][_0x1d76a0(0x296,0x280)]);},'isDynamic':()=>this[_0x30d786(-0x24,0x1a)]['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x2ba9b3(0x457,0x4b6)],'particlesSpeed':()=>this[_0x2ba9b3(0x3ba,0x390)]['particlesSpeed']},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this[_0x2ba9b3(0x3ba,0x3cb)][_0x2ba9b3(0x464,0x435)],'preExecute':()=>{function _0x3076fa(_0x27e7a9,_0x55114d){return _0x2ba9b3(_0x55114d- -0x1dd,_0x27e7a9);}function _0x352392(_0x3113fe,_0x4d07b9){return _0x30d786(_0x3113fe,_0x4d07b9-0x357);}this['primitives']['updatePosition'][_0x3076fa(0x2c5,0x292)]&&(this['primitives'][_0x3076fa(0x31e,0x29b)]['commandToExecute']['outputTexture']=this['particlesTextures'][_0x3076fa(0x2e2,0x287)]);},'isDynamic':()=>this[_0x30d786(-0x51,0x1a)][_0x2ba9b3(0x3fc,0x400)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this[_0x2ba9b3(0x3ba,0x369)][_0x2ba9b3(0x4a8,0x4a5)],'lonRange':()=>this['viewerParameters'][_0x2ba9b3(0x469,0x460)],'latRange':()=>this['viewerParameters'][_0x2ba9b3(0x446,0x486)],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds']['west'],this[_0x30d786(0xe6,0xb1)]['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x30d786(0x104,0xb1)]['bounds']['south'],this['windData']['bounds']['north']),'randomCoefficient':function(){function _0x4f326e(_0x304d8a,_0x4a3108){return _0x30d786(_0x304d8a,_0x4a3108-0x3f3);}return Math[_0x4f326e(0x41f,0x475)]();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options'][_0x2ba9b3(0x3c2,0x411)],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures'][_0x2ba9b3(0x3a7,0x327)],'preExecute':()=>{function _0x93fb06(_0x435978,_0x219e82){return _0x2ba9b3(_0x219e82- -0x336,_0x435978);}function _0x407c27(_0x3fd1be,_0x2acca4){return _0x30d786(_0x2acca4,_0x3fd1be-0x126);}this['primitives']['postProcessingPosition']['commandToExecute']&&(this['primitives'][_0x407c27(0xd1,0x119)]['commandToExecute']['outputTexture']=this[_0x93fb06(0x3f,0x84)][_0x407c27(0xd1,0x12d)]);},'isDynamic':()=>this['options']['dynamic']})};}[_0x3b0072(0x58f,0x53b)](){this[_0x266cca(0x3dd,0x400)]['U']['destroy']();function _0x266cca(_0x1a4a8f,_0x167119){return _0x23a763(_0x167119-0x3b6,_0x1a4a8f);}this['windTextures']['V']['destroy'](),this['createWindTextures']();}[_0x23a763(-0x1f,-0x82)](_0x45e319){function _0x1e537a(_0x2995cd,_0x2a0ad9){return _0x23a763(_0x2a0ad9-0x368,_0x2995cd);}this['windData']=_0x45e319,this[_0x1e537a(0x43a,0x40b)]();}['updateOptions'](_0x75fbc7){const _0x48dbf1=_0x75fbc7['flipY']!==undefined&&_0x75fbc7['flipY']!==this['options']['flipY'];function _0x55811a(_0x2e9ece,_0x50dae3){return _0x23a763(_0x50dae3- -0x175,_0x2e9ece);}this['options']=deepMerge(_0x75fbc7,this['options']),_0x48dbf1&&this[_0x55811a(-0xec,-0xd2)]();}[_0x3b0072(0x555,0x53e)](_0x34815b){function _0x5107a0(_0x4a6e91,_0x10690f){return _0x23a763(_0x4a6e91-0x280,_0x10690f);}const {array:_0x3d0d28}=_0x34815b;function _0x5a59d9(_0x3909f3,_0x5b1274){return _0x3b0072(_0x3909f3- -0x364,_0x5b1274);}let {min:_0x7b837c,max:_0x210feb}=_0x34815b;const _0x379359=new Float32Array(_0x3d0d28[_0x5a59d9(0x238,0x27a)]);_0x7b837c===undefined&&(console['warn'](_0x5107a0(0x335,0x364)),_0x7b837c=Math[_0x5a59d9(0x1d6,0x16e)](..._0x3d0d28));_0x210feb===undefined&&(console[_0x5a59d9(0x25a,0x23f)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x210feb=Math['max'](..._0x3d0d28));const _0x4308d5=Math['max'](Math[_0x5107a0(0x2e1,0x284)](_0x7b837c),Math[_0x5a59d9(0x1e9,0x242)](_0x210feb));for(let _0xe6df6f=0x0;_0xe6df6f<_0x3d0d28[_0x5107a0(0x330,0x2ea)];_0xe6df6f++){const _0x25f3b8=_0x3d0d28[_0xe6df6f]/_0x4308d5;_0x379359[_0xe6df6f]=_0x25f3b8;}return _0x379359;}[_0x3b0072(0x582,0x554)](){Object['values'](this[_0x32efc1(0x258,0x288)])['forEach'](_0x3e3cca=>_0x3e3cca[_0x1e57c8(0x408,0x434)]());function _0x32efc1(_0x51b52b,_0x37b6ab){return _0x23a763(_0x51b52b-0x20e,_0x37b6ab);}Object['values'](this['particlesTextures'])['forEach'](_0xbd3a9b=>_0xbd3a9b['destroy']()),Object[_0x1e57c8(0x3d1,0x365)](this['primitives'])['forEach'](_0x55d051=>_0x55d051['destroy']());function _0x1e57c8(_0x2c7a18,_0x3fb052){return _0x23a763(_0x2c7a18-0x372,_0x3fb052);}this['frameRateMonitor'][_0x32efc1(0x2a4,0x2c8)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x104bf0,_0x202559,_0xade50e,_0x81bc3){this[_0x53729e(0x353,0x3a0)]=_0x104bf0,this['options']=_0x202559,this['viewerParameters']=_0xade50e,this['computing']=_0x81bc3;function _0x53729e(_0x30f2be,_0x2f0bd8){return _0x3b0072(_0x2f0bd8- -0x215,_0x30f2be);}(typeof this[_0x53729e(0x352,0x316)]['particlesTextureSize']!==_0x53729e(0x2e8,0x2c7)||this['options']['particlesTextureSize']<=0x0)&&(console[_0x2d9a9e(0x355,0x386)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this[_0x2d9a9e(0x363,0x3ca)]['particlesTextureSize']=0x100);this['colorTable']=this[_0x2d9a9e(0x40d,0x449)](),this[_0x53729e(0x3d9,0x373)]=this['createRenderingTextures']();function _0x2d9a9e(_0x54329c,_0x2fd263){return _0x3b0072(_0x2fd263- -0x161,_0x54329c);}this['framebuffers']=this['createRenderingFramebuffers'](),this[_0x53729e(0x2ee,0x2e4)]=this['createPrimitives']();}['createRenderingTextures'](){const _0x508bee={};_0x508bee['context']=this[_0x286fe0(0x34f,0x354)],_0x508bee[_0x15062b(-0x125,-0x10b)]=this[_0x15062b(-0x9d,-0x95)]['drawingBufferWidth'],_0x508bee[_0x15062b(-0x180,-0x16e)]=this[_0x15062b(-0x9d,-0x90)][_0x15062b(-0x132,-0xb5)],_0x508bee['pixelFormat']=PixelFormat[_0x286fe0(0x312,0x292)];function _0x286fe0(_0x20f1d3,_0x25665c){return _0x23a763(_0x20f1d3-0x286,_0x25665c);}function _0x15062b(_0x10292,_0x2c8d79){return _0x23a763(_0x10292- -0x166,_0x2c8d79);}_0x508bee['pixelDatatype']=PixelDatatype['UNSIGNED_BYTE'];const _0x50ebc6=_0x508bee,_0x2554c3={};_0x2554c3['context']=this[_0x15062b(-0x9d,-0x104)],_0x2554c3[_0x286fe0(0x2c7,0x305)]=this['context'][_0x286fe0(0x2a6,0x2a4)],_0x2554c3['height']=this[_0x15062b(-0x9d,-0x11d)]['drawingBufferHeight'],_0x2554c3['pixelFormat']=PixelFormat['DEPTH_COMPONENT'],_0x2554c3[_0x15062b(-0x163,-0x167)]=PixelDatatype['UNSIGNED_INT'];const _0xb5b9a6=_0x2554c3;return{'segmentsColor':new Texture(_0x50ebc6),'segmentsDepth':new Texture(_0xb5b9a6)};}['createRenderingFramebuffers'](){function _0x4b2eb1(_0x3c3f21,_0x3b7233){return _0x3b0072(_0x3b7233-0x68,_0x3c3f21);}function _0x4a25a6(_0x327474,_0x4e21cb){return _0x23a763(_0x4e21cb-0x16d,_0x327474);}const _0x5e86f2={};return _0x5e86f2[_0x4b2eb1(0x69e,0x61d)]=this[_0x4b2eb1(0x69f,0x61d)],_0x5e86f2['colorTextures']=[this[_0x4a25a6(0x26d,0x209)]['segmentsColor']],_0x5e86f2['depthTexture']=this['textures'][_0x4b2eb1(0x59b,0x5e2)],{'segments':new Framebuffer(_0x5e86f2)};}[_0x3b0072(0x4fa,0x565)](){function _0x3ac600(_0xf160b9,_0x46e9f4){return _0x23a763(_0x46e9f4- -0x147,_0xf160b9);}Object[_0x3ac600(-0x14e,-0xe8)](this['framebuffers'])['forEach'](_0x3b8c0f=>{function _0x1368d4(_0x19e308,_0x470d1f){return _0x3ac600(_0x19e308,_0x470d1f-0x3fd);}_0x3b8c0f[_0x1368d4(0x3a9,0x34c)]();});}[_0x23a763(0xbe,0x80)](){function _0x253ad1(_0x386308,_0x113e13){return _0x3b0072(_0x386308- -0x291,_0x113e13);}const _0x3bd989=new Float32Array(this['options'][_0x253ad1(0x25a,0x208)]['flatMap'](_0x8c53d=>{const _0x5091db=Color$1['fromCssColorString'](_0x8c53d);function _0x1a1a48(_0x4a5223,_0x345b0e){return _0x253ad1(_0x345b0e-0xb,_0x4a5223);}function _0x52206a(_0x87214a,_0x5175ee){return _0x253ad1(_0x87214a-0x140,_0x5175ee);}return[_0x5091db[_0x1a1a48(0x288,0x25b)],_0x5091db[_0x1a1a48(0x364,0x331)],_0x5091db['blue'],_0x5091db[_0x1a1a48(0x1f0,0x25f)]];})),_0x16031d={};_0x16031d['minificationFilter']=TextureMinificationFilter[_0x253ad1(0x2b8,0x299)],_0x16031d['magnificationFilter']=TextureMagnificationFilter['LINEAR'],_0x16031d['wrapS']=TextureWrap['CLAMP_TO_EDGE'];function _0x57af74(_0x4e3dd8,_0x5ed1bb){return _0x23a763(_0x5ed1bb-0xb9,_0x4e3dd8);}return _0x16031d[_0x253ad1(0x24f,0x2d0)]=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this[_0x57af74(0x1c6,0x182)],'width':this['options']['colors'][_0x57af74(0x194,0x169)],'height':0x1,'pixelFormat':PixelFormat[_0x253ad1(0x2e7,0x2c7)],'pixelDatatype':PixelDatatype[_0x253ad1(0x24a,0x297)],'sampler':new Sampler(_0x16031d),'source':{'width':this[_0x253ad1(0x29a,0x293)][_0x57af74(0x89,0xb8)]['length'],'height':0x1,'arrayBufferView':_0x3bd989}});}['createSegmentsGeometry'](){const _0x58fb02=0x4,_0x12a8bd=this[_0x522c13(0x249,0x232)][_0x519732(-0x41,-0x59)];let _0x4edc00=[];for(let _0x59c490=0x0;_0x59c490<_0x12a8bd;_0x59c490++){for(let _0x222eb2=0x0;_0x222eb2<_0x12a8bd;_0x222eb2++){for(let _0x41d761=0x0;_0x41d761<_0x58fb02;_0x41d761++){_0x4edc00[_0x519732(-0x187,-0x127)](_0x59c490/_0x12a8bd),_0x4edc00['push'](_0x222eb2/_0x12a8bd);}}}_0x4edc00=new Float32Array(_0x4edc00);const _0x3bf95c=this['options'][_0x519732(-0x19,-0x59)]**0x2;let _0x58bc8c=[];for(let _0x42a76b=0x0;_0x42a76b<_0x3bf95c;_0x42a76b++){_0x58bc8c['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x58bc8c=new Float32Array(_0x58bc8c);let _0xf526=[];for(let _0x37331f=0x0,_0x35224b=0x0;_0x37331f<_0x3bf95c;_0x37331f++){_0xf526['push'](_0x35224b+0x0,_0x35224b+0x1,_0x35224b+0x2,_0x35224b+0x2,_0x35224b+0x1,_0x35224b+0x3),_0x35224b+=_0x58fb02;}_0xf526=new Uint32Array(_0xf526);const _0x59b5bc={};_0x59b5bc['componentDatatype']=ComponentDatatype[_0x522c13(0x1f7,0x1e2)],_0x59b5bc['componentsPerAttribute']=0x2,_0x59b5bc['values']=_0x4edc00;const _0x5124ea={};_0x5124ea[_0x522c13(0x1b9,0x1e6)]=ComponentDatatype['FLOAT'];function _0x522c13(_0x37a7b2,_0x2c41e4){return _0x23a763(_0x2c41e4-0x1f3,_0x37a7b2);}function _0x519732(_0x17455c,_0xdfb824){return _0x23a763(_0xdfb824- -0xf3,_0x17455c);}_0x5124ea['componentsPerAttribute']=0x3,_0x5124ea[_0x519732(-0x39,-0x94)]=_0x58bc8c;const _0x1d0f63=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x59b5bc),'normal':new GeometryAttribute(_0x5124ea)}),'indices':_0xf526});return _0x1d0f63;}[_0x3b0072(0x565,0x51e)](_0x339af5){const _0x2eb5b2={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x339af5};return Appearance['getDefaultRenderState'](!![],![],_0x2eb5b2);}['createPrimitives'](){const _0x1ce9ce={};_0x1ce9ce['st']=0x0,_0x1ce9ce[_0x45d1bf(0x4df,0x543)]=0x1;const _0x498bb1={};function _0x45d1bf(_0x21f1f6,_0x5ac1bc){return _0x3b0072(_0x5ac1bc- -0x68,_0x21f1f6);}_0x498bb1['enabled']=!![];function _0x4faceb(_0x2c16de,_0x119542){return _0x3b0072(_0x119542- -0xfb,_0x2c16de);}const _0x3f26f6={};_0x3f26f6['enabled']=!![],_0x3f26f6[_0x4faceb(0x53a,0x4c4)]=WebGLRenderingContext['FUNC_ADD'],_0x3f26f6[_0x45d1bf(0x4ef,0x4b4)]=WebGLRenderingContext['SRC_ALPHA'],_0x3f26f6[_0x4faceb(0x3ea,0x410)]=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x2558ea={};_0x2558ea['viewport']=undefined,_0x2558ea['depthTest']=_0x498bb1,_0x2558ea['depthMask']=!![],_0x2558ea[_0x45d1bf(0x54a,0x55e)]=_0x3f26f6;const _0x19e255=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x1ce9ce,'geometry':this[_0x45d1bf(0x55e,0x4e4)](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0x45d1bf(0x4b2,0x4f6)]['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this[_0x45d1bf(0x4fa,0x4f6)][_0x4faceb(0x421,0x3d4)]['postProcessingPosition'],'particlesSpeed':()=>this['computing'][_0x45d1bf(0x3f3,0x467)]['particlesSpeed'],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this[_0x45d1bf(0x442,0x4b6)],'domain':()=>{function _0x3dbb3e(_0x5be4a0,_0x31af1c){return _0x45d1bf(_0x31af1c,_0x5be4a0-0x117);}var _0x5281ab,_0x570eb8;const _0x50bf53=new Cartesian2(((_0x5281ab=this[_0x1aced6(0x572,0x55e)]['domain'])===null||_0x5281ab===void 0x0?void 0x0:_0x5281ab['min'])??this['computing']['windData']['speed']['min'],((_0x570eb8=this['options']['domain'])===null||_0x570eb8===void 0x0?void 0x0:_0x570eb8[_0x3dbb3e(0x673,0x620)])??this['computing']['windData']['speed']['max']);function _0x1aced6(_0x3ef41c,_0x39034d){return _0x45d1bf(_0x3ef41c,_0x39034d-0x9b);}return _0x50bf53;},'displayRange':()=>{var _0x361101,_0x3c109e;function _0x128467(_0x5284fe,_0x5e564b){return _0x4faceb(_0x5e564b,_0x5284fe-0x209);}const _0x52bfdf=new Cartesian2(((_0x361101=this['options']['displayRange'])===null||_0x361101===void 0x0?void 0x0:_0x361101['min'])??this['computing']['windData']['speed'][_0x1b923e(-0x4a,-0x40)],((_0x3c109e=this['options'][_0x128467(0x5d6,0x5f8)])===null||_0x3c109e===void 0x0?void 0x0:_0x3c109e[_0x1b923e(0x66,0x4a)])??this['computing'][_0x1b923e(0x78,0x48)]['speed']['max']);function _0x1b923e(_0x496ecb,_0x4681ad){return _0x45d1bf(_0x496ecb,_0x4681ad- -0x512);}return _0x52bfdf;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this[_0x4faceb(0x532,0x4ba)]['drawingBufferWidth']/this[_0x4faceb(0x4f3,0x4ba)]['drawingBufferHeight'],'pixelSize':()=>this[_0x45d1bf(0x4c8,0x529)][_0x45d1bf(0x54b,0x550)],'lineWidth':()=>{function _0x464faf(_0x39a313,_0x252e8a){return _0x4faceb(_0x252e8a,_0x39a313-0x131);}const _0x382001={};_0x382001[_0x464faf(0x570,0x503)]=0x1,_0x382001[_0x5d8c81(0x303,0x27e)]=0x2;function _0x5d8c81(_0x417abf,_0x10b990){return _0x45d1bf(_0x417abf,_0x10b990- -0x2de);}const _0x227322=this['options']['lineWidth']||_0x382001;return new Cartesian2(_0x227322['min'],_0x227322['max']);},'lineLength':()=>{const _0x515cb5={};_0x515cb5['min']=0x14,_0x515cb5['max']=0x64;const _0x10782d=this['options']['lineLength']||_0x515cb5;return new Cartesian2(_0x10782d['min'],_0x10782d['max']);},'is3D':()=>this[_0x45d1bf(0x4f9,0x529)]['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this[_0x4faceb(0x4aa,0x48d)][_0x4faceb(0x48f,0x47f)]},'vertexShaderSource':ShaderManager[_0x4faceb(0x43a,0x42c)](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x2558ea)}),_0xdf9a09={};return _0xdf9a09['segments']=_0x19e255,_0xdf9a09;}['onParticlesTextureSizeChange'](){const _0x3045f6=this[_0x3aa99c(0x4dc,0x47f)]();this['primitives']['segments'][_0x4f3420(0x262,0x24c)]=_0x3045f6;const _0x102a7a={};_0x102a7a[_0x4f3420(0x2a8,0x23f)]=this['context'];function _0x4f3420(_0x585216,_0x338f3e){return _0x3b0072(_0x585216- -0x30d,_0x338f3e);}_0x102a7a['geometry']=_0x3045f6,_0x102a7a['attributeLocations']=this['primitives'][_0x4f3420(0x29c,0x257)][_0x4f3420(0x212,0x28b)],_0x102a7a[_0x4f3420(0x1c7,0x1aa)]=BufferUsage['STATIC_DRAW'];function _0x3aa99c(_0x39e6c1,_0x29877d){return _0x3b0072(_0x29877d- -0xcd,_0x39e6c1);}const _0x15ac5e=VertexArray['fromGeometry'](_0x102a7a);this[_0x4f3420(0x1ec,0x1d1)]['segments']['commandToExecute']&&(this['primitives'][_0x3aa99c(0x466,0x4dc)]['commandToExecute'][_0x3aa99c(0x4ad,0x44d)]=_0x15ac5e);}['onColorTableChange'](){function _0x3af267(_0x352dbb,_0x485ffa){return _0x3b0072(_0x352dbb-0xa2,_0x485ffa);}this[_0x3af267(0x5c0,0x5ff)]['destroy']();function _0x32441d(_0xbf09d4,_0x3ac2a2){return _0x23a763(_0xbf09d4-0x4bd,_0x3ac2a2);}this[_0x3af267(0x5c0,0x5a7)]=this[_0x32441d(0x57b,0x5ad)]();}[_0x23a763(0x8a,0x7a)](_0x32eb58){const _0x2a8e12=_0x32eb58['colors']&&JSON['stringify'](_0x32eb58[_0x1541ee(0x5ed,0x66f)])!==JSON[_0x1541ee(0x6bd,0x73d)](this[_0x1d8e21(-0x13,-0x3e)]['colors']);function _0x1541ee(_0x522a1c,_0x113433){return _0x3b0072(_0x522a1c-0x102,_0x113433);}this['options']=deepMerge(_0x32eb58,this['options']);function _0x1d8e21(_0xc9f63,_0x4c28bb){return _0x23a763(_0x4c28bb- -0x7d,_0xc9f63);}_0x2a8e12&&this[_0x1d8e21(-0x8f,-0x9)]();}['destroy'](){Object['values'](this['framebuffers'])['forEach'](_0x2f59dc=>{_0x2f59dc['destroy']();}),Object['values'](this[_0x2cb929(0x79,0x64)])[_0x3e5674(0x263,0x256)](_0x382954=>{function _0x4bd406(_0x81635e,_0x58586e){return _0x2cb929(_0x58586e-0x173,_0x81635e);}_0x382954[_0x4bd406(0x2f3,0x275)]();});function _0x2cb929(_0x33a8f6,_0x3630ac){return _0x3b0072(_0x33a8f6- -0x480,_0x3630ac);}function _0x3e5674(_0x3265bd,_0x3b1c52){return _0x23a763(_0x3265bd-0x1d8,_0x3b1c52);}this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x23a763(0x94,0x2c)];class WindParticleSystem{constructor(_0x2de6e4,_0x4375cd,_0x395647,_0xb126cc,_0xa39afc){this[_0x49fa62(-0xde,-0x9c)]=_0x2de6e4,this['options']=_0x395647,this[_0x49fa62(-0x102,-0x188)]=_0xb126cc,this[_0x25e420(0x24c,0x2af)]=new WindParticlesComputing(_0x2de6e4,_0x4375cd,_0x395647,_0xb126cc,_0xa39afc);function _0x25e420(_0x441b79,_0x5c85a8){return _0x3b0072(_0x441b79- -0x312,_0x5c85a8);}this[_0x25e420(0x1cb,0x1ae)]=new WindParticlesRendering(_0x2de6e4,_0x395647,_0xb126cc,this[_0x25e420(0x24c,0x208)]);function _0x49fa62(_0x300bbc,_0x1a6d34){return _0x3b0072(_0x300bbc- -0x693,_0x1a6d34);}this['clearFramebuffers']();}[_0x3b0072(0x54f,0x514)](){function _0x2e1456(_0x29c3c7,_0x3dec8a){return _0x23a763(_0x29c3c7-0x3e0,_0x3dec8a);}function _0x127c87(_0x428d23,_0x3b178c){return _0x23a763(_0x3b178c- -0x22,_0x428d23);}const _0x1f4e4b=[this['computing'][_0x2e1456(0x3ed,0x443)]['calculateSpeed'],this['computing'][_0x127c87(0x5,-0x15)][_0x2e1456(0x481,0x49f)],this['computing'][_0x127c87(0x63,-0x15)]['postProcessingPosition'],this['rendering']['primitives'][_0x2e1456(0x49d,0x4c1)]];return _0x1f4e4b;}['clearFramebuffers'](){const _0x2211f6=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});function _0x37f8d9(_0x33ce2d,_0xd69c70){return _0x23a763(_0x33ce2d-0x8b,_0xd69c70);}Object['keys'](this['rendering'][_0x37f8d9(0xdd,0x106)])['forEach'](_0x142344=>{function _0x29cc54(_0x42d32c,_0x594188){return _0x37f8d9(_0x42d32c-0x222,_0x594188);}function _0xccaf09(_0x5bc1ac,_0x311ea7){return _0x37f8d9(_0x5bc1ac-0x194,_0x311ea7);}_0x2211f6[_0xccaf09(0x211,0x295)]=this['rendering'][_0xccaf09(0x271,0x279)][_0x142344],_0x2211f6['execute'](this[_0xccaf09(0x2e8,0x269)]);});}[_0x23a763(-0x32,0x12)](_0x206c83){let _0x20ba6e=![];function _0xda0dbd(_0x24f891,_0xba622b){return _0x3b0072(_0xba622b- -0x5b5,_0x24f891);}function _0x3a11da(_0x4068bd,_0x102458){return _0x3b0072(_0x102458- -0x9e,_0x4068bd);}_0x206c83[_0xda0dbd(0x3e,-0x2f)]&&this['options']['particlesTextureSize']!==_0x206c83['particlesTextureSize']&&(_0x20ba6e=!![]);const _0x3c115a=deepMerge(_0x206c83,this[_0xda0dbd(-0x9e,-0x8a)]);if(_0x3c115a['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x3c115a,this['rendering'][_0x3a11da(0x561,0x4d8)](_0x206c83),this[_0xda0dbd(-0x50,-0x57)]['updateOptions'](_0x206c83),_0x20ba6e&&(this['computing']['destroyParticlesTextures'](),this['computing']['createParticlesTextures'](),this[_0xda0dbd(-0xab,-0xd8)]['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x5ef0ad){this['viewerParameters']=_0x5ef0ad,this['computing']['viewerParameters']=_0x5ef0ad,this['rendering']['viewerParameters']=_0x5ef0ad;}[_0x23a763(0x96,0x57)](){this['computing'][_0x3794f8(0x2ab,0x2c8)]();function _0x3794f8(_0x545b0d,_0x5d6c27){return _0x23a763(_0x545b0d-0x215,_0x5d6c27);}this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace[_0x23a763(0x94,0x109)],BaseLayer$1=mars3d__namespace[_0x3b0072(0x513,0x559)][_0x3b0072(0x592,0x57d)],_0x2f3577={};_0x2f3577['min']=0x1,_0x2f3577['max']=0x2;function _0x1c9a(){const _0x4a7d41=['floor','reCreateWindTextures','17273448qKplxl','viewerParameters','BaseLayer','random','282JFZfxE','changed','_updateIng2','EllipsoidalOccluder','grid','mode','dropRate','mouse_down','length','positionWC','rows','Math','mouseMove','min\x20is\x20undefined,\x20calculate\x20min','_randomParticle','pointerEvents','mouse_move','getUVByXY','canvas','default','outputTexture','segments','createColorTableTexture','normal','ColorRamp','bind','globe','age','setGeometry','_onMouseDownEvent','clientWidth','autoClear','_showHook','context','STATIC_DRAW','green','pixelSize','round','shaderProgram','stringify','sources','particlesSpeed','warn','blendEquation','_updateIng','lat','windData','getU','max','ymin','blending','west','wheel','push','isDestroy','changeOptions','_onMapWhellEvent','postProcessingPosition','5692BXufaz','getUVByPoint','worker','fromCache','tlng','canvasWidth','isPointVisible','north','clear','destination-in','xmin','displayRange','updateViewerParameters','modelMatrix','data','initFrameRate','updateWindData','umax','particlesTextures','_map','sqrt','height','calculateSpeed','bufferUsage','_bilinearInterpolation','xmax','dropRateBump','mouseDown','frameRateMonitor','maxAge','FLOAT','number','rendering','framebuffer','componentDatatype','wrapT','red','container','owner','speedFactor','alpha','CanvasWindField','error','slice','frameState.commandList\x20is\x20undefined','_setOptionsHook','colors','original','strokeStyle','Compute','pixelDatatype','color','mars3d-canvasWind','postMessage','WindLayer','toDegrees','setData','canvasContext','update','flipY','primitives','destoryRenderingFramebuffers','5036680sKxdwa','_calc_speedRate','MAX_VALUE','removeEventListener','frameRate','_pointerEvents','frameTime','PointTrans','lineWidth','clientHeight','none','speed','getSpeed','isDestroyed','getDirection','202798kQoiou','blendFuncDestination','drawingBufferWidth','setOptions','_speedRate','off','longitude','dynamic','particleSystem','layer','addEventListener','preExecute','ymax','createParticlesTextures','isDynamic','fragmentShaderSource','vertexArray','createWindTextures','blendFuncSource','visible','colorTable','attributeLocations','drawingBufferHeight','windField','particles','0px','2945fWlIqZ','Cartesian2','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','getSegmentDrawVertexShader','samplingWindow','morphComplete','show','options','setDate','width','_mountedHook','scene','requestAnimationFrame','_maxAge','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','array','zIndex','fixedHeight','windTextures','_removedHook','stroke','mouseUp','min','MIN_VALUE','defineProperty','particlesNumber','framebuffers','register','cols','commandList','log','style','bindEvent','EventType','createComputingPrimitives','3523248iSbmtZ','vdata','LINEAR','_createCanvas','values','createSegmentsGeometry','abs','bounds','getPrimitives','uniformMap','sceneMode','south','__proto__','get','processWindData','_onMouseUpEvent','_canrefresh','minificationFilter','type','previousParticlesPosition','latRange','rgb(206,255,255)','frameRateAdjustment','computing','clearCommand','onColorTableChange','primitiveType','getContext','_addedHook','toRadians','createRawRenderState','WindUtil','tlat','magnificationFilter','7851XGpxSH','willReadFrequently','getParticles','currentParticlesPosition','alt','3164007zozswv','geometry','removeChild','_canvasParticles','east','camera','initWorker','resize','updateOptions','forEach','RGBA','nextParticlesPosition','segmentsDepth','visibility','lng','#ffffff','lonRange','onmessage','Cesium','_drawLines','destroy','commandType','commandToExecute','init','particlesTextureSize','isInExtent','textures','hidden','CanvasWindLayer','speedRate','_onMouseMoveEvent','updatePosition'];_0x1c9a=function(){return _0x4a7d41;};return _0x1c9a();}const _0x4619c7={};_0x4619c7['min']=0x14,_0x4619c7[_0x3b0072(0x5c4,0x5ff)]=0x64;const _0x47f026={};_0x47f026[_0x23a763(0x9a,0x4f)]=0x64,_0x47f026[_0x3b0072(0x535,0x4fe)]=0x0,_0x47f026[_0x3b0072(0x503,0x4f0)]=_0x2f3577,_0x47f026['lineLength']=_0x4619c7,_0x47f026[_0x23a763(-0x8,0x3a)]=0x1,_0x47f026[_0x23a763(0xae,0x98)]=0.003,_0x47f026['dropRateBump']=0.001,_0x47f026[_0x3b0072(0x4eb,0x56b)]=[_0x3b0072(0x55c,0x5bb)],_0x47f026['flipY']=![],_0x47f026['dynamic']=!![];const DEF_OPTIONS=_0x47f026;class WindLayer extends BaseLayer$1{constructor(_0x2536e9={}){_0x2536e9={...DEF_OPTIONS,..._0x2536e9},super(_0x2536e9),this['_setOptionsHook'](_0x2536e9,_0x2536e9);}get['layer'](){function _0x19fb84(_0xbb1652,_0x33f2fc){return _0x23a763(_0xbb1652-0x4f1,_0x33f2fc);}return this[_0x19fb84(0x4fe,0x529)];}get['data'](){function _0x2c4ca9(_0x66fd96,_0x3fba98){return _0x23a763(_0x3fba98- -0x124,_0x66fd96);}return this['options'][_0x2c4ca9(-0x15a,-0x145)];}set['data'](_0x59c1a7){function _0x455d28(_0x4423f1,_0xeaa28){return _0x23a763(_0xeaa28- -0x8,_0x4423f1);}this[_0x455d28(0x16,0x37)]['data']=_0x59c1a7,this['setData'](_0x59c1a7);}get['colors'](){return this['options']['colors'];}set['colors'](_0x567ed9){this['options'][_0x3e903e(0x4e0,0x496)]=_0x567ed9;function _0x3e903e(_0x4f5baf,_0x3ae30e){return _0x3b0072(_0x4f5baf- -0xb,_0x3ae30e);}const _0x85fd14={};_0x85fd14['colors']=_0x567ed9,this['_setOptionsHook'](this['options'],_0x85fd14);}['_showHook'](_0x268ba2){function _0x18b7b8(_0x47c79c,_0x2f68c0){return _0x23a763(_0x2f68c0-0x2fb,_0x47c79c);}function _0x19ee67(_0x5d76ab,_0xaa8e63){return _0x23a763(_0xaa8e63-0x29,_0x5d76ab);}_0x268ba2?this[_0x19ee67(0x35,0xa0)]():this[_0x18b7b8(0x3a9,0x346)]();}['_mountedHook'](){}['_addedHook'](){this['scene']=this[_0x3c9322(0x10e,0xe6)][_0x3c9322(0xcb,0x145)],this['camera']=this['_map'][_0x3c9322(0x1be,0x189)];this['options'][_0xbd2945(0xa0,0x8f)]&&this['setData'](this['options']['data']);if(!this['windData']||!this['show'])return;this[_0x3c9322(0x1e9,0x1a7)]={'lonRange':new Cesium$1[(_0xbd2945(0x122,0xe9))](-0xb4,0xb4),'latRange':new Cesium$1[(_0x3c9322(0xea,0x13b))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0xbd2945(0x118,0x15d)]};function _0xbd2945(_0x1eb8d2,_0x1648ae){return _0x23a763(_0x1648ae-0xb0,_0x1eb8d2);}function _0x3c9322(_0xb22a18,_0x4b42ef){return _0x23a763(_0x4b42ef-0x102,_0xb22a18);}this['updateViewerParameters'](),this[_0xbd2945(0x157,0xd6)]=new WindParticleSystem(this[_0x3c9322(0xe3,0x145)][_0x3c9322(0x229,0x1cb)],this[_0x3c9322(0x184,0x1d8)],this['options'],this[_0xbd2945(0x1d3,0x155)],this[_0x3c9322(0x17a,0x145)]),this[_0xbd2945(0x6b,0xbd)]=this['particleSystem']['getPrimitives'](),this[_0xbd2945(0x7c,0xbd)]['forEach'](_0x4a4176=>{function _0x522f0d(_0x48accf,_0x131296){return _0xbd2945(_0x48accf,_0x131296- -0x2f);}this[_0x522f0d(0x10e,0xc4)]['primitives']['add'](_0x4a4176);}),this['camera']['percentageChanged']=0.01,this['camera'][_0xbd2945(0xf2,0x159)]['addEventListener'](this[_0x3c9322(0xfc,0xdf)]['bind'](this)),this['scene']['morphComplete']['addEventListener'](this['updateViewerParameters']['bind'](this)),window['addEventListener'](_0xbd2945(0x1ba,0x139),this[_0x3c9322(0x99,0xdf)][_0xbd2945(0x1a1,0x171)](this));}[_0x3b0072(0x537,0x5a1)](){this[_0x203402(0x4e3,0x4a5)][_0x491f7e(0x1de,0x200)][_0x491f7e(0x147,0x18f)](this[_0x203402(0x468,0x3fb)][_0x203402(0x502,0x4df)](this));function _0x491f7e(_0x1bc19e,_0x56b745){return _0x3b0072(_0x1bc19e- -0x3b7,_0x56b745);}function _0x203402(_0x3f0594,_0x1f372d){return _0x23a763(_0x1f372d-0x41e,_0x3f0594);}this['scene'][_0x203402(0x4a9,0x45b)]['removeEventListener'](this['updateViewerParameters'][_0x491f7e(0x1f6,0x1e0)](this)),window['removeEventListener']('resize',this['updateViewerParameters'][_0x203402(0x4f1,0x4df)](this)),this['primitives']&&(this[_0x491f7e(0x142,0x104)]['forEach'](_0x409870=>{function _0x120661(_0x335490,_0x44d6cc){return _0x491f7e(_0x335490-0x2af,_0x44d6cc);}this[_0x120661(0x427,0x3c3)]['primitives']['remove'](_0x409870);}),delete this['primitives']),this['particleSystem']&&(this[_0x491f7e(0x15b,0x18b)]['destroy'](),delete this[_0x203402(0x41e,0x444)]);}['setData'](_0x418346,_0x2b4c3f){this[_0x556c22(0xe2,0xa3)]=this[_0x382808(0x30a,0x35b)](_0x418346);function _0x382808(_0xf3c837,_0xec3d9){return _0x3b0072(_0xf3c837- -0x24b,_0xec3d9);}if(_0x2b4c3f){this[_0x382808(0x2ec,0x2b9)](),this[_0x556c22(0xad,0x44)]();return;}function _0x556c22(_0x1cb76f,_0x256bb4){return _0x23a763(_0x256bb4- -0x33,_0x1cb76f);}this['particleSystem']?(this[_0x556c22(0x61,-0xd)]['computing']['updateWindData'](this[_0x556c22(0xd0,0xa3)]),this['scene']['requestRender']()):this['_addedHook']();}['_setOptionsHook'](_0x1baee1,_0x199ec4){function _0x3b0a3f(_0x529e2a,_0xc7a542){return _0x23a763(_0xc7a542-0x2e0,_0x529e2a);}function _0x18b08f(_0x49fdd7,_0x48e833){return _0x23a763(_0x49fdd7-0x5f1,_0x48e833);}this[_0x3b0a3f(0x2f6,0x306)]&&(this[_0x3b0a3f(0x349,0x306)][_0x3b0a3f(0x296,0x2ae)](_0x199ec4),this[_0x3b0a3f(0x3a7,0x323)]['requestRender']());}['processWindData'](_0x373bb8){var _0x4b9cb3,_0x1ed2c4;const _0x22c293={..._0x373bb8},_0x46223a=_0x22c293;function _0xa5ad87(_0x3a830d,_0x46befb){return _0x23a763(_0x46befb- -0x1b5,_0x3a830d);}!_0x46223a['height']&&_0x46223a[_0xa5ad87(-0xe9,-0x103)]&&(_0x46223a['height']=_0x46223a['rows']);!_0x46223a['width']&&_0x46223a[_0x6e9e45(-0x6e,-0x56)]&&(_0x46223a['width']=_0x46223a['cols']);!_0x46223a[_0xa5ad87(-0x131,-0x153)]&&(_0x46223a['bounds']={'west':_0x46223a['xmin'],'south':_0x46223a['ymin'],'east':_0x46223a['xmax'],'north':_0x46223a[_0x6e9e45(-0x98,-0xf0)]});function _0x6e9e45(_0x50d8fb,_0x26bb2a){return _0x23a763(_0x50d8fb- -0xc2,_0x26bb2a);}if(!_0x46223a['u']){const _0x272431={};_0x272431[_0xa5ad87(-0x1f2,-0x16e)]=_0x373bb8['udata'],_0x272431['min']=_0x373bb8['umin'],_0x272431[_0x6e9e45(0x16,0x65)]=_0x373bb8[_0x6e9e45(-0xe0,-0x10a)],_0x46223a['u']=_0x272431;}if(!_0x46223a['v']){const _0x496767={};_0x496767['array']=_0x373bb8[_0xa5ad87(-0x141,-0x159)],_0x496767[_0xa5ad87(-0x100,-0x167)]=_0x373bb8['vmin'],_0x496767['max']=_0x373bb8['vmax'],_0x46223a['v']=_0x496767;}if(((_0x4b9cb3=_0x46223a['speed'])===null||_0x4b9cb3===void 0x0?void 0x0:_0x4b9cb3[_0xa5ad87(-0x1b1,-0x167)])===undefined||((_0x1ed2c4=_0x46223a[_0xa5ad87(-0x138,-0x19b)])===null||_0x1ed2c4===void 0x0?void 0x0:_0x1ed2c4['max'])===undefined||_0x46223a[_0x6e9e45(-0xa8,-0xf6)]['array']===undefined){const _0x584c6f={'array':new Float32Array(_0x46223a['u']['array'][_0xa5ad87(-0x11a,-0x105)]),'min':Number[_0xa5ad87(-0x1df,-0x1a4)],'max':Number[_0x6e9e45(-0x73,-0xaf)]};for(let _0x43acc5=0x0;_0x43acc5<_0x46223a['u']['array']['length'];_0x43acc5++){_0x584c6f[_0xa5ad87(-0x130,-0x16e)][_0x43acc5]=Math['sqrt'](_0x46223a['u']['array'][_0x43acc5]*_0x46223a['u']['array'][_0x43acc5]+_0x46223a['v']['array'][_0x43acc5]*_0x46223a['v'][_0x6e9e45(-0x7b,-0xd6)][_0x43acc5]),_0x584c6f['array'][_0x43acc5]!==0x0&&(_0x584c6f['min']=Math[_0x6e9e45(-0x74,-0x1a)](_0x584c6f[_0xa5ad87(-0x165,-0x167)],_0x584c6f['array'][_0x43acc5]),_0x584c6f['max']=Math['max'](_0x584c6f[_0xa5ad87(-0x85,-0xdd)],_0x584c6f['array'][_0x43acc5]));}_0x46223a[_0xa5ad87(-0x1b8,-0x19b)]=_0x584c6f;}return _0x46223a;}['updateViewerParameters'](){function _0x2d5435(_0x37cfdd,_0x210b8c){return _0x3b0072(_0x37cfdd-0x84,_0x210b8c);}var _0xcd3abb;const _0xb35bcb=this['scene'];if(!_0xb35bcb)return;const _0x248bc1=_0xb35bcb['canvas'],_0x1cfb06={};_0x1cfb06['x']=0x0,_0x1cfb06['y']=0x0;const _0x1f28f9={};_0x1f28f9['x']=0x0,_0x1f28f9['y']=_0x248bc1['clientHeight'];const _0x16cf06={};_0x16cf06['x']=_0x248bc1['clientWidth'],_0x16cf06['y']=0x0;const _0x3b45de={};_0x3b45de['x']=_0x248bc1['clientWidth'],_0x3b45de['y']=_0x248bc1[_0x212369(-0xcb,-0x99)];const _0x5a356c=[_0x1cfb06,_0x1f28f9,_0x16cf06,_0x3b45de];let _0x2fd0a2=0xb4,_0xf27f94=-0xb4,_0x467315=0x5a,_0x14fc33=-0x5a;function _0x212369(_0x1d2f00,_0x1782cf){return _0x3b0072(_0x1782cf- -0x59d,_0x1d2f00);}let _0x316135=![];for(const _0x50d4c4 of _0x5a356c){const _0x131f6b=_0xb35bcb['camera']['pickEllipsoid'](new Cesium$1[(_0x212369(-0x23,-0x78))](_0x50d4c4['x'],_0x50d4c4['y']),_0xb35bcb['globe']['ellipsoid']);if(!_0x131f6b){_0x316135=!![];break;}const _0x35f33e=_0xb35bcb[_0x2d5435(0x632,0x669)]['ellipsoid']['cartesianToCartographic'](_0x131f6b),_0x3def69=Cesium$1['Math'][_0x2d5435(0x578,0x57e)](_0x35f33e[_0x2d5435(0x594,0x5b6)]),_0x60ceb1=Cesium$1['Math'][_0x2d5435(0x578,0x57b)](_0x35f33e['latitude']);_0x2fd0a2=Math['min'](_0x2fd0a2,_0x3def69),_0xf27f94=Math['max'](_0xf27f94,_0x3def69),_0x467315=Math[_0x212369(-0xab,-0x63)](_0x467315,_0x60ceb1),_0x14fc33=Math[_0x212369(0x30,0x27)](_0x14fc33,_0x60ceb1);}if(!_0x316135){const _0x2f91f7=new Cesium$1[(_0x2d5435(0x5a9,0x593))](Math[_0x212369(0x41,0x27)](this[_0x212369(-0x2a,0x25)][_0x212369(0x22,-0x4f)]['west'],_0x2fd0a2),Math['min'](this['windData']['bounds']['east'],_0xf27f94)),_0x1fef0e=new Cesium$1[(_0x212369(-0xcf,-0x78))](Math['max'](this['windData']['bounds']['south'],_0x467315),Math['min'](this['windData']['bounds']['north'],_0x14fc33)),_0x4e6f9e=(_0x2f91f7['y']-_0x2f91f7['x'])*0.05,_0x438540=(_0x1fef0e['y']-_0x1fef0e['x'])*0.05;_0x2f91f7['x']=Math['max'](this['windData']['bounds'][_0x212369(0x71,0x2a)],_0x2f91f7['x']-_0x4e6f9e),_0x2f91f7['y']=Math[_0x2d5435(0x5be,0x5fb)](this['windData']['bounds']['east'],_0x2f91f7['y']+_0x4e6f9e),_0x1fef0e['x']=Math['max'](this[_0x212369(-0x23,0x25)]['bounds']['south'],_0x1fef0e['x']-_0x438540),_0x1fef0e['y']=Math[_0x212369(-0x3a,-0x63)](this[_0x2d5435(0x646,0x66e)]['bounds']['north'],_0x1fef0e['y']+_0x438540),this['viewerParameters'][_0x2d5435(0x602,0x675)]=_0x2f91f7,this[_0x2d5435(0x615,0x603)]['latRange']=_0x1fef0e;const _0x480d63=this[_0x2d5435(0x646,0x5dc)][_0x212369(-0x6a,-0x4f)][_0x2d5435(0x5f6,0x5cc)]-this['windData']['bounds']['west'],_0x4ec54e=this[_0x212369(0x33,0x25)]['bounds']['north']-this[_0x2d5435(0x646,0x698)]['bounds']['south'],_0x8b1bfb=(_0x2f91f7['y']-_0x2f91f7['x'])/_0x480d63,_0x2db3fa=(_0x1fef0e['y']-_0x1fef0e['x'])/_0x4ec54e,_0x25b422=Math['min'](_0x8b1bfb,_0x2db3fa),_0x28ee38=0x3e8*_0x25b422;_0x28ee38>0x0&&(this['viewerParameters'][_0x212369(-0x57,0x1b)]=Math['max'](0x0,Math[_0x212369(-0x52,-0x63)](0x3e8,_0x28ee38)));}this[_0x212369(0x71,-0xc)][_0x2d5435(0x5d5,0x58f)]=this[_0x212369(-0x2e,-0x6e)][_0x2d5435(0x61d,0x687)],(_0xcd3abb=this['particleSystem'])===null||_0xcd3abb===void 0x0||_0xcd3abb['applyViewerParameters'](this[_0x2d5435(0x615,0x5f3)]);}['getDataAtLonLat'](_0x69bc27,_0x26a47c){const {bounds:_0x217bd9,width:_0x4c2bbd,height:_0x3b07f1,u:_0x3231f9,v:_0x4d1af5,speed:_0x1086b3}=this['windData'],{flipY:_0x1b1097}=this['options'];if(_0x69bc27<_0x217bd9['west']||_0x69bc27>_0x217bd9['east']||_0x26a47c<_0x217bd9[_0x3c5d29(0x3b2,0x345)]||_0x26a47c>_0x217bd9[_0x3cdf7d(-0x1dc,-0x1f3)])return null;const _0x5ce4ce=(_0x69bc27-_0x217bd9[_0x3cdf7d(-0xd9,-0xfd)])/(_0x217bd9['east']-_0x217bd9['west'])*(_0x4c2bbd-0x1);let _0x22e53f=(_0x26a47c-_0x217bd9[_0x3c5d29(0x319,0x345)])/(_0x217bd9['north']-_0x217bd9[_0x3cdf7d(-0x14e,-0x18d)])*(_0x3b07f1-0x1);_0x1b1097&&(_0x22e53f=_0x3b07f1-0x1-_0x22e53f);const _0x13f3b8=Math['floor'](_0x5ce4ce),_0x152776=Math[_0x3c5d29(0x3b0,0x381)](_0x22e53f),_0x19e2e9=Math[_0x3cdf7d(-0x112,-0xfb)](_0x5ce4ce),_0x149c5b=Math['min'](_0x19e2e9+0x1,_0x4c2bbd-0x1),_0x432865=Math['floor'](_0x22e53f),_0x2056a9=Math['min'](_0x432865+0x1,_0x3b07f1-0x1),_0x3986ef=_0x5ce4ce-_0x19e2e9,_0x5682b9=_0x22e53f-_0x432865,_0x19d39b=_0x152776*_0x4c2bbd+_0x13f3b8,_0x17e423=_0x432865*_0x4c2bbd+_0x19e2e9,_0x498d8b=_0x432865*_0x4c2bbd+_0x149c5b,_0x2c840e=_0x2056a9*_0x4c2bbd+_0x19e2e9,_0x15fc86=_0x2056a9*_0x4c2bbd+_0x149c5b;function _0x3c5d29(_0x358f1b,_0x1e3b95){return _0x23a763(_0x1e3b95-0x2df,_0x358f1b);}const _0xb53a70=_0x3231f9['array'][_0x17e423],_0x154f30=_0x3231f9[_0x3c5d29(0x2dc,0x326)][_0x498d8b],_0x3951b2=_0x3231f9[_0x3cdf7d(-0x16d,-0x10d)][_0x2c840e],_0xb34a20=_0x3231f9[_0x3c5d29(0x33f,0x326)][_0x15fc86],_0x5ad570=(0x1-_0x3986ef)*(0x1-_0x5682b9)*_0xb53a70+_0x3986ef*(0x1-_0x5682b9)*_0x154f30+(0x1-_0x3986ef)*_0x5682b9*_0x3951b2+_0x3986ef*_0x5682b9*_0xb34a20,_0x1acbde=_0x4d1af5[_0x3cdf7d(-0x16d,-0xf6)][_0x17e423],_0x2196b9=_0x4d1af5[_0x3c5d29(0x31c,0x326)][_0x498d8b],_0x52b2b8=_0x4d1af5['array'][_0x2c840e],_0x19a4a4=_0x4d1af5['array'][_0x15fc86],_0x535683=(0x1-_0x3986ef)*(0x1-_0x5682b9)*_0x1acbde+_0x3986ef*(0x1-_0x5682b9)*_0x2196b9+(0x1-_0x3986ef)*_0x5682b9*_0x52b2b8+_0x3986ef*_0x5682b9*_0x19a4a4,_0x25a0d7=Math[_0x3c5d29(0x24f,0x2c4)](_0x5ad570*_0x5ad570+_0x535683*_0x535683),_0x55b122={};_0x55b122['u']=_0x3231f9[_0x3c5d29(0x30e,0x326)][_0x19d39b],_0x55b122['v']=_0x4d1af5[_0x3cdf7d(-0x16d,-0xf8)][_0x19d39b],_0x55b122[_0x3cdf7d(-0x19a,-0x1af)]=_0x1086b3['array'][_0x19d39b];function _0x3cdf7d(_0x247099,_0x2c19c6){return _0x23a763(_0x247099- -0x1b4,_0x2c19c6);}const _0xe9f2b2={};_0xe9f2b2['u']=_0x5ad570,_0xe9f2b2['v']=_0x535683,_0xe9f2b2['speed']=_0x25a0d7;const _0x20809a={};return _0x20809a[_0x3cdf7d(-0x1b4,-0x14c)]=_0x55b122,_0x20809a['interpolated']=_0xe9f2b2,_0x20809a;}}function _0x1034(_0xf976bd,_0x56fe95){const _0x1c9a0a=_0x1c9a();return _0x1034=function(_0x103419,_0x50a469){_0x103419=_0x103419-0x1e4;let _0x2fa40f=_0x1c9a0a[_0x103419];return _0x2fa40f;},_0x1034(_0xf976bd,_0x56fe95);}function _0x3b0072(_0x2ce97c,_0x4440d4){return _0x1034(_0x2ce97c-0x2d4,_0x4440d4);}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x40078f(_0x393008,_0x3188a6){return _0x23a763(_0x3188a6-0x1a0,_0x393008);}this[_0x29b88e(0xd5,0x77)]=null,this[_0x29b88e(0xb5,0xbc)]=null,this['tlng']=null;function _0x29b88e(_0x37637e,_0x3e3c10){return _0x3b0072(_0x3e3c10- -0x505,_0x37637e);}this[_0x40078f(0x1f9,0x21b)]=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x29640f in this){delete this[_0x29640f];}}}class CanvasWindField{constructor(_0x437e11){function _0x443191(_0x57c348,_0x415d9d){return _0x3b0072(_0x57c348- -0x385,_0x415d9d);}this[_0x443191(0x188,0x14f)](_0x437e11);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x33c85e){function _0x19cdad(_0x3828a5,_0x11cbce){return _0x23a763(_0x3828a5-0x10b,_0x11cbce);}this['_speedRate']=(0x64-(_0x33c85e>0x63?0x63:_0x33c85e))*0x64;function _0x12a474(_0xb70c62,_0x3e00ed){return _0x23a763(_0xb70c62-0x141,_0x3e00ed);}this['_calc_speedRate']=[(this[_0x12a474(0x12b,0x176)]-this[_0x12a474(0x11c,0x13f)])/this[_0x12a474(0x163,0x120)],(this[_0x12a474(0x16b,0x18c)]-this['ymin'])/this['_speedRate']];}get[_0x3b0072(0x4da,0x50d)](){function _0x4b3edb(_0x497cd2,_0x338c05){return _0x3b0072(_0x338c05- -0x49b,_0x497cd2);}return this[_0x4b3edb(0x15,0x96)];}set['maxAge'](_0x1f62de){function _0x343bde(_0x4bdeae,_0x1c6409){return _0x3b0072(_0x4bdeae- -0x478,_0x1c6409);}this[_0x343bde(0xb9,0xd8)]=_0x1f62de;}[_0x23a763(0x21,0x37)](_0x85f77a){this['options']=_0x85f77a;function _0x6d264f(_0x1b7197,_0x254cd0){return _0x23a763(_0x1b7197-0x5d6,_0x254cd0);}this['maxAge']=_0x85f77a[_0x6d264f(0x5c4,0x53f)]||0x78,this['speedRate']=_0x85f77a['speedRate']||0x32,this[_0x6d264f(0x60c,0x59f)]=[];const _0x131552=_0x85f77a[_0x6d264f(0x627,0x638)]||0x1000;function _0x192c35(_0xe31bb7,_0x521f6a){return _0x23a763(_0x521f6a-0x416,_0xe31bb7);}for(let _0x3abee9=0x0;_0x3abee9<_0x131552;_0x3abee9++){const _0xd6d669=this[_0x6d264f(0x68c,0x6dc)](new CanvasParticle());this['particles']['push'](_0xd6d669);}}[_0x3b0072(0x52c,0x524)](_0x3fae80){this[_0x469571(0x29b,0x28b)]=_0x3fae80['rows'],this['cols']=_0x3fae80['cols'],this[_0x32bfbb(0x597,0x5b5)]=_0x3fae80['xmin'],this['xmax']=_0x3fae80['xmax'],this['ymin']=_0x3fae80['ymin'];function _0x469571(_0x4076a0,_0xf0179f){return _0x3b0072(_0xf0179f- -0x313,_0x4076a0);}this['ymax']=_0x3fae80[_0x32bfbb(0x5e6,0x645)],this['grid']=[];const _0x5efffd=_0x3fae80['udata'],_0x270ce7=_0x3fae80[_0x32bfbb(0x618,0x5c8)];let _0xfdb575=![];_0x5efffd[_0x469571(0x29f,0x289)]===this['rows']&&_0x5efffd[0x0]['length']===this[_0x469571(0x2a1,0x22d)]&&(_0xfdb575=!![]);let _0x2fe058=0x0,_0x429028=null,_0x1f1ba9=null;for(let _0x240369=0x0;_0x240369<this[_0x32bfbb(0x66e,0x6e3)];_0x240369++){_0x429028=[];for(let _0x4d2ba3=0x0;_0x4d2ba3<this[_0x469571(0x1a7,0x22d)];_0x4d2ba3++,_0x2fe058++){_0xfdb575?_0x1f1ba9=this['_calcUV'](_0x5efffd[_0x240369][_0x4d2ba3],_0x270ce7[_0x240369][_0x4d2ba3]):_0x1f1ba9=this['_calcUV'](_0x5efffd[_0x2fe058],_0x270ce7[_0x2fe058]),_0x429028['push'](_0x1f1ba9);}this['grid'][_0x32bfbb(0x588,0x59a)](_0x429028);}function _0x32bfbb(_0x10a26d,_0x4a9cb0){return _0x23a763(_0x10a26d-0x5bc,_0x4a9cb0);}!this['options']['flipY']&&this['grid']['reverse']();}['clear'](){delete this[_0x5f5985(0x4a,0xc0)],delete this['cols'];function _0x491358(_0xb05225,_0x18f68a){return _0x3b0072(_0xb05225- -0x5df,_0x18f68a);}delete this['xmin'],delete this['xmax'],delete this[_0x5f5985(0x115,0xe7)];function _0x5f5985(_0x359b36,_0x5d2f50){return _0x23a763(_0x5d2f50-0xe,_0x359b36);}delete this['ymax'],delete this[_0x491358(-0x47,-0x30)],delete this[_0x5f5985(0x82,0x44)];}['toGridXY'](_0x309141,_0x539eab){const _0x91e619=(_0x309141-this['xmin'])/(this[_0x19708d(0xbe,0xfc)]-this['xmin'])*(this[_0x19708d(0x181,0x166)]-0x1);function _0x508ba0(_0x29a67e,_0x429464){return _0x3b0072(_0x429464- -0x656,_0x29a67e);}const _0x552213=(this['ymax']-_0x539eab)/(this[_0x508ba0(-0x147,-0x140)]-this[_0x19708d(0x1ad,0x1eb)])*(this['rows']-0x1);function _0x19708d(_0x5e9f34,_0x1b7481){return _0x23a763(_0x1b7481-0x112,_0x5e9f34);}return[_0x91e619,_0x552213];}[_0x3b0072(0x5a5,0x59b)](_0x1e4682,_0x4f48f5){if(_0x1e4682<0x0||_0x1e4682>=this[_0x1c665a(0x257,0x23d)]||_0x4f48f5>=this['rows'])return[0x0,0x0,0x0];const _0x5cd0dc=Math['floor'](_0x1e4682),_0x3461f4=Math['floor'](_0x4f48f5);function _0x1c665a(_0x82774e,_0x4663b3){return _0x23a763(_0x4663b3-0x1e9,_0x82774e);}if(_0x5cd0dc===_0x1e4682&&_0x3461f4===_0x4f48f5)return this['grid'][_0x4f48f5][_0x1e4682];const _0x480237=_0x5cd0dc+0x1;function _0xb81b88(_0x444563,_0x2ccd19){return _0x3b0072(_0x2ccd19- -0x5dc,_0x444563);}const _0x343c09=_0x3461f4+0x1,_0x5eefde=this[_0x1c665a(0x2cc,0x2a2)](_0x5cd0dc,_0x3461f4),_0x5b9e4c=this['getUVByXY'](_0x480237,_0x3461f4),_0x534df6=this['getUVByXY'](_0x5cd0dc,_0x343c09),_0x4e2b0d=this['getUVByXY'](_0x480237,_0x343c09);let _0x8ea496=null;try{_0x8ea496=this['_bilinearInterpolation'](_0x1e4682-_0x5cd0dc,_0x4f48f5-_0x3461f4,_0x5eefde,_0x5b9e4c,_0x534df6,_0x4e2b0d);}catch(_0x52e10f){console[_0x1c665a(0x1c7,0x23f)](_0x1e4682,_0x4f48f5);}return _0x8ea496;}[_0x23a763(-0x17,0x11)](_0x290b7c,_0x42a317,_0x2f46ec,_0x5146a8,_0x5bf4e8,_0x19d84b){const _0x470195=0x1-_0x290b7c,_0x433212=0x1-_0x42a317,_0x24d098=_0x470195*_0x433212,_0x424b86=_0x290b7c*_0x433212,_0x5e42a6=_0x470195*_0x42a317,_0x53ff58=_0x290b7c*_0x42a317,_0x390b5c=_0x2f46ec[0x0]*_0x24d098+_0x5146a8[0x0]*_0x424b86+_0x5bf4e8[0x0]*_0x5e42a6+_0x19d84b[0x0]*_0x53ff58,_0x266bf6=_0x2f46ec[0x1]*_0x24d098+_0x5146a8[0x1]*_0x424b86+_0x5bf4e8[0x1]*_0x5e42a6+_0x19d84b[0x1]*_0x53ff58;return this['_calcUV'](_0x390b5c,_0x266bf6);}['_calcUV'](_0x262ad5,_0xf49f3){return[+_0x262ad5,+_0xf49f3,Math['sqrt'](_0x262ad5*_0x262ad5+_0xf49f3*_0xf49f3)];}[_0x3b0072(0x4be,0x50b)](_0x491318,_0x5b7505){if(!this[_0x3834f5(0x190,0x1f4)](_0x491318,_0x5b7505))return null;const _0x2e37fe=this['toGridXY'](_0x491318,_0x5b7505);function _0x3834f5(_0x1a4bfa,_0x1aab64){return _0x23a763(_0x1aab64-0x159,_0x1a4bfa);}const _0x3ca2b4=this['getUVByXY'](_0x2e37fe[0x0],_0x2e37fe[0x1]);return _0x3ca2b4;}[_0x3b0072(0x587,0x523)](_0x45e7e8,_0x74abc3){function _0x41c49e(_0x54a520,_0xa95318){return _0x23a763(_0x54a520-0x407,_0xa95318);}function _0x19f60d(_0x21ebcc,_0x5e1d9b){return _0x3b0072(_0x5e1d9b- -0x669,_0x21ebcc);}return _0x45e7e8>=this['xmin']&&_0x45e7e8<=this[_0x41c49e(0x3f1,0x41e)]&&_0x74abc3>=this[_0x41c49e(0x4e0,0x4b9)]&&_0x74abc3<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x4b05ab=fRandomByfloat(this['xmin'],this[_0x39d314(0x42a,0x3ce)]),_0x3480fe=fRandomByfloat(this['ymin'],this[_0x39d314(0x46a,0x3e9)]),_0x57443a={};function _0x39d314(_0x33cc39,_0x45106c){return _0x3b0072(_0x33cc39- -0xac,_0x45106c);}_0x57443a[_0x39d314(0x515,0x4f1)]=_0x3480fe,_0x57443a[_0x53074f(-0xee,-0xdd)]=_0x4b05ab;function _0x53074f(_0x27f0c6,_0x45937e){return _0x23a763(_0x27f0c6- -0x17e,_0x45937e);}return _0x57443a;}[_0x23a763(0x7f,0xb4)](){let _0x5a4971,_0xe297b2,_0x23af82;function _0x196bde(_0x4e57f3,_0x352446){return _0x23a763(_0x4e57f3-0x3fa,_0x352446);}for(let _0x283482=0x0,_0x45793a=this[_0x196bde(0x430,0x3a9)][_0x196bde(0x4aa,0x46a)];_0x283482<_0x45793a;_0x283482++){let _0xf4ab75=this['particles'][_0x283482];_0xf4ab75[_0x196bde(0x4bd,0x4b4)]<=0x0&&(_0xf4ab75=this[_0x513e10(0x1ab,0x1b0)](_0xf4ab75));if(_0xf4ab75[_0x196bde(0x4bd,0x4b4)]>0x0){const _0xf01ad1=_0xf4ab75['tlng'],_0x3ef221=_0xf4ab75['tlat'];_0x23af82=this['getUVByPoint'](_0xf01ad1,_0x3ef221),_0x23af82?(_0x5a4971=_0xf01ad1+this[_0x196bde(0x40a,0x48e)][0x0]*_0x23af82[0x0],_0xe297b2=_0x3ef221+this[_0x513e10(0xe9,0x10a)][0x1]*_0x23af82[0x1],_0xf4ab75[_0x196bde(0x48a,0x484)]=_0xf01ad1,_0xf4ab75['lat']=_0x3ef221,_0xf4ab75[_0x196bde(0x3cf,0x421)]=_0x5a4971,_0xf4ab75['tlat']=_0xe297b2,_0xf4ab75[_0x513e10(0xbc,0x114)]=_0x23af82[0x2],_0xf4ab75[_0x513e10(0x1ff,0x1bd)]--):_0xf4ab75[_0x513e10(0x1f5,0x1bd)]=0x0;}}function _0x513e10(_0x552f76,_0x18d3b3){return _0x23a763(_0x18d3b3-0xfa,_0x552f76);}return this[_0x513e10(0xe0,0x130)];}[_0x3b0072(0x5a2,0x51b)](_0x4a3594){let _0x330efd,_0x39654f;for(let _0x3a16cd=0x0;_0x3a16cd<0x1e;_0x3a16cd++){_0x330efd=this['getRandomLatLng'](),_0x39654f=this['getUVByPoint'](_0x330efd['lng'],_0x330efd[_0x5e5348(0x6c,0x41)]);if(_0x39654f&&_0x39654f[0x2]>0x0)break;}if(!_0x39654f)return _0x4a3594;function _0x5e5348(_0x2bd75f,_0x2bdc8e){return _0x3b0072(_0x2bdc8e- -0x580,_0x2bd75f);}function _0x304e6c(_0x261b1,_0x129076){return _0x3b0072(_0x261b1- -0xd0,_0x129076);}const _0x58bdef=_0x330efd['lng']+this[_0x5e5348(-0x26,-0x84)][0x0]*_0x39654f[0x0],_0x440f8f=_0x330efd['lat']+this['_calc_speedRate'][0x1]*_0x39654f[0x1];return _0x4a3594[_0x304e6c(0x4ac,0x484)]=_0x330efd['lng'],_0x4a3594[_0x5e5348(0xae,0x41)]=_0x330efd['lat'],_0x4a3594['tlng']=_0x58bdef,_0x4a3594['tlat']=_0x440f8f,_0x4a3594[_0x5e5348(0x43,0x2f)]=Math[_0x5e5348(-0xf,0x39)](0xa+Math[_0x304e6c(0x4c3,0x454)]()*this['maxAge']),_0x4a3594['speed']=_0x39654f[0x2],_0x4a3594;}[_0x23a763(0x96,0xc2)](){for(const _0x359e4c in this){delete this[_0x359e4c];}}}function fRandomByfloat(_0x13bdc3,_0x5cfc09){function _0x180f96(_0x26cbe4,_0xf16380){return _0x23a763(_0xf16380-0x25c,_0x26cbe4);}return _0x13bdc3+Math[_0x180f96(0x2ef,0x303)]()*(_0x5cfc09-_0x13bdc3);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x23a763(0xa6,0xcd)];class CanvasWindLayer extends BaseLayer{constructor(_0x47931b={}){super(_0x47931b),this['_setOptionsHook'](_0x47931b),this['canvas']=null;function _0x266991(_0x272d3d,_0x573d2d){return _0x23a763(_0x573d2d- -0xdc,_0x272d3d);}_0x47931b['colors']&&_0x47931b['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x266991(-0x8,-0x1c))](_0x47931b));}[_0x3b0072(0x4ea,0x51f)](_0x27b89f,_0x9ab895){function _0x2e3fbf(_0x5a5ed9,_0x43d66b){return _0x23a763(_0x43d66b-0xe7,_0x5a5ed9);}function _0x25a561(_0x2b14f5,_0x2251c2){return _0x3b0072(_0x2251c2- -0x26b,_0x2b14f5);}this[_0x2e3fbf(0xf3,0xfc)]=0x3e8/(_0x27b89f[_0x25a561(0x2f2,0x294)]||0xa),this[_0x2e3fbf(0xb6,0xfb)]=this['options'][_0x2e3fbf(0x163,0x19e)]??![],this[_0x2e3fbf(0x163,0xeb)]=_0x27b89f['color']||_0x2e3fbf(0x175,0x178),this['lineWidth']=_0x27b89f['lineWidth']||0x1,this['fixedHeight']=_0x27b89f['fixedHeight']??0x0,this[_0x2e3fbf(0x16f,0xf3)]=_0x27b89f['flipY']??![],this['windField']&&this['windField']['setOptions'](_0x27b89f);}get['layer'](){function _0x192aaa(_0x388751,_0x485073){return _0x23a763(_0x485073-0x20a,_0x388751);}return this[_0x192aaa(0x314,0x2c4)];}get[_0x3b0072(0x4c2,0x4ba)](){function _0x2b0aad(_0x19694d,_0x48caa8){return _0x3b0072(_0x48caa8- -0x272,_0x19694d);}return this['_map'][_0x2b0aad(0x2dd,0x2bd)]['canvas']['clientWidth'];}get['canvasHeight'](){function _0x25ff38(_0x40d48e,_0x18d654){return _0x23a763(_0x18d654-0xc5,_0x40d48e);}function _0x1592bc(_0x535cdc,_0x88274){return _0x3b0072(_0x535cdc-0xd8,_0x88274);}return this[_0x25ff38(0xbc,0xa9)][_0x1592bc(0x607,0x631)]['canvas'][_0x25ff38(0x159,0xdd)];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x3b0072(0x5a3,0x5a5)](_0x309569){this[_0x1b67bd(0x41f,0x438)]=_0x309569;if(!this[_0x5188fa(-0x90,-0x82)])return;function _0x1b67bd(_0x3638d8,_0x19c782){return _0x3b0072(_0x19c782- -0xc8,_0x3638d8);}function _0x5188fa(_0x112ca5,_0x5c6bf0){return _0x3b0072(_0x5c6bf0- -0x628,_0x112ca5);}_0x309569?this['canvas']['style']['pointer-events']='all':this['canvas']['style']['pointer-events']=_0x1b67bd(0x3de,0x43d);}get['particlesNumber'](){function _0x2a6199(_0xae3a4c,_0x441bf2){return _0x3b0072(_0x441bf2- -0x138,_0xae3a4c);}return this['options'][_0x2a6199(0x47b,0x405)];}set['particlesNumber'](_0x14e990){function _0x3f205f(_0x185b47,_0x423bba){return _0x23a763(_0x423bba- -0x10d,_0x185b47);}this['options'][_0x3f205f(-0x7b,-0xbc)]=_0x14e990;function _0x2eaec5(_0x5e7180,_0x172a7b){return _0x23a763(_0x172a7b-0x3c,_0x5e7180);}clearTimeout(this[_0x2eaec5(0xae,0xa7)]),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x23a763(0x9f,0x53)](){function _0x707259(_0x564246,_0x394ba5){return _0x3b0072(_0x564246- -0x5eb,_0x394ba5);}return this[_0x707259(-0xc0,-0xdc)]['speedRate'];}set['speedRate'](_0xb4b222){function _0x17fadd(_0x2596d5,_0x3e6681){return _0x23a763(_0x3e6681-0x4d1,_0x2596d5);}this['options'][_0x17fadd(0x5a1,0x570)]=_0xb4b222,this['windField']&&(this['windField']['speedRate']=_0xb4b222);}get[_0x3b0072(0x4da,0x51f)](){function _0x3ac1dc(_0x2ca45d,_0x115255){return _0x23a763(_0x2ca45d-0x39e,_0x115255);}return this['options'][_0x3ac1dc(0x38c,0x403)];}set['maxAge'](_0x1c75fe){function _0x499fdf(_0x174f09,_0x420175){return _0x23a763(_0x420175- -0x9b,_0x174f09);}function _0x40cc8d(_0x4e1beb,_0x274374){return _0x23a763(_0x274374-0x45f,_0x4e1beb);}this[_0x40cc8d(0x51e,0x49e)][_0x499fdf(-0x11f,-0xad)]=_0x1c75fe,this[_0x40cc8d(0x512,0x494)]&&(this['windField']['maxAge']=_0x1c75fe);}get[_0x23a763(-0x21,-0x55)](){return this['windData'];}set['data'](_0x310b98){function _0xee0e7b(_0xcd6bdf,_0x43d657){return _0x23a763(_0xcd6bdf-0x5bd,_0x43d657);}this[_0xee0e7b(0x5c6,0x64f)](_0x310b98);}get['rectangle'](){let _0x5f15b5=this['windData']['xmin'];function _0x5b731f(_0x1c7ff8,_0x150a88){return _0x3b0072(_0x150a88- -0x3b,_0x1c7ff8);}let _0x4ff846=this['windData'][_0x59b60a(0x182,0x14c)],_0x1fd5de=this[_0x5b731f(0x592,0x587)][_0x5b731f(0x5a7,0x58a)],_0xffe531=this[_0x5b731f(0x5a2,0x587)]['ymax'];_0x4ff846>=0x167&&_0x5f15b5===0x0&&(_0x5f15b5=-0xb4,_0x4ff846=0xb4);function _0x59b60a(_0x246c17,_0x446eaf){return _0x23a763(_0x446eaf-0x162,_0x246c17);}return _0x5f15b5=Math[_0x5b731f(0x546,0x589)](_0x5f15b5,-0xb4),_0x4ff846=Math['min'](_0x4ff846,0xb4),_0x1fd5de=Math['max'](_0x1fd5de,-0x5a),_0xffe531=Math[_0x5b731f(0x4aa,0x4ff)](_0xffe531,0x5a),Cesium['Rectangle']['fromDegrees'](_0x5f15b5,_0x1fd5de,_0x4ff846,_0xffe531);}[_0x3b0072(0x5b4,0x626)](_0x19ee5a){function _0x2ffbf9(_0x5ee86e,_0x59d73e){return _0x23a763(_0x5ee86e- -0x27,_0x59d73e);}_0x19ee5a?this['_addedHook']():(this[_0x2ffbf9(0xaf,0x7d)]&&(this['options']['data']=this['windData']),this['_removedHook']());}[_0x3b0072(0x52e,0x5a2)](){function _0x5c4caa(_0x69b363,_0x124fca){return _0x3b0072(_0x124fca- -0x296,_0x69b363);}function _0x8fc2e5(_0x11d1a7,_0x16aee9){return _0x23a763(_0x16aee9-0x2a9,_0x11d1a7);}this[_0x8fc2e5(0x337,0x2e8)]['worker']?this[_0x5c4caa(0x2c1,0x2de)]():this['windField']=new CanvasWindField(this['options']);}['_addedHook'](){function _0x497f3c(_0x4e9c39,_0x5921de){return _0x3b0072(_0x5921de- -0x3d6,_0x4e9c39);}this['canvas']=this['_createCanvas']();const _0x4096d7={};_0x4096d7[_0x497f3c(0x1cc,0x194)]=!![],this['canvasContext']=this['canvas'][_0x32b4b3(0x467,0x446)]('2d',_0x4096d7);function _0x32b4b3(_0x37a590,_0x2c3c84){return _0x23a763(_0x2c3c84-0x3d0,_0x37a590);}this[_0x497f3c(0x14c,0x16e)](),this['options'][_0x497f3c(0x134,0xf5)]&&this[_0x497f3c(0x19b,0x11f)](this[_0x32b4b3(0x438,0x40f)]['data']);}[_0x23a763(0x4b,-0x16)](){function _0x54ee9b(_0x1b2b15,_0x21cf89){return _0x23a763(_0x21cf89-0xb1,_0x1b2b15);}this[_0x54ee9b(0xba,0x8a)]();function _0x6e26e3(_0x19984f,_0x242b36){return _0x3b0072(_0x19984f- -0x3b2,_0x242b36);}this['unbindEvent'](),this[_0x54ee9b(0x18e,0x16b)]&&(this[_0x54ee9b(0xf3,0x95)]['container'][_0x54ee9b(0x1a1,0x135)](this['canvas']),delete this[_0x6e26e3(0x1f4,0x1bd)]);}[_0x3b0072(0x54a,0x4fa)](){const _0x4bcc5c=mars3d__namespace['DomUtil']['create']('canvas',_0x35d445(0x126,0x12f),this[_0x35d445(0x100,0x10e)][_0x1c1bc6(0x55,0x65)]);_0x4bcc5c[_0x1c1bc6(0xb6,0x56)]['position']='absolute',_0x4bcc5c['style']['top']='0px';function _0x35d445(_0x5034f2,_0x435351){return _0x23a763(_0x435351-0x12a,_0x5034f2);}_0x4bcc5c['style']['left']=_0x35d445(0x195,0x161),_0x4bcc5c['style']['width']=this['_map'][_0x35d445(0x141,0x16d)]['canvas'][_0x1c1bc6(0x125,0xb0)]+'px',_0x4bcc5c['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x4bcc5c['style'][_0x35d445(0x176,0x1e1)]=this['_pointerEvents']?'auto':_0x35d445(0x16f,0x143);function _0x1c1bc6(_0x326490,_0x40c91c){return _0x3b0072(_0x326490- -0x48d,_0x40c91c);}return _0x4bcc5c[_0x35d445(0x1c2,0x181)]['zIndex']=this['options'][_0x35d445(0x10a,0x172)]??0x9,_0x4bcc5c[_0x35d445(0xf6,0x16b)]=this['_map']['scene'][_0x1c1bc6(0x119,0x102)]['clientWidth'],_0x4bcc5c[_0x35d445(0x193,0x110)]=this[_0x35d445(0x159,0x10e)]['scene'][_0x35d445(0x19a,0x1e4)][_0x35d445(0x14f,0x142)],_0x4bcc5c;}['resize'](){function _0x555bc3(_0x3bc243,_0x526439){return _0x23a763(_0x3bc243- -0x38,_0x526439);}function _0x458ee6(_0x2adad8,_0x1bdb91){return _0x3b0072(_0x2adad8- -0x300,_0x1bdb91);}this[_0x555bc3(0x82,0x41)]&&(this['canvas'][_0x458ee6(0x243,0x1fc)]['width']=this['_map'][_0x555bc3(0xb,0x5e)]['canvas'][_0x555bc3(0x8e,0xed)]+'px',this[_0x555bc3(0x82,0x71)][_0x458ee6(0x243,0x20c)]['height']=this['_map']['scene'][_0x458ee6(0x2a6,0x268)][_0x555bc3(-0x20,-0x48)]+'px',this['canvas'][_0x555bc3(0x9,-0x36)]=this[_0x458ee6(0x1d0,0x1de)][_0x555bc3(0xb,0x10)]['canvas'][_0x458ee6(0x2b2,0x2eb)],this['canvas']['height']=this[_0x555bc3(-0x54,-0xa3)]['scene'][_0x458ee6(0x2a6,0x230)]['clientHeight']);}[_0x23a763(0x58,0x2c)](){function _0x38b3f8(_0xb79cf5,_0x525748){return _0x3b0072(_0xb79cf5- -0x68c,_0x525748);}const _0x5a5f97=this;let _0x5e4b4a=Date['now']();(function _0x3ac078(){if(_0x5a5f97[_0x16e583(0x1c4,0x145)])return;_0x5a5f97['_animateFrame']=window[_0x33a138(0x3ad,0x3e0)](_0x3ac078);function _0x33a138(_0x3fb5ca,_0xb5252a){return _0x1034(_0x3fb5ca-0x151,_0xb5252a);}function _0x16e583(_0xfa3ee5,_0x181941){return _0x1034(_0x181941- -0xa0,_0xfa3ee5);}if(_0x5a5f97['show']&&_0x5a5f97['windField']){const _0x3f2db5=Date['now'](),_0x33502d=_0x3f2db5-_0x5e4b4a;_0x33502d>_0x5a5f97['frameTime']&&(_0x5e4b4a=_0x3f2db5-_0x33502d%_0x5a5f97['frameTime'],_0x5a5f97[_0x33a138(0x374,0x39b)]());}}(),window[_0x510a60(-0x75,-0x7e)]('resize',this['resize'][_0x38b3f8(-0xdf,-0x158)](this),![]),this['mouse_down']=![],this[_0x38b3f8(-0xe8,-0xea)]=![]);function _0x510a60(_0x146ec1,_0x23c4da){return _0x3b0072(_0x146ec1- -0x589,_0x23c4da);}this[_0x38b3f8(-0x161,-0x10c)]['mouseHidden']&&(this[_0x510a60(-0xb9,-0x32)]['on'](mars3d__namespace[_0x510a60(-0x44,-0x83)][_0x38b3f8(-0xc4,-0xe7)],this[_0x510a60(-0xce,-0x81)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x38b3f8(-0xdb,-0x162)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x510a60(-0x50,0x2f)],this['_onMouseUpEvent'],this));}['unbindEvent'](){window['cancelAnimationFrame'](this['_animateFrame']);function _0x4c5e67(_0x330b6b,_0x7c326b){return _0x23a763(_0x330b6b-0x58a,_0x7c326b);}function _0x145e86(_0x1e42ae,_0x3c60b8){return _0x23a763(_0x3c60b8-0xe3,_0x1e42ae);}delete this['_animateFrame'],window[_0x145e86(0x12a,0xf5)]('resize',this['resize']),this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace[_0x145e86(0x19e,0x13c)]['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace['EventType'][_0x145e86(0xde,0xcf)],this['_onMouseDownEvent'],this),this[_0x4c5e67(0x56e,0x583)][_0x145e86(0xe8,0x106)](mars3d__namespace['EventType']['mouseUp'],this[_0x4c5e67(0x5f4,0x577)],this),this['_map']['off'](mars3d__namespace[_0x145e86(0xcd,0x13c)]['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x22ca7b){function _0x1f86ab(_0x5d46cc,_0x78b7ee){return _0x3b0072(_0x5d46cc- -0x3f9,_0x78b7ee);}clearTimeout(this['refreshTimer']);if(!this[_0x1f86ab(0x131,0x186)]||!this['canvas'])return;function _0x1a9960(_0x4c6d1a,_0x25774e){return _0x3b0072(_0x25774e- -0x3fb,_0x4c6d1a);}this[_0x1f86ab(0x1ad,0x14b)]['style']['visibility']=_0x1f86ab(0x190,0x199),this['refreshTimer']=setTimeout(()=>{function _0x4e7c4b(_0x9182ce,_0x22b492){return _0x1a9960(_0x9182ce,_0x22b492-0x4a5);}if(!this['show'])return;function _0x5267cc(_0x379ff4,_0x409a2b){return _0x1f86ab(_0x379ff4-0xa6,_0x409a2b);}this['redraw'](),this[_0x5267cc(0x253,0x248)]['style'][_0x4e7c4b(0x640,0x625)]='visible';},0xc8);}['_onMouseDownEvent'](_0x393374){this['mouse_down']=!![],this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x31c2cb(0x56e,0x58f)],this);function _0x31c2cb(_0x2de756,_0x23edbd){return _0x23a763(_0x2de756-0x4ce,_0x23edbd);}function _0x3d959c(_0xc115cb,_0x37f677){return _0x23a763(_0xc115cb- -0x118,_0x37f677);}this[_0x3d959c(-0x134,-0x11b)]['on'](mars3d__namespace['EventType'][_0x31c2cb(0x582,0x608)],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x338a4b){function _0x515414(_0x44912b,_0x110529){return _0x3b0072(_0x110529- -0x537,_0x44912b);}if(!this[_0x2b16c5(-0x11f,-0xe0)]||!this[_0x2b16c5(-0x6e,-0x64)])return;function _0x2b16c5(_0x336256,_0x1391e6){return _0x3b0072(_0x1391e6- -0x60a,_0x336256);}this[_0x2b16c5(-0xcf,-0x6f)]&&(this['canvas'][_0x515414(0x88,0xc)]['visibility']=_0x2b16c5(-0x17,-0x81),this[_0x2b16c5(-0x9,-0x66)]=!![]);}['_onMouseUpEvent'](_0x4902b3){if(!this['show']||!this['canvas'])return;this[_0x22e786(0x7d,0x39)][_0x22e786(-0xd,0x78)](mars3d__namespace[_0x4224e9(-0x30,0x3)][_0x4224e9(-0x2a,0x5e)],this['_onMouseMoveEvent'],this);this['mouse_down']&&this['mouse_move']&&this['redraw']();this[_0x4224e9(0x1c,0x64)]['style']['visibility']=_0x22e786(0x2f,0x86),this[_0x4224e9(0x98,0x59)]=![];function _0x4224e9(_0x11b62f,_0x2c69d8){return _0x3b0072(_0x2c69d8- -0x542,_0x11b62f);}function _0x22e786(_0x559135,_0x39162f){return _0x23a763(_0x39162f-0x55,_0x559135);}this[_0x22e786(0x108,0x10d)]=![];}['setData'](_0x2a02cb){this['clear']();function _0x5f0deb(_0x14a36e,_0x4c360c){return _0x23a763(_0x4c360c-0x2d0,_0x14a36e);}this['windData']=_0x2a02cb;function _0x2ca7aa(_0x5b6039,_0x3237c7){return _0x23a763(_0x3237c7-0x58c,_0x5b6039);}this[_0x5f0deb(0x301,0x305)][_0x5f0deb(0x388,0x310)](_0x2a02cb),this['redraw']();}['redraw'](){function _0x410011(_0x326998,_0x260e57){return _0x23a763(_0x260e57-0x572,_0x326998);}if(!this[_0x410011(0x55f,0x5b0)])return;this['windField']['setOptions'](this['options']),this['update']();}['update'](){if(this[_0x1de3b1(0x1ba,0x197)])return;function _0x2e71ce(_0xf93a47,_0x5cd442){return _0x3b0072(_0xf93a47- -0x450,_0x5cd442);}this[_0x1de3b1(0x170,0x197)]=!![];function _0x1de3b1(_0x44b480,_0x36a61c){return _0x23a763(_0x36a61c-0xc3,_0x44b480);}if(this['worker'])this['windField'][_0x2e71ce(0xa7,0x8f)]();else{const _0x230e1b=this['windField'][_0x2e71ce(0x11b,0x174)]();this['_drawLines'](_0x230e1b);}this[_0x2e71ce(0x170,0x1b0)]=![];}[_0x3b0072(0x581,0x5f0)](_0x3f0998){this[_0x36feae(0x57a,0x5e9)]=_0x3f0998;function _0xad2de6(_0x1c0f04,_0x2033f5){return _0x3b0072(_0x2033f5- -0x1de,_0x1c0f04);}function _0x36feae(_0x3da550,_0x53b4b0){return _0x23a763(_0x53b4b0-0x564,_0x3da550);}this['canvasContext']['globalCompositeOperation']=_0x36feae(0x556,0x53e),this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext']['globalCompositeOperation']='lighter',this['canvasContext']['globalAlpha']=0.9;const _0x258e37=this[_0xad2de6(0x2fe,0x2f2)][_0xad2de6(0x2fb,0x351)][_0x36feae(0x631,0x611)]!==Cesium['SceneMode']['SCENE3D'],_0x4c6939=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x3321bc=0x0,_0xa44bf1=_0x3f0998[_0x36feae(0x616,0x614)];_0x3321bc<_0xa44bf1;_0x3321bc++){const _0x201cb2=_0x3f0998[_0x3321bc],_0x8f734c=this['_tomap'](_0x201cb2,_0x201cb2['lng'],_0x201cb2['lat'],_0x201cb2['alt']),_0x1a9e71=this['_tomap'](_0x201cb2,_0x201cb2['tlng'],_0x201cb2[_0xad2de6(0x3c6,0x389)],_0x201cb2['talt']);if(!_0x8f734c||!_0x1a9e71)continue;if(_0x258e37&&Math[_0x36feae(0x5c5,0x5c5)](_0x8f734c[0x0]-_0x1a9e71[0x0])>=_0x4c6939)continue;this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x36feae(0x525,0x56e)]['strokeStyle']=this['_colorRamp']['getColor'](_0x201cb2[_0x36feae(0x4fc,0x57e)]),this[_0x36feae(0x53b,0x56e)]['moveTo'](_0x8f734c[0x0],_0x8f734c[0x1]),this[_0x36feae(0x4ea,0x56e)]['lineTo'](_0x1a9e71[0x0],_0x1a9e71[0x1]),this['canvasContext'][_0x36feae(0x59a,0x5b0)]();}else{this[_0xad2de6(0x29b,0x318)]['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x36feae(0x5b2,0x56e)][_0xad2de6(0x2a7,0x30f)]=this[_0x36feae(0x564,0x568)];for(let _0x297008=0x0,_0x26a3a7=_0x3f0998['length'];_0x297008<_0x26a3a7;_0x297008++){const _0x17b88a=_0x3f0998[_0x297008],_0x37880e=this['_tomap'](_0x17b88a,_0x17b88a['lng'],_0x17b88a[_0x36feae(0x6a3,0x639)],_0x17b88a[_0xad2de6(0x3d9,0x38f)]),_0x3fb5d2=this['_tomap'](_0x17b88a,_0x17b88a['tlng'],_0x17b88a['tlat'],_0x17b88a['talt']);if(!_0x37880e||!_0x3fb5d2)continue;if(_0x258e37&&Math[_0x36feae(0x555,0x5c5)](_0x37880e[0x0]-_0x3fb5d2[0x0])>=_0x4c6939)continue;this['canvasContext']['moveTo'](_0x37880e[0x0],_0x37880e[0x1]),this['canvasContext']['lineTo'](_0x3fb5d2[0x0],_0x3fb5d2[0x1]);}this[_0xad2de6(0x349,0x318)]['stroke']();}}['_tomap'](_0x349c80,_0x1b1427,_0x117ad6,_0xa5f5fa){const _0x11f627=Cesium['Cartesian3']['fromDegrees'](_0x1b1427,_0x117ad6,_0xa5f5fa??this['fixedHeight']),_0x176c0b=this['_map']['scene'];if(_0x176c0b[_0x67351c(0x47f,0x429)]===Cesium['SceneMode']['SCENE3D']){const _0x588f0e=new Cesium[(_0x67351c(0x450,0x427))](_0x176c0b['globe']['ellipsoid'],_0x176c0b['camera'][_0x39f911(0x474,0x4bb)]),_0x1a6d8c=_0x588f0e[_0x67351c(0x393,0x353)](_0x11f627);if(!_0x1a6d8c)return _0x349c80['age']=0x0,null;}const _0x571e94=mars3d__namespace[_0x67351c(0x3e4,0x392)]['toWindowCoordinates'](this['_map']['scene'],_0x11f627);function _0x67351c(_0x427ac9,_0x41f635){return _0x23a763(_0x41f635-0x37c,_0x427ac9);}function _0x39f911(_0x32cff2,_0x4fedea){return _0x23a763(_0x4fedea-0x40a,_0x32cff2);}return _0x571e94?[_0x571e94['x'],_0x571e94['y']]:null;}[_0x3b0072(0x4c5,0x4e9)](){this['windField']['clear'](),delete this['windData'];}[_0x3b0072(0x574,0x531)](){this[_0x118a8e(0x58,0x3b)]=new Worker(this['options']['worker']);function _0x118a8e(_0x1197b2,_0x5149a5){return _0x23a763(_0x1197b2-0x85,_0x5149a5);}this[_0x118a8e(0x58,0x2c)][_0x118a8e(0x118,0x9e)]=_0x5d1505=>{this['_drawLines'](_0x5d1505[_0x1fabb3(0x9e,0x91)][_0x4f20b7(0x30f,0x367)]);function _0x4f20b7(_0x2426f0,_0x5c3713){return _0x118a8e(_0x2426f0-0x254,_0x5c3713);}function _0x1fabb3(_0x28c8bc,_0x406af6){return _0x118a8e(_0x406af6-0x2d,_0x28c8bc);}this[_0x1fabb3(0x1ac,0x15c)]=![];};function _0x3210cf(_0x495c41,_0x4e6336){return _0x23a763(_0x4e6336- -0x58,_0x495c41);}this['windField']={'init':_0x4e7249=>{function _0x6172d1(_0x1055ca,_0x2f9f3d){return _0x3210cf(_0x1055ca,_0x2f9f3d-0x63a);}const _0x6b2536={};function _0x3262a3(_0x512463,_0x4cfc75){return _0x118a8e(_0x512463-0x169,_0x4cfc75);}_0x6b2536['type']=_0x6172d1(0x666,0x67b),_0x6b2536[_0x3262a3(0x22d,0x1fa)]=_0x4e7249,this[_0x6172d1(0x5ec,0x5b5)][_0x6172d1(0x60a,0x5e8)](_0x6b2536);},'setOptions':_0x5764df=>{function _0x15c1fe(_0x3b6bbf,_0x1bc576){return _0x118a8e(_0x1bc576-0x3db,_0x3b6bbf);}const _0x19130e={};_0x19130e['type']='setOptions',_0x19130e['options']=_0x5764df,this['worker'][_0x15c1fe(0x410,0x466)](_0x19130e);},'setDate':_0x71f758=>{function _0xc09a29(_0x3c9d42,_0x504650){return _0x118a8e(_0x3c9d42-0x4bc,_0x504650);}const _0xadc4c4={};_0xadc4c4['type']='setDate';function _0x318fcc(_0x23b6ce,_0x303d46){return _0x118a8e(_0x303d46-0x9,_0x23b6ce);}_0xadc4c4[_0xc09a29(0x520,0x570)]=_0x71f758,this[_0x318fcc(0x12,0x61)][_0xc09a29(0x547,0x539)](_0xadc4c4);},'update':()=>{if(this[_0x319148(0xbb,0xde)])return;function _0x319148(_0x1a54b1,_0xd2d680){return _0x118a8e(_0x1a54b1- -0x74,_0xd2d680);}function _0x46c941(_0x31c317,_0x51d074){return _0x118a8e(_0x51d074-0xa9,_0x31c317);}this['_updateIng2']=!![];const _0x29ebae={};_0x29ebae[_0x319148(0x7e,0x70)]=_0x319148(0x1c,-0x68),this[_0x46c941(0x165,0x101)][_0x319148(0x17,0x28)](_0x29ebae);},'clear':()=>{function _0x242cb9(_0x17a6f7,_0x34a283){return _0x118a8e(_0x34a283-0xdb,_0x17a6f7);}const _0x247e32={};_0x247e32[_0x3667e7(0x52d,0x4fb)]='clear';function _0x3667e7(_0x30d7f9,_0x571491){return _0x118a8e(_0x571491-0x409,_0x30d7f9);}this[_0x3667e7(0x4dc,0x461)]['postMessage'](_0x247e32);}},this[_0x3210cf(0x3,-0x23)]['init'](this['options']);}}mars3d__namespace['LayerUtil'][_0x3b0072(0x53f,0x4c1)]('canvasWind',CanvasWindLayer),mars3d__namespace[_0x23a763(0x27,0x95)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports[_0x23a763(-0x6,-0x52)]=CanvasWindField,exports[_0x23a763(0x9e,0x122)]=CanvasWindLayer,exports[_0x3b0072(0x4f3,0x4ff)]=WindLayer,exports[_0x3b0072(0x566,0x5ac)]=WindUtil;const _0x3dac85={};_0x3dac85['value']=!![],Object['defineProperty'](exports,'__esModule',_0x3dac85);
}));
