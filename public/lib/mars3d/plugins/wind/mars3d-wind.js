/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.7
 * 编译日期：2025-10-25 17:33
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x278998,_0x3645bc){function _0x4855d2(_0x1fc5af,_0x34dd92){return _0x1086(_0x1fc5af-0x22e,_0x34dd92);}function _0x3d1d38(_0x4eb689,_0x338f0a){return _0x1086(_0x4eb689-0x18d,_0x338f0a);}const _0x3d5be3=_0x278998();while(!![]){try{const _0x4efdb9=-parseInt(_0x4855d2(0x36d,0x399))/0x1+-parseInt(_0x4855d2(0x3a7,0x319))/0x2*(parseInt(_0x3d1d38(0x3d9,0x383))/0x3)+-parseInt(_0x4855d2(0x3c5,0x40f))/0x4+-parseInt(_0x4855d2(0x444,0x3cf))/0x5+parseInt(_0x3d1d38(0x346,0x34e))/0x6*(-parseInt(_0x3d1d38(0x391,0x3cf))/0x7)+parseInt(_0x3d1d38(0x3d0,0x3dc))/0x8+parseInt(_0x4855d2(0x46a,0x445))/0x9;if(_0x4efdb9===_0x3645bc)break;else _0x3d5be3['push'](_0x3d5be3['shift']());}catch(_0x117678){_0x3d5be3['push'](_0x3d5be3['shift']());}}}(_0x438c,0x3df80));function _interopNamespace(_0x31394d){if(_0x31394d&&_0x31394d['__esModule'])return _0x31394d;var _0x2e6290=Object['create'](null);return _0x31394d&&Object['keys'](_0x31394d)['forEach'](function(_0x1c06b0){function _0xfad698(_0x149011,_0x1c583d){return _0x1086(_0x1c583d-0xdd,_0x149011);}if(_0x1c06b0!=='default'){var _0x202290=Object[_0xfad698(0x254,0x2db)](_0x31394d,_0x1c06b0);Object['defineProperty'](_0x2e6290,_0x1c06b0,_0x202290['get']?_0x202290:{'enumerable':!![],'get':function(){return _0x31394d[_0x1c06b0];}});}}),_0x2e6290['default']=_0x31394d,_0x2e6290;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0xfb3980,_0x417242){const _0xf48625=_0xfb3980*Math['cos'](Cesium$2['Math']['toRadians'](_0x417242));return _0xf48625;}function _0x1086(_0x20967d,_0x5be960){const _0x438c7d=_0x438c();return _0x1086=function(_0x108600,_0x4f60b3){_0x108600=_0x108600-0x13b;let _0x267f8f=_0x438c7d[_0x108600];return _0x267f8f;},_0x1086(_0x20967d,_0x5be960);}function getV(_0x470691,_0x1a9afc){const _0x4a32f0=_0x470691*Math['sin'](Cesium$2['Math']['toRadians'](_0x1a9afc));return _0x4a32f0;}function getSpeed(_0x5ee4fa,_0x2fa5a3){const _0x2269bb=Math[_0xefb863(-0x1ba,-0x184)](Math['pow'](_0x5ee4fa,0x2)+Math['pow'](_0x2fa5a3,0x2));function _0xefb863(_0x4d3aab,_0x7583d5){return _0x1086(_0x4d3aab- -0x32d,_0x7583d5);}return _0x2269bb;}function getDirection(_0xe70512,_0x202627){function _0x1946a0(_0x3435fd,_0x2ccbc5){return _0x1086(_0x2ccbc5-0x1,_0x3435fd);}let _0x578216=Cesium$2[_0x5de524(0xf,0x1d)][_0x1946a0(0x1b3,0x18e)](Math['atan2'](_0x202627,_0xe70512));_0x578216+=_0x578216<0x0?0x168:0x0;function _0x5de524(_0x5cd0c6,_0x65d9d0){return _0x1086(_0x65d9d0- -0x20d,_0x5cd0c6);}return _0x578216;}const _0x24798f={};_0x24798f['__proto__']=null,_0x24798f['getU']=getU,_0x24798f['getV']=getV,_0x24798f['getSpeed']=getSpeed,_0x24798f[_0x438df2(0x255,0x1e1)]=getDirection;var WindUtil=_0x24798f,updatePositionShader=_0x438df2(0x218,0x238),calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader=_0x438df2(0x261,0x281),renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader=_0x438df2(0x2b9,0x22c);const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0x438df2(0x315,0x28b)](){const _0x45c7fa={};_0x45c7fa[_0x90b00f(0xcc,0xf7)]=[calculateSpeedShader];function _0x90b00f(_0x422f4c,_0x381424){return _0x438df2(_0x381424,_0x422f4c- -0xe8);}return new ShaderSource$1(_0x45c7fa);}static[_0x438df2(0x252,0x252)](){const _0x2cc161={};return _0x2cc161['sources']=[updatePositionShader],new ShaderSource$1(_0x2cc161);}static['getSegmentDrawVertexShader'](){function _0x47e17a(_0x4d69b3,_0x12993a){return _0x438df2(_0x4d69b3,_0x12993a- -0x24d);}const _0x428b41={};return _0x428b41[_0x47e17a(-0x10d,-0x99)]=[renderParticlesVertexShader],new ShaderSource$1(_0x428b41);}static['getSegmentDrawFragmentShader'](){const _0x49896e={};return _0x49896e['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x49896e);}static['getPostProcessingPositionShader'](){const _0x4cf3b2={};return _0x4cf3b2['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x4cf3b2);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x3bf77e){this['commandType']=_0x3bf77e['commandType'],this['geometry']=_0x3bf77e[_0xe0b0fe(0x497,0x46c)],this['attributeLocations']=_0x3bf77e['attributeLocations'];function _0x24f638(_0x49eadf,_0x52bab4){return _0x438df2(_0x52bab4,_0x49eadf-0x2d0);}this[_0x24f638(0x4bb,0x485)]=_0x3bf77e['primitiveType'],this[_0x24f638(0x485,0x4c5)]=_0x3bf77e[_0x24f638(0x485,0x43f)]||{},this[_0xe0b0fe(0x567,0x519)]=_0x3bf77e['vertexShaderSource'],this['fragmentShaderSource']=_0x3bf77e[_0xe0b0fe(0x4b9,0x50b)],this['rawRenderState']=_0x3bf77e[_0xe0b0fe(0x466,0x47e)];function _0xe0b0fe(_0x23f6cd,_0x64f2a5){return _0x438df2(_0x23f6cd,_0x64f2a5-0x270);}this['framebuffer']=_0x3bf77e[_0xe0b0fe(0x4cc,0x520)],this['outputTexture']=_0x3bf77e[_0xe0b0fe(0x4ff,0x4b8)],this[_0x24f638(0x4b5,0x457)]=_0x3bf77e['autoClear']??![],this['preExecute']=_0x3bf77e[_0x24f638(0x4e6,0x52a)],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this[_0xe0b0fe(0x4e9,0x4dc)]=_0x3bf77e['isDynamic']??(()=>!![]),this[_0x24f638(0x4b5,0x525)]&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1[_0xe0b0fe(0x508,0x4bc)]}));}['createCommand'](_0x18baf0){function _0x4bea7e(_0x5bad47,_0x219680){return _0x202b54(_0x5bad47- -0x26f,_0x219680);}function _0x8717b1(_0x533a01,_0x42098d){return _0x202b54(_0x42098d-0x20c,_0x533a01);}if(this[_0x8717b1(0x2cc,0x32c)]==='Draw'){const _0x1f510d={};_0x1f510d['context']=_0x18baf0,_0x1f510d['geometry']=this['geometry'],_0x1f510d[_0x4bea7e(-0x101,-0x118)]=this[_0x8717b1(0x3ed,0x37a)],_0x1f510d['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x62e3f1=VertexArray$1[_0x4bea7e(-0x16d,-0x1fb)](_0x1f510d),_0x37d0e8={};_0x37d0e8['context']=_0x18baf0,_0x37d0e8[_0x8717b1(0x420,0x416)]=this['vertexShaderSource'],_0x37d0e8[_0x8717b1(0x425,0x408)]=this['fragmentShaderSource'],_0x37d0e8['attributeLocations']=this['attributeLocations'];const _0x30c6dd=ShaderProgram['fromCache'](_0x37d0e8),_0x31b143=RenderState['fromCache'](this['rawRenderState']),_0x574a5f={};return _0x574a5f[_0x8717b1(0x2b9,0x312)]=this,_0x574a5f['vertexArray']=_0x62e3f1,_0x574a5f['primitiveType']=this['primitiveType'],_0x574a5f['modelMatrix']=Matrix4['IDENTITY'],_0x574a5f[_0x8717b1(0x2ef,0x316)]=_0x31b143,_0x574a5f[_0x8717b1(0x304,0x377)]=_0x30c6dd,_0x574a5f['framebuffer']=this['framebuffer'],_0x574a5f['uniformMap']=this['uniformMap'],_0x574a5f['pass']=Pass$1[_0x4bea7e(-0xc2,-0xfc)],new DrawCommand(_0x574a5f);}else{if(this[_0x4bea7e(-0x14f,-0xec)]===_0x4bea7e(-0x12b,-0xb3)){const _0x99543a={};return _0x99543a[_0x4bea7e(-0x169,-0x10f)]=this,_0x99543a['fragmentShaderSource']=this[_0x4bea7e(-0x73,-0x38)],_0x99543a[_0x4bea7e(-0x159,-0xd1)]=this['uniformMap'],_0x99543a['outputTexture']=this['outputTexture'],_0x99543a['persists']=!![],new ComputeCommand(_0x99543a);}else throw new Error(_0x4bea7e(-0xec,-0xd6));}}['setGeometry'](_0x20266b,_0x14c912){function _0x286eaa(_0x5d7dee,_0x15efa1){return _0x202b54(_0x5d7dee- -0xbd,_0x15efa1);}this['geometry']=_0x14c912;function _0x4aa1b6(_0x4a5359,_0xa19bde){return _0x202b54(_0x4a5359- -0x19e,_0xa19bde);}defined(this['commandToExecute'])&&(this[_0x286eaa(0xd6,0x90)][_0x4aa1b6(0x8,-0x2f)]=VertexArray$1['fromGeometry']({'context':_0x20266b,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}[_0x202b54(0x13c,0x18e)](_0x4bf051){if(!this[_0x9ea01c(0x316,0x32a)]())return;if(!this['show']||!defined(_0x4bf051))return;!defined(this['commandToExecute'])&&(this[_0x9ea01c(0x335,0x2f0)]=this['createCommand'](_0x4bf051[_0x9ea01c(0x3b3,0x364)]));defined(this[_0x46e6f0(-0x14e,-0x1c7)])&&this[_0x9ea01c(0x320,0x2d4)]();if(!_0x4bf051['commandList']){console['warn']('frameState.commandList\x20is\x20undefined');return;}function _0x46e6f0(_0x5065de,_0x569556){return _0x438df2(_0x5065de,_0x569556- -0x3dd);}defined(this['clearCommand'])&&_0x4bf051[_0x9ea01c(0x30c,0x285)][_0x46e6f0(-0x258,-0x206)](this['clearCommand']);function _0x9ea01c(_0x1686e1,_0x49806d){return _0x438df2(_0x1686e1,_0x49806d-0xbe);}defined(this['commandToExecute'])&&_0x4bf051[_0x46e6f0(-0x260,-0x216)]['push'](this['commandToExecute']);}['isDestroyed'](){return![];}[_0x438df2(0x253,0x2a1)](){function _0x34702e(_0x2cca20,_0x2e0409){return _0x438df2(_0x2cca20,_0x2e0409- -0x11d);}if(defined(this['commandToExecute'])){var _0x54ae29;(_0x54ae29=this['commandToExecute']['shaderProgram'])===null||_0x54ae29===void 0x0||_0x54ae29['destroy'](),this['commandToExecute'][_0x34702e(0xc1,0xed)]=undefined;}return destroyObject(this);}}function deepMerge(_0x1b80dd,_0x53cc65){if(!_0x1b80dd)return _0x53cc65;if(!_0x53cc65)return _0x1b80dd;const _0x25f3d7={..._0x53cc65},_0x17ba1d=_0x25f3d7;for(const _0x15578c in _0x1b80dd){if(Object['prototype']['hasOwnProperty'][_0x47c2f3(0x19,0x25)](_0x1b80dd,_0x15578c)){const _0x1d9b2d=_0x1b80dd[_0x15578c],_0x462a19=_0x53cc65[_0x15578c];if(Array['isArray'](_0x1d9b2d)){_0x17ba1d[_0x15578c]=_0x1d9b2d['slice']();continue;}if(_0x1d9b2d&&typeof _0x1d9b2d==='object'){_0x17ba1d[_0x15578c]=deepMerge(_0x1d9b2d,_0x462a19||{});continue;}_0x1d9b2d!==undefined&&(_0x17ba1d[_0x15578c]=_0x1d9b2d);}}function _0x47c2f3(_0xfbf0a4,_0x26d701){return _0x438df2(_0x26d701,_0xfbf0a4- -0x26e);}return _0x17ba1d;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x28706a,_0x3e772f,_0xf0087b,_0x6cd62c,_0x44a057){this['context']=_0x28706a,this[_0x1f716e(0x364,0x307)]=_0xf0087b,this[_0x326ba9(0xa9,0x20)]=_0x6cd62c,this['windData']=_0x3e772f,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0x18954a={};_0x18954a['scene']=_0x44a057;function _0x1f716e(_0x4333b5,_0x1add39){return _0x438df2(_0x4333b5,_0x1add39-0x170);}_0x18954a[_0x1f716e(0x32b,0x331)]=0x1,_0x18954a['quietPeriod']=0x0,this[_0x326ba9(0xba,0xa6)]=new FrameRateMonitor(_0x18954a),this['initFrameRate']();function _0x326ba9(_0x5baf2a,_0x55ddec){return _0x202b54(_0x5baf2a- -0x131,_0x55ddec);}this[_0x326ba9(0x8e,0xa9)](),this[_0x1f716e(0x421,0x3f6)](),this['createComputingPrimitives']();}[_0x202b54(0x1ab,0x180)](){const _0x132348=()=>{function _0x49da23(_0xb2b6cd,_0x236eb3){return _0x1086(_0xb2b6cd- -0x3a2,_0x236eb3);}function _0x53f632(_0x1df7f3,_0x4c0d3f){return _0x1086(_0x1df7f3-0x161,_0x4c0d3f);}this['frameRateMonitor']['lastFramesPerSecond']>0x14&&(this[_0x53f632(0x2f2,0x2f7)]=this['frameRateMonitor']['lastFramesPerSecond'],this[_0x49da23(-0x241,-0x1bf)]=0x3c/Math['max'](this['frameRate'],0x1));};_0x132348();const _0x348b13=setInterval(_0x132348,0x3e8),_0x5a9c36=this['destroy']['bind'](this);this['destroy']=()=>{clearInterval(_0x348b13),_0x5a9c36();};}['createWindTextures'](){function _0x4799fc(_0x2a5384,_0x4d9ba7){return _0x438df2(_0x2a5384,_0x4d9ba7- -0x1bf);}const _0x24ad2a={};_0x24ad2a[_0x4f2234(0x40c,0x37e)]=TextureMinificationFilter$1['LINEAR'],_0x24ad2a[_0x4799fc(-0x33,0x36)]=TextureMagnificationFilter$1['LINEAR'];const _0x461edb={'context':this['context'],'width':this[_0x4f2234(0x396,0x338)][_0x4f2234(0x30c,0x32b)],'height':this['windData'][_0x4799fc(0xa6,0xd5)],'pixelFormat':PixelFormat$1[_0x4799fc(0x77,0xbf)],'pixelDatatype':PixelDatatype$1[_0x4799fc(-0x37,0x2d)],'flipY':this[_0x4f2234(0x246,0x2bc)]['flipY']??![],'sampler':new Sampler$1(_0x24ad2a)};function _0x4f2234(_0x39c135,_0x5ebda7){return _0x438df2(_0x39c135,_0x5ebda7-0x125);}this[_0x4799fc(0x3,0x35)]={'U':new Texture$1({..._0x461edb,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x461edb,'source':{'arrayBufferView':new Float32Array(this['windData']['v'][_0x4f2234(0x2e8,0x342)])}})};}['createParticlesTextures'](){function _0x33fba2(_0x1d7a81,_0x157984){return _0x202b54(_0x157984- -0x297,_0x1d7a81);}const _0xa09780={};function _0x407d16(_0x5c319a,_0x3a20c4){return _0x438df2(_0x5c319a,_0x3a20c4- -0x92);}_0xa09780[_0x407d16(0x221,0x1c7)]=TextureMinificationFilter$1[_0x33fba2(-0xb0,-0xf2)],_0xa09780['magnificationFilter']=TextureMagnificationFilter$1[_0x33fba2(-0x6a,-0xf2)];const _0x2de2a2={'context':this[_0x407d16(0x1a1,0x214)],'width':this[_0x33fba2(-0x218,-0x19f)]['particlesTextureSize'],'height':this[_0x407d16(0x190,0x105)]['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x33fba2(-0x140,-0x19f)][_0x407d16(0x1a2,0x12b)]*this[_0x407d16(0xa2,0x105)]['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0xa09780)};this[_0x33fba2(-0x5a,-0x8c)]={'previousParticlesPosition':new Texture$1(_0x2de2a2),'currentParticlesPosition':new Texture$1(_0x2de2a2),'nextParticlesPosition':new Texture$1(_0x2de2a2),'postProcessingPosition':new Texture$1(_0x2de2a2),'particlesSpeed':new Texture$1(_0x2de2a2)};}['destroyParticlesTextures'](){function _0x2bc731(_0x5cf13b,_0x34de7f){return _0x438df2(_0x34de7f,_0x5cf13b-0x3b);}Object[_0x2bc731(0x2b8,0x26b)](this['particlesTextures'])['forEach'](_0x306662=>_0x306662['destroy']());}['createComputingPrimitives'](){function _0xbc3ac0(_0x3ecb7c,_0x3d9269){return _0x202b54(_0x3ecb7c-0xc6,_0x3d9269);}function _0xeac7eb(_0x5ed570,_0x18166a){return _0x202b54(_0x5ed570-0x2ec,_0x18166a);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0xbc3ac0(0x20a,0x195),'uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u']['min'],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this[_0xeac7eb(0x460,0x46e)]['v'][_0xeac7eb(0x3f9,0x3ec)],this[_0xbc3ac0(0x23a,0x2b4)]['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData'][_0xeac7eb(0x4f4,0x4d0)]['min'],this[_0xbc3ac0(0x23a,0x218)]['speed']['max']),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0xb799dd(_0x50a7e9,_0xefb41){return _0xeac7eb(_0x50a7e9- -0x3ba,_0xefb41);}function _0x51b70d(_0x373885,_0x3393d9){return _0xeac7eb(_0x373885- -0x44f,_0x3393d9);}return(this['viewerParameters'][_0xb799dd(0x5c,0xe8)]+0x32)*this[_0x51b70d(-0x6b,0x18)][_0x51b70d(0x4f,-0x7)];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this[_0xbc3ac0(0x23a,0x221)][_0xbc3ac0(0x22d,0x27f)],this[_0xbc3ac0(0x23a,0x267)][_0xeac7eb(0x4e1,0x4d8)]),'minimum':()=>new Cartesian2$1(this['windData'][_0xeac7eb(0x4f9,0x555)]['west'],this[_0xeac7eb(0x460,0x402)]['bounds'][_0xeac7eb(0x48d,0x476)]),'maximum':()=>new Cartesian2$1(this[_0xbc3ac0(0x23a,0x1f1)]['bounds']['east'],this['windData'][_0xeac7eb(0x4f9,0x4af)]['north'])},'fragmentShaderSource':ShaderManager[_0xbc3ac0(0x2b2,0x2d7)](),'outputTexture':this[_0xbc3ac0(0x2d1,0x271)][_0xbc3ac0(0x21e,0x29a)],'preExecute':()=>{const _0x4d70d7=this[_0x217cbd(0x4c3,0x441)][_0x217cbd(0x36a,0x375)];this['particlesTextures']['previousParticlesPosition']=this['particlesTextures']['currentParticlesPosition'],this[_0x4a6923(0x60f,0x5b6)]['currentParticlesPosition']=this[_0x217cbd(0x457,0x441)][_0x217cbd(0x32e,0x39a)];function _0x217cbd(_0xd63446,_0x2d139a){return _0xeac7eb(_0x2d139a- -0xb6,_0xd63446);}this['particlesTextures']['postProcessingPosition']=_0x4d70d7;function _0x4a6923(_0x157c49,_0x102fab){return _0xeac7eb(_0x102fab-0xbf,_0x157c49);}this['primitives'][_0x217cbd(0x44c,0x417)][_0x217cbd(0x399,0x3c9)]&&(this[_0x4a6923(0x5d2,0x584)]['calculateSpeed'][_0x217cbd(0x406,0x3c9)][_0x217cbd(0x468,0x3df)]=this['particlesTextures'][_0x4a6923(0x58b,0x503)]);},'isDynamic':()=>this['options'][_0xeac7eb(0x493,0x479)]}),'updatePosition':new CustomPrimitive({'commandType':_0xeac7eb(0x430,0x485),'uniformMap':{'currentParticlesPosition':()=>this[_0xbc3ac0(0x2d1,0x295)]['currentParticlesPosition'],'particlesSpeed':()=>this[_0xeac7eb(0x4f7,0x4fb)]['particlesSpeed']},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x109283(_0x54e92f,_0x2a5e38){return _0xbc3ac0(_0x54e92f- -0x3a7,_0x2a5e38);}function _0x5e9301(_0x25a268,_0x136aac){return _0xeac7eb(_0x136aac- -0x58c,_0x25a268);}this['primitives'][_0x109283(-0x112,-0x198)]['commandToExecute']&&(this['primitives'][_0x5e9301(-0x158,-0xd1)][_0x5e9301(-0x171,-0x10d)]['outputTexture']=this['particlesTextures']['nextParticlesPosition']);},'isDynamic':()=>this[_0xeac7eb(0x3e4,0x358)][_0xeac7eb(0x493,0x501)]}),'postProcessingPosition':new CustomPrimitive({'commandType':_0xbc3ac0(0x20a,0x206),'uniformMap':{'nextParticlesPosition':()=>this[_0xbc3ac0(0x2d1,0x334)]['nextParticlesPosition'],'particlesSpeed':()=>this[_0xbc3ac0(0x2d1,0x260)]['particlesSpeed'],'lonRange':()=>this[_0xeac7eb(0x4c6,0x50b)]['lonRange'],'latRange':()=>this[_0xeac7eb(0x4c6,0x4d4)]['latRange'],'dataLonRange':()=>new Cartesian2$1(this[_0xeac7eb(0x460,0x4a4)]['bounds']['west'],this[_0xbc3ac0(0x23a,0x205)][_0xbc3ac0(0x2d3,0x2ab)][_0xbc3ac0(0x256,0x284)]),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds']['south'],this['windData']['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager[_0xeac7eb(0x472,0x429)](),'outputTexture':this['particlesTextures'][_0xeac7eb(0x450,0x3e7)],'preExecute':()=>{function _0x471455(_0x4c07c9,_0x5a4b10){return _0xeac7eb(_0x4c07c9- -0x3ab,_0x5a4b10);}function _0x31a876(_0x493be6,_0x5cb15a){return _0xbc3ac0(_0x493be6-0x258,_0x5cb15a);}this[_0x31a876(0x4f7,0x519)][_0x471455(0xa5,0x21)]['commandToExecute']&&(this['primitives']['postProcessingPosition'][_0x31a876(0x4b1,0x468)]['outputTexture']=this['particlesTextures'][_0x471455(0xa5,0xc9)]);},'isDynamic':()=>this[_0xeac7eb(0x3e4,0x439)][_0xeac7eb(0x493,0x4bb)]})};}['reCreateWindTextures'](){function _0x1e1fd3(_0x5e9535,_0x1c85e1){return _0x202b54(_0x5e9535-0x3d7,_0x1c85e1);}this['windTextures']['U'][_0x1e1fd3(0x5d9,0x5a4)](),this[_0x188ffe(-0x1e3,-0x268)]['V']['destroy']();function _0x188ffe(_0xc8ff70,_0x754511){return _0x438df2(_0x754511,_0xc8ff70- -0x3d7);}this[_0x188ffe(-0x179,-0x156)]();}[_0x438df2(0x282,0x277)](_0x485a9d){this['windData']=_0x485a9d,this['reCreateWindTextures']();}[_0x438df2(0x22b,0x218)](_0x19e2d5){function _0x3e5b7f(_0x297b5b,_0x354313){return _0x202b54(_0x297b5b-0x0,_0x354313);}const _0x2ec3ae=_0x19e2d5[_0x307972(0x1d7,0x221)]!==undefined&&_0x19e2d5['flipY']!==this[_0x307972(0x1bf,0x18d)]['flipY'];function _0x307972(_0x574012,_0x3297db){return _0x202b54(_0x574012-0xc7,_0x3297db);}this[_0x307972(0x1bf,0x14b)]=deepMerge(_0x19e2d5,this[_0x3e5b7f(0xf8,0xd2)]),_0x2ec3ae&&this[_0x307972(0x217,0x1d0)]();}['processWindData'](_0x4b81a8){const {array:_0x256873}=_0x4b81a8;let {min:_0x74b6c4,max:_0x143b41}=_0x4b81a8;function _0x8e68b4(_0x3217c4,_0x114bb6){return _0x438df2(_0x3217c4,_0x114bb6-0x2d5);}const _0x2f967d=new Float32Array(_0x256873['length']);_0x74b6c4===undefined&&(console[_0x8e68b4(0x4bf,0x4e6)]('min\x20is\x20undefined,\x20calculate\x20min'),_0x74b6c4=Math['min'](..._0x256873));_0x143b41===undefined&&(console['warn'](_0x265c39(0x346,0x2d4)),_0x143b41=Math[_0x265c39(0x255,0x29c)](..._0x256873));const _0x5d478e=Math['max'](Math[_0x265c39(0x2fb,0x285)](_0x74b6c4),Math[_0x265c39(0x20a,0x285)](_0x143b41));for(let _0x583630=0x0;_0x583630<_0x256873[_0x8e68b4(0x44f,0x4da)];_0x583630++){const _0x13cd3b=_0x256873[_0x583630]/_0x5d478e;_0x2f967d[_0x583630]=_0x13cd3b;}function _0x265c39(_0xb4c42d,_0x45a1f0){return _0x202b54(_0x45a1f0-0x15f,_0xb4c42d);}return _0x2f967d;}['destroy'](){Object['values'](this['windTextures'])['forEach'](_0x3d4abc=>_0x3d4abc[_0x210a00(0x479,0x4ee)]());function _0xc7cbe2(_0x462e36,_0x2b7f45){return _0x438df2(_0x2b7f45,_0x462e36- -0x2b3);}function _0x210a00(_0x43519f,_0x1cffda){return _0x202b54(_0x43519f-0x277,_0x1cffda);}Object[_0xc7cbe2(-0x36,-0x4a)](this[_0xc7cbe2(-0x9,-0x13)])[_0x210a00(0x483,0x40e)](_0x425630=>_0x425630[_0x210a00(0x479,0x3ef)]()),Object['values'](this[_0xc7cbe2(-0x3b,0x18)])[_0x210a00(0x483,0x511)](_0x19f035=>_0x19f035[_0x210a00(0x479,0x483)]()),this[_0x210a00(0x462,0x4e8)]['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x202b54(0x18b,0x193)];class WindParticlesRendering{constructor(_0x3ae69c,_0x17eefd,_0x481961,_0x1ee837){this[_0x99e8b9(0x1c8,0x14c)]=_0x3ae69c,this['options']=_0x17eefd,this[_0xe2a75b(0x130,0xc9)]=_0x481961,this['computing']=_0x1ee837;(typeof this['options'][_0x99e8b9(-0x20,0x63)]!==_0x99e8b9(0xa1,0x6c)||this['options'][_0x99e8b9(0x29,0x63)]<=0x0)&&(console[_0xe2a75b(0x9e,0x84)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options'][_0xe2a75b(-0x1d,0xd)]=0x100);this[_0xe2a75b(-0x36,0x38)]=this['createColorTableTexture']();function _0xe2a75b(_0x101951,_0x39fec3){return _0x438df2(_0x101951,_0x39fec3- -0x1b0);}function _0x99e8b9(_0x1f9dd4,_0x2733c1){return _0x202b54(_0x2733c1- -0xbb,_0x1f9dd4);}this['textures']=this['createRenderingTextures'](),this['framebuffers']=this[_0xe2a75b(-0x35,0x1a)](),this[_0x99e8b9(0x144,0x11e)]=this['createPrimitives']();}['createRenderingTextures'](){function _0x4a4839(_0x2e2d52,_0x42d0f8){return _0x202b54(_0x2e2d52-0x1ab,_0x42d0f8);}const _0x439679={};_0x439679['context']=this[_0x4a4839(0x3b2,0x429)],_0x439679['width']=this['context']['drawingBufferWidth'],_0x439679['height']=this['context']['drawingBufferHeight'],_0x439679[_0x4a4839(0x2ee,0x33c)]=PixelFormat[_0x4a4839(0x386,0x318)],_0x439679[_0x3c8444(-0xc3,-0x134)]=PixelDatatype[_0x4a4839(0x2bd,0x241)];const _0xd1f35=_0x439679,_0x197f24={};_0x197f24['context']=this['context'],_0x197f24[_0x3c8444(-0x126,-0x17d)]=this[_0x4a4839(0x3b2,0x3a7)]['drawingBufferWidth'],_0x197f24[_0x4a4839(0x3a0,0x3bb)]=this[_0x3c8444(-0x86,-0x31)]['drawingBufferHeight'];function _0x3c8444(_0x407c73,_0x180274){return _0x202b54(_0x407c73- -0x28d,_0x180274);}_0x197f24[_0x3c8444(-0x14a,-0x1cc)]=PixelFormat[_0x4a4839(0x334,0x335)],_0x197f24['pixelDatatype']=PixelDatatype[_0x3c8444(-0xbb,-0xae)];const _0x161595=_0x197f24;return{'segmentsColor':new Texture(_0xd1f35),'segmentsDepth':new Texture(_0x161595)};}['createRenderingFramebuffers'](){const _0x26b420={};function _0x5b7e36(_0x53900b,_0x4ad6e5){return _0x202b54(_0x4ad6e5-0x379,_0x53900b);}_0x26b420[_0x5b7e36(0x588,0x580)]=this[_0x5b7e36(0x5a1,0x580)],_0x26b420['colorTextures']=[this['textures'][_0x39edf0(0x3bb,0x35a)]],_0x26b420['depthTexture']=this['textures'][_0x39edf0(0x46f,0x413)];function _0x39edf0(_0x3527df,_0x22f082){return _0x202b54(_0x3527df-0x271,_0x22f082);}return{'segments':new Framebuffer(_0x26b420)};}[_0x202b54(0x1fb,0x1d0)](){function _0x4da1bd(_0x209640,_0x31b3ad){return _0x438df2(_0x31b3ad,_0x209640-0x2fe);}Object['values'](this[_0x4da1bd(0x586,0x528)])['forEach'](_0x25839c=>{_0x25839c['destroy']();});}['createColorTableTexture'](){function _0x48d5f9(_0x53bf9f,_0x407657){return _0x438df2(_0x53bf9f,_0x407657- -0x324);}const _0x2c4b32=new Float32Array(this['options']['colors']['flatMap'](_0x56ce31=>{function _0x546d11(_0x333e23,_0x4f19b2){return _0x1086(_0x4f19b2- -0x3bd,_0x333e23);}function _0x80eaf4(_0x278414,_0x2886f6){return _0x1086(_0x278414-0x2ce,_0x2886f6);}const _0x1f1444=Color$1[_0x80eaf4(0x466,0x4d2)](_0x56ce31);return[_0x1f1444[_0x546d11(-0x128,-0x17f)],_0x1f1444['green'],_0x1f1444['blue'],_0x1f1444[_0x546d11(-0x284,-0x215)]];})),_0x550f49={};_0x550f49['minificationFilter']=TextureMinificationFilter[_0x48d5f9(-0x7d,-0x95)];function _0x442291(_0x14096e,_0xe68498){return _0x438df2(_0xe68498,_0x14096e- -0xbb);}return _0x550f49['magnificationFilter']=TextureMagnificationFilter['LINEAR'],_0x550f49['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x550f49['wrapT']=TextureWrap[_0x48d5f9(-0x10e,-0x9f)],new Texture({'context':this['context'],'width':this['options']['colors'][_0x442291(0x14a,0x183)],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype[_0x442291(0x131,0x10d)],'sampler':new Sampler(_0x550f49),'source':{'width':this[_0x442291(0xdc,0x150)][_0x442291(0x14c,0x1cb)]['length'],'height':0x1,'arrayBufferView':_0x2c4b32}});}['createSegmentsGeometry'](){const _0x280f75=0x4,_0x148f36=this['options'][_0x4c7dc5(0x225,0x1ad)];let _0x2a8273=[];for(let _0x460682=0x0;_0x460682<_0x148f36;_0x460682++){for(let _0x1796f3=0x0;_0x1796f3<_0x148f36;_0x1796f3++){for(let _0x3a78f6=0x0;_0x3a78f6<_0x280f75;_0x3a78f6++){_0x2a8273['push'](_0x460682/_0x148f36),_0x2a8273['push'](_0x1796f3/_0x148f36);}}}_0x2a8273=new Float32Array(_0x2a8273);const _0x2c23a6=this[_0x122779(-0x20,0x37)]['particlesTextureSize']**0x2;function _0x122779(_0x470ded,_0x7b8c3d){return _0x202b54(_0x470ded- -0x118,_0x7b8c3d);}let _0x4f371c=[];for(let _0x2a38cd=0x0;_0x2a38cd<_0x2c23a6;_0x2a38cd++){_0x4f371c['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x4f371c=new Float32Array(_0x4f371c);let _0x6796e5=[];for(let _0x489f48=0x0,_0x507bce=0x0;_0x489f48<_0x2c23a6;_0x489f48++){_0x6796e5['push'](_0x507bce+0x0,_0x507bce+0x1,_0x507bce+0x2,_0x507bce+0x2,_0x507bce+0x1,_0x507bce+0x3),_0x507bce+=_0x280f75;}function _0x4c7dc5(_0x313c1d,_0x4bba74){return _0x438df2(_0x313c1d,_0x4bba74- -0x10);}_0x6796e5=new Uint32Array(_0x6796e5);const _0x47499a={};_0x47499a['componentDatatype']=ComponentDatatype[_0x4c7dc5(0x1ec,0x1dc)],_0x47499a['componentsPerAttribute']=0x2,_0x47499a[_0x4c7dc5(0x254,0x26d)]=_0x2a8273;const _0x5601ef={};_0x5601ef[_0x122779(0x11,-0x10)]=ComponentDatatype[_0x4c7dc5(0x238,0x1dc)],_0x5601ef['componentsPerAttribute']=0x3,_0x5601ef['values']=_0x4f371c;const _0xfcddb4=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x47499a),'normal':new GeometryAttribute(_0x5601ef)}),'indices':_0x6796e5});return _0xfcddb4;}['createRawRenderState'](_0x560f35){const _0x5949be={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x560f35};return Appearance['getDefaultRenderState'](!![],![],_0x5949be);}[_0x438df2(0x2e1,0x258)](){const _0xe7c7b3={};function _0x212841(_0x4dd510,_0x17905c){return _0x202b54(_0x4dd510-0x224,_0x17905c);}function _0x159b01(_0x28632d,_0x1615a7){return _0x202b54(_0x1615a7-0x2e0,_0x28632d);}_0xe7c7b3['st']=0x0,_0xe7c7b3['normal']=0x1;const _0x22b49c={};_0x22b49c[_0x212841(0x409,0x434)]=!![];const _0x2fd5b6={};_0x2fd5b6[_0x159b01(0x552,0x4c5)]=!![],_0x2fd5b6[_0x159b01(0x4cd,0x456)]=WebGLRenderingContext[_0x212841(0x36c,0x3cc)],_0x2fd5b6['blendFuncSource']=WebGLRenderingContext['SRC_ALPHA'],_0x2fd5b6[_0x159b01(0x3be,0x403)]=WebGLRenderingContext[_0x212841(0x384,0x38f)];const _0x12fb84={};_0x12fb84[_0x212841(0x425,0x3de)]=undefined,_0x12fb84[_0x212841(0x343,0x2cd)]=_0x22b49c,_0x12fb84[_0x159b01(0x472,0x3f3)]=!![],_0x12fb84['blending']=_0x2fd5b6;const _0x2e2d8b=new CustomPrimitive({'commandType':_0x212841(0x41e,0x49b),'attributeLocations':_0xe7c7b3,'geometry':this[_0x212841(0x3d9,0x351)](),'primitiveType':PrimitiveType[_0x159b01(0x49a,0x4f0)],'uniformMap':{'previousParticlesPosition':()=>this[_0x159b01(0x3fb,0x46c)]['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0x212841(0x3b0,0x355)][_0x212841(0x42f,0x3a6)]['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures'][_0x159b01(0x403,0x444)],'particlesSpeed':()=>this['computing'][_0x212841(0x42f,0x3bf)]['particlesSpeed'],'frameRateAdjustment':()=>this[_0x212841(0x3b0,0x3d8)][_0x212841(0x33f,0x37b)],'colorTable':()=>this['colorTable'],'domain':()=>{function _0x446b13(_0x25b8ea,_0x1fd2ca){return _0x212841(_0x1fd2ca-0x17f,_0x25b8ea);}function _0x44c487(_0x20b4fc,_0x5e0a61){return _0x212841(_0x5e0a61- -0xae,_0x20b4fc);}var _0x4825a7,_0x21b106;const _0x2e001c=new Cartesian2(((_0x4825a7=this['options']['domain'])===null||_0x4825a7===void 0x0?void 0x0:_0x4825a7['min'])??this['computing']['windData'][_0x446b13(0x5ef,0x5ab)]['min'],((_0x21b106=this['options']['domain'])===null||_0x21b106===void 0x0?void 0x0:_0x21b106['max'])??this['computing']['windData'][_0x446b13(0x622,0x5ab)]['max']);return _0x2e001c;},'displayRange':()=>{var _0x9601be,_0x4360b1;function _0x4e76b4(_0x14f707,_0x3b4b5a){return _0x212841(_0x14f707- -0x26f,_0x3b4b5a);}function _0x5d3c85(_0x5607c8,_0x36ce70){return _0x212841(_0x5607c8- -0x24b,_0x36ce70);}const _0x4bdbec=new Cartesian2(((_0x9601be=this['options'][_0x4e76b4(0x111,0xe6)])===null||_0x9601be===void 0x0?void 0x0:_0x9601be['min'])??this[_0x5d3c85(0x165,0xde)][_0x4e76b4(0x129,0x172)][_0x4e76b4(0x1bd,0x1dc)]['min'],((_0x4360b1=this['options'][_0x5d3c85(0x135,0xdb)])===null||_0x4360b1===void 0x0?void 0x0:_0x4360b1[_0x5d3c85(0x116,0x14c)])??this[_0x5d3c85(0x165,0xdb)]['windData']['speed']['max']);return _0x4bdbec;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this['context'][_0x212841(0x321,0x356)]/this[_0x159b01(0x558,0x4e7)][_0x159b01(0x494,0x476)],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x4ad216={};function _0x32c657(_0x2f5490,_0x5ec1c8){return _0x212841(_0x5ec1c8-0x69,_0x2f5490);}_0x4ad216[_0x4a2c5b(0x1e,-0x56)]=0x1,_0x4ad216['max']=0x2;const _0x4ac07b=this[_0x32c657(0x3d8,0x385)][_0x32c657(0x48e,0x42f)]||_0x4ad216;function _0x4a2c5b(_0x551c29,_0x3ebc27){return _0x159b01(_0x551c29,_0x3ebc27- -0x443);}return new Cartesian2(_0x4ac07b[_0x4a2c5b(-0x43,-0x56)],_0x4ac07b['max']);},'lineLength':()=>{function _0x4176ff(_0xe9a32a,_0x5dfeb7){return _0x159b01(_0xe9a32a,_0x5dfeb7- -0x2a0);}const _0x1b2cd5={};_0x1b2cd5[_0x418bfe(0x502,0x4bb)]=0x14,_0x1b2cd5[_0x418bfe(0x4d0,0x4eb)]=0x64;function _0x418bfe(_0x5e0a29,_0x103598){return _0x212841(_0x103598-0x18a,_0x5e0a29);}const _0x516c48=this['options'][_0x4176ff(0x220,0x249)]||_0x1b2cd5;return new Cartesian2(_0x516c48[_0x4176ff(0x189,0x14d)],_0x516c48['max']);},'is3D':()=>this['viewerParameters']['sceneMode']===SceneMode[_0x212841(0x400,0x480)],'segmentsDepthTexture':()=>this[_0x212841(0x3b8,0x385)]['segmentsDepth']},'vertexShaderSource':ShaderManager[_0x212841(0x3da,0x423)](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x12fb84)}),_0x4731f0={};return _0x4731f0['segments']=_0x2e2d8b,_0x4731f0;}[_0x202b54(0x154,0x1b3)](){const _0x6043ea=this['createSegmentsGeometry']();function _0x45ff58(_0x509ff0,_0x533708){return _0x202b54(_0x533708-0x1c6,_0x509ff0);}this['primitives'][_0x45ff58(0x382,0x39b)]['geometry']=_0x6043ea;const _0x3d278e={};_0x3d278e[_0x45ff58(0x452,0x3cd)]=this['context'],_0x3d278e[_0x45ff58(0x3a0,0x323)]=_0x6043ea;function _0x26e600(_0x42092e,_0x1363c8){return _0x202b54(_0x1363c8- -0x333,_0x42092e);}_0x3d278e['attributeLocations']=this[_0x26e600(-0xe5,-0x15a)]['segments']['attributeLocations'],_0x3d278e['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x9848d1=VertexArray['fromGeometry'](_0x3d278e);this['primitives']['segments']['commandToExecute']&&(this['primitives']['segments'][_0x26e600(-0x1c8,-0x1a0)]['vertexArray']=_0x9848d1);}['onColorTableChange'](){this[_0x4e2f38(0x1f9,0x18d)][_0x2ed315(0x226,0x1aa)]();function _0x2ed315(_0x273a97,_0x2d80ad){return _0x202b54(_0x2d80ad- -0x58,_0x273a97);}function _0x4e2f38(_0x2536b1,_0x59bda2){return _0x438df2(_0x59bda2,_0x2536b1-0x11);}this['colorTable']=this['createColorTableTexture']();}[_0x438df2(0x249,0x218)](_0x541f81){const _0x592e68=_0x541f81[_0x47054f(0x2af,0x2bb)]&&JSON['stringify'](_0x541f81['colors'])!==JSON[_0x18618d(0x122,0xf6)](this[_0x18618d(-0x77,-0x24)][_0x18618d(0x50,0x4c)]);function _0x18618d(_0x3ea77b,_0x3c3e95){return _0x202b54(_0x3c3e95- -0x11c,_0x3ea77b);}function _0x47054f(_0x899c9,_0x1900b5){return _0x438df2(_0x1900b5,_0x899c9-0xa8);}this[_0x47054f(0x23f,0x299)]=deepMerge(_0x541f81,this[_0x47054f(0x23f,0x241)]),_0x592e68&&this[_0x47054f(0x32a,0x327)]();}[_0x202b54(0x202,0x24f)](){function _0x5ecd82(_0x53600f,_0x135924){return _0x438df2(_0x135924,_0x53600f-0x89);}Object[_0x5ecd82(0x306,0x31e)](this['framebuffers'])[_0x5ecd82(0x334,0x2d3)](_0x326d77=>{_0x326d77['destroy']();});function _0x5850ac(_0x4406c1,_0x1ad315){return _0x438df2(_0x1ad315,_0x4406c1-0x2cb);}Object[_0x5ecd82(0x306,0x335)](this[_0x5850ac(0x543,0x540)])[_0x5850ac(0x576,0x515)](_0x947ac3=>{function _0x96784d(_0x3d7676,_0x1a5674){return _0x5850ac(_0x1a5674- -0x53a,_0x3d7676);}_0x947ac3[_0x96784d(0xaf,0x32)]();}),this['colorTable'][_0x5ecd82(0x32a,0x391)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x2372ea,_0xb00fee,_0x590811,_0x5f0478,_0x186d48){this['context']=_0x2372ea,this['options']=_0x590811;function _0x1a89b3(_0x5ccf55,_0x3a0896){return _0x202b54(_0x5ccf55- -0x2f,_0x3a0896);}this['viewerParameters']=_0x5f0478,this['computing']=new WindParticlesComputing(_0x2372ea,_0xb00fee,_0x590811,_0x5f0478,_0x186d48),this['rendering']=new WindParticlesRendering(_0x2372ea,_0x590811,_0x5f0478,this[_0x1a89b3(0x15d,0xe8)]),this['clearFramebuffers']();}[_0x202b54(0x16a,0x1cf)](){function _0x5ca1af(_0x1aa35d,_0x30a90b){return _0x438df2(_0x1aa35d,_0x30a90b- -0x1b9);}function _0x4946c1(_0x2679c1,_0x1c85c3){return _0x438df2(_0x2679c1,_0x1c85c3- -0xa8);}const _0x2a6e92=[this['computing'][_0x5ca1af(0xfb,0xbf)]['calculateSpeed'],this[_0x4946c1(0x208,0x183)]['primitives'][_0x4946c1(0x219,0x1c6)],this['computing'][_0x4946c1(0x1ab,0x1d0)]['postProcessingPosition'],this['rendering']['primitives'][_0x4946c1(0x1f5,0x1cc)]];return _0x2a6e92;}['clearFramebuffers'](){const _0x5c8ef9=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x427d6b(0x486,0x510)]});function _0x9627fa(_0x25cc8c,_0x49d580){return _0x438df2(_0x49d580,_0x25cc8c-0x11e);}function _0x427d6b(_0x5e22d1,_0x12b290){return _0x438df2(_0x12b290,_0x5e22d1-0x23a);}Object['keys'](this['rendering'][_0x427d6b(0x4c2,0x4f3)])['forEach'](_0x21ebd4=>{function _0x5024d6(_0x438d2f,_0x385bf3){return _0x427d6b(_0x385bf3- -0x673,_0x438d2f);}function _0x59c82e(_0x7a1f2b,_0x3b6e29){return _0x9627fa(_0x7a1f2b- -0x40c,_0x3b6e29);}_0x5c8ef9[_0x5024d6(-0x111,-0x189)]=this['rendering']['framebuffers'][_0x21ebd4],_0x5c8ef9[_0x59c82e(-0x158,-0x1a5)](this['context']);});}[_0x438df2(0x12b,0x1ae)](_0x5bd3df){let _0x2ea0f7=![];_0x5bd3df[_0xc2d4c4(-0x123,-0x106)]&&this['options'][_0x4dd683(0x2ac,0x2a9)]!==_0x5bd3df['particlesTextureSize']&&(_0x2ea0f7=!![]);const _0x71c828=deepMerge(_0x5bd3df,this[_0x4dd683(0x2b9,0x283)]);function _0xc2d4c4(_0x2b3ad6,_0x41b95a){return _0x202b54(_0x41b95a- -0x224,_0x2b3ad6);}function _0x4dd683(_0x204f23,_0x3b6595){return _0x438df2(_0x204f23,_0x3b6595-0xec);}if(_0x71c828[_0xc2d4c4(-0xa9,-0x106)]<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x71c828,this['rendering']['updateOptions'](_0x5bd3df),this[_0xc2d4c4(-0x88,-0x98)]['updateOptions'](_0x5bd3df),_0x2ea0f7&&(this['computing'][_0x4dd683(0x299,0x319)](),this['computing']['createParticlesTextures'](),this['rendering'][_0xc2d4c4(-0x10f,-0xd0)]());}[_0x438df2(0x1ee,0x23a)](_0x236638){this['viewerParameters']=_0x236638;function _0x109de0(_0x1c5dd8,_0x1e09de){return _0x438df2(_0x1e09de,_0x1c5dd8-0xd9);}this[_0x109de0(0x304,0x32a)]['viewerParameters']=_0x236638,this['rendering']['viewerParameters']=_0x236638;}['destroy'](){this['computing']['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0xc3a57b={};function _0x438c(){const _0x49990a=['error','drawingBufferHeight','particleSystem','#ffffff','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a','clientWidth','applyViewerParameters','isInExtent','getContext','xmax','_pointerEvents','container','south','lineWidth','setData','rectangle','NEAREST','vertexArray','dynamic','toGridXY','outputTexture','floor','initFrameRate','EventType','OPAQUE','dropRateBump','frameTime','rows','style','speedFactor','getUpdatePositionShader','remove','createSegmentsGeometry','getSegmentDrawVertexShader','addEventListener','getOwnPropertyDescriptor','createPrimitives','minificationFilter','log','_animateFrame','_map','273ZqwUKH','createWindTextures','_updateIng','_colorRamp','getColor','requestRender','particles','__esModule','maxAge','vmin','getRandomLatLng','refreshTimer','pixelDatatype','_maxAge','changed','isDynamic','ymin','updatePosition','235890tuNKUx','postMessage','UNSIGNED_INT','0px','scene','segments','setOptions','Cartesian3','updateWindData','primitives','viewerParameters','RGBA','SCENE3D','layer','values','RED','beginPath','calculateSpeed','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','onColorTableChange','Math','enabled','CLAMP_TO_EDGE','createParticlesTextures','call','framebuffers','canvasHeight','frameRateMonitor','getCalculateSpeedShader','WindUtil','clientHeight','MAX_VALUE','LINEAR','_onMapWhellEvent','show','onmessage','_drawLines','height','6392952glKKzm','_setOptionsHook','red','requestAnimationFrame','Draw','destoryRenderingFramebuffers','fragmentShaderSource','3620592bwknJO','segmentsDepth','globalCompositeOperation','alt','viewport','destroy','tlng','clear','xmin','466125mQqeJr','context','speed','lineLength','vertexShaderSource','particlesTextures','forEach','bounds','zIndex','_tomap','TRIANGLES','framebuffer','stringify','ymax','Cartesian2','execute','options','73665WhSZdY','isPointVisible','BaseLayer','WindLayer','drawingBufferWidth','_onMouseUpEvent','cols','mouse_down','_bilinearInterpolation','fromGeometry','initWorker','_calcUV','north','owner','_speedRate','globe','lng','renderState','tlat','vdata','min','interpolated','changeOptions','flipY','ellipsoid','UNSIGNED_BYTE','depthMask','mouseDown','sources','uniformMap','off','setDate','getParticles','speedRate','frameRateAdjustment','toWindowCoordinates','udata','particlesTextureSize','depthTest','commandType','top','samplingWindow','blendFuncDestination','talt','init','abs','number','commandList','componentDatatype','pixelSize','createRenderingFramebuffers','wind','sqrt','none','_randomParticle','west','_addedHook','worker','2RmftGj','_createCanvas','lat','wheel','unbindEvent','push','canvasWidth','fixedHeight','redraw','update','max','canvasContext','previousParticlesPosition','original','data','getDirection','pixelFormat','Compute','pointerEvents','autoClear','toDegrees','FUNC_ADD','colorTable','segmentsColor','frameRate','primitiveType','FLOAT','processWindData','removeEventListener','reCreateWindTextures','1565956UgYVBM','fromCssColorString','reverse','onParticlesTextureSizeChange','windTextures','magnificationFilter','_calc_speedRate','particlesSpeed','type','hidden','getUVByPoint','displayRange','geometry','value','grid','ONE_MINUS_SRC_ALPHA','mouse_move','alpha','umax','postProcessingPosition','lineTo','length','width','colors','canvas','getPrimitives','shaderProgram','isDestroy','updateViewerParameters','attributeLocations','rawRenderState','visibility','camera','warn','37134scTsbl','windData','max\x20is\x20undefined,\x20calculate\x20max','blendEquation','preExecute','latRange','updateOptions','mouseMove','steps','windField','_canvasParticles','array','now','particlesNumber','_removedHook','_onMouseDownEvent','Unknown\x20command\x20type','resize','age','getPostProcessingPositionShader','moveTo','round','DEPTH_COMPONENT','bind','Cesium','computing','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','destroyParticlesTextures','ColorRamp','east','color','getUVByXY','commandToExecute','textures'];_0x438c=function(){return _0x49990a;};return _0x438c();}_0xc3a57b['min']=0x1,_0xc3a57b['max']=0x2;const _0x38b633={};_0x38b633[_0x438df2(0x147,0x1ac)]=0x14,_0x38b633['max']=0x64;const _0x4c5a5a={};_0x4c5a5a[_0x438df2(0x21e,0x1bd)]=0x64,_0x4c5a5a['fixedHeight']=0x0,_0x4c5a5a['lineWidth']=_0xc3a57b,_0x4c5a5a['lineLength']=_0x38b633,_0x4c5a5a['speedFactor']=0x1,_0x4c5a5a['dropRate']=0.003,_0x4c5a5a[_0x438df2(0x2a5,0x24d)]=0.001,_0x4c5a5a[_0x202b54(0x168,0x11a)]=['rgb(206,255,255)'],_0x4c5a5a['flipY']=![],_0x4c5a5a[_0x202b54(0x1a7,0x187)]=!![];function _0x202b54(_0x15f0f3,_0x4292a6){return _0x1086(_0x15f0f3- -0x46,_0x4292a6);}const DEF_OPTIONS=_0x4c5a5a;class WindLayer extends BaseLayer$1{constructor(_0x51c6a0={}){_0x51c6a0={...DEF_OPTIONS,..._0x51c6a0},super(_0x51c6a0),this['_setOptionsHook'](_0x51c6a0,_0x51c6a0);}get[_0x202b54(0x1dd,0x219)](){function _0x3bc8a0(_0x366e1c,_0x2d9d5c){return _0x438df2(_0x366e1c,_0x2d9d5c-0xbc);}return this[_0x3bc8a0(0x378,0x334)];}get[_0x438df2(0x20c,0x1e0)](){function _0x219f24(_0x177c60,_0xa5d9b){return _0x202b54(_0x177c60-0x354,_0xa5d9b);}return this['options'][_0x219f24(0x495,0x513)];}set[_0x438df2(0x25d,0x1e0)](_0x328aa4){this['options']['data']=_0x328aa4,this['setData'](_0x328aa4);}get[_0x202b54(0x168,0x199)](){function _0x331ebb(_0x287033,_0x4ccef9){return _0x202b54(_0x4ccef9-0x160,_0x287033);}function _0x35a0f0(_0xb71626,_0x29a1fd){return _0x202b54(_0x29a1fd-0x2e2,_0xb71626);}return this[_0x331ebb(0x2c6,0x258)][_0x331ebb(0x241,0x2c8)];}set['colors'](_0x47571f){function _0x1e759f(_0x15d937,_0x121017){return _0x202b54(_0x15d937-0x3cc,_0x121017);}this[_0x1e759f(0x4c4,0x4e1)][_0x396c3e(0x334,0x381)]=_0x47571f;const _0x17624f={};_0x17624f[_0x1e759f(0x534,0x57c)]=_0x47571f;function _0x396c3e(_0x80c4b,_0x1463dc){return _0x438df2(_0x80c4b,_0x1463dc-0x17a);}this['_setOptionsHook'](this[_0x396c3e(0x2aa,0x311)],_0x17624f);}['_showHook'](_0x279fdd){function _0x5e06ba(_0x5eaa12,_0xfbeb60){return _0x438df2(_0xfbeb60,_0x5eaa12-0x34d);}function _0x4f8ee5(_0x2d2f0e,_0x817d8e){return _0x202b54(_0x817d8e-0x18f,_0x2d2f0e);}_0x279fdd?this[_0x4f8ee5(0x23c,0x2c0)]():this[_0x5e06ba(0x56d,0x5e2)]();}['_mountedHook'](){}[_0x202b54(0x131,0x121)](){this['scene']=this['_map'][_0x2c4d8d(0x366,0x3a2)],this['camera']=this[_0x2c4d8d(0x34f,0x363)]['camera'];this['options']['data']&&this['setData'](this['options']['data']);if(!this['windData']||!this['show'])return;this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this['updateViewerParameters'](),this[_0x2c4d8d(0x329,0x2ad)]=new WindParticleSystem(this['scene']['context'],this['windData'],this['options'],this[_0x2c4d8d(0x36c,0x3a1)],this['scene']);function _0x76477(_0x97b310,_0x5db6ec){return _0x202b54(_0x5db6ec-0x296,_0x97b310);}this[_0x2c4d8d(0x36b,0x301)]=this[_0x2c4d8d(0x329,0x372)]['getPrimitives'](),this[_0x2c4d8d(0x36b,0x2fb)][_0x76477(0x4ca,0x4a2)](_0x359fe6=>{function _0x29824b(_0x29e078,_0xea0e60){return _0x76477(_0xea0e60,_0x29e078- -0x386);}this['scene'][_0x29824b(0xe9,0x14e)]['add'](_0x359fe6);}),this['camera']['percentageChanged']=0.01;function _0x2c4d8d(_0xc9ca5f,_0x365be0){return _0x202b54(_0xc9ca5f-0x192,_0x365be0);}this[_0x76477(0x389,0x407)]['changed'][_0x2c4d8d(0x349,0x2e6)](this[_0x2c4d8d(0x2ff,0x2ec)]['bind'](this)),this['scene']['morphComplete'][_0x76477(0x4d7,0x44d)](this[_0x2c4d8d(0x2ff,0x2f8)][_0x2c4d8d(0x31c,0x2cb)](this)),window['addEventListener']('resize',this['updateViewerParameters']['bind'](this));}[_0x202b54(0x181,0x120)](){this[_0x3ff242(0x56b,0x555)][_0x3ff242(0x5c6,0x598)]['removeEventListener'](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete'][_0x3ff242(0x549,0x519)](this[_0x4f3c33(0x454,0x473)][_0x4f3c33(0x471,0x4b9)](this));function _0x3ff242(_0x1e7d35,_0x242ec2){return _0x438df2(_0x242ec2,_0x1e7d35-0x35b);}function _0x4f3c33(_0x25cd3d,_0x211df9){return _0x438df2(_0x211df9,_0x25cd3d-0x248);}window['removeEventListener'](_0x3ff242(0x57e,0x59f),this['updateViewerParameters']['bind'](this)),this[_0x3ff242(0x5d3,0x5e6)]&&(this['primitives']['forEach'](_0x580cc9=>{function _0x4ca385(_0xfa33c7,_0x4f3ce2){return _0x4f3c33(_0xfa33c7-0x89,_0x4f3ce2);}this['scene']['primitives'][_0x4ca385(0x524,0x594)](_0x580cc9);}),delete this[_0x3ff242(0x5d3,0x5da)]),this[_0x3ff242(0x591,0x59e)]&&(this[_0x3ff242(0x591,0x581)][_0x3ff242(0x5fc,0x5e9)](),delete this[_0x3ff242(0x591,0x5c9)]);}['setData'](_0x54161c,_0x25fee8){function _0x5d7c18(_0x43e824,_0x2629b5){return _0x438df2(_0x43e824,_0x2629b5-0x27e);}function _0x103bb8(_0x1ee852,_0x1432c3){return _0x438df2(_0x1432c3,_0x1ee852- -0x157);}this[_0x5d7c18(0x51e,0x491)]=this[_0x103bb8(0x96,0x58)](_0x54161c);if(_0x25fee8){this['_removedHook'](),this['_addedHook']();return;}this[_0x5d7c18(0x50b,0x4b4)]?(this['particleSystem'][_0x5d7c18(0x4e0,0x4a9)][_0x103bb8(0x120,0x191)](this['windData']),this['scene']['requestRender']()):this['_addedHook']();}[_0x438df2(0x2ec,0x296)](_0x491cc9,_0xf2ad5){function _0x1ad1ca(_0x215c71,_0x1be8a8){return _0x438df2(_0x1be8a8,_0x215c71- -0x308);}function _0x43a7b2(_0x177e76,_0x4e6a5f){return _0x202b54(_0x177e76-0x3bc,_0x4e6a5f);}this['particleSystem']&&(this['particleSystem'][_0x1ad1ca(-0x15a,-0xd4)](_0xf2ad5),this['scene'][_0x43a7b2(0x57f,0x55f)]());}['processWindData'](_0xe214fb){var _0x3a556e,_0x5e9a97;const _0xa54ec1={..._0xe214fb};function _0x26b4c1(_0x96747a,_0x134417){return _0x202b54(_0x134417-0x62,_0x96747a);}const _0x3cb72d=_0xa54ec1;!_0x3cb72d['height']&&_0x3cb72d['rows']&&(_0x3cb72d['height']=_0x3cb72d[_0x26b4c1(0x1c3,0x212)]);!_0x3cb72d[_0x26b4c1(0x23d,0x1c9)]&&_0x3cb72d['cols']&&(_0x3cb72d[_0x26b4c1(0x1e8,0x1c9)]=_0x3cb72d[_0xcd55ff(0x261,0x26b)]);!_0x3cb72d[_0x26b4c1(0x29d,0x26f)]&&(_0x3cb72d['bounds']={'west':_0x3cb72d['xmin'],'south':_0x3cb72d[_0xcd55ff(0x330,0x31a)],'east':_0x3cb72d[_0x26b4c1(0x254,0x200)],'north':_0x3cb72d['ymax']});if(!_0x3cb72d['u']){const _0x6eb8bf={};_0x6eb8bf[_0x26b4c1(0x25f,0x1e0)]=_0xe214fb['udata'],_0x6eb8bf['min']=_0xe214fb['umin'],_0x6eb8bf['max']=_0xe214fb[_0x26b4c1(0x232,0x1c5)],_0x3cb72d['u']=_0x6eb8bf;}if(!_0x3cb72d['v']){const _0x1a54b0={};_0x1a54b0['array']=_0xe214fb['vdata'],_0x1a54b0[_0x26b4c1(0xf5,0x16f)]=_0xe214fb[_0xcd55ff(0x329,0x3a5)],_0x1a54b0['max']=_0xe214fb['vmax'],_0x3cb72d['v']=_0x1a54b0;}function _0xcd55ff(_0x486768,_0x567498){return _0x438df2(_0x567498,_0x486768-0xc3);}if(((_0x3a556e=_0x3cb72d['speed'])===null||_0x3a556e===void 0x0?void 0x0:_0x3a556e[_0x26b4c1(0x100,0x16f)])===undefined||((_0x5e9a97=_0x3cb72d['speed'])===null||_0x5e9a97===void 0x0?void 0x0:_0x5e9a97['max'])===undefined||_0x3cb72d['speed']['array']===undefined){const _0x54073a={'array':new Float32Array(_0x3cb72d['u']['array'][_0x26b4c1(0x14b,0x1c8)]),'min':Number[_0x26b4c1(0x279,0x251)],'max':Number['MIN_VALUE']};for(let _0x3f55b0=0x0;_0x3f55b0<_0x3cb72d['u']['array'][_0x26b4c1(0x166,0x1c8)];_0x3f55b0++){_0x54073a['array'][_0x3f55b0]=Math['sqrt'](_0x3cb72d['u'][_0xcd55ff(0x2e0,0x2ad)][_0x3f55b0]*_0x3cb72d['u']['array'][_0x3f55b0]+_0x3cb72d['v']['array'][_0x3f55b0]*_0x3cb72d['v']['array'][_0x3f55b0]),_0x54073a[_0x26b4c1(0x177,0x1e0)][_0x3f55b0]!==0x0&&(_0x54073a['min']=Math[_0x26b4c1(0x152,0x16f)](_0x54073a[_0xcd55ff(0x26f,0x2be)],_0x54073a['array'][_0x3f55b0]),_0x54073a[_0xcd55ff(0x29f,0x271)]=Math[_0x26b4c1(0x1f1,0x19f)](_0x54073a[_0x26b4c1(0x1a9,0x19f)],_0x54073a['array'][_0x3f55b0]));}_0x3cb72d['speed']=_0x54073a;}return _0x3cb72d;}[_0x202b54(0x16d,0xea)](){var _0x570954;function _0x5b4416(_0x861b2a,_0x5b002d){return _0x438df2(_0x861b2a,_0x5b002d-0x174);}const _0x25962a=this['scene'];if(!_0x25962a)return;const _0x5f006c=_0x25962a[_0x5f4c76(0x4f2,0x51f)],_0x406fa9={};_0x406fa9['x']=0x0;function _0x5f4c76(_0xc8006e,_0x444de7){return _0x202b54(_0xc8006e-0x389,_0x444de7);}_0x406fa9['y']=0x0;const _0x21f4b3={};_0x21f4b3['x']=0x0,_0x21f4b3['y']=_0x5f006c['clientHeight'];const _0x4b2af6={};_0x4b2af6['x']=_0x5f006c[_0x5f4c76(0x523,0x4da)],_0x4b2af6['y']=0x0;const _0x4b0a0e={};_0x4b0a0e['x']=_0x5f006c[_0x5b4416(0x376,0x3ad)],_0x4b0a0e['y']=_0x5f006c[_0x5b4416(0x3d0,0x401)];const _0x40ac2c=[_0x406fa9,_0x21f4b3,_0x4b2af6,_0x4b0a0e];let _0x2c1cf4=0xb4,_0x4db4ca=-0xb4,_0x3b84cd=0x5a,_0x24eb6c=-0x5a,_0xad4f9b=![];for(const _0x2898fa of _0x40ac2c){const _0x5ada25=_0x25962a['camera']['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x2898fa['x'],_0x2898fa['y']),_0x25962a['globe']['ellipsoid']);if(!_0x5ada25){_0xad4f9b=!![];break;}const _0x2817ba=_0x25962a['globe'][_0x5b4416(0x2a7,0x324)]['cartesianToCartographic'](_0x5ada25),_0x3e619c=Cesium$1['Math'][_0x5b4416(0x2fc,0x35a)](_0x2817ba['longitude']),_0x2402ad=Cesium$1['Math']['toDegrees'](_0x2817ba['latitude']);_0x2c1cf4=Math[_0x5f4c76(0x496,0x43c)](_0x2c1cf4,_0x3e619c),_0x4db4ca=Math['max'](_0x4db4ca,_0x3e619c),_0x3b84cd=Math['min'](_0x3b84cd,_0x2402ad),_0x24eb6c=Math[_0x5b4416(0x2da,0x350)](_0x24eb6c,_0x2402ad);}if(!_0xad4f9b){const _0x3736d7=new Cesium$1['Cartesian2'](Math[_0x5f4c76(0x4c6,0x517)](this[_0x5f4c76(0x4fd,0x52c)]['bounds'][_0x5b4416(0x2ef,0x343)],_0x2c1cf4),Math[_0x5f4c76(0x496,0x432)](this['windData']['bounds']['east'],_0x4db4ca)),_0x2265d3=new Cesium$1[(_0x5b4416(0x2c1,0x309))](Math[_0x5f4c76(0x4c6,0x458)](this[_0x5b4416(0x3b5,0x387)]['bounds'][_0x5f4c76(0x52a,0x56b)],_0x3b84cd),Math[_0x5b4416(0x30c,0x320)](this['windData'][_0x5b4416(0x484,0x420)][_0x5b4416(0x375,0x318)],_0x24eb6c)),_0x41637f=(_0x3736d7['y']-_0x3736d7['x'])*0.05,_0x552e52=(_0x2265d3['y']-_0x2265d3['x'])*0.05;_0x3736d7['x']=Math[_0x5b4416(0x2d7,0x350)](this[_0x5f4c76(0x4fd,0x561)]['bounds']['west'],_0x3736d7['x']-_0x41637f),_0x3736d7['y']=Math['min'](this['windData']['bounds'][_0x5b4416(0x3cb,0x3a3)],_0x3736d7['y']+_0x41637f),_0x2265d3['x']=Math['max'](this[_0x5f4c76(0x4fd,0x54d)]['bounds']['south'],_0x2265d3['x']-_0x552e52),_0x2265d3['y']=Math[_0x5f4c76(0x496,0x43a)](this[_0x5f4c76(0x4fd,0x526)][_0x5b4416(0x469,0x420)][_0x5f4c76(0x48e,0x436)],_0x2265d3['y']+_0x552e52),this[_0x5b4416(0x461,0x3ed)]['lonRange']=_0x3736d7,this['viewerParameters'][_0x5f4c76(0x501,0x4e4)]=_0x2265d3;const _0x7dbd40=this['windData']['bounds']['east']-this[_0x5b4416(0x38c,0x387)][_0x5f4c76(0x596,0x59e)]['west'],_0x2cf580=this['windData'][_0x5b4416(0x47f,0x420)]['north']-this['windData']['bounds'][_0x5f4c76(0x52a,0x534)],_0x4c13ff=(_0x3736d7['y']-_0x3736d7['x'])/_0x7dbd40,_0x26c96c=(_0x2265d3['y']-_0x2265d3['x'])/_0x2cf580,_0x4f677b=Math['min'](_0x4c13ff,_0x26c96c),_0x23af1c=0x3e8*_0x4f677b;_0x23af1c>0x0&&(this['viewerParameters']['pixelSize']=Math['max'](0x0,Math['min'](0x3e8,_0x23af1c)));}this[_0x5f4c76(0x563,0x57e)]['sceneMode']=this['scene']['mode'],(_0x570954=this[_0x5b4416(0x3b4,0x3aa)])===null||_0x570954===void 0x0||_0x570954['applyViewerParameters'](this['viewerParameters']);}['getDataAtLonLat'](_0x4c2046,_0x34417c){const {bounds:_0x3489eb,width:_0xe7fed1,height:_0x4bda44,u:_0x28ff6b,v:_0x21b460,speed:_0x1f4b49}=this['windData'],{flipY:_0x3c0337}=this[_0x5155fe(0x1a8,0x1c9)];if(_0x4c2046<_0x3489eb['west']||_0x4c2046>_0x3489eb[_0x5155fe(0x299,0x261)]||_0x34417c<_0x3489eb['south']||_0x34417c>_0x3489eb[_0x2b002f(0x4e7,0x470)])return null;const _0x55ccb5=(_0x4c2046-_0x3489eb['west'])/(_0x3489eb[_0x2b002f(0x552,0x4fb)]-_0x3489eb['west'])*(_0xe7fed1-0x1);let _0x46c68d=(_0x34417c-_0x3489eb['south'])/(_0x3489eb[_0x2b002f(0x42b,0x470)]-_0x3489eb[_0x2b002f(0x555,0x50c)])*(_0x4bda44-0x1);_0x3c0337&&(_0x46c68d=_0x4bda44-0x1-_0x46c68d);const _0x3b9dca=Math[_0x2b002f(0x541,0x515)](_0x55ccb5),_0x4be8e7=Math[_0x5155fe(0x26d,0x27b)](_0x46c68d),_0x3c808c=Math['floor'](_0x55ccb5),_0x3a95d8=Math[_0x2b002f(0x47d,0x478)](_0x3c808c+0x1,_0xe7fed1-0x1),_0x38e0da=Math[_0x5155fe(0x1f4,0x27b)](_0x46c68d),_0x58f3e0=Math[_0x5155fe(0x172,0x1de)](_0x38e0da+0x1,_0x4bda44-0x1),_0x52a1af=_0x55ccb5-_0x3c808c,_0x4d579d=_0x46c68d-_0x38e0da;function _0x5155fe(_0x18fa02,_0x5e9e4e){return _0x202b54(_0x5e9e4e-0xd1,_0x18fa02);}const _0x2f7e0d=_0x4be8e7*_0xe7fed1+_0x3b9dca,_0x43d0f8=_0x38e0da*_0xe7fed1+_0x3c808c,_0x4dc852=_0x38e0da*_0xe7fed1+_0x3a95d8,_0x380187=_0x58f3e0*_0xe7fed1+_0x3c808c,_0x3fd505=_0x58f3e0*_0xe7fed1+_0x3a95d8,_0x481226=_0x28ff6b['array'][_0x43d0f8],_0x306df4=_0x28ff6b[_0x5155fe(0x24d,0x24f)][_0x4dc852],_0x10ddd9=_0x28ff6b['array'][_0x380187],_0x287cf3=_0x28ff6b[_0x2b002f(0x494,0x4e9)][_0x3fd505],_0x4960a3=(0x1-_0x52a1af)*(0x1-_0x4d579d)*_0x481226+_0x52a1af*(0x1-_0x4d579d)*_0x306df4+(0x1-_0x52a1af)*_0x4d579d*_0x10ddd9+_0x52a1af*_0x4d579d*_0x287cf3,_0x2b93a9=_0x21b460[_0x2b002f(0x4e1,0x4e9)][_0x43d0f8],_0x535bff=_0x21b460[_0x5155fe(0x2b6,0x24f)][_0x4dc852],_0x7720b2=_0x21b460['array'][_0x380187],_0xdef4a6=_0x21b460['array'][_0x3fd505],_0x16a61c=(0x1-_0x52a1af)*(0x1-_0x4d579d)*_0x2b93a9+_0x52a1af*(0x1-_0x4d579d)*_0x535bff+(0x1-_0x52a1af)*_0x4d579d*_0x7720b2+_0x52a1af*_0x4d579d*_0xdef4a6,_0x3fb2f9=Math[_0x2b002f(0x4ee,0x498)](_0x4960a3*_0x4960a3+_0x16a61c*_0x16a61c),_0x2330a8={};_0x2330a8['u']=_0x28ff6b[_0x5155fe(0x228,0x24f)][_0x2f7e0d],_0x2330a8['v']=_0x21b460[_0x5155fe(0x25d,0x24f)][_0x2f7e0d],_0x2330a8['speed']=_0x1f4b49['array'][_0x2f7e0d];const _0x417ec1={};_0x417ec1['u']=_0x4960a3,_0x417ec1['v']=_0x16a61c,_0x417ec1[_0x2b002f(0x56a,0x573)]=_0x3fb2f9;const _0xba2867={};_0xba2867[_0x5155fe(0x29e,0x211)]=_0x2330a8;function _0x2b002f(_0x377ccc,_0x24be3b){return _0x202b54(_0x24be3b-0x36b,_0x377ccc);}return _0xba2867[_0x2b002f(0x4e6,0x479)]=_0x417ec1,_0xba2867;}}mars3d__namespace['LayerUtil']['register'](_0x438df2(0x207,0x1cb),WindLayer),mars3d__namespace['layer'][_0x438df2(0x157,0x19b)]=WindLayer;class CanvasParticle{constructor(){function _0x9c3f3d(_0x205784,_0x42e525){return _0x438df2(_0x205784,_0x42e525- -0x202);}this['lng']=null,this[_0x805aee(0x164,0x1c4)]=null,this['tlng']=null;function _0x805aee(_0x18ee8d,_0x2dc70d){return _0x438df2(_0x18ee8d,_0x2dc70d- -0x10);}this[_0x805aee(0x165,0x19a)]=null,this['age']=null,this[_0x9c3f3d(0xb9,0xa5)]=null;}['destroy'](){for(const _0x5856d1 in this){delete this[_0x5856d1];}}}class CanvasWindField{constructor(_0xcba518){function _0x5076ac(_0x3fccec,_0x53dfa4){return _0x438df2(_0x53dfa4,_0x3fccec-0x10c);}this[_0x5076ac(0x381,0x30d)](_0xcba518);}get[_0x438df2(0x1b5,0x1b9)](){function _0x475038(_0x218771,_0xa165ce){return _0x202b54(_0xa165ce- -0x11f,_0x218771);}return this[_0x475038(-0xa0,-0x18)];}set['speedRate'](_0x4154f5){this[_0x5a595d(0x115,0xfb)]=(0x64-(_0x4154f5>0x63?0x63:_0x4154f5))*0x64;function _0x25eeda(_0x599aa6,_0x2ed6d7){return _0x202b54(_0x2ed6d7- -0x76,_0x599aa6);}function _0x5a595d(_0x1f1131,_0x4d7d62){return _0x438df2(_0x4d7d62,_0x1f1131- -0x91);}this[_0x5a595d(0x165,0xe1)]=[(this['xmax']-this['xmin'])/this[_0x25eeda(0xec,0x91)],(this['ymax']-this[_0x5a595d(0x1dc,0x1e7)])/this[_0x5a595d(0x115,0x177)]];}get['maxAge'](){return this['_maxAge'];}set[_0x438df2(0x251,0x265)](_0x4ea28e){function _0x2ef8f1(_0x29d67d,_0x3eaea0){return _0x438df2(_0x3eaea0,_0x29d67d- -0x38b);}this[_0x2ef8f1(-0x121,-0x161)]=_0x4ea28e;}['setOptions'](_0x41da57){this[_0x4df42b(0x4fd,0x568)]=_0x41da57,this['maxAge']=_0x41da57['maxAge']||0x78;function _0x47e1ec(_0x440823,_0x4b25a2){return _0x202b54(_0x4b25a2-0x310,_0x440823);}this[_0x47e1ec(0x466,0x42a)]=_0x41da57[_0x47e1ec(0x3ab,0x42a)]||0x32,this[_0x47e1ec(0x4f7,0x4d4)]=[];const _0x4ac40a=_0x41da57[_0x4df42b(0x585,0x5ae)]||0x1000;function _0x4df42b(_0xb5a414,_0x275fc9){return _0x202b54(_0xb5a414-0x405,_0x275fc9);}for(let _0xa4d12c=0x0;_0xa4d12c<_0x4ac40a;_0xa4d12c++){const _0x5acd53=this[_0x4df42b(0x534,0x54d)](new CanvasParticle());this['particles'][_0x4df42b(0x53d,0x54f)](_0x5acd53);}}[_0x202b54(0x118,0x17b)](_0x394c4a){this['rows']=_0x394c4a['rows'],this[_0x1a3407(-0x29d,-0x2cd)]=_0x394c4a['cols'],this['xmin']=_0x394c4a['xmin'],this['xmax']=_0x394c4a[_0x1a3407(-0x1fe,-0x22a)],this[_0x1a3407(-0x1ce,-0x1a6)]=_0x394c4a['ymin'],this['ymax']=_0x394c4a['ymax'],this[_0x1a3407(-0x23d,-0x251)]=[];const _0x99ae05=_0x394c4a[_0x1a3407(-0x27f,-0x24a)],_0x5c16ab=_0x394c4a[_0x342f51(0x3ea,0x3c8)];function _0x1a3407(_0x5d10de,_0x5c3c2d){return _0x202b54(_0x5d10de- -0x39c,_0x5c3c2d);}let _0x1a06d1=![];_0x99ae05[_0x1a3407(-0x236,-0x28a)]===this[_0x342f51(0x48c,0x46c)]&&_0x99ae05[0x0][_0x1a3407(-0x236,-0x22e)]===this[_0x1a3407(-0x29d,-0x227)]&&(_0x1a06d1=!![]);let _0x521eb7=0x0,_0x2aae22=null,_0x18c91e=null;function _0x342f51(_0x28fe2d,_0x38deb6){return _0x202b54(_0x38deb6-0x2bc,_0x28fe2d);}for(let _0x9b85f4=0x0;_0x9b85f4<this['rows'];_0x9b85f4++){_0x2aae22=[];for(let _0x2014b8=0x0;_0x2014b8<this[_0x342f51(0x429,0x3bb)];_0x2014b8++,_0x521eb7++){_0x1a06d1?_0x18c91e=this[_0x342f51(0x375,0x3c0)](_0x99ae05[_0x9b85f4][_0x2014b8],_0x5c16ab[_0x9b85f4][_0x2014b8]):_0x18c91e=this['_calcUV'](_0x99ae05[_0x521eb7],_0x5c16ab[_0x521eb7]),_0x2aae22['push'](_0x18c91e);}this['grid']['push'](_0x2aae22);}!this[_0x1a3407(-0x2a4,-0x29e)][_0x342f51(0x371,0x3cc)]&&this['grid'][_0x342f51(0x43c,0x40f)]();}[_0x438df2(0x233,0x2a3)](){delete this['rows'];function _0x11f329(_0x34f45d,_0x3c0962){return _0x438df2(_0x34f45d,_0x3c0962-0x2d9);}function _0x5c7dfc(_0x70ec98,_0x440fd1){return _0x202b54(_0x70ec98- -0x1ad,_0x440fd1);}delete this['cols'],delete this[_0x11f329(0x570,0x57d)],delete this[_0x5c7dfc(-0xf,0xf)],delete this['ymin'],delete this['ymax'],delete this[_0x5c7dfc(-0x4e,-0x95)],delete this[_0x5c7dfc(0x17,-0x65)];}[_0x202b54(0x1a8,0x13e)](_0x537ae8,_0x337388){const _0x500c08=(_0x537ae8-this['xmin'])/(this['xmax']-this[_0xac06c8(0xac,0xc6)])*(this[_0xac06c8(-0x5a,-0xdb)]-0x1);function _0xac06c8(_0x2441b4,_0x34cdc4){return _0x202b54(_0x2441b4- -0x159,_0x34cdc4);}const _0x42b32a=(this['ymax']-_0x337388)/(this['ymax']-this[_0x259923(0x52c,0x5b9)])*(this[_0xac06c8(0x57,0x96)]-0x1);function _0x259923(_0x17a904,_0x3a14fc){return _0x202b54(_0x17a904-0x35e,_0x3a14fc);}return[_0x500c08,_0x42b32a];}[_0x202b54(0x192,0x181)](_0x539577,_0x33d606){function _0xd709ae(_0x36b3f1,_0x35e0ff){return _0x438df2(_0x36b3f1,_0x35e0ff-0x7c);}if(_0x539577<0x0||_0x539577>=this[_0xd709ae(0x26c,0x21a)]||_0x33d606>=this['rows'])return[0x0,0x0,0x0];const _0x1f9b05=Math['floor'](_0x539577),_0x42434d=Math['floor'](_0x33d606);if(_0x1f9b05===_0x539577&&_0x42434d===_0x33d606)return this['grid'][_0x33d606][_0x539577];const _0x4c8e12=_0x1f9b05+0x1,_0x107229=_0x42434d+0x1,_0x4898c9=this['getUVByXY'](_0x1f9b05,_0x42434d),_0x490758=this[_0xd709ae(0x291,0x2ad)](_0x4c8e12,_0x42434d),_0x3e674f=this['getUVByXY'](_0x1f9b05,_0x107229);function _0x3eb7c1(_0x18e71c,_0x557ac9){return _0x202b54(_0x18e71c-0x69,_0x557ac9);}const _0x1a22ed=this['getUVByXY'](_0x4c8e12,_0x107229);let _0x336c18=null;try{_0x336c18=this[_0xd709ae(0x290,0x21c)](_0x539577-_0x1f9b05,_0x33d606-_0x42434d,_0x4898c9,_0x490758,_0x3e674f,_0x1a22ed);}catch(_0x50d589){console[_0x3eb7c1(0x224,0x262)](_0x539577,_0x33d606);}return _0x336c18;}[_0x202b54(0x101,0x14c)](_0x3ec7c4,_0x50566b,_0x2a2733,_0x3ae027,_0x276edf,_0x3ec4af){const _0x5b5814=0x1-_0x3ec7c4,_0x14844f=0x1-_0x50566b,_0x420ee1=_0x5b5814*_0x14844f,_0x560eaa=_0x3ec7c4*_0x14844f,_0x3925e1=_0x5b5814*_0x50566b,_0x12dc99=_0x3ec7c4*_0x50566b,_0x4b6075=_0x2a2733[0x0]*_0x420ee1+_0x3ae027[0x0]*_0x560eaa+_0x276edf[0x0]*_0x3925e1+_0x3ec4af[0x0]*_0x12dc99,_0x13f1fb=_0x2a2733[0x1]*_0x420ee1+_0x3ae027[0x1]*_0x560eaa+_0x276edf[0x1]*_0x3925e1+_0x3ec4af[0x1]*_0x12dc99;return this['_calcUV'](_0x4b6075,_0x13f1fb);}[_0x438df2(0x20c,0x1a3)](_0x20078b,_0x522400){return[+_0x20078b,+_0x522400,Math['sqrt'](_0x20078b*_0x20078b+_0x522400*_0x522400)];}[_0x438df2(0x1c1,0x1fa)](_0x3e400a,_0x1cd609){if(!this[_0x17edaa(-0x1c7,-0x1eb)](_0x3e400a,_0x1cd609))return null;const _0x3fdc4b=this['toGridXY'](_0x3e400a,_0x1cd609),_0x2ce895=this['getUVByXY'](_0x3fdc4b[0x0],_0x3fdc4b[0x1]);function _0x17edaa(_0x5c1e26,_0x2b5160){return _0x202b54(_0x5c1e26- -0x363,_0x2b5160);}return _0x2ce895;}[_0x438df2(0x1ca,0x23b)](_0x2008e9,_0x49b2f6){function _0x35f141(_0x350640,_0x422ebb){return _0x202b54(_0x350640-0xc2,_0x422ebb);}function _0x26fc57(_0xc17e8f,_0x57262c){return _0x202b54(_0x57262c-0x3b,_0xc17e8f);}return _0x2008e9>=this['xmin']&&_0x2008e9<=this[_0x26fc57(0x184,0x1d9)]&&_0x49b2f6>=this[_0x26fc57(0x1dd,0x209)]&&_0x49b2f6<=this['ymax']?!![]:![];}['getRandomLatLng'](){function _0x4423e3(_0x35010f,_0x57796f){return _0x202b54(_0x57796f- -0x10a,_0x35010f);}const _0xec1a43=fRandomByfloat(this['xmin'],this['xmax']),_0x57fead=fRandomByfloat(this['ymin'],this['ymax']),_0x4ec084={};_0x4ec084[_0x4423e3(-0x3a,0x2b)]=_0x57fead;function _0x50f503(_0x1c9c73,_0x585fdb){return _0x202b54(_0x1c9c73- -0x6a,_0x585fdb);}return _0x4ec084[_0x50f503(0x9f,0x10b)]=_0xec1a43,_0x4ec084;}[_0x438df2(0x212,0x1b8)](){let _0x21c830,_0x1f9e8a,_0x88eb96;function _0x149339(_0x5d326e,_0x22c7c8){return _0x438df2(_0x5d326e,_0x22c7c8- -0xd5);}for(let _0x3971f4=0x0,_0xfdc2e8=this[_0x2523b8(0x443,0x3cd)][_0x149339(0x15e,0x130)];_0x3971f4<_0xfdc2e8;_0x3971f4++){let _0x3b2730=this[_0x149339(0x130,0x18e)][_0x3971f4];_0x3b2730[_0x149339(0x195,0x14f)]<=0x0&&(_0x3b2730=this[_0x149339(0xaa,0xf9)](_0x3b2730));if(_0x3b2730[_0x149339(0x1b3,0x14f)]>0x0){const _0x2865b8=_0x3b2730[_0x149339(0x146,0x1cd)],_0x40f053=_0x3b2730[_0x149339(0xff,0xd5)];_0x88eb96=this[_0x149339(0x1a9,0x125)](_0x2865b8,_0x40f053),_0x88eb96?(_0x21c830=_0x2865b8+this['_calc_speedRate'][0x0]*_0x88eb96[0x0],_0x1f9e8a=_0x40f053+this[_0x149339(0x148,0x121)][0x1]*_0x88eb96[0x1],_0x3b2730[_0x2523b8(0x388,0x3af)]=_0x2865b8,_0x3b2730[_0x2523b8(0x3b4,0x3b3)]=_0x40f053,_0x3b2730[_0x149339(0x198,0x1cd)]=_0x21c830,_0x3b2730['tlat']=_0x1f9e8a,_0x3b2730['speed']=_0x88eb96[0x2],_0x3b2730['age']--):_0x3b2730[_0x149339(0x13e,0x14f)]=0x0;}}function _0x2523b8(_0x2074f3,_0x2c0e9b){return _0x438df2(_0x2c0e9b,_0x2074f3-0x1e0);}return this[_0x149339(0x18f,0x18e)];}[_0x202b54(0x12f,0x17b)](_0x2c364a){let _0x5e529f,_0x4a8e68;for(let _0x49b592=0x0;_0x49b592<0x1e;_0x49b592++){_0x5e529f=this[_0x5c4bd0(0x5c9,0x544)](),_0x4a8e68=this['getUVByPoint'](_0x5e529f[_0x5c4bd0(0x459,0x485)],_0x5e529f['lat']);if(_0x4a8e68&&_0x4a8e68[0x2]>0x0)break;}if(!_0x4a8e68)return _0x2c364a;const _0x5174b3=_0x5e529f[_0x383ba9(0x145,0x13b)]+this['_calc_speedRate'][0x0]*_0x4a8e68[0x0],_0x20bc0c=_0x5e529f[_0x383ba9(0x171,0x177)]+this[_0x383ba9(0x193,0x1c8)][0x1]*_0x4a8e68[0x1];_0x2c364a['lng']=_0x5e529f['lng'],_0x2c364a[_0x5c4bd0(0x45a,0x4b1)]=_0x5e529f[_0x383ba9(0x171,0x1fa)],_0x2c364a['tlng']=_0x5174b3,_0x2c364a[_0x5c4bd0(0x440,0x487)]=_0x20bc0c;function _0x5c4bd0(_0x812c23,_0x200c42){return _0x438df2(_0x812c23,_0x200c42-0x2dd);}_0x2c364a['age']=Math[_0x5c4bd0(0x503,0x504)](0xa+Math['random']()*this[_0x383ba9(0x202,0x19d)]),_0x2c364a[_0x5c4bd0(0x5c2,0x584)]=_0x4a8e68[0x2];function _0x383ba9(_0x4b9957,_0x4d059d){return _0x202b54(_0x4b9957-0x3c,_0x4d059d);}return _0x2c364a;}['destroy'](){for(const _0x1edf76 in this){delete this[_0x1edf76];}}}function fRandomByfloat(_0x49319e,_0x49e2dd){return _0x49319e+Math['random']()*(_0x49e2dd-_0x49319e);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x202b54(0xfb,0x161)];class CanvasWindLayer extends BaseLayer{constructor(_0x13f67a={}){super(_0x13f67a),this['_setOptionsHook'](_0x13f67a),this['canvas']=null;function _0x22aeb2(_0x141da0,_0x102ee3){return _0x202b54(_0x102ee3-0x270,_0x141da0);}function _0x2ee48a(_0x5d196f,_0x2a8947){return _0x202b54(_0x5d196f- -0x222,_0x2a8947);}_0x13f67a['colors']&&_0x13f67a[_0x2ee48a(-0xa7,-0x7b)]&&(this[_0x2ee48a(-0x61,-0x6c)]=new mars3d__namespace[(_0x2ee48a(-0x93,-0x6c))](_0x13f67a));}[_0x202b54(0x1f7,0x1cb)](_0x2e3038,_0x366d47){function _0x5d9698(_0x3a3161,_0x1817ac){return _0x202b54(_0x3a3161- -0x2de,_0x1817ac);}this['frameTime']=0x3e8/(_0x2e3038[_0x5d9698(-0x193,-0x126)]||0xa),this[_0x5d9698(-0x13f,-0x142)]=this[_0x5d9698(-0x1e6,-0x238)][_0x4e73d1(0x305,0x351)]??![];function _0x4e73d1(_0x465c10,_0x4e6481){return _0x202b54(_0x4e6481-0x20c,_0x465c10);}this[_0x5d9698(-0x14d,-0x1a7)]=_0x2e3038['color']||_0x5d9698(-0x146,-0x122),this['lineWidth']=_0x2e3038['lineWidth']||0x1,this[_0x4e73d1(0x329,0x346)]=_0x2e3038[_0x5d9698(-0x1a4,-0x19d)]??0x0,this['flipY']=_0x2e3038['flipY']??![],this['windField']&&this[_0x5d9698(-0x162,-0x1a6)]['setOptions'](_0x2e3038);}get['layer'](){return this['canvas'];}get[_0x202b54(0x139,0xc3)](){return this['_map']['scene']['canvas']['clientWidth'];}get[_0x202b54(0x1ea,0x1e2)](){return this['_map']['scene']['canvas']['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x202b54(0x145,0x16d)](_0x2f7319){this['_pointerEvents']=_0x2f7319;function _0x5cee93(_0x489bdc,_0x2de7ba){return _0x202b54(_0x2de7ba- -0x18f,_0x489bdc);}if(!this[_0x1657a5(0x388,0x3e4)])return;function _0x1657a5(_0x10c1ec,_0x14e29a){return _0x202b54(_0x10c1ec-0x21f,_0x14e29a);}_0x2f7319?this['canvas'][_0x1657a5(0x3d0,0x434)]['pointer-events']='all':this['canvas'][_0x1657a5(0x3d0,0x362)]['pointer-events']=_0x1657a5(0x34d,0x3d1);}get['particlesNumber'](){function _0x325997(_0x4579dd,_0x449379){return _0x438df2(_0x4579dd,_0x449379- -0x94);}function _0x5e6878(_0x312040,_0x3d583d){return _0x438df2(_0x3d583d,_0x312040- -0x77);}return this[_0x5e6878(0x120,0x130)][_0x325997(0x106,0x18b)];}set[_0x438df2(0x1e6,0x21f)](_0x43250f){function _0x5d6728(_0xebf3b7,_0x496c39){return _0x202b54(_0xebf3b7-0x105,_0x496c39);}function _0x1faf6d(_0x53ca60,_0x18e96b){return _0x438df2(_0x18e96b,_0x53ca60- -0x1e7);}this[_0x5d6728(0x1fd,0x173)][_0x1faf6d(0x38,0x64)]=_0x43250f,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x36e51b(_0x247691,_0x2c3a75){return _0x438df2(_0x247691,_0x2c3a75- -0x23d);}return this['options'][_0x36e51b(-0x2,-0x84)];}set[_0x202b54(0x11a,0x134)](_0x5ba364){this['options']['speedRate']=_0x5ba364,this['windField']&&(this['windField']['speedRate']=_0x5ba364);}get['maxAge'](){function _0x354788(_0x177148,_0x1221d5){return _0x202b54(_0x177148-0x300,_0x1221d5);}return this[_0x354788(0x3f8,0x463)]['maxAge'];}set[_0x202b54(0x1c6,0x13a)](_0xb4857f){function _0x47f35e(_0x69d386,_0x49eea2){return _0x438df2(_0x49eea2,_0x69d386- -0x2ab);}this[_0x23f5bc(-0x7,-0x53)]['maxAge']=_0xb4857f;function _0x23f5bc(_0xcb9620,_0x3e4a7b){return _0x438df2(_0xcb9620,_0x3e4a7b- -0x1ea);}this[_0x23f5bc(0xb,0x31)]&&(this['windField']['maxAge']=_0xb4857f);}get['data'](){return this['windData'];}set['data'](_0x86d815){this['setData'](_0x86d815);}get[_0x202b54(0x1a4,0x1a8)](){let _0x169fda=this['windData'][_0x5b5b5c(-0x6,-0x64)],_0x1eba1a=this[_0x5b5b5c(-0x97,-0xdc)][_0x47b378(-0x127,-0xf8)],_0x1ad825=this['windData'][_0x5b5b5c(-0x3d,-0x46)],_0x491725=this['windData'][_0x47b378(-0x14d,-0x1a1)];_0x1eba1a>=0x167&&_0x169fda===0x0&&(_0x169fda=-0xb4,_0x1eba1a=0xb4);_0x169fda=Math[_0x47b378(-0xde,-0x159)](_0x169fda,-0xb4);function _0x47b378(_0x33fbc9,_0x5eb8a4){return _0x202b54(_0x5eb8a4- -0x296,_0x33fbc9);}_0x1eba1a=Math['min'](_0x1eba1a,0xb4);function _0x5b5b5c(_0x20f4fc,_0x625697){return _0x438df2(_0x625697,_0x20f4fc- -0x2aa);}return _0x1ad825=Math[_0x5b5b5c(-0xce,-0x84)](_0x1ad825,-0x5a),_0x491725=Math['min'](_0x491725,0x5a),Cesium['Rectangle']['fromDegrees'](_0x169fda,_0x1ad825,_0x1eba1a,_0x491725);}['_showHook'](_0x296f0e){function _0x4bc6ec(_0x480aa5,_0x38da2c){return _0x438df2(_0x38da2c,_0x480aa5-0xeb);}function _0x1ac9e2(_0x409ade,_0x1effc3){return _0x438df2(_0x1effc3,_0x409ade- -0x1bb);}_0x296f0e?this[_0x1ac9e2(0x15,0x83)]():(this['windData']&&(this['options'][_0x1ac9e2(0x25,0xa7)]=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x425b78(_0x310362,_0x30d49c){return _0x202b54(_0x30d49c- -0x13d,_0x310362);}function _0x583c15(_0x1132c1,_0x2edfb9){return _0x438df2(_0x2edfb9,_0x1132c1-0x2b6);}this[_0x583c15(0x44d,0x3c1)]['worker']?this['initWorker']():this[_0x583c15(0x4d1,0x4d3)]=new CanvasWindField(this['options']);}['_addedHook'](){function _0x2e3698(_0x5fcc88,_0x1351ec){return _0x202b54(_0x5fcc88- -0x2bc,_0x1351ec);}this['canvas']=this['_createCanvas']();const _0x102ac7={};function _0x444b16(_0x462dcc,_0xff65fd){return _0x438df2(_0xff65fd,_0x462dcc- -0x1d8);}_0x102ac7['willReadFrequently']=!![],this[_0x2e3698(-0x17e,-0x111)]=this[_0x2e3698(-0x153,-0x15e)][_0x2e3698(-0x11f,-0x9d)]('2d',_0x102ac7),this['bindEvent'](),this['options'][_0x2e3698(-0x17b,-0x1ab)]&&this[_0x2e3698(-0x119,-0xb0)](this['options']['data']);}[_0x202b54(0x181,0x1c0)](){this['clear'](),this[_0x524236(0x3b3,0x370)]();function _0x349410(_0x1259eb,_0x44315d){return _0x202b54(_0x44315d-0x191,_0x1259eb);}function _0x524236(_0x2d7496,_0x4c28c1){return _0x202b54(_0x4c28c1-0x239,_0x2d7496);}this['canvas']&&(this['_map']['container']['removeChild'](this['canvas']),delete this[_0x349410(0x26f,0x2fa)]);}[_0x202b54(0x134,0xc4)](){const _0x42214=mars3d__namespace['DomUtil']['create']('canvas','mars3d-canvasWind',this['_map'][_0x540b7a(-0xb3,-0xc8)]);_0x42214['style']['position']='absolute';function _0x540b7a(_0x1718c6,_0x534e98){return _0x202b54(_0x534e98- -0x268,_0x1718c6);}_0x42214['style'][_0x11d151(-0x89,-0x26)]='0px';function _0x11d151(_0x1c5b5f,_0x361abd){return _0x202b54(_0x1c5b5f- -0x1aa,_0x361abd);}return _0x42214['style']['left']=_0x11d151(0x29,0x83),_0x42214[_0x540b7a(-0x137,-0xb7)]['width']=this['_map']['scene']['canvas'][_0x11d151(-0x10,-0x88)]+'px',_0x42214['style'][_0x540b7a(0x17,-0x73)]=this['_map'][_0x11d151(0x2a,-0x27)]['canvas']['clientHeight']+'px',_0x42214[_0x540b7a(-0xcb,-0xb7)]['pointerEvents']=this[_0x11d151(-0xb,0x64)]?'auto':'none',_0x42214['style'][_0x540b7a(-0xda,-0x5a)]=this['options'][_0x540b7a(-0x73,-0x5a)]??0x9,_0x42214[_0x11d151(-0x43,-0xd1)]=this[_0x11d151(0x13,-0xe)][_0x540b7a(-0x95,-0x94)]['canvas']['clientWidth'],_0x42214['height']=this['_map'][_0x540b7a(-0x111,-0x94)]['canvas']['clientHeight'],_0x42214;}['resize'](){function _0x489db2(_0x2e8673,_0x430b71){return _0x438df2(_0x2e8673,_0x430b71- -0x319);}function _0x5b8208(_0x23d672,_0x240125){return _0x202b54(_0x240125- -0x332,_0x23d672);}this['canvas']&&(this['canvas'][_0x489db2(-0x53,-0xc9)][_0x5b8208(-0x256,-0x1cb)]=this[_0x489db2(-0x87,-0xbd)][_0x5b8208(-0x16e,-0x15e)][_0x5b8208(-0x154,-0x1c9)]['clientWidth']+'px',this['canvas']['style']['height']=this[_0x489db2(-0x125,-0xbd)][_0x5b8208(-0x11e,-0x15e)]['canvas']['clientHeight']+'px',this[_0x489db2(-0x145,-0x111)][_0x5b8208(-0x1e3,-0x1cb)]=this['_map']['scene'][_0x5b8208(-0x229,-0x1c9)]['clientWidth'],this[_0x489db2(-0x179,-0x111)][_0x489db2(-0x35,-0x85)]=this['_map'][_0x489db2(-0x3b,-0xa6)][_0x489db2(-0x100,-0x111)]['clientHeight']);}['bindEvent'](){const _0x36719e=this;function _0x5d3afb(_0x3470f0,_0x4f67a6){return _0x438df2(_0x3470f0,_0x4f67a6-0x180);}let _0x3ab7cd=Date[_0x215985(-0x62,-0x81)]();(function _0x3d1765(){function _0x8703ec(_0xc3dbc8,_0x23a3c7){return _0x215985(_0x23a3c7,_0xc3dbc8-0x187);}if(_0x36719e[_0x8703ec(0xf3,0x145)])return;_0x36719e[_0x844059(0x63c,0x5e2)]=window[_0x8703ec(0x180,0x132)](_0x3d1765);function _0x844059(_0x323ca7,_0x411d66){return _0x215985(_0x323ca7,_0x411d66-0x626);}if(_0x36719e['show']&&_0x36719e[_0x8703ec(0x103,0x14d)]){const _0x1d1427=Date['now'](),_0x19a2c4=_0x1d1427-_0x3ab7cd;_0x19a2c4>_0x36719e['frameTime']&&(_0x3ab7cd=_0x1d1427-_0x19a2c4%_0x36719e[_0x8703ec(0x136,0xf8)],_0x36719e['update']());}}());function _0x215985(_0x2a9530,_0x2cb3d1){return _0x438df2(_0x2a9530,_0x2cb3d1- -0x29f);}window['addEventListener'](_0x215985(-0x10a,-0x7c),this[_0x5d3afb(0x32e,0x3a3)]['bind'](this),![]),this['mouse_down']=![],this['mouse_move']=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x5d3afb(0x3e2,0x3cb)][_0x215985(-0x92,-0xca)],this[_0x5d3afb(0x399,0x410)],this),this[_0x215985(0x31,-0x43)]['on'](mars3d__namespace['EventType'][_0x5d3afb(0x33d,0x333)],this['_onMouseDownEvent'],this),this[_0x5d3afb(0x453,0x3dc)]['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this));}['unbindEvent'](){window['cancelAnimationFrame'](this['_animateFrame']);function _0x5c3923(_0x519d11,_0xc8c139){return _0x202b54(_0xc8c139- -0x19b,_0x519d11);}delete this[_0x5de954(0x8a,0xf7)];function _0x5de954(_0x35bd97,_0x55cd7d){return _0x438df2(_0x55cd7d,_0x35bd97- -0x1d1);}window['removeEventListener']('resize',this[_0x5c3923(-0x45,-0x17)]),this['options']['mouseHidden']&&(this[_0x5de954(0x8b,0x64)]['off'](mars3d__namespace['EventType']['wheel'],this[_0x5de954(0xbf,0x108)],this),this['_map'][_0x5de954(-0x1b,0x31)](mars3d__namespace['EventType'][_0x5c3923(-0x25,-0x87)],this[_0x5c3923(-0x81,-0x19)],this),this[_0x5de954(0x8b,0x85)]['off'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this['_map'][_0x5c3923(-0xe5,-0x84)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x4af498){clearTimeout(this[_0x2641f5(0x85,0xbd)]);if(!this[_0x2641f5(0x86,0xe6)]||!this['canvas'])return;function _0x2641f5(_0x59e77b,_0x151a90){return _0x438df2(_0x59e77b,_0x151a90- -0x1ab);}this['canvas'][_0x4c2b00(0x16c,0x1c9)]['visibility']='hidden';function _0x4c2b00(_0x13e054,_0x1adef1){return _0x202b54(_0x1adef1-0x18,_0x13e054);}this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;function _0x36bfda(_0x4fe667,_0x27d180){return _0x4c2b00(_0x27d180,_0x4fe667-0x11);}this['redraw'](),this['canvas'][_0x36bfda(0x1da,0x215)]['visibility']='visible';},0xc8);}[_0x438df2(0x1dc,0x221)](_0x585c39){this['mouse_down']=!![];function _0x3fc654(_0x40f483,_0x11e31b){return _0x202b54(_0x40f483-0x3e7,_0x11e31b);}this[_0x5ca51e(0x1aa,0x18f)][_0x3fc654(0x4fe,0x57d)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0x5ca51e(_0x589df9,_0x4bc952){return _0x438df2(_0x4bc952,_0x589df9- -0xb2);}this[_0x5ca51e(0x1aa,0x1bc)]['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x4b1b00){function _0x44cfd6(_0x4df8fc,_0xe3fe8d){return _0x438df2(_0xe3fe8d,_0x4df8fc-0x17e);}function _0x1e8906(_0x46718e,_0x440f4b){return _0x202b54(_0x46718e-0x127,_0x440f4b);}if(!this['show']||!this[_0x1e8906(0x290,0x2a6)])return;this['mouse_down']&&(this['canvas'][_0x44cfd6(0x3ce,0x43e)][_0x1e8906(0x297,0x22d)]=_0x1e8906(0x281,0x2d2),this[_0x1e8906(0x288,0x267)]=!![]);}[_0x202b54(0xfe,0x16b)](_0x9af609){if(!this[_0x596929(0x75,0x16)]||!this['canvas'])return;this[_0x5c1cc2(-0x23,0xa)][_0x5c1cc2(-0xc9,-0x66)](mars3d__namespace[_0x5c1cc2(-0x34,0xb)][_0x5c1cc2(-0x66,-0x3f)],this['_onMouseMoveEvent'],this);function _0x5c1cc2(_0x18e169,_0x10cb47){return _0x202b54(_0x18e169- -0x1e0,_0x10cb47);}this[_0x5c1cc2(-0xe0,-0x105)]&&this[_0x5c1cc2(-0x7f,-0x8b)]&&this[_0x596929(-0xc0,-0xa1)]();this[_0x5c1cc2(-0x77,-0xe3)]['style']['visibility']='visible',this['mouse_down']=![];function _0x596929(_0x4a1a7a,_0x16d568){return _0x438df2(_0x4a1a7a,_0x16d568- -0x27b);}this['mouse_move']=![];}['setData'](_0x519d39){this['clear'](),this['windData']=_0x519d39;function _0x3aa7aa(_0x278246,_0x2af3ab){return _0x202b54(_0x278246- -0x232,_0x2af3ab);}this[_0x3aa7aa(-0xb6,-0xbc)][_0x3aa7aa(-0x11a,-0x15e)](_0x519d39);function _0x58056a(_0x33e2b5,_0x435fb8){return _0x202b54(_0x33e2b5-0x90,_0x435fb8);}this['redraw']();}[_0x202b54(0x13b,0x1a2)](){function _0x8858fa(_0x5d09b7,_0x3de293){return _0x438df2(_0x5d09b7,_0x3de293-0x58);}function _0x25567e(_0x18d241,_0x546f9b){return _0x438df2(_0x18d241,_0x546f9b- -0x237);}if(!this['show'])return;this[_0x8858fa(0x1e4,0x273)][_0x25567e(-0x48,0x3e)](this['options']),this['update']();}[_0x438df2(0x1a1,0x1db)](){function _0x25a10d(_0x35536b,_0x1793af){return _0x202b54(_0x1793af-0x1ad,_0x35536b);}if(this[_0x246ba9(-0x4e,-0xb3)])return;this['_updateIng']=!![];function _0x246ba9(_0x4eaf31,_0x3c210c){return _0x202b54(_0x3c210c- -0x273,_0x4eaf31);}if(this[_0x246ba9(-0x121,-0x141)])this['windField']['update']();else{const _0x2c0c28=this[_0x246ba9(-0x7e,-0xf7)][_0x25a10d(0x311,0x2c6)]();this[_0x25a10d(0x3ad,0x3a1)](_0x2c0c28);}this['_updateIng']=![];}[_0x202b54(0x1f4,0x274)](_0x16df0c){this[_0x22fb8c(0x4cc,0x479)]=_0x16df0c;function _0xed020e(_0x48872e,_0x1c4eca){return _0x438df2(_0x1c4eca,_0x48872e-0x2a8);}this['canvasContext']['globalCompositeOperation']='destination-in',this[_0x22fb8c(0x409,0x43a)]['fillRect'](0x0,0x0,this[_0x22fb8c(0x473,0x435)],this['canvasHeight']),this[_0x22fb8c(0x435,0x43a)][_0x22fb8c(0x4c2,0x4fb)]='lighter';function _0x22fb8c(_0x5c6f56,_0x45e33a){return _0x438df2(_0x5c6f56,_0x45e33a-0x25d);}this[_0x22fb8c(0x46a,0x43a)]['globalAlpha']=0.9;const _0x73d350=this['_map']['scene']['mode']!==Cesium['SceneMode']['SCENE3D'],_0x24eba6=this[_0x22fb8c(0x440,0x435)]*0.25;if(this['_colorRamp'])for(let _0x2fdc8e=0x0,_0x175247=_0x16df0c['length'];_0x2fdc8e<_0x175247;_0x2fdc8e++){const _0x54d908=_0x16df0c[_0x2fdc8e],_0xd1ace0=this['_tomap'](_0x54d908,_0x54d908['lng'],_0x54d908['lat'],_0x54d908[_0xed020e(0x547,0x5c4)]),_0x2c6eba=this['_tomap'](_0x54d908,_0x54d908[_0xed020e(0x54a,0x5cf)],_0x54d908['tlat'],_0x54d908[_0xed020e(0x46b,0x44e)]);if(!_0xd1ace0||!_0x2c6eba)continue;if(_0x73d350&&Math['abs'](_0xd1ace0[0x0]-_0x2c6eba[0x0])>=_0x24eba6)continue;this['canvasContext'][_0xed020e(0x527,0x53b)](),this['canvasContext'][_0x22fb8c(0x488,0x49e)]=this[_0xed020e(0x4e9,0x48f)],this['canvasContext']['strokeStyle']=this[_0xed020e(0x508,0x540)][_0x22fb8c(0x4f3,0x4be)](_0x54d908[_0x22fb8c(0x510,0x504)]),this[_0x22fb8c(0x48c,0x43a)][_0xed020e(0x4ce,0x505)](_0xd1ace0[0x0],_0xd1ace0[0x1]),this[_0x22fb8c(0x430,0x43a)][_0xed020e(0x4ac,0x48f)](_0x2c6eba[0x0],_0x2c6eba[0x1]),this['canvasContext']['stroke']();}else{this['canvasContext'][_0x22fb8c(0x4bb,0x4dc)](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this['color'];for(let _0x5c56f0=0x0,_0x5b6811=_0x16df0c['length'];_0x5c56f0<_0x5b6811;_0x5c56f0++){const _0x4bb827=_0x16df0c[_0x5c56f0],_0x4015c5=this['_tomap'](_0x4bb827,_0x4bb827['lng'],_0x4bb827[_0xed020e(0x47c,0x4a9)],_0x4bb827['alt']),_0x2157c0=this[_0x22fb8c(0x4bc,0x50b)](_0x4bb827,_0x4bb827['tlng'],_0x4bb827['tlat'],_0x4bb827['talt']);if(!_0x4015c5||!_0x2157c0)continue;if(_0x73d350&&Math[_0xed020e(0x46d,0x4e7)](_0x4015c5[0x0]-_0x2157c0[0x0])>=_0x24eba6)continue;this['canvasContext'][_0xed020e(0x4ce,0x4e9)](_0x4015c5[0x0],_0x4015c5[0x1]),this['canvasContext'][_0x22fb8c(0x3d9,0x461)](_0x2157c0[0x0],_0x2157c0[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x1e612e,_0x46abff,_0x43ac5e,_0x2d4f87){const _0x5ac5f5=Cesium[_0x222d51(0x15a,0x12c)]['fromDegrees'](_0x46abff,_0x43ac5e,_0x2d4f87??this['fixedHeight']),_0x208c12=this['_map'][_0x2c929c(0x3a1,0x3f3)];function _0x222d51(_0x4d4f1c,_0x3a1a6a){return _0x202b54(_0x4d4f1c- -0x7d,_0x3a1a6a);}function _0x2c929c(_0x1d33c8,_0x324cca){return _0x438df2(_0x324cca,_0x1d33c8-0x12e);}if(_0x208c12['mode']===Cesium['SceneMode'][_0x2c929c(0x3a9,0x36d)]){const _0x3dd208=new Cesium['EllipsoidalOccluder'](_0x208c12[_0x2c929c(0x2d5,0x25e)][_0x2c929c(0x2de,0x340)],_0x208c12['camera']['positionWC']),_0x4f3dda=_0x3dd208[_0x2c929c(0x2c7,0x2e3)](_0x5ac5f5);if(!_0x4f3dda)return _0x1e612e['age']=0x0,null;}const _0x335fb5=mars3d__namespace['PointTrans'][_0x222d51(0x9f,0xfc)](this['_map']['scene'],_0x5ac5f5);return _0x335fb5?[_0x335fb5['x'],_0x335fb5['y']]:null;}['clear'](){function _0xfe57b(_0x1798c7,_0x287ec6){return _0x202b54(_0x287ec6- -0x72,_0x1798c7);}function _0x1096bb(_0x3b3380,_0x322548){return _0x438df2(_0x322548,_0x3b3380- -0x151);}this[_0x1096bb(0xca,0xf4)]['clear'](),delete this[_0x1096bb(0xc2,0x7f)];}[_0x438df2(0x1d2,0x1a2)](){this[_0x1023b9(0xb0,0xf8)]=new Worker(this[_0x54ca52(-0x1ba,-0x166)][_0x1023b9(0xb0,0x116)]);function _0x54ca52(_0x3d9b07,_0x302c4e){return _0x438df2(_0x302c4e,_0x3d9b07- -0x351);}this['worker'][_0x54ca52(-0xbf,-0xd9)]=_0x2d7865=>{function _0x635932(_0x386db3,_0x47eb1e){return _0x54ca52(_0x47eb1e-0x25f,_0x386db3);}function _0x2538a8(_0x46f101,_0x23b0a8){return _0x54ca52(_0x23b0a8-0x2f9,_0x46f101);}this[_0x2538a8(0x27c,0x23b)](_0x2d7865['data'][_0x635932(0xe2,0x171)]),this['_updateIng2']=![];},this['windField']={'init':_0xe3795b=>{const _0x42cde4={};function _0xb7bf08(_0x30ce73,_0x3069de){return _0x54ca52(_0x3069de-0x1b2,_0x30ce73);}_0x42cde4[_0x1e5421(-0x2c7,-0x248)]='init';function _0x1e5421(_0x42c72d,_0x5006d7){return _0x1023b9(_0x5006d7- -0x31f,_0x42c72d);}_0x42cde4[_0x1e5421(-0x2ca,-0x2a9)]=_0xe3795b,this['worker']['postMessage'](_0x42cde4);},'setOptions':_0x266f1b=>{const _0x40cb56={};_0x40cb56[_0x3d9baa(0x2b4,0x265)]=_0x3d9baa(0x331,0x301);function _0x416067(_0x38b946,_0x19e5d0){return _0x54ca52(_0x38b946-0xe8,_0x19e5d0);}function _0x3d9baa(_0x3ed6b0,_0xdd9e5c){return _0x54ca52(_0x3ed6b0-0x40d,_0xdd9e5c);}_0x40cb56['options']=_0x266f1b,this['worker']['postMessage'](_0x40cb56);},'setDate':_0x2211c0=>{function _0x301e74(_0x2e7abc,_0x1fd31a){return _0x1023b9(_0x2e7abc- -0x1d5,_0x1fd31a);}const _0x5c4071={};_0x5c4071[_0x80ba29(0x322,0x2cb)]='setDate';function _0x80ba29(_0x71185a,_0x16dd78){return _0x1023b9(_0x71185a-0x24b,_0x16dd78);}_0x5c4071[_0x301e74(-0x116,-0x94)]=_0x2211c0,this['worker'][_0x301e74(-0x86,-0x109)](_0x5c4071);},'update':()=>{function _0x17204e(_0x42aac0,_0x50e57b){return _0x1023b9(_0x50e57b- -0x1f,_0x42aac0);}if(this['_updateIng2'])return;this['_updateIng2']=!![];const _0x305608={};_0x305608[_0x17204e(0xba,0xb8)]='update',this['worker']['postMessage'](_0x305608);},'clear':()=>{const _0x3df962={};function _0x4bb39a(_0x4b2d63,_0x29724d){return _0x54ca52(_0x4b2d63-0x3ce,_0x29724d);}_0x3df962[_0x31d981(-0x49,-0x6f)]=_0x31d981(0x62,0x7c);function _0x31d981(_0x4d8848,_0x4a1a25){return _0x54ca52(_0x4d8848-0x110,_0x4a1a25);}this[_0x31d981(-0x70,-0xbc)]['postMessage'](_0x3df962);}};function _0x1023b9(_0x19b134,_0xac1e6d){return _0x202b54(_0x19b134- -0x82,_0xac1e6d);}this[_0x1023b9(0xfa,0x141)][_0x54ca52(-0x18d,-0x142)](this['options']);}}mars3d__namespace['LayerUtil']['register']('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['Log']['logInfo']('mars3d-wind插件\x20注册成功'),mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer;function _0x438df2(_0x390f32,_0x4882d1){return _0x1086(_0x4882d1-0x59,_0x390f32);}exports[_0x202b54(0xfc,0x9e)]=WindLayer,exports[_0x202b54(0x1ed,0x184)]=WindUtil;const _0x5a0253={};_0x5a0253[_0x202b54(0x15e,0x124)]=!![],Object['defineProperty'](exports,_0x202b54(0x1c5,0x1f0),_0x5a0253);
}));
