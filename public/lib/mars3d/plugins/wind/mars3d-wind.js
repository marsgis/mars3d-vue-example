/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.11
 * 编译日期：2025-12-29 20:23
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x4528c0,_0x542238){const _0x479184=_0x4528c0();function _0x11e69c(_0x21659e,_0xd17a54){return _0x48a9(_0xd17a54-0x249,_0x21659e);}function _0x341881(_0x30cbea,_0x1d05f3){return _0x48a9(_0x30cbea-0xc8,_0x1d05f3);}while(!![]){try{const _0x25f189=parseInt(_0x11e69c(0x475,0x425))/0x1*(-parseInt(_0x11e69c(0x3ae,0x33f))/0x2)+parseInt(_0x11e69c(0x374,0x3b3))/0x3+-parseInt(_0x11e69c(0x37d,0x381))/0x4+-parseInt(_0x341881(0x20d,0x20e))/0x5+-parseInt(_0x341881(0x246,0x27c))/0x6+-parseInt(_0x11e69c(0x3e0,0x3d7))/0x7+parseInt(_0x11e69c(0x3a1,0x387))/0x8*(parseInt(_0x11e69c(0x34a,0x339))/0x9);if(_0x25f189===_0x542238)break;else _0x479184['push'](_0x479184['shift']());}catch(_0x80ad80){_0x479184['push'](_0x479184['shift']());}}}(_0x4f8b,0x93276));function _interopNamespace(_0xfe28c0){if(_0xfe28c0&&_0xfe28c0['__esModule'])return _0xfe28c0;var _0x2d4435=Object[_0x456eef(-0x32,-0x65)](null);_0xfe28c0&&Object[_0x32ce90(0x42,-0x17)](_0xfe28c0)[_0x456eef(-0x11f,-0x104)](function(_0x759e5c){function _0x4fe379(_0x3c651e,_0x533dc8){return _0x456eef(_0x3c651e,_0x533dc8-0x4ac);}function _0x291dea(_0xdffada,_0x5f4efe){return _0x456eef(_0x5f4efe,_0xdffada- -0xba);}if(_0x759e5c!==_0x291dea(-0x161,-0x1ba)){var _0x38b28c=Object[_0x4fe379(0x358,0x3a9)](_0xfe28c0,_0x759e5c);Object['defineProperty'](_0x2d4435,_0x759e5c,_0x38b28c['get']?_0x38b28c:{'enumerable':!![],'get':function(){return _0xfe28c0[_0x759e5c];}});}});_0x2d4435['default']=_0xfe28c0;function _0x32ce90(_0x323138,_0xf56ba8){return _0x48a9(_0xf56ba8- -0x1ae,_0x323138);}function _0x456eef(_0x26cb90,_0x6cf0f0){return _0x48a9(_0x6cf0f0- -0x209,_0x26cb90);}return _0x2d4435;}function _0x467932(_0x26019b,_0x5db491){return _0x48a9(_0x5db491- -0xa3,_0x26019b);}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x165db5,_0x3164f1){const _0x255d40=_0x165db5*Math['cos'](Cesium$2[_0x395ead(0x119,0x140)]['toRadians'](_0x3164f1));function _0x395ead(_0x55b43e,_0xde1e90){return _0x48a9(_0xde1e90-0x3,_0x55b43e);}return _0x255d40;}function getV(_0x5a25d0,_0x332f9d){const _0xa3dba6=_0x5a25d0*Math['sin'](Cesium$2['Math']['toRadians'](_0x332f9d));return _0xa3dba6;}function getSpeed(_0x5afe93,_0x5d6d20){function _0x5d9d01(_0x5be7f1,_0x272477){return _0x48a9(_0x272477- -0x36,_0x5be7f1);}function _0x1dcf8b(_0x232dc5,_0x36dbe7){return _0x48a9(_0x36dbe7- -0x2a1,_0x232dc5);}const _0x3d03fd=Math[_0x1dcf8b(-0xfc,-0x151)](Math['pow'](_0x5afe93,0x2)+Math[_0x5d9d01(0x185,0x123)](_0x5d6d20,0x2));return _0x3d03fd;}function getDirection(_0xcdfaa9,_0x211bbf){let _0x5463b1=Cesium$2['Math'][_0x4b6e86(-0x5,0x1c)](Math['atan2'](_0x211bbf,_0xcdfaa9));_0x5463b1+=_0x5463b1<0x0?0x168:0x0;function _0x4b6e86(_0x47b003,_0x1a6371){return _0x48a9(_0x1a6371- -0xfc,_0x47b003);}return _0x5463b1;}const _0x279798={};_0x279798['__proto__']=null,_0x279798[_0x467932(0x57,0x71)]=getU,_0x279798['getV']=getV;function _0x3c9dfe(_0x52237d,_0x2959d1){return _0x48a9(_0x52237d- -0x362,_0x2959d1);}_0x279798['getSpeed']=getSpeed,_0x279798['getDirection']=getDirection;var WindUtil=_0x279798;const version='3.10.11',buildTime=_0x3c9dfe(-0x1ba,-0x1f4);var updatePositionShader=_0x3c9dfe(-0x27d,-0x273),calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x467932(0x6a,0x58)];class ShaderManager{static['getCalculateSpeedShader'](){const _0x51e8cf={};function _0x1fbc3b(_0x555b53,_0x153f74){return _0x3c9dfe(_0x555b53-0x680,_0x153f74);}return _0x51e8cf[_0x1fbc3b(0x41d,0x451)]=[calculateSpeedShader],new ShaderSource$1(_0x51e8cf);}static[_0x467932(0xf6,0xa4)](){const _0x346208={};return _0x346208['sources']=[updatePositionShader],new ShaderSource$1(_0x346208);}static['getSegmentDrawVertexShader'](){const _0x4a6ccf={};return _0x4a6ccf['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x4a6ccf);}static['getSegmentDrawFragmentShader'](){const _0x3717c2={};return _0x3717c2['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x3717c2);}static[_0x3c9dfe(-0x27f,-0x233)](){const _0x3835a1={};_0x3835a1[_0x59be3c(-0xa2,-0x44)]=[postProcessingPositionFragmentShader];function _0x59be3c(_0x4a99b0,_0x315c09){return _0x3c9dfe(_0x315c09-0x21f,_0x4a99b0);}return new ShaderSource$1(_0x3835a1);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0x467932(-0x8,0x58)];class CustomPrimitive{constructor(_0x4da207){this['commandType']=_0x4da207[_0x4ccea5(-0xa9,-0x111)];function _0x4ccea5(_0xbe9029,_0xac713d){return _0x3c9dfe(_0xac713d-0x163,_0xbe9029);}this['geometry']=_0x4da207['geometry'],this['attributeLocations']=_0x4da207['attributeLocations'],this['primitiveType']=_0x4da207['primitiveType'],this['uniformMap']=_0x4da207['uniformMap']||{},this[_0x4ccea5(-0xa8,-0x90)]=_0x4da207['vertexShaderSource'],this['fragmentShaderSource']=_0x4da207['fragmentShaderSource'],this[_0x123cb1(-0x22,0x61)]=_0x4da207[_0x4ccea5(-0xd2,-0x102)],this[_0x4ccea5(-0x2d,-0x25)]=_0x4da207['framebuffer'],this[_0x4ccea5(-0x33,-0xb3)]=_0x4da207['outputTexture'],this['autoClear']=_0x4da207['autoClear']??![],this['preExecute']=_0x4da207[_0x123cb1(-0x26,0x3a)],this['show']=!![],this['commandToExecute']=undefined,this[_0x4ccea5(-0xcf,-0xab)]=undefined,this[_0x123cb1(0x45,0x2d)]=_0x4da207['isDynamic']??(()=>!![]);function _0x123cb1(_0x274c85,_0x2c460a){return _0x3c9dfe(_0x274c85-0x243,_0x2c460a);}this['autoClear']&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x510391){function _0x47999e(_0x81fe8,_0x2b9b43){return _0x3c9dfe(_0x2b9b43-0x5e6,_0x81fe8);}function _0x13862e(_0x580094,_0x44cb6e){return _0x3c9dfe(_0x44cb6e-0x4c2,_0x580094);}if(this[_0x47999e(0x336,0x372)]==='Draw'){const _0x22ed90={};_0x22ed90[_0x47999e(0x3ff,0x3d1)]=_0x510391,_0x22ed90['geometry']=this[_0x47999e(0x3f1,0x457)],_0x22ed90['attributeLocations']=this[_0x13862e(0x335,0x2d9)],_0x22ed90['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x1e2ed5=VertexArray$1['fromGeometry'](_0x22ed90),_0x43b2c7={};_0x43b2c7['context']=_0x510391,_0x43b2c7['vertexShaderSource']=this['vertexShaderSource'],_0x43b2c7[_0x47999e(0x3ef,0x3c6)]=this['fragmentShaderSource'],_0x43b2c7['attributeLocations']=this[_0x47999e(0x3d7,0x3fd)];const _0x5a7e11=ShaderProgram['fromCache'](_0x43b2c7),_0x1a75e6=RenderState[_0x13862e(0x370,0x313)](this[_0x47999e(0x39a,0x381)]),_0x5006e6={};return _0x5006e6[_0x47999e(0x396,0x363)]=this,_0x5006e6['vertexArray']=_0x1e2ed5,_0x5006e6['primitiveType']=this[_0x47999e(0x42a,0x3f2)],_0x5006e6[_0x13862e(0x258,0x2c5)]=Matrix4[_0x13862e(0x2ba,0x2db)],_0x5006e6[_0x47999e(0x3a8,0x394)]=_0x1a75e6,_0x5006e6['shaderProgram']=_0x5a7e11,_0x5006e6[_0x13862e(0x2f1,0x33a)]=this['framebuffer'],_0x5006e6['uniformMap']=this['uniformMap'],_0x5006e6['pass']=Pass$1[_0x47999e(0x4a3,0x42d)],new DrawCommand(_0x5006e6);}else{if(this[_0x13862e(0x2a4,0x24e)]==='Compute'){const _0x357622={};return _0x357622['owner']=this,_0x357622['fragmentShaderSource']=this[_0x47999e(0x3d8,0x3c6)],_0x357622['uniformMap']=this[_0x47999e(0x342,0x36b)],_0x357622['outputTexture']=this['outputTexture'],_0x357622['persists']=!![],new ComputeCommand(_0x357622);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x2ce95f,_0x4c4a4e){function _0x405bc5(_0x1c3d39,_0x39ecb9){return _0x467932(_0x1c3d39,_0x39ecb9-0x329);}function _0x21949b(_0x24f152,_0x9834af){return _0x3c9dfe(_0x9834af-0x387,_0x24f152);}this['geometry']=_0x4c4a4e,defined(this['commandToExecute'])&&(this['commandToExecute']['vertexArray']=VertexArray$1[_0x21949b(0x18a,0x1dd)]({'context':_0x2ce95f,'geometry':this[_0x21949b(0x18d,0x1f8)],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1[_0x21949b(0xdc,0x12f)]}));}['update'](_0x3b1a02){if(!this['isDynamic']())return;if(!this[_0x5d5d00(-0x163,-0x171)]||!defined(_0x3b1a02))return;!defined(this[_0x5d5d00(-0x11a,-0xc4)])&&(this['commandToExecute']=this['createCommand'](_0x3b1a02[_0x537e05(0x132,0x122)]));defined(this[_0x5d5d00(-0x18a,-0x183)])&&this[_0x5d5d00(-0x18a,-0x20b)]();if(!_0x3b1a02['commandList']){console[_0x537e05(0x133,0x16e)](_0x537e05(0x214,0x1a9));return;}function _0x537e05(_0xd7b270,_0x107fe6){return _0x467932(_0xd7b270,_0x107fe6-0x78);}defined(this[_0x537e05(0x112,0x129)])&&_0x3b1a02['commandList']['push'](this['clearCommand']);function _0x5d5d00(_0x282c41,_0x2da35d){return _0x467932(_0x2da35d,_0x282c41- -0x1e0);}defined(this['commandToExecute'])&&_0x3b1a02['commandList']['push'](this[_0x5d5d00(-0x11a,-0xa2)]);}['isDestroyed'](){return![];}['destroy'](){function _0x2cba3f(_0x5010c9,_0x1510d4){return _0x3c9dfe(_0x1510d4-0x567,_0x5010c9);}function _0x3f4ce7(_0x54da33,_0xe8d5f8){return _0x3c9dfe(_0x54da33-0x22d,_0xe8d5f8);}if(defined(this[_0x2cba3f(0x36f,0x36e)])){var _0x2cd9b8;(_0x2cd9b8=this['commandToExecute']['shaderProgram'])===null||_0x2cd9b8===void 0x0||_0x2cd9b8['destroy'](),this['commandToExecute'][_0x3f4ce7(0x97,0x113)]=undefined;}return destroyObject(this);}}function deepMerge(_0x17abe3,_0xe0cc4d){if(!_0x17abe3)return _0xe0cc4d;if(!_0xe0cc4d)return _0x17abe3;const _0x5c9a7b={..._0xe0cc4d},_0x1d1b0e=_0x5c9a7b;for(const _0x17a7a1 in _0x17abe3){if(Object['prototype']['hasOwnProperty']['call'](_0x17abe3,_0x17a7a1)){const _0x51f10b=_0x17abe3[_0x17a7a1],_0x30e1b5=_0xe0cc4d[_0x17a7a1];if(Array['isArray'](_0x51f10b)){_0x1d1b0e[_0x17a7a1]=_0x51f10b['slice']();continue;}if(_0x51f10b&&typeof _0x51f10b==='object'){_0x1d1b0e[_0x17a7a1]=deepMerge(_0x51f10b,_0x30e1b5||{});continue;}_0x51f10b!==undefined&&(_0x1d1b0e[_0x17a7a1]=_0x51f10b);}}return _0x1d1b0e;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x298b99,_0x4eadf6,_0x13f9bd,_0x282acf,_0x1068b6){this[_0x1be788(0x9,-0x65)]=_0x298b99;function _0x1be788(_0xfcbfa7,_0x5d4c99){return _0x3c9dfe(_0x5d4c99-0x1b0,_0xfcbfa7);}function _0x4a0237(_0x2f3f3f,_0x19e110){return _0x467932(_0x19e110,_0x2f3f3f-0x238);}this['options']=_0x13f9bd,this[_0x4a0237(0x311,0x2b6)]=_0x282acf,this['windData']=_0x4eadf6,this[_0x4a0237(0x2d0,0x2cc)]=0x3c,this['frameRateAdjustment']=0x1;const _0xb44129={};_0xb44129['scene']=_0x1068b6,_0xb44129['samplingWindow']=0x1,_0xb44129['quietPeriod']=0x0,this[_0x1be788(-0xa6,-0xab)]=new FrameRateMonitor(_0xb44129),this['initFrameRate'](),this[_0x4a0237(0x2ed,0x271)](),this['createParticlesTextures'](),this[_0x4a0237(0x2f0,0x2f5)]();}['initFrameRate'](){const _0x36dd03=()=>{function _0x36f506(_0xc40f47,_0x47b76b){return _0x48a9(_0x47b76b- -0x281,_0xc40f47);}function _0xf0f711(_0x382345,_0x355ca6){return _0x48a9(_0x355ca6-0x1a2,_0x382345);}this[_0x36f506(-0x167,-0x17a)][_0x36f506(-0xf7,-0x10d)]>0x14&&(this[_0xf0f711(0x301,0x2dd)]=this[_0x36f506(-0x184,-0x17a)]['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math['max'](this['frameRate'],0x1));};function _0x50c768(_0x11783a,_0x81026c){return _0x467932(_0x11783a,_0x81026c- -0x176);}_0x36dd03();const _0x12b9b3=setInterval(_0x36dd03,0x3e8),_0x14de33=this['destroy']['bind'](this);this[_0x50c768(-0x2e,-0x86)]=()=>{clearInterval(_0x12b9b3),_0x14de33();};}['createWindTextures'](){function _0x56f6d5(_0x45efe3,_0x21635b){return _0x467932(_0x45efe3,_0x21635b- -0x266);}const _0x26bade={};_0x26bade[_0x56f6d5(-0x168,-0x16c)]=TextureMinificationFilter$1['LINEAR'],_0x26bade[_0x54f7da(0x4f5,0x4b9)]=TextureMagnificationFilter$1['LINEAR'];const _0x44f864={'context':this[_0x54f7da(0x48a,0x454)],'width':this[_0x56f6d5(-0x18c,-0x14d)]['width'],'height':this[_0x56f6d5(-0x13d,-0x14d)]['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this['options']['flipY']??![],'sampler':new Sampler$1(_0x26bade)};function _0x54f7da(_0xfe9830,_0x38820d){return _0x467932(_0xfe9830,_0x38820d-0x3aa);}this['windTextures']={'U':new Texture$1({..._0x44f864,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x56f6d5(-0x256,-0x1da)])}}),'V':new Texture$1({..._0x44f864,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}['createParticlesTextures'](){const _0x453dd6={};_0x453dd6[_0x2b26f2(0x524,0x53a)]=TextureMinificationFilter$1[_0x2e6de1(0x111,0x130)];function _0x2e6de1(_0x6806f8,_0xeda546){return _0x467932(_0xeda546,_0x6806f8-0x73);}function _0x2b26f2(_0x454f7e,_0x45c569){return _0x467932(_0x45c569,_0x454f7e-0x42a);}_0x453dd6['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];const _0x4eaa5d={'context':this['context'],'width':this[_0x2e6de1(0x1a1,0x1d8)][_0x2b26f2(0x45e,0x49c)],'height':this[_0x2e6de1(0x1a1,0x1d8)][_0x2e6de1(0xa7,0x26)],'pixelFormat':PixelFormat$1[_0x2e6de1(0xf1,0x162)],'pixelDatatype':PixelDatatype$1[_0x2e6de1(0x190,0x1fa)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this[_0x2e6de1(0x1a1,0x1a0)]['particlesTextureSize']*0x4)[_0x2b26f2(0x555,0x58a)](0x0)},'sampler':new Sampler$1(_0x453dd6)};this[_0x2e6de1(0xd2,0xde)]={'previousParticlesPosition':new Texture$1(_0x4eaa5d),'currentParticlesPosition':new Texture$1(_0x4eaa5d),'nextParticlesPosition':new Texture$1(_0x4eaa5d),'postProcessingPosition':new Texture$1(_0x4eaa5d),'particlesSpeed':new Texture$1(_0x4eaa5d)};}['destroyParticlesTextures'](){function _0x3ee155(_0x361ffc,_0x26b22b){return _0x467932(_0x26b22b,_0x361ffc- -0x151);}function _0x482018(_0x3283af,_0x3c0950){return _0x3c9dfe(_0x3283af- -0x50,_0x3c0950);}Object['values'](this[_0x3ee155(-0xf2,-0x7b)])[_0x3ee155(-0xef,-0x111)](_0x40c80b=>_0x40c80b['destroy']());}[_0x3c9dfe(-0x207,-0x1f7)](){function _0x2bfbe5(_0x4331b7,_0x9ba10f){return _0x467932(_0x9ba10f,_0x4331b7- -0x28a);}function _0x58b27c(_0x442fa2,_0x38fd5e){return _0x3c9dfe(_0x442fa2-0x5f3,_0x38fd5e);}this[_0x2bfbe5(-0x250,-0x2ac)]={'calculateSpeed':new CustomPrimitive({'commandType':_0x2bfbe5(-0x16b,-0x1e3),'uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this[_0x2bfbe5(-0x171,-0x1c1)]['u']['min'],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this[_0x58b27c(0x44d,0x413)]['v'][_0x2bfbe5(-0x1ea,-0x1f0)],this[_0x2bfbe5(-0x171,-0x16e)]['v']['max']),'speedRange':()=>new Cartesian2$1(this[_0x2bfbe5(-0x171,-0x1d1)]['speed']['min'],this['windData']['speed'][_0x58b27c(0x3be,0x33f)]),'currentParticlesPosition':()=>this[_0x58b27c(0x393,0x310)]['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x5fdb94(_0x6a0d93,_0x115a6d){return _0x2bfbe5(_0x115a6d-0x3dd,_0x6a0d93);}return(this['viewerParameters']['pixelSize']+0x32)*this[_0x5fdb94(0x27c,0x281)]['speedFactor'];},'frameRateAdjustment':()=>this[_0x2bfbe5(-0x152,-0x172)],'dimension':()=>new Cartesian2$1(this['windData'][_0x58b27c(0x37b,0x3af)],this[_0x58b27c(0x44d,0x42b)]['height']),'minimum':()=>new Cartesian2$1(this[_0x2bfbe5(-0x171,-0x122)]['bounds'][_0x58b27c(0x415,0x470)],this['windData']['bounds'][_0x58b27c(0x3bd,0x420)]),'maximum':()=>new Cartesian2$1(this['windData']['bounds'][_0x58b27c(0x3fe,0x404)],this['windData'][_0x58b27c(0x392,0x356)]['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':()=>{const _0x43b463=this['particlesTextures']['previousParticlesPosition'];this['particlesTextures'][_0x1d8da6(0x3ae,0x3f0)]=this[_0x1d8da6(0x3d5,0x370)]['currentParticlesPosition'];function _0x41be8d(_0x4b3893,_0x4c40c){return _0x58b27c(_0x4b3893-0x1d,_0x4c40c);}this[_0x41be8d(0x3b0,0x3ab)]['currentParticlesPosition']=this[_0x41be8d(0x3b0,0x345)]['postProcessingPosition'],this['particlesTextures']['postProcessingPosition']=_0x43b463;function _0x1d8da6(_0x4cfa7a,_0x55ec3d){return _0x58b27c(_0x55ec3d- -0x23,_0x4cfa7a);}this[_0x1d8da6(0x39f,0x34b)]['calculateSpeed']['commandToExecute']&&(this[_0x1d8da6(0x2f1,0x34b)]['calculateSpeed']['commandToExecute'][_0x1d8da6(0x3a7,0x3ba)]=this['particlesTextures'][_0x1d8da6(0x43a,0x41d)]);},'isDynamic':()=>this[_0x58b27c(0x462,0x44b)]['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0x2bfbe5(-0x22b,-0x20f)]['currentParticlesPosition'],'particlesSpeed':()=>this[_0x2bfbe5(-0x22b,-0x20a)][_0x58b27c(0x440,0x4a9)]},'fragmentShaderSource':ShaderManager[_0x58b27c(0x3d8,0x3a8)](),'outputTexture':this['particlesTextures'][_0x58b27c(0x3bc,0x3a4)],'preExecute':()=>{function _0x1604ba(_0xb896d6,_0x2a25b0){return _0x2bfbe5(_0x2a25b0-0x6ab,_0xb896d6);}this['primitives']['updatePosition']['commandToExecute']&&(this['primitives']['updatePosition']['commandToExecute']['outputTexture']=this['particlesTextures'][_0x1604ba(0x463,0x4a9)]);},'isDynamic':()=>this['options'][_0x2bfbe5(-0x160,-0xf6)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this[_0x58b27c(0x393,0x3de)][_0x2bfbe5(-0x202,-0x237)],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this[_0x58b27c(0x40d,0x45f)]['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds']['west'],this[_0x58b27c(0x44d,0x433)][_0x58b27c(0x392,0x35b)]['east']),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds']['south'],this['windData']['bounds'][_0x2bfbe5(-0x188,-0x170)]),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this[_0x2bfbe5(-0x15c,-0x1c7)]['dropRate'],'dropRateBump':()=>this['options'][_0x58b27c(0x3a6,0x3fd)],'useViewerBounds':()=>this[_0x58b27c(0x462,0x47f)]['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures'][_0x2bfbe5(-0x1fd,-0x1a7)],'preExecute':()=>{function _0x54f8d4(_0x3c3c30,_0x1aab0e){return _0x58b27c(_0x3c3c30- -0x323,_0x1aab0e);}function _0x247f54(_0x3a3883,_0x5e38d4){return _0x2bfbe5(_0x3a3883-0x160,_0x5e38d4);}this['primitives'][_0x247f54(-0x9d,-0x4f)]['commandToExecute']&&(this['primitives']['postProcessingPosition']['commandToExecute'][_0x54f8d4(0xba,0x3f)]=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this[_0x2bfbe5(-0x15c,-0xe5)][_0x58b27c(0x45e,0x4df)]})};}['reCreateWindTextures'](){this['windTextures']['U']['destroy'](),this[_0x3b2e4d(0x12a,0xb0)]['V'][_0x3b2e4d(0x156,0xd8)]();function _0x47d440(_0x5eb522,_0x4708be){return _0x467932(_0x4708be,_0x5eb522-0x77);}function _0x3b2e4d(_0x14b0fd,_0x28162a){return _0x467932(_0x14b0fd,_0x28162a- -0x18);}this['createWindTextures']();}[_0x3c9dfe(-0x25f,-0x2a2)](_0x398049){this['windData']=_0x398049,this['reCreateWindTextures']();}['updateOptions'](_0x2957d2){const _0x2755ba=_0x2957d2['flipY']!==undefined&&_0x2957d2['flipY']!==this['options']['flipY'];this['options']=deepMerge(_0x2957d2,this['options']),_0x2755ba&&this['reCreateWindTextures']();}[_0x3c9dfe(-0x1df,-0x223)](_0x49f354){const {array:_0x3f1294}=_0x49f354;let {min:_0x1157a5,max:_0x3dd3d9}=_0x49f354;const _0x1aa0d5=new Float32Array(_0x3f1294[_0x75c65e(0x390,0x389)]);_0x1157a5===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x1157a5=Math[_0x75c65e(0x38a,0x33d)](..._0x3f1294));_0x3dd3d9===undefined&&(console[_0x2c6783(-0x1b,-0x81)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x3dd3d9=Math['max'](..._0x3f1294));const _0x1c9674=Math['max'](Math['abs'](_0x1157a5),Math[_0x2c6783(-0xa8,-0xc3)](_0x3dd3d9));function _0x2c6783(_0x15c0de,_0x9c05f5){return _0x3c9dfe(_0x15c0de-0x1ae,_0x9c05f5);}function _0x75c65e(_0x55b9d0,_0x26bdaf){return _0x467932(_0x55b9d0,_0x26bdaf-0x29d);}for(let _0x21c246=0x0;_0x21c246<_0x3f1294['length'];_0x21c246++){const _0x113106=_0x3f1294[_0x21c246]/_0x1c9674;_0x1aa0d5[_0x21c246]=_0x113106;}return _0x1aa0d5;}['destroy'](){Object['values'](this['windTextures'])['forEach'](_0x19faed=>_0x19faed['destroy']()),Object[_0x2e6471(0x468,0x4c8)](this[_0x7ea225(0x53,0xb8)])[_0x7ea225(0x91,0xbb)](_0x146afe=>_0x146afe[_0x7ea225(0x106,0x149)]());function _0x7ea225(_0x17750d,_0x1a67de){return _0x467932(_0x17750d,_0x1a67de-0x59);}Object[_0x7ea225(0x10f,0x11d)](this['primitives'])['forEach'](_0x16d57c=>_0x16d57c[_0x7ea225(0x121,0x149)]());function _0x2e6471(_0xa731f2,_0x37a5f3){return _0x3c9dfe(_0xa731f2-0x663,_0x37a5f3);}this['frameRateMonitor'][_0x2e6471(0x494,0x47d)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x467932(0x52,0x58)];class WindParticlesRendering{constructor(_0x490e56,_0x19fd73,_0x5159f5,_0x148366){this[_0x9fad23(0x2b3,0x2b6)]=_0x490e56,this['options']=_0x19fd73,this['viewerParameters']=_0x5159f5,this['computing']=_0x148366;(typeof this['options'][_0x48ebae(-0x1e7,-0x17a)]!==_0x9fad23(0x341,0x2da)||this['options']['particlesTextureSize']<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options']['particlesTextureSize']=0x100);function _0x48ebae(_0x34ac61,_0x441a5f){return _0x467932(_0x34ac61,_0x441a5f- -0x1ae);}this['colorTable']=this[_0x48ebae(-0xa2,-0xc4)]();function _0x9fad23(_0x28f311,_0x2e037f){return _0x3c9dfe(_0x2e037f-0x4cb,_0x28f311);}this['textures']=this[_0x9fad23(0x30e,0x2e9)](),this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this['createPrimitives']();}[_0x3c9dfe(-0x1e2,-0x1a6)](){function _0x2671ab(_0x184dd4,_0x797a4d){return _0x467932(_0x184dd4,_0x797a4d-0x38e);}const _0x6fa886={};function _0x1095fa(_0x555a07,_0x12a4bd){return _0x467932(_0x555a07,_0x12a4bd-0x408);}_0x6fa886[_0x2671ab(0x467,0x438)]=this['context'],_0x6fa886['width']=this[_0x1095fa(0x470,0x4b2)]['drawingBufferWidth'],_0x6fa886['height']=this['context'][_0x1095fa(0x43b,0x49c)],_0x6fa886['pixelFormat']=PixelFormat[_0x1095fa(0x4c6,0x486)],_0x6fa886['pixelDatatype']=PixelDatatype['UNSIGNED_BYTE'];const _0x16c219=_0x6fa886,_0x38cc85={};_0x38cc85[_0x2671ab(0x47c,0x438)]=this['context'],_0x38cc85[_0x2671ab(0x3d4,0x3d5)]=this[_0x2671ab(0x413,0x438)]['drawingBufferWidth'],_0x38cc85['height']=this['context'][_0x2671ab(0x485,0x422)],_0x38cc85['pixelFormat']=PixelFormat['DEPTH_COMPONENT'],_0x38cc85[_0x1095fa(0x4e3,0x4cb)]=PixelDatatype['UNSIGNED_INT'];const _0x299df9=_0x38cc85;return{'segmentsColor':new Texture(_0x16c219),'segmentsDepth':new Texture(_0x299df9)};}['createRenderingFramebuffers'](){function _0x4b990c(_0x144f37,_0x492d2d){return _0x3c9dfe(_0x144f37-0x6dc,_0x492d2d);}function _0x4de9aa(_0x1bf349,_0x526d7b){return _0x467932(_0x526d7b,_0x1bf349-0x33c);}const _0xe2b681={};return _0xe2b681['context']=this['context'],_0xe2b681['colorTextures']=[this['textures'][_0x4de9aa(0x445,0x4a5)]],_0xe2b681['depthTexture']=this[_0x4de9aa(0x477,0x488)][_0x4b990c(0x541,0x59f)],{'segments':new Framebuffer(_0xe2b681)};}['destoryRenderingFramebuffers'](){function _0x26287f(_0x3dfa1a,_0x316c80){return _0x467932(_0x316c80,_0x3dfa1a- -0xd4);}Object[_0x26287f(-0x10,0x60)](this['framebuffers'])['forEach'](_0x331fbd=>{_0x331fbd['destroy']();});}['createColorTableTexture'](){const _0x378e0c=new Float32Array(this['options']['colors'][_0x515b34(0x4de,0x462)](_0x3f68f7=>{function _0x4b397a(_0x3de496,_0x397d38){return _0x515b34(_0x397d38- -0x126,_0x3de496);}const _0x7574de=Color$1['fromCssColorString'](_0x3f68f7);function _0x41fdba(_0x1344f2,_0x711a63){return _0x515b34(_0x711a63-0x6d,_0x1344f2);}return[_0x7574de[_0x41fdba(0x556,0x557)],_0x7574de[_0x41fdba(0x556,0x4e2)],_0x7574de['blue'],_0x7574de['alpha']];})),_0xc5df48={};function _0x515b34(_0x451cf1,_0x460abc){return _0x467932(_0x460abc,_0x451cf1-0x3ef);}_0xc5df48['minificationFilter']=TextureMinificationFilter[_0x59d342(0x157,0x10e)];function _0x59d342(_0x2776f7,_0x2ba2a5){return _0x467932(_0x2776f7,_0x2ba2a5-0xd9);}return _0xc5df48['magnificationFilter']=TextureMagnificationFilter[_0x515b34(0x424,0x472)],_0xc5df48[_0x59d342(0x106,0x160)]=TextureWrap[_0x59d342(0x18d,0x187)],_0xc5df48[_0x59d342(0xee,0x16b)]=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this['options']['colors']['length'],'height':0x1,'pixelFormat':PixelFormat[_0x515b34(0x46d,0x418)],'pixelDatatype':PixelDatatype[_0x515b34(0x50c,0x4fe)],'sampler':new Sampler(_0xc5df48),'source':{'width':this['options']['colors']['length'],'height':0x1,'arrayBufferView':_0x378e0c}});}['createSegmentsGeometry'](){function _0x2e4548(_0x32d464,_0x4c23e0){return _0x3c9dfe(_0x4c23e0-0x5ef,_0x32d464);}const _0x4540bb=0x4,_0x391190=this['options']['particlesTextureSize'];let _0x34c93c=[];for(let _0x142eea=0x0;_0x142eea<_0x391190;_0x142eea++){for(let _0x47fbba=0x0;_0x47fbba<_0x391190;_0x47fbba++){for(let _0x1d373a=0x0;_0x1d373a<_0x4540bb;_0x1d373a++){_0x34c93c['push'](_0x142eea/_0x391190),_0x34c93c['push'](_0x47fbba/_0x391190);}}}_0x34c93c=new Float32Array(_0x34c93c);const _0x19eafe=this[_0x2e4548(0x3e5,0x45e)]['particlesTextureSize']**0x2;let _0x29c3cb=[];for(let _0x5bfb5e=0x0;_0x5bfb5e<_0x19eafe;_0x5bfb5e++){_0x29c3cb[_0x2e4548(0x3bc,0x416)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x29c3cb=new Float32Array(_0x29c3cb);let _0x4ede07=[];for(let _0x4c2f2e=0x0,_0x13ee62=0x0;_0x4c2f2e<_0x19eafe;_0x4c2f2e++){_0x4ede07[_0x2e4548(0x39d,0x416)](_0x13ee62+0x0,_0x13ee62+0x1,_0x13ee62+0x2,_0x13ee62+0x2,_0x13ee62+0x1,_0x13ee62+0x3),_0x13ee62+=_0x4540bb;}_0x4ede07=new Uint32Array(_0x4ede07);const _0x5a61ea={};_0x5a61ea['componentDatatype']=ComponentDatatype[_0x544dfd(0x82,0x29)],_0x5a61ea['componentsPerAttribute']=0x2,_0x5a61ea[_0x544dfd(-0x99,-0x30)]=_0x34c93c;const _0x558c63={};_0x558c63[_0x2e4548(0x419,0x457)]=ComponentDatatype[_0x2e4548(0x412,0x44d)],_0x558c63[_0x544dfd(-0x5,-0x45)]=0x3,_0x558c63[_0x2e4548(0x416,0x3f4)]=_0x29c3cb;function _0x544dfd(_0x39094a,_0x17d549){return _0x467932(_0x39094a,_0x17d549- -0xf4);}const _0x1bc97f=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x5a61ea),'normal':new GeometryAttribute(_0x558c63)}),'indices':_0x4ede07});return _0x1bc97f;}['createRawRenderState'](_0x414f3a){const _0x52b862={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x414f3a};return Appearance['getDefaultRenderState'](!![],![],_0x52b862);}['createPrimitives'](){function _0x4cca12(_0x103c55,_0x561993){return _0x3c9dfe(_0x103c55-0x4ec,_0x561993);}const _0x688399={};_0x688399['st']=0x0,_0x688399['normal']=0x1;const _0x445240={};_0x445240['enabled']=!![];function _0x3824ef(_0x269503,_0x597109){return _0x467932(_0x269503,_0x597109-0x268);}const _0x15c411={};_0x15c411['enabled']=!![],_0x15c411['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x15c411['blendFuncSource']=WebGLRenderingContext[_0x3824ef(0x39f,0x323)],_0x15c411['blendFuncDestination']=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x157501={};_0x157501[_0x4cca12(0x29b,0x218)]=undefined,_0x157501['depthTest']=_0x445240,_0x157501[_0x4cca12(0x341,0x2e0)]=!![],_0x157501['blending']=_0x15c411;const _0x1d29d2=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x688399,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this[_0x3824ef(0x29c,0x2e4)][_0x4cca12(0x28c,0x2d9)][_0x3824ef(0x3c5,0x347)],'currentParticlesPosition':()=>this[_0x3824ef(0x320,0x2e4)]['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this['computing'][_0x3824ef(0x25b,0x2c7)][_0x4cca12(0x339,0x3a0)],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this[_0x3824ef(0x324,0x2f7)],'domain':()=>{function _0x5e18e9(_0x5d3a68,_0x57ed01){return _0x4cca12(_0x57ed01-0x14a,_0x5d3a68);}function _0x3337b7(_0x14f0fe,_0x184117){return _0x3824ef(_0x184117,_0x14f0fe- -0x4f7);}var _0x3fad9c,_0x3bf7bd;const _0x324f66=new Cartesian2(((_0x3fad9c=this['options']['domain'])===null||_0x3fad9c===void 0x0?void 0x0:_0x3fad9c[_0x5e18e9(0x48c,0x417)])??this['computing']['windData']['speed']['min'],((_0x3bf7bd=this[_0x3337b7(-0x161,-0x1d5)]['domain'])===null||_0x3bf7bd===void 0x0?void 0x0:_0x3bf7bd[_0x5e18e9(0x44b,0x401)])??this[_0x3337b7(-0x213,-0x235)]['windData'][_0x5e18e9(0x3ed,0x430)]['max']);return _0x324f66;},'displayRange':()=>{function _0x521aa8(_0x54d5de,_0x736bb0){return _0x3824ef(_0x54d5de,_0x736bb0- -0xaf);}function _0x406827(_0x3e2949,_0x1730eb){return _0x3824ef(_0x3e2949,_0x1730eb- -0x53c);}var _0x58cf20,_0x268043;const _0x2c3ba9=new Cartesian2(((_0x58cf20=this[_0x406827(-0x1e4,-0x1a6)][_0x406827(-0x29e,-0x221)])===null||_0x58cf20===void 0x0?void 0x0:_0x58cf20[_0x406827(-0x1fa,-0x234)])??this['computing'][_0x521aa8(0x2ae,0x2d2)]['speed'][_0x521aa8(0x274,0x259)],((_0x268043=this['options']['displayRange'])===null||_0x268043===void 0x0?void 0x0:_0x268043['max'])??this['computing'][_0x406827(-0x1db,-0x1bb)][_0x521aa8(0x247,0x272)]['max']);return _0x2c3ba9;},'particleHeight':()=>this['options'][_0x4cca12(0x329,0x2c0)]||0x0,'aspect':()=>this[_0x4cca12(0x2d7,0x334)][_0x4cca12(0x27e,0x263)]/this[_0x3824ef(0x2bd,0x312)][_0x4cca12(0x2c1,0x24e)],'pixelSize':()=>this['viewerParameters'][_0x4cca12(0x31b,0x320)],'lineWidth':()=>{function _0x309cd3(_0x36b6ad,_0x199a47){return _0x4cca12(_0x36b6ad- -0x5c,_0x199a47);}const _0x14d65f={};_0x14d65f['min']=0x1;function _0x14f89b(_0x3a9e85,_0x5d1ad5){return _0x4cca12(_0x3a9e85- -0x364,_0x5d1ad5);}_0x14d65f['max']=0x2;const _0x179854=this[_0x14f89b(-0x9,-0x3a)]['lineWidth']||_0x14d65f;return new Cartesian2(_0x179854['min'],_0x179854[_0x309cd3(0x25b,0x287)]);},'lineLength':()=>{function _0x4f6291(_0x57a2ee,_0x3ac001){return _0x3824ef(_0x57a2ee,_0x3ac001- -0x64);}const _0x1752a1={};_0x1752a1['min']=0x14,_0x1752a1['max']=0x64;const _0x874bb7=this[_0x55bf28(0x4a4,0x43d)]['lineLength']||_0x1752a1;function _0x55bf28(_0x255184,_0x46fa0e){return _0x4cca12(_0x46fa0e-0xe2,_0x255184);}return new Cartesian2(_0x874bb7[_0x55bf28(0x356,0x3af)],_0x874bb7['max']);},'is3D':()=>this['viewerParameters'][_0x3824ef(0x3ba,0x395)]===SceneMode[_0x4cca12(0x34b,0x3c0)],'segmentsDepthTexture':()=>this['textures']['segmentsDepth']},'vertexShaderSource':ShaderManager[_0x4cca12(0x2be,0x265)](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x157501)}),_0x2ecb48={};return _0x2ecb48['segments']=_0x1d29d2,_0x2ecb48;}[_0x467932(0x77,0x57)](){const _0x3e135f=this[_0x2430d1(0x535,0x578)]();this['primitives'][_0x2e93de(0x367,0x362)]['geometry']=_0x3e135f;function _0x2430d1(_0x2d1aa5,_0x28544f){return _0x3c9dfe(_0x2d1aa5-0x721,_0x28544f);}const _0x14dc0e={};_0x14dc0e[_0x2430d1(0x50c,0x48d)]=this[_0x2e93de(0x3d3,0x367)],_0x14dc0e['geometry']=_0x3e135f,_0x14dc0e[_0x2e93de(0x32b,0x393)]=this[_0x2430d1(0x49c,0x4e8)]['segments']['attributeLocations'],_0x14dc0e['bufferUsage']=BufferUsage['STATIC_DRAW'];function _0x2e93de(_0x404ae7,_0xb41da7){return _0x467932(_0x404ae7,_0xb41da7-0x2bd);}const _0xea3bf3=VertexArray['fromGeometry'](_0x14dc0e);this['primitives'][_0x2e93de(0x2ef,0x362)]['commandToExecute']&&(this[_0x2430d1(0x49c,0x480)][_0x2e93de(0x36a,0x362)]['commandToExecute']['vertexArray']=_0xea3bf3);}[_0x3c9dfe(-0x1b7,-0x237)](){function _0x11009b(_0x526973,_0xf3eb5a){return _0x467932(_0x526973,_0xf3eb5a- -0x2e5);}function _0x325c37(_0x4c9a72,_0x13037a){return _0x3c9dfe(_0x4c9a72-0x716,_0x13037a);}this['colorTable']['destroy'](),this[_0x325c37(0x4e6,0x4b8)]=this[_0x325c37(0x541,0x5a8)]();}[_0x3c9dfe(-0x1ad,-0x194)](_0x35cc87){const _0x270716=_0x35cc87[_0x1c45b6(0x369,0x3c0)]&&JSON['stringify'](_0x35cc87[_0x52c825(0x555,0x4eb)])!==JSON[_0x52c825(0x460,0x46b)](this['options'][_0x1c45b6(0x369,0x349)]);this[_0x1c45b6(0x39f,0x334)]=deepMerge(_0x35cc87,this['options']);function _0x1c45b6(_0x3a0179,_0x5b9827){return _0x3c9dfe(_0x3a0179-0x530,_0x5b9827);}function _0x52c825(_0x54cf21,_0x94ad8e){return _0x3c9dfe(_0x94ad8e-0x6b2,_0x54cf21);}_0x270716&&this['onColorTableChange']();}[_0x467932(0x129,0xf0)](){function _0x489c8b(_0x20110d,_0x5d3289){return _0x3c9dfe(_0x20110d-0x15a,_0x5d3289);}function _0x6b3f5d(_0x5c833f,_0x4dbc52){return _0x467932(_0x4dbc52,_0x5c833f- -0x2fe);}Object[_0x6b3f5d(-0x23a,-0x26c)](this['framebuffers'])['forEach'](_0x3692ad=>{function _0x13a10a(_0x27c882,_0x241c84){return _0x6b3f5d(_0x27c882-0x26b,_0x241c84);}_0x3692ad[_0x13a10a(0x5d,0x4d)]();}),Object['values'](this[_0x6b3f5d(-0x2c4,-0x2bd)])['forEach'](_0x2381a1=>{function _0x57e85b(_0x476bff,_0x4848df){return _0x489c8b(_0x4848df-0x73,_0x476bff);}_0x2381a1[_0x57e85b(0x1,-0x2)]();}),this['colorTable'][_0x6b3f5d(-0x20e,-0x23b)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x28696c,_0x563363,_0x464e75,_0x35c9b0,_0x34e26a){this[_0x12b8f3(-0x44,-0x1c)]=_0x28696c,this['options']=_0x464e75,this['viewerParameters']=_0x35c9b0;function _0x12b8f3(_0x45d422,_0x1050be){return _0x467932(_0x1050be,_0x45d422- -0xee);}function _0x85c124(_0x14b00e,_0x2f374b){return _0x467932(_0x2f374b,_0x14b00e-0x480);}this['computing']=new WindParticlesComputing(_0x28696c,_0x563363,_0x464e75,_0x35c9b0,_0x34e26a),this['rendering']=new WindParticlesRendering(_0x28696c,_0x464e75,_0x35c9b0,this['computing']),this[_0x85c124(0x4bd,0x46e)]();}['getPrimitives'](){function _0x4d04a6(_0x330d51,_0x5a7138){return _0x467932(_0x330d51,_0x5a7138- -0x87);}const _0x4db8b6=[this['computing']['primitives'][_0x4d04a6(0xf5,0x8a)],this['computing'][_0x388bfe(0x110,0x170)]['updatePosition'],this['computing']['primitives']['postProcessingPosition'],this['rendering']['primitives'][_0x4d04a6(-0x22,0x1e)]];function _0x388bfe(_0x1d1c46,_0x1a3f1f){return _0x467932(_0x1d1c46,_0x1a3f1f-0x136);}return _0x4db8b6;}['clearFramebuffers'](){const _0x2da9ea=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});function _0x3539af(_0x55eade,_0x12b232){return _0x467932(_0x55eade,_0x12b232- -0x237);}Object['keys'](this[_0x3539af(-0x19e,-0x1b7)]['framebuffers'])['forEach'](_0x2841c8=>{function _0x1a113b(_0x1aa8fa,_0x40d3d0){return _0x3539af(_0x40d3d0,_0x1aa8fa-0x299);}_0x2da9ea['framebuffer']=this[_0x1a113b(0xe2,0xb9)]['framebuffers'][_0x2841c8],_0x2da9ea['execute'](this['context']);});}['changeOptions'](_0x1b1717){function _0x4fd7da(_0x1c171d,_0x38ee0f){return _0x467932(_0x1c171d,_0x38ee0f-0xb4);}function _0x395470(_0xaffd43,_0x19869d){return _0x467932(_0x19869d,_0xaffd43- -0x28c);}let _0x299c52=![];_0x1b1717['particlesTextureSize']&&this['options']['particlesTextureSize']!==_0x1b1717['particlesTextureSize']&&(_0x299c52=!![]);const _0x18eb11=deepMerge(_0x1b1717,this['options']);if(_0x18eb11['particlesTextureSize']<0x1)throw new Error(_0x395470(-0x181,-0x1ba));this[_0x395470(-0x15e,-0xfe)]=_0x18eb11,this['rendering']['updateOptions'](_0x1b1717),this['computing']['updateOptions'](_0x1b1717),_0x299c52&&(this[_0x4fd7da(0x13a,0x130)][_0x395470(-0x20d,-0x27f)](),this['computing']['createParticlesTextures'](),this[_0x395470(-0x20c,-0x1d3)]['onParticlesTextureSizeChange']());}[_0x467932(0x159,0x10d)](_0x4e8c31){this[_0x132f31(0x4c9,0x4ec)]=_0x4e8c31;function _0x132f31(_0xef2106,_0x56ba66){return _0x3c9dfe(_0x56ba66-0x6d2,_0xef2106);}this[_0x132f31(0x44d,0x48f)]['viewerParameters']=_0x4e8c31;function _0x329b9c(_0x2153fa,_0x314a28){return _0x3c9dfe(_0x2153fa-0x740,_0x314a28);}this[_0x132f31(0x471,0x493)]['viewerParameters']=_0x4e8c31;}['destroy'](){this['computing']['destroy'](),this['rendering']['destroy']();}}function _0x4f8b(){const _0x5c3706=['2054706aRajOB','windTextures','fromDegrees','east','primitiveType','vertexShaderSource','_randomParticle','number','canvasContext','redraw','lastFramesPerSecond','BaseLayer','createSegmentsGeometry','cols','updateViewerParameters','attributeLocations','ymax','IDENTITY','viewerParameters','__esModule','4033602fAdMmC','lonRange','createRenderingTextures','Cartesian2','previousParticlesPosition','processWindData','west','getUVByXY','removeEventListener','clear','ymin','push','visible','round','windField','createColorTableTexture','5602205uDAWqm','length','mouseMove','pixelSize','flatMap','destroy','_updateIng','mode','random','keys','postMessage','warn','changeOptions','colors','canvas','minificationFilter','red','fixedHeight','MAX_VALUE','unbindEvent','umax','container','create','north','_createCanvas','getContext','2025-12-29\x2020:22','OPAQUE','EventType','onColorTableChange','segmentsColor','refreshTimer','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','particlesSpeed','applyViewerParameters','onmessage','magnificationFilter','fromCache','calculateSpeed','updateOptions','_onMapWhellEvent','depthMask','fromGeometry','update','destination-in','interpolated','windData','isInExtent','getRandomLatLng','getPrimitives','FLOAT','SCENE3D','Compute','particlesNumber','getParticles','addEventListener','_colorRamp','segmentsDepth','mars3d-wind插件注册成功\x20\x20\x20\x20\x20版本：','lat','componentDatatype','tlng','shaderProgram','dynamic','fill','height','sceneMode','options','getUVByPoint','geometry','frameState.commandList\x20is\x20undefined','_onMouseUpEvent','_calcUV','flipY','mouseUp','rows','framebuffer','frameRateAdjustment','44MGUDiw','_mountedHook','textures','particlesTextureSize','LINEAR','WindUtil','maxAge','_onMouseMoveEvent','initWorker','primitives','color','owner','clearFramebuffers','lineWidth','worker','getPostProcessingPositionShader','_showHook','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a','_animateFrame','uniformMap','Log','_map','width','moveTo','_calc_speedRate','setOptions','commandType','isDestroy','144voQRUV','setData','globe','camera','drawingBufferWidth','EllipsoidalOccluder','26746SuZkHn','talt','visibility','preExecute','onParticlesTextureSizeChange','Cesium','lng','rawRenderState','grid','sources','age','bounds','particlesTextures','updateWindData','clientWidth','forEach','getOwnPropertyDescriptor','frameRateMonitor','_removedHook','xmax','STATIC_DRAW','style','abs','data','PointTrans','absolute','renderState','viewport','ColorRamp','mouse_move','getU','dropRateBump','type','add','toDegrees','_speedRate','logInfo','stringify','pointerEvents','0px','_onMouseDownEvent','computing','show','RGBA','destroyParticlesTextures','rendering','_setOptionsHook','particleSystem','scene','tlat','speedRate','green','wrapS','nextParticlesPosition','south','max','SceneMode','array','postProcessingPosition','resize','colorTable','setDate','getSegmentDrawVertexShader','wrapT','_pointerEvents','drawingBufferHeight','809456ngeAax','wind','xmin','frameRate','#ffffff','Math','1402248BvMkmZ','left','pickEllipsoid','NEAREST','fragmentShaderSource','min','_canrefresh','3116490NeLjtu','_tomap','getUpdatePositionShader','segments','morphComplete','_addedHook','requestRender','outputTexture','context','register','particles','sqrt','CLAMP_TO_EDGE','componentsPerAttribute','floor','clearCommand','CanvasWindField','displayRange','bind','createWindTextures','pow','alt','createComputingPrimitives','speed','vdata','SRC_ALPHA','hidden','now','mouse_down','default','clientHeight','isDynamic','modelMatrix','pixelDatatype','values','layer','commandToExecute'];_0x4f8b=function(){return _0x5c3706;};return _0x4f8b();}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x332376={};_0x332376['min']=0x1,_0x332376['max']=0x2;const _0x1d247d={};_0x1d247d['min']=0x14,_0x1d247d['max']=0x64;const _0x5dfb76={};function _0x48a9(_0x47ef92,_0x2778bd){const _0x4f8b77=_0x4f8b();return _0x48a9=function(_0x48a9ed,_0x1e781a){_0x48a9ed=_0x48a9ed-0xd7;let _0x1fa33d=_0x4f8b77[_0x48a9ed];return _0x1fa33d;},_0x48a9(_0x47ef92,_0x2778bd);}_0x5dfb76[_0x3c9dfe(-0x28b,-0x2a8)]=0x64,_0x5dfb76['fixedHeight']=0x0,_0x5dfb76[_0x3c9dfe(-0x281,-0x225)]=_0x332376,_0x5dfb76['lineLength']=_0x1d247d,_0x5dfb76['speedFactor']=0x1,_0x5dfb76['dropRate']=0.003,_0x5dfb76['dropRateBump']=0.001,_0x5dfb76['colors']=['rgb(206,255,255)'],_0x5dfb76[_0x3c9dfe(-0x18b,-0x123)]=![],_0x5dfb76['dynamic']=!![];const DEF_OPTIONS=_0x5dfb76;class WindLayer extends BaseLayer$1{constructor(_0x5f29ae={}){_0x5f29ae={...DEF_OPTIONS,..._0x5f29ae},super(_0x5f29ae),this['_setOptionsHook'](_0x5f29ae,_0x5f29ae);}get['layer'](){return this['primitives'];}get[_0x467932(0x5c,0x6a)](){return this['options']['data'];}set[_0x467932(0x90,0x6a)](_0x3f9d40){this[_0x21be02(0xc7,0xac)]['data']=_0x3f9d40;function _0x5e7655(_0x56980a,_0x163e0f){return _0x467932(_0x163e0f,_0x56980a-0x172);}function _0x21be02(_0x5ec214,_0x6075d7){return _0x467932(_0x5ec214,_0x6075d7- -0x82);}this[_0x5e7655(0x1c0,0x18e)](_0x3f9d40);}get['colors'](){function _0x575c60(_0x2eef60,_0x4ff4b9){return _0x467932(_0x4ff4b9,_0x2eef60-0x220);}return this[_0x575c60(0x34e,0x354)]['colors'];}set['colors'](_0x124fd1){function _0x6a003f(_0x482924,_0x2ba7ac){return _0x467932(_0x2ba7ac,_0x482924- -0xb0);}this['options']['colors']=_0x124fd1;const _0x3ee701={};_0x3ee701[_0x6a003f(0x48,0x9a)]=_0x124fd1,this['_setOptionsHook'](this['options'],_0x3ee701);}[_0x3c9dfe(-0x27e,-0x24f)](_0x30530a){function _0x2f44ba(_0x3fe13f,_0x7ad400){return _0x3c9dfe(_0x3fe13f-0x27,_0x7ad400);}function _0x32dbcc(_0x960135,_0x24e79c){return _0x3c9dfe(_0x24e79c-0xdc,_0x960135);}_0x30530a?this[_0x2f44ba(-0x1f1,-0x239)]():this[_0x32dbcc(-0x191,-0x17e)]();}['_mountedHook'](){}['_addedHook'](){this['scene']=this['_map'][_0x1f83be(-0x3a,-0xa6)],this['camera']=this['_map']['camera'];this['options'][_0x543fa9(0x2a2,0x2cd)]&&this['setData'](this[_0x1f83be(0x71,0xa9)][_0x1f83be(-0x53,0x29)]);if(!this['windData']||!this[_0x1f83be(-0x40,-0x6f)])return;this[_0x1f83be(0x1c,0x2b)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1[(_0x543fa9(0x316,0x31b))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this['updateViewerParameters']();function _0x543fa9(_0x412fdb,_0x4e9dba){return _0x3c9dfe(_0x412fdb-0x4f7,_0x4e9dba);}function _0x1f83be(_0x38cda2,_0x507817){return _0x3c9dfe(_0x38cda2-0x202,_0x507817);}this['particleSystem']=new WindParticleSystem(this['scene'][_0x1f83be(-0x13,-0x49)],this['windData'],this['options'],this['viewerParameters'],this[_0x1f83be(-0x3a,-0x8c)]),this[_0x1f83be(-0x83,-0x68)]=this[_0x543fa9(0x2ba,0x2c2)][_0x543fa9(0x354,0x3d4)](),this['primitives'][_0x543fa9(0x29a,0x254)](_0x1d070d=>{function _0xf62584(_0x1c7372,_0x2a6e33){return _0x1f83be(_0x1c7372- -0x1cb,_0x2a6e33);}function _0x35a9be(_0x4d0429,_0x1e5a1f){return _0x543fa9(_0x1e5a1f- -0x2cb,_0x4d0429);}this[_0x35a9be(-0x46,-0x10)][_0xf62584(-0x24e,-0x1e3)][_0x35a9be(-0x1f,-0x1f)](_0x1d070d);}),this['camera']['percentageChanged']=0.01,this[_0x1f83be(-0x6d,-0x69)]['changed']['addEventListener'](this['updateViewerParameters'][_0x1f83be(-0x9,0x7b)](this)),this['scene'][_0x1f83be(-0x17,0x6b)][_0x543fa9(0x35a,0x336)](this[_0x1f83be(0x18,0x18)]['bind'](this)),window['addEventListener']('resize',this['updateViewerParameters'][_0x543fa9(0x2ec,0x2b9)](this));}['_removedHook'](){this['camera']['changed']['removeEventListener'](this['updateViewerParameters']['bind'](this)),this[_0x17ad8e(-0x3e,-0x2a)]['morphComplete'][_0x17ad8e(-0x4,0x36)](this[_0xa7621d(0x4c7,0x537)][_0x17ad8e(0xd,0x7)](this));function _0xa7621d(_0x5be3ea,_0x42e1b1){return _0x467932(_0x5be3ea,_0x42e1b1-0x462);}window['removeEventListener']('resize',this['updateViewerParameters'][_0x17ad8e(-0x6a,0x7)](this));function _0x17ad8e(_0x476541,_0x43c862){return _0x467932(_0x476541,_0x43c862- -0xad);}this[_0x17ad8e(-0x4,-0x73)]&&(this['primitives']['forEach'](_0xbd8627=>{function _0x58b3e4(_0x2966af,_0x2b876c){return _0xa7621d(_0x2966af,_0x2b876c- -0x2fe);}this[_0x58b3e4(0x1e1,0x1e7)]['primitives']['remove'](_0xbd8627);}),delete this['primitives']),this['particleSystem']&&(this[_0xa7621d(0x566,0x4e4)]['destroy'](),delete this[_0x17ad8e(0x28,-0x2b)]);}['setData'](_0x5344b6,_0x476ebd){this['windData']=this['processWindData'](_0x5344b6);function _0x4b4256(_0x517de1,_0x3e3eca){return _0x467932(_0x3e3eca,_0x517de1-0x359);}if(_0x476ebd){this['_removedHook'](),this[_0x4b4256(0x400,0x408)]();return;}function _0x41a703(_0x481c9f,_0x38e423){return _0x3c9dfe(_0x38e423-0x446,_0x481c9f);}this['particleSystem']?(this['particleSystem'][_0x4b4256(0x3d5,0x35c)][_0x41a703(0x1c9,0x1e7)](this[_0x4b4256(0x472,0x3ff)]),this['scene'][_0x41a703(0x1b1,0x22f)]()):this['_addedHook']();}['_setOptionsHook'](_0x1920de,_0x42f448){function _0x245f5b(_0x12d208,_0x3e0738){return _0x3c9dfe(_0x3e0738-0x683,_0x12d208);}function _0x4667fb(_0x23ff1a,_0xa8f146){return _0x3c9dfe(_0x23ff1a-0x485,_0xa8f146);}this['particleSystem']&&(this[_0x245f5b(0x497,0x446)][_0x245f5b(0x539,0x4bb)](_0x42f448),this[_0x245f5b(0x4ca,0x447)]['requestRender']());}['processWindData'](_0x518308){var _0x4a6b33,_0x3ed806;const _0x533955={..._0x518308};function _0x3c9300(_0x59ceb8,_0x10a995){return _0x3c9dfe(_0x59ceb8-0x325,_0x10a995);}const _0xfabe9c=_0x533955;!_0xfabe9c[_0x554c94(0x246,0x21c)]&&_0xfabe9c['rows']&&(_0xfabe9c[_0x3c9300(0x192,0x18c)]=_0xfabe9c['rows']);!_0xfabe9c['width']&&_0xfabe9c['cols']&&(_0xfabe9c[_0x554c94(0x19c,0x137)]=_0xfabe9c['cols']);!_0xfabe9c['bounds']&&(_0xfabe9c['bounds']={'west':_0xfabe9c['xmin'],'south':_0xfabe9c['ymin'],'east':_0xfabe9c['xmax'],'north':_0xfabe9c['ymax']});if(!_0xfabe9c['u']){const _0x5e7fa7={};_0x5e7fa7[_0x3c9300(0xf2,0xd3)]=_0x518308['udata'],_0x5e7fa7['min']=_0x518308['umin'],_0x5e7fa7['max']=_0x518308[_0x554c94(0x18b,0x1ef)],_0xfabe9c['u']=_0x5e7fa7;}if(!_0xfabe9c['v']){const _0x3b3c59={};_0x3b3c59[_0x3c9300(0xf2,0xc9)]=_0x518308['vdata'],_0x3b3c59['min']=_0x518308['vmin'],_0x3b3c59[_0x554c94(0x180,0x17a)]=_0x518308['vmax'],_0xfabe9c['v']=_0x3b3c59;}if(((_0x4a6b33=_0xfabe9c['speed'])===null||_0x4a6b33===void 0x0?void 0x0:_0x4a6b33[_0x554c94(0x10c,0x190)])===undefined||((_0x3ed806=_0xfabe9c['speed'])===null||_0x3ed806===void 0x0?void 0x0:_0x3ed806['max'])===undefined||_0xfabe9c['speed']['array']===undefined){const _0x19bf21={'array':new Float32Array(_0xfabe9c['u']['array']['length']),'min':Number[_0x3c9300(0x163,0x1bf)],'max':Number['MIN_VALUE']};for(let _0xa7ec12=0x0;_0xa7ec12<_0xfabe9c['u']['array']['length'];_0xa7ec12++){_0x19bf21[_0x3c9300(0xf2,0xa9)][_0xa7ec12]=Math['sqrt'](_0xfabe9c['u']['array'][_0xa7ec12]*_0xfabe9c['u']['array'][_0xa7ec12]+_0xfabe9c['v'][_0x554c94(0x1fc,0x17c)][_0xa7ec12]*_0xfabe9c['v'][_0x3c9300(0xf2,0x125)][_0xa7ec12]),_0x19bf21['array'][_0xa7ec12]!==0x0&&(_0x19bf21['min']=Math[_0x554c94(0x1f1,0x190)](_0x19bf21['min'],_0x19bf21[_0x3c9300(0xf2,0x167)][_0xa7ec12]),_0x19bf21[_0x3c9300(0xf0,0xe9)]=Math[_0x3c9300(0xf0,0x163)](_0x19bf21['max'],_0x19bf21['array'][_0xa7ec12]));}_0xfabe9c['speed']=_0x19bf21;}function _0x554c94(_0xdcc23d,_0x423e42){return _0x467932(_0xdcc23d,_0x423e42-0xf0);}return _0xfabe9c;}['updateViewerParameters'](){var _0x54410a;const _0x9e020f=this['scene'];if(!_0x9e020f)return;const _0x25cedd=_0x9e020f['canvas'],_0x349cae={};_0x349cae['x']=0x0,_0x349cae['y']=0x0;const _0xd14bd4={};_0xd14bd4['x']=0x0;function _0x4e7460(_0x198fdd,_0x496560){return _0x467932(_0x496560,_0x198fdd-0x53);}_0xd14bd4['y']=_0x25cedd[_0x4e7460(0x113,0x94)];const _0x1e366e={};_0x1e366e['x']=_0x25cedd[_0x4e7460(0xb4,0xbc)],_0x1e366e['y']=0x0;const _0x248675={};_0x248675['x']=_0x25cedd['clientWidth'],_0x248675['y']=_0x25cedd['clientHeight'];const _0x5824a4=[_0x349cae,_0xd14bd4,_0x1e366e,_0x248675];let _0x2c8380=0xb4,_0x742417=-0xb4,_0x5b0216=0x5a,_0x73ca9b=-0x5a;function _0x30c095(_0x51d356,_0x408ff2){return _0x3c9dfe(_0x408ff2-0x4d9,_0x51d356);}let _0xeb8dfd=![];for(const _0x2ce879 of _0x5824a4){const _0x5ed1df=_0x9e020f[_0x30c095(0x2e1,0x26a)][_0x30c095(0x32d,0x2b7)](new Cesium$1[(_0x30c095(0x356,0x2f8))](_0x2ce879['x'],_0x2ce879['y']),_0x9e020f['globe']['ellipsoid']);if(!_0x5ed1df){_0xeb8dfd=!![];break;}const _0x11f7c2=_0x9e020f['globe']['ellipsoid']['cartesianToCartographic'](_0x5ed1df),_0x413c94=Cesium$1['Math']['toDegrees'](_0x11f7c2['longitude']),_0x10038c=Cesium$1['Math']['toDegrees'](_0x11f7c2['latitude']);_0x2c8380=Math['min'](_0x2c8380,_0x413c94),_0x742417=Math[_0x4e7460(0xdd,0xec)](_0x742417,_0x413c94),_0x5b0216=Math[_0x30c095(0x298,0x2ba)](_0x5b0216,_0x10038c),_0x73ca9b=Math[_0x30c095(0x278,0x2a4)](_0x73ca9b,_0x10038c);}if(!_0xeb8dfd){const _0x2636d2=new Cesium$1['Cartesian2'](Math['max'](this['windData'][_0x4e7460(0xb1,0xec)][_0x4e7460(0x134,0x14c)],_0x2c8380),Math[_0x4e7460(0xf3,0x102)](this[_0x4e7460(0x16c,0x130)][_0x30c095(0x2ac,0x278)]['east'],_0x742417)),_0x557b76=new Cesium$1['Cartesian2'](Math[_0x30c095(0x26d,0x2a4)](this[_0x30c095(0x331,0x333)]['bounds']['south'],_0x5b0216),Math['min'](this['windData']['bounds'][_0x30c095(0x35c,0x31c)],_0x73ca9b)),_0x2009bb=(_0x2636d2['y']-_0x2636d2['x'])*0.05,_0x25bbaf=(_0x557b76['y']-_0x557b76['x'])*0.05;_0x2636d2['x']=Math['max'](this['windData']['bounds'][_0x30c095(0x339,0x2fb)],_0x2636d2['x']-_0x2009bb),_0x2636d2['y']=Math[_0x30c095(0x2a3,0x2ba)](this[_0x4e7460(0x16c,0x193)]['bounds'][_0x30c095(0x27c,0x2e4)],_0x2636d2['y']+_0x2009bb),_0x557b76['x']=Math['max'](this['windData']['bounds'][_0x4e7460(0xdc,0x6c)],_0x557b76['x']-_0x25bbaf),_0x557b76['y']=Math[_0x4e7460(0xf3,0xee)](this['windData'][_0x4e7460(0xb1,0xcb)][_0x4e7460(0x155,0x188)],_0x557b76['y']+_0x25bbaf),this[_0x4e7460(0x12c,0xc2)][_0x4e7460(0x12f,0x148)]=_0x2636d2,this[_0x30c095(0x2f5,0x2f3)]['latRange']=_0x557b76;const _0x2aef18=this[_0x4e7460(0x16c,0x1ed)]['bounds']['east']-this[_0x30c095(0x36b,0x333)][_0x30c095(0x2a5,0x278)]['west'],_0x118569=this['windData']['bounds']['north']-this['windData']['bounds']['south'],_0x4e4cbc=(_0x2636d2['y']-_0x2636d2['x'])/_0x2aef18,_0x2bbb1b=(_0x557b76['y']-_0x557b76['x'])/_0x118569,_0x14a7eb=Math[_0x30c095(0x312,0x2ba)](_0x4e4cbc,_0x2bbb1b),_0x42de3b=0x3e8*_0x14a7eb;_0x42de3b>0x0&&(this[_0x4e7460(0x12c,0x1a4)][_0x30c095(0x2b3,0x308)]=Math['max'](0x0,Math['min'](0x3e8,_0x42de3b)));}this[_0x4e7460(0x12c,0x126)]['sceneMode']=this['scene']['mode'],(_0x54410a=this[_0x4e7460(0xd5,0x110)])===null||_0x54410a===void 0x0||_0x54410a['applyViewerParameters'](this[_0x4e7460(0x12c,0x157)]);}['getDataAtLonLat'](_0x3dd432,_0x3b0ebe){const {bounds:_0x4bd87a,width:_0x25837b,height:_0x3c3698,u:_0x3ed872,v:_0x163bba,speed:_0xf6f7cc}=this['windData'],{flipY:_0x2adeec}=this['options'];if(_0x3dd432<_0x4bd87a['west']||_0x3dd432>_0x4bd87a['east']||_0x3b0ebe<_0x4bd87a[_0x9416e2(0x14a,0x1ba)]||_0x3b0ebe>_0x4bd87a['north'])return null;const _0x192edf=(_0x3dd432-_0x4bd87a[_0x9416e2(0x1a2,0x1e0)])/(_0x4bd87a[_0x9416e2(0x18b,0x121)]-_0x4bd87a['west'])*(_0x25837b-0x1);let _0x1f0a62=(_0x3b0ebe-_0x4bd87a['south'])/(_0x4bd87a['north']-_0x4bd87a[_0x9416e2(0x14a,0xfa)])*(_0x3c3698-0x1);_0x2adeec&&(_0x1f0a62=_0x3c3698-0x1-_0x1f0a62);const _0x1df1aa=Math[_0x9416e2(0x171,0xfd)](_0x192edf),_0x5346c2=Math[_0x9416e2(0x171,0x1c1)](_0x1f0a62),_0x242919=Math['floor'](_0x192edf),_0x5b8408=Math[_0x9416e2(0x161,0xfa)](_0x242919+0x1,_0x25837b-0x1),_0x2c5536=Math['floor'](_0x1f0a62),_0x94fde5=Math[_0x1a6178(0xa2,0x113)](_0x2c5536+0x1,_0x3c3698-0x1),_0x49ec8a=_0x192edf-_0x242919,_0xfe88d0=_0x1f0a62-_0x2c5536,_0x522f16=_0x5346c2*_0x25837b+_0x1df1aa,_0x5d95b6=_0x2c5536*_0x25837b+_0x242919,_0x2022a0=_0x2c5536*_0x25837b+_0x5b8408,_0x20fb5e=_0x94fde5*_0x25837b+_0x242919,_0x47b44c=_0x94fde5*_0x25837b+_0x5b8408,_0x4ec6af=_0x3ed872[_0x1a6178(0x8e,0x80)][_0x5d95b6],_0x4a989d=_0x3ed872['array'][_0x2022a0];function _0x9416e2(_0xaecdc4,_0x5a0bd9){return _0x3c9dfe(_0xaecdc4-0x380,_0x5a0bd9);}const _0x32f3d1=_0x3ed872[_0x1a6178(0x8e,0x37)][_0x20fb5e],_0x48613e=_0x3ed872['array'][_0x47b44c],_0x111ee7=(0x1-_0x49ec8a)*(0x1-_0xfe88d0)*_0x4ec6af+_0x49ec8a*(0x1-_0xfe88d0)*_0x4a989d+(0x1-_0x49ec8a)*_0xfe88d0*_0x32f3d1+_0x49ec8a*_0xfe88d0*_0x48613e,_0x49f504=_0x163bba['array'][_0x5d95b6];function _0x1a6178(_0x5516af,_0x41b152){return _0x467932(_0x41b152,_0x5516af-0x2);}const _0x187f31=_0x163bba['array'][_0x2022a0],_0x26f4e9=_0x163bba['array'][_0x20fb5e],_0x56e7af=_0x163bba[_0x1a6178(0x8e,0x2b)][_0x47b44c],_0x41cda4=(0x1-_0x49ec8a)*(0x1-_0xfe88d0)*_0x49f504+_0x49ec8a*(0x1-_0xfe88d0)*_0x187f31+(0x1-_0x49ec8a)*_0xfe88d0*_0x26f4e9+_0x49ec8a*_0xfe88d0*_0x56e7af,_0x246282=Math[_0x9416e2(0x16e,0x14b)](_0x111ee7*_0x111ee7+_0x41cda4*_0x41cda4),_0x13ae61={};_0x13ae61['u']=_0x3ed872['array'][_0x522f16],_0x13ae61['v']=_0x163bba[_0x1a6178(0x8e,0x85)][_0x522f16],_0x13ae61[_0x1a6178(0xbb,0x75)]=_0xf6f7cc[_0x9416e2(0x14d,0x136)][_0x522f16];const _0x56cdf9={};_0x56cdf9['u']=_0x111ee7,_0x56cdf9['v']=_0x41cda4,_0x56cdf9[_0x9416e2(0x17a,0x198)]=_0x246282;const _0x346228={};return _0x346228['original']=_0x13ae61,_0x346228[_0x9416e2(0x1d9,0x1d0)]=_0x56cdf9,_0x346228;}}mars3d__namespace['LayerUtil'][_0x3c9dfe(-0x214,-0x28f)](_0x3c9dfe(-0x229,-0x1e3),WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this[_0x5c0ca9(0x342,0x3bf)]=null,this[_0x46e665(0x13d,0x13f)]=null,this['tlng']=null;function _0x46e665(_0xa39e37,_0x35946a){return _0x3c9dfe(_0x35946a-0x2d8,_0xa39e37);}this[_0x5c0ca9(0x36d,0x3cc)]=null,this['age']=null;function _0x5c0ca9(_0x2049f4,_0x57e047){return _0x467932(_0x57e047,_0x2049f4-0x2e9);}this['speed']=null;}['destroy'](){for(const _0xc53496 in this){delete this[_0xc53496];}}}class CanvasWindField{constructor(_0x587d1e){this['setOptions'](_0x587d1e);}get[_0x3c9dfe(-0x23a,-0x2b8)](){function _0x398f2f(_0x3c53d6,_0x347bc1){return _0x3c9dfe(_0x347bc1-0x587,_0x3c53d6);}return this[_0x398f2f(0x2e6,0x33e)];}set[_0x467932(0xb2,0x85)](_0x309b5b){function _0x29f4d6(_0x4e9be6,_0x28b0ba){return _0x3c9dfe(_0x28b0ba-0x742,_0x4e9be6);}this['_speedRate']=(0x64-(_0x309b5b>0x63?0x63:_0x309b5b))*0x64;function _0x4a1cd1(_0x44fca7,_0x18b83f){return _0x3c9dfe(_0x44fca7- -0x7e,_0x18b83f);}this['_calc_speedRate']=[(this['xmax']-this['xmin'])/this['_speedRate'],(this['ymax']-this[_0x29f4d6(0x5a2,0x568)])/this[_0x29f4d6(0x4f9,0x4f9)]];}get[_0x467932(0x41,0x37)](){return this['_maxAge'];}set[_0x3c9dfe(-0x288,-0x2a1)](_0x3bd5c3){this['_maxAge']=_0x3bd5c3;}['setOptions'](_0x108eba){this['options']=_0x108eba;function _0x5b65ec(_0x422f94,_0x4d14cb){return _0x467932(_0x4d14cb,_0x422f94-0x1fd);}function _0x526871(_0x93a605,_0x25831a){return _0x3c9dfe(_0x93a605-0x2ca,_0x25831a);}this['maxAge']=_0x108eba['maxAge']||0x78,this['speedRate']=_0x108eba['speedRate']||0x32,this['particles']=[];const _0x380eba=_0x108eba['particlesNumber']||0x1000;for(let _0x37f2d8=0x0;_0x37f2d8<_0x380eba;_0x37f2d8++){const _0x35c115=this[_0x526871(0xd8,0xff)](new CanvasParticle());this['particles'][_0x526871(0xf1,0x16c)](_0x35c115);}}[_0x467932(0x9e,0x90)](_0xec4d85){this[_0xdd82af(-0x8c,-0xed)]=_0xec4d85[_0xdd82af(-0xaf,-0xed)],this[_0xdd82af(-0x137,-0x14f)]=_0xec4d85['cols'],this['xmin']=_0xec4d85[_0x58ad36(-0xcb,-0x66)];function _0x58ad36(_0x9e41b3,_0x55849a){return _0x467932(_0x55849a,_0x9e41b3- -0x162);}this[_0x58ad36(-0xfc,-0xa2)]=_0xec4d85['xmax'];function _0xdd82af(_0x3039ac,_0x12b85e){return _0x467932(_0x3039ac,_0x12b85e- -0x223);}this[_0xdd82af(-0x110,-0x13e)]=_0xec4d85['ymin'],this[_0x58ad36(-0x8b,-0x71)]=_0xec4d85['ymax'],this['grid']=[];const _0x5bf442=_0xec4d85['udata'],_0xf7e9fd=_0xec4d85[_0xdd82af(-0x142,-0x169)];let _0x81ef12=![];_0x5bf442['length']===this[_0xdd82af(-0xde,-0xed)]&&_0x5bf442[0x0][_0xdd82af(-0x129,-0x137)]===this['cols']&&(_0x81ef12=!![]);let _0x29a0c5=0x0,_0x460df1=null,_0x21d478=null;for(let _0x282542=0x0;_0x282542<this['rows'];_0x282542++){_0x460df1=[];for(let _0x44ee02=0x0;_0x44ee02<this[_0x58ad36(-0x8e,-0xe0)];_0x44ee02++,_0x29a0c5++){_0x81ef12?_0x21d478=this['_calcUV'](_0x5bf442[_0x282542][_0x44ee02],_0xf7e9fd[_0x282542][_0x44ee02]):_0x21d478=this['_calcUV'](_0x5bf442[_0x29a0c5],_0xf7e9fd[_0x29a0c5]),_0x460df1['push'](_0x21d478);}this[_0xdd82af(-0x145,-0x1c8)][_0xdd82af(-0x124,-0x13d)](_0x460df1);}!this[_0xdd82af(-0x154,-0xf5)][_0x58ad36(-0x2e,-0x3a)]&&this['grid']['reverse']();}['clear'](){delete this['rows'],delete this[_0x4b0c96(-0x103,-0x102)],delete this['xmin'],delete this['xmax'];function _0x4b0c96(_0x1fe5ad,_0x2aac96){return _0x467932(_0x1fe5ad,_0x2aac96- -0x1d6);}delete this['ymin'],delete this['ymax'],delete this['grid'],delete this['particles'];}['toGridXY'](_0x6ef53,_0x42c593){function _0x4e9888(_0x32a71e,_0x245463){return _0x467932(_0x245463,_0x32a71e- -0x230);}const _0x3a0b07=(_0x6ef53-this['xmin'])/(this[_0x2b5f39(-0xe2,-0x72)]-this['xmin'])*(this['cols']-0x1);function _0x2b5f39(_0x429395,_0x26f846){return _0x3c9dfe(_0x429395-0x177,_0x26f846);}const _0x5e18cf=(this['ymax']-_0x42c593)/(this['ymax']-this[_0x4e9888(-0x14b,-0x10f)])*(this['rows']-0x1);return[_0x3a0b07,_0x5e18cf];}[_0x3c9dfe(-0x1dd,-0x1b0)](_0x7559f3,_0x3eee06){if(_0x7559f3<0x0||_0x7559f3>=this[_0x3b988e(0x85,0x1e)]||_0x3eee06>=this[_0x40e8d0(-0x1a8,-0x1c1)])return[0x0,0x0,0x0];const _0x550ef4=Math['floor'](_0x7559f3),_0xd0177a=Math[_0x40e8d0(-0x22e,-0x1dc)](_0x3eee06);if(_0x550ef4===_0x7559f3&&_0xd0177a===_0x3eee06)return this[_0x40e8d0(-0x283,-0x2eb)][_0x3eee06][_0x7559f3];const _0x3f5195=_0x550ef4+0x1,_0x1b6347=_0xd0177a+0x1,_0x3896e7=this['getUVByXY'](_0x550ef4,_0xd0177a),_0x1b9887=this[_0x40e8d0(-0x1fc,-0x1af)](_0x3f5195,_0xd0177a),_0x30ed33=this[_0x3b988e(0x93,0x2d)](_0x550ef4,_0x1b6347),_0x16e3ab=this[_0x3b988e(0x93,0xce)](_0x3f5195,_0x1b6347);let _0xb587a5=null;function _0x40e8d0(_0x469381,_0x4c4925){return _0x3c9dfe(_0x469381- -0x1f,_0x4c4925);}function _0x3b988e(_0x55ecf8,_0x170be9){return _0x3c9dfe(_0x55ecf8-0x270,_0x170be9);}try{_0xb587a5=this['_bilinearInterpolation'](_0x7559f3-_0x550ef4,_0x3eee06-_0xd0177a,_0x3896e7,_0x1b9887,_0x30ed33,_0x16e3ab);}catch(_0x5e2604){console['log'](_0x7559f3,_0x3eee06);}return _0xb587a5;}['_bilinearInterpolation'](_0x52a04f,_0x3d5597,_0x3d8409,_0x40cb78,_0x4aaa33,_0x1faa41){const _0x531b39=0x1-_0x52a04f,_0xfc18aa=0x1-_0x3d5597,_0xdde1dc=_0x531b39*_0xfc18aa,_0x181c98=_0x52a04f*_0xfc18aa,_0x9e8ef9=_0x531b39*_0x3d5597,_0x40c838=_0x52a04f*_0x3d5597,_0x1d1bfe=_0x3d8409[0x0]*_0xdde1dc+_0x40cb78[0x0]*_0x181c98+_0x4aaa33[0x0]*_0x9e8ef9+_0x1faa41[0x0]*_0x40c838,_0x1d07ee=_0x3d8409[0x1]*_0xdde1dc+_0x40cb78[0x1]*_0x181c98+_0x4aaa33[0x1]*_0x9e8ef9+_0x1faa41[0x1]*_0x40c838;return this['_calcUV'](_0x1d1bfe,_0x1d07ee);}[_0x3c9dfe(-0x18c,-0x144)](_0x56c32b,_0x4852a3){return[+_0x56c32b,+_0x4852a3,Math['sqrt'](_0x56c32b*_0x56c32b+_0x4852a3*_0x4852a3)];}[_0x3c9dfe(-0x190,-0x1b5)](_0x2eefd2,_0x5375d3){if(!this[_0x287d7a(-0x1b2,-0x1b0)](_0x2eefd2,_0x5375d3))return null;const _0x34b124=this['toGridXY'](_0x2eefd2,_0x5375d3),_0x20b0a0=this['getUVByXY'](_0x34b124[0x0],_0x34b124[0x1]);function _0x287d7a(_0x416e37,_0x49b7a4){return _0x467932(_0x416e37,_0x49b7a4- -0x2ca);}return _0x20b0a0;}[_0x467932(0xce,0x11a)](_0x46a8fb,_0x193307){function _0x3e7849(_0x540625,_0x1635af){return _0x467932(_0x1635af,_0x540625-0x11);}function _0x5a08b4(_0xa363d9,_0x26393a){return _0x3c9dfe(_0xa363d9-0x320,_0x26393a);}return _0x46a8fb>=this['xmin']&&_0x46a8fb<=this[_0x5a08b4(0xc7,0xf2)]&&_0x193307>=this[_0x5a08b4(0x146,0xf3)]&&_0x193307<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x47ae8a=fRandomByfloat(this['xmin'],this['xmax']),_0x3cb863=fRandomByfloat(this['ymin'],this[_0x1374bc(0x115,0xbd)]),_0x24ca89={};function _0x17c2ee(_0x565f04,_0x1ecfc0){return _0x467932(_0x565f04,_0x1ecfc0- -0x2cf);}_0x24ca89[_0x17c2ee(-0x19d,-0x1a9)]=_0x3cb863,_0x24ca89['lng']=_0x47ae8a;function _0x1374bc(_0x3a5c67,_0x2e14e6){return _0x3c9dfe(_0x3a5c67-0x2fd,_0x2e14e6);}return _0x24ca89;}['getParticles'](){function _0x4a1a1f(_0x2d9abb,_0x438a20){return _0x3c9dfe(_0x2d9abb-0x12b,_0x438a20);}let _0x4eb497,_0x1c22a9,_0x3f4afa;function _0x5297b2(_0x2f8f57,_0x115c7b){return _0x467932(_0x115c7b,_0x2f8f57- -0x39);}for(let _0x2eddd0=0x0,_0x50299e=this['particles']['length'];_0x2eddd0<_0x50299e;_0x2eddd0++){let _0x49516c=this[_0x5297b2(0x73,0xd0)][_0x2eddd0];_0x49516c[_0x4a1a1f(-0x137,-0x176)]<=0x0&&(_0x49516c=this['_randomParticle'](_0x49516c));if(_0x49516c[_0x4a1a1f(-0x137,-0x151)]>0x0){const _0x397343=_0x49516c['tlng'],_0x2a358c=_0x49516c['tlat'];_0x3f4afa=this[_0x5297b2(0xf6,0xac)](_0x397343,_0x2a358c),_0x3f4afa?(_0x4eb497=_0x397343+this['_calc_speedRate'][0x0]*_0x3f4afa[0x0],_0x1c22a9=_0x2a358c+this[_0x5297b2(0x10,0x5d)][0x1]*_0x3f4afa[0x1],_0x49516c['lng']=_0x397343,_0x49516c['lat']=_0x2a358c,_0x49516c[_0x5297b2(0xef,0xca)]=_0x4eb497,_0x49516c['tlat']=_0x1c22a9,_0x49516c[_0x4a1a1f(-0xdb,-0xcc)]=_0x3f4afa[0x2],_0x49516c[_0x5297b2(0x24,0x14)]--):_0x49516c['age']=0x0;}}return this[_0x4a1a1f(-0xe8,-0xb4)];}['_randomParticle'](_0x55c4f0){let _0x58fc29,_0x13a944;for(let _0x4c0478=0x0;_0x4c0478<0x1e;_0x4c0478++){_0x58fc29=this[_0x22a881(-0xe3,-0x145)](),_0x13a944=this['getUVByPoint'](_0x58fc29[_0x22a881(-0x260,-0x207)],_0x58fc29['lat']);if(_0x13a944&&_0x13a944[0x2]>0x0)break;}if(!_0x13a944)return _0x55c4f0;const _0x3ccb50=_0x58fc29['lng']+this['_calc_speedRate'][0x0]*_0x13a944[0x0],_0x228d90=_0x58fc29['lat']+this[_0x43cccf(0x507,0x4d0)][0x1]*_0x13a944[0x1];_0x55c4f0[_0x43cccf(0x4b5,0x4e0)]=_0x58fc29[_0x22a881(-0x260,-0x207)];function _0x22a881(_0x2bd539,_0x4e7638){return _0x3c9dfe(_0x4e7638-0x5f,_0x2bd539);}_0x55c4f0['lat']=_0x58fc29[_0x43cccf(0x594,0x5ad)],_0x55c4f0['tlng']=_0x3ccb50;function _0x43cccf(_0x4c727b,_0x30e950){return _0x467932(_0x4c727b,_0x30e950-0x487);}return _0x55c4f0['tlat']=_0x228d90,_0x55c4f0[_0x22a881(-0x19d,-0x203)]=Math[_0x43cccf(0x5c7,0x56f)](0xa+Math[_0x22a881(-0x10f,-0x16d)]()*this[_0x43cccf(0x46c,0x4be)]),_0x55c4f0['speed']=_0x13a944[0x2],_0x55c4f0;}[_0x3c9dfe(-0x1cf,-0x183)](){for(const _0x41091a in this){delete this[_0x41091a];}}}function fRandomByfloat(_0x21271d,_0x326c4d){return _0x21271d+Math['random']()*(_0x326c4d-_0x21271d);}const Cesium=mars3d__namespace[_0x3c9dfe(-0x267,-0x1e6)],BaseLayer=mars3d__namespace[_0x3c9dfe(-0x1fa,-0x227)][_0x467932(0x58,0xd2)];class CanvasWindLayer extends BaseLayer{constructor(_0x1eb4a9={}){super(_0x1eb4a9),this[_0x2cc8e5(-0x1b,0x3b)](_0x1eb4a9),this['canvas']=null;function _0x2cc8e5(_0x4bdb54,_0x1b1e77){return _0x467932(_0x4bdb54,_0x1b1e77- -0x46);}function _0x1fd54e(_0x5a1def,_0x446157){return _0x3c9dfe(_0x5a1def- -0x17,_0x446157);}_0x1eb4a9[_0x1fd54e(-0x1de,-0x17f)]&&_0x1eb4a9['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x1fd54e(-0x267,-0x220))](_0x1eb4a9));}[_0x467932(0x13,0x81)](_0x1f2fe3,_0x45aa96){this['frameTime']=0x3e8/(_0x1f2fe3['frameRate']||0xa);function _0x5bd7c4(_0x4f45df,_0x593dfe){return _0x467932(_0x4f45df,_0x593dfe- -0x16e);}function _0x295fa6(_0x285cb1,_0xf7a92b){return _0x467932(_0xf7a92b,_0x285cb1-0x125);}this['_pointerEvents']=this[_0x295fa6(0x253,0x2b0)]['pointerEvents']??![],this[_0x295fa6(0x160,0x1a0)]=_0x1f2fe3['color']||_0x5bd7c4(-0x11a,-0xd5),this['lineWidth']=_0x1f2fe3['lineWidth']||0x1,this[_0x5bd7c4(-0xe6,-0x72)]=_0x1f2fe3['fixedHeight']??0x0,this['flipY']=_0x1f2fe3[_0x5bd7c4(-0x27,-0x3a)]??![],this['windField']&&this[_0x295fa6(0x20e,0x20d)][_0x5bd7c4(-0x114,-0x124)](_0x1f2fe3);}get['layer'](){return this['canvas'];}get['canvasWidth'](){function _0x555c95(_0x608da7,_0x4d15f2){return _0x3c9dfe(_0x608da7-0x442,_0x4d15f2);}return this[_0x555c95(0x1c9,0x234)]['scene']['canvas']['clientWidth'];}get['canvasHeight'](){function _0x12d9e8(_0x5d38bb,_0x14d078){return _0x3c9dfe(_0x14d078-0x474,_0x5d38bb);}function _0x35262b(_0x33aa28,_0x5d5b27){return _0x467932(_0x5d5b27,_0x33aa28- -0xd8);}return this['_map'][_0x12d9e8(0x1f1,0x238)]['canvas'][_0x35262b(-0x18,-0x16)];}get[_0x467932(0x2d,0x79)](){function _0x579583(_0xf29b46,_0x9e49b1){return _0x467932(_0xf29b46,_0x9e49b1-0x3b5);}return this[_0x579583(0x4a0,0x448)];}set[_0x467932(0x5b,0x79)](_0x3247c4){this[_0x207962(0x48a,0x4b0)]=_0x3247c4;if(!this[_0x207962(0x558,0x516)])return;function _0x50a5d6(_0x7a5dbd,_0x9276a8){return _0x467932(_0x7a5dbd,_0x9276a8-0x376);}function _0x207962(_0x2947fc,_0x349cdf){return _0x467932(_0x2947fc,_0x349cdf-0x41d);}_0x3247c4?this[_0x50a5d6(0x46f,0x46f)][_0x50a5d6(0x380,0x3de)]['pointer-events']='all':this['canvas'][_0x207962(0x457,0x485)]['pointer-events']='none';}get['particlesNumber'](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x29ae24){this[_0x98f42c(0x53b,0x596)][_0x5be5c9(-0x159,-0x189)]=_0x29ae24,clearTimeout(this[_0x98f42c(0x4ae,0x4f3)]);function _0x98f42c(_0x355c9b,_0x2bfd23){return _0x467932(_0x2bfd23,_0x355c9b-0x40d);}function _0x5be5c9(_0x26f292,_0x3c14c1){return _0x3c9dfe(_0x26f292-0x46,_0x3c14c1);}this[_0x5be5c9(-0x1d8,-0x232)]=setTimeout(()=>{function _0x3b0c4b(_0x4e8055,_0x5994b3){return _0x5be5c9(_0x5994b3- -0x3c,_0x4e8055);}this[_0x3b0c4b(-0x1bd,-0x1e5)]();},0x1f4);}get['speedRate'](){function _0x4f7c4b(_0x58a024,_0x225699){return _0x467932(_0x58a024,_0x225699- -0x2c3);}return this[_0x4f7c4b(-0x1fd,-0x195)]['speedRate'];}set['speedRate'](_0x5a8d17){this[_0xd05b61(-0x17d,-0x176)][_0xd05b61(-0x255,-0x21f)]=_0x5a8d17;function _0xc91058(_0x46a16f,_0x33ffa){return _0x3c9dfe(_0x46a16f-0x614,_0x33ffa);}function _0xd05b61(_0x12c020,_0x59c377){return _0x3c9dfe(_0x59c377-0x1b,_0x12c020);}this['windField']&&(this[_0xc91058(0x43e,0x3ec)][_0xc91058(0x3da,0x3d2)]=_0x5a8d17);}get['maxAge'](){function _0x224ed9(_0x349c56,_0x30c3db){return _0x467932(_0x349c56,_0x30c3db- -0x21);}return this['options'][_0x224ed9(0x2d,0x16)];}set['maxAge'](_0x398dc8){this[_0x3179ee(0xc3,0x101)]['maxAge']=_0x398dc8;function _0x3179ee(_0x55a9a2,_0x9eda1b){return _0x467932(_0x9eda1b,_0x55a9a2- -0x6b);}function _0x32b6b1(_0x35f61c,_0x53b4eb){return _0x3c9dfe(_0x53b4eb-0x4ce,_0x35f61c);}this['windField']&&(this[_0x3179ee(0x7e,0xe7)]['maxAge']=_0x398dc8);}get['data'](){return this['windData'];}set['data'](_0x54c4f4){function _0x2925f8(_0x3cd8f5,_0x3808f9){return _0x467932(_0x3808f9,_0x3cd8f5-0x6a);}this[_0x2925f8(0xb8,0x49)](_0x54c4f4);}get['rectangle'](){let _0x5e0924=this['windData'][_0x2489d5(-0x1aa,-0x13f)],_0x9183ef=this[_0x3ebdf7(0x410,0x483)]['xmax'],_0x986389=this['windData']['ymin'],_0x47a930=this['windData'][_0x2489d5(-0x148,-0xff)];_0x9183ef>=0x167&&_0x5e0924===0x0&&(_0x5e0924=-0xb4,_0x9183ef=0xb4);_0x5e0924=Math['max'](_0x5e0924,-0xb4);function _0x3ebdf7(_0x22d476,_0x1b9c34){return _0x467932(_0x1b9c34,_0x22d476-0x2f7);}_0x9183ef=Math['min'](_0x9183ef,0xb4);function _0x2489d5(_0x58ea3f,_0x17dce1){return _0x3c9dfe(_0x17dce1-0xe9,_0x58ea3f);}return _0x986389=Math[_0x2489d5(-0x1b7,-0x14c)](_0x986389,-0x5a),_0x47a930=Math[_0x3ebdf7(0x397,0x316)](_0x47a930,0x5a),Cesium['Rectangle']['fromDegrees'](_0x5e0924,_0x986389,_0x9183ef,_0x47a930);}['_showHook'](_0x422697){function _0xfefe23(_0x27f8e8,_0x12c051){return _0x467932(_0x27f8e8,_0x12c051-0x1a6);}function _0x4fc729(_0x42481a,_0x1b76a6){return _0x3c9dfe(_0x42481a-0x713,_0x1b76a6);}_0x422697?this['_addedHook']():(this[_0xfefe23(0x287,0x2bf)]&&(this['options'][_0xfefe23(0x1d4,0x210)]=this[_0xfefe23(0x31b,0x2bf)]),this[_0x4fc729(0x4b9,0x43a)]());}[_0x3c9dfe(-0x185,-0x16a)](){function _0x3a17e3(_0xec7fb5,_0x3452c1){return _0x3c9dfe(_0x3452c1-0x432,_0xec7fb5);}this['options']['worker']?this[_0x3a17e3(0x13c,0x1ac)]():this['windField']=new CanvasWindField(this['options']);}['_addedHook'](){this['canvas']=this[_0x2d9c52(0x2b4,0x2c8)]();const _0x2ec1a5={};function _0x2d9c52(_0x37b837,_0x3e3126){return _0x3c9dfe(_0x3e3126-0x484,_0x37b837);}_0x2ec1a5['willReadFrequently']=!![];function _0x37e484(_0x340dd7,_0x4b9897){return _0x467932(_0x340dd7,_0x4b9897- -0x4b);}this['canvasContext']=this[_0x2d9c52(0x32b,0x2be)][_0x2d9c52(0x279,0x2c9)]('2d',_0x2ec1a5),this['bindEvent'](),this['options']['data']&&this['setData'](this['options'][_0x2d9c52(0x233,0x22f)]);}['_removedHook'](){this[_0x2bad84(-0xb2,-0x10f)]();function _0x6abda7(_0x124a9a,_0x5cf941){return _0x467932(_0x5cf941,_0x124a9a- -0x47);}function _0x2bad84(_0x45fe74,_0x25d457){return _0x3c9dfe(_0x25d457-0xcc,_0x45fe74);}this['unbindEvent'](),this['canvas']&&(this[_0x2bad84(-0x210,-0x1ad)]['container']['removeChild'](this['canvas']),delete this[_0x6abda7(0xb2,0xd7)]);}['_createCanvas'](){function _0x5eb4e3(_0x4c77c5,_0x5e26f5){return _0x3c9dfe(_0x5e26f5-0x7c,_0x4c77c5);}const _0x2a8134=mars3d__namespace['DomUtil'][_0x5eb4e3(-0x106,-0x142)](_0x5eb4e3(-0x17d,-0x14a),'mars3d-canvasWind',this['_map'][_0x5eb4e3(-0x109,-0x143)]);_0x2a8134['style']['position']=_0x40b2cf(0x2a7,0x260),_0x2a8134[_0x5eb4e3(-0x20b,-0x1db)]['top']=_0x5eb4e3(-0x237,-0x1c9),_0x2a8134['style'][_0x5eb4e3(-0x1c4,-0x1a7)]='0px';function _0x40b2cf(_0x479113,_0x57153a){return _0x467932(_0x57153a,_0x479113-0x23b);}return _0x2a8134['style'][_0x5eb4e3(-0x25b,-0x1fc)]=this['_map'][_0x5eb4e3(-0x1e6,-0x1c0)][_0x40b2cf(0x334,0x34a)][_0x40b2cf(0x29c,0x26e)]+'px',_0x2a8134['style']['height']=this[_0x5eb4e3(-0x234,-0x1fd)]['scene'][_0x40b2cf(0x334,0x361)]['clientHeight']+'px',_0x2a8134['style']['pointerEvents']=this[_0x5eb4e3(-0x151,-0x1b0)]?'auto':'none',_0x2a8134['style']['zIndex']=this['options']['zIndex']??0x9,_0x2a8134['width']=this[_0x5eb4e3(-0x18f,-0x1fd)]['scene'][_0x40b2cf(0x334,0x340)]['clientWidth'],_0x2a8134['height']=this[_0x5eb4e3(-0x23a,-0x1fd)]['scene']['canvas'][_0x5eb4e3(-0x172,-0x183)],_0x2a8134;}['resize'](){function _0x3d84a6(_0x239d22,_0x4715ed){return _0x467932(_0x4715ed,_0x239d22-0x1ad);}function _0x39d51a(_0x3c80cb,_0x1d1a98){return _0x3c9dfe(_0x1d1a98-0x305,_0x3c80cb);}this[_0x39d51a(0x114,0x13f)]&&(this['canvas'][_0x39d51a(0x7a,0xae)]['width']=this['_map'][_0x39d51a(0xb3,0xc9)]['canvas'][_0x39d51a(0xfa,0xa7)]+'px',this['canvas'][_0x39d51a(0x52,0xae)]['height']=this[_0x39d51a(0x89,0x8c)][_0x3d84a6(0x230,0x1d5)]['canvas']['clientHeight']+'px',this['canvas']['width']=this[_0x39d51a(0x9,0x8c)]['scene']['canvas'][_0x39d51a(0x51,0xa7)],this[_0x39d51a(0x193,0x13f)][_0x39d51a(0x131,0x172)]=this[_0x3d84a6(0x1f3,0x229)]['scene'][_0x39d51a(0x163,0x13f)][_0x39d51a(0xa2,0x106)]);}['bindEvent'](){const _0x1d988e=this;let _0x646944=Date['now']();(function _0x559fe7(){function _0x245a7e(_0x2096f2,_0x430acc){return _0x48a9(_0x2096f2- -0x279,_0x430acc);}function _0x1c0600(_0x465bbc,_0x484d22){return _0x48a9(_0x484d22-0x39d,_0x465bbc);}if(_0x1d988e[_0x245a7e(-0x18a,-0x179)])return;_0x1d988e['_animateFrame']=window['requestAnimationFrame'](_0x559fe7);if(_0x1d988e[_0x1c0600(0x541,0x4bd)]&&_0x1d988e[_0x1c0600(0x5a2,0x529)]){const _0x50ba90=Date[_0x245a7e(-0x119,-0x10f)](),_0x4d8aa0=_0x50ba90-_0x646944;_0x4d8aa0>_0x1d988e['frameTime']&&(_0x646944=_0x50ba90-_0x4d8aa0%_0x1d988e['frameTime'],_0x1d988e[_0x245a7e(-0xc0,-0x97)]());}}(),window['addEventListener'](_0x500ab9(0x2f5,0x2ac),this['resize']['bind'](this),![]));function _0x59bf5b(_0x475794,_0x54ee5b){return _0x3c9dfe(_0x475794-0x410,_0x54ee5b);}this['mouse_down']=![],this[_0x500ab9(0x2fd,0x28e)]=![];function _0x500ab9(_0x60606c,_0x4bc552){return _0x3c9dfe(_0x4bc552-0x4dd,_0x60606c);}this[_0x59bf5b(0x27f,0x201)]['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x59bf5b(0x258,0x26b)]['wheel'],this[_0x59bf5b(0x264,0x2d3)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this));}[_0x467932(0x100,0xfe)](){window['cancelAnimationFrame'](this['_animateFrame']),delete this[_0x335a50(-0x1ed,-0x1d0)];function _0x5685b7(_0x329943,_0x2c7930){return _0x3c9dfe(_0x2c7930-0x619,_0x329943);}window['removeEventListener']('resize',this['resize']);function _0x335a50(_0xe0801a,_0x2111e3){return _0x3c9dfe(_0x2111e3-0xac,_0xe0801a);}this['options']['mouseHidden']&&(this[_0x335a50(-0x250,-0x1cd)]['off'](mars3d__namespace[_0x5685b7(0x3ed,0x461)]['wheel'],this[_0x335a50(-0x12d,-0x100)],this),this[_0x335a50(-0x1b7,-0x1cd)]['off'](mars3d__namespace['EventType']['mouseDown'],this[_0x335a50(-0x1e4,-0x198)],this),this['_map']['off'](mars3d__namespace['EventType'][_0x335a50(-0x85,-0xde)],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace[_0x5685b7(0x4db,0x461)]['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x9a6a84){function _0x1cd3e9(_0x371716,_0x23f158){return _0x3c9dfe(_0x23f158-0x26,_0x371716);}clearTimeout(this[_0x1cd3e9(-0x175,-0x18f)]);function _0xd092f1(_0x36c045,_0x3d2b39){return _0x467932(_0x3d2b39,_0x36c045-0x3eb);}if(!this['show']||!this[_0xd092f1(0x4e4,0x465)])return;this['canvas']['style']['visibility']=_0xd092f1(0x4a7,0x519),this['refreshTimer']=setTimeout(()=>{function _0x444519(_0x10d001,_0x1117cf){return _0xd092f1(_0x1117cf- -0x25f,_0x10d001);}if(!this[_0x2827ea(0x38d,0x34a)])return;function _0x2827ea(_0x491abb,_0x7fdcf8){return _0xd092f1(_0x491abb- -0xdb,_0x7fdcf8);}this[_0x444519(0x2b0,0x25c)](),this['canvas'][_0x2827ea(0x378,0x30d)][_0x444519(0x238,0x1e1)]=_0x2827ea(0x3f7,0x431);},0xc8);}[_0x3c9dfe(-0x244,-0x1c2)](_0x4e6c7f){this[_0x2066bb(0xb9,0xe1)]=!![];function _0x2a2a73(_0x16e2b6,_0x5d3578){return _0x467932(_0x5d3578,_0x16e2b6-0x2a1);}this['_map']['off'](mars3d__namespace[_0x2a2a73(0x3a8,0x3e1)]['mouseMove'],this[_0x2a2a73(0x2d9,0x2cc)],this);function _0x2066bb(_0x10b99b,_0x37d49f){return _0x467932(_0x37d49f,_0x10b99b- -0x5);}this[_0x2a2a73(0x2e7,0x2a0)]['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}[_0x3c9dfe(-0x287,-0x2e8)](_0x3bd7dc){function _0x151526(_0x413ee4,_0xe156f7){return _0x3c9dfe(_0xe156f7-0x53a,_0x413ee4);}if(!this['show']||!this[_0x151526(0x317,0x374)])return;function _0xb6d29e(_0x4980f0,_0x4aad50){return _0x3c9dfe(_0x4980f0-0x25a,_0x4aad50);}this['mouse_down']&&(this['canvas'][_0x151526(0x294,0x2e3)]['visibility']=_0xb6d29e(0x57,0x23),this['mouse_move']=!![]);}[_0x467932(0xd8,0x132)](_0x5e9c82){if(!this[_0x3a956d(0x146,0xe9)]||!this['canvas'])return;this['_map']['off'](mars3d__namespace['EventType'][_0x3a956d(0x1b6,0x195)],this['_onMouseMoveEvent'],this);function _0x3a956d(_0x541d55,_0x57c750){return _0x3c9dfe(_0x541d55-0x388,_0x57c750);}this['mouse_down']&&this[_0x3a956d(0x139,0x103)]&&this[_0x3a956d(0x199,0x155)]();function _0x301656(_0x951f49,_0x45aedf){return _0x467932(_0x45aedf,_0x951f49-0x30c);}this[_0x3a956d(0x1c2,0x1c0)][_0x3a956d(0x131,0xb9)]['visibility']='visible',this['mouse_down']=![],this['mouse_move']=![];}[_0x467932(-0x13,0x4e)](_0x5ecb91){function _0x25ed76(_0x339c59,_0x1255ae){return _0x467932(_0x339c59,_0x1255ae-0x22e);}function _0x30f2da(_0x3a86c6,_0x592489){return _0x467932(_0x592489,_0x3a86c6-0x37);}this[_0x25ed76(0x2e4,0x312)](),this[_0x25ed76(0x2f2,0x347)]=_0x5ecb91,this['windField']['setDate'](_0x5ecb91),this['redraw']();}['redraw'](){function _0x3a6ec0(_0xa9c91b,_0x19328f){return _0x467932(_0xa9c91b,_0x19328f-0x87);}if(!this['show'])return;this['windField']['setOptions'](this[_0x2577f3(0x249,0x29f)]);function _0x2577f3(_0x3e6422,_0x17fddc){return _0x3c9dfe(_0x3e6422-0x3da,_0x17fddc);}this[_0x3a6ec0(0x213,0x19d)]();}[_0x467932(0x9b,0x116)](){function _0x31dcb6(_0x46b524,_0x5919ae){return _0x467932(_0x46b524,_0x5919ae- -0x5c);}function _0x400d69(_0x2af150,_0x2f2269){return _0x467932(_0x2f2269,_0x2af150-0x17f);}if(this[_0x31dcb6(0xab,0x95)])return;this[_0x400d69(0x270,0x216)]=!![];if(this['worker'])this['windField'][_0x400d69(0x295,0x2be)]();else{const _0x47f08c=this[_0x400d69(0x268,0x2a9)][_0x31dcb6(0xde,0xc5)]();this['_drawLines'](_0x47f08c);}this[_0x400d69(0x270,0x2a2)]=![];}['_drawLines'](_0x1fa945){this['_canvasParticles']=_0x1fa945,this['canvasContext']['globalCompositeOperation']=_0x326cc1(0x370,0x3d5),this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']);function _0x22a7bb(_0x52bca3,_0x464d48){return _0x3c9dfe(_0x52bca3-0x393,_0x464d48);}this['canvasContext']['globalCompositeOperation']='lighter',this['canvasContext']['globalAlpha']=0.9;function _0x326cc1(_0x1ca8d4,_0x484f0d){return _0x467932(_0x1ca8d4,_0x484f0d-0x2be);}const _0x578415=this['_map']['scene'][_0x326cc1(0x40c,0x3b0)]!==Cesium[_0x22a7bb(0x15f,0x159)][_0x326cc1(0x360,0x3dc)],_0x1c0cf4=this['canvasWidth']*0.25;if(this[_0x326cc1(0x3bc,0x3e1)])for(let _0x400319=0x0,_0x21f8a4=_0x1fa945['length'];_0x400319<_0x21f8a4;_0x400319++){const _0x3345e4=_0x1fa945[_0x400319],_0x31d705=this['_tomap'](_0x3345e4,_0x3345e4['lng'],_0x3345e4[_0x326cc1(0x439,0x3e4)],_0x3345e4['alt']),_0x1a9b2c=this[_0x22a7bb(0x177,0x101)](_0x3345e4,_0x3345e4['tlng'],_0x3345e4['tlat'],_0x3345e4[_0x22a7bb(0x128,0x176)]);if(!_0x31d705||!_0x1a9b2c)continue;if(_0x578415&&Math['abs'](_0x31d705[0x0]-_0x1a9b2c[0x0])>=_0x1c0cf4)continue;this['canvasContext']['beginPath'](),this[_0x326cc1(0x3dc,0x38d)][_0x326cc1(0x2ff,0x2fc)]=this[_0x22a7bb(0x112,0x17a)],this['canvasContext']['strokeStyle']=this[_0x326cc1(0x425,0x3e1)]['getColor'](_0x3345e4['speed']),this['canvasContext'][_0x326cc1(0x356,0x306)](_0x31d705[0x0],_0x31d705[0x1]),this[_0x22a7bb(0x1a3,0x206)]['lineTo'](_0x1a9b2c[0x0],_0x1a9b2c[0x1]),this['canvasContext']['stroke']();}else{this['canvasContext']['beginPath'](),this['canvasContext'][_0x22a7bb(0x112,0xc1)]=this['lineWidth'],this[_0x326cc1(0x369,0x38d)]['strokeStyle']=this[_0x22a7bb(0x10f,0xab)];for(let _0x2260b4=0x0,_0x3d4f70=_0x1fa945['length'];_0x2260b4<_0x3d4f70;_0x2260b4++){const _0x11f167=_0x1fa945[_0x2260b4],_0x441e69=this[_0x22a7bb(0x177,0x117)](_0x11f167,_0x11f167[_0x22a7bb(0x12d,0xd5)],_0x11f167['lat'],_0x11f167[_0x22a7bb(0x18b,0x1c5)]),_0x1b163d=this['_tomap'](_0x11f167,_0x11f167['tlng'],_0x11f167['tlat'],_0x11f167['talt']);if(!_0x441e69||!_0x1b163d)continue;if(_0x578415&&Math['abs'](_0x441e69[0x0]-_0x1b163d[0x0])>=_0x1c0cf4)continue;this[_0x22a7bb(0x1a3,0x20e)]['moveTo'](_0x441e69[0x0],_0x441e69[0x1]),this['canvasContext']['lineTo'](_0x1b163d[0x0],_0x1b163d[0x1]);}this[_0x326cc1(0x37c,0x38d)]['stroke']();}}['_tomap'](_0x5b99cf,_0x5125c0,_0x2a8a24,_0x41167a){const _0xbd85ea=Cesium['Cartesian3'][_0x8eb577(0x292,0x27d)](_0x5125c0,_0x2a8a24,_0x41167a??this['fixedHeight']);function _0x138862(_0x38972b,_0x4d79c0){return _0x467932(_0x38972b,_0x4d79c0-0x17d);}const _0x2ddce4=this['_map']['scene'];if(_0x2ddce4['mode']===Cesium['SceneMode']['SCENE3D']){const _0x2f1710=new Cesium[(_0x138862(0x1ee,0x1cf))](_0x2ddce4[_0x8eb577(0x1bc,0x203)]['ellipsoid'],_0x2ddce4['camera']['positionWC']),_0x76b518=_0x2f1710['isPointVisible'](_0xbd85ea);if(!_0x76b518)return _0x5b99cf['age']=0x0,null;}const _0x16d6ca=mars3d__namespace[_0x8eb577(0x23f,0x21f)]['toWindowCoordinates'](this['_map'][_0x8eb577(0x265,0x237)],_0xbd85ea);function _0x8eb577(_0x4340ee,_0x353607){return _0x3c9dfe(_0x353607-0x473,_0x4340ee);}return _0x16d6ca?[_0x16d6ca['x'],_0x16d6ca['y']]:null;}['clear'](){this['windField'][_0x488b15(-0xce,-0x108)]();function _0x3cf8a5(_0x59368a,_0x947ce2){return _0x3c9dfe(_0x947ce2-0x47b,_0x59368a);}function _0x488b15(_0x31d2d5,_0x171688){return _0x3c9dfe(_0x31d2d5-0x10d,_0x171688);}delete this[_0x3cf8a5(0x2ec,0x2d5)];}[_0x467932(0x4c,0x39)](){this['worker']=new Worker(this['options']['worker']);function _0x89274d(_0x39c4bf,_0x3480b4){return _0x467932(_0x3480b4,_0x39c4bf-0x54);}this['worker'][_0x89274d(0x162,0x1cd)]=_0xdab7a9=>{function _0x19c739(_0x25e9ad,_0x56a67d){return _0x89274d(_0x25e9ad- -0xd3,_0x56a67d);}this['_drawLines'](_0xdab7a9[_0x19c739(-0x15,-0x2c)][_0x19c739(0x2d,0x54)]);function _0x419cbc(_0x219a20,_0x128e1d){return _0x89274d(_0x128e1d- -0x1ac,_0x219a20);}this['_updateIng2']=![];},this['windField']={'init':_0xbf280=>{const _0x3172a9={};function _0x276b46(_0x31f619,_0x1d3851){return _0x89274d(_0x1d3851-0xa3,_0x31f619);}_0x3172a9[_0xf3c365(-0x2b2,-0x2a9)]='init';function _0xf3c365(_0x406da5,_0x2258ed){return _0x89274d(_0x406da5- -0x379,_0x2258ed);}_0x3172a9['options']=_0xbf280,this[_0xf3c365(-0x2e6,-0x2c9)]['postMessage'](_0x3172a9);},'setOptions':_0x402f5f=>{const _0x13264f={};_0x13264f[_0xfa2948(0x130,0x179)]='setOptions',_0x13264f['options']=_0x402f5f;function _0xfa2948(_0xfd3b7a,_0x187354){return _0x89274d(_0x187354-0xb2,_0xfd3b7a);}this['worker']['postMessage'](_0x13264f);},'setDate':_0x39eec2=>{const _0x372dce={};function _0x2078f3(_0x3135dd,_0x329b02){return _0x89274d(_0x3135dd- -0x6b,_0x329b02);}_0x372dce['type']='setDate',_0x372dce['data']=_0x39eec2;function _0x3c2aeb(_0xb6f9eb,_0x5a7dd6){return _0x89274d(_0x5a7dd6-0x271,_0xb6f9eb);}this[_0x2078f3(0x28,-0x3a)][_0x2078f3(0xde,0xb3)](_0x372dce);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];function _0x4060c4(_0x5815cd,_0x55805b){return _0x89274d(_0x5815cd-0x111,_0x55805b);}const _0x1104ef={};_0x1104ef[_0x365c3d(0xc7,0x131)]=_0x365c3d(0x16a,0x1af);function _0x365c3d(_0x407978,_0x560dc6){return _0x89274d(_0x407978-0x0,_0x560dc6);}this['worker']['postMessage'](_0x1104ef);},'clear':()=>{const _0x31d629={};_0x31d629['type']='clear';function _0x1f603a(_0x5a9834,_0x2601c7){return _0x89274d(_0x2601c7-0x303,_0x5a9834);}this[_0x1f603a(0x394,0x396)]['postMessage'](_0x31d629);}},this['windField']['init'](this['options']);}}mars3d__namespace['LayerUtil'][_0x467932(0xc4,0xab)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x3c9dfe(-0x20d,-0x202)]=CanvasWindField,mars3d__namespace[_0x467932(0x87,0x45)][_0x467932(0xd8,0x77)](_0x3c9dfe(-0x19a,-0x1e7)+version+'\x20\x20\x20\x20编译日期：'+buildTime),mars3d__namespace[_0x467932(0x5,0x36)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0x3c9dfe(-0x289,-0x2b2)]=WindUtil;const _0x296bbc={};_0x296bbc['value']=!![],Object['defineProperty'](exports,_0x467932(0x158,0xda),_0x296bbc);
}));
