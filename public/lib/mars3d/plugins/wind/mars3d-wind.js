/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.9
 * 编译日期：2025-11-23 20:57
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x173661,_0x4e713e){function _0x58606d(_0xc4b13a,_0xb737e2){return _0x1007(_0xc4b13a- -0x16,_0xb737e2);}const _0x55e5c1=_0x173661();function _0xb9fe01(_0x25ffe9,_0x5d9730){return _0x1007(_0x5d9730-0x28e,_0x25ffe9);}while(!![]){try{const _0x241ba6=parseInt(_0xb9fe01(0x354,0x3b9))/0x1+parseInt(_0x58606d(0x1ad,0x1c7))/0x2*(-parseInt(_0xb9fe01(0x436,0x3f9))/0x3)+-parseInt(_0xb9fe01(0x41d,0x3e8))/0x4+-parseInt(_0x58606d(0x202,0x204))/0x5+-parseInt(_0xb9fe01(0x3b2,0x3f4))/0x6+-parseInt(_0x58606d(0x184,0x157))/0x7+parseInt(_0xb9fe01(0x3d5,0x3ba))/0x8;if(_0x241ba6===_0x4e713e)break;else _0x55e5c1['push'](_0x55e5c1['shift']());}catch(_0x512540){_0x55e5c1['push'](_0x55e5c1['shift']());}}}(_0x485d,0x330ee));function _interopNamespace(_0x35723b){if(_0x35723b&&_0x35723b['__esModule'])return _0x35723b;var _0x162a3f=Object[_0x468c9c(-0x19d,-0x1be)](null);_0x35723b&&Object['keys'](_0x35723b)['forEach'](function(_0x4b8e1d){function _0x2462fa(_0x4ffcb6,_0x331323){return _0x468c9c(_0x4ffcb6,_0x331323-0x625);}function _0x3740e8(_0x37df01,_0xafc293){return _0x468c9c(_0xafc293,_0x37df01-0x2f5);}if(_0x4b8e1d!==_0x2462fa(0x40b,0x434)){var _0xe12289=Object['getOwnPropertyDescriptor'](_0x35723b,_0x4b8e1d);Object['defineProperty'](_0x162a3f,_0x4b8e1d,_0xe12289[_0x3740e8(0x1a1,0x1a3)]?_0xe12289:{'enumerable':!![],'get':function(){return _0x35723b[_0x4b8e1d];}});}});_0x162a3f['default']=_0x35723b;function _0x468c9c(_0x188270,_0xa6b380){return _0x1007(_0xa6b380- -0x312,_0x188270);}return _0x162a3f;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0xae6fa4,_0x182f43){const _0x30e140=_0xae6fa4*Math[_0x138135(0xe7,0xd9)](Cesium$2['Math']['toRadians'](_0x182f43));function _0x138135(_0x29bbab,_0x45a824){return _0x1007(_0x45a824- -0x13b,_0x29bbab);}return _0x30e140;}function getV(_0x256928,_0x4a69c6){function _0x446bd1(_0x321f9b,_0x47dd4a){return _0x1007(_0x321f9b- -0x292,_0x47dd4a);}const _0x553b2a=_0x256928*Math['sin'](Cesium$2[_0x446bd1(-0x144,-0x14e)][_0x446bd1(-0x154,-0x194)](_0x4a69c6));function _0x67c9c3(_0x3ee61d,_0x588f28){return _0x1007(_0x588f28-0x38b,_0x3ee61d);}return _0x553b2a;}function getSpeed(_0x3f8002,_0x5d9671){function _0x30dcaf(_0xe2ca5,_0x257cb1){return _0x1007(_0xe2ca5- -0x24c,_0x257cb1);}const _0x346766=Math['sqrt'](Math[_0x30dcaf(-0xf6,-0x156)](_0x3f8002,0x2)+Math[_0x30dcaf(-0xf6,-0x105)](_0x5d9671,0x2));function _0x15b51b(_0x2c51d6,_0x270915){return _0x1007(_0x2c51d6-0xfe,_0x270915);}return _0x346766;}function getDirection(_0x2f578a,_0x111c81){let _0x23cdb4=Cesium$2['Math'][_0x34bd19(-0x1d0,-0x1cf)](Math['atan2'](_0x111c81,_0x2f578a));function _0x34bd19(_0x275f67,_0x28ebd3){return _0x1007(_0x28ebd3- -0x337,_0x275f67);}return _0x23cdb4+=_0x23cdb4<0x0?0x168:0x0,_0x23cdb4;}const _0xf5c3e9={};_0xf5c3e9[_0x31dd88(0x3c8,0x3fd)]=null,_0xf5c3e9[_0x342adc(0x51f,0x551)]=getU,_0xf5c3e9[_0x31dd88(0x39d,0x390)]=getV,_0xf5c3e9['getSpeed']=getSpeed,_0xf5c3e9[_0x31dd88(0x2ec,0x33e)]=getDirection;var WindUtil=_0xf5c3e9,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader=_0x342adc(0x3f9,0x44f),renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';function _0x1007(_0x487ae6,_0x33938d){const _0x485d34=_0x485d();return _0x1007=function(_0x100753,_0x43b84a){_0x100753=_0x100753-0x11a;let _0x346f17=_0x485d34[_0x100753];return _0x346f17;},_0x1007(_0x487ae6,_0x33938d);}const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];function _0x485d(){const _0x36faab=['displayRange','abs','0px','segmentsDepth','type','setOptions','fragmentShaderSource','east','max\x20is\x20undefined,\x20calculate\x20max','OPAQUE','left','fromCssColorString','sceneMode','maxAge','#ffffff','container','reCreateWindTextures','preExecute','number','outputTexture','tlat','UNSIGNED_BYTE','off','object','1048453JaIOJM','ONE_MINUS_SRC_ALPHA','initFrameRate','rgb(206,255,255)','_randomParticle','width','_canrefresh','primitives','dropRateBump','sources','unbindEvent','_onMouseMoveEvent','previousParticlesPosition','clearCommand','bindEvent','speed','moveTo','max','mouseMove','WindUtil','updatePosition','toGridXY','clear','value','cols','createSegmentsGeometry','viewerParameters','options','setData','lng','fixedHeight','rows','bounds','_speedRate','layer','addEventListener','get','execute','forEach','data','componentsPerAttribute','30ShOWKw','latRange','blendFuncDestination','random','lat','register','getPrimitives','fillRect','rawRenderState','add','minificationFilter','_onMapWhellEvent','umax','isArray','context','getParticles','framebuffers','warn','computing','getV','mars3d-wind插件\x20注册成功','sqrt','_mountedHook','STATIC_DRAW','xmin','ymin','floor','prototype','interpolated','_onMouseUpEvent','colors','segments','ellipsoid','removeEventListener','clearFramebuffers','_updateIng2','getSegmentDrawFragmentShader','array','tlng','bind','clientWidth','_setOptionsHook','windField','color','values','_calcUV','frameRateAdjustment','getPostProcessingPositionShader','modelMatrix','rendering','Cartesian2','owner','textures','RGBA','postProcessingPosition','vdata','_addedHook','Compute','requestRender','isDynamic','dynamic','redraw','__proto__','domain','length','getUVByPoint','commandToExecute','north','frameRate','pointer-events','scene','autoClear','commandList','createRenderingFramebuffers','show','particleSystem','getRandomLatLng','ColorRamp','mouseDown','canvasHeight','clientHeight','cos','nextParticlesPosition','south','update','1374135BfiRGU','fill','createPrimitives','height','wrapT','speedFactor','getUVByXY','LayerUtil','mouseHidden','resize','frameRateMonitor','colorTable','bufferUsage','RED','attributeLocations','_calc_speedRate','particlesTextureSize','_colorRamp','getU','geometry','stringify','west','applyViewerParameters','_tomap','FLOAT','vertexShaderSource','default','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','Rectangle','style','getDirection','fromGeometry','mouseUp','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','frameState.commandList\x20is\x20undefined','commandType','91618oXukww','10616224QfKtyS','canvas','drawingBufferHeight','TRIANGLES','LINEAR','changed','refreshTimer','NEAREST','grid','particlesNumber','isInExtent','pointerEvents','Log','_showHook','mode','age','hidden','_map','toRadians','auto','DEPTH_COMPONENT','vertexArray','call','createWindTextures','canvasContext','createRenderingTextures','logInfo','rectangle','windData','PointTrans','framebuffer','postMessage','flipY','Cesium','Math','CanvasWindField','positionWC','udata','dropRate','zIndex','create','uniformMap','pow','particlesSpeed','destroyParticlesTextures','updateViewerParameters','1532272VMpEyr','WindLayer','lastFramesPerSecond','xmax','createParticlesTextures','pixelSize','canvasWidth','EventType','_maxAge','windTextures','mouse_down','removeChild','1863738sKKfOW','min','toDegrees','particlesTextures','visibility','18243xBRrik','speedRate','mouse_move','currentParticlesPosition','camera','lineWidth','_onMouseDownEvent','_removedHook','updateOptions','shaderProgram','visible','particles','_canvasParticles','getDataAtLonLat','initWorker','morphComplete','worker','primitiveType','ymax','destroy','setGeometry','stroke','_pointerEvents'];_0x485d=function(){return _0x36faab;};return _0x485d();}class ShaderManager{static['getCalculateSpeedShader'](){const _0x5ec29c={};return _0x5ec29c['sources']=[calculateSpeedShader],new ShaderSource$1(_0x5ec29c);}static['getUpdatePositionShader'](){const _0x408ed9={};return _0x408ed9['sources']=[updatePositionShader],new ShaderSource$1(_0x408ed9);}static['getSegmentDrawVertexShader'](){const _0x4974c={};return _0x4974c['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x4974c);}static['getSegmentDrawFragmentShader'](){const _0x749ac3={};_0x749ac3[_0x3c428c(-0x4e,-0x39)]=[renderParticlesFragmentShader];function _0x3c428c(_0x28d054,_0x8f924a){return _0x342adc(_0x28d054,_0x8f924a- -0x503);}return new ShaderSource$1(_0x749ac3);}static['getPostProcessingPositionShader'](){const _0x167228={};return _0x167228['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x167228);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0x342adc(0x468,0x474)];class CustomPrimitive{constructor(_0x2518f7){this['commandType']=_0x2518f7['commandType'],this['geometry']=_0x2518f7['geometry'],this['attributeLocations']=_0x2518f7['attributeLocations'],this['primitiveType']=_0x2518f7[_0x3297e0(0x15d,0x1c9)],this[_0x3297e0(0x215,0x1a2)]=_0x2518f7[_0x3297e0(0x1c3,0x1a2)]||{},this[_0x3297e0(0x1c4,0x16d)]=_0x2518f7['vertexShaderSource'],this[_0x3a4d15(0x1d1,0x232)]=_0x2518f7[_0x3297e0(0x25d,0x1d5)],this['rawRenderState']=_0x2518f7['rawRenderState'],this[_0x3a4d15(0x193,0x187)]=_0x2518f7['framebuffer'],this['outputTexture']=_0x2518f7['outputTexture'];function _0x3297e0(_0x7fa22f,_0x11f824){return _0x342adc(_0x7fa22f,_0x11f824- -0x2da);}this['autoClear']=_0x2518f7[_0x3a4d15(0x253,0x1db)]??![],this['preExecute']=_0x2518f7[_0x3297e0(0x186,0x1e0)],this[_0x3a4d15(0x256,0x223)]=!![],this[_0x3297e0(0x2a7,0x252)]=undefined,this['clearCommand']=undefined,this[_0x3297e0(0x2a2,0x24b)]=_0x2518f7['isDynamic']??(()=>!![]);function _0x3a4d15(_0x46303c,_0x5211c4){return _0x342adc(_0x5211c4,_0x46303c- -0x2de);}this['autoClear']&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x3297e0(0x1d8,0x197)],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x451799){function _0x456e96(_0x1c430c,_0x1db2fb){return _0x342adc(_0x1db2fb,_0x1c430c- -0xb6);}function _0xf80673(_0x3a222b,_0x4393fd){return _0x342adc(_0x3a222b,_0x4393fd- -0x105);}if(this[_0x456e96(0x39b,0x36b)]==='Draw'){const _0xa0d3dc={};_0xa0d3dc[_0xf80673(0x3f5,0x3f3)]=_0x451799,_0xa0d3dc['geometry']=this[_0x456e96(0x38b,0x3ab)],_0xa0d3dc['attributeLocations']=this['attributeLocations'],_0xa0d3dc[_0xf80673(0x412,0x446)]=BufferUsage$1[_0x456e96(0x44b,0x488)];const _0x1741db=VertexArray$1[_0x456e96(0x397,0x384)](_0xa0d3dc),_0xa78637={};_0xa78637['context']=_0x451799,_0xa78637[_0xf80673(0x340,0x342)]=this['vertexShaderSource'],_0xa78637['fragmentShaderSource']=this['fragmentShaderSource'],_0xa78637['attributeLocations']=this['attributeLocations'];const _0x1a08b9=ShaderProgram['fromCache'](_0xa78637),_0x483cfe=RenderState['fromCache'](this[_0x456e96(0x43c,0x3ba)]),_0x77860={};return _0x77860[_0x456e96(0x467,0x45e)]=this,_0x77860['vertexArray']=_0x1741db,_0x77860[_0xf80673(0x39e,0x39e)]=this['primitiveType'],_0x77860[_0xf80673(0x393,0x415)]=Matrix4['IDENTITY'],_0x77860['renderState']=_0x483cfe,_0x77860['shaderProgram']=_0x1a08b9,_0x77860[_0xf80673(0x3be,0x36c)]=this[_0x456e96(0x3bb,0x34c)],_0x77860[_0xf80673(0x392,0x377)]=this[_0xf80673(0x349,0x377)],_0x77860['pass']=Pass$1[_0x456e96(0x3fc,0x37f)],new DrawCommand(_0x77860);}else{if(this['commandType']==='Compute'){const _0x14af0c={};return _0x14af0c['owner']=this,_0x14af0c['fragmentShaderSource']=this['fragmentShaderSource'],_0x14af0c[_0xf80673(0x365,0x377)]=this[_0xf80673(0x3b6,0x377)],_0x14af0c['outputTexture']=this[_0xf80673(0x350,0x3b7)],_0x14af0c['persists']=!![],new ComputeCommand(_0x14af0c);}else throw new Error('Unknown\x20command\x20type');}}[_0x342adc(0x4f7,0x4a6)](_0x1d99dd,_0x24478e){function _0x4fd80c(_0x2a1726,_0x3f480e){return _0x31dd88(_0x2a1726- -0x264,_0x3f480e);}this[_0x4fd80c(0x7d,0x49)]=_0x24478e;function _0x5d5bef(_0x4074b1,_0x255663){return _0x31dd88(_0x4074b1-0x155,_0x255663);}defined(this['commandToExecute'])&&(this['commandToExecute']['vertexArray']=VertexArray$1['fromGeometry']({'context':_0x1d99dd,'geometry':this['geometry'],'attributeLocations':this[_0x4fd80c(0x189,0x1fb)],'bufferUsage':BufferUsage$1[_0x5d5bef(0x4f6,0x50b)]}));}['update'](_0xfd3745){if(!this['isDynamic']())return;function _0x26f651(_0x5a68ca,_0x30300e){return _0x342adc(_0x30300e,_0x5a68ca- -0xc4);}if(!this[_0x26f651(0x470,0x486)]||!defined(_0xfd3745))return;!defined(this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0xfd3745['context']));defined(this[_0xa083ec(-0x2a3,-0x21a)])&&this['preExecute']();if(!_0xfd3745[_0x26f651(0x46e,0x3fe)]){console['warn'](_0xa083ec(-0x2e4,-0x284));return;}function _0xa083ec(_0x3b1e8d,_0x353e15){return _0x342adc(_0x3b1e8d,_0x353e15- -0x6d4);}defined(this[_0x26f651(0x40a,0x405)])&&_0xfd3745['commandList']['push'](this['clearCommand']),defined(this['commandToExecute'])&&_0xfd3745['commandList']['push'](this[_0xa083ec(-0x1da,-0x1a8)]);}['isDestroyed'](){return![];}[_0x31dd88(0x345,0x322)](){function _0x36e7b1(_0x59cff7,_0x3d8b49){return _0x31dd88(_0x3d8b49-0x3b,_0x59cff7);}if(defined(this[_0x36e7b1(0x410,0x407)])){var _0x43a7ef;(_0x43a7ef=this['commandToExecute']['shaderProgram'])===null||_0x43a7ef===void 0x0||_0x43a7ef['destroy'](),this['commandToExecute'][_0x1e0913(0x4cc,0x498)]=undefined;}function _0x1e0913(_0x3a33f9,_0x2152d2){return _0x342adc(_0x3a33f9,_0x2152d2- -0x3);}return destroyObject(this);}}function deepMerge(_0x2ae125,_0x2a7a9e){if(!_0x2ae125)return _0x2a7a9e;if(!_0x2a7a9e)return _0x2ae125;const _0x507918={..._0x2a7a9e},_0x302bfa=_0x507918;for(const _0x3fcb41 in _0x2ae125){if(Object[_0x5166e3(0x457,0x41e)]['hasOwnProperty'][_0x40ca39(-0xa5,-0xa4)](_0x2ae125,_0x3fcb41)){const _0x17d27a=_0x2ae125[_0x3fcb41],_0x574d51=_0x2a7a9e[_0x3fcb41];if(Array[_0x40ca39(-0x6,-0x16)](_0x17d27a)){_0x302bfa[_0x3fcb41]=_0x17d27a['slice']();continue;}if(_0x17d27a&&typeof _0x17d27a===_0x40ca39(-0xe,-0x4d)){_0x302bfa[_0x3fcb41]=deepMerge(_0x17d27a,_0x574d51||{});continue;}_0x17d27a!==undefined&&(_0x302bfa[_0x3fcb41]=_0x17d27a);}}function _0x40ca39(_0x41823c,_0x5f27a2){return _0x31dd88(_0x5f27a2- -0x3ad,_0x41823c);}function _0x5166e3(_0xfa578c,_0x5ba8ff){return _0x31dd88(_0x5ba8ff-0x79,_0xfa578c);}return _0x302bfa;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x342adc(0x436,0x474)];class WindParticlesComputing{constructor(_0x33a4fd,_0x22915e,_0x1598dd,_0x3a64ce,_0x30ba8f){this[_0x51847a(-0x1c,0x60)]=_0x33a4fd,this[_0x4303ab(-0xef,-0x93)]=_0x1598dd,this[_0x4303ab(-0x1d,-0x94)]=_0x3a64ce,this['windData']=_0x22915e,this[_0x4303ab(-0xc8,-0x41)]=0x3c,this['frameRateAdjustment']=0x1;const _0x4bcab3={};_0x4bcab3['scene']=_0x30ba8f,_0x4bcab3['samplingWindow']=0x1,_0x4bcab3['quietPeriod']=0x0,this[_0x51847a(0x10c,0xb1)]=new FrameRateMonitor(_0x4bcab3),this[_0x51847a(-0x32,0x2b)](),this[_0x4303ab(-0x16d,-0x105)](),this[_0x51847a(0x2f,-0x13)]();function _0x51847a(_0x41ae45,_0x30da57){return _0x31dd88(_0x30da57- -0x338,_0x41ae45);}function _0x4303ab(_0x325122,_0x2ef998){return _0x342adc(_0x325122,_0x2ef998- -0x56f);}this['createComputingPrimitives']();}[_0x31dd88(0x363,0x2e3)](){const _0x59deb7=()=>{function _0xcd0d2e(_0x5f2af9,_0x10f759){return _0x1007(_0x5f2af9-0x59,_0x10f759);}function _0x21fcd8(_0x1aacf2,_0x4136fc){return _0x1007(_0x4136fc- -0x125,_0x1aacf2);}this[_0xcd0d2e(0x27b,0x1f9)][_0x21fcd8(-0x34,0x37)]>0x14&&(this['frameRate']=this['frameRateMonitor']['lastFramesPerSecond'],this[_0xcd0d2e(0x24a,0x282)]=0x3c/Math['max'](this['frameRate'],0x1));};_0x59deb7();const _0x1724e4=setInterval(_0x59deb7,0x3e8);function _0x45cffa(_0x1f2266,_0x42fb66){return _0x31dd88(_0x1f2266-0x1f9,_0x42fb66);}const _0x268fd6=this['destroy']['bind'](this);this[_0x45cffa(0x53e,0x4fd)]=()=>{clearInterval(_0x1724e4),_0x268fd6();};}['createWindTextures'](){const _0x90a242={};_0x90a242[_0x4a4e5d(-0x10f,-0x9f)]=TextureMinificationFilter$1['LINEAR'],_0x90a242['magnificationFilter']=TextureMagnificationFilter$1['LINEAR'];const _0x7a6ea3={'context':this[_0x258c3d(0x45b,0x48e)],'width':this['windData'][_0x4a4e5d(-0xe9,-0xcd)],'height':this[_0x258c3d(0x3d2,0x3dc)]['height'],'pixelFormat':PixelFormat$1[_0x258c3d(0x4af,0x483)],'pixelDatatype':PixelDatatype$1[_0x258c3d(0x3a9,0x352)],'flipY':this[_0x258c3d(0x43f,0x3d1)][_0x258c3d(0x3d6,0x3df)]??![],'sampler':new Sampler$1(_0x90a242)};function _0x258c3d(_0x4c501e,_0x279c88){return _0x342adc(_0x279c88,_0x4c501e- -0x9d);}function _0x4a4e5d(_0x33fe0f,_0x21b924){return _0x342adc(_0x33fe0f,_0x21b924- -0x593);}this['windTextures']={'U':new Texture$1({..._0x7a6ea3,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x258c3d(0x472,0x496)])}}),'V':new Texture$1({..._0x7a6ea3,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}['createParticlesTextures'](){function _0x516203(_0x395f0b,_0x167aa6){return _0x342adc(_0x167aa6,_0x395f0b-0x23);}const _0x4fd3d5={};_0x4fd3d5['minificationFilter']=TextureMinificationFilter$1['NEAREST'],_0x4fd3d5['magnificationFilter']=TextureMagnificationFilter$1[_0x380437(0x3f2,0x41d)];function _0x380437(_0x1f24c1,_0x28da14){return _0x342adc(_0x28da14,_0x1f24c1- -0x68);}const _0x48cb20={'context':this['context'],'width':this[_0x516203(0x4ff,0x565)]['particlesTextureSize'],'height':this[_0x516203(0x4ff,0x57c)][_0x516203(0x572,0x540)],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this[_0x516203(0x4ff,0x543)]['particlesTextureSize']*0x4)[_0x516203(0x563,0x5c5)](0x0)},'sampler':new Sampler$1(_0x4fd3d5)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x48cb20),'currentParticlesPosition':new Texture$1(_0x48cb20),'nextParticlesPosition':new Texture$1(_0x48cb20),'postProcessingPosition':new Texture$1(_0x48cb20),'particlesSpeed':new Texture$1(_0x48cb20)};}[_0x342adc(0x44e,0x47f)](){Object['values'](this['particlesTextures'])['forEach'](_0x377184=>_0x377184['destroy']());}['createComputingPrimitives'](){function _0x2b8dd8(_0x3deacd,_0x4ef26b){return _0x31dd88(_0x3deacd- -0x119,_0x4ef26b);}function _0x11fbe9(_0x39ee2a,_0x36e7a7){return _0x31dd88(_0x39ee2a- -0x28,_0x36e7a7);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x11fbe9(0x39b,0x3b4),'uniformMap':{'U':()=>this[_0x11fbe9(0x302,0x36f)]['U'],'V':()=>this[_0x11fbe9(0x302,0x2ae)]['V'],'uRange':()=>new Cartesian2$1(this[_0x2b8dd8(0x1f6,0x1c0)]['u']['min'],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0x2b8dd8(0x215,0x299)],this[_0x2b8dd8(0x1f6,0x1c2)]['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData'][_0x11fbe9(0x348,0x315)]['min'],this['windData']['speed'][_0x11fbe9(0x34a,0x310)]),'currentParticlesPosition':()=>this[_0x2b8dd8(0x217,0x236)]['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x5dc598(_0x76bab1,_0xdac165){return _0x11fbe9(_0xdac165- -0x4dc,_0x76bab1);}function _0x17e78e(_0x1a07d8,_0x1c8d95){return _0x2b8dd8(_0x1a07d8- -0x330,_0x1c8d95);}return(this[_0x17e78e(-0xce,-0x12c)]['pixelSize']+0x32)*this[_0x17e78e(-0xcd,-0x66)]['speedFactor'];},'frameRateAdjustment':()=>this[_0x2b8dd8(0x29f,0x2db)],'dimension':()=>new Cartesian2$1(this['windData'][_0x11fbe9(0x33e,0x364)],this[_0x11fbe9(0x2e7,0x305)][_0x11fbe9(0x3ba,0x363)]),'minimum':()=>new Cartesian2$1(this[_0x2b8dd8(0x1f6,0x1c5)][_0x2b8dd8(0x268,0x1e2)]['west'],this['windData']['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData']['bounds']['east'],this[_0x2b8dd8(0x1f6,0x1ce)]['bounds'][_0x11fbe9(0x3a5,0x3ff)])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':()=>{const _0x135c7a=this[_0x355b02(-0x133,-0x138)][_0x5e956a(0x1,-0x1e)];this['particlesTextures']['previousParticlesPosition']=this[_0x5e956a(-0xb3,-0x5b)]['currentParticlesPosition'];function _0x355b02(_0x3ba3f2,_0x2002fa){return _0x11fbe9(_0x3ba3f2- -0x43b,_0x2002fa);}function _0x5e956a(_0x161582,_0x5351c4){return _0x2b8dd8(_0x5351c4- -0x272,_0x161582);}this['particlesTextures']['currentParticlesPosition']=this[_0x5e956a(-0x59,-0x5b)][_0x5e956a(0x8,0x35)],this['particlesTextures'][_0x5e956a(0x23,0x35)]=_0x135c7a,this[_0x355b02(-0xfb,-0x95)]['calculateSpeed']['commandToExecute']&&(this['primitives']['calculateSpeed']['commandToExecute']['outputTexture']=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'particlesSpeed':()=>this[_0x11fbe9(0x308,0x347)][_0x11fbe9(0x2f6,0x2c7)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x23e7db(_0x39d94f,_0xc50eba){return _0x11fbe9(_0xc50eba-0x126,_0x39d94f);}function _0x4f9d38(_0x1e675a,_0x1b2a83){return _0x2b8dd8(_0x1b2a83-0x4d,_0x1e675a);}this[_0x4f9d38(0x229,0x29c)]['updatePosition'][_0x4f9d38(0x2e0,0x300)]&&(this[_0x4f9d38(0x263,0x29c)]['updatePosition']['commandToExecute']['outputTexture']=this[_0x23e7db(0x3e7,0x42e)]['nextParticlesPosition']);},'isDynamic':()=>this[_0x2b8dd8(0x263,0x29e)][_0x2b8dd8(0x2ad,0x2ce)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures'][_0x11fbe9(0x3b4,0x3ce)],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds']['south'],this[_0x2b8dd8(0x1f6,0x1de)][_0x11fbe9(0x359,0x359)]['north']),'randomCoefficient':function(){function _0x19075c(_0x43602b,_0x2d028a){return _0x11fbe9(_0x43602b- -0x159,_0x2d028a);}return Math[_0x19075c(0x20c,0x26c)]();},'dropRate':()=>this[_0x2b8dd8(0x263,0x1e5)][_0x11fbe9(0x2f1,0x35e)],'dropRateBump':()=>this[_0x11fbe9(0x354,0x2d6)]['dropRateBump'],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager[_0x2b8dd8(0x2a0,0x2ac)](),'outputTexture':this[_0x11fbe9(0x308,0x373)][_0x2b8dd8(0x2a7,0x259)],'preExecute':()=>{function _0x4328cd(_0x4b8da0,_0x40f06f){return _0x11fbe9(_0x40f06f-0x1c,_0x4b8da0);}function _0x120bf7(_0x2af79e,_0x1e2061){return _0x11fbe9(_0x2af79e- -0x48d,_0x1e2061);}this['primitives'][_0x4328cd(0x3bb,0x3b4)]['commandToExecute']&&(this['primitives']['postProcessingPosition'][_0x120bf7(-0xe9,-0x76)]['outputTexture']=this[_0x4328cd(0x3a5,0x324)][_0x4328cd(0x3ba,0x3b4)]);},'isDynamic':()=>this['options']['dynamic']})};}['reCreateWindTextures'](){function _0x52f16c(_0x3821ed,_0x6dc64a){return _0x342adc(_0x3821ed,_0x6dc64a- -0x487);}this[_0x4fe82f(-0x228,-0x1bb)]['U'][_0x4fe82f(-0x12d,-0x1a0)]();function _0x4fe82f(_0x1f82e5,_0x160e53){return _0x31dd88(_0x160e53- -0x4e5,_0x1f82e5);}this['windTextures']['V']['destroy'](),this['createWindTextures']();}['updateWindData'](_0x2c4134){function _0x36ef9f(_0x457a16,_0x314c49){return _0x342adc(_0x457a16,_0x314c49- -0x185);}this[_0x36ef9f(0x2a2,0x2ea)]=_0x2c4134;function _0xd521ce(_0x1964d5,_0x333340){return _0x31dd88(_0x333340- -0x202,_0x1964d5);}this[_0xd521ce(0x11e,0x157)]();}[_0x31dd88(0x33a,0x2ed)](_0x3c4a53){const _0x43c222=_0x3c4a53['flipY']!==undefined&&_0x3c4a53[_0x3aad50(0x108,0x15e)]!==this['options'][_0x3aad50(0xfa,0x15e)];function _0x1d5054(_0x344053,_0x12dfd4){return _0x342adc(_0x344053,_0x12dfd4- -0x32);}function _0x3aad50(_0x2c2953,_0x395e07){return _0x342adc(_0x2c2953,_0x395e07- -0x315);}this[_0x1d5054(0x423,0x4aa)]=deepMerge(_0x3c4a53,this['options']),_0x43c222&&this['reCreateWindTextures']();}['processWindData'](_0x2f0672){function _0x33895c(_0x54f57a,_0x23f843){return _0x342adc(_0x54f57a,_0x23f843- -0x2fd);}const {array:_0x49ccdd}=_0x2f0672;let {min:_0x21ccd1,max:_0x5cd9ba}=_0x2f0672;const _0x51eb14=new Float32Array(_0x49ccdd[_0x33895c(0x223,0x22d)]);function _0xa01888(_0x4d6381,_0x37b499){return _0x31dd88(_0x4d6381- -0x4ca,_0x37b499);}_0x21ccd1===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x21ccd1=Math[_0xa01888(-0x19c,-0x1bc)](..._0x49ccdd));_0x5cd9ba===undefined&&(console[_0xa01888(-0x12f,-0x13b)](_0xa01888(-0x179,-0x11f)),_0x5cd9ba=Math[_0xa01888(-0x158,-0x1ae)](..._0x49ccdd));const _0x399c86=Math['max'](Math[_0x33895c(0x19b,0x1ad)](_0x21ccd1),Math['abs'](_0x5cd9ba));for(let _0x65661c=0x0;_0x65661c<_0x49ccdd['length'];_0x65661c++){const _0x68bc49=_0x49ccdd[_0x65661c]/_0x399c86;_0x51eb14[_0x65661c]=_0x68bc49;}return _0x51eb14;}['destroy'](){function _0x2bafa1(_0x22b622,_0x55c4a0){return _0x31dd88(_0x22b622-0x13a,_0x55c4a0);}Object['values'](this[_0x2dd48c(0x3dd,0x417)])[_0x2dd48c(0x43a,0x4bb)](_0x82cec1=>_0x82cec1['destroy']()),Object[_0x2bafa1(0x4f0,0x55e)](this[_0x2dd48c(0x3e3,0x3a2)])['forEach'](_0x3e0025=>_0x3e0025[_0x2dd48c(0x3f8,0x436)]()),Object['values'](this['primitives'])[_0x2dd48c(0x43a,0x43e)](_0x2cbbbd=>_0x2cbbbd[_0x2dd48c(0x3f8,0x427)]());function _0x2dd48c(_0x12378b,_0x50d3f9){return _0x31dd88(_0x12378b-0xb3,_0x50d3f9);}this['frameRateMonitor'][_0x2dd48c(0x3f8,0x444)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x19a436,_0x5800d1,_0x3082df,_0x280c8d){this[_0x475d6b(0x1d2,0x23e)]=_0x19a436,this['options']=_0x5800d1;function _0x3dde10(_0x1131cb,_0x3c9796){return _0x31dd88(_0x3c9796- -0x3a6,_0x1131cb);}this[_0x475d6b(0x1b5,0x1fe)]=_0x3082df,this['computing']=_0x280c8d;(typeof this['options'][_0x3dde10(0x33,0x49)]!==_0x3dde10(-0x4b,-0x4b)||this[_0x3dde10(0x45,-0x2a)]['particlesTextureSize']<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options']['particlesTextureSize']=0x100);this['colorTable']=this['createColorTableTexture'](),this['textures']=this[_0x475d6b(0x146,0xc9)]();function _0x475d6b(_0x5446e2,_0x2d7fd6){return _0x31dd88(_0x5446e2- -0x1c6,_0x2d7fd6);}this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this[_0x475d6b(0x21b,0x222)]();}[_0x342adc(0x476,0x46c)](){const _0x54135a={};_0x54135a[_0x44edc4(-0x201,-0x1fd)]=this[_0x44edc4(-0x254,-0x1fd)],_0x54135a['width']=this[_0x44edc4(-0x1f3,-0x1fd)]['drawingBufferWidth'],_0x54135a['height']=this['context']['drawingBufferHeight'],_0x54135a['pixelFormat']=PixelFormat[_0x44edc4(-0x239,-0x1d6)],_0x54135a['pixelDatatype']=PixelDatatype[_0x44edc4(-0x22e,-0x237)];const _0x5ba581=_0x54135a,_0x399b19={};_0x399b19[_0x44edc4(-0x1f5,-0x1fd)]=this[_0x44c352(0x421,0x459)],_0x399b19['width']=this['context']['drawingBufferWidth'];function _0x44c352(_0x6df7e9,_0x68d986){return _0x31dd88(_0x6df7e9-0x89,_0x68d986);}_0x399b19['height']=this['context'][_0x44edc4(-0x237,-0x2a0)],_0x399b19['pixelFormat']=PixelFormat[_0x44edc4(-0x230,-0x28e)];function _0x44edc4(_0x9352f2,_0x9dbba5){return _0x31dd88(_0x9dbba5- -0x595,_0x9352f2);}_0x399b19['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x10d4e5=_0x399b19;return{'segmentsColor':new Texture(_0x5ba581),'segmentsDepth':new Texture(_0x10d4e5)};}[_0x31dd88(0x3d3,0x41b)](){const _0x180749={};_0x180749[_0x415cac(-0x196,-0x166)]=this['context'];function _0x415cac(_0x445623,_0x5e8284){return _0x31dd88(_0x5e8284- -0x4fe,_0x445623);}function _0x4eba60(_0x40ea71,_0x2645ad){return _0x31dd88(_0x2645ad- -0x297,_0x40ea71);}return _0x180749['colorTextures']=[this[_0x4eba60(0x14e,0x127)]['segmentsColor']],_0x180749['depthTexture']=this[_0x415cac(-0x10b,-0x140)]['segmentsDepth'],{'segments':new Framebuffer(_0x180749)};}['destoryRenderingFramebuffers'](){function _0x357bdb(_0x2c78a1,_0x1c1849){return _0x342adc(_0x2c78a1,_0x1c1849- -0x77);}Object['values'](this[_0x357bdb(0x500,0x483)])['forEach'](_0xe33689=>{_0xe33689['destroy']();});}['createColorTableTexture'](){const _0x19989c=new Float32Array(this['options'][_0x50c08b(0x2b8,0x24f)]['flatMap'](_0x2272bc=>{function _0x52b30a(_0x536102,_0x12e5b3){return _0x50c08b(_0x12e5b3- -0x3e0,_0x536102);}const _0x55f9c6=Color$1[_0x52b30a(-0x140,-0x17c)](_0x2272bc);return[_0x55f9c6['red'],_0x55f9c6['green'],_0x55f9c6['blue'],_0x55f9c6['alpha']];})),_0x4ebfb7={};function _0x370e5f(_0x45acd9,_0x515074){return _0x31dd88(_0x45acd9- -0x1d6,_0x515074);}function _0x50c08b(_0x3fa5e3,_0x328ae4){return _0x342adc(_0x328ae4,_0x3fa5e3- -0x250);}return _0x4ebfb7['minificationFilter']=TextureMinificationFilter[_0x50c08b(0x207,0x18b)],_0x4ebfb7['magnificationFilter']=TextureMagnificationFilter[_0x370e5f(0x121,0x13a)],_0x4ebfb7['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x4ebfb7[_0x50c08b(0x2f3,0x271)]=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this['options'][_0x370e5f(0x1d2,0x1a3)][_0x370e5f(0x1f4,0x273)],'height':0x1,'pixelFormat':PixelFormat[_0x370e5f(0x1e9,0x205)],'pixelDatatype':PixelDatatype[_0x370e5f(0x110,0x90)],'sampler':new Sampler(_0x4ebfb7),'source':{'width':this['options']['colors']['length'],'height':0x1,'arrayBufferView':_0x19989c}});}['createSegmentsGeometry'](){const _0xfdcbea=0x4,_0x5f09e0=this['options']['particlesTextureSize'];let _0x59c400=[];for(let _0x3ca56e=0x0;_0x3ca56e<_0x5f09e0;_0x3ca56e++){for(let _0x46ed08=0x0;_0x46ed08<_0x5f09e0;_0x46ed08++){for(let _0x426f2e=0x0;_0x426f2e<_0xfdcbea;_0x426f2e++){_0x59c400['push'](_0x3ca56e/_0x5f09e0),_0x59c400['push'](_0x46ed08/_0x5f09e0);}}}_0x59c400=new Float32Array(_0x59c400);const _0x4d623d=this[_0x257b67(-0x154,-0x17b)][_0x257b67(-0xe1,-0xdb)]**0x2;let _0x321c4f=[];for(let _0x234e40=0x0;_0x234e40<_0x4d623d;_0x234e40++){_0x321c4f['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x321c4f=new Float32Array(_0x321c4f);let _0x5b043d=[];function _0x257b67(_0x46a34e,_0x584b36){return _0x31dd88(_0x46a34e- -0x4d0,_0x584b36);}for(let _0x2d02a8=0x0,_0x5c5a5a=0x0;_0x2d02a8<_0x4d623d;_0x2d02a8++){_0x5b043d['push'](_0x5c5a5a+0x0,_0x5c5a5a+0x1,_0x5c5a5a+0x2,_0x5c5a5a+0x2,_0x5c5a5a+0x1,_0x5c5a5a+0x3),_0x5c5a5a+=_0xfdcbea;}_0x5b043d=new Uint32Array(_0x5b043d);function _0x387a1f(_0x2edd79,_0x1155fd){return _0x342adc(_0x2edd79,_0x1155fd- -0x6a5);}const _0x4e67e0={};_0x4e67e0['componentDatatype']=ComponentDatatype['FLOAT'],_0x4e67e0['componentsPerAttribute']=0x2,_0x4e67e0['values']=_0x59c400;const _0x205dfe={};_0x205dfe['componentDatatype']=ComponentDatatype[_0x257b67(-0x1ea,-0x1ca)],_0x205dfe[_0x257b67(-0x147,-0x18b)]=0x3,_0x205dfe[_0x257b67(-0x11a,-0xd8)]=_0x321c4f;const _0x5dc9d3=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x4e67e0),'normal':new GeometryAttribute(_0x205dfe)}),'indices':_0x5b043d});return _0x5dc9d3;}['createRawRenderState'](_0x1fb941){const _0x55ff25={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x1fb941};return Appearance['getDefaultRenderState'](!![],![],_0x55ff25);}[_0x31dd88(0x3e1,0x38d)](){const _0x4940b6={};_0x4940b6['st']=0x0;function _0x1330b3(_0x339280,_0x1f400b){return _0x342adc(_0x339280,_0x1f400b- -0x4a1);}_0x4940b6['normal']=0x1;const _0x2763f6={};_0x2763f6['enabled']=!![];const _0x5d21f7={};_0x5d21f7['enabled']=!![],_0x5d21f7['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x5d21f7['blendFuncSource']=WebGLRenderingContext['SRC_ALPHA'],_0x5d21f7[_0xd765ba(-0x1b1,-0x131)]=WebGLRenderingContext[_0x1330b3(-0x2,0x21)];const _0x23b32b={};_0x23b32b['viewport']=undefined,_0x23b32b['depthTest']=_0x2763f6,_0x23b32b['depthMask']=!![],_0x23b32b['blending']=_0x5d21f7;const _0x3e35c8=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x4940b6,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x1330b3(0x2a,-0x4b)],'uniformMap':{'previousParticlesPosition':()=>this[_0xd765ba(-0x1a1,-0x1a6)]['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0x1330b3(-0x10,0x5b)]['particlesTextures'][_0x1330b3(0x29,-0xc)],'postProcessingPosition':()=>this['computing']['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this['computing'][_0x1330b3(-0x10,-0x11)]['particlesSpeed'],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{function _0x105e01(_0x1f4ae4,_0xc82075){return _0x1330b3(_0xc82075,_0x1f4ae4- -0x1e);}var _0xe3d0e1,_0x231a0b;function _0x11ff8b(_0x1eb8df,_0x562d91){return _0x1330b3(_0x562d91,_0x1eb8df-0x511);}const _0x3e9631=new Cartesian2(((_0xe3d0e1=this[_0x105e01(0x1d,-0x30)][_0x11ff8b(0x599,0x543)])===null||_0xe3d0e1===void 0x0?void 0x0:_0xe3d0e1[_0x11ff8b(0x4fe,0x4f2)])??this['computing'][_0x11ff8b(0x4df,0x4f4)][_0x105e01(0x11,0x81)]['min'],((_0x231a0b=this['options']['domain'])===null||_0x231a0b===void 0x0?void 0x0:_0x231a0b['max'])??this['computing']['windData']['speed'][_0x11ff8b(0x542,0x4d1)]);return _0x3e9631;},'displayRange':()=>{var _0x445b8a,_0x482a33;const _0x53fcce=new Cartesian2(((_0x445b8a=this[_0x429ed0(-0x107,-0xd7)]['displayRange'])===null||_0x445b8a===void 0x0?void 0x0:_0x445b8a['min'])??this['computing']['windData']['speed'][_0x429ed0(-0xd6,-0x125)],((_0x482a33=this[_0x429ed0(-0x133,-0xd7)][_0x429ed0(-0xb3,-0x10a)])===null||_0x482a33===void 0x0?void 0x0:_0x482a33[_0x47f4a4(0x208,0x1e0)])??this[_0x47f4a4(0x220,0x20a)][_0x429ed0(-0x11d,-0x144)][_0x47f4a4(0x247,0x1de)]['max']);function _0x429ed0(_0x1c7583,_0x45fed1){return _0xd765ba(_0x45fed1-0xea,_0x1c7583);}function _0x47f4a4(_0x31590a,_0x1c55aa){return _0x1330b3(_0x31590a,_0x1c55aa-0x1af);}return _0x53fcce;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this[_0xd765ba(-0x1a5,-0x19d)]['drawingBufferWidth']/this['context'][_0xd765ba(-0x248,-0x21c)],'pixelSize':()=>this[_0xd765ba(-0x1c2,-0x22e)][_0xd765ba(-0x217,-0x259)],'lineWidth':()=>{const _0x5a978d={};_0x5a978d['min']=0x1,_0x5a978d['max']=0x2;const _0x5cf5d3=this[_0x223228(0x58a,0x501)]['lineWidth']||_0x5a978d;function _0x223228(_0xe5d4a5,_0x373a96){return _0x1330b3(_0x373a96,_0xe5d4a5-0x54f);}return new Cartesian2(_0x5cf5d3['min'],_0x5cf5d3['max']);},'lineLength':()=>{const _0x26a3aa={};_0x26a3aa[_0x17a42f(-0x123,-0xf0)]=0x14,_0x26a3aa[_0x1ebd53(-0x3a,-0x92)]=0x64;const _0x3d3a4f=this['options']['lineLength']||_0x26a3aa;function _0x1ebd53(_0x599701,_0x26310b){return _0x1330b3(_0x26310b,_0x599701- -0x6b);}function _0x17a42f(_0x498cb5,_0x24c539){return _0x1330b3(_0x498cb5,_0x24c539- -0xdd);}return new Cartesian2(_0x3d3a4f[_0x17a42f(-0x11a,-0xf0)],_0x3d3a4f[_0x1ebd53(-0x3a,0x2f)]);},'is3D':()=>this[_0xd765ba(-0x1c2,-0x1c1)][_0x1330b3(0x81,0x14)]===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this[_0xd765ba(-0x17f,-0x108)][_0xd765ba(-0x1f1,-0x21d)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager[_0xd765ba(-0x18f,-0x17f)](),'rawRenderState':this['createRawRenderState'](_0x23b32b)}),_0x22ba1d={};function _0xd765ba(_0x43698e,_0x503703){return _0x342adc(_0x503703,_0x43698e- -0x69d);}return _0x22ba1d[_0x1330b3(0x14,0x68)]=_0x3e35c8,_0x22ba1d;}['onParticlesTextureSizeChange'](){const _0x548c67=this[_0x24defd(0x4a3,0x518)]();this['primitives'][_0x491a09(-0x83,-0x16)]['geometry']=_0x548c67;const _0x388413={};_0x388413['context']=this['context'],_0x388413['geometry']=_0x548c67;function _0x491a09(_0x488585,_0x525364){return _0x342adc(_0x525364,_0x488585- -0x58c);}_0x388413[_0x24defd(0x596,0x58b)]=this['primitives']['segments'][_0x24defd(0x5db,0x58b)];function _0x24defd(_0x34e9ba,_0x97d301){return _0x31dd88(_0x97d301-0x19e,_0x34e9ba);}_0x388413['bufferUsage']=BufferUsage[_0x24defd(0x5b1,0x53f)];const _0x2db4ea=VertexArray['fromGeometry'](_0x388413);this['primitives']['segments']['commandToExecute']&&(this['primitives']['segments'][_0x24defd(0x5af,0x56a)][_0x491a09(-0x124,-0x9e)]=_0x2db4ea);}['onColorTableChange'](){function _0x5ef681(_0x569c80,_0x91c5e2){return _0x342adc(_0x91c5e2,_0x569c80- -0x23f);}this[_0x5ef681(0x30b,0x2bb)]['destroy'](),this['colorTable']=this['createColorTableTexture']();}[_0x342adc(0x43d,0x49a)](_0x2bacf3){const _0x524b04=_0x2bacf3['colors']&&JSON['stringify'](_0x2bacf3['colors'])!==JSON[_0x1b73bc(-0x1d,-0x57)](this['options']['colors']);function _0x4af079(_0x14ff17,_0x3f5e87){return _0x342adc(_0x14ff17,_0x3f5e87- -0x5a4);}this[_0x4af079(-0xac,-0xc8)]=deepMerge(_0x2bacf3,this['options']);function _0x1b73bc(_0x108e5d,_0x6898f5){return _0x31dd88(_0x108e5d- -0x2ff,_0x6898f5);}_0x524b04&&this['onColorTableChange']();}[_0x342adc(0x506,0x4a5)](){Object['values'](this['framebuffers'])[_0x3e1385(-0x236,-0x223)](_0x269e37=>{_0x269e37['destroy']();});function _0x3e1385(_0x3a3331,_0x2cda8b){return _0x342adc(_0x3a3331,_0x2cda8b- -0x70a);}function _0x543113(_0x391f41,_0x18cbd3){return _0x31dd88(_0x391f41- -0x9d,_0x18cbd3);}Object[_0x3e1385(-0x210,-0x1f4)](this['primitives'])['forEach'](_0x29333d=>{_0x29333d['destroy']();}),this[_0x543113(0x34d,0x31d)]['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0xa6c7f5,_0x2415d4,_0x4b737b,_0xf5834c,_0x86dac2){this['context']=_0xa6c7f5;function _0x28356f(_0x47fffb,_0x49d4d9){return _0x342adc(_0x47fffb,_0x49d4d9- -0x2d4);}this['options']=_0x4b737b,this[_0x5999c8(0x1c7,0x224)]=_0xf5834c;function _0x5999c8(_0x4c6896,_0x2a14fd){return _0x342adc(_0x4c6896,_0x2a14fd- -0x2b7);}this['computing']=new WindParticlesComputing(_0xa6c7f5,_0x2415d4,_0x4b737b,_0xf5834c,_0x86dac2),this['rendering']=new WindParticlesRendering(_0xa6c7f5,_0x4b737b,_0xf5834c,this[_0x28356f(0x1d5,0x228)]),this['clearFramebuffers']();}['getPrimitives'](){function _0x20f4ae(_0x4e82d0,_0x138701){return _0x342adc(_0x4e82d0,_0x138701- -0x32e);}const _0x1dc1f5=[this[_0x20f4ae(0x1f7,0x1ce)][_0x28cad2(0x6d,0x23)]['calculateSpeed'],this['computing']['primitives'][_0x20f4ae(0x123,0x1a7)],this[_0x20f4ae(0x1b7,0x1ce)][_0x20f4ae(0x13c,0x19a)]['postProcessingPosition'],this['rendering']['primitives']['segments']];function _0x28cad2(_0x4a6ab8,_0x287238){return _0x342adc(_0x287238,_0x4a6ab8- -0x45b);}return _0x1dc1f5;}[_0x31dd88(0x3ac,0x3ac)](){const _0x88c4e7=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0xeb947d(0x1d8,0x1b3)]});function _0x29bb0b(_0x2b5cb5,_0x269515){return _0x31dd88(_0x2b5cb5- -0xc,_0x269515);}function _0xeb947d(_0xe4cc5c,_0x3b2af6){return _0x31dd88(_0xe4cc5c- -0x17a,_0x3b2af6);}Object['keys'](this['rendering']['framebuffers'])[_0xeb947d(0x20d,0x23c)](_0x5ee377=>{_0x88c4e7[_0x387939(0x196,0x15c)]=this['rendering']['framebuffers'][_0x5ee377];function _0x4a53d(_0x132205,_0x377e24){return _0x29bb0b(_0x377e24- -0x5a2,_0x132205);}function _0x387939(_0x23f633,_0x49f665){return _0xeb947d(_0x23f633- -0x1,_0x49f665);}_0x88c4e7[_0x387939(0x20b,0x190)](this['context']);});}['changeOptions'](_0x457233){let _0x4cd7f3=![];_0x457233['particlesTextureSize']&&this['options']['particlesTextureSize']!==_0x457233['particlesTextureSize']&&(_0x4cd7f3=!![]);function _0x1a5681(_0x3c8372,_0x672366){return _0x31dd88(_0x672366- -0x4af,_0x3c8372);}const _0x6e04c5=deepMerge(_0x457233,this['options']);if(_0x6e04c5['particlesTextureSize']<0x1)throw new Error(_0x519d5a(-0x4d,-0x1c));function _0x519d5a(_0x43da79,_0x42eb84){return _0x31dd88(_0x42eb84- -0x305,_0x43da79);}this['options']=_0x6e04c5,this[_0x519d5a(0xee,0xb6)]['updateOptions'](_0x457233),this[_0x1a5681(-0x177,-0x113)][_0x519d5a(-0x1f,0x35)](_0x457233),_0x4cd7f3&&(this['computing']['destroyParticlesTextures'](),this['computing']['createParticlesTextures'](),this[_0x519d5a(0xa9,0xb6)]['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x10a2cc){this[_0x2aed13(-0x1d,0x5c)]=_0x10a2cc,this[_0xb60c4(0x54c,0x5a6)][_0x2aed13(-0x1d,-0x31)]=_0x10a2cc;function _0x2aed13(_0x44c1b5,_0x315f1d){return _0x342adc(_0x315f1d,_0x44c1b5- -0x4f8);}function _0xb60c4(_0x2a69c5,_0x577072){return _0x342adc(_0x2a69c5,_0x577072-0xaa);}this['rendering']['viewerParameters']=_0x10a2cc;}['destroy'](){this['computing'][_0x3c62ec(0x46e,0x441)]();function _0x418bf9(_0x951a4b,_0x537150){return _0x31dd88(_0x951a4b- -0x534,_0x537150);}function _0x3c62ec(_0x2a7645,_0x76b35a){return _0x342adc(_0x2a7645,_0x76b35a- -0x64);}this['rendering'][_0x418bf9(-0x1ef,-0x245)]();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace[_0x342adc(0x4dc,0x4e3)]['BaseLayer'],_0x22debb={};_0x22debb[_0x31dd88(0x32e,0x2e9)]=0x1,_0x22debb['max']=0x2;const _0x385e48={};_0x385e48['min']=0x14,_0x385e48['max']=0x64;const _0x45db98={};_0x45db98['particlesTextureSize']=0x64,_0x45db98[_0x31dd88(0x37f,0x366)]=0x0,_0x45db98['lineWidth']=_0x22debb,_0x45db98['lineLength']=_0x385e48,_0x45db98[_0x31dd88(0x3e4,0x41e)]=0x1;function _0x342adc(_0x236326,_0x51f032){return _0x1007(_0x51f032-0x327,_0x236326);}function _0x31dd88(_0x4a1f0a,_0x198473){return _0x1007(_0x4a1f0a-0x1c7,_0x198473);}_0x45db98['dropRate']=0.003,_0x45db98[_0x342adc(0x4d9,0x4c9)]=0.001,_0x45db98['colors']=[_0x31dd88(0x364,0x32e)],_0x45db98[_0x342adc(0x469,0x473)]=![],_0x45db98['dynamic']=!![];const DEF_OPTIONS=_0x45db98;class WindLayer extends BaseLayer$1{constructor(_0x585bdd={}){_0x585bdd={...DEF_OPTIONS,..._0x585bdd},super(_0x585bdd),this['_setOptionsHook'](_0x585bdd,_0x585bdd);}get['layer'](){return this['primitives'];}get[_0x31dd88(0x388,0x3df)](){function _0x16ee6e(_0x542f75,_0x192d37){return _0x342adc(_0x192d37,_0x542f75- -0xc0);}return this[_0x16ee6e(0x41c,0x3da)]['data'];}set['data'](_0x27af92){this[_0x3d5c55(0x175,0x1c9)][_0x3d5c55(0x181,0x106)]=_0x27af92;function _0x3d5c55(_0x16de4d,_0x351cdb){return _0x342adc(_0x351cdb,_0x16de4d- -0x367);}function _0x3cfdde(_0x3e2a75,_0x5335cc){return _0x342adc(_0x3e2a75,_0x5335cc-0x2d);}this[_0x3cfdde(0x49c,0x50a)](_0x27af92);}get['colors'](){function _0x5dd758(_0x327bf2,_0x455909){return _0x342adc(_0x327bf2,_0x455909- -0x39c);}return this['options'][_0x5dd758(0x15a,0x16c)];}set['colors'](_0x751634){this['options']['colors']=_0x751634;const _0x401123={};_0x401123['colors']=_0x751634,this['_setOptionsHook'](this['options'],_0x401123);}['_showHook'](_0x572be3){function _0x31c0c6(_0x521d13,_0x764810){return _0x342adc(_0x764810,_0x521d13- -0x509);}_0x572be3?this[_0x31c0c6(0x19,0x60)]():this['_removedHook']();}['_mountedHook'](){}['_addedHook'](){this[_0x43cb44(0xf9,0xb6)]=this['_map']['scene'],this['camera']=this['_map'][_0x43cb44(-0x53,0x1c)];this['options']['data']&&this['setData'](this['options'][_0x525bc0(-0x11,0x49)]);if(!this['windData']||!this[_0x43cb44(0x33,0xba)])return;function _0x43cb44(_0x38c964,_0x580274){return _0x342adc(_0x38c964,_0x580274- -0x47a);}this[_0x525bc0(-0xe,0x3c)]={'lonRange':new Cesium$1[(_0x43cb44(0x66,0xa2))](-0xb4,0xb4),'latRange':new Cesium$1[(_0x525bc0(0x4e,0x7d))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x525bc0(0xfe,0x91)][_0x43cb44(-0x9e,-0x19)]},this[_0x43cb44(-0x13,0x6)](),this['particleSystem']=new WindParticleSystem(this['scene']['context'],this[_0x43cb44(0x34,-0xb)],this[_0x43cb44(0xb8,0x62)],this[_0x43cb44(0x83,0x61)],this[_0x43cb44(0x11f,0xb6)]),this[_0x525bc0(-0x40,0x29)]=this['particleSystem'][_0x525bc0(0xd,0x51)]();function _0x525bc0(_0x45a269,_0x369a10){return _0x31dd88(_0x369a10- -0x33f,_0x45a269);}this[_0x525bc0(0x2e,0x29)][_0x43cb44(0x7d,0x6d)](_0x3cf238=>{function _0x3a779c(_0x232a7a,_0x408865){return _0x525bc0(_0x408865,_0x232a7a-0x6c);}function _0x2edd4e(_0x4d8bf7,_0x189e99){return _0x43cb44(_0x189e99,_0x4d8bf7- -0x8);}this[_0x3a779c(0xfd,0x15d)]['primitives'][_0x3a779c(0xc0,0x10a)](_0x3cf238);}),this['camera']['percentageChanged']=0.01,this['camera']['changed'][_0x43cb44(0x4a,0x6a)](this[_0x43cb44(0x88,0x6)]['bind'](this)),this['scene'][_0x43cb44(0x1a,0x27)]['addEventListener'](this[_0x43cb44(-0x71,0x6)][_0x43cb44(0xa2,0x97)](this)),window[_0x43cb44(0x32,0x6a)](_0x43cb44(0x126,0xce),this['updateViewerParameters'][_0x43cb44(0xc8,0x97)](this));}['_removedHook'](){this['camera'][_0x5def44(0x160,0x1df)][_0x3853a1(-0x78,-0x20)](this[_0x3853a1(-0x103,-0x116)]['bind'](this)),this['scene'][_0x5def44(0x1a9,0x1b1)]['removeEventListener'](this['updateViewerParameters'][_0x3853a1(-0x72,-0x3f)](this));function _0x3853a1(_0x13caef,_0x406be5){return _0x342adc(_0x406be5,_0x13caef- -0x583);}window[_0x5def44(0x213,0x29a)](_0x5def44(0x250,0x2af),this['updateViewerParameters']['bind'](this));function _0x5def44(_0x2cf0d9,_0x17eded){return _0x31dd88(_0x2cf0d9- -0x198,_0x17eded);}this[_0x3853a1(-0xbb,-0x6d)]&&(this['primitives']['forEach'](_0x3f6385=>{function _0x4d6a81(_0x462a4a,_0x4c4376){return _0x3853a1(_0x462a4a-0x28f,_0x4c4376);}this[_0x4d6a81(0x23c,0x2bf)]['primitives']['remove'](_0x3f6385);}),delete this[_0x5def44(0x1d0,0x176)]),this['particleSystem']&&(this['particleSystem']['destroy'](),delete this['particleSystem']);}[_0x342adc(0x4b3,0x4dd)](_0x5a60a7,_0x50e3f2){function _0x293066(_0x271d6c,_0x360a06){return _0x31dd88(_0x271d6c-0x4d,_0x360a06);}this['windData']=this['processWindData'](_0x5a60a7);if(_0x50e3f2){this['_removedHook'](),this['_addedHook']();return;}function _0x3c666d(_0x26048b,_0x3cf992){return _0x31dd88(_0x26048b- -0x255,_0x3cf992);}this['particleSystem']?(this[_0x3c666d(0x180,0x10a)][_0x3c666d(0x147,0x1cb)]['updateWindData'](this['windData']),this['scene']['requestRender']()):this[_0x3c666d(0x16d,0x195)]();}[_0x31dd88(0x3b3,0x3ad)](_0x130232,_0x43e683){function _0x4041af(_0x159540,_0x192779){return _0x31dd88(_0x192779- -0x44f,_0x159540);}function _0x351c41(_0x5ec155,_0x9b0f87){return _0x31dd88(_0x9b0f87- -0x1e9,_0x5ec155);}this['particleSystem']&&(this[_0x351c41(0x1e7,0x1ec)]['changeOptions'](_0x43e683),this['scene'][_0x4041af(-0xda,-0x8b)]());}['processWindData'](_0x156794){var _0x210d80,_0x3643cc;const _0x351e55={..._0x156794},_0x23da50=_0x351e55;!_0x23da50['height']&&_0x23da50['rows']&&(_0x23da50[_0x4ae0e1(0xd3,0x89)]=_0x23da50[_0x4ae0e1(-0x49,0x27)]);function _0x4ae0e1(_0x1402e6,_0x40106b){return _0x342adc(_0x1402e6,_0x40106b- -0x4b9);}function _0x352423(_0x3660a4,_0x2d9416){return _0x342adc(_0x2d9416,_0x3660a4- -0x134);}!_0x23da50['width']&&_0x23da50[_0x4ae0e1(-0x58,0x20)]&&(_0x23da50['width']=_0x23da50[_0x352423(0x3a5,0x36d)]);!_0x23da50['bounds']&&(_0x23da50[_0x4ae0e1(-0x5e,0x28)]={'west':_0x23da50[_0x352423(0x3ce,0x406)],'south':_0x23da50[_0x352423(0x3cf,0x44f)],'east':_0x23da50['xmax'],'north':_0x23da50['ymax']});if(!_0x23da50['u']){const _0x471c02={};_0x471c02['array']=_0x156794[_0x352423(0x344,0x2c8)],_0x471c02['min']=_0x156794['umin'],_0x471c02['max']=_0x156794[_0x4ae0e1(0xb0,0x3d)],_0x23da50['u']=_0x471c02;}if(!_0x23da50['v']){const _0x54a371={};_0x54a371[_0x352423(0x3db,0x38c)]=_0x156794[_0x352423(0x3ed,0x423)],_0x54a371['min']=_0x156794['vmin'],_0x54a371[_0x4ae0e1(0x4d,0x19)]=_0x156794['vmax'],_0x23da50['v']=_0x54a371;}if(((_0x210d80=_0x23da50['speed'])===null||_0x210d80===void 0x0?void 0x0:_0x210d80[_0x352423(0x35a,0x306)])===undefined||((_0x3643cc=_0x23da50['speed'])===null||_0x3643cc===void 0x0?void 0x0:_0x3643cc[_0x352423(0x39e,0x348)])===undefined||_0x23da50['speed'][_0x352423(0x3db,0x40b)]===undefined){const _0xb33f0f={'array':new Float32Array(_0x23da50['u']['array'][_0x352423(0x3f6,0x38f)]),'min':Number['MAX_VALUE'],'max':Number['MIN_VALUE']};for(let _0x3d2540=0x0;_0x3d2540<_0x23da50['u']['array']['length'];_0x3d2540++){_0xb33f0f[_0x4ae0e1(0xa8,0x56)][_0x3d2540]=Math[_0x4ae0e1(-0x35,0x46)](_0x23da50['u'][_0x352423(0x3db,0x3d9)][_0x3d2540]*_0x23da50['u'][_0x4ae0e1(0xae,0x56)][_0x3d2540]+_0x23da50['v']['array'][_0x3d2540]*_0x23da50['v'][_0x4ae0e1(0x7f,0x56)][_0x3d2540]),_0xb33f0f['array'][_0x3d2540]!==0x0&&(_0xb33f0f['min']=Math[_0x4ae0e1(-0x2b,-0x2b)](_0xb33f0f['min'],_0xb33f0f['array'][_0x3d2540]),_0xb33f0f[_0x4ae0e1(0x6c,0x19)]=Math['max'](_0xb33f0f['max'],_0xb33f0f['array'][_0x3d2540]));}_0x23da50[_0x4ae0e1(0x2,0x17)]=_0xb33f0f;}return _0x23da50;}['updateViewerParameters'](){function _0x3e78fc(_0x52f663,_0x1ad08f){return _0x31dd88(_0x1ad08f- -0x467,_0x52f663);}var _0x3440e6;const _0x3c0d79=this[_0x5e5c13(0x3f7,0x3ea)];if(!_0x3c0d79)return;const _0x3623f6=_0x3c0d79['canvas'],_0xf6cf86={};_0xf6cf86['x']=0x0,_0xf6cf86['y']=0x0;const _0xe30cc6={};_0xe30cc6['x']=0x0,_0xe30cc6['y']=_0x3623f6['clientHeight'];const _0x5907ea={};_0x5907ea['x']=_0x3623f6['clientWidth'],_0x5907ea['y']=0x0;const _0x4e2ec3={};_0x4e2ec3['x']=_0x3623f6['clientWidth'];function _0x5e5c13(_0x1ee29,_0x56698e){return _0x342adc(_0x56698e,_0x1ee29- -0x139);}_0x4e2ec3['y']=_0x3623f6[_0x3e78fc(-0x75,-0x8d)];const _0x463c7a=[_0xf6cf86,_0xe30cc6,_0x5907ea,_0x4e2ec3];let _0x3221c1=0xb4,_0x372f6c=-0xb4,_0xcc7a02=0x5a,_0x76d6d=-0x5a,_0x6da858=![];for(const _0x3ce626 of _0x463c7a){const _0x3be179=_0x3c0d79['camera']['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x3ce626['x'],_0x3ce626['y']),_0x3c0d79['globe']['ellipsoid']);if(!_0x3be179){_0x6da858=!![];break;}const _0x215ddf=_0x3c0d79['globe'][_0x5e5c13(0x3d1,0x3fd)]['cartesianToCartographic'](_0x3be179),_0x4f054f=Cesium$1['Math']['toDegrees'](_0x215ddf['longitude']),_0x855818=Cesium$1[_0x3e78fc(-0x101,-0x152)]['toDegrees'](_0x215ddf['latitude']);_0x3221c1=Math[_0x3e78fc(-0x181,-0x139)](_0x3221c1,_0x4f054f),_0x372f6c=Math['max'](_0x372f6c,_0x4f054f),_0xcc7a02=Math['min'](_0xcc7a02,_0x855818),_0x76d6d=Math[_0x5e5c13(0x399,0x390)](_0x76d6d,_0x855818);}if(!_0x6da858){const _0x285bc2=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds']['west'],_0x3221c1),Math['min'](this[_0x3e78fc(-0x1ad,-0x158)]['bounds'][_0x5e5c13(0x377,0x393)],_0x372f6c)),_0x548bfb=new Cesium$1[(_0x3e78fc(-0x31,-0xab))](Math['max'](this['windData']['bounds']['south'],_0xcc7a02),Math['min'](this['windData'][_0x3e78fc(-0x10d,-0xe6)]['north'],_0x76d6d)),_0x1c03cf=(_0x285bc2['y']-_0x285bc2['x'])*0.05,_0x2b9061=(_0x548bfb['y']-_0x548bfb['x'])*0.05;_0x285bc2['x']=Math['max'](this[_0x3e78fc(-0x183,-0x158)]['bounds']['west'],_0x285bc2['x']-_0x1c03cf),_0x285bc2['y']=Math[_0x3e78fc(-0x14c,-0x139)](this[_0x5e5c13(0x336,0x30b)]['bounds'][_0x3e78fc(-0x170,-0x117)],_0x285bc2['y']+_0x1c03cf),_0x548bfb['x']=Math[_0x5e5c13(0x399,0x3b2)](this['windData'][_0x3e78fc(-0x10f,-0xe6)]['south'],_0x548bfb['x']-_0x2b9061),_0x548bfb['y']=Math['min'](this['windData']['bounds'][_0x5e5c13(0x3f4,0x420)],_0x548bfb['y']+_0x2b9061),this['viewerParameters']['lonRange']=_0x285bc2,this['viewerParameters'][_0x3e78fc(-0x147,-0xdc)]=_0x548bfb;const _0x56ded8=this['windData']['bounds']['east']-this['windData']['bounds'][_0x3e78fc(-0x168,-0x184)],_0x13c01e=this['windData']['bounds'][_0x3e78fc(-0xd6,-0x9a)]-this[_0x5e5c13(0x336,0x31d)]['bounds']['south'],_0x9a9ecf=(_0x285bc2['y']-_0x285bc2['x'])/_0x56ded8,_0x484771=(_0x548bfb['y']-_0x548bfb['x'])/_0x13c01e,_0x97338a=Math['min'](_0x9a9ecf,_0x484771),_0x3da72e=0x3e8*_0x97338a;_0x3da72e>0x0&&(this[_0x3e78fc(-0xdc,-0xec)]['pixelSize']=Math['max'](0x0,Math['min'](0x3e8,_0x3da72e)));}this[_0x5e5c13(0x3a2,0x3e9)]['sceneMode']=this[_0x5e5c13(0x3f7,0x3f4)]['mode'],(_0x3440e6=this[_0x5e5c13(0x3fc,0x43c)])===null||_0x3440e6===void 0x0||_0x3440e6[_0x3e78fc(-0x1df,-0x183)](this['viewerParameters']);}[_0x31dd88(0x33f,0x2d5)](_0x46e947,_0x82bdfb){const {bounds:_0x2033e6,width:_0x519988,height:_0x333536,u:_0x279486,v:_0x274119,speed:_0x357d76}=this[_0x350e6b(-0x7d,0x2)],{flipY:_0x3266b4}=this[_0x350e6b(-0x10,0x64)];if(_0x46e947<_0x2033e6['west']||_0x46e947>_0x2033e6['east']||_0x82bdfb<_0x2033e6['south']||_0x82bdfb>_0x2033e6['north'])return null;function _0x350e6b(_0x137010,_0x14d2e0){return _0x31dd88(_0x137010- -0x38c,_0x14d2e0);}const _0x2c85b5=(_0x46e947-_0x2033e6[_0x5e43be(-0x2db,-0x27d)])/(_0x2033e6['east']-_0x2033e6['west'])*(_0x519988-0x1);let _0x29bab=(_0x82bdfb-_0x2033e6['south'])/(_0x2033e6[_0x5e43be(-0x113,-0x193)]-_0x2033e6[_0x5e43be(-0x198,-0x183)])*(_0x333536-0x1);_0x3266b4&&(_0x29bab=_0x333536-0x1-_0x29bab);const _0x5ad537=Math['floor'](_0x2c85b5),_0x5c131b=Math[_0x5e43be(-0x235,-0x1bc)](_0x29bab),_0x595ad7=Math['floor'](_0x2c85b5),_0x2cdd9c=Math['min'](_0x595ad7+0x1,_0x519988-0x1),_0xfac16b=Math['floor'](_0x29bab),_0xf30f23=Math['min'](_0xfac16b+0x1,_0x333536-0x1),_0x3b96bf=_0x2c85b5-_0x595ad7,_0x5672a6=_0x29bab-_0xfac16b,_0x2c34fe=_0x5c131b*_0x519988+_0x5ad537,_0x581625=_0xfac16b*_0x519988+_0x595ad7,_0x37964e=_0xfac16b*_0x519988+_0x2cdd9c,_0x31493d=_0xf30f23*_0x519988+_0x595ad7,_0x15c8da=_0xf30f23*_0x519988+_0x2cdd9c,_0xac8360=_0x279486['array'][_0x581625],_0x2c3ed4=_0x279486[_0x5e43be(-0x1b4,-0x1b1)][_0x37964e],_0x263182=_0x279486['array'][_0x31493d],_0x3f7b22=_0x279486['array'][_0x15c8da],_0x365807=(0x1-_0x3b96bf)*(0x1-_0x5672a6)*_0xac8360+_0x3b96bf*(0x1-_0x5672a6)*_0x2c3ed4+(0x1-_0x3b96bf)*_0x5672a6*_0x263182+_0x3b96bf*_0x5672a6*_0x3f7b22,_0x9925b=_0x274119[_0x350e6b(0x23,0x59)][_0x581625],_0x27a160=_0x274119['array'][_0x37964e],_0x398eae=_0x274119['array'][_0x31493d],_0x3e82df=_0x274119[_0x350e6b(0x23,-0x65)][_0x15c8da],_0x32b293=(0x1-_0x3b96bf)*(0x1-_0x5672a6)*_0x9925b+_0x3b96bf*(0x1-_0x5672a6)*_0x27a160+(0x1-_0x3b96bf)*_0x5672a6*_0x398eae+_0x3b96bf*_0x5672a6*_0x3e82df,_0x6f05a2=Math['sqrt'](_0x365807*_0x365807+_0x32b293*_0x32b293),_0x3e1d12={};_0x3e1d12['u']=_0x279486['array'][_0x2c34fe],_0x3e1d12['v']=_0x274119[_0x350e6b(0x23,0x57)][_0x2c34fe],_0x3e1d12['speed']=_0x357d76[_0x350e6b(0x23,0x18)][_0x2c34fe];const _0x2bfcfa={};function _0x5e43be(_0x22683c,_0x44674d){return _0x342adc(_0x22683c,_0x44674d- -0x6c0);}_0x2bfcfa['u']=_0x365807,_0x2bfcfa['v']=_0x32b293,_0x2bfcfa[_0x5e43be(-0x1f3,-0x1f0)]=_0x6f05a2;const _0x44c088={};return _0x44c088['original']=_0x3e1d12,_0x44c088[_0x5e43be(-0x233,-0x1ba)]=_0x2bfcfa,_0x44c088;}}mars3d__namespace[_0x342adc(0x51c,0x546)]['register']('wind',WindLayer),mars3d__namespace['layer'][_0x342adc(0x433,0x482)]=WindLayer;class CanvasParticle{constructor(){function _0x5d5f9a(_0x58b1e1,_0x406dda){return _0x342adc(_0x406dda,_0x58b1e1- -0x59b);}this['lng']=null,this['lat']=null,this[_0x5d5f9a(-0x8b,-0xcf)]=null,this['tlat']=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x45c80b in this){delete this[_0x45c80b];}}}class CanvasWindField{constructor(_0x8e004e){this['setOptions'](_0x8e004e);}get['speedRate'](){function _0x3e5436(_0x49ec85,_0x4891c8){return _0x31dd88(_0x49ec85-0x20f,_0x4891c8);}return this[_0x3e5436(0x591,0x593)];}set[_0x31dd88(0x333,0x2e2)](_0x206bc7){this[_0x2a04c4(0x4fb,0x4a5)]=(0x64-(_0x206bc7>0x63?0x63:_0x206bc7))*0x64;function _0x2a04c4(_0x187c41,_0x2eb5d1){return _0x342adc(_0x187c41,_0x2eb5d1- -0x3d);}function _0x19ba3d(_0x39af16,_0x1100cc){return _0x31dd88(_0x39af16-0x21c,_0x1100cc);}this['_calc_speedRate']=[(this[_0x2a04c4(0x46d,0x447)]-this['xmin'])/this['_speedRate'],(this[_0x2a04c4(0x46a,0x467)]-this['ymin'])/this['_speedRate']];}get['maxAge'](){return this['_maxAge'];}set['maxAge'](_0x345493){function _0x189ae0(_0x311702,_0x52afcf){return _0x342adc(_0x52afcf,_0x311702- -0x632);}this[_0x189ae0(-0x1a9,-0x138)]=_0x345493;}['setOptions'](_0x3615e8){function _0x42d24f(_0x1f50e5,_0x16dfd2){return _0x342adc(_0x16dfd2,_0x1f50e5- -0x360);}function _0x43126c(_0x6fb599,_0x58fd4b){return _0x342adc(_0x6fb599,_0x58fd4b- -0x60b);}this['options']=_0x3615e8,this[_0x43126c(-0x10c,-0x155)]=_0x3615e8['maxAge']||0x78,this['speedRate']=_0x3615e8['speedRate']||0x32,this['particles']=[];const _0x4eb856=_0x3615e8[_0x43126c(-0x1d1,-0x1af)]||0x1000;for(let _0x51f195=0x0;_0x51f195<_0x4eb856;_0x51f195++){const _0x20c603=this[_0x42d24f(0x165,0x1a9)](new CanvasParticle());this['particles']['push'](_0x20c603);}}['setDate'](_0x1e209b){this[_0x17e1a8(0x28e,0x217)]=_0x1e209b['rows'],this['cols']=_0x1e209b['cols'],this['xmin']=_0x1e209b['xmin'],this[_0x17e1a8(0x165,0x1bb)]=_0x1e209b['xmax'],this['ymin']=_0x1e209b['ymin'],this[_0x2dbcd4(-0x16b,-0x162)]=_0x1e209b['ymax'],this['grid']=[];function _0x2dbcd4(_0x49179d,_0x834ce1){return _0x342adc(_0x834ce1,_0x49179d- -0x60f);}const _0x278744=_0x1e209b['udata'],_0x26ae99=_0x1e209b['vdata'];function _0x17e1a8(_0x164d55,_0x138446){return _0x342adc(_0x164d55,_0x138446- -0x2c9);}let _0x2d6205=![];_0x278744['length']===this['rows']&&_0x278744[0x0][_0x17e1a8(0x281,0x261)]===this[_0x17e1a8(0x26f,0x210)]&&(_0x2d6205=!![]);let _0x198f44=0x0,_0x47b156=null,_0x26ce58=null;for(let _0x22b5c4=0x0;_0x22b5c4<this[_0x17e1a8(0x20d,0x217)];_0x22b5c4++){_0x47b156=[];for(let _0x5a6e83=0x0;_0x5a6e83<this['cols'];_0x5a6e83++,_0x198f44++){_0x2d6205?_0x26ce58=this[_0x17e1a8(0x226,0x24e)](_0x278744[_0x22b5c4][_0x5a6e83],_0x26ae99[_0x22b5c4][_0x5a6e83]):_0x26ce58=this['_calcUV'](_0x278744[_0x198f44],_0x26ae99[_0x198f44]),_0x47b156['push'](_0x26ce58);}this[_0x17e1a8(0x13a,0x192)]['push'](_0x47b156);}!this['options']['flipY']&&this[_0x2dbcd4(-0x1b4,-0x178)]['reverse']();}['clear'](){delete this[_0x1fb6ac(0xe6,0x11c)];function _0x3b6af1(_0x57c756,_0x3df7f4){return _0x342adc(_0x3df7f4,_0x57c756-0x15);}function _0x1fb6ac(_0x566441,_0x1907b0){return _0x31dd88(_0x1907b0- -0x264,_0x566441);}delete this['cols'],delete this['xmin'],delete this['xmax'],delete this['ymin'],delete this[_0x3b6af1(0x4b9,0x435)],delete this['grid'],delete this['particles'];}[_0x342adc(0x537,0x4d6)](_0x327766,_0x1b336c){const _0xe8b9a6=(_0x327766-this['xmin'])/(this[_0x5e5acf(-0x76,-0xc7)]-this['xmin'])*(this['cols']-0x1);function _0xb4dd7e(_0x16af97,_0x4f5b5e){return _0x342adc(_0x16af97,_0x4f5b5e- -0x52f);}function _0x5e5acf(_0x62848b,_0x3227d6){return _0x31dd88(_0x62848b- -0x39a,_0x3227d6);}const _0x367915=(this['ymax']-_0x1b336c)/(this[_0xb4dd7e(-0x7,-0x8b)]-this['ymin'])*(this['rows']-0x1);return[_0xe8b9a6,_0x367915];}[_0x31dd88(0x3e5,0x3ea)](_0x15b4f1,_0x6d8f95){if(_0x15b4f1<0x0||_0x15b4f1>=this['cols']||_0x6d8f95>=this['rows'])return[0x0,0x0,0x0];const _0x457034=Math[_0x5a8ffb(0x122,0x121)](_0x15b4f1),_0x89ac86=Math[_0x43869c(0x530,0x4bf)](_0x6d8f95);if(_0x457034===_0x15b4f1&&_0x89ac86===_0x6d8f95)return this[_0x5a8ffb(0xfc,0x78)][_0x6d8f95][_0x15b4f1];const _0x17d5f7=_0x457034+0x1,_0x6d8a44=_0x89ac86+0x1;function _0x43869c(_0x827f8d,_0x2cfee2){return _0x31dd88(_0x827f8d-0x18c,_0x2cfee2);}const _0x5c9769=this['getUVByXY'](_0x457034,_0x89ac86);function _0x5a8ffb(_0x5844ba,_0x45c9f3){return _0x31dd88(_0x45c9f3- -0x283,_0x5844ba);}const _0x17c5d3=this['getUVByXY'](_0x17d5f7,_0x89ac86),_0x167d7f=this[_0x43869c(0x571,0x4f6)](_0x457034,_0x6d8a44),_0x2d08fc=this['getUVByXY'](_0x17d5f7,_0x6d8a44);let _0x4d21cc=null;try{_0x4d21cc=this['_bilinearInterpolation'](_0x15b4f1-_0x457034,_0x6d8f95-_0x89ac86,_0x5c9769,_0x17c5d3,_0x167d7f,_0x2d08fc);}catch(_0x1b661e){console['log'](_0x15b4f1,_0x6d8f95);}return _0x4d21cc;}['_bilinearInterpolation'](_0x2ce02b,_0x1d0a15,_0xc42f30,_0x4b3490,_0x54cb7f,_0x5331d5){const _0x148a3a=0x1-_0x2ce02b,_0x174351=0x1-_0x1d0a15,_0x3126e6=_0x148a3a*_0x174351,_0x5c0268=_0x2ce02b*_0x174351;function _0xa82eae(_0x3fe7b4,_0x25c11e){return _0x342adc(_0x3fe7b4,_0x25c11e- -0x56f);}const _0x313797=_0x148a3a*_0x1d0a15,_0x525735=_0x2ce02b*_0x1d0a15,_0x26c090=_0xc42f30[0x0]*_0x3126e6+_0x4b3490[0x0]*_0x5c0268+_0x54cb7f[0x0]*_0x313797+_0x5331d5[0x0]*_0x525735,_0x14b231=_0xc42f30[0x1]*_0x3126e6+_0x4b3490[0x1]*_0x5c0268+_0x54cb7f[0x1]*_0x313797+_0x5331d5[0x1]*_0x525735;return this[_0xa82eae(0x12,-0x58)](_0x26c090,_0x14b231);}['_calcUV'](_0x20ac66,_0x22d5d0){function _0x4e7330(_0x29cd7e,_0x4cf951){return _0x342adc(_0x29cd7e,_0x4cf951- -0x4fb);}return[+_0x20ac66,+_0x22d5d0,Math[_0x4e7330(0x25,0x4)](_0x20ac66*_0x20ac66+_0x22d5d0*_0x22d5d0)];}['getUVByPoint'](_0x5ef43f,_0x186743){if(!this[_0x50fcc1(0x4bb,0x51d)](_0x5ef43f,_0x186743))return null;function _0x50fcc1(_0x42b41a,_0x1bc05f){return _0x342adc(_0x1bc05f,_0x42b41a-0x5e);}function _0x56e7c8(_0x54a5a3,_0x4d1baf){return _0x342adc(_0x54a5a3,_0x4d1baf- -0x6b9);}const _0x8b932=this[_0x50fcc1(0x534,0x573)](_0x5ef43f,_0x186743),_0x4e7b52=this[_0x56e7c8(-0x1cf,-0x174)](_0x8b932[0x0],_0x8b932[0x1]);return _0x4e7b52;}['isInExtent'](_0x44416d,_0x4bf79d){function _0x195d15(_0x1500b0,_0xc4de67){return _0x342adc(_0xc4de67,_0x1500b0- -0x320);}return _0x44416d>=this['xmin']&&_0x44416d<=this['xmax']&&_0x4bf79d>=this['ymin']&&_0x4bf79d<=this[_0x195d15(0x184,0x201)]?!![]:![];}[_0x342adc(0x4c1,0x536)](){const _0x55673f=fRandomByfloat(this['xmin'],this['xmax']);function _0x10e229(_0x38468,_0x5c48ff){return _0x342adc(_0x38468,_0x5c48ff- -0x691);}const _0x5418a8=fRandomByfloat(this['ymin'],this[_0x10e229(-0x267,-0x1ed)]),_0x3e9d20={};return _0x3e9d20['lat']=_0x5418a8,_0x3e9d20['lng']=_0x55673f,_0x3e9d20;}[_0x31dd88(0x399,0x3bf)](){let _0xa66bcf,_0x411ac0,_0x1728e2;for(let _0xafafd1=0x0,_0x1dc49f=this['particles'][_0x3f6281(-0x172,-0x198)];_0xafafd1<_0x1dc49f;_0xafafd1++){let _0x187ed1=this['particles'][_0xafafd1];_0x187ed1['age']<=0x0&&(_0x187ed1=this['_randomParticle'](_0x187ed1));if(_0x187ed1['age']>0x0){const _0x27e1bc=_0x187ed1[_0x3f6179(0x97,0x67)],_0x4232c4=_0x187ed1['tlat'];_0x1728e2=this['getUVByPoint'](_0x27e1bc,_0x4232c4),_0x1728e2?(_0xa66bcf=_0x27e1bc+this['_calc_speedRate'][0x0]*_0x1728e2[0x0],_0x411ac0=_0x4232c4+this[_0x3f6281(-0x1c6,-0x174)][0x1]*_0x1728e2[0x1],_0x187ed1['lng']=_0x27e1bc,_0x187ed1[_0x3f6179(0x93,0x45)]=_0x4232c4,_0x187ed1['tlng']=_0xa66bcf,_0x187ed1[_0x3f6281(-0x239,-0x205)]=_0x411ac0,_0x187ed1['speed']=_0x1728e2[0x2],_0x187ed1['age']--):_0x187ed1[_0x3f6281(-0x27c,-0x260)]=0x0;}}function _0x3f6281(_0x542b52,_0x4b4eda){return _0x342adc(_0x542b52,_0x4b4eda- -0x6c2);}function _0x3f6179(_0x1efcec,_0x1bd232){return _0x31dd88(_0x1bd232- -0x349,_0x1efcec);}return this['particles'];}[_0x31dd88(0x365,0x3a9)](_0x10d5df){let _0x3287a7,_0x3d7fc5;for(let _0x2b9503=0x0;_0x2b9503<0x1e;_0x2b9503++){_0x3287a7=this['getRandomLatLng'](),_0x3d7fc5=this[_0x53e725(0x49e,0x519)](_0x3287a7['lng'],_0x3287a7[_0xc2fb76(0x376,0x34f)]);if(_0x3d7fc5&&_0x3d7fc5[0x2]>0x0)break;}if(!_0x3d7fc5)return _0x10d5df;function _0x53e725(_0x4b0e7a,_0x1c18aa){return _0x31dd88(_0x1c18aa-0x14e,_0x4b0e7a);}function _0xc2fb76(_0x5f31f2,_0xd288f2){return _0x342adc(_0xd288f2,_0x5f31f2- -0x178);}const _0x5d2854=_0x3287a7['lng']+this[_0xc2fb76(0x3d6,0x35a)][0x0]*_0x3d7fc5[0x0],_0x385b59=_0x3287a7['lat']+this[_0xc2fb76(0x3d6,0x3c1)][0x1]*_0x3d7fc5[0x1];return _0x10d5df[_0x53e725(0x4af,0x4cc)]=_0x3287a7['lng'],_0x10d5df['lat']=_0x3287a7[_0x53e725(0x560,0x4dc)],_0x10d5df[_0x53e725(0x4dd,0x4fe)]=_0x5d2854,_0x10d5df['tlat']=_0x385b59,_0x10d5df['age']=Math['round'](0xa+Math['random']()*this['maxAge']),_0x10d5df['speed']=_0x3d7fc5[0x2],_0x10d5df;}[_0x342adc(0x47b,0x4a5)](){for(const _0x59c885 in this){delete this[_0x59c885];}}}function fRandomByfloat(_0xc7c38e,_0x5a3d48){function _0x272aaa(_0x4bd4b7,_0x198c90){return _0x31dd88(_0x198c90- -0x35d,_0x4bd4b7);}return _0xc7c38e+Math[_0x272aaa(0xe,0x30)]()*(_0x5a3d48-_0xc7c38e);}const Cesium=mars3d__namespace[_0x31dd88(0x314,0x290)],BaseLayer=mars3d__namespace[_0x342adc(0x503,0x4e3)]['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x23c020={}){super(_0x23c020);function _0x36127f(_0x250f13,_0x30cb35){return _0x31dd88(_0x250f13-0xbd,_0x30cb35);}this['_setOptionsHook'](_0x23c020),this['canvas']=null;function _0x4c4abb(_0x3c6002,_0x386d7f){return _0x31dd88(_0x386d7f- -0x2da,_0x3c6002);}_0x23c020[_0x36127f(0x465,0x4db)]&&_0x23c020['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x36127f(0x494,0x4da))](_0x23c020));}['_setOptionsHook'](_0x20af42,_0x41fc4e){this['frameTime']=0x3e8/(_0x20af42['frameRate']||0xa);function _0x2a692f(_0x921233,_0x14a59d){return _0x31dd88(_0x14a59d-0x121,_0x921233);}this['_pointerEvents']=this[_0x2a692f(0x458,0x49d)][_0x2a692f(0x3bc,0x41f)]??![],this[_0x2a692f(0x525,0x4d6)]=_0x20af42[_0x2a692f(0x47c,0x4d6)]||_0x36c0f7(0x566,0x4fd);function _0x36c0f7(_0x18275e,_0x4df1fb){return _0x31dd88(_0x4df1fb-0x1a6,_0x18275e);}this[_0x36c0f7(0x4b0,0x4dd)]=_0x20af42[_0x2a692f(0x458,0x458)]||0x1,this['fixedHeight']=_0x20af42['fixedHeight']??0x0,this[_0x36c0f7(0x486,0x4b9)]=_0x20af42[_0x2a692f(0x3af,0x434)]??![],this[_0x2a692f(0x45d,0x4d5)]&&this['windField']['setOptions'](_0x20af42);}get['layer'](){return this['canvas'];}get['canvasWidth'](){return this['_map']['scene']['canvas']['clientWidth'];}get[_0x31dd88(0x3d9,0x371)](){function _0xec5ddb(_0x263539,_0xc76af9){return _0x31dd88(_0xc76af9- -0xe2,_0x263539);}function _0x3e023c(_0x4ce960,_0x5cdc56){return _0x31dd88(_0x5cdc56- -0x53,_0x4ce960);}return this['_map'][_0x3e023c(0x37b,0x37d)][_0x3e023c(0x31b,0x2a1)]['clientHeight'];}get['pointerEvents'](){function _0x28a35e(_0x1f20c0,_0x500539){return _0x31dd88(_0x500539- -0x428,_0x1f20c0);}return this[_0x28a35e(-0xc2,-0xe0)];}set['pointerEvents'](_0x4875d1){function _0x3b6801(_0x3455c6,_0x322dac){return _0x342adc(_0x322dac,_0x3455c6- -0xf8);}this[_0x1bfeea(0x40e,0x44e)]=_0x4875d1;function _0x1bfeea(_0xa5f3df,_0x390c07){return _0x342adc(_0xa5f3df,_0x390c07- -0x5a);}if(!this[_0x1bfeea(0x46c,0x3fa)])return;_0x4875d1?this[_0x3b6801(0x35c,0x388)]['style']['pointer-events']='all':this[_0x1bfeea(0x379,0x3fa)]['style'][_0x3b6801(0x437,0x40c)]='none';}get['particlesNumber'](){function _0x13cc40(_0x2aaf72,_0xf367af){return _0x342adc(_0xf367af,_0x2aaf72- -0x6fb);}return this[_0x13cc40(-0x21f,-0x19b)]['particlesNumber'];}set[_0x342adc(0x3d5,0x45c)](_0x1e6e15){function _0x21a205(_0x578db3,_0x23fee9){return _0x342adc(_0x578db3,_0x23fee9-0x82);}this[_0x21a205(0x4ea,0x55e)]['particlesNumber']=_0x1e6e15;function _0x4207d7(_0x4e44c7,_0x5c71cb){return _0x342adc(_0x5c71cb,_0x4e44c7- -0x2ef);}clearTimeout(this[_0x4207d7(0x1d8,0x253)]),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x3923ef(_0xebbe05,_0x4e7447){return _0x31dd88(_0x4e7447- -0x552,_0xebbe05);}return this[_0x3923ef(-0x169,-0x1d6)]['speedRate'];}set[_0x31dd88(0x333,0x325)](_0x844807){function _0x4c9e4f(_0x3be0e5,_0x2ac7d4){return _0x31dd88(_0x2ac7d4- -0x341,_0x3be0e5);}function _0x3ed43c(_0x4a4174,_0x916a1b){return _0x342adc(_0x4a4174,_0x916a1b- -0x3ea);}this[_0x3ed43c(0x167,0xf2)]['speedRate']=_0x844807,this['windField']&&(this[_0x4c9e4f(0x1e,0x73)]['speedRate']=_0x844807);}get['maxAge'](){function _0x11c13d(_0xa43b2f,_0x3ed2af){return _0x31dd88(_0xa43b2f-0x111,_0x3ed2af);}return this['options'][_0x11c13d(0x467,0x49a)];}set[_0x31dd88(0x356,0x37a)](_0x10de24){this['options']['maxAge']=_0x10de24;function _0x462233(_0x1432ba,_0x431a8a){return _0x342adc(_0x431a8a,_0x1432ba- -0x131);}function _0x49e3ab(_0x2cc69b,_0x5f0339){return _0x342adc(_0x5f0339,_0x2cc69b- -0x39b);}this[_0x462233(0x3e3,0x3b7)]&&(this['windField'][_0x462233(0x385,0x3d1)]=_0x10de24);}get['data'](){return this['windData'];}set[_0x342adc(0x461,0x4e8)](_0x33293a){this['setData'](_0x33293a);}get[_0x31dd88(0x30e,0x324)](){let _0x72c7e9=this[_0x5bfe7f(0x26b,0x28e)][_0x361b50(0x72,0x13)],_0x3a7a2d=this['windData']['xmax'],_0xd2b774=this['windData'][_0x5bfe7f(0x2ff,0x2dc)];function _0x361b50(_0x23d606,_0x2b4a7a){return _0x342adc(_0x23d606,_0x2b4a7a- -0x4ef);}let _0x464b83=this[_0x5bfe7f(0x26b,0x242)]['ymax'];function _0x5bfe7f(_0x325e2d,_0x29a82a){return _0x31dd88(_0x325e2d- -0xa4,_0x29a82a);}return _0x3a7a2d>=0x167&&_0x72c7e9===0x0&&(_0x72c7e9=-0xb4,_0x3a7a2d=0xb4),_0x72c7e9=Math['max'](_0x72c7e9,-0xb4),_0x3a7a2d=Math[_0x361b50(-0x4e,-0x61)](_0x3a7a2d,0xb4),_0xd2b774=Math['max'](_0xd2b774,-0x5a),_0x464b83=Math[_0x5bfe7f(0x28a,0x21f)](_0x464b83,0x5a),Cesium[_0x5bfe7f(0x246,0x257)]['fromDegrees'](_0x72c7e9,_0xd2b774,_0x3a7a2d,_0x464b83);}[_0x31dd88(0x300,0x2a8)](_0x1d0cd9){function _0xaa7cf0(_0x5eb52d,_0x16c7b0){return _0x31dd88(_0x5eb52d-0x1a6,_0x16c7b0);}function _0x18acd7(_0x84bf76,_0x10642e){return _0x31dd88(_0x84bf76- -0x40f,_0x10642e);}_0x1d0cd9?this['_addedHook']():(this['windData']&&(this['options']['data']=this[_0xaa7cf0(0x4b5,0x53e)]),this[_0xaa7cf0(0x4df,0x528)]());}[_0x31dd88(0x3a0,0x325)](){function _0x5bb8eb(_0x2ccdd3,_0x3b0d5f){return _0x342adc(_0x2ccdd3,_0x3b0d5f- -0x2d);}function _0x3e4df3(_0x2d8a89,_0x5e1198){return _0x342adc(_0x2d8a89,_0x5e1198- -0x365);}this[_0x3e4df3(0x17a,0x177)]['worker']?this[_0x3e4df3(0x1b5,0x13b)]():this['windField']=new CanvasWindField(this[_0x5bb8eb(0x457,0x4af)]);}[_0x31dd88(0x3c2,0x3de)](){this[_0x3dee6d(0x4c0,0x475)]=this['_createCanvas']();const _0x242de3={};function _0x264f78(_0x55d24c,_0x236154){return _0x342adc(_0x236154,_0x55d24c- -0x586);}_0x242de3['willReadFrequently']=!![];function _0x3dee6d(_0x3189d7,_0x4b3fe9){return _0x31dd88(_0x3189d7-0x1cc,_0x4b3fe9);}this['canvasContext']=this['canvas']['getContext']('2d',_0x242de3),this['bindEvent'](),this['options']['data']&&this['setData'](this[_0x264f78(-0xaa,-0x4b)][_0x264f78(-0x9e,-0x107)]);}['_removedHook'](){this['clear']();function _0x30816b(_0x34129a,_0x393bea){return _0x342adc(_0x34129a,_0x393bea- -0x102);}function _0x1bd4bf(_0x6e07a4,_0x328f17){return _0x31dd88(_0x328f17-0x73,_0x6e07a4);}this['unbindEvent'](),this['canvas']&&(this['_map'][_0x1bd4bf(0x3c1,0x3cb)][_0x30816b(0x322,0x38a)](this[_0x1bd4bf(0x3ce,0x367)]),delete this['canvas']);}['_createCanvas'](){const _0x921236=mars3d__namespace['DomUtil']['create'](_0x462dac(0x6a,0xb6),'mars3d-canvasWind',this[_0xabcdb6(-0x11c,-0x94)]['container']);_0x921236[_0x462dac(0x36,0xad)]['position']='absolute',_0x921236['style']['top']=_0x462dac(0x139,0x10d),_0x921236['style'][_0x462dac(0xc1,0x115)]=_0x462dac(0x189,0x10d),_0x921236['style'][_0x462dac(0x194,0x128)]=this['_map'][_0xabcdb6(-0x50,0x24)][_0xabcdb6(-0x12c,-0x1a1)]['clientWidth']+'px',_0x921236['style']['height']=this[_0xabcdb6(-0x11c,-0x17d)]['scene']['canvas'][_0x462dac(0x213,0x19c)]+'px',_0x921236[_0xabcdb6(-0x135,-0x105)]['pointerEvents']=this['_pointerEvents']?_0x462dac(0x140,0xc8):'none';function _0x462dac(_0x5e34f9,_0x5dd9f0){return _0x31dd88(_0x5dd9f0- -0x23e,_0x5e34f9);}_0x921236[_0x462dac(0x6a,0xad)][_0x462dac(0xab,0xdc)]=this['options']['zIndex']??0x9;function _0xabcdb6(_0x322348,_0x3779cd){return _0x342adc(_0x3779cd,_0x322348- -0x580);}return _0x921236[_0x462dac(0x19e,0x128)]=this['_map']['scene']['canvas'][_0xabcdb6(-0x6e,0xc)],_0x921236['height']=this[_0xabcdb6(-0x11c,-0x131)]['scene']['canvas']['clientHeight'],_0x921236;}['resize'](){function _0x3c2831(_0xbbbb3b,_0x1111fa){return _0x342adc(_0x1111fa,_0xbbbb3b- -0x429);}function _0x24a840(_0x347766,_0x3c71b2){return _0x31dd88(_0x3c71b2- -0x34,_0x347766);}this[_0x24a840(0x2dc,0x2c0)]&&(this[_0x3c2831(0x2b,0xa)][_0x3c2831(0x22,0x1)][_0x3c2831(0x9d,0x5f)]=this['_map']['scene']['canvas'][_0x24a840(0x336,0x37e)]+'px',this['canvas']['style']['height']=this[_0x3c2831(0x3b,0x66)][_0x24a840(0x3d0,0x39c)]['canvas']['clientHeight']+'px',this[_0x3c2831(0x2b,-0x34)][_0x24a840(0x2be,0x332)]=this['_map'][_0x24a840(0x324,0x39c)][_0x3c2831(0x2b,0x99)]['clientWidth'],this[_0x3c2831(0x2b,0x43)][_0x24a840(0x386,0x3ae)]=this[_0x24a840(0x2a9,0x2d0)]['scene']['canvas'][_0x24a840(0x408,0x3a6)]);}[_0x342adc(0x4dc,0x4cf)](){const _0x1b1f49=this;let _0x18cba1=Date['now']();(function _0x3be380(){if(_0x1b1f49['isDestroy'])return;_0x1b1f49['_animateFrame']=window['requestAnimationFrame'](_0x3be380);function _0x44fa48(_0x584720,_0x1e31eb){return _0x1007(_0x1e31eb- -0x28a,_0x584720);}function _0x4b95ea(_0x241f48,_0x35482e){return _0x1007(_0x35482e- -0x17d,_0x241f48);}if(_0x1b1f49[_0x44fa48(-0x42,-0x7d)]&&_0x1b1f49[_0x44fa48(-0xf6,-0x9d)]){const _0x4bd153=Date['now'](),_0x444ae0=_0x4bd153-_0x18cba1;_0x444ae0>_0x1b1f49['frameTime']&&(_0x18cba1=_0x4bd153-_0x444ae0%_0x1b1f49['frameTime'],_0x1b1f49[_0x4b95ea(0x10d,0x9a)]());}}());function _0x4aa9c9(_0xfcb571,_0x449f0f){return _0x342adc(_0x449f0f,_0xfcb571- -0x4da);}window[_0x4aa9c9(0xa,-0x79)]('resize',this[_0x599938(0x27a,0x279)][_0x4aa9c9(0x37,-0x2f)](this),![]),this['mouse_down']=![];function _0x599938(_0x104bd6,_0x18398b){return _0x31dd88(_0x104bd6- -0x16e,_0x18398b);}this['mouse_move']=![],this['options'][_0x4aa9c9(0x6d,0x8a)]&&(this[_0x4aa9c9(-0x76,-0xfc)]['on'](mars3d__namespace['EventType']['wheel'],this[_0x599938(0x227,0x1a1)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x599938(0x26a,0x2ba)],this[_0x599938(0x1ca,0x1f3)],this),this[_0x599938(0x196,0x202)]['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this));}[_0x342adc(0x4bb,0x4cb)](){window['cancelAnimationFrame'](this['_animateFrame']);function _0x51d923(_0x456469,_0x11666c){return _0x31dd88(_0x11666c- -0x418,_0x456469);}delete this['_animateFrame'];function _0x4a1a65(_0x363556,_0x31afdf){return _0x342adc(_0x363556,_0x31afdf- -0x258);}window['removeEventListener']('resize',this['resize']),this[_0x51d923(-0x21,-0x9c)][_0x51d923(-0x21,-0x31)]&&(this[_0x4a1a65(0x28f,0x20c)][_0x4a1a65(0x2da,0x267)](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace['EventType'][_0x51d923(-0xb0,-0x40)],this['_onMouseDownEvent'],this),this['_map'][_0x4a1a65(0x2ad,0x267)](mars3d__namespace[_0x51d923(-0x138,-0xf0)][_0x51d923(-0xa2,-0x12a)],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x4a1a65(0x2e7,0x274)],this));}['_onMapWhellEvent'](_0x105353){clearTimeout(this[_0x130c47(0x3a6,0x324)]);function _0x1a86ef(_0x4cb09d,_0x7c3d5d){return _0x342adc(_0x7c3d5d,_0x4cb09d- -0x297);}if(!this['show']||!this['canvas'])return;this[_0x130c47(0x3a1,0x3ec)][_0x130c47(0x398,0x3d8)][_0x130c47(0x3de,0x41a)]=_0x1a86ef(0x1cc,0x213);function _0x130c47(_0x12ffcc,_0x4b2a17){return _0x31dd88(_0x12ffcc-0xad,_0x4b2a17);}this[_0x130c47(0x3a6,0x406)]=setTimeout(()=>{function _0x47eac9(_0x497f72,_0x363a99){return _0x1a86ef(_0x363a99-0x330,_0x497f72);}function _0x5ae418(_0x268744,_0x250007){return _0x1a86ef(_0x250007-0x122,_0x268744);}if(!this['show'])return;this[_0x5ae418(0x41c,0x3b2)](),this[_0x47eac9(0x50a,0x4ed)]['style'][_0x47eac9(0x4a1,0x52a)]=_0x5ae418(0x2fe,0x327);},0xc8);}['_onMouseDownEvent'](_0x5168d8){this['mouse_down']=!![],this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x3ecf6e(0xbc,0x10d)],this);function _0x511b97(_0x2cdd74,_0xf9f89){return _0x31dd88(_0xf9f89-0x1a4,_0x2cdd74);}function _0x3ecf6e(_0x457dd6,_0x1d2f9d){return _0x31dd88(_0x457dd6- -0x2b0,_0x1d2f9d);}this['_map']['on'](mars3d__namespace['EventType'][_0x3ecf6e(0xc3,0x103)],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x2fcc57){function _0x26b33b(_0x573e52,_0xb03b31){return _0x31dd88(_0xb03b31-0x50,_0x573e52);}function _0x21dea5(_0x1305b2,_0x194c63){return _0x31dd88(_0x194c63-0xca,_0x1305b2);}if(!this['show']||!this[_0x26b33b(0x36b,0x344)])return;this[_0x26b33b(0x3fc,0x37b)]&&(this['canvas'][_0x26b33b(0x2e9,0x33b)]['visibility']='hidden',this['mouse_move']=!![]);}[_0x342adc(0x512,0x507)](_0xf693a0){function _0x587bcc(_0x3a483a,_0x856b4f){return _0x31dd88(_0x3a483a-0x4e,_0x856b4f);}if(!this['show']||!this['canvas'])return;this['_map'][_0x587bcc(0x3ad,0x35a)](mars3d__namespace['EventType'][_0x1c81b2(-0x1c8,-0x15d)],this[_0x1c81b2(-0x1cf,-0x1c0)],this);this[_0x1c81b2(-0x210,-0x23f)]&&this[_0x1c81b2(-0x207,-0x209)]&&this['redraw']();function _0x1c81b2(_0x231b67,_0x48696a){return _0x342adc(_0x48696a,_0x231b67- -0x69b);}this['canvas']['style']['visibility']='visible',this[_0x1c81b2(-0x210,-0x212)]=![],this['mouse_move']=![];}['setData'](_0x35931e){function _0x5d1e85(_0x4b76e1,_0x5666c){return _0x31dd88(_0x5666c- -0x25f,_0x4b76e1);}this[_0x5d1e85(0x157,0x118)](),this['windData']=_0x35931e,this['windField']['setDate'](_0x35931e);function _0x3bcef1(_0x54e89b,_0x11d35a){return _0x342adc(_0x54e89b,_0x11d35a- -0x59c);}this[_0x3bcef1(0x12,-0x75)]();}['redraw'](){if(!this[_0x474cff(0x135,0x18e)])return;function _0x474cff(_0x2206a9,_0x556a44){return _0x31dd88(_0x556a44- -0x246,_0x2206a9);}this['windField'][_0x2a4f0d(-0x110,-0x14f)](this['options']);function _0x2a4f0d(_0x35dba4,_0x4d91b6){return _0x31dd88(_0x4d91b6- -0x49d,_0x35dba4);}this['update']();}['update'](){function _0xd4d37(_0x36162c,_0x1e1540){return _0x342adc(_0x1e1540,_0x36162c- -0x68a);}if(this['_updateIng'])return;this['_updateIng']=!![];if(this[_0xd4d37(-0x1e8,-0x25c)])this['windField']['update']();else{const _0x742f2d=this['windField']['getParticles']();this['_drawLines'](_0x742f2d);}this['_updateIng']=![];}['_drawLines'](_0x5bc0b8){this[_0x817337(0x43a,0x3bd)]=_0x5bc0b8,this['canvasContext']['globalCompositeOperation']='destination-in';function _0x4e7a3b(_0x4e9168,_0x1a8ead){return _0x31dd88(_0x4e9168- -0x45c,_0x1a8ead);}this['canvasContext'][_0x817337(0x48d,0x4e3)](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext']['globalCompositeOperation']='lighter';function _0x817337(_0x494220,_0x5f0d51){return _0x342adc(_0x5f0d51,_0x494220- -0x64);}this['canvasContext']['globalAlpha']=0.9;const _0x1a862c=this['_map']['scene'][_0x4e7a3b(-0x15b,-0x102)]!==Cesium['SceneMode']['SCENE3D'],_0x584aca=this[_0x4e7a3b(-0x135,-0x175)]*0.25;if(this[_0x4e7a3b(-0x6c,-0x9c)])for(let _0x2c0d1d=0x0,_0x287296=_0x5bc0b8['length'];_0x2c0d1d<_0x287296;_0x2c0d1d++){const _0x38729a=_0x5bc0b8[_0x2c0d1d],_0x28bb88=this[_0x817337(0x3e1,0x3eb)](_0x38729a,_0x38729a['lng'],_0x38729a[_0x817337(0x48a,0x50c)],_0x38729a['alt']),_0x4b3a63=this['_tomap'](_0x38729a,_0x38729a[_0x817337(0x4ac,0x43b)],_0x38729a['tlat'],_0x38729a['talt']);if(!_0x28bb88||!_0x4b3a63)continue;if(_0x1a862c&&Math[_0x817337(0x446,0x402)](_0x28bb88[0x0]-_0x4b3a63[0x0])>=_0x584aca)continue;this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this[_0x817337(0x433,0x44d)],this['canvasContext']['strokeStyle']=this['_colorRamp']['getColor'](_0x38729a['speed']),this['canvasContext'][_0x4e7a3b(-0xeb,-0xe2)](_0x28bb88[0x0],_0x28bb88[0x1]),this['canvasContext']['lineTo'](_0x4b3a63[0x0],_0x4b3a63[0x1]),this[_0x817337(0x407,0x477)][_0x817337(0x443,0x3f0)]();}else{this[_0x4e7a3b(-0x151,-0xc9)]['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x4e7a3b(-0xa7,-0xea)];for(let _0xdbd579=0x0,_0xcc99fa=_0x5bc0b8['length'];_0xdbd579<_0xcc99fa;_0xdbd579++){const _0x59deb0=_0x5bc0b8[_0xdbd579],_0xfb481=this['_tomap'](_0x59deb0,_0x59deb0[_0x4e7a3b(-0xde,-0xbe)],_0x59deb0[_0x817337(0x48a,0x416)],_0x59deb0['alt']),_0x465094=this['_tomap'](_0x59deb0,_0x59deb0[_0x817337(0x4ac,0x51f)],_0x59deb0[_0x4e7a3b(-0xff,-0x136)],_0x59deb0['talt']);if(!_0xfb481||!_0x465094)continue;if(_0x1a862c&&Math['abs'](_0xfb481[0x0]-_0x465094[0x0])>=_0x584aca)continue;this['canvasContext']['moveTo'](_0xfb481[0x0],_0xfb481[0x1]),this[_0x817337(0x407,0x382)]['lineTo'](_0x465094[0x0],_0x465094[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x5bcd28,_0x423d26,_0x46a139,_0x2a4b72){const _0x3a81c0=Cesium['Cartesian3']['fromDegrees'](_0x423d26,_0x46a139,_0x2a4b72??this[_0xb98e55(0x4de,0x4ea)]);function _0xb98e55(_0x19aa14,_0x366cb5){return _0x342adc(_0x366cb5,_0x19aa14- -0x1);}const _0x197b40=this['_map']['scene'];function _0x2e728e(_0x5952d4,_0x94c645){return _0x31dd88(_0x94c645-0x65,_0x5952d4);}if(_0x197b40['mode']===Cesium['SceneMode']['SCENE3D']){const _0x6f4ef=new Cesium['EllipsoidalOccluder'](_0x197b40['globe'][_0xb98e55(0x509,0x495)],_0x197b40[_0x2e728e(0x3ba,0x39b)][_0xb98e55(0x476,0x43a)]),_0x1b2219=_0x6f4ef['isPointVisible'](_0x3a81c0);if(!_0x1b2219)return _0x5bcd28['age']=0x0,null;}const _0x32f2ef=mars3d__namespace[_0x2e728e(0x3f0,0x375)]['toWindowCoordinates'](this['_map'][_0x2e728e(0x3ba,0x435)],_0x3a81c0);return _0x32f2ef?[_0x32f2ef['x'],_0x32f2ef['y']]:null;}['clear'](){this[_0x1e80fc(-0x12f,-0x116)][_0x506311(0x42b,0x3b9)]();function _0x1e80fc(_0x1140fb,_0x349b5e){return _0x31dd88(_0x349b5e- -0x4ca,_0x1140fb);}function _0x506311(_0x1e960a,_0xfc26e6){return _0x342adc(_0x1e960a,_0xfc26e6- -0x11e);}delete this['windData'];}['initWorker'](){this['worker']=new Worker(this[_0x25db3f(-0x1ac,-0x225)]['worker']);function _0x5e1ccb(_0x39f420,_0x4f75b3){return _0x31dd88(_0x4f75b3- -0x507,_0x39f420);}this[_0x5e1ccb(-0x1c4,-0x1c5)]['onmessage']=_0xba4eb0=>{this['_drawLines'](_0xba4eb0[_0x2793db(-0xe,-0x24)][_0x33bb0f(-0x193,-0x11e)]);function _0x2793db(_0x488ec3,_0x5232bb){return _0x25db3f(_0x488ec3,_0x5232bb-0x1f5);}function _0x33bb0f(_0x5e62c1,_0x36638d){return _0x5e1ccb(_0x36638d,_0x5e62c1-0x37);}this['_updateIng2']=![];};function _0x25db3f(_0x377526,_0x39a981){return _0x342adc(_0x377526,_0x39a981- -0x701);}this['windField']={'init':_0x406ded=>{const _0x3417db={};function _0x12a08e(_0x1a2690,_0x1973b9){return _0x25db3f(_0x1973b9,_0x1a2690-0x584);}_0x3417db['type']='init',_0x3417db['options']=_0x406ded,this['worker'][_0x12a08e(0x2f5,0x26d)](_0x3417db);},'setOptions':_0x2f4529=>{function _0x26a5a(_0x88b35e,_0x21188b){return _0x25db3f(_0x88b35e,_0x21188b-0x46b);}const _0xb5a800={};_0xb5a800['type']=_0x13f585(0x3ea,0x3b2);function _0x13f585(_0x5ea805,_0x3d4958){return _0x25db3f(_0x5ea805,_0x3d4958-0x605);}_0xb5a800[_0x13f585(0x3b8,0x3e0)]=_0x2f4529,this['worker'][_0x13f585(0x2ee,0x376)](_0xb5a800);},'setDate':_0x58b3bf=>{const _0x199dfb={};_0x199dfb[_0x56ca19(0xfa,0x159)]='setDate';function _0x56ca19(_0x9db84c,_0x42b768){return _0x5e1ccb(_0x42b768,_0x9db84c-0x2b4);}_0x199dfb[_0x56ca19(0x135,0xc2)]=_0x58b3bf;function _0x201b95(_0x5c85e9,_0x27b243){return _0x5e1ccb(_0x27b243,_0x5c85e9- -0x40);}this[_0x201b95(-0x205,-0x27d)]['postMessage'](_0x199dfb);},'update':()=>{function _0x583f02(_0x11dd06,_0x12e4fc){return _0x25db3f(_0x12e4fc,_0x11dd06-0x6ee);}if(this[_0x583f02(0x4fa,0x4fe)])return;this['_updateIng2']=!![];const _0x14bd08={};_0x14bd08['type']='update',this['worker']['postMessage'](_0x14bd08);},'clear':()=>{function _0x43ad8f(_0x57b00f,_0x2ee655){return _0x25db3f(_0x57b00f,_0x2ee655-0x54a);}const _0x27abff={};_0x27abff['type']='clear',this[_0x43ad8f(0x368,0x2eb)]['postMessage'](_0x27abff);}},this['windField']['init'](this[_0x5e1ccb(-0x16d,-0x18b)]);}}mars3d__namespace['LayerUtil'][_0x31dd88(0x38f,0x347)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x31dd88(0x316,0x29a)]=CanvasWindField,mars3d__namespace[_0x31dd88(0x2ff,0x333)][_0x31dd88(0x30d,0x342)](_0x31dd88(0x39e,0x376)),mars3d__namespace[_0x342adc(0x552,0x4d4)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0xb513f5={};_0xb513f5[_0x342adc(0x4f5,0x4d8)]=!![],Object['defineProperty'](exports,'__esModule',_0xb513f5);
}));
