/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.5
 * 编译日期：2025-04-02 18:37
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x58bb5f,_0x37d947){function _0x5a1b6(_0x1b99ff,_0x37e0de){return _0x47a6(_0x37e0de- -0x6e,_0x1b99ff);}function _0x5a9381(_0x2cb645,_0x546f13){return _0x47a6(_0x546f13- -0x354,_0x2cb645);}const _0x142722=_0x58bb5f();while(!![]){try{const _0x455273=parseInt(_0x5a9381(-0xd7,-0x10e))/0x1*(parseInt(_0x5a9381(-0x13,-0x8d))/0x2)+-parseInt(_0x5a9381(-0x144,-0x117))/0x3*(-parseInt(_0x5a1b6(0x285,0x221))/0x4)+parseInt(_0x5a1b6(0x21c,0x1ec))/0x5*(-parseInt(_0x5a1b6(0x19a,0x1f9))/0x6)+parseInt(_0x5a1b6(0x217,0x1d5))/0x7*(-parseInt(_0x5a1b6(0x13e,0x162))/0x8)+parseInt(_0x5a9381(-0xb8,-0x138))/0x9+-parseInt(_0x5a9381(-0x13c,-0x11c))/0xa+-parseInt(_0x5a1b6(0x1b7,0x23c))/0xb*(-parseInt(_0x5a9381(-0x131,-0x14b))/0xc);if(_0x455273===_0x37d947)break;else _0x142722['push'](_0x142722['shift']());}catch(_0x531b5b){_0x142722['push'](_0x142722['shift']());}}}(_0x4db1,0x63fc7));function _interopNamespace(_0x2458c7){function _0x250573(_0x4cbd52,_0x146fed){return _0x47a6(_0x4cbd52- -0xbc,_0x146fed);}if(_0x2458c7&&_0x2458c7['__esModule'])return _0x2458c7;function _0x5c85d5(_0x2d355d,_0x445b5a){return _0x47a6(_0x2d355d- -0x15b,_0x445b5a);}var _0x322c0d=Object[_0x5c85d5(0xd5,0xe7)](null);return _0x2458c7&&Object[_0x5c85d5(0x124,0x148)](_0x2458c7)['forEach'](function(_0x492d0b){function _0x391316(_0x2f05a3,_0x2d53a9){return _0x5c85d5(_0x2f05a3- -0x176,_0x2d53a9);}function _0x3b3031(_0x4acf71,_0x3e7e20){return _0x5c85d5(_0x3e7e20-0x477,_0x4acf71);}if(_0x492d0b!==_0x391316(-0xf8,-0xbf)){var _0x20c81f=Object[_0x391316(-0x3d,-0x6d)](_0x2458c7,_0x492d0b);Object['defineProperty'](_0x322c0d,_0x492d0b,_0x20c81f['get']?_0x20c81f:{'enumerable':!![],'get':function(){return _0x2458c7[_0x492d0b];}});}}),_0x322c0d[_0x250573(0x11d,0xe4)]=_0x2458c7,_0x322c0d;}var mars3d__namespace=_interopNamespace(mars3d);function _0x4db1(){const _0x1c17b8=['textures','WindUtil','clientHeight','sources','_tomap','push','clientWidth','values','beginPath','_drawLines','51336MKWYzO','requestAnimationFrame','framebuffers','alt','none','createRenderingFramebuffers','_createCanvas','lat','bounds','default','MAX_VALUE','ellipsoid','getColor','visibility','speedRate','UNSIGNED_BYTE','FLOAT','clearCommand','drawingBufferWidth','cols','primitives','viewerParameters','_onMapWhellEvent','_updateIng2','morphComplete','LayerUtil','minificationFilter','PointTrans','_map','cos','getU','computing','LINEAR','Cartesian3','context','mouse_down','mouse_move','rows','error','pointer-events','fromGeometry','flipY','setDate','west','nextParticlesPosition','canvasWidth','createColorTableTexture','initWorker','max','stroke','pow','vmax','Unknown\x20command\x20type','canvasHeight','particlesNumber','getPrimitives','wind','4164xCwuGm','vmin','layer','bufferUsage','geometry','postProcessingPosition','pixelSize','preExecute','fixedHeight','longitude','sqrt','Cesium','Math','min','commandToExecute','off','color','framebuffer','destroyParticlesTextures','2666025HixzNE','displayRange','fromDegrees','destroy','UNSIGNED_INT','type','xmin','outputTexture','getUVByPoint','__proto__','moveTo','hidden','mouseUp','particlesTextures','createParticlesTextures','_animateFrame','toGridXY','redraw','blendFuncSource','_onMouseUpEvent','create','Cartesian2','pointerEvents','previousParticlesPosition','fromCache','resize','random','fragmentShaderSource','1753890IjvwYy','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','array','updateWindData','umax','330261hababn','particleSystem','sceneMode','width','RGBA','data','630LKKpFo','CanvasWindField','NEAREST','221862SOLVYo','enabled','speed','particlesTextureSize','maxAge','rawRenderState','_onMouseDownEvent','_speedRate','createRawRenderState','vertexShaderSource','defineProperty','init','getUpdatePositionShader','_mountedHook','isDynamic','worker','processWindData','getSegmentDrawFragmentShader','componentsPerAttribute','floor','5XcZyWs','ymin','cartesianToCartographic','removeEventListener','height','getV','lineTo','getRandomLatLng','visible','_colorRamp','_setOptionsHook','bind','useViewerBounds','4624674QlKGcz','east','length','_showHook','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','lineLength','camera','warn','OPAQUE','currentParticlesPosition','updateViewerParameters','lastFramesPerSecond','requestRender','_calcUV','mouseMove','colorTextures','blendEquation','options','slice','age','getSegmentDrawVertexShader','BaseLayer','latRange','strokeStyle','keys','drawingBufferHeight','_addedHook','globe','xmax','rendering','tlat','frameRateMonitor','windField','createPrimitives','_onMouseMoveEvent','getUVByXY','particles','addEventListener','ymax','grid','4zKhajk','_canvasParticles','ONE_MINUS_SRC_ALPHA','number','uniformMap','getOwnPropertyDescriptor','forEach','postMessage','Draw','now','north','left','south','colors','unbindEvent','setData','round','wheel','getDirection','dropRateBump','createSegmentsGeometry','ColorRamp','frameRate','stringify','flatMap','domain','updateOptions','41371YsjmBQ','style','onColorTableChange','shaderProgram','colorTable','abs','tlng','canvasContext','log','DomUtil','vdata','talt','windData','getCalculateSpeedShader','isArray','zIndex','_pointerEvents','globalAlpha','scene','lng','canvas','updatePosition','createCommand','autoClear','_bilinearInterpolation','interpolated','frameTime','createRenderingTextures','frameRateAdjustment','2mFWWvs','EventType','dynamic','particlesSpeed','vertexArray','update','TRIANGLES','pass','createWindTextures','applyViewerParameters','STATIC_DRAW','show','isPointVisible','getContext','getPostProcessingPositionShader','fill','magnificationFilter','segmentsColor','lineWidth','commandList','calculateSpeed','SRC_ALPHA','Compute','attributeLocations','componentDatatype','windTextures'];_0x4db1=function(){return _0x1c17b8;};return _0x4db1();}const Cesium$2=mars3d__namespace[_0x294e51(-0x10d,-0x8f)];function getU(_0x360ce8,_0x48514d){function _0x50830f(_0x174ab4,_0x4e043f){return _0x294e51(_0x4e043f,_0x174ab4-0x55d);}const _0x1d27a7=_0x360ce8*Math[_0x50830f(0x4a7,0x50c)](Cesium$2['Math']['toRadians'](_0x48514d));return _0x1d27a7;}function getV(_0x5380db,_0x1fb3dd){const _0x7bd5fc=_0x5380db*Math['sin'](Cesium$2['Math']['toRadians'](_0x1fb3dd));return _0x7bd5fc;}function getSpeed(_0x38bd69,_0x27f686){function _0x3aaf3d(_0x558e72,_0x1b2566){return _0x294e51(_0x558e72,_0x1b2566-0x20f);}function _0x414d62(_0x5af3e0,_0x681425){return _0x294e51(_0x681425,_0x5af3e0-0xa3);}const _0x21d67b=Math[_0x3aaf3d(0x1f8,0x17f)](Math[_0x3aaf3d(0xf9,0x16e)](_0x38bd69,0x2)+Math[_0x414d62(0x2,-0x47)](_0x27f686,0x2));return _0x21d67b;}function getDirection(_0x31f895,_0x235e46){function _0x26b9eb(_0x287393,_0x1bd9bb){return _0x294e51(_0x1bd9bb,_0x287393-0x152);}let _0x3caa59=Cesium$2[_0x26b9eb(0xc4,0xd3)]['toDegrees'](Math['atan2'](_0x235e46,_0x31f895));return _0x3caa59+=_0x3caa59<0x0?0x168:0x0,_0x3caa59;}const _0x3ad4fc={};_0x3ad4fc[_0x294e51(-0x51,-0x7e)]=null,_0x3ad4fc[_0x131859(-0x15b,-0x134)]=getU,_0x3ad4fc[_0x294e51(-0x5e,-0x44)]=getV,_0x3ad4fc['getSpeed']=getSpeed,_0x3ad4fc[_0x294e51(-0x5a,-0x2)]=getDirection;var WindUtil=_0x3ad4fc,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x131859(-0x13e,-0xb7),postProcessingPositionFragmentShader=_0x131859(-0x11f,-0xe9);function _0x131859(_0x18bd9e,_0x5c7618){return _0x47a6(_0x5c7618- -0x322,_0x18bd9e);}var renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0x294e51(-0x6f,0x14)](){const _0x5c7f45={};return _0x5c7f45['sources']=[calculateSpeedShader],new ShaderSource$1(_0x5c7f45);}static['getUpdatePositionShader'](){const _0x54a120={};return _0x54a120['sources']=[updatePositionShader],new ShaderSource$1(_0x54a120);}static[_0x131859(-0xec,-0xa7)](){const _0x45977b={};return _0x45977b['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x45977b);}static[_0x294e51(0x2a,-0x4c)](){const _0x4452e3={};_0x4452e3[_0x23712f(0x4a8,0x516)]=[renderParticlesFragmentShader];function _0x23712f(_0x17a907,_0x2affea){return _0x294e51(_0x17a907,_0x2affea-0x5f0);}return new ShaderSource$1(_0x4452e3);}static['getPostProcessingPositionShader'](){const _0x5b43bc={};return _0x5b43bc['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x5b43bc);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x1ee142){this['commandType']=_0x1ee142['commandType'];function _0x16cf73(_0x5d17e5,_0x5eda53){return _0x294e51(_0x5d17e5,_0x5eda53-0x4be);}this['geometry']=_0x1ee142['geometry'],this['attributeLocations']=_0x1ee142[_0x16cf73(0x39e,0x3de)],this['primitiveType']=_0x1ee142['primitiveType'],this['uniformMap']=_0x1ee142[_0x50be0f(0x8b,0xe0)]||{},this['vertexShaderSource']=_0x1ee142[_0x16cf73(0x41a,0x46a)],this['fragmentShaderSource']=_0x1ee142['fragmentShaderSource'],this['rawRenderState']=_0x1ee142[_0x16cf73(0x484,0x466)],this['framebuffer']=_0x1ee142['framebuffer'],this[_0x50be0f(0x1b,0x99)]=_0x1ee142[_0x50be0f(0x1b,0x59)],this[_0x50be0f(0xb9,0xcf)]=_0x1ee142[_0x50be0f(0xb9,0x90)]??![],this['preExecute']=_0x1ee142['preExecute'],this[_0x16cf73(0x43e,0x3d2)]=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this['isDynamic']=_0x1ee142['isDynamic']??(()=>!![]);function _0x50be0f(_0x21d7e0,_0x34bd0f){return _0x294e51(_0x34bd0f,_0x21d7e0-0x9b);}this['autoClear']&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x540eb8){function _0x27c9bb(_0x3daad5,_0x573455){return _0x294e51(_0x573455,_0x3daad5-0xa4);}function _0x521883(_0x4ddd11,_0x38a783){return _0x294e51(_0x4ddd11,_0x38a783-0x356);}if(this['commandType']==='Draw'){const _0xa59705={};_0xa59705['context']=_0x540eb8,_0xa59705['geometry']=this[_0x521883(0x260,0x2c0)],_0xa59705['attributeLocations']=this[_0x27c9bb(-0x3c,-0x34)],_0xa59705[_0x27c9bb(0xd,0x37)]=BufferUsage$1[_0x521883(0x28c,0x269)];const _0x10efab=VertexArray$1['fromGeometry'](_0xa59705),_0x239702={};_0x239702['context']=_0x540eb8,_0x239702['vertexShaderSource']=this[_0x27c9bb(0x50,0xda)],_0x239702['fragmentShaderSource']=this['fragmentShaderSource'],_0x239702[_0x27c9bb(-0x3c,0x1a)]=this[_0x521883(0x2dc,0x276)];const _0x216a49=ShaderProgram[_0x27c9bb(0x35,0x99)](_0x239702),_0x2784bb=RenderState['fromCache'](this[_0x27c9bb(0x4c,0x52)]),_0x412c42={};return _0x412c42['owner']=this,_0x412c42['vertexArray']=_0x10efab,_0x412c42['primitiveType']=this['primitiveType'],_0x412c42['modelMatrix']=Matrix4['IDENTITY'],_0x412c42['renderState']=_0x2784bb,_0x412c42['shaderProgram']=_0x216a49,_0x412c42[_0x27c9bb(0x1b,0x68)]=this[_0x521883(0x32b,0x2cd)],_0x412c42['uniformMap']=this['uniformMap'],_0x412c42[_0x27c9bb(0xcf,0xfa)]=Pass$1['OPAQUE'],new DrawCommand(_0x412c42);}else{if(this['commandType']===_0x27c9bb(-0x3d,0x3d)){const _0x1357b4={};return _0x1357b4['owner']=this,_0x1357b4[_0x521883(0x319,0x2ea)]=this[_0x27c9bb(0x38,0x24)],_0x1357b4['uniformMap']=this[_0x27c9bb(0x94,0x82)],_0x1357b4[_0x521883(0x34f,0x2d6)]=this['outputTexture'],_0x1357b4['persists']=!![],new ComputeCommand(_0x1357b4);}else throw new Error(_0x521883(0x252,0x2b7));}}['setGeometry'](_0x253774,_0x542795){function _0xfdb293(_0x98fbf1,_0xea59d7){return _0x294e51(_0x98fbf1,_0xea59d7-0x44f);}function _0x5b924f(_0x37bed4,_0x50a357){return _0x131859(_0x37bed4,_0x50a357-0x1b);}this['geometry']=_0x542795,defined(this[_0xfdb293(0x43c,0x3c3)])&&(this['commandToExecute'][_0xfdb293(0x436,0x477)]=VertexArray$1[_0x5b924f(-0xad,-0x10f)]({'context':_0x253774,'geometry':this[_0xfdb293(0x394,0x3b9)],'attributeLocations':this[_0xfdb293(0x3b9,0x36f)],'bufferUsage':BufferUsage$1[_0xfdb293(0x376,0x362)]}));}[_0x294e51(-0x4e,0x29)](_0x7b697d){if(!this[_0xffd1d1(-0x9f,-0xa2)]())return;function _0xffd1d1(_0x16f7bf,_0x221654){return _0x294e51(_0x16f7bf,_0x221654- -0x53);}if(!this['show']||!defined(_0x7b697d))return;!defined(this['commandToExecute'])&&(this['commandToExecute']=this[_0xae045d(-0x61,-0x82)](_0x7b697d[_0xffd1d1(-0x156,-0x104)]));defined(this['preExecute'])&&this[_0xae045d(-0x111,-0x9d)]();if(!_0x7b697d[_0xae045d(-0x162,-0x19b)]){console['warn']('frameState.commandList\x20is\x20undefined');return;}function _0xae045d(_0x1df4d9,_0x182b71){return _0x294e51(_0x182b71,_0x1df4d9- -0x7e);}defined(this[_0xffd1d1(-0x102,-0x115)])&&_0x7b697d['commandList']['push'](this['clearCommand']),defined(this['commandToExecute'])&&_0x7b697d[_0xffd1d1(-0x184,-0x137)]['push'](this['commandToExecute']);}['isDestroyed'](){return![];}['destroy'](){function _0x533552(_0x45fbd3,_0x280429){return _0x294e51(_0x45fbd3,_0x280429-0x332);}if(defined(this['commandToExecute'])){var _0x434507;(_0x434507=this['commandToExecute'][_0x1a84d2(0x5f1,0x5c0)])===null||_0x434507===void 0x0||_0x434507[_0x533552(0x277,0x2ae)](),this['commandToExecute'][_0x1a84d2(0x5f1,0x61e)]=undefined;}function _0x1a84d2(_0x17d955,_0x1fb44a){return _0x294e51(_0x1fb44a,_0x17d955-0x5e7);}return destroyObject(this);}}function deepMerge(_0x4b1d9a,_0x24b6dd){if(!_0x4b1d9a)return _0x24b6dd;if(!_0x24b6dd)return _0x4b1d9a;function _0xd04c2e(_0x149297,_0x4ef3f2){return _0x131859(_0x149297,_0x4ef3f2- -0x72);}const _0x283b3e={..._0x24b6dd},_0x4c26a8=_0x283b3e;for(const _0x43c374 in _0x4b1d9a){if(Object['prototype']['hasOwnProperty']['call'](_0x4b1d9a,_0x43c374)){const _0x4b80e2=_0x4b1d9a[_0x43c374],_0x297e80=_0x24b6dd[_0x43c374];if(Array[_0xd04c2e(-0x65,-0xdc)](_0x4b80e2)){_0x4c26a8[_0x43c374]=_0x4b80e2[_0xd04c2e(-0x197,-0x11b)]();continue;}if(_0x4b80e2&&typeof _0x4b80e2==='object'){_0x4c26a8[_0x43c374]=deepMerge(_0x4b80e2,_0x297e80||{});continue;}_0x4b80e2!==undefined&&(_0x4c26a8[_0x43c374]=_0x4b80e2);}}function _0x249120(_0x432ea2,_0x2160bc){return _0x294e51(_0x2160bc,_0x432ea2-0x15c);}return _0x4c26a8;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x294e51(-0x9c,-0x8f)];class WindParticlesComputing{constructor(_0x59a8cf,_0x141f7e,_0x34c219,_0x4e3829,_0x698ceb){this['context']=_0x59a8cf,this[_0x6e9dad(-0xfe,-0x13f)]=_0x34c219;function _0x6e9dad(_0x4edbf4,_0xe35ae4){return _0x294e51(_0x4edbf4,_0xe35ae4- -0x114);}this['viewerParameters']=_0x4e3829,this['windData']=_0x141f7e,this[_0x6e9dad(-0x17e,-0x112)]=0x3c;function _0x117611(_0x56b882,_0x7e7a2f){return _0x131859(_0x56b882,_0x7e7a2f-0x4a7);}this[_0x117611(0x495,0x44b)]=0x1;const _0x1c1fb8={};_0x1c1fb8[_0x117611(0x3c7,0x441)]=_0x698ceb,_0x1c1fb8['samplingWindow']=0x1,_0x1c1fb8['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x1c1fb8),this['initFrameRate'](),this['createWindTextures'](),this[_0x117611(0x362,0x3af)](),this['createComputingPrimitives']();}['initFrameRate'](){function _0x4f8b67(_0xf381e7,_0x2c7340){return _0x131859(_0x2c7340,_0xf381e7-0x329);}const _0x5abce0=()=>{function _0x5093f1(_0x3fc120,_0x257d53){return _0x47a6(_0x3fc120- -0xb1,_0x257d53);}function _0x65f23d(_0x2c2dc8,_0x363e9e){return _0x47a6(_0x363e9e- -0x18d,_0x2c2dc8);}this[_0x5093f1(0x1d5,0x241)]['lastFramesPerSecond']>0x14&&(this[_0x5093f1(0x1f4,0x19e)]=this[_0x65f23d(0xeb,0xf9)][_0x65f23d(0x6a,0xe5)],this[_0x5093f1(0x215,0x284)]=0x3c/Math['max'](this[_0x5093f1(0x1f4,0x1d6)],0x1));};_0x5abce0();function _0x15e7ce(_0x391b42,_0x3e5f74){return _0x131859(_0x3e5f74,_0x391b42-0x35c);}const _0x2e9d04=setInterval(_0x5abce0,0x3e8),_0x4ce79f=this['destroy'][_0x15e7ce(0x29f,0x2b3)](this);this[_0x4f8b67(0x226,0x294)]=()=>{clearInterval(_0x2e9d04),_0x4ce79f();};}[_0x294e51(-0x5f,0x2c)](){function _0x49b2e2(_0x232db9,_0x542c39){return _0x294e51(_0x542c39,_0x232db9-0x154);}const _0x2072ab={};_0x2072ab[_0x3fc63b(0x23b,0x1cc)]=TextureMinificationFilter$1['LINEAR'],_0x2072ab['magnificationFilter']=TextureMagnificationFilter$1[_0x49b2e2(0xa1,0xd9)];function _0x3fc63b(_0x164228,_0x536c0d){return _0x294e51(_0x164228,_0x536c0d-0x285);}const _0x4b3529={'context':this['context'],'width':this['windData']['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0x3fc63b(0x1ec,0x25a)][_0x49b2e2(0xaa,0x23)]??![],'sampler':new Sampler$1(_0x2072ab)};this['windTextures']={'U':new Texture$1({..._0x4b3529,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x4b3529,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}['createParticlesTextures'](){const _0x793b3={};_0x793b3['minificationFilter']=TextureMinificationFilter$1[_0x48b350(0x44b,0x490)];function _0x48b350(_0x3f8329,_0x1fa43a){return _0x294e51(_0x3f8329,_0x1fa43a-0x4ee);}_0x793b3['magnificationFilter']=TextureMagnificationFilter$1[_0x3631bc(0x138,0x13a)];function _0x3631bc(_0x27a0f4,_0x4f08af){return _0x131859(_0x27a0f4,_0x4f08af-0x217);}const _0x59d6be={'context':this['context'],'width':this['options'][_0x48b350(0x510,0x494)],'height':this[_0x48b350(0x525,0x4c3)][_0x3631bc(0xf5,0x13e)],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x3631bc(0x12d,0xd5)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0x3631bc(0x100,0x13e)]*this['options'][_0x48b350(0x4c1,0x494)]*0x4)[_0x48b350(0x3fa,0x406)](0x0)},'sampler':new Sampler$1(_0x793b3)};this[_0x3631bc(0x121,0x11e)]={'previousParticlesPosition':new Texture$1(_0x59d6be),'currentParticlesPosition':new Texture$1(_0x59d6be),'nextParticlesPosition':new Texture$1(_0x59d6be),'postProcessingPosition':new Texture$1(_0x59d6be),'particlesSpeed':new Texture$1(_0x59d6be)};}['destroyParticlesTextures'](){function _0x15ba84(_0x4739a9,_0x430f7d){return _0x294e51(_0x4739a9,_0x430f7d-0x467);}Object['values'](this[_0x15ba84(0x363,0x3ed)])['forEach'](_0x4a507d=>_0x4a507d['destroy']());}['createComputingPrimitives'](){function _0x3363ed(_0x837a70,_0x298c03){return _0x131859(_0x298c03,_0x837a70-0x4a);}function _0x8c09bb(_0x56684a,_0x4b81ad){return _0x131859(_0x4b81ad,_0x56684a-0x346);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this[_0x8c09bb(0x2da,0x2ff)]['u']['min'],this['windData']['u'][_0x8c09bb(0x224,0x28a)]),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0x3363ed(-0xc2,-0x98)],this[_0x3363ed(-0x22,0x22)]['v'][_0x3363ed(-0xd8,-0x109)]),'speedRange':()=>new Cartesian2$1(this['windData']['speed']['min'],this[_0x8c09bb(0x2da,0x29e)]['speed']['max']),'currentParticlesPosition':()=>this['particlesTextures'][_0x3363ed(-0x68,-0xcc)],'speedScaleFactor':()=>{function _0x560d1e(_0x1fd7c7,_0x5f27f2){return _0x3363ed(_0x5f27f2- -0xd6,_0x1fd7c7);}return(this['viewerParameters'][_0x560d1e(-0x20c,-0x19f)]+0x32)*this['options']['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData'][_0x8c09bb(0x264,0x2b9)],this['windData']['height']),'minimum':()=>new Cartesian2$1(this[_0x8c09bb(0x2da,0x2e3)]['bounds']['west'],this['windData'][_0x8c09bb(0x1fc,0x1fa)][_0x8c09bb(0x2bf,0x30a)]),'maximum':()=>new Cartesian2$1(this['windData']['bounds'][_0x8c09bb(0x28c,0x25e)],this['windData']['bounds'][_0x8c09bb(0x2bd,0x327)])},'fragmentShaderSource':ShaderManager[_0x8c09bb(0x2db,0x30d)](),'outputTexture':this[_0x8c09bb(0x24d,0x2ac)][_0x3363ed(-0xe,0x1a)],'preExecute':()=>{function _0x546091(_0x792afd,_0x50b4ec){return _0x3363ed(_0x792afd- -0x5c,_0x50b4ec);}const _0x1da7c3=this['particlesTextures']['previousParticlesPosition'];this[_0x546091(-0x10b,-0xad)]['previousParticlesPosition']=this[_0x329656(0x4f9,0x4e4)]['currentParticlesPosition'];function _0x329656(_0x1ecd75,_0x35983e){return _0x8c09bb(_0x1ecd75-0x2ac,_0x35983e);}this['particlesTextures']['currentParticlesPosition']=this[_0x329656(0x4f9,0x4e6)]['postProcessingPosition'],this[_0x546091(-0x10b,-0x89)]['postProcessingPosition']=_0x1da7c3,this['primitives']['calculateSpeed']['commandToExecute']&&(this[_0x546091(-0x150,-0xde)][_0x546091(-0x174,-0x1e6)]['commandToExecute']['outputTexture']=this['particlesTextures'][_0x546091(-0x6a,-0x62)]);},'isDynamic':()=>this[_0x3363ed(-0x60,0xc)][_0x3363ed(-0xf,-0xc)]}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0x8c09bb(0x24d,0x2b8)]['currentParticlesPosition'],'particlesSpeed':()=>this[_0x3363ed(-0xaf,-0x8f)][_0x8c09bb(0x2ee,0x2b4)]},'fragmentShaderSource':ShaderManager[_0x3363ed(-0x86,-0x70)](),'outputTexture':this[_0x8c09bb(0x24d,0x270)]['nextParticlesPosition'],'preExecute':()=>{function _0xc07807(_0x263003,_0x464f3c){return _0x8c09bb(_0x263003- -0x36c,_0x464f3c);}function _0x11ae02(_0x10ecdb,_0x1a67ab){return _0x8c09bb(_0x10ecdb-0xbe,_0x1a67ab);}this['primitives'][_0x11ae02(0x3a1,0x402)]['commandToExecute']&&(this['primitives']['updatePosition'][_0x11ae02(0x2f9,0x327)][_0x11ae02(0x305,0x37a)]=this[_0x11ae02(0x30b,0x382)][_0x11ae02(0x2de,0x355)]);},'isDynamic':()=>this[_0x8c09bb(0x29c,0x256)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this[_0x8c09bb(0x24d,0x1c8)][_0x8c09bb(0x2ee,0x292)],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this[_0x8c09bb(0x209,0x17f)][_0x8c09bb(0x2a1,0x319)],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds'][_0x8c09bb(0x21f,0x25a)],this[_0x3363ed(-0x22,0x47)][_0x8c09bb(0x1fc,0x1b3)]['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x8c09bb(0x2da,0x29d)][_0x8c09bb(0x1fc,0x1db)][_0x3363ed(-0x3d,-0x72)],this['windData']['bounds'][_0x8c09bb(0x2bd,0x329)]),'randomCoefficient':function(){function _0x6a19a3(_0x2be930,_0x5c56c5){return _0x8c09bb(_0x2be930- -0x1a4,_0x5c56c5);}return Math[_0x6a19a3(0xb6,0x45)]();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options'][_0x8c09bb(0x2c6,0x2cb)],'useViewerBounds':()=>this[_0x3363ed(-0x60,-0xc2)][_0x3363ed(-0x72,-0x69)]},'fragmentShaderSource':ShaderManager[_0x3363ed(-0x11e,-0xf1)](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x123afb(_0x4840d2,_0x202083){return _0x3363ed(_0x202083-0x3fc,_0x4840d2);}function _0x359a69(_0x56d902,_0x5ade4f){return _0x3363ed(_0x5ade4f-0x69c,_0x56d902);}this[_0x123afb(0x377,0x308)][_0x359a69(0x60a,0x5d2)]['commandToExecute']&&(this[_0x359a69(0x5aa,0x5a8)]['postProcessingPosition'][_0x359a69(0x5a1,0x5db)]['outputTexture']=this['particlesTextures'][_0x359a69(0x5aa,0x5d2)]);},'isDynamic':()=>this['options']['dynamic']})};}['reCreateWindTextures'](){this[_0x65a7c9(0x415,0x38d)]['U']['destroy']();function _0x65a7c9(_0x583f49,_0x5b2f5a){return _0x131859(_0x583f49,_0x5b2f5a-0x4ea);}this['windTextures']['V']['destroy'](),this['createWindTextures']();}['updateWindData'](_0x25b097){this['windData']=_0x25b097,this['reCreateWindTextures']();}['updateOptions'](_0x59e4c3){function _0x573b0a(_0x43b577,_0x3be5dc){return _0x131859(_0x43b577,_0x3be5dc-0x11c);}const _0x4c223b=_0x59e4c3['flipY']!==undefined&&_0x59e4c3['flipY']!==this[_0x573b0a(-0xd,0x72)][_0xd46ee2(-0x140,-0x1c0)];function _0xd46ee2(_0x5026bb,_0x28536d){return _0x131859(_0x28536d,_0x5026bb- -0x17);}this['options']=deepMerge(_0x59e4c3,this['options']),_0x4c223b&&this['reCreateWindTextures']();}['processWindData'](_0x1bce6d){const {array:_0x3d5bce}=_0x1bce6d;function _0x5620f5(_0x2a3d47,_0x371dd6){return _0x131859(_0x2a3d47,_0x371dd6-0x708);}let {min:_0x3a8bcd,max:_0x1cdcc3}=_0x1bce6d;const _0x5bcd8c=new Float32Array(_0x3d5bce[_0x5620f5(0x5d2,0x64f)]);_0x3a8bcd===undefined&&(console[_0x51a425(0x41a,0x412)]('min\x20is\x20undefined,\x20calculate\x20min'),_0x3a8bcd=Math['min'](..._0x3d5bce));_0x1cdcc3===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0x1cdcc3=Math[_0x5620f5(0x636,0x5e6)](..._0x3d5bce));const _0x26f542=Math['max'](Math['abs'](_0x3a8bcd),Math['abs'](_0x1cdcc3));for(let _0xe5499b=0x0;_0xe5499b<_0x3d5bce['length'];_0xe5499b++){const _0x2ccbf9=_0x3d5bce[_0xe5499b]/_0x26f542;_0x5bcd8c[_0xe5499b]=_0x2ccbf9;}function _0x51a425(_0x804830,_0x45b182){return _0x294e51(_0x804830,_0x45b182-0x447);}return _0x5bcd8c;}['destroy'](){Object['values'](this[_0x1fe164(-0x9a,-0x21)])['forEach'](_0x27201b=>_0x27201b['destroy']());function _0x1fe164(_0x416f16,_0x3c0f8e){return _0x131859(_0x416f16,_0x3c0f8e-0x13c);}function _0x54e0c3(_0x39e0e7,_0x26951e){return _0x294e51(_0x39e0e7,_0x26951e-0x652);}Object['values'](this['particlesTextures'])['forEach'](_0xbbe9ae=>_0xbbe9ae['destroy']()),Object[_0x1fe164(0x16,-0x19)](this['primitives'])['forEach'](_0x474665=>_0x474665[_0x1fe164(0x87,0x39)]()),this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x2270da,_0x495ad3,_0x4d51c4,_0x3a28ae){this[_0x3c6491(0x551,0x55e)]=_0x2270da;function _0x5ca238(_0x45a44a,_0x17ec4e){return _0x294e51(_0x17ec4e,_0x45a44a-0x5d3);}this['options']=_0x495ad3,this[_0x5ca238(0x515,0x4e9)]=_0x4d51c4,this['computing']=_0x3a28ae;(typeof this['options']['particlesTextureSize']!==_0x5ca238(0x5c2,0x630)||this['options'][_0x3c6491(0x550,0x5b5)]<=0x0)&&(console[_0x5ca238(0x526,0x506)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options']['particlesTextureSize']=0x100);this['colorTable']=this[_0x3c6491(0x55a,0x56a)]();function _0x3c6491(_0x52e90b,_0x325128){return _0x294e51(_0x52e90b,_0x325128-0x60f);}this[_0x3c6491(0x517,0x532)]=this[_0x5ca238(0x5f5,0x588)](),this[_0x5ca238(0x502,0x589)]=this['createRenderingFramebuffers'](),this['primitives']=this[_0x5ca238(0x5b8,0x5df)]();}['createRenderingTextures'](){const _0x3b516a={};_0x3b516a['context']=this['context'],_0x3b516a[_0x86af0a(0x243,0x2ab)]=this[_0x18f077(0x1f5,0x1da)][_0x86af0a(0x274,0x24d)],_0x3b516a['height']=this['context'][_0x18f077(0x283,0x292)],_0x3b516a['pixelFormat']=PixelFormat[_0x18f077(0x244,0x233)],_0x3b516a['pixelDatatype']=PixelDatatype[_0x18f077(0x1e2,0x257)];const _0x519b82=_0x3b516a,_0xdadb83={};_0xdadb83['context']=this['context'],_0xdadb83[_0x86af0a(0x235,0x2ab)]=this['context'][_0x86af0a(0x275,0x24d)];function _0x18f077(_0x383266,_0x1c3bd3){return _0x294e51(_0x1c3bd3,_0x383266-0x2a6);}_0xdadb83['height']=this['context']['drawingBufferHeight'],_0xdadb83['pixelFormat']=PixelFormat['DEPTH_COMPONENT'],_0xdadb83['pixelDatatype']=PixelDatatype[_0x18f077(0x223,0x219)];function _0x86af0a(_0xf7423d,_0xe6c2c5){return _0x294e51(_0xf7423d,_0xe6c2c5-0x30e);}const _0x564afe=_0xdadb83;return{'segmentsColor':new Texture(_0x519b82),'segmentsDepth':new Texture(_0x564afe)};}[_0x131859(-0xfe,-0x14d)](){const _0x4c8276={};_0x4c8276[_0xe5ada5(-0xe2,-0x126)]=this[_0x2f37f3(-0xda,-0x73)],_0x4c8276[_0xe5ada5(-0x5e,-0xe0)]=[this['textures'][_0x2f37f3(-0x10f,-0x91)]];function _0x2f37f3(_0x30962b,_0x2c090a){return _0x294e51(_0x2c090a,_0x30962b- -0x29);}function _0xe5ada5(_0xe39f47,_0x37cf52){return _0x294e51(_0x37cf52,_0xe39f47- -0x31);}return _0x4c8276['depthTexture']=this['textures']['segmentsDepth'],{'segments':new Framebuffer(_0x4c8276)};}['destoryRenderingFramebuffers'](){function _0x1e9678(_0x44fad5,_0x363634){return _0x131859(_0x44fad5,_0x363634-0x54a);}Object['values'](this['framebuffers'])[_0x1e9678(0x53a,0x4bd)](_0xa0aae3=>{function _0x4055b5(_0x4b3e71,_0x47de17){return _0x1e9678(_0x4b3e71,_0x47de17- -0x24e);}_0xa0aae3[_0x4055b5(0x1ec,0x1f9)]();});}['createColorTableTexture'](){const _0x22841f=new Float32Array(this[_0x3d638e(0x699,0x654)][_0x3d638e(0x666,0x678)][_0x3d638e(0x6d5,0x683)](_0x4206df=>{const _0x4d1ae=Color$1['fromCssColorString'](_0x4206df);return[_0x4d1ae['red'],_0x4d1ae['green'],_0x4d1ae['blue'],_0x4d1ae['alpha']];}));function _0x3d638e(_0xd810c,_0x41936b){return _0x294e51(_0xd810c,_0x41936b-0x67f);}const _0x5d35bd={};function _0x2b533f(_0x512459,_0x4477be){return _0x131859(_0x512459,_0x4477be-0x5ba);}return _0x5d35bd[_0x3d638e(0x5e5,0x5c6)]=TextureMinificationFilter[_0x3d638e(0x5bc,0x5cc)],_0x5d35bd[_0x3d638e(0x53b,0x598)]=TextureMagnificationFilter['LINEAR'],_0x5d35bd['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x5d35bd['wrapT']=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this['options']['colors'][_0x3d638e(0x690,0x645)],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x5d35bd),'source':{'width':this['options']['colors'][_0x3d638e(0x644,0x645)],'height':0x1,'arrayBufferView':_0x22841f}});}[_0x131859(-0xc,-0x7f)](){const _0x58d92a=0x4,_0x5d4691=this['options']['particlesTextureSize'];let _0x53b259=[];for(let _0x2ccb4a=0x0;_0x2ccb4a<_0x5d4691;_0x2ccb4a++){for(let _0x52be47=0x0;_0x52be47<_0x5d4691;_0x52be47++){for(let _0x38e048=0x0;_0x38e048<_0x58d92a;_0x38e048++){_0x53b259['push'](_0x2ccb4a/_0x5d4691),_0x53b259[_0x1fca2b(0x1fe,0x201)](_0x52be47/_0x5d4691);}}}function _0x1fca2b(_0x25b772,_0x7ff2ec){return _0x294e51(_0x25b772,_0x7ff2ec-0x2d9);}_0x53b259=new Float32Array(_0x53b259);const _0x305094=this['options']['particlesTextureSize']**0x2;let _0x57ff21=[];for(let _0x57e06b=0x0;_0x57e06b<_0x305094;_0x57e06b++){_0x57ff21[_0x2d8a66(0x4c3,0x4f7)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x57ff21=new Float32Array(_0x57ff21);let _0x4f747f=[];for(let _0x34cb47=0x0,_0x1815f0=0x0;_0x34cb47<_0x305094;_0x34cb47++){_0x4f747f['push'](_0x1815f0+0x0,_0x1815f0+0x1,_0x1815f0+0x2,_0x1815f0+0x2,_0x1815f0+0x1,_0x1815f0+0x3),_0x1815f0+=_0x58d92a;}_0x4f747f=new Uint32Array(_0x4f747f);const _0x5cec23={};_0x5cec23['componentDatatype']=ComponentDatatype['FLOAT'];function _0x2d8a66(_0x5457f5,_0x5e54d9){return _0x294e51(_0x5e54d9,_0x5457f5-0x59b);}_0x5cec23[_0x2d8a66(0x550,0x518)]=0x2,_0x5cec23['values']=_0x53b259;const _0x3c1a1b={};_0x3c1a1b[_0x2d8a66(0x4bc,0x4e0)]=ComponentDatatype['FLOAT'],_0x3c1a1b[_0x1fca2b(0x2b3,0x28e)]=0x3,_0x3c1a1b['values']=_0x57ff21;const _0x463723=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x5cec23),'normal':new GeometryAttribute(_0x3c1a1b)}),'indices':_0x4f747f});return _0x463723;}['createRawRenderState'](_0xb66d3e){const _0x7a15b7={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0xb66d3e};return Appearance['getDefaultRenderState'](!![],![],_0x7a15b7);}[_0x294e51(-0x64,-0x1b)](){const _0x4cc9e1={};_0x4cc9e1['st']=0x0,_0x4cc9e1['normal']=0x1;const _0x581763={};_0x581763[_0x2a5dfa(-0xba,-0xf5)]=!![];function _0x440915(_0x167fe9,_0x51f33d){return _0x294e51(_0x167fe9,_0x51f33d-0x504);}const _0x4a09ed={};_0x4a09ed['enabled']=!![],_0x4a09ed[_0x440915(0x4ad,0x4d8)]=WebGLRenderingContext['FUNC_ADD'],_0x4a09ed[_0x440915(0x489,0x48f)]=WebGLRenderingContext[_0x440915(0x3e4,0x422)];function _0x2a5dfa(_0xe7849e,_0x38eb8d){return _0x131859(_0x38eb8d,_0xe7849e-0x21);}_0x4a09ed['blendFuncDestination']=WebGLRenderingContext[_0x2a5dfa(-0x70,-0xf8)];const _0x5f49cc={};_0x5f49cc['viewport']=undefined,_0x5f49cc['depthTest']=_0x581763,_0x5f49cc['depthMask']=!![],_0x5f49cc['blending']=_0x4a09ed;const _0x4d84a2=new CustomPrimitive({'commandType':_0x2a5dfa(-0x6a,-0x98),'attributeLocations':_0x4cc9e1,'geometry':this[_0x440915(0x53c,0x504)](),'primitiveType':PrimitiveType[_0x2a5dfa(-0x34,0x17)],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures'][_0x2a5dfa(-0xce,-0x126)],'currentParticlesPosition':()=>this[_0x440915(0x3ec,0x450)]['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this[_0x440915(0x41b,0x450)][_0x440915(0x4fc,0x48a)]['postProcessingPosition'],'particlesSpeed':()=>this[_0x2a5dfa(-0x112,-0xdf)]['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this[_0x440915(0x41a,0x450)][_0x2a5dfa(-0x3b,-0xa0)],'colorTable':()=>this['colorTable'],'domain':()=>{function _0x203526(_0x1ec133,_0x48383c){return _0x440915(_0x1ec133,_0x48383c- -0x3d0);}var _0x5dc44c,_0x5e06d0;function _0x98c49c(_0x17fbe3,_0x5cb3fe){return _0x440915(_0x5cb3fe,_0x17fbe3- -0x17f);}const _0x5dc870=new Cartesian2(((_0x5dc44c=this['options']['domain'])===null||_0x5dc44c===void 0x0?void 0x0:_0x5dc44c[_0x203526(0x119,0xa7)])??this[_0x203526(0xf7,0x80)]['windData']['speed'][_0x203526(0x122,0xa7)],((_0x5e06d0=this['options'][_0x98c49c(0x38a,0x3b1)])===null||_0x5e06d0===void 0x0?void 0x0:_0x5e06d0['max'])??this[_0x203526(0x4f,0x80)]['windData']['speed'][_0x203526(0x7f,0x91)]);return _0x5dc870;},'displayRange':()=>{function _0x5728e6(_0x9c56b7,_0x9cdf3a){return _0x440915(_0x9cdf3a,_0x9c56b7- -0x5f1);}function _0xf4c979(_0x47c37d,_0x22e2bf){return _0x2a5dfa(_0x22e2bf-0x3ab,_0x47c37d);}var _0x9aac65,_0x69ef58;const _0x579d06=new Cartesian2(((_0x9aac65=this[_0x5728e6(-0x118,-0xf7)]['displayRange'])===null||_0x9aac65===void 0x0?void 0x0:_0x9aac65['min'])??this[_0x5728e6(-0x1a1,-0x12b)][_0xf4c979(0x2fa,0x360)]['speed'][_0xf4c979(0x263,0x2c0)],((_0x69ef58=this['options'][_0x5728e6(-0x173,-0x169)])===null||_0x69ef58===void 0x0?void 0x0:_0x69ef58['max'])??this['computing']['windData']['speed'][_0xf4c979(0x25f,0x2aa)]);return _0x579d06;},'particleHeight':()=>this[_0x2a5dfa(-0x89,-0x5d)]['fixedHeight']||0x0,'aspect':()=>this[_0x440915(0x3da,0x453)]['drawingBufferWidth']/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{function _0x46083f(_0x3e8b6d,_0x6cd4cb){return _0x440915(_0x3e8b6d,_0x6cd4cb- -0x30f);}const _0x5e26ac={};_0x5e26ac[_0x46083f(0x16a,0x168)]=0x1,_0x5e26ac['max']=0x2;const _0xf0e5e1=this['options']['lineWidth']||_0x5e26ac;return new Cartesian2(_0xf0e5e1['min'],_0xf0e5e1['max']);},'lineLength':()=>{const _0x37e312={};function _0x2346df(_0x2d226f,_0x2ba8c8){return _0x440915(_0x2ba8c8,_0x2d226f-0x152);}_0x37e312['min']=0x14,_0x37e312['max']=0x64;const _0x45e3fd=this['options'][_0x5612d5(0xff,0x104)]||_0x37e312;function _0x5612d5(_0x2bc9eb,_0x35c2db){return _0x2a5dfa(_0x2bc9eb-0x194,_0x35c2db);}return new Cartesian2(_0x45e3fd[_0x2346df(0x5c9,0x54e)],_0x45e3fd['max']);},'is3D':()=>this[_0x2a5dfa(-0x11c,-0x161)]['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures']['segmentsDepth']},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this[_0x2a5dfa(-0xb3,-0x6b)](_0x5f49cc)}),_0x4c6a6e={};return _0x4c6a6e['segments']=_0x4d84a2,_0x4c6a6e;}['onParticlesTextureSizeChange'](){const _0xe72386=this['createSegmentsGeometry']();this[_0x5338fd(0x3b,0x1)]['segments']['geometry']=_0xe72386;const _0x100feb={};_0x100feb['context']=this[_0x5338fd(0x81,0xf)],_0x100feb[_0x5338fd(0x3c,0x2a)]=_0xe72386,_0x100feb['attributeLocations']=this['primitives']['segments'][_0x412a25(0x1c1,0x240)];function _0x412a25(_0x5d5a0b,_0x39269e){return _0x294e51(_0x5d5a0b,_0x39269e-0x320);}_0x100feb[_0x412a25(0x295,0x289)]=BufferUsage['STATIC_DRAW'];const _0x258cbe=VertexArray[_0x5338fd(0x46,0x15)](_0x100feb);function _0x5338fd(_0x1b8eef,_0x6cec4b){return _0x131859(_0x1b8eef,_0x6cec4b-0x13f);}this['primitives']['segments']['commandToExecute']&&(this[_0x5338fd(0x36,0x1)]['segments'][_0x412a25(0x25f,0x294)]['vertexArray']=_0x258cbe);}['onColorTableChange'](){this['colorTable']['destroy'](),this['colorTable']=this['createColorTableTexture']();}[_0x294e51(-0x24,0x6)](_0x3fccca){function _0x2cb7a3(_0x5473a4,_0x209404){return _0x131859(_0x209404,_0x5473a4-0x576);}function _0x425a89(_0x59ca1b,_0x5de833){return _0x131859(_0x5de833,_0x59ca1b- -0xa6);}const _0x45db4e=_0x3fccca[_0x425a89(-0x12c,-0xf2)]&&JSON[_0x2cb7a3(0x4fa,0x484)](_0x3fccca['colors'])!==JSON['stringify'](this['options'][_0x2cb7a3(0x4f0,0x4bf)]);this['options']=deepMerge(_0x3fccca,this[_0x2cb7a3(0x4cc,0x4a6)]),_0x45db4e&&this[_0x2cb7a3(0x500,0x574)]();}['destroy'](){Object[_0x3f3241(0x350,0x373)](this['framebuffers'])['forEach'](_0xa56141=>{_0xa56141['destroy']();});function _0x16c30b(_0x45ada8,_0x3887a5){return _0x294e51(_0x45ada8,_0x3887a5-0x5b);}function _0x3f3241(_0xb4f505,_0x2ffa89){return _0x131859(_0xb4f505,_0x2ffa89-0x4c8);}Object[_0x16c30b(-0x7a,-0x7b)](this[_0x16c30b(-0xbf,-0x64)])[_0x3f3241(0x49d,0x43b)](_0x91e382=>{_0x91e382['destroy']();}),this[_0x3f3241(0x4b3,0x454)][_0x16c30b(0x1b,-0x29)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x36a5b5,_0x5ea3e2,_0x596124,_0x283b26,_0x4949d9){this['context']=_0x36a5b5,this['options']=_0x596124,this[_0x20d516(0x373,0x398)]=_0x283b26,this[_0x16b53d(0x422,0x46c)]=new WindParticlesComputing(_0x36a5b5,_0x5ea3e2,_0x596124,_0x283b26,_0x4949d9);function _0x20d516(_0x444cb6,_0x3cafbf){return _0x131859(_0x3cafbf,_0x444cb6-0x4b0);}this[_0x16b53d(0x4af,0x501)]=new WindParticlesRendering(_0x36a5b5,_0x596124,_0x283b26,this['computing']);function _0x16b53d(_0x217fd2,_0x18f0b1){return _0x131859(_0x217fd2,_0x18f0b1-0x59f);}this['clearFramebuffers']();}[_0x131859(-0x15e,-0x11b)](){const _0x484eba=[this[_0x386e80(-0x115,-0x154)][_0x386e80(-0x120,-0x12a)]['calculateSpeed'],this['computing']['primitives'][_0x386e80(-0x45,-0xb)],this['computing']['primitives']['postProcessingPosition'],this[_0x386e80(-0x80,-0xbf)]['primitives']['segments']];function _0x386e80(_0x3e9715,_0x491bc5){return _0x131859(_0x491bc5,_0x3e9715-0x1e);}function _0x597b25(_0x5c2ff5,_0x4b2b51){return _0x294e51(_0x4b2b51,_0x5c2ff5-0x4dc);}return _0x484eba;}['clearFramebuffers'](){function _0x385185(_0x5cd51e,_0x4ae457){return _0x131859(_0x5cd51e,_0x4ae457-0x563);}function _0x1bb55b(_0x43a83f,_0x3a54a0){return _0x294e51(_0x3a54a0,_0x43a83f-0x679);}const _0x2d94ef=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x1bb55b(0x645,0x5bb)]});Object[_0x1bb55b(0x655,0x6d4)](this[_0x385185(0x4ec,0x4c5)][_0x385185(0x3a1,0x413)])['forEach'](_0x32b09c=>{function _0x4a2fd7(_0x34ecea,_0x1a5be8){return _0x1bb55b(_0x34ecea- -0x1a8,_0x1a5be8);}_0x2d94ef['framebuffer']=this['rendering'][_0x4a2fd7(0x400,0x452)][_0x32b09c],_0x2d94ef['execute'](this['context']);});}['changeOptions'](_0x2efbbc){function _0x5a8432(_0xedf1db,_0x3cc914){return _0x294e51(_0xedf1db,_0x3cc914-0x4c5);}let _0x575ddb=![];_0x2efbbc['particlesTextureSize']&&this['options']['particlesTextureSize']!==_0x2efbbc[_0x4e25c6(0x37f,0x3dc)]&&(_0x575ddb=!![]);function _0x4e25c6(_0x44062a,_0x5bdfeb){return _0x294e51(_0x5bdfeb,_0x44062a-0x3d9);}const _0x5bb31b=deepMerge(_0x2efbbc,this[_0x5a8432(0x4ae,0x49a)]);if(_0x5bb31b['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this[_0x5a8432(0x413,0x49a)]=_0x5bb31b,this['rendering'][_0x4e25c6(0x3df,0x41a)](_0x2efbbc),this['computing']['updateOptions'](_0x2efbbc),_0x575ddb&&(this['computing'][_0x5a8432(0x46b,0x43d)](),this[_0x4e25c6(0x325,0x2cb)]['createParticlesTextures'](),this[_0x5a8432(0x504,0x4a6)]['onParticlesTextureSizeChange']());}[_0x294e51(-0x2f,0x2d)](_0x2cce9e){function _0x18ddf4(_0x4b2470,_0x3db7f3){return _0x131859(_0x3db7f3,_0x4b2470-0x4a0);}this['viewerParameters']=_0x2cce9e,this[_0x18ddf4(0x36d,0x35f)]['viewerParameters']=_0x2cce9e,this['rendering']['viewerParameters']=_0x2cce9e;}['destroy'](){function _0x51e161(_0x203bc7,_0x44d1bd){return _0x131859(_0x44d1bd,_0x203bc7-0x1b8);}function _0x555f0e(_0x5ed6ca,_0x4a5ddd){return _0x131859(_0x4a5ddd,_0x5ed6ca-0xe8);}this[_0x555f0e(-0x4b,0x35)]['destroy'](),this['rendering'][_0x555f0e(-0x1b,-0x7)]();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x479aa5={};_0x479aa5[_0x131859(-0x88,-0x10c)]=0x1,_0x479aa5['max']=0x2;const _0x57805b={};_0x57805b['min']=0x14,_0x57805b['max']=0x64;const _0x17edaa={};_0x17edaa['particlesTextureSize']=0x64,_0x17edaa[_0x294e51(-0x7f,-0x92)]=0x0,_0x17edaa[_0x131859(-0x130,-0x164)]=_0x479aa5,_0x17edaa[_0x294e51(-0xc4,-0x37)]=_0x57805b,_0x17edaa['speedFactor']=0x1,_0x17edaa['dropRate']=0.003,_0x17edaa[_0x131859(-0xb3,-0x80)]=0.001,_0x17edaa['colors']=['rgb(206,255,255)'],_0x17edaa[_0x131859(-0x11a,-0x129)]=![],_0x17edaa[_0x294e51(-0x18,0x26)]=!![];const DEF_OPTIONS=_0x17edaa;class WindLayer extends BaseLayer$1{constructor(_0x25ed02={}){_0x25ed02={...DEF_OPTIONS,..._0x25ed02},super(_0x25ed02),this['_setOptionsHook'](_0x25ed02,_0x25ed02);}get['layer'](){return this['primitives'];}get['data'](){return this['options']['data'];}set['data'](_0x1e8fd7){function _0x41a317(_0x302789,_0x3683e2){return _0x131859(_0x302789,_0x3683e2-0x5c8);}this[_0x574ee6(0x5a3,0x52b)]['data']=_0x1e8fd7;function _0x574ee6(_0x2af8e1,_0x2bfbcf){return _0x131859(_0x2bfbcf,_0x2af8e1-0x64d);}this[_0x41a317(0x58e,0x544)](_0x1e8fd7);}get['colors'](){return this['options']['colors'];}set[_0x294e51(-0xa,-0x7)](_0x39c959){this[_0x5cb502(-0xd6,-0x137)][_0x19d2f1(0x697,0x666)]=_0x39c959;function _0x19d2f1(_0x3d7f19,_0xd3382a){return _0x294e51(_0x3d7f19,_0xd3382a-0x66d);}function _0x5cb502(_0xf008c8,_0x4c533f){return _0x131859(_0x4c533f,_0xf008c8- -0x2c);}const _0x41fb51={};_0x41fb51[_0x5cb502(-0xb2,-0x34)]=_0x39c959,this[_0x5cb502(-0xea,-0x88)](this[_0x5cb502(-0xd6,-0x101)],_0x41fb51);}[_0x131859(-0xbb,-0xcf)](){}[_0x131859(-0x18,-0xa1)](){this['scene']=this['_map'][_0x569988(-0x62,-0xc8)],this['camera']=this['_map']['camera'];this[_0x569988(-0xc7,-0x10c)]['data']&&this[_0x31045a(-0xf4,-0x79)](this[_0x31045a(-0x11a,-0x178)][_0x569988(-0x117,-0x142)]);if(!this[_0x569988(-0xfe,-0xce)])return;this[_0x569988(-0x1ab,-0x19f)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene'][_0x31045a(-0x1a0,-0x1a5)],this['windData'],this['options'],this[_0x569988(-0x16b,-0x19f)],this['scene']),this['primitives']=this['particleSystem']['getPrimitives'](),this['primitives']['forEach'](_0x1fe93f=>{function _0xb44f5c(_0x498843,_0x39fbea){return _0x31045a(_0x39fbea-0x478,_0x498843);}this['scene'][_0xb44f5c(0x2ce,0x2ca)]['add'](_0x1fe93f);}),this[_0x31045a(-0x125,-0x125)]['percentageChanged']=0.01,this[_0x31045a(-0x125,-0x17b)]['changed'][_0x569988(-0x13b,-0xf8)](this['updateViewerParameters'][_0x31045a(-0x12d,-0xa2)](this));function _0x31045a(_0x200669,_0x5acdc9){return _0x294e51(_0x5acdc9,_0x200669- -0xef);}function _0x569988(_0x515bf4,_0x21f7b2){return _0x294e51(_0x515bf4,_0x21f7b2- -0xe1);}this['scene'][_0x31045a(-0x1aa,-0x169)][_0x31045a(-0x106,-0x17d)](this['updateViewerParameters'][_0x569988(-0xa2,-0x11f)](this)),window['addEventListener']('resize',this[_0x569988(-0xb3,-0x113)][_0x569988(-0x10c,-0x11f)](this));}['_removedHook'](){this['camera']['changed'][_0x391c5f(-0x57,-0xcf)](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete']['removeEventListener'](this['updateViewerParameters'][_0x391c5f(-0x95,-0xc7)](this));function _0x391c5f(_0x58e365,_0x55fddc){return _0x294e51(_0x58e365,_0x55fddc- -0x89);}function _0x591f49(_0x309c87,_0x89bc64){return _0x131859(_0x309c87,_0x89bc64-0x201);}window[_0x591f49(0xdf,0x13c)]('resize',this['updateViewerParameters'][_0x391c5f(-0x6a,-0xc7)](this)),this[_0x391c5f(-0x15d,-0x148)]&&(this['primitives']['forEach'](_0x1dabeb=>{this['scene']['primitives']['remove'](_0x1dabeb);}),delete this['primitives']),this[_0x591f49(0x17f,0x11d)]&&(this['particleSystem'][_0x591f49(0x8b,0xfe)](),delete this['particleSystem']);}[_0x294e51(-0x5a,-0x5)](_0x2789cb,_0x49d7a6){this['windData']=this[_0x1f7cb3(0x424,0x482)](_0x2789cb);if(_0x49d7a6){this['_removedHook'](),this['_addedHook']();return;}function _0x1f7cb3(_0x56c283,_0x26d2fc){return _0x131859(_0x26d2fc,_0x56c283-0x4f0);}function _0x2f28ac(_0x4f7e30,_0x43702c){return _0x294e51(_0x43702c,_0x4f7e30-0x2fc);}this[_0x2f28ac(0x297,0x2d8)]?(this[_0x2f28ac(0x297,0x24e)]['computing'][_0x1f7cb3(0x409,0x482)](this['windData']),this['scene'][_0x2f28ac(0x2cc,0x303)]()):this['_addedHook']();}['_setOptionsHook'](_0xd4cb5e,_0x1548e){function _0x16284f(_0x3bd53f,_0x44df4f){return _0x131859(_0x3bd53f,_0x44df4f- -0x86);}function _0x3d6ca6(_0x23b33b,_0x289d3c){return _0x294e51(_0x23b33b,_0x289d3c- -0x142);}this['particleSystem']&&(this[_0x16284f(-0x1cd,-0x16a)]['changeOptions'](_0x1548e),this['scene'][_0x3d6ca6(-0x106,-0x172)]());}['processWindData'](_0x1d0789){var _0x2f82a6,_0x2f861c;const _0x45409a={..._0x1d0789},_0x46f69d=_0x45409a;!_0x46f69d[_0x1519de(0x548,0x56d)]&&_0x46f69d['rows']&&(_0x46f69d[_0x3271a3(0x3ef,0x3f2)]=_0x46f69d[_0x1519de(0x4df,0x50b)]);!_0x46f69d[_0x1519de(0x52a,0x4d5)]&&_0x46f69d['cols']&&(_0x46f69d['width']=_0x46f69d['cols']);!_0x46f69d['bounds']&&(_0x46f69d[_0x3271a3(0x369,0x2e8)]={'west':_0x46f69d['xmin'],'south':_0x46f69d['ymin'],'east':_0x46f69d['xmax'],'north':_0x46f69d[_0x3271a3(0x41e,0x3be)]});if(!_0x46f69d['u']){const _0x35c8b9={};_0x35c8b9['array']=_0x1d0789['udata'],_0x35c8b9[_0x1519de(0x500,0x4ec)]=_0x1d0789['umin'],_0x35c8b9['max']=_0x1d0789[_0x1519de(0x526,0x5a6)],_0x46f69d['u']=_0x35c8b9;}if(!_0x46f69d['v']){const _0x3d1399={};_0x3d1399['array']=_0x1d0789[_0x1519de(0x59e,0x5d3)],_0x3d1399['min']=_0x1d0789[_0x1519de(0x4f4,0x56a)],_0x3d1399['max']=_0x1d0789[_0x1519de(0x4ed,0x50f)],_0x46f69d['v']=_0x3d1399;}function _0x1519de(_0x638b6,_0x1bc0b8){return _0x294e51(_0x1bc0b8,_0x638b6-0x58d);}function _0x3271a3(_0x334935,_0xfdd55e){return _0x131859(_0xfdd55e,_0x334935-0x4b3);}if(((_0x2f82a6=_0x46f69d['speed'])===null||_0x2f82a6===void 0x0?void 0x0:_0x2f82a6['min'])===undefined||((_0x2f861c=_0x46f69d['speed'])===null||_0x2f861c===void 0x0?void 0x0:_0x2f861c['max'])===undefined||_0x46f69d[_0x1519de(0x532,0x505)]['array']===undefined){const _0x5dc418={'array':new Float32Array(_0x46f69d['u']['array']['length']),'min':Number[_0x3271a3(0x36b,0x34e)],'max':Number['MIN_VALUE']};for(let _0x39bdda=0x0;_0x39bdda<_0x46f69d['u']['array']['length'];_0x39bdda++){_0x5dc418['array'][_0x39bdda]=Math['sqrt'](_0x46f69d['u']['array'][_0x39bdda]*_0x46f69d['u']['array'][_0x39bdda]+_0x46f69d['v'][_0x3271a3(0x3cb,0x35f)][_0x39bdda]*_0x46f69d['v']['array'][_0x39bdda]),_0x5dc418['array'][_0x39bdda]!==0x0&&(_0x5dc418[_0x1519de(0x500,0x4b7)]=Math['min'](_0x5dc418['min'],_0x5dc418['array'][_0x39bdda]),_0x5dc418['max']=Math['max'](_0x5dc418['max'],_0x5dc418[_0x1519de(0x524,0x50d)][_0x39bdda]));}_0x46f69d['speed']=_0x5dc418;}return _0x46f69d;}[_0x131859(-0x12a,-0xb1)](){var _0x21e346;const _0x16d46b=this[_0x4f8f4e(0x3f6,0x430)];if(!_0x16d46b)return;const _0x2f2c1e=_0x16d46b['canvas'],_0x6e0ece={};function _0x356215(_0x4b3d13,_0x31474d){return _0x294e51(_0x4b3d13,_0x31474d-0xad);}_0x6e0ece['x']=0x0,_0x6e0ece['y']=0x0;function _0x4f8f4e(_0x17af6c,_0x409c29){return _0x131859(_0x409c29,_0x17af6c-0x45c);}const _0x5f44b0={};_0x5f44b0['x']=0x0,_0x5f44b0['y']=_0x2f2c1e[_0x356215(0x7,-0x2e)];const _0x9cecd1={};_0x9cecd1['x']=_0x2f2c1e['clientWidth'],_0x9cecd1['y']=0x0;const _0xf336d8={};_0xf336d8['x']=_0x2f2c1e[_0x356215(0x1c,-0x2a)],_0xf336d8['y']=_0x2f2c1e['clientHeight'];const _0x521f69=[_0x6e0ece,_0x5f44b0,_0x9cecd1,_0xf336d8];let _0x52500a=0xb4,_0x63abe4=-0xb4,_0x15722e=0x5a,_0x11043a=-0x5a,_0x5c5cff=![];for(const _0x1aaaf3 of _0x521f69){const _0x34fc91=_0x16d46b['camera']['pickEllipsoid'](new Cesium$1[(_0x356215(0x68,0x3b))](_0x1aaaf3['x'],_0x1aaaf3['y']),_0x16d46b['globe'][_0x4f8f4e(0x315,0x363)]);if(!_0x34fc91){_0x5c5cff=!![];break;}const _0x433c58=_0x16d46b['globe']['ellipsoid'][_0x356215(0xc0,0x66)](_0x34fc91),_0x5e92fc=Cesium$1['Math']['toDegrees'](_0x433c58[_0x356215(-0x31,0x1c)]),_0x2e211a=Cesium$1[_0x4f8f4e(0x34f,0x391)]['toDegrees'](_0x433c58['latitude']);_0x52500a=Math[_0x4f8f4e(0x350,0x359)](_0x52500a,_0x5e92fc),_0x63abe4=Math['max'](_0x63abe4,_0x5e92fc),_0x15722e=Math[_0x356215(-0x49,0x20)](_0x15722e,_0x2e211a),_0x11043a=Math[_0x4f8f4e(0x33a,0x39a)](_0x11043a,_0x2e211a);}if(!_0x5c5cff){const _0x2ec821=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds']['west'],_0x52500a),Math['min'](this[_0x356215(0x123,0xc0)]['bounds'][_0x356215(0x2f,0x72)],_0x63abe4)),_0x5e086e=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds'][_0x356215(0x113,0xa5)],_0x15722e),Math['min'](this[_0x4f8f4e(0x3f0,0x3f5)][_0x356215(-0x41,-0x1e)]['north'],_0x11043a)),_0x5aea8b=(_0x2ec821['y']-_0x2ec821['x'])*0.05,_0xa13b99=(_0x5e086e['y']-_0x5e086e['x'])*0.05;_0x2ec821['x']=Math[_0x4f8f4e(0x33a,0x329)](this['windData'][_0x356215(-0x90,-0x1e)]['west'],_0x2ec821['x']-_0x5aea8b),_0x2ec821['y']=Math['min'](this['windData']['bounds'][_0x356215(0x65,0x72)],_0x2ec821['y']+_0x5aea8b),_0x5e086e['x']=Math[_0x4f8f4e(0x33a,0x2b9)](this['windData'][_0x356215(-0x9c,-0x1e)]['south'],_0x5e086e['x']-_0xa13b99),_0x5e086e['y']=Math[_0x356215(0x7c,0x20)](this['windData']['bounds']['north'],_0x5e086e['y']+_0xa13b99),this[_0x356215(-0x9b,-0x11)]['lonRange']=_0x2ec821,this[_0x356215(-0x7,-0x11)][_0x4f8f4e(0x3b7,0x335)]=_0x5e086e;const _0x2652ae=this['windData']['bounds']['east']-this['windData']['bounds']['west'],_0x1a7d59=this[_0x4f8f4e(0x3f0,0x42d)]['bounds'][_0x356215(0x84,0xa3)]-this[_0x4f8f4e(0x3f0,0x3c1)]['bounds'][_0x4f8f4e(0x3d5,0x437)],_0x52f1dc=(_0x2ec821['y']-_0x2ec821['x'])/_0x2652ae,_0x3f0d48=(_0x5e086e['y']-_0x5e086e['x'])/_0x1a7d59,_0x1d37fe=Math[_0x356215(-0x1b,0x20)](_0x52f1dc,_0x3f0d48),_0x83cd20=0x3e8*_0x1d37fe;_0x83cd20>0x0&&(this['viewerParameters']['pixelSize']=Math[_0x4f8f4e(0x33a,0x3c4)](0x0,Math[_0x4f8f4e(0x350,0x3d4)](0x3e8,_0x83cd20)));}this['viewerParameters'][_0x4f8f4e(0x379,0x3c0)]=this['scene']['mode'],(_0x21e346=this[_0x4f8f4e(0x378,0x322)])===null||_0x21e346===void 0x0||_0x21e346['applyViewerParameters'](this['viewerParameters']);}['getDataAtLonLat'](_0x585bdf,_0x5e312c){const {bounds:_0x5c527a,width:_0x429d5a,height:_0x163aba,u:_0x3437c8,v:_0x425ed1,speed:_0x562e38}=this[_0x12c8c5(0x1ed,0x23d)],{flipY:_0x456c90}=this['options'];if(_0x585bdf<_0x5c527a[_0x12c8c5(0x132,0xe8)]||_0x585bdf>_0x5c527a[_0x447664(0x481,0x4f9)]||_0x5e312c<_0x5c527a['south']||_0x5e312c>_0x5c527a[_0x447664(0x4b2,0x51c)])return null;const _0xe2b691=(_0x585bdf-_0x5c527a[_0x12c8c5(0x132,0x1b0)])/(_0x5c527a[_0x12c8c5(0x19f,0x208)]-_0x5c527a['west'])*(_0x429d5a-0x1);let _0x17e445=(_0x5e312c-_0x5c527a[_0x12c8c5(0x1d2,0x1ea)])/(_0x5c527a['north']-_0x5c527a[_0x12c8c5(0x1d2,0x244)])*(_0x163aba-0x1);_0x456c90&&(_0x17e445=_0x163aba-0x1-_0x17e445);const _0x21d659=Math[_0x12c8c5(0x190,0x156)](_0xe2b691),_0x862f4e=Math[_0x12c8c5(0x190,0x11f)](_0x17e445),_0x4ce661=Math['floor'](_0xe2b691),_0x42768f=Math['min'](_0x4ce661+0x1,_0x429d5a-0x1),_0x1e9d0b=Math[_0x447664(0x472,0x451)](_0x17e445),_0xa14512=Math['min'](_0x1e9d0b+0x1,_0x163aba-0x1),_0x707141=_0xe2b691-_0x4ce661,_0x25f61c=_0x17e445-_0x1e9d0b,_0x2ad689=_0x862f4e*_0x429d5a+_0x21d659,_0x319224=_0x1e9d0b*_0x429d5a+_0x4ce661,_0x55e9f1=_0x1e9d0b*_0x429d5a+_0x42768f,_0xfefd9e=_0xa14512*_0x429d5a+_0x4ce661;function _0x12c8c5(_0xf4f0f4,_0x4c4bc7){return _0x294e51(_0x4c4bc7,_0xf4f0f4-0x1da);}const _0x414bf4=_0xa14512*_0x429d5a+_0x42768f,_0x53629a=_0x3437c8[_0x447664(0x453,0x41a)][_0x319224],_0x15670f=_0x3437c8[_0x12c8c5(0x171,0x11b)][_0x55e9f1],_0x317af4=_0x3437c8['array'][_0xfefd9e],_0x1bb197=_0x3437c8['array'][_0x414bf4],_0x29a557=(0x1-_0x707141)*(0x1-_0x25f61c)*_0x53629a+_0x707141*(0x1-_0x25f61c)*_0x15670f+(0x1-_0x707141)*_0x25f61c*_0x317af4+_0x707141*_0x25f61c*_0x1bb197,_0x1dcd88=_0x425ed1[_0x447664(0x453,0x418)][_0x319224],_0x6b56e7=_0x425ed1[_0x12c8c5(0x171,0x155)][_0x55e9f1],_0x2b4e20=_0x425ed1['array'][_0xfefd9e],_0x52d0a7=_0x425ed1['array'][_0x414bf4],_0x3208e1=(0x1-_0x707141)*(0x1-_0x25f61c)*_0x1dcd88+_0x707141*(0x1-_0x25f61c)*_0x6b56e7+(0x1-_0x707141)*_0x25f61c*_0x2b4e20+_0x707141*_0x25f61c*_0x52d0a7,_0x328455=Math['sqrt'](_0x29a557*_0x29a557+_0x3208e1*_0x3208e1),_0x2118ce={};_0x2118ce['u']=_0x3437c8['array'][_0x2ad689],_0x2118ce['v']=_0x425ed1['array'][_0x2ad689],_0x2118ce['speed']=_0x562e38['array'][_0x2ad689];const _0x24d0ea={};_0x24d0ea['u']=_0x29a557,_0x24d0ea['v']=_0x3208e1,_0x24d0ea['speed']=_0x328455;function _0x447664(_0x5aa83c,_0x12dadd){return _0x131859(_0x12dadd,_0x5aa83c-0x53b);}const _0x4db5b8={};return _0x4db5b8['original']=_0x2118ce,_0x4db5b8[_0x12c8c5(0x1fa,0x21e)]=_0x24d0ea,_0x4db5b8;}}mars3d__namespace['LayerUtil']['register'](_0x131859(-0xd2,-0x11a),WindLayer),mars3d__namespace[_0x131859(-0x8b,-0x117)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x47211b(_0x2d4d9b,_0x3987ec){return _0x294e51(_0x3987ec,_0x2d4d9b-0xb);}this[_0x47211b(0x25,0x5)]=null,this['lat']=null;function _0x5abd38(_0x3a2708,_0x358306){return _0x294e51(_0x3a2708,_0x358306- -0x1a);}this[_0x47211b(0x18,0x96)]=null,this['tlat']=null,this[_0x47211b(-0x1e,0x48)]=null,this[_0x47211b(-0x50,-0xd2)]=null;}['destroy'](){for(const _0xff340b in this){delete this[_0xff340b];}}}class CanvasWindField{constructor(_0x307a1a){this['setOptions'](_0x307a1a);}get['speedRate'](){return this['_speedRate'];}set[_0x294e51(-0x83,-0xc5)](_0x131150){function _0x13629b(_0x2ee93a,_0x3ac809){return _0x131859(_0x3ac809,_0x2ee93a-0x495);}this[_0x1a73e1(0x237,0x297)]=(0x64-(_0x131150>0x63?0x63:_0x131150))*0x64;function _0x1a73e1(_0x4f6cbe,_0x1b2911){return _0x131859(_0x4f6cbe,_0x1b2911-0x36c);}this['_calc_speedRate']=[(this['xmax']-this['xmin'])/this['_speedRate'],(this[_0x1a73e1(0x317,0x2d7)]-this['ymin'])/this['_speedRate']];}get[_0x294e51(0x4,-0x59)](){return this['_maxAge'];}set['maxAge'](_0x2a2c34){this['_maxAge']=_0x2a2c34;}['setOptions'](_0x1769ad){this['options']=_0x1769ad,this['maxAge']=_0x1769ad['maxAge']||0x78;function _0x563b5c(_0x1909bf,_0x26b75e){return _0x294e51(_0x26b75e,_0x1909bf-0x5c1);}function _0x2d5829(_0x640163,_0x258c05){return _0x131859(_0x258c05,_0x640163-0x4eb);}this[_0x2d5829(0x3a7,0x375)]=_0x1769ad['speedRate']||0x32,this['particles']=[];const _0x5036ba=_0x1769ad[_0x2d5829(0x3cf,0x432)]||0x1000;for(let _0x3c1af4=0x0;_0x3c1af4<_0x5036ba;_0x3c1af4++){const _0x167e8c=this['_randomParticle'](new CanvasParticle());this[_0x563b5c(0x5a9,0x59a)]['push'](_0x167e8c);}}[_0x131859(-0xfb,-0x128)](_0x74dd57){this['rows']=_0x74dd57[_0x5f0c2e(0x1d5,0x231)],this['cols']=_0x74dd57['cols'];function _0xd84afc(_0x2bc973,_0x2e14da){return _0x131859(_0x2e14da,_0x2bc973-0x435);}this[_0xd84afc(0x335,0x2d8)]=_0x74dd57[_0xd84afc(0x335,0x38b)],this['xmax']=_0x74dd57['xmax'],this['ymin']=_0x74dd57['ymin'],this[_0xd84afc(0x3a0,0x324)]=_0x74dd57['ymax'],this[_0xd84afc(0x3a1,0x3d7)]=[];const _0x1c4560=_0x74dd57['udata'],_0x16e699=_0x74dd57['vdata'];let _0x5c656e=![];_0x1c4560['length']===this[_0xd84afc(0x308,0x37e)]&&_0x1c4560[0x0]['length']===this['cols']&&(_0x5c656e=!![]);let _0x15644c=0x0,_0x4301cf=null;function _0x5f0c2e(_0x1224b0,_0x3a2918){return _0x294e51(_0x1224b0,_0x3a2918-0x2df);}let _0x186e0b=null;for(let _0x51c3d6=0x0;_0x51c3d6<this['rows'];_0x51c3d6++){_0x4301cf=[];for(let _0x56500d=0x0;_0x56500d<this['cols'];_0x56500d++,_0x15644c++){_0x5c656e?_0x186e0b=this[_0xd84afc(0x387,0x367)](_0x1c4560[_0x51c3d6][_0x56500d],_0x16e699[_0x51c3d6][_0x56500d]):_0x186e0b=this[_0x5f0c2e(0x2f4,0x2b0)](_0x1c4560[_0x15644c],_0x16e699[_0x15644c]),_0x4301cf[_0xd84afc(0x2de,0x254)](_0x186e0b);}this['grid']['push'](_0x4301cf);}!this[_0xd84afc(0x38b,0x317)]['flipY']&&this[_0xd84afc(0x3a1,0x3bb)]['reverse']();}['clear'](){function _0x23e513(_0x2eb484,_0xc169d7){return _0x131859(_0x2eb484,_0xc169d7-0x103);}delete this['rows'],delete this[_0x23e513(0x30,-0x3c)],delete this['xmin'],delete this[_0x23e513(0xe3,0x64)];function _0x2397f9(_0x1812f3,_0x1c9d66){return _0x294e51(_0x1c9d66,_0x1812f3-0x609);}delete this['ymin'],delete this[_0x23e513(0xcb,0x6e)],delete this[_0x2397f9(0x5f4,0x56a)],delete this[_0x23e513(0x7,0x6c)];}['toGridXY'](_0x2ff2a4,_0x4db471){const _0x2d1c45=(_0x2ff2a4-this['xmin'])/(this['xmax']-this[_0x462ac6(0x264,0x231)])*(this['cols']-0x1);function _0x462ac6(_0x3fa25a,_0x1172a4){return _0x294e51(_0x1172a4,_0x3fa25a-0x2e5);}function _0x429100(_0x551f91,_0x4170f6){return _0x294e51(_0x551f91,_0x4170f6-0x5a8);}const _0x20f5a1=(this['ymax']-_0x4db471)/(this[_0x429100(0x595,0x592)]-this['ymin'])*(this['rows']-0x1);return[_0x2d1c45,_0x20f5a1];}[_0x294e51(-0x5e,-0x19)](_0x1d2bba,_0x234519){if(_0x1d2bba<0x0||_0x1d2bba>=this[_0x32e144(0x170,0x10f)]||_0x234519>=this['rows'])return[0x0,0x0,0x0];const _0x49fc7a=Math['floor'](_0x1d2bba),_0x105ebe=Math['floor'](_0x234519);function _0x2efa7b(_0x5d5ba9,_0x2108a2){return _0x294e51(_0x2108a2,_0x5d5ba9-0x628);}function _0x32e144(_0x20cf96,_0x545ea7){return _0x294e51(_0x20cf96,_0x545ea7-0x1cf);}if(_0x49fc7a===_0x1d2bba&&_0x105ebe===_0x234519)return this[_0x32e144(0x1c1,0x1ba)][_0x234519][_0x1d2bba];const _0x6623af=_0x49fc7a+0x1,_0x1e859d=_0x105ebe+0x1,_0x4e1acc=this[_0x2efa7b(0x60f,0x693)](_0x49fc7a,_0x105ebe),_0x7c74dc=this['getUVByXY'](_0x6623af,_0x105ebe),_0x5509b7=this[_0x32e144(0x23f,0x1b6)](_0x49fc7a,_0x1e859d),_0x3fc465=this[_0x32e144(0x218,0x1b6)](_0x6623af,_0x1e859d);let _0x4dd15b=null;try{_0x4dd15b=this['_bilinearInterpolation'](_0x1d2bba-_0x49fc7a,_0x234519-_0x105ebe,_0x4e1acc,_0x7c74dc,_0x5509b7,_0x3fc465);}catch(_0xb48405){console[_0x2efa7b(0x637,0x635)](_0x1d2bba,_0x234519);}return _0x4dd15b;}[_0x294e51(-0x40,0x1f)](_0x19444c,_0x128529,_0x403541,_0x27fee6,_0x51bb81,_0x401671){const _0x43b60a=0x1-_0x19444c,_0x50f753=0x1-_0x128529,_0x31f271=_0x43b60a*_0x50f753,_0x36d2ee=_0x19444c*_0x50f753,_0x275347=_0x43b60a*_0x128529,_0xd3fffe=_0x19444c*_0x128529,_0xe2ebf4=_0x403541[0x0]*_0x31f271+_0x27fee6[0x0]*_0x36d2ee+_0x51bb81[0x0]*_0x275347+_0x401671[0x0]*_0xd3fffe,_0x31397e=_0x403541[0x1]*_0x31f271+_0x27fee6[0x1]*_0x36d2ee+_0x51bb81[0x1]*_0x275347+_0x401671[0x1]*_0xd3fffe;return this['_calcUV'](_0xe2ebf4,_0x31397e);}[_0x294e51(-0x87,-0x2f)](_0x54d374,_0x4722db){return[+_0x54d374,+_0x4722db,Math['sqrt'](_0x54d374*_0x54d374+_0x4722db*_0x4722db)];}[_0x131859(-0x165,-0xfe)](_0x15375b,_0xc32750){if(!this['isInExtent'](_0x15375b,_0xc32750))return null;const _0x13d813=this[_0x52810e(0x202,0x1b8)](_0x15375b,_0xc32750),_0x485fd4=this[_0x53dc57(-0xa5,-0xc1)](_0x13d813[0x0],_0x13d813[0x1]);function _0x52810e(_0x1c1b1b,_0x566e9f){return _0x294e51(_0x1c1b1b,_0x566e9f-0x22f);}function _0x53dc57(_0x4bcfc3,_0x65c0e){return _0x131859(_0x4bcfc3,_0x65c0e- -0x29);}return _0x485fd4;}['isInExtent'](_0x29dee9,_0x5afbf8){return _0x29dee9>=this['xmin']&&_0x29dee9<=this['xmax']&&_0x5afbf8>=this['ymin']&&_0x5afbf8<=this['ymax']?!![]:![];}[_0x131859(-0xaf,-0xc1)](){function _0x127293(_0xa044c5,_0x407818){return _0x294e51(_0xa044c5,_0x407818-0x341);}const _0x249d7b=fRandomByfloat(this[_0x127293(0x28e,0x2c0)],this[_0x127293(0x359,0x321)]);function _0x502f84(_0x224fb3,_0x519fe6){return _0x131859(_0x224fb3,_0x519fe6-0x107);}const _0x4ce64c=fRandomByfloat(this[_0x502f84(0x4f,0x40)],this['ymax']),_0x2d16fc={};return _0x2d16fc[_0x502f84(-0xbc,-0x44)]=_0x4ce64c,_0x2d16fc[_0x502f84(0xe2,0xa2)]=_0x249d7b,_0x2d16fc;}['getParticles'](){function _0x36f471(_0x44bbd8,_0x44cec8){return _0x131859(_0x44cec8,_0x44bbd8-0xee);}function _0x324f80(_0x7cc194,_0x1fdd11){return _0x294e51(_0x1fdd11,_0x7cc194-0x52);}let _0x25af54,_0x171e11,_0xb773cb;for(let _0x53beef=0x0,_0x3251df=this['particles']['length'];_0x53beef<_0x3251df;_0x53beef++){let _0x206fd8=this[_0x324f80(0x3a,0x9f)][_0x53beef];_0x206fd8['age']<=0x0&&(_0x206fd8=this['_randomParticle'](_0x206fd8));if(_0x206fd8['age']>0x0){const _0x2df18f=_0x206fd8['tlng'],_0xfa2db0=_0x206fd8['tlat'];_0xb773cb=this[_0x324f80(-0x2d,-0x6b)](_0x2df18f,_0xfa2db0),_0xb773cb?(_0x25af54=_0x2df18f+this['_calc_speedRate'][0x0]*_0xb773cb[0x0],_0x171e11=_0xfa2db0+this['_calc_speedRate'][0x1]*_0xb773cb[0x1],_0x206fd8[_0x36f471(0x89,0x60)]=_0x2df18f,_0x206fd8[_0x36f471(-0x5d,-0x28)]=_0xfa2db0,_0x206fd8['tlng']=_0x25af54,_0x206fd8['tlat']=_0x171e11,_0x206fd8[_0x36f471(0x14,0x2)]=_0xb773cb[0x2],_0x206fd8[_0x36f471(0x46,0x3e)]--):_0x206fd8['age']=0x0;}}return this['particles'];}['_randomParticle'](_0x5a18b5){function _0x4841e6(_0x1b43e7,_0x2512dc){return _0x131859(_0x1b43e7,_0x2512dc- -0x9c);}let _0x3bde02,_0x150273;for(let _0x489f06=0x0;_0x489f06<0x1e;_0x489f06++){_0x3bde02=this[_0x5da7d3(0x32b,0x2dd)](),_0x150273=this['getUVByPoint'](_0x3bde02[_0x5da7d3(0x387,0x3be)],_0x3bde02[_0x4841e6(-0x1fe,-0x1e7)]);if(_0x150273&&_0x150273[0x2]>0x0)break;}function _0x5da7d3(_0x2d3b2d,_0x1b7155){return _0x294e51(_0x1b7155,_0x2d3b2d-0x36d);}if(!_0x150273)return _0x5a18b5;const _0x1ae9f9=_0x3bde02['lng']+this['_calc_speedRate'][0x0]*_0x150273[0x0],_0x29cc6a=_0x3bde02[_0x4841e6(-0x1dd,-0x1e7)]+this['_calc_speedRate'][0x1]*_0x150273[0x1];return _0x5a18b5['lng']=_0x3bde02[_0x4841e6(-0x125,-0x101)],_0x5a18b5['lat']=_0x3bde02['lat'],_0x5a18b5['tlng']=_0x1ae9f9,_0x5a18b5[_0x5da7d3(0x34f,0x2e6)]=_0x29cc6a,_0x5a18b5[_0x4841e6(-0x1a3,-0x144)]=Math[_0x4841e6(-0x12e,-0x11f)](0xa+Math[_0x5da7d3(0x300,0x2f5)]()*this[_0x5da7d3(0x314,0x371)]),_0x5a18b5[_0x5da7d3(0x312,0x37b)]=_0x150273[0x2],_0x5a18b5;}[_0x131859(-0x8d,-0x103)](){for(const _0xe01580 in this){delete this[_0xe01580];}}}function fRandomByfloat(_0x2b8b6a,_0x442f43){return _0x2b8b6a+Math['random']()*(_0x442f43-_0x2b8b6a);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x131859(-0x8a,-0xa6)];class CanvasWindLayer extends BaseLayer{constructor(_0x57cad2={}){function _0xdbd686(_0x1c2bea,_0x581c0a){return _0x131859(_0x581c0a,_0x1c2bea-0x5d);}function _0x41bcb4(_0x109444,_0x25d62f){return _0x131859(_0x109444,_0x25d62f- -0x95);}super(_0x57cad2),this[_0x41bcb4(-0x1db,-0x153)](_0x57cad2),this['canvas']=null,_0x57cad2[_0xdbd686(-0x29,0x42)]&&_0x57cad2['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0xdbd686(-0x21,0x63))](_0x57cad2));}['_setOptionsHook'](_0x238670,_0x46c0a3){this[_0x42415c(-0xbe,-0xb0)]=0x3e8/(_0x238670['frameRate']||0xa),this['_pointerEvents']=this[_0x3d0806(-0x102,-0x173)][_0x42415c(-0x17c,-0x142)]??![],this[_0x3d0806(-0x161,-0x18f)]=_0x238670[_0x3d0806(-0x161,-0x19c)]||'#ffffff';function _0x3d0806(_0x3cee0c,_0xe3229b){return _0x294e51(_0xe3229b,_0x3cee0c- -0xd7);}this[_0x42415c(-0x1dc,-0x1b6)]=_0x238670[_0x3d0806(-0x1bc,-0x237)]||0x1,this['fixedHeight']=_0x238670['fixedHeight']??0x0,this['flipY']=_0x238670[_0x42415c(-0x119,-0x17b)]??![];function _0x42415c(_0x3a9406,_0x289f31){return _0x131859(_0x3a9406,_0x289f31- -0x52);}this[_0x3d0806(-0xf3,-0x141)]&&this['windField']['setOptions'](_0x238670);}get['layer'](){function _0x5c91f6(_0x22a08c,_0x39a389){return _0x131859(_0x22a08c,_0x39a389-0x2e6);}return this[_0x5c91f6(0x274,0x282)];}get[_0x131859(-0x15b,-0x125)](){function _0x37d609(_0x2d0ca1,_0x43f1c9){return _0x294e51(_0x43f1c9,_0x2d0ca1-0x359);}return this['_map']['scene']['canvas'][_0x37d609(0x282,0x2cb)];}get[_0x294e51(-0x62,-0x9e)](){function _0x46ed37(_0x51b3d1,_0x16abb8){return _0x131859(_0x51b3d1,_0x16abb8-0x558);}function _0x1831b1(_0x45307b,_0x5eab42){return _0x294e51(_0x45307b,_0x5eab42- -0x5b);}return this[_0x1831b1(-0x17d,-0x112)][_0x1831b1(-0x17,-0x42)]['canvas']['clientHeight'];}get[_0x294e51(-0xc0,-0x71)](){return this['_pointerEvents'];}set[_0x131859(-0x83,-0xf0)](_0x56c4b4){this[_0x2935e7(0xd8,0xd5)]=_0x56c4b4;function _0x37db7f(_0x5b9564,_0x59db1b){return _0x131859(_0x59db1b,_0x5b9564-0x19e);}function _0x2935e7(_0x1a970a,_0x584521){return _0x294e51(_0x584521,_0x1a970a-0xc1);}if(!this['canvas'])return;_0x56c4b4?this[_0x2935e7(0xdc,0x11c)][_0x2935e7(0xc9,0x84)][_0x2935e7(0x15,0x55)]='all':this['canvas']['style']['pointer-events']=_0x37db7f(0x50,0xd1);}get['particlesNumber'](){function _0x38283f(_0x4f3d8c,_0x53deee){return _0x294e51(_0x4f3d8c,_0x53deee-0x86);}return this[_0x38283f(0x5a,0x5b)]['particlesNumber'];}set['particlesNumber'](_0x1414b7){this[_0x56adbd(0x55,0x12)]['particlesNumber']=_0x1414b7,clearTimeout(this['_canrefresh']);function _0x56adbd(_0x109819,_0x3f16e6){return _0x294e51(_0x109819,_0x3f16e6-0x3d);}this['_canrefresh']=setTimeout(()=>{function _0xe59d86(_0x2b7dbb,_0x579766){return _0x56adbd(_0x2b7dbb,_0x579766-0x5f9);}this[_0xe59d86(0x581,0x5c0)]();},0x1f4);}get['speedRate'](){function _0x504798(_0x3c72aa,_0x1a5139){return _0x294e51(_0x1a5139,_0x3c72aa-0xa2);}return this['options'][_0x504798(-0x23,-0x1a)];}set['speedRate'](_0x102fea){function _0x1c3489(_0x23cfb7,_0x571810){return _0x294e51(_0x571810,_0x23cfb7-0x434);}function _0x564749(_0x483ce3,_0x9337e1){return _0x131859(_0x9337e1,_0x483ce3-0x120);}this[_0x1c3489(0x409,0x394)][_0x1c3489(0x36f,0x33d)]=_0x102fea,this[_0x1c3489(0x418,0x419)]&&(this['windField']['speedRate']=_0x102fea);}get[_0x131859(-0x79,-0xd8)](){function _0x546fff(_0x2b0717,_0x2dfa24){return _0x131859(_0x2b0717,_0x2dfa24-0x465);}return this[_0x546fff(0x344,0x3bb)]['maxAge'];}set[_0x131859(-0x87,-0xd8)](_0x393b33){function _0x41a8cd(_0x4908b9,_0x1f30b1){return _0x131859(_0x1f30b1,_0x4908b9-0x5c2);}function _0x4005da(_0x3c20a3,_0x2a77a3){return _0x131859(_0x3c20a3,_0x2a77a3-0x10c);}this[_0x41a8cd(0x518,0x52d)][_0x41a8cd(0x4ea,0x505)]=_0x393b33,this['windField']&&(this['windField']['maxAge']=_0x393b33);}get['data'](){return this['windData'];}set['data'](_0x6480a3){this['setData'](_0x6480a3);}get['rectangle'](){function _0x174b19(_0x38719e,_0x85691a){return _0x131859(_0x38719e,_0x85691a-0x2d2);}let _0x3fdd68=this['windData'][_0x174b19(0x23a,0x1d2)],_0x395a55=this['windData'][_0x174b19(0x1cf,0x233)],_0x5596c7=this[_0x4510b3(0x30,0x35)][_0x174b19(0x1c7,0x20b)],_0x471384=this['windData'][_0x4510b3(0x12,0xc)];_0x395a55>=0x167&&_0x3fdd68===0x0&&(_0x3fdd68=-0xb4,_0x395a55=0xb4);function _0x4510b3(_0x20b7fc,_0x26bd50){return _0x294e51(_0x20b7fc,_0x26bd50-0x22);}return _0x3fdd68=Math['max'](_0x3fdd68,-0xb4),_0x395a55=Math['min'](_0x395a55,0xb4),_0x5596c7=Math['max'](_0x5596c7,-0x5a),_0x471384=Math[_0x4510b3(-0xcf,-0x6b)](_0x471384,0x5a),Cesium['Rectangle'][_0x4510b3(-0x84,-0x63)](_0x3fdd68,_0x5596c7,_0x395a55,_0x471384);}[_0x131859(-0x138,-0xb8)](_0x2003cd){function _0x4fc5a0(_0x119c0b,_0xc486bf){return _0x131859(_0x119c0b,_0xc486bf-0x130);}function _0x41efc9(_0x3c131b,_0x153948){return _0x294e51(_0x3c131b,_0x153948-0x67d);}_0x2003cd?this[_0x41efc9(0x5dd,0x65b)]():(this['windData']&&(this['options']['data']=this[_0x41efc9(0x621,0x690)]),this['_removedHook']());}[_0x294e51(-0xb5,-0x50)](){function _0x4f2b99(_0x458d77,_0x1bfafb){return _0x131859(_0x458d77,_0x1bfafb-0x227);}this['options'][_0x4f2b99(0x170,0x15a)]?this['initWorker']():this['windField']=new CanvasWindField(this['options']);}['_addedHook'](){this[_0x2915b5(0x6ac,0x626)]=this[_0x2915b5(0x529,0x53e)]();const _0x315737={};_0x315737['willReadFrequently']=!![],this['canvasContext']=this[_0x2915b5(0x696,0x626)][_0x40c104(0x154,0xf6)]('2d',_0x315737);function _0x2915b5(_0x28bd36,_0xbdf0cf){return _0x131859(_0x28bd36,_0xbdf0cf-0x68a);}function _0x40c104(_0x1a9c40,_0xc39cb3){return _0x294e51(_0xc39cb3,_0x1a9c40-0x23e);}this['bindEvent'](),this[_0x2915b5(0x59c,0x5e0)][_0x40c104(0x1dd,0x152)]&&this[_0x40c104(0x239,0x270)](this['options'][_0x2915b5(0x5f4,0x5aa)]);}['_removedHook'](){this['clear']();function _0x17e612(_0x359c72,_0x294f2f){return _0x294e51(_0x359c72,_0x294f2f-0x479);}function _0x70693b(_0x32c4aa,_0x1ad0b3){return _0x294e51(_0x32c4aa,_0x1ad0b3-0x1f8);}this['unbindEvent'](),this['canvas']&&(this[_0x70693b(0x115,0x141)]['container']['removeChild'](this['canvas']),delete this[_0x70693b(0x199,0x213)]);}[_0x294e51(-0x12b,-0xcd)](){function _0x6b3878(_0x13e930,_0x116b04){return _0x131859(_0x13e930,_0x116b04-0x1b8);}const _0x4f80a4=mars3d__namespace[_0x6b3878(0xe8,0x149)][_0x445f79(-0xec,-0x117)]('canvas','mars3d-canvasWind',this[_0x6b3878(0xb0,0x82)]['container']);_0x4f80a4['style']['position']='absolute',_0x4f80a4['style']['top']='0px',_0x4f80a4['style'][_0x6b3878(0x196,0x130)]='0px',_0x4f80a4['style']['width']=this[_0x6b3878(0xbe,0x82)][_0x445f79(-0x60,-0x5c)][_0x445f79(-0x5e,-0x20)][_0x6b3878(0x8b,0x62)]+'px',_0x4f80a4[_0x445f79(-0x71,-0xcd)]['height']=this['_map']['scene'][_0x445f79(-0x5e,-0x3a)]['clientHeight']+'px',_0x4f80a4['style']['pointerEvents']=this['_pointerEvents']?'auto':'none';function _0x445f79(_0x264560,_0x1a9318){return _0x294e51(_0x1a9318,_0x264560- -0x79);}return _0x4f80a4[_0x6b3878(0x1aa,0x141)]['zIndex']=this['options'][_0x6b3878(0x135,0x14f)]??0x9,_0x4f80a4['width']=this['_map'][_0x445f79(-0x60,-0x73)]['canvas']['clientWidth'],_0x4f80a4['height']=this['_map']['scene'][_0x445f79(-0x5e,-0xe0)]['clientHeight'],_0x4f80a4;}['resize'](){function _0x43fc8a(_0x456062,_0x3b3c66){return _0x294e51(_0x456062,_0x3b3c66-0x561);}function _0x3276a1(_0x1a41f0,_0x5797f1){return _0x294e51(_0x5797f1,_0x1a41f0-0x3d);}this['canvas']&&(this['canvas']['style']['width']=this['_map']['scene']['canvas'][_0x43fc8a(0x506,0x48a)]+'px',this['canvas']['style']['height']=this['_map'][_0x3276a1(0x56,0xb5)][_0x43fc8a(0x538,0x57c)]['clientHeight']+'px',this[_0x3276a1(0x58,0x37)]['width']=this['_map']['scene']['canvas']['clientWidth'],this[_0x43fc8a(0x559,0x57c)]['height']=this['_map']['scene']['canvas']['clientHeight']);}['bindEvent'](){function _0x406316(_0x5bfcb4,_0x295bfc){return _0x131859(_0x295bfc,_0x5bfcb4-0x170);}const _0x53e3a1=this;let _0x4e6fd2=Date['now']();function _0x2bfdc5(_0x414637,_0x5c9716){return _0x294e51(_0x5c9716,_0x414637-0x239);}(function _0x2b82b7(){function _0xddfd5c(_0x4e95ad,_0x463d86){return _0x47a6(_0x463d86-0x16,_0x4e95ad);}if(_0x53e3a1['isDestroy'])return;function _0x5c1714(_0x100f9b,_0x3199ae){return _0x47a6(_0x3199ae-0x39,_0x100f9b);}_0x53e3a1['_animateFrame']=window[_0x5c1714(0x28f,0x20a)](_0x2b82b7);if(_0x53e3a1['show']&&_0x53e3a1[_0xddfd5c(0x23b,0x29d)]){const _0x5627b2=Date[_0x5c1714(0x26f,0x2d1)](),_0x593fc9=_0x5627b2-_0x4e6fd2;_0x593fc9>_0x53e3a1[_0x5c1714(0x375,0x2fd)]&&(_0x4e6fd2=_0x5627b2-_0x593fc9%_0x53e3a1['frameTime'],_0x53e3a1['update']());}}(),window[_0x406316(0xda,0x8f)](_0x406316(0x83,0x9),this['resize'][_0x2bfdc5(0x1fb,0x269)](this),![]),this['mouse_down']=![],this['mouse_move']=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace['EventType'][_0x2bfdc5(0x236,0x29e)],this[_0x2bfdc5(0x17c,0x1af)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x2bfdc5(0x1e2,0x1a7)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x406316(0x76,0x98)],this[_0x406316(0x7d,0xb9)],this)));}[_0x131859(-0x2c,-0x85)](){function _0x11fffc(_0x50b34c,_0x228c30){return _0x131859(_0x228c30,_0x50b34c-0x117);}function _0x3f5ad3(_0x4787cc,_0x2ce47e){return _0x131859(_0x4787cc,_0x2ce47e-0x6d7);}window['cancelAnimationFrame'](this[_0x3f5ad3(0x5a6,0x5e0)]),delete this['_animateFrame'],window['removeEventListener']('resize',this['resize']),this[_0x11fffc(0x6d,-0x1c)]['mouseHidden']&&(this['_map'][_0x11fffc(0xd,0x33)](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x11fffc(-0x1f,0x3c)][_0x11fffc(0xd,-0x4)](mars3d__namespace[_0x11fffc(0xbd,0x100)]['mouseDown'],this['_onMouseDownEvent'],this),this[_0x3f5ad3(0x59a,0x5a1)][_0x11fffc(0xd,-0x67)](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this['_map'][_0x11fffc(0xd,0x1d)](mars3d__namespace['EventType']['mouseMove'],this[_0x3f5ad3(0x652,0x63e)],this));}[_0x131859(-0xc9,-0x13c)](_0x32bd18){function _0x4bb6be(_0x27dbbf,_0xf88b26){return _0x131859(_0x27dbbf,_0xf88b26-0x6f9);}function _0x14a2c1(_0x42468c,_0x521963){return _0x294e51(_0x42468c,_0x521963-0x27d);}clearTimeout(this['refreshTimer']);if(!this['show']||!this['canvas'])return;this[_0x4bb6be(0x6c8,0x695)]['style']['visibility']=_0x4bb6be(0x5fa,0x5fe),this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;this[_0x1179d9(-0xfc,-0x135)]();function _0x1179d9(_0x3c6e08,_0x146a42){return _0x4bb6be(_0x146a42,_0x3c6e08- -0x700);}function _0x3dd44f(_0x2da56a,_0x4f8fa8){return _0x14a2c1(_0x2da56a,_0x4f8fa8- -0x18f);}this['canvas'][_0x1179d9(-0x7e,0x8)][_0x1179d9(-0x14c,-0x1b6)]='visible';},0xc8);}['_onMouseDownEvent'](_0x595c7a){this[_0x568d0a(0x82,0x57)]=!![];function _0x568d0a(_0x513fa5,_0x9d6447){return _0x294e51(_0x9d6447,_0x513fa5-0x132);}this['_map'][_0xce9bd9(0x5c4,0x599)](mars3d__namespace[_0x568d0a(0x157,0x160)]['mouseMove'],this['_onMouseMoveEvent'],this);function _0xce9bd9(_0x250211,_0x4ca7ea){return _0x294e51(_0x250211,_0x4ca7ea-0x624);}this[_0x568d0a(0x7b,0x93)]['on'](mars3d__namespace['EventType']['mouseMove'],this[_0xce9bd9(0x5ec,0x60a)],this);}['_onMouseMoveEvent'](_0xc80612){function _0x216b52(_0x2b21a8,_0x2f8c5d){return _0x131859(_0x2b21a8,_0x2f8c5d-0x709);}if(!this['show']||!this[_0x370509(0x51c,0x53b)])return;function _0x370509(_0xc4b46c,_0x36846b){return _0x131859(_0xc4b46c,_0x36846b-0x59f);}this['mouse_down']&&(this[_0x216b52(0x6a3,0x6a5)][_0x216b52(0x6a6,0x692)][_0x370509(0x42e,0x45a)]='hidden',this[_0x370509(0x3f5,0x471)]=!![]);}['_onMouseUpEvent'](_0x6de613){function _0x227124(_0x32181c,_0x33a92f){return _0x294e51(_0x33a92f,_0x32181c-0x2de);}if(!this['show']||!this['canvas'])return;this[_0x2bcb06(-0x95,-0x75)][_0x227124(0x253,0x276)](mars3d__namespace['EventType'][_0x227124(0x2b0,0x283)],this['_onMouseMoveEvent'],this);this[_0x227124(0x22e,0x22c)]&&this[_0x227124(0x22f,0x1ae)]&&this[_0x2bcb06(-0x46,-0x34)]();function _0x2bcb06(_0x2a0b0d,_0x4e8d46){return _0x131859(_0x2a0b0d,_0x4e8d46-0xc1);}this['canvas']['style']['visibility']=_0x227124(0x29d,0x2f6),this[_0x227124(0x22e,0x280)]=![],this['mouse_move']=![];}[_0x294e51(-0x41,-0x5)](_0x572449){this['clear'](),this['windData']=_0x572449,this[_0x113957(0x58f,0x555)]['setDate'](_0x572449);function _0x113957(_0x374a39,_0x4f5cb3){return _0x131859(_0x4f5cb3,_0x374a39-0x62a);}function _0x255815(_0x2584a7,_0x145725){return _0x294e51(_0x145725,_0x2584a7-0x438);}this[_0x255815(0x3c2,0x3ed)]();}['redraw'](){if(!this[_0x162a4c(0xe4,0xe1)])return;this['windField']['setOptions'](this['options']);function _0x162a4c(_0x4e1e0c,_0x352fc7){return _0x131859(_0x4e1e0c,_0x352fc7-0x24c);}this['update']();}['update'](){if(this['_updateIng'])return;this['_updateIng']=!![];if(this['worker'])this['windField'][_0x2ac07c(0xab,0x4d)]();else{const _0xd59abf=this[_0x2e455b(-0x92,-0x9f)]['getParticles']();this['_drawLines'](_0xd59abf);}function _0x2e455b(_0x2479da,_0x29dd76){return _0x131859(_0x29dd76,_0x2479da-0x9);}function _0x2ac07c(_0x7a5cd1,_0x1bf039){return _0x294e51(_0x1bf039,_0x7a5cd1-0x82);}this['_updateIng']=![];}[_0x294e51(-0xf4,-0xd4)](_0x3cc928){this[_0x47c0cf(0x46f,0x43c)]=_0x3cc928,this['canvasContext']['globalCompositeOperation']='destination-in',this[_0x47c0cf(0x3f4,0x45d)]['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext']['globalCompositeOperation']='lighter';function _0xeee635(_0x8aede1,_0x381879){return _0x131859(_0x381879,_0x8aede1-0xd8);}this[_0xeee635(0x67,0x95)][_0x47c0cf(0x4a6,0x467)]=0.9;const _0x2b5cc9=this['_map']['scene']['mode']!==Cesium['SceneMode']['SCENE3D'];function _0x47c0cf(_0x4da5fa,_0x2ce95d){return _0x131859(_0x4da5fa,_0x2ce95d-0x4ce);}const _0x55f574=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x103205=0x0,_0x191d8e=_0x3cc928[_0xeee635(0x1f,-0x12)];_0x103205<_0x191d8e;_0x103205++){const _0x231eea=_0x3cc928[_0x103205],_0x37569b=this['_tomap'](_0x231eea,_0x231eea[_0x47c0cf(0x443,0x469)],_0x231eea['lat'],_0x231eea[_0xeee635(-0x77,-0xec)]),_0x397727=this['_tomap'](_0x231eea,_0x231eea['tlng'],_0x231eea['tlat'],_0x231eea['talt']);if(!_0x37569b||!_0x397727)continue;if(_0x2b5cc9&&Math[_0x47c0cf(0x4df,0x45b)](_0x37569b[0x0]-_0x397727[0x0])>=_0x55f574)continue;this[_0xeee635(0x67,-0xe)][_0xeee635(-0x7c,-0x7b)](),this['canvasContext']['lineWidth']=this[_0x47c0cf(0x395,0x36a)],this[_0xeee635(0x67,0x92)][_0x47c0cf(0x47b,0x42a)]=this[_0xeee635(0x19,0x6d)][_0x47c0cf(0x393,0x388)](_0x231eea[_0xeee635(-0x2,-0x66)]),this[_0xeee635(0x67,0x45)][_0xeee635(-0x24,-0x23)](_0x37569b[0x0],_0x37569b[0x1]),this[_0xeee635(0x67,0x86)][_0xeee635(0x16,-0x6f)](_0x397727[0x0],_0x397727[0x1]),this['canvasContext'][_0x47c0cf(0x3f9,0x3ad)]();}else{this[_0xeee635(0x67,-0x1a)][_0xeee635(-0x7c,0x5)](),this['canvasContext'][_0xeee635(-0x8c,-0xe)]=this[_0x47c0cf(0x393,0x36a)],this['canvasContext'][_0x47c0cf(0x41b,0x42a)]=this[_0x47c0cf(0x40d,0x3c5)];for(let _0xfe8b7b=0x0,_0x88dfa1=_0x3cc928[_0xeee635(0x1f,0x7e)];_0xfe8b7b<_0x88dfa1;_0xfe8b7b++){const _0xbbd168=_0x3cc928[_0xfe8b7b],_0x5d3b34=this['_tomap'](_0xbbd168,_0xbbd168['lng'],_0xbbd168['lat'],_0xbbd168['alt']),_0x3ab1ad=this['_tomap'](_0xbbd168,_0xbbd168['tlng'],_0xbbd168['tlat'],_0xbbd168[_0xeee635(0x6b,0x3a)]);if(!_0x5d3b34||!_0x3ab1ad)continue;if(_0x2b5cc9&&Math['abs'](_0x5d3b34[0x0]-_0x3ab1ad[0x0])>=_0x55f574)continue;this[_0xeee635(0x67,0xb2)]['moveTo'](_0x5d3b34[0x0],_0x5d3b34[0x1]),this['canvasContext'][_0xeee635(0x16,-0x4d)](_0x3ab1ad[0x0],_0x3ab1ad[0x1]);}this['canvasContext']['stroke']();}}[_0x131859(-0x1df,-0x158)](_0x58d79b,_0x45729c,_0xefb768,_0x3892a3){const _0x1adcda=Cesium[_0x535df5(0x58f,0x596)]['fromDegrees'](_0x45729c,_0xefb768,_0x3892a3??this[_0x45ab06(0x3f3,0x478)]),_0x25b178=this[_0x535df5(0x5b0,0x591)][_0x45ab06(0x49e,0x4e9)];function _0x535df5(_0x182449,_0x33cf9b){return _0x131859(_0x182449,_0x33cf9b-0x6c7);}if(_0x25b178['mode']===Cesium['SceneMode']['SCENE3D']){const _0x1701e5=new Cesium['EllipsoidalOccluder'](_0x25b178[_0x45ab06(0x464,0x494)]['ellipsoid'],_0x25b178[_0x45ab06(0x44f,0x498)]['positionWC']),_0x3e85a4=_0x1701e5[_0x45ab06(0x39a,0x426)](_0x1adcda);if(!_0x3e85a4)return _0x58d79b[_0x45ab06(0x45c,0x4a9)]=0x0,null;}function _0x45ab06(_0x47781c,_0x20da30){return _0x294e51(_0x20da30,_0x47781c-0x485);}const _0x11741d=mars3d__namespace[_0x535df5(0x60a,0x590)]['toWindowCoordinates'](this[_0x45ab06(0x3ce,0x388)]['scene'],_0x1adcda);return _0x11741d?[_0x11741d['x'],_0x11741d['y']]:null;}['clear'](){function _0x3f4ef4(_0xb1836f,_0xea095){return _0x294e51(_0xb1836f,_0xea095-0x1b9);}this[_0x3f4ef4(0x21a,0x19d)]['clear'](),delete this['windData'];}[_0x131859(-0x168,-0x123)](){this[_0xbf5237(-0x5c,0x31)]=new Worker(this[_0x220660(0x405,0x489)][_0x220660(0x3e2,0x39c)]);function _0x220660(_0x421370,_0x6e18f5){return _0x294e51(_0x6e18f5,_0x421370-0x430);}function _0xbf5237(_0xb76675,_0x3b6eaf){return _0x131859(_0xb76675,_0x3b6eaf-0xfe);}this[_0xbf5237(-0x7,0x31)]['onmessage']=_0x325f2f=>{this['_drawLines'](_0x325f2f[_0x3ce9c4(0x5b1,0x5b1)][_0x3ce9c4(0x5fa,0x5c8)]);function _0x25d7e8(_0x362e61,_0x50cf44){return _0xbf5237(_0x362e61,_0x50cf44-0x2ed);}function _0x3ce9c4(_0x35cba0,_0x58be59){return _0x220660(_0x35cba0-0x1e2,_0x58be59);}this[_0x3ce9c4(0x556,0x515)]=![];},this['windField']={'init':_0x13766d=>{const _0x5809fc={};function _0x212c4c(_0x41fef2,_0x576b2f){return _0x220660(_0x576b2f- -0x471,_0x41fef2);}_0x5809fc['type']='init',_0x5809fc[_0x212c4c(-0xae,-0x6c)]=_0x13766d;function _0x3fd8e6(_0x12a1ad,_0x464f0a){return _0x220660(_0x12a1ad-0xa0,_0x464f0a);}this[_0x212c4c(-0xbd,-0x8f)]['postMessage'](_0x5809fc);},'setOptions':_0x54b782=>{const _0x2656b6={};function _0x525eff(_0x17bbf7,_0x11de98){return _0x220660(_0x11de98- -0x30e,_0x17bbf7);}_0x2656b6['type']='setOptions',_0x2656b6['options']=_0x54b782,this['worker'][_0x525eff(0xc1,0x115)](_0x2656b6);},'setDate':_0x391c74=>{function _0x62d081(_0x4ff132,_0x4ad8d4){return _0x220660(_0x4ff132- -0x2ec,_0x4ad8d4);}const _0x50aa52={};_0x50aa52['type']='setDate',_0x50aa52[_0x62d081(0xe3,0x10a)]=_0x391c74,this['worker']['postMessage'](_0x50aa52);},'update':()=>{if(this['_updateIng2'])return;this[_0x26ebb3(0x2e1,0x301)]=!![];function _0x3442d5(_0x16870c,_0x551dfa){return _0x220660(_0x551dfa- -0x282,_0x16870c);}const _0x238697={};_0x238697[_0x26ebb3(0x31a,0x33b)]='update';function _0x26ebb3(_0x127f8d,_0xa485a5){return _0x220660(_0xa485a5- -0x73,_0x127f8d);}this['worker'][_0x3442d5(0x20d,0x1a1)](_0x238697);},'clear':()=>{const _0x48fc16={};function _0x290709(_0x462644,_0x9684c8){return _0x220660(_0x9684c8- -0x4ed,_0x462644);}_0x48fc16[_0x290709(-0xe7,-0x13f)]='clear';function _0x43a8da(_0x2ff216,_0x26c1af){return _0xbf5237(_0x26c1af,_0x2ff216-0x98);}this[_0x43a8da(0xc9,0x99)][_0x43a8da(0x10a,0x133)](_0x48fc16);}},this['windField'][_0xbf5237(0xa6,0x2d)](this[_0xbf5237(0x93,0x54)]);}}mars3d__namespace[_0x294e51(-0x3a,-0xba)]['register']('canvasWind',CanvasWindLayer);function _0x294e51(_0x571418,_0x421f85){return _0x47a6(_0x421f85- -0x2a3,_0x571418);}function _0x47a6(_0x475453,_0x1ac7c4){const _0x4db16c=_0x4db1();return _0x47a6=function(_0x47a6b7,_0x29abb4){_0x47a6b7=_0x47a6b7-0x1b6;let _0x5564ef=_0x4db16c[_0x47a6b7];return _0x5564ef;},_0x47a6(_0x475453,_0x1ac7c4);}mars3d__namespace[_0x294e51(-0xbd,-0x98)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace[_0x294e51(-0xc3,-0xdc)]=WindUtil,exports[_0x294e51(-0xb5,-0x5f)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x492feb={};_0x492feb['value']=!![],Object[_0x294e51(-0x1d,-0x53)](exports,'__esModule',_0x492feb);
}));
