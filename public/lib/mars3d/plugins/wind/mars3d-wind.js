/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.5
 * 编译日期：2025-03-31 21:16
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x499da6,_0x5d69a8){function _0x24b5ba(_0x58ad9f,_0x24b580){return _0x4240(_0x58ad9f- -0x47,_0x24b580);}const _0x58673f=_0x499da6();function _0x4a9f78(_0x3c0a6a,_0x1007fb){return _0x4240(_0x3c0a6a- -0x379,_0x1007fb);}while(!![]){try{const _0x2f0f7f=-parseInt(_0x24b5ba(0x20e,0x1b8))/0x1*(parseInt(_0x24b5ba(0x1ce,0x161))/0x2)+-parseInt(_0x24b5ba(0x228,0x2a2))/0x3*(parseInt(_0x24b5ba(0x1d9,0x1ac))/0x4)+-parseInt(_0x4a9f78(-0x1ca,-0x24a))/0x5*(-parseInt(_0x24b5ba(0x25b,0x2b0))/0x6)+parseInt(_0x24b5ba(0x25a,0x296))/0x7*(parseInt(_0x24b5ba(0x1ac,0x127))/0x8)+parseInt(_0x24b5ba(0x150,0xd8))/0x9+parseInt(_0x4a9f78(-0x1c2,-0x168))/0xa+-parseInt(_0x24b5ba(0x1cb,0x181))/0xb*(parseInt(_0x4a9f78(-0x19d,-0x15b))/0xc);if(_0x2f0f7f===_0x5d69a8)break;else _0x58673f['push'](_0x58673f['shift']());}catch(_0x40a38f){_0x58673f['push'](_0x58673f['shift']());}}}(_0x363f,0x5c8dd));function _interopNamespace(_0x55fb17){if(_0x55fb17&&_0x55fb17[_0x3800e6(0x49d,0x4c7)])return _0x55fb17;function _0x4bbef6(_0x33e239,_0x4ffd39){return _0x4240(_0x4ffd39-0x297,_0x33e239);}var _0x257b4b=Object[_0x4bbef6(0x4f9,0x47f)](null);_0x55fb17&&Object['keys'](_0x55fb17)['forEach'](function(_0x354380){function _0x55dd69(_0x5cbd81,_0x26d8e5){return _0x4bbef6(_0x5cbd81,_0x26d8e5- -0x64d);}function _0x4ee47a(_0x4cf710,_0x1c4a89){return _0x3800e6(_0x1c4a89,_0x4cf710-0xe8);}if(_0x354380!=='default'){var _0x503b61=Object[_0x55dd69(-0x10a,-0x193)](_0x55fb17,_0x354380);Object['defineProperty'](_0x257b4b,_0x354380,_0x503b61[_0x4ee47a(0x609,0x60e)]?_0x503b61:{'enumerable':!![],'get':function(){return _0x55fb17[_0x354380];}});}});function _0x3800e6(_0x2ee1bf,_0x5796f2){return _0x4240(_0x5796f2-0x2ec,_0x2ee1bf);}return _0x257b4b['default']=_0x55fb17,_0x257b4b;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x1c28b6,_0x25e236){const _0x3b7f9f=_0x1c28b6*Math['cos'](Cesium$2['Math']['toRadians'](_0x25e236));return _0x3b7f9f;}function getV(_0x2f931c,_0x4a5b69){function _0x240934(_0x4f8858,_0xc79e9f){return _0x4240(_0xc79e9f- -0x8f,_0x4f8858);}const _0x14af49=_0x2f931c*Math['sin'](Cesium$2['Math'][_0x240934(0x261,0x210)](_0x4a5b69));return _0x14af49;}function getSpeed(_0x368459,_0x2ec847){const _0x395eee=Math['sqrt'](Math['pow'](_0x368459,0x2)+Math['pow'](_0x2ec847,0x2));return _0x395eee;}function _0x363f(){const _0x3aef53=['BaseLayer','updateWindData','normal','lonRange','particlesTextureSize','mouseUp','SCENE3D','prototype','call','mouseHidden','zIndex','_calc_speedRate','getDirection','quietPeriod','north','709515sFhtDg','drawingBufferWidth','getSpeed','Compute','PointTrans','commandToExecute','CanvasWindLayer','cols','5460200rhIxVl','uniformMap','_animateFrame','camera','dropRateBump','wind','getParticles','owner','initFrameRate','_canvasParticles','minificationFilter','Cesium','show','initWorker','LINEAR','scene','fill','values','_randomParticle','nextParticlesPosition','toDegrees','setOptions','pixelDatatype','moveTo','_onMouseUpEvent','vertexArray','_setOptionsHook','viewerParameters','hasOwnProperty','updateViewerParameters','pointerEvents','attributeLocations','particlesTextures','update','getUVByXY','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a','__esModule','2434944QGdoHv','grid','FLOAT','isInExtent','context','atan2','redraw','flipY','canvas','processWindData','visibility','vertexShaderSource','create','mouseMove','CanvasWindField','_colorRamp','_maxAge','container','pixelSize','pickEllipsoid','updateOptions','framebuffer','beginPath','507536NsimlV','lineWidth','fragmentShaderSource','windData','windField','vdata','color','width','getRandomLatLng','clearFramebuffers','layer','fromGeometry','style','framebuffers','globe','DEPTH_COMPONENT','log','lng','top','push','frameRateAdjustment','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','type','_updateIng2','Cartesian2','clientWidth','fromCache','speedRate','now','speed','speedFactor','22HYbqlK','init','height','2QEbUzz','updatePosition','getUpdatePositionShader','length','addEventListener','segments','_onMouseMoveEvent','currentParticlesPosition','clear','slice','Unknown\x20command\x20type','16gAIfJS','commandList','colors','getOwnPropertyDescriptor','autoClear','_tomap','clientHeight','bounds','forEach','getSegmentDrawFragmentShader','canvasWidth','object','interpolated','getCalculateSpeedShader','min','windTextures','stringify','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','removeEventListener','isPointVisible','defineProperty','get','max','MIN_VALUE','persists','register','worker','tlat','_speedRate','data','mouse_down','_onMapWhellEvent','_removedHook','east','rectangle','setDate','visible','EventType','changed','pass','_pointerEvents','depthMask','frameRate','frameTime','particles','particlesSpeed','getUVByPoint','postMessage','unbindEvent','mouseDown','componentsPerAttribute','lat','floor','123089eFjbsL','createComputingPrimitives','getPrimitives','_showHook','getDefaultRenderState','rows','south','wrapS','Math','textures','maxAge','bind','primitiveType','ymin','primitives','sqrt','resize','execute','wrapT','applyViewerParameters','mars3d-canvasWind','postProcessingPosition','xmax','flatMap','_calcUV','rawRenderState','10317RMpidk','_createCanvas','latitude','_onMouseDownEvent','SRC_ALPHA','umin','computing','pixelFormat','TRIANGLES','absolute','xmin','mouse_move','depthTest','hidden','fixedHeight','keys','wheel','sceneMode','sources','commandType','STATIC_DRAW','west','abs','createWindTextures','renderState','colorTable','position','lastFramesPerSecond','rendering','_map','array','age','createRawRenderState','preExecute','outputTexture','setGeometry','particleSystem','globalCompositeOperation','_updateIng','alt','WindUtil','shaderProgram','ymax','mode','SceneMode','OPAQUE','tlng','willReadFrequently','toRadians','viewport','21UlFzPr','6qTZJho','_addedHook','LayerUtil','destroy','pointer-events','vmax','dynamic','globalAlpha','lighter','ONE_MINUS_SRC_ALPHA','391689mOiAEO','segmentsDepth','canvasContext','isDynamic','onParticlesTextureSizeChange','random','options','geometry','particlesNumber'];_0x363f=function(){return _0x3aef53;};return _0x363f();}function getDirection(_0x47508c,_0x3e3ee9){let _0xaf444f=Cesium$2['Math'][_0x318f8c(0x52d,0x54a)](Math[_0x318f8c(0x584,0x560)](_0x3e3ee9,_0x47508c));_0xaf444f+=_0xaf444f<0x0?0x168:0x0;function _0xc494b1(_0x17459b,_0x64ced3){return _0x4240(_0x64ced3- -0x1f2,_0x17459b);}function _0x318f8c(_0x5a54f3,_0x294a7e){return _0x4240(_0x294a7e-0x37f,_0x5a54f3);}return _0xaf444f;}const _0x5ab607={};_0x5ab607['__proto__']=null,_0x5ab607['getU']=getU,_0x5ab607['getV']=getV,_0x5ab607[_0x22767a(0xa0,0x6b)]=getSpeed,_0x5ab607[_0xc54fe5(0x48b,0x437)]=getDirection;var WindUtil=_0x5ab607,updatePositionShader=_0x22767a(0xee,0x94),calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader=_0xc54fe5(0x4e7,0x46b),renderParticlesFragmentShader=_0x22767a(0x67,0xeb),renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0xc54fe5(0x50c,0x540)](){const _0x27eb67={};function _0x512e8f(_0x3bbe3a,_0x3149ab){return _0xc54fe5(_0x3bbe3a- -0x3c8,_0x3149ab);}return _0x27eb67[_0x512e8f(0x198,0x1d1)]=[calculateSpeedShader],new ShaderSource$1(_0x27eb67);}static[_0xc54fe5(0x4f6,0x511)](){const _0x5eebe6={};function _0x51c6ae(_0xfa2b23,_0x5539ec){return _0xc54fe5(_0xfa2b23- -0x41b,_0x5539ec);}return _0x5eebe6[_0x51c6ae(0x145,0xeb)]=[updatePositionShader],new ShaderSource$1(_0x5eebe6);}static['getSegmentDrawVertexShader'](){const _0x5a6324={};return _0x5a6324['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x5a6324);}static[_0x22767a(0x152,0xe3)](){const _0xf20c8d={};return _0xf20c8d['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0xf20c8d);}static['getPostProcessingPositionShader'](){const _0x375799={};return _0x375799['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x375799);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0xc54fe5(0x4a1,0x430)];function _0xc54fe5(_0x504977,_0x5bfb1e){return _0x4240(_0x504977-0x2df,_0x5bfb1e);}class CustomPrimitive{constructor(_0x5004e8){this['commandType']=_0x5004e8[_0x4c8ffe(0x141,0x102)],this[_0x4c8ffe(0x5d,0x99)]=_0x5004e8['geometry'],this['attributeLocations']=_0x5004e8['attributeLocations'];function _0x2c5b48(_0x32d938,_0x3f72cb){return _0xc54fe5(_0x3f72cb- -0x56f,_0x32d938);}this['primitiveType']=_0x5004e8[_0x2c5b48(0x11,-0x2f)],this[_0x4c8ffe(0x77,0x3b)]=_0x5004e8['uniformMap']||{},this['vertexShaderSource']=_0x5004e8['vertexShaderSource'],this[_0x4c8ffe(0xb4,0x10a)]=_0x5004e8['fragmentShaderSource'],this[_0x2c5b48(-0x90,-0x22)]=_0x5004e8['rawRenderState'];function _0x4c8ffe(_0x50c8d6,_0x534639){return _0x22767a(_0x534639,_0x50c8d6-0x5);}this['framebuffer']=_0x5004e8['framebuffer'],this[_0x2c5b48(0x34,0x1)]=_0x5004e8['outputTexture'],this[_0x4c8ffe(0xe3,0xfe)]=_0x5004e8[_0x2c5b48(-0x66,-0x6c)]??![],this['preExecute']=_0x5004e8[_0x2c5b48(-0x20,0x0)],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this['isDynamic']=_0x5004e8['isDynamic']??(()=>!![]),this[_0x2c5b48(0x10,-0x6c)]&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1[_0x4c8ffe(0x15b,0x126)]}));}['createCommand'](_0x1c150f){function _0x499ffb(_0x37c298,_0x5d79a8){return _0x22767a(_0x37c298,_0x5d79a8-0xe2);}function _0x156b69(_0x36f582,_0x563a37){return _0x22767a(_0x563a37,_0x36f582-0x1d4);}if(this[_0x156b69(0x310,0x361)]==='Draw'){const _0x2299fd={};_0x2299fd[_0x156b69(0x26e,0x2c3)]=_0x1c150f,_0x2299fd['geometry']=this['geometry'],_0x2299fd['attributeLocations']=this['attributeLocations'],_0x2299fd['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x7da689=VertexArray$1[_0x156b69(0x28c,0x226)](_0x2299fd),_0x192bae={};_0x192bae[_0x499ffb(0xf6,0x17c)]=_0x1c150f,_0x192bae[_0x156b69(0x275,0x2c3)]=this[_0x499ffb(0x1af,0x183)],_0x192bae['fragmentShaderSource']=this['fragmentShaderSource'],_0x192bae['attributeLocations']=this[_0x156b69(0x264,0x242)];const _0x35bb78=ShaderProgram['fromCache'](_0x192bae),_0x4865af=RenderState[_0x499ffb(0x14a,0x1a9)](this['rawRenderState']),_0x49b66b={};return _0x49b66b[_0x499ffb(0x185,0x15a)]=this,_0x49b66b[_0x156b69(0x25e,0x20e)]=_0x7da689,_0x49b66b['primitiveType']=this['primitiveType'],_0x49b66b['modelMatrix']=Matrix4['IDENTITY'],_0x49b66b[_0x156b69(0x315,0x2bd)]=_0x4865af,_0x49b66b['shaderProgram']=_0x35bb78,_0x49b66b['framebuffer']=this[_0x499ffb(0x19f,0x18d)],_0x49b66b['uniformMap']=this[_0x156b69(0x246,0x1d9)],_0x49b66b[_0x499ffb(0x1ab,0x1e3)]=Pass$1['OPAQUE'],new DrawCommand(_0x49b66b);}else{if(this['commandType']==='Compute'){const _0x1d2250={};return _0x1d2250['owner']=this,_0x1d2250['fragmentShaderSource']=this['fragmentShaderSource'],_0x1d2250['uniformMap']=this['uniformMap'],_0x1d2250[_0x156b69(0x31f,0x312)]=this['outputTexture'],_0x1d2250[_0x499ffb(0x1c7,0x1d4)]=!![],new ComputeCommand(_0x1d2250);}else throw new Error(_0x499ffb(0x229,0x1bb));}}[_0x22767a(0x1c3,0x14c)](_0x8d658d,_0x30f23a){function _0x44ae3e(_0x248009,_0x391b7d){return _0x22767a(_0x391b7d,_0x248009-0x25d);}function _0x1838c7(_0x54b15c,_0x1865a6){return _0x22767a(_0x54b15c,_0x1865a6-0x1db);}this['geometry']=_0x30f23a,defined(this['commandToExecute'])&&(this['commandToExecute'][_0x1838c7(0x206,0x265)]=VertexArray$1['fromGeometry']({'context':_0x8d658d,'geometry':this[_0x44ae3e(0x2b5,0x2be)],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x50d385){function _0x2a9c67(_0x1a60aa,_0x4210d9){return _0x22767a(_0x4210d9,_0x1a60aa- -0x154);}if(!this[_0xd627c7(0x53c,0x4c4)]())return;if(!this['show']||!defined(_0x50d385))return;function _0xd627c7(_0x465ab5,_0x12a6f7){return _0xc54fe5(_0x465ab5-0xc3,_0x12a6f7);}!defined(this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0x50d385['context']));defined(this[_0xd627c7(0x632,0x618)])&&this['preExecute']();if(!_0x50d385[_0x2a9c67(-0x79,-0xb1)]){console['warn']('frameState.commandList\x20is\x20undefined');return;}defined(this['clearCommand'])&&_0x50d385['commandList'][_0x2a9c67(-0x94,-0x59)](this['clearCommand']),defined(this['commandToExecute'])&&_0x50d385[_0x2a9c67(-0x79,-0x7a)]['push'](this[_0x2a9c67(-0xe6,-0x9d)]);}['isDestroyed'](){return![];}[_0xc54fe5(0x46f,0x495)](){if(defined(this['commandToExecute'])){var _0x15fe9d;(_0x15fe9d=this['commandToExecute']['shaderProgram'])===null||_0x15fe9d===void 0x0||_0x15fe9d[_0x2c97ae(0x1e,0x1c)](),this['commandToExecute'][_0x1182d8(-0x9b,-0x95)]=undefined;}function _0x1182d8(_0x20ca48,_0x3ddf6d){return _0xc54fe5(_0x20ca48- -0x612,_0x3ddf6d);}function _0x2c97ae(_0x99362e,_0x20a68a){return _0xc54fe5(_0x99362e- -0x451,_0x20a68a);}return destroyObject(this);}}function deepMerge(_0x151717,_0x2af848){if(!_0x151717)return _0x2af848;if(!_0x2af848)return _0x151717;const _0x596d32={..._0x2af848},_0x91398b=_0x596d32;function _0x4434bd(_0x3f40f3,_0x1199aa){return _0xc54fe5(_0x3f40f3- -0x2aa,_0x1199aa);}for(const _0x2174ce in _0x151717){if(Object[_0x4434bd(0x1dc,0x1ac)][_0x43de2a(-0x113,-0xd7)][_0x43de2a(-0xa6,-0x102)](_0x151717,_0x2174ce)){const _0x4d6b96=_0x151717[_0x2174ce],_0x439360=_0x2af848[_0x2174ce];if(Array['isArray'](_0x4d6b96)){_0x91398b[_0x2174ce]=_0x4d6b96[_0x43de2a(-0x45,-0x8c)]();continue;}if(_0x4d6b96&&typeof _0x4d6b96===_0x43de2a(-0x45,-0x7f)){_0x91398b[_0x2174ce]=deepMerge(_0x4d6b96,_0x439360||{});continue;}_0x4d6b96!==undefined&&(_0x91398b[_0x2174ce]=_0x4d6b96);}}function _0x43de2a(_0x115958,_0x320cdb){return _0xc54fe5(_0x320cdb- -0x589,_0x115958);}return _0x91398b;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x250732,_0x157c52,_0x411fb9,_0x2fbf24,_0x4656a0){this['context']=_0x250732,this[_0x28c52e(-0x1a8,-0x1cf)]=_0x411fb9,this[_0x28c52e(-0x21a,-0x19a)]=_0x2fbf24,this['windData']=_0x157c52;function _0x36e12a(_0x40ad29,_0x54d9fc){return _0x22767a(_0x54d9fc,_0x40ad29- -0x34);}function _0x28c52e(_0x56825a,_0x4ef90a){return _0x22767a(_0x56825a,_0x4ef90a- -0x226);}this[_0x36e12a(0xd0,0x105)]=0x3c,this[_0x36e12a(0x8d,0xd2)]=0x1;const _0xdd4aaf={};_0xdd4aaf[_0x36e12a(0x4c,-0x2f)]=_0x4656a0,_0xdd4aaf['samplingWindow']=0x1,_0xdd4aaf[_0x28c52e(-0x164,-0x1bf)]=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0xdd4aaf),this['initFrameRate'](),this[_0x36e12a(0x10c,0xb0)](),this['createParticlesTextures'](),this[_0x28c52e(-0x178,-0x116)]();}[_0xc54fe5(0x49e,0x4cd)](){function _0x4af300(_0x40caa7,_0xf4e48c){return _0x22767a(_0x40caa7,_0xf4e48c-0x3d4);}const _0x48bb6a=()=>{function _0x54942e(_0x2e1eb2,_0x5cb339){return _0x4240(_0x5cb339- -0xdf,_0x2e1eb2);}function _0x330ab8(_0x390490,_0x9a87c8){return _0x4240(_0x9a87c8- -0x1f2,_0x390490);}this['frameRateMonitor'][_0x54942e(0x21b,0x1ab)]>0x14&&(this[_0x330ab8(-0xb,0x58)]=this['frameRateMonitor'][_0x54942e(0x1ac,0x1ab)],this[_0x330ab8(-0x32,0x15)]=0x3c/Math[_0x330ab8(0xae,0x44)](this[_0x330ab8(0x1b,0x58)],0x1));};_0x48bb6a();const _0x444c94=setInterval(_0x48bb6a,0x3e8),_0x1d563b=this[_0x4af300(0x480,0x41e)][_0x78546a(0x54f,0x531)](this);function _0x78546a(_0x24e4c4,_0x401d03){return _0x22767a(_0x24e4c4,_0x401d03-0x417);}this['destroy']=()=>{clearInterval(_0x444c94),_0x1d563b();};}[_0xc54fe5(0x565,0x5c3)](){const _0xe851cd={};_0xe851cd[_0x52bba6(0x1e4,0x214)]=TextureMinificationFilter$1['LINEAR'];function _0x2e067a(_0x237ffb,_0x1a6f1c){return _0xc54fe5(_0x1a6f1c- -0x459,_0x237ffb);}_0xe851cd['magnificationFilter']=TextureMagnificationFilter$1['LINEAR'];function _0x52bba6(_0x37d7e9,_0x422cb7){return _0xc54fe5(_0x37d7e9- -0x2bc,_0x422cb7);}const _0x28d41c={'context':this['context'],'width':this['windData']['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0x2e067a(-0x2f,0x23)][_0x2e067a(0x8a,0x69)]??![],'sampler':new Sampler$1(_0xe851cd)};this[_0x2e067a(0xd2,0xb5)]={'U':new Texture$1({..._0x28d41c,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x2e067a(0xda,0x113)])}}),'V':new Texture$1({..._0x28d41c,'source':{'arrayBufferView':new Float32Array(this['windData']['v'][_0x2e067a(0x10d,0x113)])}})};}['createParticlesTextures'](){function _0x4474cc(_0x1f26f1,_0x457ce2){return _0x22767a(_0x1f26f1,_0x457ce2-0xbf);}const _0x8ee9a0={};function _0x39b7e8(_0xc824a2,_0x1448bf){return _0xc54fe5(_0xc824a2- -0x38e,_0x1448bf);}_0x8ee9a0[_0x4474cc(0xb1,0x13a)]=TextureMinificationFilter$1['NEAREST'],_0x8ee9a0['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];const _0x57f987={'context':this[_0x4474cc(0x12e,0x159)],'width':this['options'][_0x4474cc(0x121,0x11d)],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x39b7e8(0x12f,0x1a8)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x39b7e8(0xee,0xcf)]['particlesTextureSize']*this[_0x39b7e8(0xee,0x9a)]['particlesTextureSize']*0x4)[_0x4474cc(0xd5,0x140)](0x0)},'sampler':new Sampler$1(_0x8ee9a0)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x57f987),'currentParticlesPosition':new Texture$1(_0x57f987),'nextParticlesPosition':new Texture$1(_0x57f987),'postProcessingPosition':new Texture$1(_0x57f987),'particlesSpeed':new Texture$1(_0x57f987)};}['destroyParticlesTextures'](){function _0x4452f1(_0x3e4343,_0x2a18e4){return _0xc54fe5(_0x2a18e4- -0x645,_0x3e4343);}Object['values'](this['particlesTextures'])[_0x4452f1(-0x13a,-0x13e)](_0xac9860=>_0xac9860['destroy']());}['createComputingPrimitives'](){function _0x9cfe84(_0x2b3814,_0x579041){return _0x22767a(_0x2b3814,_0x579041-0x362);}function _0x357b57(_0x39d558,_0x332543){return _0xc54fe5(_0x332543- -0x59f,_0x39d558);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this[_0x9cfe84(0x46b,0x44b)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u']['min'],this['windData']['u'][_0x9cfe84(0x4b9,0x452)]),'vRange':()=>new Cartesian2$1(this[_0x9cfe84(0x499,0x412)]['v']['min'],this[_0x357b57(-0x4b,-0xca)]['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData'][_0x357b57(-0xa9,-0xb0)]['min'],this[_0x9cfe84(0x3d2,0x412)][_0x9cfe84(0x409,0x42c)]['max']),'currentParticlesPosition':()=>this['particlesTextures'][_0x9cfe84(0x41f,0x438)],'speedScaleFactor':()=>{function _0xe8e02(_0xc2a9ca,_0xd531e0){return _0x9cfe84(_0xd531e0,_0xc2a9ca-0x62);}function _0x4cc960(_0x598c66,_0x1ec504){return _0x357b57(_0x598c66,_0x1ec504-0x5a6);}return(this[_0xe8e02(0x450,0x461)][_0xe8e02(0x46c,0x49e)]+0x32)*this['options'][_0xe8e02(0x48f,0x4c2)];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this[_0x357b57(-0x6c,-0xca)]['width'],this['windData']['height']),'minimum':()=>new Cartesian2$1(this[_0x9cfe84(0x3cb,0x412)][_0x357b57(-0xf5,-0x99)]['west'],this[_0x357b57(-0x11d,-0xca)]['bounds'][_0x357b57(-0x8f,-0x65)]),'maximum':()=>new Cartesian2$1(this[_0x357b57(-0xa1,-0xca)][_0x357b57(-0x112,-0x99)][_0x357b57(-0xb0,-0x7f)],this[_0x9cfe84(0x492,0x412)]['bounds']['north'])},'fragmentShaderSource':ShaderManager[_0x9cfe84(0x49b,0x449)](),'outputTexture':this[_0x357b57(-0x7e,-0xe9)]['particlesSpeed'],'preExecute':()=>{const _0x92cdab=this[_0x4e076a(0x4d2,0x54f)]['previousParticlesPosition'];this[_0x4e076a(0x4ed,0x54f)]['previousParticlesPosition']=this[_0x4e076a(0x554,0x54f)]['currentParticlesPosition'],this[_0x4c14da(0x2b1,0x2ea)]['currentParticlesPosition']=this['particlesTextures']['postProcessingPosition'];function _0x4c14da(_0x3a940a,_0x1b938b){return _0x9cfe84(_0x1b938b,_0x3a940a- -0x142);}function _0x4e076a(_0x3431d5,_0x370168){return _0x9cfe84(_0x3431d5,_0x370168-0x15c);}this[_0x4c14da(0x2b1,0x2a1)]['postProcessingPosition']=_0x92cdab,this[_0x4e076a(0x5ab,0x5db)]['calculateSpeed']['commandToExecute']&&(this['primitives']['calculateSpeed']['commandToExecute'][_0x4c14da(0x36b,0x36f)]=this[_0x4c14da(0x2b1,0x277)]['particlesSpeed']);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0x357b57(-0xd0,-0xe9)]['currentParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed']},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this[_0x9cfe84(0x3ce,0x3f3)]['nextParticlesPosition'],'preExecute':()=>{function _0x3708cc(_0x41bbdc,_0x3a8fed){return _0x9cfe84(_0x41bbdc,_0x3a8fed- -0x3cc);}function _0x1c6933(_0x29970b,_0x1c442f){return _0x9cfe84(_0x29970b,_0x1c442f-0xb1);}this['primitives']['updatePosition'][_0x3708cc(-0x66,0x4)]&&(this[_0x3708cc(0x53,0xb3)]['updatePosition'][_0x3708cc(0x42,0x4)]['outputTexture']=this['particlesTextures']['nextParticlesPosition']);},'isDynamic':()=>this['options'][_0x357b57(-0xf9,-0x12d)]}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x9cfe84(0x390,0x3ce),'uniformMap':{'nextParticlesPosition':()=>this['particlesTextures'][_0x9cfe84(0x44b,0x3e6)],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this[_0x357b57(-0x15b,-0xee)]['latRange'],'dataLonRange':()=>new Cartesian2$1(this[_0x357b57(-0x8f,-0xca)]['bounds']['west'],this['windData'][_0x357b57(-0x122,-0x99)][_0x357b57(-0x49,-0x7f)]),'dataLatRange':()=>new Cartesian2$1(this[_0x9cfe84(0x41c,0x412)][_0x9cfe84(0x3cb,0x443)][_0x357b57(-0x6c,-0x65)],this['windData'][_0x357b57(-0xf9,-0x99)][_0x9cfe84(0x3dc,0x3ca)]),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options'][_0x357b57(-0x141,-0x105)],'useViewerBounds':()=>this[_0x357b57(-0x150,-0x123)]['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x559b6d(_0x9fe41a,_0x528b40){return _0x9cfe84(_0x9fe41a,_0x528b40- -0x18a);}function _0x233762(_0x17f26b,_0x3e7324){return _0x9cfe84(_0x3e7324,_0x17f26b-0x5d);}this['primitives'][_0x559b6d(0x310,0x2fc)]['commandToExecute']&&(this[_0x559b6d(0x2f8,0x2f5)]['postProcessingPosition']['commandToExecute']['outputTexture']=this['particlesTextures'][_0x559b6d(0x327,0x2fc)]);},'isDynamic':()=>this['options']['dynamic']})};}['reCreateWindTextures'](){this[_0x41d7b5(0x3a7,0x35e)]['U'][_0x756458(-0x22f,-0x21f)]();function _0x41d7b5(_0x9c0c83,_0x3bfc8f){return _0xc54fe5(_0x9c0c83- -0x167,_0x3bfc8f);}this[_0x41d7b5(0x3a7,0x35a)]['V']['destroy']();function _0x756458(_0x2612eb,_0x40335f){return _0xc54fe5(_0x2612eb- -0x69e,_0x40335f);}this[_0x756458(-0x139,-0xf2)]();}['updateWindData'](_0x107f4b){this['windData']=_0x107f4b,this['reCreateWindTextures']();}[_0xc54fe5(0x4cf,0x46e)](_0x334fe0){const _0x1242a2=_0x334fe0['flipY']!==undefined&&_0x334fe0['flipY']!==this['options'][_0x9f187a(0x24e,0x239)];function _0x9f187a(_0x3bb367,_0x499fd8){return _0x22767a(_0x499fd8,_0x3bb367-0x1b1);}this['options']=deepMerge(_0x334fe0,this['options']),_0x1242a2&&this['reCreateWindTextures']();}[_0x22767a(0x7b,0x9f)](_0x29bb65){const {array:_0xb4813f}=_0x29bb65;let {min:_0x57422b,max:_0x1bc0d2}=_0x29bb65;const _0x413cff=new Float32Array(_0xb4813f[_0x4f7ab7(0x130,0x193)]);function _0x6ec4b(_0x819b61,_0x21a5df){return _0x22767a(_0x21a5df,_0x819b61-0x2d1);}_0x57422b===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x57422b=Math['min'](..._0xb4813f));_0x1bc0d2===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0x1bc0d2=Math[_0x4f7ab7(0x160,0x1b1)](..._0xb4813f));const _0x3e19f7=Math['max'](Math[_0x6ec4b(0x410,0x490)](_0x57422b),Math['abs'](_0x1bc0d2));for(let _0xa2f5cf=0x0;_0xa2f5cf<_0xb4813f[_0x6ec4b(0x3a3,0x32d)];_0xa2f5cf++){const _0x1b5427=_0xb4813f[_0xa2f5cf]/_0x3e19f7;_0x413cff[_0xa2f5cf]=_0x1b5427;}function _0x4f7ab7(_0x225eab,_0x531683){return _0xc54fe5(_0x531683- -0x364,_0x225eab);}return _0x413cff;}[_0x22767a(-0x1b,0x4a)](){Object['values'](this['windTextures'])['forEach'](_0xa12bb1=>_0xa12bb1['destroy']());function _0x441583(_0x4ae9d9,_0x29ca85){return _0x22767a(_0x29ca85,_0x4ae9d9-0x514);}Object['values'](this['particlesTextures'])['forEach'](_0x19715a=>_0x19715a[_0x441583(0x55e,0x5bf)]()),Object['values'](this['primitives'])['forEach'](_0xa35993=>_0xa35993[_0x42e739(0x1f9,0x229)]());function _0x42e739(_0x161f7b,_0x459598){return _0xc54fe5(_0x459598- -0x246,_0x161f7b);}this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x538e82,_0xcf2f4f,_0x1bf9f2,_0x2b68ee){this['context']=_0x538e82,this[_0x16cd97(0x46a,0x46a)]=_0xcf2f4f,this[_0x22aa85(0x473,0x4b0)]=_0x1bf9f2,this['computing']=_0x2b68ee;function _0x16cd97(_0x12ac5b,_0x53a4fa){return _0x22767a(_0x12ac5b,_0x53a4fa-0x413);}(typeof this[_0x22aa85(0x43e,0x3d7)]['particlesTextureSize']!=='number'||this['options']['particlesTextureSize']<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this[_0x22aa85(0x43e,0x4c2)]['particlesTextureSize']=0x100);this['colorTable']=this['createColorTableTexture'](),this['textures']=this['createRenderingTextures']();function _0x22aa85(_0x472bff,_0x3956b9){return _0x22767a(_0x3956b9,_0x472bff-0x3e7);}this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this['createPrimitives']();}['createRenderingTextures'](){const _0x5cca66={};_0x5cca66[_0x1ff9b5(0x3b7,0x3a3)]=this[_0x306ce6(0x470,0x4ad)],_0x5cca66['width']=this[_0x306ce6(0x470,0x418)][_0x1ff9b5(0x387,0x3e6)],_0x5cca66['height']=this[_0x1ff9b5(0x3b7,0x41a)]['drawingBufferHeight'],_0x5cca66[_0x306ce6(0x506,0x480)]=PixelFormat['RGBA'],_0x5cca66[_0x1ff9b5(0x3a4,0x3f4)]=PixelDatatype['UNSIGNED_BYTE'];const _0x68bb9f=_0x5cca66,_0x20ba00={};_0x20ba00[_0x306ce6(0x470,0x41c)]=this[_0x306ce6(0x470,0x3f1)],_0x20ba00[_0x1ff9b5(0x3d1,0x363)]=this['context'][_0x306ce6(0x440,0x4ae)],_0x20ba00['height']=this['context']['drawingBufferHeight'],_0x20ba00['pixelFormat']=PixelFormat[_0x1ff9b5(0x3d9,0x462)],_0x20ba00[_0x1ff9b5(0x3a4,0x3bc)]=PixelDatatype['UNSIGNED_INT'];function _0x1ff9b5(_0x53df02,_0x5b06a5){return _0xc54fe5(_0x53df02- -0x108,_0x5b06a5);}const _0x31f84a=_0x20ba00;function _0x306ce6(_0x3039a3,_0x35de62){return _0x22767a(_0x35de62,_0x3039a3-0x3d6);}return{'segmentsColor':new Texture(_0x68bb9f),'segmentsDepth':new Texture(_0x31f84a)};}['createRenderingFramebuffers'](){const _0x110a33={};_0x110a33[_0x157ae3(0x557,0x4ee)]=this[_0x157ae3(0x47f,0x4ee)];function _0x391957(_0x5bfc5e,_0x5a47bc){return _0x22767a(_0x5bfc5e,_0x5a47bc- -0x8c);}_0x110a33['colorTextures']=[this[_0x157ae3(0x527,0x56c)]['segmentsColor']];function _0x157ae3(_0x3001d1,_0x553c9e){return _0xc54fe5(_0x553c9e-0x2f,_0x3001d1);}return _0x110a33['depthTexture']=this['textures']['segmentsDepth'],{'segments':new Framebuffer(_0x110a33)};}['destoryRenderingFramebuffers'](){function _0x26d5e4(_0xd1bd9f,_0x591b58){return _0xc54fe5(_0x591b58- -0x85,_0xd1bd9f);}function _0x558e4e(_0x1e6ee3,_0x9af608){return _0xc54fe5(_0x1e6ee3- -0x3e1,_0x9af608);}Object[_0x26d5e4(0x45b,0x422)](this[_0x26d5e4(0x479,0x45a)])[_0x558e4e(0x126,0xe1)](_0x13a2dc=>{_0x13a2dc['destroy']();});}['createColorTableTexture'](){function _0x4f3d76(_0x154bb1,_0x55772c){return _0x22767a(_0x55772c,_0x154bb1-0x20c);}const _0x5565b1=new Float32Array(this['options'][_0x15a21e(0x229,0x26b)][_0x4f3d76(0x332,0x2f5)](_0x12dc8f=>{const _0x3736b7=Color$1['fromCssColorString'](_0x12dc8f);return[_0x3736b7['red'],_0x3736b7['green'],_0x3736b7['blue'],_0x3736b7['alpha']];})),_0x59c719={};function _0x15a21e(_0x564998,_0x1ec998){return _0x22767a(_0x564998,_0x1ec998-0x18f);}return _0x59c719[_0x15a21e(0x19c,0x20a)]=TextureMinificationFilter[_0x4f3d76(0x28b,0x304)],_0x59c719['magnificationFilter']=TextureMagnificationFilter['LINEAR'],_0x59c719[_0x4f3d76(0x322,0x3a4)]=TextureWrap['CLAMP_TO_EDGE'],_0x59c719[_0x15a21e(0x2ac,0x2b0)]=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this['options'][_0x15a21e(0x2db,0x26b)]['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype[_0x15a21e(0x20b,0x227)],'sampler':new Sampler(_0x59c719),'source':{'width':this['options']['colors']['length'],'height':0x1,'arrayBufferView':_0x5565b1}});}['createSegmentsGeometry'](){const _0x47237b=0x4;function _0x41d033(_0xd0d3c1,_0x3995fb){return _0xc54fe5(_0x3995fb-0x3f,_0xd0d3c1);}const _0x53a360=this[_0x5ba18f(-0x233,-0x1c6)]['particlesTextureSize'];let _0x508b10=[];for(let _0x104ab8=0x0;_0x104ab8<_0x53a360;_0x104ab8++){for(let _0xe34750=0x0;_0xe34750<_0x53a360;_0xe34750++){for(let _0x36ad6b=0x0;_0x36ad6b<_0x47237b;_0x36ad6b++){_0x508b10['push'](_0x104ab8/_0x53a360),_0x508b10[_0x5ba18f(-0x1ca,-0x193)](_0xe34750/_0x53a360);}}}_0x508b10=new Float32Array(_0x508b10);const _0x23297c=this[_0x41d033(0x439,0x4bb)][_0x5ba18f(-0x22c,-0x289)]**0x2;let _0x108891=[];for(let _0xdb1ce6=0x0;_0xdb1ce6<_0x23297c;_0xdb1ce6++){_0x108891[_0x5ba18f(-0x1ca,-0x1d4)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x108891=new Float32Array(_0x108891);let _0x3c703c=[];for(let _0x38ffce=0x0,_0x5cf1dc=0x0;_0x38ffce<_0x23297c;_0x38ffce++){_0x3c703c[_0x41d033(0x57c,0x524)](_0x5cf1dc+0x0,_0x5cf1dc+0x1,_0x5cf1dc+0x2,_0x5cf1dc+0x2,_0x5cf1dc+0x1,_0x5cf1dc+0x3),_0x5cf1dc+=_0x47237b;}_0x3c703c=new Uint32Array(_0x3c703c);const _0x1ecf16={};_0x1ecf16['componentDatatype']=ComponentDatatype[_0x41d033(0x51b,0x4fc)],_0x1ecf16['componentsPerAttribute']=0x2;function _0x5ba18f(_0x15aa81,_0x29168d){return _0x22767a(_0x29168d,_0x15aa81- -0x28a);}_0x1ecf16['values']=_0x508b10;const _0x228560={};_0x228560['componentDatatype']=ComponentDatatype['FLOAT'],_0x228560[_0x5ba18f(-0x17e,-0x138)]=0x3,_0x228560['values']=_0x108891;const _0x2d1f30=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x1ecf16),'normal':new GeometryAttribute(_0x228560)}),'indices':_0x3c703c});return _0x2d1f30;}[_0x22767a(0x1c4,0x149)](_0x3d2f17){function _0x334f33(_0x31fbff,_0xdb9c0b){return _0xc54fe5(_0xdb9c0b- -0x2b9,_0x31fbff);}const _0x19bcce={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x3d2f17};return Appearance[_0x334f33(0x29d,0x27f)](!![],![],_0x19bcce);}['createPrimitives'](){const _0x5ddf76={};_0x5ddf76['st']=0x0,_0x5ddf76[_0xacc7cd(0x332,0x384)]=0x1;const _0x3141c0={};function _0xacc7cd(_0xda95d9,_0x2640cf){return _0xc54fe5(_0x2640cf- -0xfd,_0xda95d9);}function _0x200e8c(_0x3c0a3c,_0x4fc338){return _0x22767a(_0x4fc338,_0x3c0a3c-0x8c);}_0x3141c0['enabled']=!![];const _0x3ae384={};_0x3ae384['enabled']=!![],_0x3ae384['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x3ae384['blendFuncSource']=WebGLRenderingContext[_0x200e8c(0x1b9,0x21c)],_0x3ae384['blendFuncDestination']=WebGLRenderingContext[_0xacc7cd(0x3e3,0x378)];const _0x15acf0={};_0x15acf0[_0xacc7cd(0x4e0,0x482)]=undefined,_0x15acf0[_0x200e8c(0x1c1,0x163)]=_0x3141c0,_0x15acf0[_0x200e8c(0x18f,0x1a8)]=!![],_0x15acf0['blending']=_0x3ae384;const _0x34a47b=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x5ddf76,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x200e8c(0x1bd,0x187)],'uniformMap':{'previousParticlesPosition':()=>this['computing'][_0xacc7cd(0x41a,0x3b9)]['previousParticlesPosition'],'currentParticlesPosition':()=>this['computing']['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this['computing'][_0xacc7cd(0x354,0x3b9)]['postProcessingPosition'],'particlesSpeed':()=>this['computing']['particlesTextures'][_0x200e8c(0x193,0x1f0)],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this[_0x200e8c(0x1ce,0x214)],'domain':()=>{var _0xf43c04,_0x570868;const _0x2d02bc=new Cartesian2(((_0xf43c04=this['options']['domain'])===null||_0xf43c04===void 0x0?void 0x0:_0xf43c04['min'])??this[_0x5102af(0x204,0x26b)]['windData']['speed']['min'],((_0x570868=this['options']['domain'])===null||_0x570868===void 0x0?void 0x0:_0x570868['max'])??this[_0x5102af(0x2ab,0x26b)][_0x4ee4a7(0x3a9,0x37a)]['speed']['max']);function _0x4ee4a7(_0x345372,_0x2a162d){return _0xacc7cd(_0x2a162d,_0x345372- -0x2f);}function _0x5102af(_0x379d4a,_0x3ed02e){return _0xacc7cd(_0x379d4a,_0x3ed02e- -0x1ec);}return _0x2d02bc;},'displayRange':()=>{function _0x4b8471(_0x5a0228,_0x319fc7){return _0xacc7cd(_0x5a0228,_0x319fc7- -0x1ba);}function _0x105102(_0x440778,_0x10f682){return _0xacc7cd(_0x10f682,_0x440778- -0x25e);}var _0x7ee34f,_0x2832c9;const _0x247dc2=new Cartesian2(((_0x7ee34f=this['options']['displayRange'])===null||_0x7ee34f===void 0x0?void 0x0:_0x7ee34f['min'])??this[_0x105102(0x1f9,0x27a)]['windData']['speed']['min'],((_0x2832c9=this['options']['displayRange'])===null||_0x2832c9===void 0x0?void 0x0:_0x2832c9[_0x105102(0x1ba,0x18d)])??this['computing']['windData']['speed']['max']);return _0x247dc2;},'particleHeight':()=>this[_0xacc7cd(0x3c8,0x37f)]['fixedHeight']||0x0,'aspect':()=>this[_0xacc7cd(0x3ca,0x3c2)]['drawingBufferWidth']/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x1a5c31={};function _0x22b242(_0x4ec12a,_0x9026da){return _0xacc7cd(_0x9026da,_0x4ec12a- -0xe);}_0x1a5c31['min']=0x1,_0x1a5c31[_0x2db119(0x352,0x373)]=0x2;function _0x2db119(_0xf3b1a4,_0x2a387e){return _0x200e8c(_0x2a387e-0x1f7,_0xf3b1a4);}const _0x206cbc=this['options']['lineWidth']||_0x1a5c31;return new Cartesian2(_0x206cbc['min'],_0x206cbc[_0x22b242(0x40a,0x40b)]);},'lineLength':()=>{const _0x212c55={};_0x212c55['min']=0x14,_0x212c55['max']=0x64;const _0x34a5f3=this['options']['lineLength']||_0x212c55;return new Cartesian2(_0x34a5f3['min'],_0x34a5f3['max']);},'is3D':()=>this['viewerParameters'][_0xacc7cd(0x492,0x462)]===SceneMode[_0xacc7cd(0x38a,0x388)],'segmentsDepthTexture':()=>this['textures'][_0xacc7cd(0x31a,0x37a)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x15acf0)}),_0x532712={};return _0x532712['segments']=_0x34a47b,_0x532712;}[_0xc54fe5(0x47a,0x406)](){function _0x5c4df9(_0x4e9a55,_0x3f0a45){return _0x22767a(_0x3f0a45,_0x4e9a55- -0x23c);}function _0x5360ff(_0x132d34,_0x5ed281){return _0xc54fe5(_0x132d34- -0x91,_0x5ed281);}const _0x189c6f=this['createSegmentsGeometry']();this['primitives']['segments'][_0x5c4df9(-0x1e4,-0x21e)]=_0x189c6f;const _0x503d8b={};_0x503d8b['context']=this['context'],_0x503d8b['geometry']=_0x189c6f,_0x503d8b['attributeLocations']=this[_0x5360ff(0x4b1,0x455)][_0x5c4df9(-0x168,-0x1af)]['attributeLocations'],_0x503d8b['bufferUsage']=BufferUsage[_0x5360ff(0x4d1,0x549)];const _0x4c788b=VertexArray['fromGeometry'](_0x503d8b);this['primitives'][_0x5c4df9(-0x168,-0xfc)]['commandToExecute']&&(this['primitives']['segments']['commandToExecute'][_0x5c4df9(-0x1b2,-0x20a)]=_0x4c788b);}['onColorTableChange'](){this['colorTable'][_0x5b3dae(-0x97,-0x73)]();function _0x5b3dae(_0x55334a,_0x3b339b){return _0xc54fe5(_0x3b339b- -0x4e2,_0x55334a);}this['colorTable']=this['createColorTableTexture']();}['updateOptions'](_0x351f6c){function _0x4ab092(_0x3ec691,_0x2e7794){return _0x22767a(_0x3ec691,_0x2e7794-0x527);}const _0x2cf54d=_0x351f6c['colors']&&JSON[_0x4ab092(0x5d4,0x611)](_0x351f6c['colors'])!==JSON['stringify'](this['options'][_0x4ab092(0x61e,0x603)]);function _0x176811(_0x1ff04b,_0x3d0d22){return _0x22767a(_0x3d0d22,_0x1ff04b-0x4ea);}this[_0x176811(0x541,0x59a)]=deepMerge(_0x351f6c,this['options']),_0x2cf54d&&this['onColorTableChange']();}[_0xc54fe5(0x46f,0x409)](){function _0x529702(_0x149fc8,_0x1c6bb8){return _0xc54fe5(_0x1c6bb8- -0x1ee,_0x149fc8);}Object['values'](this[_0x529702(0x2a0,0x2f1)])['forEach'](_0x582307=>{function _0x170c89(_0x1ac148,_0x40834a){return _0x529702(_0x1ac148,_0x40834a-0x2d1);}_0x582307[_0x170c89(0x544,0x552)]();});function _0x55d130(_0x4ba150,_0x1ca1b8){return _0x22767a(_0x4ba150,_0x1ca1b8-0x1e9);}Object['values'](this[_0x55d130(0x28a,0x306)])[_0x55d130(0x347,0x2cb)](_0x57820c=>{function _0x3a9e8d(_0x5cc520,_0x431f3b){return _0x55d130(_0x5cc520,_0x431f3b- -0x227);}_0x57820c[_0x3a9e8d(-0x7b,0xc)]();}),this[_0x529702(0x318,0x379)]['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x224252,_0x212c92,_0x236a13,_0x5b5572,_0x58f086){this['context']=_0x224252,this['options']=_0x236a13,this['viewerParameters']=_0x5b5572,this[_0x128f03(0x162,0x180)]=new WindParticlesComputing(_0x224252,_0x212c92,_0x236a13,_0x5b5572,_0x58f086),this['rendering']=new WindParticlesRendering(_0x224252,_0x236a13,_0x5b5572,this['computing']);function _0x5cfafe(_0x5823d6,_0x1a233e){return _0xc54fe5(_0x1a233e- -0x180,_0x5823d6);}function _0x128f03(_0x34621d,_0x80bc5f){return _0xc54fe5(_0x80bc5f- -0x3d4,_0x34621d);}this[_0x128f03(0x167,0x107)]();}[_0x22767a(0x15c,0x111)](){function _0xaeaa84(_0x439e6d,_0x232be9){return _0x22767a(_0x232be9,_0x439e6d-0x256);}const _0x5bc0d8=[this[_0xaeaa84(0x385,0x3dd)][_0x3c7585(0x14a,0x114)]['calculateSpeed'],this['computing'][_0xaeaa84(0x373,0x2e8)][_0xaeaa84(0x326,0x328)],this['computing'][_0x3c7585(0x14a,0x1c4)]['postProcessingPosition'],this['rendering'][_0x3c7585(0x14a,0x104)][_0xaeaa84(0x32a,0x323)]];function _0x3c7585(_0x1c4851,_0x107aa8){return _0xc54fe5(_0x1c4851- -0x3f8,_0x107aa8);}return _0x5bc0d8;}['clearFramebuffers'](){function _0xe3f2b7(_0x5c9c8a,_0x218d4a){return _0xc54fe5(_0x5c9c8a- -0x1a,_0x218d4a);}const _0x182930=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});function _0x4c5f40(_0x16790d,_0x42f855){return _0x22767a(_0x16790d,_0x42f855-0x198);}Object[_0xe3f2b7(0x543,0x565)](this[_0x4c5f40(0x33a,0x2dd)][_0x4c5f40(0x248,0x252)])['forEach'](_0x250126=>{function _0x52361a(_0x36d77d,_0x5c53e3){return _0x4c5f40(_0x5c53e3,_0x36d77d-0x34e);}_0x182930['framebuffer']=this['rendering']['framebuffers'][_0x250126];function _0x151d51(_0xe211f7,_0x4eea14){return _0x4c5f40(_0x4eea14,_0xe211f7-0x1ed);}_0x182930[_0x151d51(0x4a5,0x4e8)](this[_0x52361a(0x580,0x5e8)]);});}['changeOptions'](_0x2a3442){let _0xd9c08c=![];_0x2a3442['particlesTextureSize']&&this['options']['particlesTextureSize']!==_0x2a3442[_0x4bbecd(0x4eb,0x4b3)]&&(_0xd9c08c=!![]);function _0x4bbecd(_0x1016ea,_0x4d7891){return _0xc54fe5(_0x4d7891-0x30,_0x1016ea);}function _0x15c772(_0x3e257e,_0x53e07f){return _0x22767a(_0x3e257e,_0x53e07f-0x523);}const _0x45cb5b=deepMerge(_0x2a3442,this['options']);if(_0x45cb5b[_0x4bbecd(0x4bf,0x4b3)]<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this[_0x15c772(0x4f7,0x57a)]=_0x45cb5b,this[_0x15c772(0x671,0x668)]['updateOptions'](_0x2a3442),this[_0x15c772(0x640,0x652)][_0x4bbecd(0x48e,0x4ff)](_0x2a3442),_0xd9c08c&&(this[_0x4bbecd(0x5c1,0x584)]['destroyParticlesTextures'](),this[_0x15c772(0x67a,0x652)]['createParticlesTextures'](),this['rendering']['onParticlesTextureSizeChange']());}[_0x22767a(0x112,0x122)](_0x32692b){this['viewerParameters']=_0x32692b,this['computing']['viewerParameters']=_0x32692b,this['rendering']['viewerParameters']=_0x32692b;}['destroy'](){function _0x54ee27(_0x2a40a6,_0x21607b){return _0xc54fe5(_0x2a40a6- -0x75,_0x21607b);}function _0x16bc55(_0x29c757,_0x1fc180){return _0xc54fe5(_0x1fc180- -0x31d,_0x29c757);}this[_0x54ee27(0x4df,0x4b9)][_0x54ee27(0x3fa,0x38a)](),this[_0x16bc55(0x1ec,0x24d)]['destroy']();}}const Cesium$1=mars3d__namespace[_0xc54fe5(0x4a1,0x458)],BaseLayer$1=mars3d__namespace[_0x22767a(0x5c,0xb7)]['BaseLayer'],_0x542bb9={};_0x542bb9['min']=0x1,_0x542bb9[_0xc54fe5(0x515,0x54f)]=0x2;const _0x467976={};_0x467976['min']=0x14,_0x467976[_0x22767a(0x155,0xf0)]=0x64;const _0x363744={};_0x363744[_0x22767a(0xe8,0x5e)]=0x64,_0x363744['fixedHeight']=0x0,_0x363744[_0x22767a(0x9f,0xae)]=_0x542bb9,_0x363744['lineLength']=_0x467976,_0x363744['speedFactor']=0x1,_0x363744['dropRate']=0.003,_0x363744['dropRateBump']=0.001,_0x363744[_0xc54fe5(0x501,0x499)]=['rgb(206,255,255)'],_0x363744[_0x22767a(0x3b,0x9d)]=![],_0x363744[_0xc54fe5(0x472,0x434)]=!![];function _0x4240(_0x181b20,_0x156f52){const _0x363fcf=_0x363f();return _0x4240=function(_0x42409c,_0x2ebbd6){_0x42409c=_0x42409c-0x18f;let _0x590bef=_0x363fcf[_0x42409c];return _0x590bef;},_0x4240(_0x181b20,_0x156f52);}const DEF_OPTIONS=_0x363744;class WindLayer extends BaseLayer$1{constructor(_0x1c7fa2={}){_0x1c7fa2={...DEF_OPTIONS,..._0x1c7fa2},super(_0x1c7fa2),this['_setOptionsHook'](_0x1c7fa2,_0x1c7fa2);}get['layer'](){return this['primitives'];}get['data'](){function _0x5be7b2(_0x285842,_0x46bb1c){return _0x22767a(_0x285842,_0x46bb1c-0x447);}return this[_0x5be7b2(0x437,0x49e)]['data'];}set['data'](_0x222a8c){function _0x422a30(_0x2b5d88,_0x575af9){return _0xc54fe5(_0x2b5d88- -0x91,_0x575af9);}function _0x175387(_0x50008c,_0x1b7b96){return _0x22767a(_0x50008c,_0x1b7b96-0x4ac);}this[_0x175387(0x501,0x503)][_0x175387(0x520,0x5a3)]=_0x222a8c,this['setData'](_0x222a8c);}get['colors'](){function _0xe68061(_0x24ab1c,_0x4be14c){return _0xc54fe5(_0x24ab1c- -0x56f,_0x4be14c);}return this[_0xe68061(-0xf3,-0x102)]['colors'];}set['colors'](_0x4df420){this[_0x43ef4e(0x34f,0x2e0)][_0x4e232a(0x358,0x30c)]=_0x4df420;function _0x4e232a(_0x2eba8b,_0x1adab7){return _0x22767a(_0x1adab7,_0x2eba8b-0x27c);}function _0x43ef4e(_0x4c2345,_0x4c279f){return _0x22767a(_0x4c2345,_0x4c279f-0x289);}const _0x48e536={};_0x48e536['colors']=_0x4df420,this['_setOptionsHook'](this[_0x43ef4e(0x281,0x2e0)],_0x48e536);}['_mountedHook'](){}[_0x22767a(0x195,0x15d)](){this['scene']=this[_0x75bebb(0x3fd,0x39f)]['scene'];function _0x75bebb(_0x2e6a02,_0x3b6019){return _0xc54fe5(_0x3b6019- -0x1cc,_0x2e6a02);}this[_0x75bebb(0x347,0x2cd)]=this['_map'][_0x45cf72(-0x19a,-0x158)];this['options']['data']&&this['setData'](this['options']['data']);if(!this[_0x45cf72(-0xbf,-0x11c)])return;this[_0x45cf72(-0x174,-0x140)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0x75bebb(0x3bb,0x3ad)]},this[_0x45cf72(-0x18b,-0x13e)](),this['particleSystem']=new WindParticleSystem(this['scene'][_0x75bebb(0x369,0x2f3)],this['windData'],this['options'],this[_0x75bebb(0x325,0x2e5)],this[_0x45cf72(-0x11e,-0x14c)]),this['primitives']=this['particleSystem']['getPrimitives'](),this[_0x75bebb(0x369,0x376)][_0x45cf72(-0x121,-0xea)](_0x1dab8d=>{function _0x52e43e(_0x48ff6d,_0x41d496){return _0x45cf72(_0x41d496,_0x48ff6d-0x4e2);}function _0x303732(_0x35774f,_0x276f7d){return _0x75bebb(_0x276f7d,_0x35774f- -0x1b7);}this[_0x303732(0x122,0xba)][_0x303732(0x1bf,0x1b8)]['add'](_0x1dab8d);}),this['camera']['percentageChanged']=0.01;function _0x45cf72(_0x5afafe,_0x2f2601){return _0xc54fe5(_0x2f2601- -0x5f1,_0x5afafe);}this['camera'][_0x45cf72(-0xd0,-0xcc)][_0x45cf72(-0xc2,-0xf9)](this['updateViewerParameters'][_0x45cf72(-0x11c,-0xb2)](this)),this['scene']['morphComplete']['addEventListener'](this['updateViewerParameters']['bind'](this)),window['addEventListener'](_0x45cf72(-0xd5,-0xad),this[_0x45cf72(-0x16c,-0x13e)]['bind'](this));}[_0x22767a(0x78,0xfa)](){this['camera']['changed'][_0x2ec297(-0x179,-0x1d0)](this[_0x1bbd10(0x52d,0x5a4)]['bind'](this)),this['scene']['morphComplete'][_0x1bbd10(0x61e,0x602)](this[_0x1bbd10(0x616,0x5a4)]['bind'](this)),window['removeEventListener'](_0x1bbd10(0x661,0x635),this['updateViewerParameters']['bind'](this));function _0x1bbd10(_0x34c3bd,_0x35b18e){return _0x22767a(_0x34c3bd,_0x35b18e-0x516);}this['primitives']&&(this['primitives']['forEach'](_0x2fdffd=>{function _0x2db34e(_0x4ac691,_0x1316a8){return _0x2ec297(_0x4ac691-0x1a8,_0x1316a8);}this['scene'][_0x2db34e(0x60,0x23)]['remove'](_0x2fdffd);}),delete this[_0x1bbd10(0x60b,0x633)]);function _0x2ec297(_0x162041,_0x48f4d4){return _0x22767a(_0x48f4d4,_0x162041- -0x265);}this['particleSystem']&&(this['particleSystem']['destroy'](),delete this['particleSystem']);}['setData'](_0x16edc5,_0x548418){function _0x6b00a7(_0xdca626,_0x2bdcd3){return _0x22767a(_0x2bdcd3,_0xdca626-0x41d);}this[_0x52925a(0x4f,0x8e)]=this[_0x52925a(0xe,0x7d)](_0x16edc5);function _0x52925a(_0x587520,_0x5e6b8c){return _0xc54fe5(_0x5e6b8c- -0x447,_0x587520);}if(_0x548418){this['_removedHook'](),this[_0x52925a(0x16f,0x13b)]();return;}this['particleSystem']?(this[_0x52925a(0x13f,0x12b)]['computing'][_0x52925a(0x73,0x39)](this['windData']),this[_0x52925a(0xd0,0x5e)]['requestRender']()):this[_0x6b00a7(0x57a,0x5b6)]();}[_0x22767a(0xcd,0x8b)](_0x366947,_0x34755c){function _0x5ac0f0(_0x41be01,_0x3a825c){return _0xc54fe5(_0x3a825c- -0xa3,_0x41be01);}this['particleSystem']&&(this[_0x5ac0f0(0x4e8,0x4cf)]['changeOptions'](_0x34755c),this['scene']['requestRender']());}[_0x22767a(0x18,0x9f)](_0x2ca7b5){var _0x2a44d7,_0x35c82d;function _0x5dc693(_0xb9ff7d,_0x10f293){return _0xc54fe5(_0x10f293- -0xcb,_0xb9ff7d);}const _0x16705e={..._0x2ca7b5},_0x54ca99=_0x16705e;!_0x54ca99[_0xd58639(0xcc,0x56)]&&_0x54ca99[_0xd58639(0x116,0x9c)]&&(_0x54ca99[_0x5dc693(0x445,0x428)]=_0x54ca99[_0x5dc693(0x3ef,0x46e)]);!_0x54ca99['width']&&_0x54ca99[_0x5dc693(0x429,0x3ca)]&&(_0x54ca99['width']=_0x54ca99['cols']);!_0x54ca99[_0x5dc693(0x404,0x43b)]&&(_0x54ca99[_0x5dc693(0x3f4,0x43b)]={'west':_0x54ca99[_0x5dc693(0x45e,0x48d)],'south':_0x54ca99[_0xd58639(0x62,0xa4)],'east':_0x54ca99['xmax'],'north':_0x54ca99['ymax']});if(!_0x54ca99['u']){const _0xefd080={};_0xefd080[_0x5dc693(0x4b5,0x4a1)]=_0x2ca7b5['udata'],_0xefd080['min']=_0x2ca7b5[_0xd58639(0xdc,0xb6)],_0xefd080['max']=_0x2ca7b5['umax'],_0x54ca99['u']=_0xefd080;}if(!_0x54ca99['v']){const _0x12a6e9={};_0x12a6e9[_0x5dc693(0x441,0x4a1)]=_0x2ca7b5['vdata'],_0x12a6e9[_0xd58639(0x2d,0x70)]=_0x2ca7b5['vmin'],_0x12a6e9[_0xd58639(0x5e,0x78)]=_0x2ca7b5[_0x5dc693(0x401,0x3a6)],_0x54ca99['v']=_0x12a6e9;}if(((_0x2a44d7=_0x54ca99['speed'])===null||_0x2a44d7===void 0x0?void 0x0:_0x2a44d7['min'])===undefined||((_0x35c82d=_0x54ca99['speed'])===null||_0x35c82d===void 0x0?void 0x0:_0x35c82d['max'])===undefined||_0x54ca99['speed']['array']===undefined){const _0x500909={'array':new Float32Array(_0x54ca99['u']['array']['length']),'min':Number['MAX_VALUE'],'max':Number[_0x5dc693(0x42e,0x44b)]};for(let _0x16cc8c=0x0;_0x16cc8c<_0x54ca99['u'][_0xd58639(0xf5,0xcf)][_0x5dc693(0x44a,0x42c)];_0x16cc8c++){_0x500909['array'][_0x16cc8c]=Math[_0x5dc693(0x404,0x478)](_0x54ca99['u']['array'][_0x16cc8c]*_0x54ca99['u']['array'][_0x16cc8c]+_0x54ca99['v']['array'][_0x16cc8c]*_0x54ca99['v']['array'][_0x16cc8c]),_0x500909['array'][_0x16cc8c]!==0x0&&(_0x500909[_0xd58639(-0x4,0x70)]=Math['min'](_0x500909['min'],_0x500909['array'][_0x16cc8c]),_0x500909['max']=Math['max'](_0x500909[_0xd58639(0x1a,0x78)],_0x500909[_0x5dc693(0x4ea,0x4a1)][_0x16cc8c]));}_0x54ca99['speed']=_0x500909;}function _0xd58639(_0x222376,_0x341986){return _0x22767a(_0x222376,_0x341986- -0x78);}return _0x54ca99;}[_0xc54fe5(0x4b3,0x468)](){var _0x1e81c2;const _0x2a651d=this['scene'],_0x590d7a=_0x2a651d['canvas'],_0x2ee260={};_0x2ee260['x']=0x0,_0x2ee260['y']=0x0;const _0x5619ce={};_0x5619ce['x']=0x0;function _0x2efc0b(_0x7490c7,_0x177166){return _0xc54fe5(_0x177166- -0x31c,_0x7490c7);}_0x5619ce['y']=_0x590d7a['clientHeight'];const _0x3832e9={};_0x3832e9['x']=_0x590d7a[_0x525b4b(0x482,0x46d)],_0x3832e9['y']=0x0;const _0x40d8dc={};_0x40d8dc['x']=_0x590d7a[_0x2efc0b(0x159,0x1cf)],_0x40d8dc['y']=_0x590d7a['clientHeight'];const _0x2ef2aa=[_0x2ee260,_0x5619ce,_0x3832e9,_0x40d8dc];let _0x9dab06=0xb4;function _0x525b4b(_0x46b6d1,_0x1c4ffb){return _0xc54fe5(_0x46b6d1- -0x69,_0x1c4ffb);}let _0x4ee908=-0xb4,_0x288aa8=0x5a,_0xf09a59=-0x5a,_0x3cd55e=![];for(const _0x52677f of _0x2ef2aa){const _0x57128a=_0x2a651d['camera'][_0x525b4b(0x465,0x46b)](new Cesium$1[(_0x525b4b(0x481,0x444))](_0x52677f['x'],_0x52677f['y']),_0x2a651d[_0x525b4b(0x477,0x45e)]['ellipsoid']);if(!_0x57128a){_0x3cd55e=!![];break;}const _0x58d451=_0x2a651d[_0x525b4b(0x477,0x4ef)]['ellipsoid']['cartesianToCartographic'](_0x57128a),_0x496b75=Cesium$1[_0x525b4b(0x4d3,0x4ef)]['toDegrees'](_0x58d451['longitude']),_0x45099d=Cesium$1['Math'][_0x525b4b(0x441,0x3ee)](_0x58d451[_0x525b4b(0x4e7,0x544)]);_0x9dab06=Math['min'](_0x9dab06,_0x496b75),_0x4ee908=Math['max'](_0x4ee908,_0x496b75),_0x288aa8=Math['min'](_0x288aa8,_0x45099d),_0xf09a59=Math[_0x525b4b(0x4ac,0x478)](_0xf09a59,_0x45099d);}if(!_0x3cd55e){const _0x405508=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds'][_0x525b4b(0x4fa,0x509)],_0x9dab06),Math[_0x2efc0b(0x205,0x1f1)](this[_0x2efc0b(0x18e,0x1b9)][_0x525b4b(0x49d,0x4b1)]['east'],_0x4ee908)),_0x4dd11a=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds'][_0x2efc0b(0x28b,0x21e)],_0x288aa8),Math['min'](this[_0x2efc0b(0x181,0x1b9)]['bounds'][_0x2efc0b(0x1e2,0x171)],_0xf09a59)),_0x525344=(_0x405508['y']-_0x405508['x'])*0.05,_0x4f5972=(_0x4dd11a['y']-_0x4dd11a['x'])*0.05;_0x405508['x']=Math['max'](this[_0x525b4b(0x46c,0x411)]['bounds'][_0x525b4b(0x4fa,0x4e7)],_0x405508['x']-_0x525344),_0x405508['y']=Math[_0x2efc0b(0x1f4,0x1f1)](this[_0x525b4b(0x46c,0x4ed)]['bounds'][_0x2efc0b(0x1b1,0x204)],_0x405508['y']+_0x525344),_0x4dd11a['x']=Math['max'](this['windData'][_0x525b4b(0x49d,0x424)]['south'],_0x4dd11a['x']-_0x4f5972),_0x4dd11a['y']=Math['min'](this['windData']['bounds']['north'],_0x4dd11a['y']+_0x4f5972),this['viewerParameters'][_0x2efc0b(0x1d5,0x166)]=_0x405508,this[_0x2efc0b(0x1a5,0x195)]['latRange']=_0x4dd11a;const _0x4ba4b7=this['windData']['bounds']['east']-this[_0x525b4b(0x46c,0x4e9)][_0x2efc0b(0x22a,0x1ea)]['west'],_0x41f2b9=this[_0x2efc0b(0x23e,0x1b9)]['bounds'][_0x525b4b(0x424,0x450)]-this['windData'][_0x2efc0b(0x20b,0x1ea)]['south'],_0xf8b9e0=(_0x405508['y']-_0x405508['x'])/_0x4ba4b7,_0x473828=(_0x4dd11a['y']-_0x4dd11a['x'])/_0x41f2b9,_0x51b621=Math[_0x525b4b(0x4a4,0x51d)](_0xf8b9e0,_0x473828),_0x13f5f2=0x3e8*_0x51b621;_0x13f5f2>0x0&&(this[_0x525b4b(0x448,0x40b)]['pixelSize']=Math['max'](0x0,Math['min'](0x3e8,_0x13f5f2)));}this['viewerParameters']['sceneMode']=this[_0x525b4b(0x43c,0x485)][_0x525b4b(0x510,0x510)],(_0x1e81c2=this[_0x2efc0b(0x1d1,0x256)])===null||_0x1e81c2===void 0x0||_0x1e81c2['applyViewerParameters'](this['viewerParameters']);}['getDataAtLonLat'](_0xbb436c,_0x483793){const {bounds:_0x24aab5,width:_0x19dd6e,height:_0x1096cc,u:_0x392d67,v:_0x28cec6,speed:_0x41cf4c}=this['windData'],{flipY:_0x12debf}=this['options'];if(_0xbb436c<_0x24aab5['west']||_0xbb436c>_0x24aab5['east']||_0x483793<_0x24aab5['south']||_0x483793>_0x24aab5[_0x204f41(0x4bb,0x4ad)])return null;const _0x4880db=(_0xbb436c-_0x24aab5['west'])/(_0x24aab5['east']-_0x24aab5[_0x450bb8(0x57f,0x532)])*(_0x19dd6e-0x1);let _0x330846=(_0x483793-_0x24aab5['south'])/(_0x24aab5[_0x450bb8(0x3d4,0x45c)]-_0x24aab5['south'])*(_0x1096cc-0x1);_0x12debf&&(_0x330846=_0x1096cc-0x1-_0x330846);const _0x3ea0f9=Math['floor'](_0x4880db),_0x454418=Math[_0x204f41(0x561,0x500)](_0x330846),_0x5c243c=Math[_0x450bb8(0x4c5,0x502)](_0x4880db),_0x46c641=Math[_0x204f41(0x53b,0x4be)](_0x5c243c+0x1,_0x19dd6e-0x1),_0x1ea762=Math['floor'](_0x330846),_0x4097e4=Math['min'](_0x1ea762+0x1,_0x1096cc-0x1),_0x48e983=_0x4880db-_0x5c243c,_0x5d7ae6=_0x330846-_0x1ea762,_0x2ddb0c=_0x454418*_0x19dd6e+_0x3ea0f9,_0xcc8c3e=_0x1ea762*_0x19dd6e+_0x5c243c,_0x3670fe=_0x1ea762*_0x19dd6e+_0x46c641,_0x10f414=_0x4097e4*_0x19dd6e+_0x5c243c,_0x233acb=_0x4097e4*_0x19dd6e+_0x46c641,_0x271ed6=_0x392d67['array'][_0xcc8c3e],_0x4d1c22=_0x392d67['array'][_0x3670fe],_0x107764=_0x392d67['array'][_0x10f414];function _0x450bb8(_0x49e17d,_0x4b2aef){return _0x22767a(_0x49e17d,_0x4b2aef-0x3f4);}const _0x5829eb=_0x392d67['array'][_0x233acb],_0x1778cf=(0x1-_0x48e983)*(0x1-_0x5d7ae6)*_0x271ed6+_0x48e983*(0x1-_0x5d7ae6)*_0x4d1c22+(0x1-_0x48e983)*_0x5d7ae6*_0x107764+_0x48e983*_0x5d7ae6*_0x5829eb,_0x10d5fe=_0x28cec6['array'][_0xcc8c3e],_0x4db115=_0x28cec6[_0x204f41(0x59a,0x521)][_0x3670fe],_0x4aae59=_0x28cec6[_0x450bb8(0x4ce,0x53b)][_0x10f414],_0x5074e1=_0x28cec6['array'][_0x233acb],_0xe95b85=(0x1-_0x48e983)*(0x1-_0x5d7ae6)*_0x10d5fe+_0x48e983*(0x1-_0x5d7ae6)*_0x4db115+(0x1-_0x48e983)*_0x5d7ae6*_0x4aae59+_0x48e983*_0x5d7ae6*_0x5074e1,_0x514b60=Math['sqrt'](_0x1778cf*_0x1778cf+_0xe95b85*_0xe95b85),_0x59084d={};_0x59084d['u']=_0x392d67[_0x450bb8(0x52b,0x53b)][_0x2ddb0c],_0x59084d['v']=_0x28cec6['array'][_0x2ddb0c],_0x59084d['speed']=_0x41cf4c['array'][_0x2ddb0c];const _0x112500={};_0x112500['u']=_0x1778cf,_0x112500['v']=_0xe95b85,_0x112500['speed']=_0x514b60;function _0x204f41(_0x4c6453,_0xc18758){return _0xc54fe5(_0x4c6453-0x2e,_0xc18758);}const _0x464df5={};return _0x464df5['original']=_0x59084d,_0x464df5[_0x450bb8(0x481,0x4da)]=_0x112500,_0x464df5;}}mars3d__namespace['LayerUtil']['register'](_0x22767a(0xa6,0x76),WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this['lat']=null,this['tlng']=null,this['tlat']=null,this[_0x21bed1(0x1f3,0x180)]=null;function _0x21bed1(_0x4816a5,_0x297f8d){return _0x22767a(_0x4816a5,_0x297f8d-0x38);}this['speed']=null;}[_0xc54fe5(0x46f,0x45d)](){for(const _0x54158e in this){delete this[_0x54158e];}}}class CanvasWindField{constructor(_0xd3ad83){this['setOptions'](_0xd3ad83);}get[_0xc54fe5(0x4ed,0x562)](){return this['_speedRate'];}set['speedRate'](_0xc08db9){function _0x3a51b0(_0x11568d,_0x3e65c7){return _0xc54fe5(_0x3e65c7- -0x3b9,_0x11568d);}function _0x11a379(_0x2dbe0c,_0x163955){return _0x22767a(_0x2dbe0c,_0x163955-0x4f8);}this['_speedRate']=(0x64-(_0xc08db9>0x63?0x63:_0xc08db9))*0x64,this[_0x3a51b0(0xb1,0xd1)]=[(this[_0x11a379(0x656,0x61d)]-this['xmin'])/this['_speedRate'],(this['ymax']-this[_0x3a51b0(0x19f,0x188)])/this[_0x11a379(0x61a,0x5ee)]];}get[_0xc54fe5(0x53e,0x54f)](){function _0x3e7c6b(_0x4958dd,_0x551a63){return _0xc54fe5(_0x4958dd- -0xda,_0x551a63);}return this[_0x3e7c6b(0x3f1,0x456)];}set[_0x22767a(0xba,0x119)](_0x3648b5){function _0x19acfe(_0x21bc04,_0x5e1a54){return _0xc54fe5(_0x5e1a54-0x44,_0x21bc04);}this[_0x19acfe(0x533,0x50f)]=_0x3648b5;}['setOptions'](_0x4d388b){function _0x484d56(_0x12e7c9,_0x41fe59){return _0x22767a(_0x12e7c9,_0x41fe59-0x14d);}this[_0x484d56(0x176,0x1a4)]=_0x4d388b,this[_0x2c2ded(0x37b,0x39a)]=_0x4d388b['maxAge']||0x78;function _0x2c2ded(_0x34022a,_0x25c5a8){return _0xc54fe5(_0x25c5a8- -0x1a4,_0x34022a);}this['speedRate']=_0x4d388b[_0x484d56(0x1b7,0x215)]||0x32,this[_0x484d56(0x222,0x253)]=[];const _0x6b2e1=_0x4d388b['particlesNumber']||0x1000;for(let _0x5df5f1=0x0;_0x5df5f1<_0x6b2e1;_0x5df5f1++){const _0x36e3b3=this[_0x484d56(0x1e4,0x1d0)](new CanvasParticle());this['particles']['push'](_0x36e3b3);}}['setDate'](_0x1a9e6){this[_0x59c658(-0x7c,-0x16)]=_0x1a9e6['rows'],this[_0x271647(0x483,0x406)]=_0x1a9e6['cols'],this[_0x271647(0x546,0x517)]=_0x1a9e6[_0x271647(0x546,0x541)],this[_0x271647(0x538,0x549)]=_0x1a9e6[_0x271647(0x538,0x5b3)],this['ymin']=_0x1a9e6['ymin'],this[_0x59c658(-0x3d,-0x3d)]=_0x1a9e6[_0x271647(0x566,0x567)],this[_0x271647(0x4aa,0x469)]=[];const _0x55d6ca=_0x1a9e6['udata'],_0x1ec7cb=_0x1a9e6[_0x59c658(-0xde,-0x163)];let _0x3f9aac=![];function _0x59c658(_0x56fd45,_0x2a6bde){return _0x22767a(_0x2a6bde,_0x56fd45- -0x190);}_0x55d6ca['length']===this[_0x271647(0x527,0x5aa)]&&_0x55d6ca[0x0][_0x271647(0x4e5,0x4fd)]===this[_0x271647(0x483,0x429)]&&(_0x3f9aac=!![]);let _0x12aaa3=0x0;function _0x271647(_0x14c71c,_0x351378){return _0x22767a(_0x351378,_0x14c71c-0x413);}let _0x5959d1=null,_0x47eed9=null;for(let _0x411332=0x0;_0x411332<this[_0x271647(0x527,0x514)];_0x411332++){_0x5959d1=[];for(let _0x5878bb=0x0;_0x5878bb<this['cols'];_0x5878bb++,_0x12aaa3++){_0x3f9aac?_0x47eed9=this[_0x271647(0x53a,0x580)](_0x55d6ca[_0x411332][_0x5878bb],_0x1ec7cb[_0x411332][_0x5878bb]):_0x47eed9=this[_0x271647(0x53a,0x51d)](_0x55d6ca[_0x12aaa3],_0x1ec7cb[_0x12aaa3]),_0x5959d1[_0x271647(0x4d3,0x470)](_0x47eed9);}this[_0x271647(0x4aa,0x42e)]['push'](_0x5959d1);}!this[_0x271647(0x46a,0x46f)]['flipY']&&this[_0x271647(0x4aa,0x508)]['reverse']();}['clear'](){delete this[_0x23fa4d(0xa3,0x36)],delete this[_0x1a1263(0x3db,0x377)],delete this['xmin'],delete this['xmax'],delete this['ymin'],delete this['ymax'];function _0x1a1263(_0x3ce975,_0x5f1269){return _0x22767a(_0x5f1269,_0x3ce975-0x36b);}delete this['grid'];function _0x23fa4d(_0x4b2dfc,_0x14324c){return _0xc54fe5(_0x4b2dfc- -0x496,_0x14324c);}delete this['particles'];}['toGridXY'](_0x516daa,_0x5d67b6){const _0x43c7df=(_0x516daa-this[_0x249d78(0x4d1,0x468)])/(this['xmax']-this['xmin'])*(this[_0x249d78(0x320,0x3a5)]-0x1);function _0x249d78(_0x4d7f85,_0x207597){return _0x22767a(_0x4d7f85,_0x207597-0x335);}function _0x5e35ae(_0x495c2f,_0x1eb6a8){return _0x22767a(_0x1eb6a8,_0x495c2f- -0xe8);}const _0x41f9c3=(this['ymax']-_0x5d67b6)/(this[_0x249d78(0x444,0x488)]-this[_0x249d78(0x4d8,0x451)])*(this['rows']-0x1);return[_0x43c7df,_0x41f9c3];}[_0x22767a(0x108,0x93)](_0x11def9,_0x38b5ca){if(_0x11def9<0x0||_0x11def9>=this['cols']||_0x38b5ca>=this['rows'])return[0x0,0x0,0x0];const _0x37d3eb=Math['floor'](_0x11def9),_0x127ea0=Math['floor'](_0x38b5ca);if(_0x37d3eb===_0x11def9&&_0x127ea0===_0x38b5ca)return this[_0x421fc7(0x1e1,0x1dc)][_0x38b5ca][_0x11def9];function _0x421fc7(_0x5a697b,_0x2269a6){return _0xc54fe5(_0x2269a6- -0x2e0,_0x5a697b);}const _0xf6ff5d=_0x37d3eb+0x1,_0x1de339=_0x127ea0+0x1,_0x220241=this[_0x421fc7(0x170,0x1d8)](_0x37d3eb,_0x127ea0),_0x1fd6b8=this['getUVByXY'](_0xf6ff5d,_0x127ea0),_0x5e750c=this[_0x156fdd(-0x23,-0x38)](_0x37d3eb,_0x1de339);function _0x156fdd(_0x4eabeb,_0x32a90e){return _0xc54fe5(_0x32a90e- -0x4f0,_0x4eabeb);}const _0x4326cd=this[_0x421fc7(0x17e,0x1d8)](_0xf6ff5d,_0x1de339);let _0x50ea8c=null;try{_0x50ea8c=this['_bilinearInterpolation'](_0x11def9-_0x37d3eb,_0x38b5ca-_0x127ea0,_0x220241,_0x1fd6b8,_0x5e750c,_0x4326cd);}catch(_0x3091a2){console[_0x156fdd(-0x13,-0xe)](_0x11def9,_0x38b5ca);}return _0x50ea8c;}['_bilinearInterpolation'](_0xcbe3e0,_0x21c36b,_0x362445,_0x2f3a7e,_0x3a77c0,_0x1a6247){const _0x452f2b=0x1-_0xcbe3e0,_0x1757cd=0x1-_0x21c36b,_0x3647c4=_0x452f2b*_0x1757cd,_0x3293b0=_0xcbe3e0*_0x1757cd,_0x35c265=_0x452f2b*_0x21c36b,_0x2ad0fe=_0xcbe3e0*_0x21c36b,_0xd2db51=_0x362445[0x0]*_0x3647c4+_0x2f3a7e[0x0]*_0x3293b0+_0x3a77c0[0x0]*_0x35c265+_0x1a6247[0x0]*_0x2ad0fe,_0x2d3ebe=_0x362445[0x1]*_0x3647c4+_0x2f3a7e[0x1]*_0x3293b0+_0x3a77c0[0x1]*_0x35c265+_0x1a6247[0x1]*_0x2ad0fe;return this['_calcUV'](_0xd2db51,_0x2d3ebe);}['_calcUV'](_0x10bf61,_0x3bc4d2){function _0x503ccb(_0x51e214,_0x5e7b46){return _0x22767a(_0x5e7b46,_0x51e214-0x3b2);}return[+_0x10bf61,+_0x3bc4d2,Math[_0x503ccb(0x4d0,0x506)](_0x10bf61*_0x10bf61+_0x3bc4d2*_0x3bc4d2)];}['getUVByPoint'](_0x5a3697,_0x273f03){function _0x6a75e3(_0x4a7559,_0x5911ac){return _0xc54fe5(_0x5911ac- -0x2e9,_0x4a7559);}if(!this[_0x6a75e3(0x184,0x1d5)](_0x5a3697,_0x273f03))return null;const _0xa0e344=this['toGridXY'](_0x5a3697,_0x273f03),_0x3ac99=this[_0x6a75e3(0x195,0x1cf)](_0xa0e344[0x0],_0xa0e344[0x1]);function _0x50c1a8(_0x185079,_0x2e2fc7){return _0x22767a(_0x185079,_0x2e2fc7-0x4ce);}return _0x3ac99;}['isInExtent'](_0x2de376,_0x284793){function _0x2b52f2(_0x41372f,_0x36daf1){return _0x22767a(_0x41372f,_0x36daf1-0x42f);}function _0x4decb9(_0x535522,_0x3b7ee1){return _0x22767a(_0x3b7ee1,_0x535522-0x282);}return _0x2de376>=this[_0x2b52f2(0x546,0x562)]&&_0x2de376<=this['xmax']&&_0x284793>=this['ymin']&&_0x284793<=this[_0x4decb9(0x3d5,0x3f1)]?!![]:![];}['getRandomLatLng'](){function _0x4895a7(_0x2cc5c3,_0x2014d4){return _0xc54fe5(_0x2cc5c3- -0x39f,_0x2014d4);}const _0xbd7236=fRandomByfloat(this[_0x4895a7(0x1b9,0x232)],this['xmax']);function _0x2102cd(_0x45410a,_0x883d18){return _0x22767a(_0x45410a,_0x883d18-0x3b8);}const _0x4a4907=fRandomByfloat(this['ymin'],this[_0x2102cd(0x48e,0x50b)]),_0x5879fc={};return _0x5879fc[_0x2102cd(0x45f,0x4c5)]=_0x4a4907,_0x5879fc['lng']=_0xbd7236,_0x5879fc;}[_0x22767a(0xe1,0x77)](){function _0x5eb341(_0x1b7a9b,_0x91f689){return _0x22767a(_0x91f689,_0x1b7a9b-0x102);}let _0x1cf173,_0x509e48,_0x34ba8f;for(let _0x90ebd7=0x0,_0xe07108=this['particles'][_0x3bf505(0x385,0x40e)];_0x90ebd7<_0xe07108;_0x90ebd7++){let _0x52b830=this[_0x3bf505(0x3b9,0x428)][_0x90ebd7];_0x52b830['age']<=0x0&&(_0x52b830=this[_0x3bf505(0x336,0x2d3)](_0x52b830));if(_0x52b830['age']>0x0){const _0x246ff9=_0x52b830['tlng'],_0x168c5e=_0x52b830['tlat'];_0x34ba8f=this['getUVByPoint'](_0x246ff9,_0x168c5e),_0x34ba8f?(_0x1cf173=_0x246ff9+this[_0x3bf505(0x318,0x36f)][0x0]*_0x34ba8f[0x0],_0x509e48=_0x168c5e+this['_calc_speedRate'][0x1]*_0x34ba8f[0x1],_0x52b830['lng']=_0x246ff9,_0x52b830['lat']=_0x168c5e,_0x52b830['tlng']=_0x1cf173,_0x52b830['tlat']=_0x509e48,_0x52b830['speed']=_0x34ba8f[0x2],_0x52b830[_0x3bf505(0x3fb,0x3a7)]--):_0x52b830['age']=0x0;}}function _0x3bf505(_0x5f0e8b,_0x2bbcef){return _0xc54fe5(_0x5f0e8b- -0x172,_0x2bbcef);}return this[_0x3bf505(0x3b9,0x3d3)];}[_0xc54fe5(0x4a8,0x42b)](_0xe70e89){let _0x50d82f,_0x316e2a;for(let _0x599cd5=0x0;_0x599cd5<0x1e;_0x599cd5++){_0x50d82f=this[_0x1c9d7b(0x17c,0x13a)](),_0x316e2a=this[_0x1c9d7b(0x1cf,0x159)](_0x50d82f['lng'],_0x50d82f[_0x3efc94(-0xcb,-0xd0)]);if(_0x316e2a&&_0x316e2a[0x2]>0x0)break;}if(!_0x316e2a)return _0xe70e89;function _0x3efc94(_0xe94f47,_0x5529a7){return _0x22767a(_0xe94f47,_0x5529a7- -0x1dd);}const _0x56d75c=_0x50d82f['lng']+this['_calc_speedRate'][0x0]*_0x316e2a[0x0],_0x264e15=_0x50d82f['lat']+this[_0x3efc94(-0x1ac,-0x178)][0x1]*_0x316e2a[0x1];_0xe70e89['lng']=_0x50d82f[_0x1c9d7b(0x185,0x1a8)],_0xe70e89['lat']=_0x50d82f[_0x3efc94(-0x9d,-0xd0)],_0xe70e89[_0x3efc94(-0xe2,-0x86)]=_0x56d75c;function _0x1c9d7b(_0x33783e,_0x3ea362){return _0xc54fe5(_0x33783e- -0x35e,_0x3ea362);}return _0xe70e89['tlat']=_0x264e15,_0xe70e89['age']=Math['round'](0xa+Math['random']()*this[_0x1c9d7b(0x1e0,0x184)]),_0xe70e89['speed']=_0x316e2a[0x2],_0xe70e89;}['destroy'](){for(const _0x4506c3 in this){delete this[_0x4506c3];}}}function fRandomByfloat(_0x43e2f1,_0xb34991){function _0x3ffec7(_0x3dd896,_0x44a1d5){return _0x22767a(_0x44a1d5,_0x3dd896-0x130);}return _0x43e2f1+Math[_0x3ffec7(0x186,0x10c)]()*(_0xb34991-_0x43e2f1);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x22767a(0x6b,0x5a)];class CanvasWindLayer extends BaseLayer{constructor(_0x1a1858={}){function _0x27e531(_0x38ff36,_0x4d84fe){return _0xc54fe5(_0x38ff36- -0x30d,_0x4d84fe);}super(_0x1a1858),this['_setOptionsHook'](_0x1a1858),this[_0x27e531(0x1b6,0x21d)]=null;function _0x5062d5(_0x4a0501,_0x16275a){return _0x22767a(_0x16275a,_0x4a0501-0x521);}_0x1a1858['colors']&&_0x1a1858['steps']&&(this[_0x27e531(0x1bd,0x177)]=new mars3d__namespace['ColorRamp'](_0x1a1858));}['_setOptionsHook'](_0x527287,_0x316c73){this[_0x51a3a0(0x4d7,0x4de)]=0x3e8/(_0x527287['frameRate']||0xa);function _0x23d81b(_0x4eb0fb,_0x3e0341){return _0xc54fe5(_0x3e0341-0x73,_0x4eb0fb);}this['_pointerEvents']=this['options'][_0x51a3a0(0x41a,0x468)]??![];function _0x51a3a0(_0x598566,_0x2e5429){return _0x22767a(_0x598566,_0x2e5429-0x3d9);}this[_0x51a3a0(0x4ff,0x48c)]=_0x527287['color']||'#ffffff',this[_0x51a3a0(0x479,0x487)]=_0x527287['lineWidth']||0x1,this[_0x51a3a0(0x4ec,0x510)]=_0x527287[_0x23d81b(0x58e,0x5cf)]??0x0,this['flipY']=_0x527287['flipY']??![],this['windField']&&this['windField']['setOptions'](_0x527287);}get[_0x22767a(0xac,0xb7)](){return this['canvas'];}get[_0x22767a(0x9f,0xe4)](){return this['_map']['scene']['canvas']['clientWidth'];}get['canvasHeight'](){function _0x16a982(_0x2c60f0,_0x18fd73){return _0xc54fe5(_0x2c60f0- -0x45c,_0x18fd73);}return this['_map']['scene'][_0x16a982(0x67,0x9b)]['clientHeight'];}get[_0x22767a(0x8c,0x8f)](){function _0x54b3a4(_0x153c84,_0x39f0bb){return _0x22767a(_0x39f0bb,_0x153c84-0x361);}return this[_0x54b3a4(0x463,0x424)];}set['pointerEvents'](_0x21c5b4){this['_pointerEvents']=_0x21c5b4;function _0x3765ad(_0x42f940,_0x1a1efd){return _0x22767a(_0x1a1efd,_0x42f940- -0x27f);}function _0xc29c15(_0x5a50b5,_0x2bd5e3){return _0x22767a(_0x5a50b5,_0x2bd5e3- -0x42);}if(!this['canvas'])return;_0x21c5b4?this['canvas']['style']['pointer-events']='all':this['canvas'][_0x3765ad(-0x1c6,-0x245)][_0xc29c15(0x31,0x9)]='none';}get['particlesNumber'](){function _0x456cd2(_0x4170c8,_0x4649e9){return _0x22767a(_0x4170c8,_0x4649e9-0x29a);}function _0x34ff18(_0x5b2c79,_0x24da31){return _0x22767a(_0x24da31,_0x5b2c79- -0xdd);}return this[_0x456cd2(0x319,0x2f1)][_0x34ff18(-0x84,-0xa1)];}set[_0xc54fe5(0x47e,0x3f7)](_0xb68bdd){this['options']['particlesNumber']=_0xb68bdd,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{function _0x45598b(_0x4adb5a,_0x227ac7){return _0x4240(_0x227ac7- -0x2bf,_0x4adb5a);}this[_0x45598b(-0x6b,-0xdd)]();},0x1f4);}get[_0x22767a(0xc3,0xc8)](){function _0x3bcf68(_0x1f78a2,_0x80e95f){return _0xc54fe5(_0x80e95f- -0x10a,_0x1f78a2);}function _0xa650a9(_0x4b1bc9,_0x259669){return _0xc54fe5(_0x259669- -0x493,_0x4b1bc9);}return this[_0xa650a9(-0x69,-0x17)][_0xa650a9(-0x8,0x5a)];}set[_0x22767a(0x9d,0xc8)](_0x2b11ae){this[_0x3b54d8(-0x96,-0xe4)]['speedRate']=_0x2b11ae;function _0x3b54d8(_0x3d8304,_0x291cb6){return _0x22767a(_0x291cb6,_0x3d8304- -0xed);}this['windField']&&(this['windField']['speedRate']=_0x2b11ae);}get['maxAge'](){function _0x1b4f69(_0xacdb68,_0x35f6f3){return _0x22767a(_0xacdb68,_0x35f6f3- -0x84);}return this['options'][_0x1b4f69(0x71,0x95)];}set['maxAge'](_0x571458){function _0x4f0f5e(_0x387a29,_0x288c87){return _0xc54fe5(_0x387a29- -0x1a6,_0x288c87);}this['options']['maxAge']=_0x571458,this[_0x4f0f5e(0x330,0x2dc)]&&(this['windField']['maxAge']=_0x571458);}get['data'](){return this['windData'];}set['data'](_0x5e2c0e){this['setData'](_0x5e2c0e);}get[_0xc54fe5(0x521,0x4c7)](){let _0x173521=this['windData']['xmin'],_0x24ba4c=this['windData']['xmax'],_0x11f7d6=this['windData'][_0x2e3664(-0x9f,-0x95)];function _0x2e3664(_0x313d9b,_0x2123c8){return _0xc54fe5(_0x2123c8- -0x5d6,_0x313d9b);}let _0x1f9538=this[_0x2f1b86(0x3b9,0x364)][_0x2f1b86(0x45c,0x438)];function _0x2f1b86(_0x501084,_0x3e3388){return _0x22767a(_0x3e3388,_0x501084-0x309);}return _0x24ba4c>=0x167&&_0x173521===0x0&&(_0x173521=-0xb4,_0x24ba4c=0xb4),_0x173521=Math['max'](_0x173521,-0xb4),_0x24ba4c=Math[_0x2e3664(-0xe8,-0xc9)](_0x24ba4c,0xb4),_0x11f7d6=Math[_0x2f1b86(0x3f9,0x43b)](_0x11f7d6,-0x5a),_0x1f9538=Math[_0x2e3664(-0x134,-0xc9)](_0x1f9538,0x5a),Cesium['Rectangle']['fromDegrees'](_0x173521,_0x11f7d6,_0x24ba4c,_0x1f9538);}[_0x22767a(0x16a,0x112)](_0x3d1b0c){function _0x5ed8ad(_0x1cac52,_0x1c7874){return _0x22767a(_0x1cac52,_0x1c7874- -0x10c);}_0x3d1b0c?this['_addedHook']():(this['windData']&&(this['options'][_0x5ed8ad(-0x59,-0x15)]=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x5e15f2(_0x5653d7,_0x1830c0){return _0x22767a(_0x1830c0,_0x5653d7-0x245);}function _0x13c144(_0x355ca8,_0x5560d9){return _0xc54fe5(_0x355ca8- -0x269,_0x5560d9);}this['options']['worker']?this[_0x5e15f2(0x2c3,0x2aa)]():this['windField']=new CanvasWindField(this[_0x13c144(0x213,0x298)]);}['_addedHook'](){function _0x334187(_0x323a02,_0x4c6111){return _0xc54fe5(_0x323a02- -0x3a4,_0x4c6111);}this['canvas']=this['_createCanvas']();const _0x2dbf55={};function _0x495a05(_0x9fd0bd,_0x120919){return _0xc54fe5(_0x9fd0bd- -0x264,_0x120919);}_0x2dbf55[_0x495a05(0x319,0x386)]=!![],this['canvasContext']=this['canvas']['getContext']('2d',_0x2dbf55),this['bindEvent'](),this[_0x334187(0xd8,0xad)]['data']&&this['setData'](this[_0x495a05(0x218,0x1e6)][_0x334187(0x178,0x116)]);}['_removedHook'](){this[_0x4f6c5c(-0x112,-0xde)](),this[_0x4f6c5c(-0x10c,-0xab)]();function _0x2e2c6d(_0x207bd1,_0x2de8f7){return _0xc54fe5(_0x2de8f7- -0x5,_0x207bd1);}function _0x4f6c5c(_0x4fd821,_0x11644b){return _0x22767a(_0x4fd821,_0x11644b- -0x1b5);}this['canvas']&&(this['_map'][_0x4f6c5c(-0x12e,-0x10e)]['removeChild'](this['canvas']),delete this['canvas']);}[_0x22767a(0x1ac,0x12a)](){const _0x4aecc7=mars3d__namespace['DomUtil']['create'](_0x7e0959(0x36a,0x3a9),_0x4ad77f(-0x101,-0xad),this['_map']['container']);_0x4aecc7[_0x7e0959(0x3f4,0x3c4)][_0x7e0959(0x411,0x44e)]=_0x7e0959(0x3b4,0x43d),_0x4aecc7[_0x7e0959(0x3b0,0x3c4)][_0x4ad77f(-0x165,-0xf1)]='0px';function _0x7e0959(_0x5cfcbd,_0x5752e8){return _0xc54fe5(_0x5752e8- -0x11a,_0x5cfcbd);}function _0x4ad77f(_0xac10c1,_0x5a1111){return _0x22767a(_0x5a1111,_0xac10c1- -0x224);}return _0x4aecc7['style']['left']='0px',_0x4aecc7['style']['width']=this[_0x4ad77f(-0xde,-0x5d)][_0x4ad77f(-0x1a4,-0x1de)][_0x4ad77f(-0x186,-0x122)][_0x4ad77f(-0x15e,-0x185)]+'px',_0x4aecc7[_0x4ad77f(-0x16b,-0x122)][_0x7e0959(0x3b7,0x3d9)]=this[_0x7e0959(0x417,0x451)]['scene']['canvas'][_0x7e0959(0x411,0x3eb)]+'px',_0x4aecc7['style']['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x4aecc7['style']['zIndex']=this['options'][_0x4ad77f(-0x1c0,-0x182)]??0x9,_0x4aecc7[_0x4ad77f(-0x170,-0x1ee)]=this[_0x7e0959(0x3db,0x451)]['scene'][_0x7e0959(0x3ed,0x3a9)]['clientWidth'],_0x4aecc7['height']=this['_map']['scene'][_0x7e0959(0x375,0x3a9)]['clientHeight'],_0x4aecc7;}[_0x22767a(0xf0,0x11f)](){function _0x33637a(_0x4c9acb,_0x8811b0){return _0x22767a(_0x4c9acb,_0x8811b0-0x360);}function _0x5b113f(_0x1733ee,_0x3881ac){return _0x22767a(_0x3881ac,_0x1733ee-0x313);}this['canvas']&&(this['canvas']['style']['width']=this[_0x5b113f(0x459,0x428)][_0x5b113f(0x393,0x33a)]['canvas'][_0x33637a(0x425,0x426)]+'px',this['canvas']['style']['height']=this['_map'][_0x33637a(0x451,0x3e0)][_0x5b113f(0x3b1,0x39a)][_0x5b113f(0x3f3,0x417)]+'px',this['canvas']['width']=this['_map'][_0x5b113f(0x393,0x391)][_0x5b113f(0x3b1,0x361)][_0x33637a(0x3c2,0x426)],this['canvas']['height']=this['_map'][_0x33637a(0x36d,0x3e0)]['canvas']['clientHeight']);}['bindEvent'](){const _0x184d15=this;let _0x2597ab=Date[_0x483a40(0x529,0x555)]();function _0x483a40(_0x168f78,_0x21c86f){return _0xc54fe5(_0x21c86f-0x67,_0x168f78);}(function _0xcc5148(){if(_0x184d15['isDestroy'])return;function _0x585f72(_0x374a20,_0x109e50){return _0x483a40(_0x374a20,_0x109e50- -0x2d8);}_0x184d15['_animateFrame']=window['requestAnimationFrame'](_0xcc5148);function _0x45e8a3(_0x24c7a3,_0x168957){return _0x483a40(_0x168957,_0x24c7a3- -0x260);}if(_0x184d15['show']&&_0x184d15['windField']){const _0x2c8a9b=Date['now'](),_0xe35313=_0x2c8a9b-_0x2597ab;_0xe35313>_0x184d15[_0x585f72(0x291,0x2b9)]&&(_0x2597ab=_0x2c8a9b-_0xe35313%_0x184d15[_0x585f72(0x321,0x2b9)],_0x184d15[_0x45e8a3(0x2be,0x28b)]());}}());function _0x5eef1e(_0x4188f0,_0x6de3f9){return _0xc54fe5(_0x4188f0- -0x134,_0x6de3f9);}window['addEventListener']('resize',this[_0x5eef1e(0x410,0x432)]['bind'](this),![]),this[_0x483a40(0x5f7,0x584)]=![],this['mouse_move']=![],this['options'][_0x483a40(0x564,0x4ef)]&&(this[_0x5eef1e(0x437,0x483)]['on'](mars3d__namespace['EventType'][_0x483a40(0x5c9,0x5c5)],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace[_0x483a40(0x550,0x58b)][_0x483a40(0x54c,0x597)],this[_0x483a40(0x59b,0x5b8)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x483a40(0x489,0x4eb)],this['_onMouseUpEvent'],this));}[_0xc54fe5(0x52f,0x591)](){window['cancelAnimationFrame'](this[_0x570679(0x437,0x498)]),delete this[_0x570679(0x4d8,0x498)];function _0x4b2be9(_0x401665,_0x312393){return _0xc54fe5(_0x312393- -0x6be,_0x401665);}function _0x570679(_0x476fff,_0x36cdcc){return _0x22767a(_0x476fff,_0x36cdcc-0x425);}window['removeEventListener']('resize',this['resize']),this[_0x570679(0x4b8,0x47c)][_0x4b2be9(-0x21a,-0x236)]&&(this['_map']['off'](mars3d__namespace['EventType']['wheel'],this[_0x4b2be9(-0x1cb,-0x1a0)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['off'](mars3d__namespace[_0x4b2be9(-0x19e,-0x19a)][_0x4b2be9(-0x291,-0x23a)],this[_0x4b2be9(-0x1f3,-0x210)],this),this[_0x4b2be9(-0x166,-0x153)]['off'](mars3d__namespace[_0x570679(0x531,0x524)][_0x570679(0x4bb,0x4c8)],this[_0x570679(0x522,0x4fa)],this));}['_onMapWhellEvent'](_0x58014e){clearTimeout(this['refreshTimer']);function _0x52e109(_0x28f833,_0x49de63){return _0xc54fe5(_0x28f833- -0x55c,_0x49de63);}if(!this['show']||!this['canvas'])return;this['canvas']['style']['visibility']=_0x52e109(-0x1,-0x83),this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;function _0x29024a(_0x3055ab,_0x152a87){return _0x52e109(_0x3055ab-0x3a3,_0x152a87);}this[_0x29024a(0x308,0x296)](),this['canvas']['style']['visibility']='visible';},0xc8);}['_onMouseDownEvent'](_0x4d4c65){function _0x484116(_0x599a11,_0x3d6911){return _0xc54fe5(_0x599a11- -0x46b,_0x3d6911);}function _0x152f3a(_0x3814a2,_0x341e58){return _0x22767a(_0x341e58,_0x3814a2- -0x1b0);}this[_0x484116(0xb2,0x12e)]=!![],this[_0x152f3a(-0x6a,-0x2b)]['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x484116(0x8f,0x23)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x152f3a(-0x10d,-0x94)],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x2183cb){function _0x4ee178(_0x192f10,_0x1bb970){return _0x22767a(_0x192f10,_0x1bb970- -0x1c4);}function _0x49d2fb(_0x3308a3,_0x2f115d){return _0x22767a(_0x2f115d,_0x3308a3- -0x27b);}if(!this['show']||!this['canvas'])return;this[_0x49d2fb(-0x183,-0x1db)]&&(this[_0x49d2fb(-0x1dd,-0x1de)][_0x49d2fb(-0x1c2,-0x141)][_0x4ee178(-0x12c,-0x124)]='hidden',this['mouse_move']=!![]);}[_0xc54fe5(0x4ae,0x4dc)](_0x1d278f){if(!this[_0x5f0cd7(0x3b,0x95)]||!this['canvas'])return;this[_0x46e035(0x24a,0x1c8)]['off'](mars3d__namespace['EventType'][_0x5f0cd7(0xee,0xbb)],this['_onMouseMoveEvent'],this);this['mouse_down']&&this['mouse_move']&&this['redraw']();this['canvas']['style']['visibility']=_0x5f0cd7(0x17f,0x116),this[_0x46e035(0x179,0x17a)]=![];function _0x5f0cd7(_0x50538e,_0x199bb7){return _0x22767a(_0x50538e,_0x199bb7-0x18);}function _0x46e035(_0x54f483,_0xedcbb6){return _0x22767a(_0x54f483,_0xedcbb6-0x82);}this[_0x5f0cd7(0xfe,0x14c)]=![];}['setData'](_0x274cb2){this['clear'](),this['windData']=_0x274cb2,this['windField'][_0x919121(-0x4d,0x2f)](_0x274cb2);function _0x919121(_0x413f8e,_0xfbcc43){return _0xc54fe5(_0xfbcc43- -0x4f3,_0x413f8e);}this['redraw']();}['redraw'](){if(!this['show'])return;function _0xeb5947(_0x4c86ba,_0x3b5955){return _0xc54fe5(_0x4c86ba- -0x53e,_0x3b5955);}this[_0xeb5947(-0x68,-0x12)]['setOptions'](this['options']);function _0x500c33(_0x2a7fce,_0x2b6883){return _0xc54fe5(_0x2b6883- -0x277,_0x2a7fce);}this[_0xeb5947(-0x87,-0xf0)]();}['update'](){function _0x3d3c4f(_0x467673,_0x3bfdd6){return _0xc54fe5(_0x467673- -0x486,_0x3bfdd6);}function _0x3183c7(_0x4064c8,_0x423b59){return _0x22767a(_0x4064c8,_0x423b59- -0xa5);}if(this[_0x3183c7(0x2e,0xaa)])return;this['_updateIng']=!![];if(this[_0x3d3c4f(0x93,0x119)])this['windField']['update']();else{const _0x4eaea7=this['windField']['getParticles']();this['_drawLines'](_0x4eaea7);}this['_updateIng']=![];}['_drawLines'](_0x1d35c2){this[_0x3bad22(0x55a,0x581)]=_0x1d35c2,this['canvasContext']['globalCompositeOperation']='destination-in',this['canvasContext']['fillRect'](0x0,0x0,this[_0x3bad22(0x584,0x5eb)],this['canvasHeight']);function _0x3bad22(_0x333064,_0x9be58b){return _0x22767a(_0x333064,_0x9be58b-0x507);}function _0x586b48(_0x550f96,_0x2e1fe4){return _0x22767a(_0x550f96,_0x2e1fe4-0x38e);}this[_0x3bad22(0x509,0x55a)][_0x586b48(0x540,0x4dc)]=_0x586b48(0x383,0x3dd),this[_0x3bad22(0x588,0x55a)][_0x3bad22(0x57d,0x555)]=0.9;const _0x582144=this['_map']['scene']['mode']!==Cesium['SceneMode'][_0x3bad22(0x543,0x567)],_0x4505a6=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x1bae74=0x0,_0x59ef94=_0x1d35c2[_0x586b48(0x4de,0x460)];_0x1bae74<_0x59ef94;_0x1bae74++){const _0x56b911=_0x1d35c2[_0x1bae74],_0x47fe96=this['_tomap'](_0x56b911,_0x56b911['lng'],_0x56b911['lat'],_0x56b911[_0x586b48(0x55c,0x4de)]),_0x46ebbf=this[_0x586b48(0x3f9,0x46d)](_0x56b911,_0x56b911[_0x3bad22(0x69d,0x65e)],_0x56b911[_0x586b48(0x44e,0x483)],_0x56b911['talt']);if(!_0x47fe96||!_0x46ebbf)continue;if(_0x582144&&Math[_0x3bad22(0x69c,0x646)](_0x47fe96[0x0]-_0x46ebbf[0x0])>=_0x4505a6)continue;this['canvasContext'][_0x3bad22(0x5ae,0x5b3)](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x3bad22(0x542,0x5ac)]['getColor'](_0x56b911['speed']),this[_0x3bad22(0x4e7,0x55a)]['moveTo'](_0x47fe96[0x0],_0x47fe96[0x1]),this['canvasContext']['lineTo'](_0x46ebbf[0x0],_0x46ebbf[0x1]),this['canvasContext']['stroke']();}else{this[_0x586b48(0x423,0x3e1)]['beginPath'](),this[_0x586b48(0x3b6,0x3e1)][_0x3bad22(0x5cc,0x5b5)]=this['lineWidth'],this[_0x586b48(0x393,0x3e1)]['strokeStyle']=this['color'];for(let _0x29cb97=0x0,_0x5544c2=_0x1d35c2['length'];_0x29cb97<_0x5544c2;_0x29cb97++){const _0xfb989e=_0x1d35c2[_0x29cb97],_0x527be6=this[_0x3bad22(0x585,0x5e6)](_0xfb989e,_0xfb989e['lng'],_0xfb989e['lat'],_0xfb989e['alt']),_0x3c476d=this[_0x3bad22(0x657,0x5e6)](_0xfb989e,_0xfb989e[_0x3bad22(0x666,0x65e)],_0xfb989e[_0x3bad22(0x5dd,0x5fc)],_0xfb989e['talt']);if(!_0x527be6||!_0x3c476d)continue;if(_0x582144&&Math['abs'](_0x527be6[0x0]-_0x3c476d[0x0])>=_0x4505a6)continue;this['canvasContext'][_0x586b48(0x489,0x416)](_0x527be6[0x0],_0x527be6[0x1]),this['canvasContext']['lineTo'](_0x3c476d[0x0],_0x3c476d[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x1e6f93,_0x4ee4c1,_0x559063,_0x2d0c38){const _0x52dbad=Cesium['Cartesian3']['fromDegrees'](_0x4ee4c1,_0x559063,_0x2d0c38??this['fixedHeight']);function _0x3df83e(_0x3ca9ef,_0x363e7c){return _0x22767a(_0x363e7c,_0x3ca9ef-0x9);}const _0x2452d2=this['_map']['scene'];if(_0x2452d2['mode']===Cesium[_0x3df83e(0x15e,0x10b)]['SCENE3D']){const _0x1fcb7f=new Cesium['EllipsoidalOccluder'](_0x2452d2[_0x3e7333(-0x21,-0x3c)]['ellipsoid'],_0x2452d2[_0x3df83e(0x7d,0x11)]['positionWC']),_0x367f9a=_0x1fcb7f[_0x3e7333(0xd,-0xa)](_0x52dbad);if(!_0x367f9a)return _0x1e6f93[_0x3df83e(0x151,0x148)]=0x0,null;}const _0x1c9e67=mars3d__namespace[_0x3df83e(0x76,0xa5)]['toWindowCoordinates'](this['_map']['scene'],_0x52dbad);function _0x3e7333(_0x192c58,_0x5167d9){return _0xc54fe5(_0x5167d9- -0x51c,_0x192c58);}return _0x1c9e67?[_0x1c9e67['x'],_0x1c9e67['y']]:null;}['clear'](){this['windField'][_0xe8292e(0x362,0x31c)]();function _0xe8292e(_0x1165eb,_0x4b3c06){return _0xc54fe5(_0x1165eb- -0x19a,_0x4b3c06);}delete this['windData'];}['initWorker'](){this['worker']=new Worker(this[_0x497476(0x52e,0x5a5)][_0x497476(0x5cb,0x62b)]);function _0x497476(_0x1ad5e9,_0x5c9a91){return _0x22767a(_0x5c9a91,_0x1ad5e9-0x4d7);}function _0x58f4a7(_0x271768,_0x2881d2){return _0x22767a(_0x2881d2,_0x271768-0x3b);}this['worker']['onmessage']=_0x2f466c=>{this['_drawLines'](_0x2f466c[_0xec6d41(-0x141,-0x1a6)]['particles']);function _0xec6d41(_0x5b9016,_0xe69077){return _0x497476(_0xe69077- -0x774,_0x5b9016);}this['_updateIng2']=![];},this['windField']={'init':_0x23cd2b=>{const _0x5c1969={};function _0x2e9eb7(_0x32f141,_0x3d36f0){return _0x58f4a7(_0x32f141- -0x24b,_0x3d36f0);}_0x5c1969[_0x12a91a(0x3a8,0x375)]=_0x2e9eb7(-0x143,-0xe0);function _0x12a91a(_0x3dc7cc,_0x143fd5){return _0x497476(_0x3dc7cc- -0x1f2,_0x143fd5);}_0x5c1969[_0x12a91a(0x33c,0x3c2)]=_0x23cd2b,this[_0x2e9eb7(-0x11c,-0xe0)]['postMessage'](_0x5c1969);},'setOptions':_0x3693af=>{const _0x3699ac={};_0x3699ac[_0x2666ee(0x462,0x4cc)]=_0x2666ee(0x425,0x43c),_0x3699ac['options']=_0x3693af;function _0x394e29(_0x1ac40f,_0x379ce3){return _0x58f4a7(_0x379ce3-0x9d,_0x1ac40f);}function _0x2666ee(_0x2143d3,_0x111871){return _0x58f4a7(_0x2143d3-0x364,_0x111871);}this['worker']['postMessage'](_0x3699ac);},'setDate':_0x47b8e5=>{const _0x519715={};_0x519715['type']='setDate',_0x519715['data']=_0x47b8e5,this['worker']['postMessage'](_0x519715);},'update':()=>{if(this['_updateIng2'])return;this[_0xec2f87(0x54f,0x4dc)]=!![];function _0xec2f87(_0x2305b1,_0x7f70e){return _0x497476(_0x7f70e- -0xbf,_0x2305b1);}const _0x3996c4={};_0x3996c4['type']=_0x587ac3(-0x16e,-0x1d9);function _0x587ac3(_0xd0c447,_0x1c1288){return _0x497476(_0xd0c447- -0x6d7,_0x1c1288);}this[_0xec2f87(0x4c4,0x50c)][_0xec2f87(0x49e,0x521)](_0x3996c4);},'clear':()=>{const _0x24ffc2={};function _0xfe56db(_0x1fe6c7,_0x36ab1f){return _0x497476(_0x36ab1f- -0x294,_0x1fe6c7);}_0x24ffc2['type']='clear',this[_0xfe56db(0x34a,0x337)]['postMessage'](_0x24ffc2);}},this[_0x497476(0x588,0x5ad)][_0x58f4a7(0x108,0xd2)](this['options']);}}mars3d__namespace[_0xc54fe5(0x46e,0x4f5)][_0x22767a(0xd5,0xf3)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer'][_0x22767a(0x30,0x6f)]=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports[_0xc54fe5(0x4c9,0x4b8)]=CanvasWindField,exports[_0xc54fe5(0x494,0x480)]=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0xc54fe5(0x576,0x50f)]=WindUtil;const _0x59af2d={};function _0x22767a(_0x539ded,_0x527c9d){return _0x4240(_0x527c9d- -0x146,_0x539ded);}_0x59af2d['value']=!![],Object[_0x22767a(0x7c,0xee)](exports,'__esModule',_0x59af2d);
}));
