/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.7
 * 编译日期：2025-04-21 19:54
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0xe204d2,_0x3bdd4b){const _0x3b60fb=_0xe204d2();function _0x13dc10(_0x3e3e6d,_0x272ad0){return _0x40ab(_0x3e3e6d-0x2b,_0x272ad0);}function _0x1081e1(_0x4e40b0,_0x12f794){return _0x40ab(_0x12f794- -0x234,_0x4e40b0);}while(!![]){try{const _0x552983=-parseInt(_0x13dc10(0x2a6,0x2c0))/0x1+-parseInt(_0x1081e1(-0x2b,-0x61))/0x2*(-parseInt(_0x13dc10(0x1e5,0x194))/0x3)+parseInt(_0x13dc10(0x218,0x198))/0x4*(-parseInt(_0x13dc10(0x256,0x22b))/0x5)+-parseInt(_0x1081e1(0x29,-0x57))/0x6*(-parseInt(_0x1081e1(-0x78,0xe))/0x7)+-parseInt(_0x13dc10(0x280,0x27e))/0x8+-parseInt(_0x13dc10(0x239,0x22e))/0x9*(-parseInt(_0x1081e1(-0x3f,-0x40))/0xa)+parseInt(_0x13dc10(0x235,0x24e))/0xb*(parseInt(_0x13dc10(0x22c,0x28e))/0xc);if(_0x552983===_0x3bdd4b)break;else _0x3b60fb['push'](_0x3b60fb['shift']());}catch(_0x506581){_0x3b60fb['push'](_0x3b60fb['shift']());}}}(_0x5d86,0x406a4));function _interopNamespace(_0x4a48e8){if(_0x4a48e8&&_0x4a48e8['__esModule'])return _0x4a48e8;var _0x6a2ea0=Object[_0x581832(0x6d,0x77)](null);_0x4a48e8&&Object[_0x2642ca(0x31,0x35)](_0x4a48e8)['forEach'](function(_0x47a4ae){function _0x27e9ca(_0x4c4929,_0x12a52e){return _0x2642ca(_0x4c4929,_0x12a52e-0x392);}function _0x34fc63(_0x10209b,_0x344a67){return _0x581832(_0x344a67,_0x10209b-0x1f0);}if(_0x47a4ae!=='default'){var _0x2eca75=Object[_0x27e9ca(0x37f,0x3c2)](_0x4a48e8,_0x47a4ae);Object['defineProperty'](_0x6a2ea0,_0x47a4ae,_0x2eca75[_0x27e9ca(0x274,0x2f9)]?_0x2eca75:{'enumerable':!![],'get':function(){return _0x4a48e8[_0x47a4ae];}});}});function _0x581832(_0x3784d1,_0x4e907b){return _0x40ab(_0x4e907b- -0x224,_0x3784d1);}function _0x2642ca(_0x38017a,_0x20acf1){return _0x40ab(_0x20acf1- -0x23f,_0x38017a);}return _0x6a2ea0['default']=_0x4a48e8,_0x6a2ea0;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x1cbf27,_0x106aa3){function _0x709af8(_0x140ca9,_0x142f0a){return _0x40ab(_0x140ca9-0x12c,_0x142f0a);}const _0x5810a9=_0x1cbf27*Math['cos'](Cesium$2['Math'][_0x709af8(0x364,0x32c)](_0x106aa3));return _0x5810a9;}function _0x5d86(){const _0x19dc1c=['SCENE3D','commandToExecute','RED','_updateIng','globalAlpha','windData','setOptions','canvasHeight','onmessage','xmax','isInExtent','toRadians','clientHeight','min','absolute','values','vmin','requestRender','east','Math','fromDegrees','7ovrjeO','commandList','attributeLocations','createParticlesTextures','context','speedRate','particleSystem','clientWidth','morphComplete','container','blendEquation','getRandomLatLng','viewerParameters','_createCanvas','type','colorTextures','updateOptions','magnificationFilter','bind','3252896UJmdFm','ellipsoid','FLOAT','_addedHook','normal','refreshTimer','updatePosition','BaseLayer','SceneMode','updateWindData','getU','autoClear','stroke','lng','height','getContext','pickEllipsoid','shaderProgram','Cesium','getPrimitives','off','particlesSpeed','none','fromCssColorString','LayerUtil','rows','getOwnPropertyDescriptor','width','colorTable','componentDatatype','vdata','keys','WindUtil','mouseMove','flipY','_map','warn','WindLayer','326443CUCTiJ','pixelFormat','reverse','isDynamic','createRawRenderState','wheel','value','lastFramesPerSecond','LINEAR','particles','rgb(206,255,255)','drawingBufferHeight','steps','_onMapWhellEvent','setData','computing','update','init','clearCommand','mouse_move','useViewerBounds','frameRateMonitor','lineWidth','componentsPerAttribute','updateViewerParameters','grid','CanvasWindLayer','Unknown\x20command\x20type','mouseDown','_removedHook','camera','particlesNumber','create','previousParticlesPosition','_randomParticle','length','0px','_onMouseMoveEvent','changed','segments','cols','style','fragmentShaderSource','createWindTextures','forEach','sin','particlesTextures','outputTexture','depthTexture','wrapT','persists','samplingWindow','ymin','dynamic','dropRateBump','get','_updateIng2','createColorTableTexture','postMessage','register','worker','getUVByXY','rectangle','currentParticlesPosition','processWindData','max','bufferUsage','atan2','scene','abs','_mountedHook','rawRenderState','zIndex','data','destroy','838731YYuXwZ','visible','getSegmentDrawFragmentShader','sources','fromGeometry','CLAMP_TO_EDGE','toGridXY','primitiveType','preExecute','getParticles','fixedHeight','floor','random','geometry','CanvasWindField','mode','pointer-events','windField','rendering','umin','Cartesian2','_pointerEvents','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','primitives','DEPTH_COMPONENT','2kZVhmx','canvas','framebuffer','_onMouseUpEvent','xmin','getUpdatePositionShader','mouseUp','_setOptionsHook','lat','destination-in','3014358ledplU','canvasWidth','speedFactor','applyViewerParameters','getCalculateSpeedShader','stringify','getUVByPoint','globe','colors','segmentsDepth','vertexShaderSource','_calc_speedRate','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','maxAge','alt','RGBA','7576oKTHGR','_tomap','commandType','ymax','frameRateAdjustment','unbindEvent','age','1588030mwpwno','_speedRate','pow','depthMask','STATIC_DRAW','south','_onMouseDownEvent','_calcUV','MIN_VALUE','blending','EventType','show','mouse_down','60QwdCQs','_maxAge','color','pixelSize','west','options','getColor','tlng','array','481822uJuIvu','green','removeEventListener','pixelDatatype','9QEJwyN','uniformMap','bounds','blue','calculateSpeed','toDegrees','layer','reCreateWindTextures','push','canvasContext','addEventListener','getDefaultRenderState','PointTrans','redraw','resize','renderState','speed','windTextures','particlesTextureSize','_colorRamp','createComputingPrimitives','latitude','clear','DomUtil','strokeStyle','frameRate','_animateFrame','north','canvasWind','430iGClqh','globalCompositeOperation'];_0x5d86=function(){return _0x19dc1c;};return _0x5d86();}function getV(_0xe55860,_0x59f4f9){function _0x16e279(_0x2e0253,_0xad5bb5){return _0x40ab(_0x2e0253- -0x3d9,_0xad5bb5);}const _0x525dd0=_0xe55860*Math[_0x18a682(0x153,0xd9)](Cesium$2[_0x16e279(-0x199,-0x13d)]['toRadians'](_0x59f4f9));function _0x18a682(_0x23ef56,_0x583a23){return _0x40ab(_0x23ef56- -0x155,_0x583a23);}return _0x525dd0;}function getSpeed(_0x1904e6,_0x313a15){function _0x22ed11(_0x5294e9,_0x2b1678){return _0x40ab(_0x5294e9-0xc1,_0x2b1678);}const _0x12c637=Math['sqrt'](Math[_0xeef17a(0x30,0xa3)](_0x1904e6,0x2)+Math[_0x22ed11(0x2b7,0x2b4)](_0x313a15,0x2));function _0xeef17a(_0x31dbe6,_0x59492f){return _0x40ab(_0x59492f- -0x153,_0x31dbe6);}return _0x12c637;}function getDirection(_0x44f404,_0x5f5550){function _0x3556d8(_0xd830a4,_0x1cd8c0){return _0x40ab(_0xd830a4- -0x115,_0x1cd8c0);}let _0x4417d5=Cesium$2[_0x5951dc(0x387,0x3d5)]['toDegrees'](Math[_0x5951dc(0x362,0x347)](_0x5f5550,_0x44f404));function _0x5951dc(_0x37e207,_0x1482cf){return _0x40ab(_0x1482cf-0x195,_0x37e207);}return _0x4417d5+=_0x4417d5<0x0?0x168:0x0,_0x4417d5;}const _0x535a90={};_0x535a90['__proto__']=null,_0x535a90[_0x52c85d(0x2c3,0x24e)]=getU,_0x535a90['getV']=getV,_0x535a90['getSpeed']=getSpeed,_0x535a90['getDirection']=getDirection;var WindUtil=_0x535a90,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x2ab70b(0xff,0xc1);function _0x52c85d(_0xc74d4,_0x2bfd15){return _0x40ab(_0xc74d4-0x64,_0x2bfd15);}var postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader=_0x2ab70b(0x118,0x17a),renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x52c85d(0x2cb,0x2de)];class ShaderManager{static['getCalculateSpeedShader'](){function _0x206d1a(_0x357c11,_0x53ebac){return _0x52c85d(_0x357c11-0x341,_0x53ebac);}const _0x4d2bfa={};return _0x4d2bfa[_0x206d1a(0x562,0x548)]=[calculateSpeedShader],new ShaderSource$1(_0x4d2bfa);}static[_0x52c85d(0x23c,0x2bd)](){function _0x21b7be(_0x161cbc,_0x47987b){return _0x52c85d(_0x47987b-0x2b1,_0x161cbc);}const _0xb7db7f={};return _0xb7db7f[_0x21b7be(0x48f,0x4d2)]=[updatePositionShader],new ShaderSource$1(_0xb7db7f);}static['getSegmentDrawVertexShader'](){const _0x261c17={};return _0x261c17['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x261c17);}static[_0x2ab70b(0xeb,0x93)](){const _0x5c005b={};_0x5c005b[_0x53cded(0x270,0x209)]=[renderParticlesFragmentShader];function _0x53cded(_0xed15f4,_0x2a5f66){return _0x52c85d(_0x2a5f66- -0x18,_0xed15f4);}return new ShaderSource$1(_0x5c005b);}static['getPostProcessingPositionShader'](){function _0x18675b(_0x2dbda1,_0x42b418){return _0x2ab70b(_0x42b418-0xeb,_0x2dbda1);}const _0x164327={};return _0x164327[_0x18675b(0x157,0x1d7)]=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x164327);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0x52c85d(0x2cb,0x28b)];class CustomPrimitive{constructor(_0x5e7c42){this[_0x542f8b(0x178,0x192)]=_0x5e7c42[_0x461988(0xf,0x7)];function _0x542f8b(_0x1f738b,_0x279566){return _0x52c85d(_0x1f738b- -0xdb,_0x279566);}this['geometry']=_0x5e7c42[_0x542f8b(0x150,0xe1)],this['attributeLocations']=_0x5e7c42['attributeLocations'],this[_0x542f8b(0x14a,0x196)]=_0x5e7c42[_0x461988(-0x15,-0x27)],this[_0x542f8b(0x198,0x12d)]=_0x5e7c42[_0x542f8b(0x198,0x1a4)]||{},this[_0x461988(-0x6d,-0x1)]=_0x5e7c42[_0x542f8b(0x170,0x19b)],this['fragmentShaderSource']=_0x5e7c42['fragmentShaderSource'],this[_0x461988(0x24,-0x32)]=_0x5e7c42['rawRenderState'],this['framebuffer']=_0x5e7c42['framebuffer'],this['outputTexture']=_0x5e7c42['outputTexture'],this[_0x542f8b(0x1e9,0x180)]=_0x5e7c42[_0x542f8b(0x1e9,0x195)]??![],this['preExecute']=_0x5e7c42['preExecute'],this['show']=!![];function _0x461988(_0x2feaa3,_0x458f8f){return _0x2ab70b(_0x458f8f- -0x117,_0x2feaa3);}this['commandToExecute']=undefined,this[_0x461988(0x37,0xa5)]=undefined,this[_0x461988(0x1a,0x96)]=_0x5e7c42[_0x461988(0x1e,0x96)]??(()=>!![]),this[_0x461988(-0xc,0x78)]&&(this[_0x542f8b(0x216,0x1e0)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x2d9865){function _0x2f4abe(_0x41a5c5,_0x5df2ea){return _0x2ab70b(_0x41a5c5-0x176,_0x5df2ea);}function _0x34673f(_0x451c75,_0x5d6c41){return _0x52c85d(_0x451c75- -0x232,_0x5d6c41);}if(this[_0x34673f(0x21,0x8d)]==='Draw'){const _0x53e2b5={};_0x53e2b5['context']=_0x2d9865,_0x53e2b5['geometry']=this['geometry'],_0x53e2b5['attributeLocations']=this['attributeLocations'],_0x53e2b5['bufferUsage']=BufferUsage$1[_0x2f4abe(0x29d,0x2e8)];const _0x1473de=VertexArray$1[_0x2f4abe(0x263,0x1e4)](_0x53e2b5),_0x30bd41={};_0x30bd41['context']=_0x2d9865,_0x30bd41[_0x34673f(0x19,0x2d)]=this['vertexShaderSource'],_0x30bd41['fragmentShaderSource']=this[_0x2f4abe(0x34a,0x3c9)],_0x30bd41['attributeLocations']=this['attributeLocations'];const _0x33b4d8=ShaderProgram['fromCache'](_0x30bd41),_0x556273=RenderState['fromCache'](this[_0x2f4abe(0x25b,0x2d2)]),_0x12824c={};return _0x12824c['owner']=this,_0x12824c['vertexArray']=_0x1473de,_0x12824c['primitiveType']=this['primitiveType'],_0x12824c['modelMatrix']=Matrix4['IDENTITY'],_0x12824c[_0x34673f(0x4f,0x3b)]=_0x556273,_0x12824c['shaderProgram']=_0x33b4d8,_0x12824c['framebuffer']=this['framebuffer'],_0x12824c['uniformMap']=this['uniformMap'],_0x12824c['pass']=Pass$1['OPAQUE'],new DrawCommand(_0x12824c);}else{if(this[_0x2f4abe(0x294,0x2e6)]==='Compute'){const _0x22e9eb={};return _0x22e9eb['owner']=this,_0x22e9eb['fragmentShaderSource']=this[_0x2f4abe(0x34a,0x359)],_0x22e9eb['uniformMap']=this['uniformMap'],_0x22e9eb['outputTexture']=this['outputTexture'],_0x22e9eb[_0x2f4abe(0x352,0x318)]=!![],new ComputeCommand(_0x22e9eb);}else throw new Error(_0x34673f(0xc8,0x114));}}['setGeometry'](_0x57ba3a,_0x4add6c){this['geometry']=_0x4add6c;function _0x2b5a7c(_0x4a348d,_0x33b13c){return _0x2ab70b(_0x4a348d-0x4a0,_0x33b13c);}function _0x1622fe(_0x1a20b8,_0x6fbbd3){return _0x52c85d(_0x1a20b8-0x29e,_0x6fbbd3);}defined(this[_0x1622fe(0x530,0x4ed)])&&(this['commandToExecute']['vertexArray']=VertexArray$1[_0x1622fe(0x4c0,0x535)]({'context':_0x57ba3a,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1[_0x1622fe(0x4fa,0x476)]}));}[_0x52c85d(0x2ef,0x2e0)](_0x132226){if(!this['isDynamic']())return;function _0xfcb3d5(_0x240d57,_0x2edbd1){return _0x2ab70b(_0x2edbd1-0x3dc,_0x240d57);}function _0x17d443(_0x5c1a1a,_0x5222af){return _0x2ab70b(_0x5222af- -0x2f4,_0x5c1a1a);}if(!this[_0x17d443(-0x15a,-0x1c6)]||!defined(_0x132226))return;!defined(this['commandToExecute'])&&(this[_0xfcb3d5(0x4e7,0x539)]=this['createCommand'](_0x132226[_0xfcb3d5(0x595,0x551)]));defined(this['preExecute'])&&this[_0xfcb3d5(0x44a,0x4cd)]();if(!_0x132226[_0x17d443(-0x18a,-0x182)]){console[_0x17d443(-0x148,-0x14c)]('frameState.commandList\x20is\x20undefined');return;}defined(this[_0xfcb3d5(0x58f,0x598)])&&_0x132226[_0xfcb3d5(0x4ef,0x54e)]['push'](this[_0xfcb3d5(0x597,0x598)]),defined(this['commandToExecute'])&&_0x132226[_0x17d443(-0x16f,-0x182)]['push'](this[_0x17d443(-0x1ec,-0x197)]);}['isDestroyed'](){return![];}['destroy'](){function _0x290875(_0x40b442,_0x5c81ae){return _0x2ab70b(_0x40b442- -0x1ee,_0x5c81ae);}if(defined(this['commandToExecute'])){var _0x46897d;(_0x46897d=this[_0x290875(-0x91,-0x10f)]['shaderProgram'])===null||_0x46897d===void 0x0||_0x46897d[_0x33100d(0x42e,0x3a8)](),this['commandToExecute'][_0x290875(-0x59,-0x70)]=undefined;}function _0x33100d(_0x528628,_0x407588){return _0x52c85d(_0x407588-0x18b,_0x528628);}return destroyObject(this);}}function deepMerge(_0x43e8ed,_0x4b44fd){if(!_0x43e8ed)return _0x4b44fd;if(!_0x4b44fd)return _0x43e8ed;const _0x5a0f73={..._0x4b44fd},_0x2a3f92=_0x5a0f73;for(const _0x24820f in _0x43e8ed){if(Object['prototype']['hasOwnProperty']['call'](_0x43e8ed,_0x24820f)){const _0xf7b3fa=_0x43e8ed[_0x24820f],_0xae2a3b=_0x4b44fd[_0x24820f];if(Array['isArray'](_0xf7b3fa)){_0x2a3f92[_0x24820f]=_0xf7b3fa['slice']();continue;}if(_0xf7b3fa&&typeof _0xf7b3fa==='object'){_0x2a3f92[_0x24820f]=deepMerge(_0xf7b3fa,_0xae2a3b||{});continue;}_0xf7b3fa!==undefined&&(_0x2a3f92[_0x24820f]=_0xf7b3fa);}}return _0x2a3f92;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x543f5f,_0x5cbc57,_0x2202c0,_0x20ce3b,_0x2fb909){this[_0x125d49(0x5e4,0x5c3)]=_0x543f5f;function _0x88f025(_0x4c2701,_0x4b9036){return _0x2ab70b(_0x4c2701-0x3ab,_0x4b9036);}this[_0x88f025(0x4e0,0x4d1)]=_0x2202c0,this['viewerParameters']=_0x20ce3b,this['windData']=_0x5cbc57,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0x205eb4={};_0x205eb4[_0x125d49(0x56e,0x530)]=_0x2fb909,_0x205eb4[_0x125d49(0x5f6,0x62b)]=0x1,_0x205eb4['quietPeriod']=0x0;function _0x125d49(_0x195b5e,_0xa89a91){return _0x52c85d(_0xa89a91-0x319,_0x195b5e);}this['frameRateMonitor']=new FrameRateMonitor(_0x205eb4),this['initFrameRate'](),this['createWindTextures'](),this['createParticlesTextures'](),this['createComputingPrimitives']();}['initFrameRate'](){function _0x1d5493(_0xeb9829,_0x3f756c){return _0x52c85d(_0x3f756c- -0x9a,_0xeb9829);}const _0x369e34=()=>{function _0x2ff7f0(_0x2798ea,_0x4a0cb6){return _0x40ab(_0x4a0cb6-0x28d,_0x2798ea);}function _0x4eef74(_0x4fbd27,_0x4cee7){return _0x40ab(_0x4cee7-0x26e,_0x4fbd27);}this[_0x2ff7f0(0x538,0x51d)][_0x2ff7f0(0x4e5,0x50f)]>0x14&&(this[_0x2ff7f0(0x439,0x4b4)]=this[_0x2ff7f0(0x4a9,0x51d)][_0x2ff7f0(0x51e,0x50f)],this[_0x4eef74(0x40e,0x45f)]=0x3c/Math[_0x4eef74(0x413,0x41e)](this['frameRate'],0x1));};_0x369e34();function _0x29e6b8(_0x4fe7d0,_0x35757f){return _0x52c85d(_0x35757f- -0x350,_0x4fe7d0);}const _0x433838=setInterval(_0x369e34,0x3e8),_0x14ddf1=this[_0x1d5493(0x13a,0x183)][_0x29e6b8(-0xc6,-0x98)](this);this['destroy']=()=>{clearInterval(_0x433838),_0x14ddf1();};}['createWindTextures'](){const _0x1d5881={};_0x1d5881['minificationFilter']=TextureMinificationFilter$1[_0x567002(-0xbc,-0xa4)];function _0x22e566(_0x477b5d,_0x2b2039){return _0x2ab70b(_0x477b5d- -0x291,_0x2b2039);}_0x1d5881[_0x567002(-0xec,-0x86)]=TextureMagnificationFilter$1[_0x22e566(-0xdf,-0x92)];const _0xee1b33={'context':this['context'],'width':this[_0x567002(-0x10d,-0xb5)]['width'],'height':this[_0x22e566(-0x130,-0xd2)][_0x567002(-0xdc,-0x15d)],'pixelFormat':PixelFormat$1[_0x567002(-0x110,-0x11e)],'pixelDatatype':PixelDatatype$1[_0x22e566(-0x10b,-0x190)],'flipY':this['options']['flipY']??![],'sampler':new Sampler$1(_0x1d5881)};function _0x567002(_0x27ffa2,_0x515ee2){return _0x52c85d(_0x27ffa2- -0x3a3,_0x515ee2);}this[_0x567002(-0x120,-0x191)]={'U':new Texture$1({..._0xee1b33,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0xee1b33,'source':{'arrayBufferView':new Float32Array(this[_0x22e566(-0x130,-0xfa)]['v'][_0x567002(-0x136,-0x123)])}})};}[_0x2ab70b(0x174,0x190)](){function _0x1fb7d7(_0x5ccc12,_0x1557f9){return _0x2ab70b(_0x5ccc12-0xca,_0x1557f9);}const _0x364871={};_0x364871['minificationFilter']=TextureMinificationFilter$1['NEAREST'];function _0x256dc5(_0x123552,_0x54818c){return _0x52c85d(_0x54818c- -0x161,_0x123552);}_0x364871['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];const _0x16b5b2={'context':this['context'],'width':this[_0x1fb7d7(0x1ff,0x27c)]['particlesTextureSize'],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1[_0x1fb7d7(0x1e5,0x250)],'pixelDatatype':PixelDatatype$1[_0x1fb7d7(0x250,0x214)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0x256dc5(0x199,0x123)]*this[_0x1fb7d7(0x1ff,0x230)][_0x1fb7d7(0x219,0x1e5)]*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x364871)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x16b5b2),'currentParticlesPosition':new Texture$1(_0x16b5b2),'nextParticlesPosition':new Texture$1(_0x16b5b2),'postProcessingPosition':new Texture$1(_0x16b5b2),'particlesSpeed':new Texture$1(_0x16b5b2)};}['destroyParticlesTextures'](){function _0x372050(_0x4e76a9,_0x263cb2){return _0x2ab70b(_0x263cb2-0x152,_0x4e76a9);}function _0x2da914(_0x4f5b80,_0x1c3c28){return _0x2ab70b(_0x1c3c28-0x106,_0x4f5b80);}Object['values'](this[_0x2da914(0x2fd,0x2de)])['forEach'](_0x2fe3cb=>_0x2fe3cb[_0x372050(0x28d,0x23a)]());}[_0x2ab70b(0x151,0x13f)](){function _0x37bcbe(_0x5a1df8,_0x3f96ee){return _0x52c85d(_0x3f96ee-0x202,_0x5a1df8);}function _0x29312a(_0x1fa307,_0x3f7cae){return _0x52c85d(_0x1fa307- -0x5c,_0x3f7cae);}this[_0x29312a(0x1d9,0x19d)]={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x29312a(0x242,0x1c8)],this[_0x37bcbe(0x430,0x498)]['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v']['min'],this['windData']['v'][_0x37bcbe(0x3a3,0x416)]),'speedRange':()=>new Cartesian2$1(this[_0x29312a(0x23a,0x25d)]['speed']['min'],this['windData'][_0x37bcbe(0x4a3,0x484)]['max']),'currentParticlesPosition':()=>this[_0x29312a(0x2b1,0x256)]['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x34f864(_0x1dcc2c,_0xfe3816){return _0x29312a(_0x1dcc2c-0x2a9,_0xfe3816);}return(this['viewerParameters']['pixelSize']+0x32)*this['options'][_0x34f864(0x490,0x450)];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData']['width'],this[_0x37bcbe(0x518,0x498)][_0x37bcbe(0x52f,0x4c9)]),'minimum':()=>new Cartesian2$1(this['windData'][_0x37bcbe(0x435,0x476)]['west'],this[_0x29312a(0x23a,0x1eb)][_0x29312a(0x218,0x294)][_0x37bcbe(0x4b9,0x45f)]),'maximum':()=>new Cartesian2$1(this['windData'][_0x37bcbe(0x4b8,0x476)]['east'],this[_0x29312a(0x23a,0x2a2)]['bounds'][_0x37bcbe(0x453,0x48f)])},'fragmentShaderSource':ShaderManager[_0x29312a(0x1e9,0x1b1)](),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':()=>{const _0x12608b=this['particlesTextures'][_0x5bcc0d(0x45,-0x31)];this[_0x418896(0x194,0x171)]['previousParticlesPosition']=this[_0x5bcc0d(0x52,0xb3)]['currentParticlesPosition'],this['particlesTextures'][_0x5bcc0d(-0xa9,-0xd5)]=this['particlesTextures']['postProcessingPosition'];function _0x418896(_0x888832,_0x1c3a70){return _0x37bcbe(_0x888832,_0x1c3a70- -0x39e);}this['particlesTextures']['postProcessingPosition']=_0x12608b;function _0x5bcc0d(_0x2ecf36,_0x982986){return _0x29312a(_0x2ecf36- -0x25f,_0x982986);}this[_0x418896(0x2b,0x99)]['calculateSpeed']['commandToExecute']&&(this['primitives'][_0x418896(0x114,0xda)]['commandToExecute']['outputTexture']=this[_0x5bcc0d(0x52,0x73)]['particlesSpeed']);},'isDynamic':()=>this[_0x37bcbe(0x47b,0x46c)]['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0x29312a(0x2b1,0x237)][_0x29312a(0x1b6,0x1f8)],'particlesSpeed':()=>this[_0x37bcbe(0x4d7,0x50f)][_0x29312a(0x272,0x29b)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this[_0x37bcbe(0x4a6,0x50f)]['nextParticlesPosition'],'preExecute':()=>{function _0x3c6bfc(_0x43d7e3,_0x25145f){return _0x29312a(_0x43d7e3-0x144,_0x25145f);}function _0x35dccb(_0x464917,_0x2fbc2d){return _0x37bcbe(_0x2fbc2d,_0x464917- -0x41);}this['primitives'][_0x35dccb(0x480,0x4f7)][_0x35dccb(0x453,0x45e)]&&(this['primitives']['updatePosition'][_0x35dccb(0x453,0x3e3)][_0x3c6bfc(0x3f6,0x43c)]=this['particlesTextures']['nextParticlesPosition']);},'isDynamic':()=>this['options']['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds'][_0x37bcbe(0x462,0x46b)],this['windData']['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x37bcbe(0x4ac,0x498)]['bounds']['south'],this['windData']['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options'][_0x29312a(0x1ad,0x1e3)],'useViewerBounds':()=>this['options'][_0x37bcbe(0x56e,0x4f5)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0xb12118(_0x1bb4ac,_0x560956){return _0x29312a(_0x1bb4ac- -0x16e,_0x560956);}function _0x136904(_0x1efe37,_0x4c8938){return _0x29312a(_0x4c8938- -0x311,_0x1efe37);}this[_0x136904(-0xd4,-0x138)]['postProcessingPosition']['commandToExecute']&&(this['primitives']['postProcessingPosition'][_0xb12118(0xc8,0x53)][_0x136904(-0x9b,-0x5f)]=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this[_0x29312a(0x20e,0x25d)][_0x37bcbe(0x432,0x40a)]})};}['reCreateWindTextures'](){function _0x7c5123(_0x5d5b49,_0x4b92cd){return _0x2ab70b(_0x5d5b49- -0xbd,_0x4b92cd);}this['windTextures']['U'][_0x405881(-0x22e,-0x285)](),this['windTextures']['V'][_0x7c5123(0x2b,-0x30)]();function _0x405881(_0x237cd3,_0x528d79){return _0x2ab70b(_0x237cd3- -0x316,_0x528d79);}this[_0x405881(-0x141,-0xfe)]();}[_0x2ab70b(0x18d,0x1bd)](_0x35b391){this['windData']=_0x35b391;function _0x2c4b35(_0x46996e,_0x385c6c){return _0x2ab70b(_0x385c6c-0x476,_0x46996e);}this[_0x2c4b35(0x5b3,0x5ba)]();}[_0x2ab70b(0x181,0x16f)](_0x250ddd){const _0x59f314=_0x250ddd['flipY']!==undefined&&_0x250ddd[_0x15090b(0x2ab,0x261)]!==this['options']['flipY'];this['options']=deepMerge(_0x250ddd,this['options']);function _0x15090b(_0x44ecba,_0x5ce600){return _0x52c85d(_0x5ce600- -0x7a,_0x44ecba);}_0x59f314&&this['reCreateWindTextures']();}[_0x2ab70b(0xde,0xef)](_0x52546c){const {array:_0x4541b2}=_0x52546c;function _0x5e3887(_0x1d50b4,_0x5d4d80){return _0x2ab70b(_0x1d50b4- -0xbe,_0x5d4d80);}let {min:_0x2cc25c,max:_0x618015}=_0x52546c;const _0x470563=new Float32Array(_0x4541b2[_0x5e3887(0x10f,0xdb)]);_0x2cc25c===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x2cc25c=Math[_0x5e3887(0xab,0x2d)](..._0x4541b2));_0x618015===undefined&&(console[_0x5e3887(0xea,0xfa)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x618015=Math[_0x3bc47a(-0xef,-0xcf)](..._0x4541b2));function _0x3bc47a(_0x2e8282,_0x8dc72f){return _0x2ab70b(_0x2e8282- -0x1ce,_0x8dc72f);}const _0x520779=Math['max'](Math['abs'](_0x2cc25c),Math['abs'](_0x618015));for(let _0x55db13=0x0;_0x55db13<_0x4541b2['length'];_0x55db13++){const _0x507b53=_0x4541b2[_0x55db13]/_0x520779;_0x470563[_0x55db13]=_0x507b53;}return _0x470563;}[_0x52c85d(0x21d,0x293)](){Object[_0xb7e976(0x533,0x4b9)](this['windTextures'])['forEach'](_0x25f6d0=>_0x25f6d0['destroy']());function _0xb7e976(_0x5cf2ef,_0x41ff97){return _0x52c85d(_0x5cf2ef-0x293,_0x41ff97);}Object[_0xb7e976(0x533,0x505)](this['particlesTextures'])['forEach'](_0x12c0e0=>_0x12c0e0[_0x3e82cf(-0x13b,-0x1bf)]()),Object[_0x3e82cf(-0x10f,-0x13c)](this['primitives'])['forEach'](_0x2b773f=>_0x2b773f['destroy']());function _0x3e82cf(_0x29ae2e,_0x280f71){return _0x52c85d(_0x280f71- -0x3dc,_0x29ae2e);}this[_0xb7e976(0x587,0x50e)][_0xb7e976(0x4b0,0x50a)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x3bacc1,_0x3a969d,_0x13654b,_0x368fdc){this[_0x5204d7(0x1d0,0x1d1)]=_0x3bacc1,this['options']=_0x3a969d,this['viewerParameters']=_0x13654b;function _0x365b32(_0x470208,_0x1ab76d){return _0x52c85d(_0x470208-0x147,_0x1ab76d);}this['computing']=_0x368fdc;(typeof this['options']['particlesTextureSize']!=='number'||this[_0x365b32(0x3b1,0x377)][_0x365b32(0x3cb,0x377)]<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this[_0x5204d7(0x16a,0x191)][_0x365b32(0x3cb,0x440)]=0x100);this[_0x5204d7(0x1ff,0x1fc)]=this['createColorTableTexture'](),this['textures']=this['createRenderingTextures']();function _0x5204d7(_0x2a3e65,_0x4e56d1){return _0x52c85d(_0x4e56d1- -0xd9,_0x2a3e65);}this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this['createPrimitives']();}['createRenderingTextures'](){const _0x3ae3ab={};_0x3ae3ab[_0x116347(0x1b8,0x1cf)]=this['context'],_0x3ae3ab[_0xddabfc(0x4c5,0x4c7)]=this['context']['drawingBufferWidth'],_0x3ae3ab['height']=this[_0x116347(0x1b8,0x150)]['drawingBufferHeight'];function _0x116347(_0x3f46db,_0x401491){return _0x2ab70b(_0x3f46db-0x43,_0x401491);}_0x3ae3ab[_0x116347(0x1ee,0x1ae)]=PixelFormat['RGBA'],_0x3ae3ab[_0x116347(0x17f,0x199)]=PixelDatatype['UNSIGNED_BYTE'];const _0x405435=_0x3ae3ab,_0x16930b={};_0x16930b['context']=this[_0x116347(0x1b8,0x152)],_0x16930b['width']=this['context']['drawingBufferWidth'],_0x16930b['height']=this[_0xddabfc(0x49b,0x4bf)]['drawingBufferHeight'],_0x16930b['pixelFormat']=PixelFormat[_0xddabfc(0x427,0x4a2)],_0x16930b['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x3976bd=_0x16930b;function _0xddabfc(_0x4652df,_0x15578e){return _0x2ab70b(_0x4652df-0x326,_0x15578e);}return{'segmentsColor':new Texture(_0x405435),'segmentsDepth':new Texture(_0x3976bd)};}['createRenderingFramebuffers'](){function _0x2fc794(_0xf72529,_0x125556){return _0x52c85d(_0x125556- -0x119,_0xf72529);}function _0x385345(_0x2fb6c4,_0x3fa4eb){return _0x2ab70b(_0x3fa4eb-0x196,_0x2fb6c4);}const _0x36734f={};return _0x36734f[_0x2fc794(0x196,0x191)]=this[_0x385345(0x29f,0x30b)],_0x36734f[_0x2fc794(0x161,0x19c)]=[this['textures']['segmentsColor']],_0x36734f[_0x385345(0x38d,0x370)]=this['textures'][_0x385345(0x32c,0x2ab)],{'segments':new Framebuffer(_0x36734f)};}['destoryRenderingFramebuffers'](){function _0x34cbfc(_0x252236,_0x1de428){return _0x2ab70b(_0x1de428-0x24c,_0x252236);}Object['values'](this['framebuffers'])[_0x34cbfc(0x3e5,0x422)](_0x521182=>{function _0x1c05df(_0x4fe57c,_0x2f200f){return _0x34cbfc(_0x4fe57c,_0x2f200f- -0x9d);}_0x521182[_0x1c05df(0x2c9,0x297)]();});}[_0x2ab70b(0xd7,0x64)](){function _0x1b49c8(_0x3f93b2,_0x21e56c){return _0x2ab70b(_0x3f93b2-0x39c,_0x21e56c);}const _0x4899be=new Float32Array(this[_0x1b49c8(0x4d1,0x459)]['colors']['flatMap'](_0x3cd962=>{const _0x1bb97e=Color$1[_0x4e0ecf(0x376,0x323)](_0x3cd962);function _0x4e0ecf(_0x2e391f,_0xbf1ade){return _0x1b49c8(_0xbf1ade- -0x214,_0x2e391f);}function _0x1ea03f(_0x2760f6,_0x11da73){return _0x1b49c8(_0x11da73- -0xdf,_0x2760f6);}return[_0x1bb97e['red'],_0x1bb97e[_0x1ea03f(0x400,0x3f7)],_0x1bb97e[_0x4e0ecf(0x2d0,0x2c8)],_0x1bb97e['alpha']];}));function _0x30879e(_0x37d85f,_0x239387){return _0x52c85d(_0x37d85f- -0x319,_0x239387);}const _0x15eecc={};return _0x15eecc['minificationFilter']=TextureMinificationFilter[_0x1b49c8(0x54e,0x4c9)],_0x15eecc['magnificationFilter']=TextureMagnificationFilter['LINEAR'],_0x15eecc['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x15eecc[_0x30879e(-0x9,-0x65)]=TextureWrap[_0x30879e(-0xf6,-0xd5)],new Texture({'context':this['context'],'width':this[_0x30879e(-0xaf,-0x7b)][_0x30879e(-0xd0,-0xf2)][_0x30879e(-0x17,-0x46)],'height':0x1,'pixelFormat':PixelFormat[_0x30879e(-0xc9,-0x63)],'pixelDatatype':PixelDatatype[_0x1b49c8(0x522,0x4ab)],'sampler':new Sampler(_0x15eecc),'source':{'width':this['options']['colors']['length'],'height':0x1,'arrayBufferView':_0x4899be}});}['createSegmentsGeometry'](){const _0x471e5f=0x4,_0x1c2373=this['options']['particlesTextureSize'];let _0x29e727=[];function _0x1cb9af(_0x1dca20,_0x555bd5){return _0x2ab70b(_0x555bd5- -0x96,_0x1dca20);}for(let _0x4230d3=0x0;_0x4230d3<_0x1c2373;_0x4230d3++){for(let _0x3415c0=0x0;_0x3415c0<_0x1c2373;_0x3415c0++){for(let _0x278ce3=0x0;_0x278ce3<_0x471e5f;_0x278ce3++){_0x29e727[_0x40a187(-0x119,-0x125)](_0x4230d3/_0x1c2373),_0x29e727['push'](_0x3415c0/_0x1c2373);}}}_0x29e727=new Float32Array(_0x29e727);const _0x37b666=this['options']['particlesTextureSize']**0x2;let _0x5bc7e8=[];for(let _0x5caaef=0x0;_0x5caaef<_0x37b666;_0x5caaef++){_0x5bc7e8[_0x40a187(-0x119,-0x13f)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x5bc7e8=new Float32Array(_0x5bc7e8);let _0x3d851f=[];for(let _0x1699b6=0x0,_0x4bc201=0x0;_0x1699b6<_0x37b666;_0x1699b6++){_0x3d851f['push'](_0x4bc201+0x0,_0x4bc201+0x1,_0x4bc201+0x2,_0x4bc201+0x2,_0x4bc201+0x1,_0x4bc201+0x3),_0x4bc201+=_0x471e5f;}function _0x40a187(_0x265560,_0x346c52){return _0x52c85d(_0x265560- -0x393,_0x346c52);}_0x3d851f=new Uint32Array(_0x3d851f);const _0x535f95={};_0x535f95[_0x1cb9af(0x11a,0x10b)]=ComponentDatatype[_0x40a187(-0xd8,-0xfb)],_0x535f95[_0x1cb9af(0x1a5,0x12b)]=0x2,_0x535f95['values']=_0x29e727;const _0x3b4746={};_0x3b4746['componentDatatype']=ComponentDatatype[_0x1cb9af(0x79,0xf0)],_0x3b4746[_0x1cb9af(0xc8,0x12b)]=0x3,_0x3b4746['values']=_0x5bc7e8;const _0x3d7ea8=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x535f95),'normal':new GeometryAttribute(_0x3b4746)}),'indices':_0x3d851f});return _0x3d7ea8;}[_0x52c85d(0x2e3,0x31d)](_0x2ec136){const _0x4874f5={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x2ec136};function _0x13c9db(_0x192dde,_0x5ec346){return _0x52c85d(_0x192dde-0x43,_0x5ec346);}return Appearance[_0x13c9db(0x2c0,0x2d0)](!![],![],_0x4874f5);}['createPrimitives'](){function _0x163c3a(_0x2da459,_0x4c86a5){return _0x52c85d(_0x4c86a5- -0x3f,_0x2da459);}const _0x3cf6a7={};_0x3cf6a7['st']=0x0,_0x3cf6a7[_0x121901(0xf1,0x91)]=0x1;const _0x53f1be={};function _0x121901(_0x1df0d7,_0x12dc5c){return _0x2ab70b(_0x12dc5c- -0xf7,_0x1df0d7);}_0x53f1be['enabled']=!![];const _0x1c1632={};_0x1c1632['enabled']=!![],_0x1c1632[_0x121901(0x72,0x84)]=WebGLRenderingContext['FUNC_ADD'],_0x1c1632['blendFuncSource']=WebGLRenderingContext['SRC_ALPHA'],_0x1c1632['blendFuncDestination']=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x2470af={};_0x2470af['viewport']=undefined,_0x2470af['depthTest']=_0x53f1be,_0x2470af[_0x163c3a(0x201,0x21c)]=!![],_0x2470af[_0x121901(-0x2d,0x35)]=_0x1c1632;const _0x5a0f35=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x3cf6a7,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this['computing'][_0x121901(0x145,0xe1)][_0x121901(0xcc,0xd4)],'currentParticlesPosition':()=>this['computing'][_0x121901(0x116,0xe1)]['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this['computing']['particlesTextures'][_0x163c3a(0x2bc,0x28f)],'frameRateAdjustment':()=>this[_0x121901(0xa4,0xc2)]['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{var _0x8c7587,_0x485b9f;function _0x1aa197(_0x4f1932,_0x41e19b){return _0x121901(_0x4f1932,_0x41e19b-0xd7);}function _0x61ff10(_0x23d0ad,_0x89bd09){return _0x121901(_0x89bd09,_0x23d0ad-0x55b);}const _0x3ca2da=new Cartesian2(((_0x8c7587=this[_0x61ff10(0x599,0x519)]['domain'])===null||_0x8c7587===void 0x0?void 0x0:_0x8c7587[_0x61ff10(0x5cd,0x621)])??this['computing']['windData'][_0x61ff10(0x5b1,0x5af)]['min'],((_0x485b9f=this[_0x1aa197(0xab,0x115)]['domain'])===null||_0x485b9f===void 0x0?void 0x0:_0x485b9f['max'])??this[_0x1aa197(0x13e,0x199)]['windData'][_0x1aa197(0x17e,0x12d)]['max']);return _0x3ca2da;},'displayRange':()=>{function _0x39289a(_0x575748,_0x2e24e3){return _0x121901(_0x2e24e3,_0x575748- -0x21e);}var _0x24887e,_0x906646;const _0x912ac=new Cartesian2(((_0x24887e=this['options']['displayRange'])===null||_0x24887e===void 0x0?void 0x0:_0x24887e[_0x57b7ea(0x49b,0x47d)])??this[_0x57b7ea(0x450,0x4cd)]['windData']['speed']['min'],((_0x906646=this['options']['displayRange'])===null||_0x906646===void 0x0?void 0x0:_0x906646['max'])??this['computing']['windData']['speed'][_0x39289a(-0x236,-0x223)]);function _0x57b7ea(_0x3a2441,_0x575f0a){return _0x121901(_0x3a2441,_0x575f0a-0x40b);}return _0x912ac;},'particleHeight':()=>this['options'][_0x163c3a(0x186,0x1e9)]||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this['context'][_0x121901(0x92,0xbe)],'pixelSize':()=>this[_0x163c3a(0x28c,0x273)][_0x121901(0x67,0x3c)],'lineWidth':()=>{function _0x42ef99(_0x1dd0f1,_0x6a0e28){return _0x121901(_0x6a0e28,_0x1dd0f1-0x156);}const _0x567a10={};function _0x2887f7(_0x1c9bb2,_0x412254){return _0x163c3a(_0x1c9bb2,_0x412254-0x247);}_0x567a10['min']=0x1,_0x567a10[_0x2887f7(0x46e,0x41c)]=0x2;const _0x34955b=this['options']['lineWidth']||_0x567a10;return new Cartesian2(_0x34955b['min'],_0x34955b[_0x42ef99(0x13e,0x191)]);},'lineLength':()=>{const _0x509b59={};_0x509b59['min']=0x14,_0x509b59['max']=0x64;const _0x13414a=this['options']['lineLength']||_0x509b59;return new Cartesian2(_0x13414a['min'],_0x13414a['max']);},'is3D':()=>this['viewerParameters']['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures'][_0x121901(-0x49,0x1e)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x2470af)}),_0x22c6c7={};return _0x22c6c7['segments']=_0x5a0f35,_0x22c6c7;}['onParticlesTextureSizeChange'](){const _0x13b45e=this['createSegmentsGeometry']();this[_0x362c3b(-0x140,-0x13f)][_0x362c3b(-0x4d,-0x6e)]['geometry']=_0x13b45e;const _0x555daf={};_0x555daf[_0x4abc03(0x14f,0xcd)]=this[_0x4abc03(0x9f,0xcd)],_0x555daf['geometry']=_0x13b45e,_0x555daf[_0x362c3b(-0xb6,-0xcc)]=this[_0x4abc03(0xc0,0x58)]['segments'][_0x4abc03(0x58,0xcb)];function _0x362c3b(_0x2633b7,_0x1e43d1){return _0x2ab70b(_0x1e43d1- -0x23f,_0x2633b7);}_0x555daf[_0x4abc03(0x28,0x38)]=BufferUsage['STATIC_DRAW'];const _0x5ba4f6=VertexArray['fromGeometry'](_0x555daf);function _0x4abc03(_0x5cbd12,_0x198657){return _0x52c85d(_0x198657- -0x1dd,_0x5cbd12);}this[_0x4abc03(-0x5,0x58)]['segments'][_0x4abc03(0x10e,0xb5)]&&(this['primitives']['segments']['commandToExecute']['vertexArray']=_0x5ba4f6);}['onColorTableChange'](){this['colorTable'][_0x34770a(-0xb9,-0x116)]();function _0x34770a(_0x2059f7,_0x3d6b76){return _0x52c85d(_0x3d6b76- -0x333,_0x2059f7);}this['colorTable']=this['createColorTableTexture']();}['updateOptions'](_0x83110c){const _0x4e1b30=_0x83110c[_0x417dfc(0x4ee,0x518)]&&JSON[_0x2408bc(0xaa,0xfc)](_0x83110c[_0x2408bc(0xad,0x10f)])!==JSON['stringify'](this[_0x417dfc(0x4bd,0x539)][_0x417dfc(0x53f,0x518)]);function _0x417dfc(_0x169655,_0x37de14){return _0x52c85d(_0x37de14-0x2cf,_0x169655);}this['options']=deepMerge(_0x83110c,this['options']);function _0x2408bc(_0x86f204,_0xcc4088){return _0x2ab70b(_0x86f204- -0x67,_0xcc4088);}_0x4e1b30&&this['onColorTableChange']();}[_0x52c85d(0x21d,0x23f)](){Object['values'](this['framebuffers'])[_0xbcb08d(0x553,0x50f)](_0x1b452f=>{_0x1b452f['destroy']();});function _0xbcb08d(_0x578ca1,_0x25e63e){return _0x2ab70b(_0x578ca1-0x37d,_0x25e63e);}Object['values'](this['primitives'])[_0x400e55(0x350,0x2ec)](_0x49e260=>{_0x49e260['destroy']();});function _0x400e55(_0xfa5ac9,_0x403669){return _0x52c85d(_0x403669- -0x1f,_0xfa5ac9);}this['colorTable'][_0x400e55(0x228,0x1fe)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x52c85d(0x2cb,0x24e)];class WindParticleSystem{constructor(_0x27bd97,_0xb5fbb1,_0x2e21aa,_0x4818b7,_0x45175e){this[_0x3e4be3(0x4b1,0x4b2)]=_0x27bd97;function _0x3e4be3(_0x219bf5,_0xfe4563){return _0x52c85d(_0xfe4563-0x208,_0x219bf5);}this['options']=_0x2e21aa,this['viewerParameters']=_0x4818b7,this['computing']=new WindParticlesComputing(_0x27bd97,_0xb5fbb1,_0x2e21aa,_0x4818b7,_0x45175e),this[_0x3e4be3(0x444,0x438)]=new WindParticlesRendering(_0x27bd97,_0x2e21aa,_0x4818b7,this['computing']);function _0x41bd09(_0x3ab766,_0x225425){return _0x52c85d(_0x3ab766- -0x2ca,_0x225425);}this['clearFramebuffers']();}[_0x52c85d(0x2cc,0x2c5)](){function _0x230964(_0x509d0c,_0x112475){return _0x2ab70b(_0x112475-0x9a,_0x509d0c);}const _0x45b96c=[this[_0x230964(0x1f9,0x253)][_0x230964(0x1cd,0x19a)][_0x21b276(0x16f,0x16b)],this['computing'][_0x230964(0x1a1,0x19a)][_0x230964(0x240,0x224)],this['computing']['primitives']['postProcessingPosition'],this['rendering'][_0x21b276(0x12e,0x11b)][_0x230964(0x2dc,0x26b)]];function _0x21b276(_0x6e87bc,_0x1e201d){return _0x2ab70b(_0x6e87bc-0x2e,_0x1e201d);}return _0x45b96c;}['clearFramebuffers'](){const _0x7aa46c=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});function _0x4f6d81(_0x541f7c,_0x1ff0cc){return _0x2ab70b(_0x541f7c-0x100,_0x1ff0cc);}function _0x4d1ed4(_0x181c53,_0x560b48){return _0x2ab70b(_0x560b48-0x11f,_0x181c53);}Object[_0x4f6d81(0x2a3,0x236)](this['rendering']['framebuffers'])[_0x4f6d81(0x2d6,0x343)](_0x4c9cbf=>{function _0x32a34e(_0x3681ba,_0x3d1d86){return _0x4d1ed4(_0x3d1d86,_0x3681ba-0x37c);}_0x7aa46c[_0x2c4204(0x4fc,0x485)]=this['rendering']['framebuffers'][_0x4c9cbf];function _0x2c4204(_0x274a2b,_0x2eb38f){return _0x4d1ed4(_0x274a2b,_0x2eb38f-0x262);}_0x7aa46c['execute'](this[_0x32a34e(0x610,0x608)]);});}['changeOptions'](_0x11d24c){let _0x382f74=![];_0x11d24c[_0x3d5c90(0x151,0x1a4)]&&this['options']['particlesTextureSize']!==_0x11d24c[_0x3d5c90(0x151,0x151)]&&(_0x382f74=!![]);const _0x5ada00=deepMerge(_0x11d24c,this[_0x3d5c90(0x137,0x162)]);if(_0x5ada00['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x5ada00,this['rendering'][_0x3d5c90(0x183,0x105)](_0x11d24c),this['computing'][_0x2723d8(-0x5d,-0x7)](_0x11d24c);function _0x2723d8(_0x449dee,_0x801a42){return _0x2ab70b(_0x449dee- -0x1de,_0x801a42);}function _0x3d5c90(_0x1e1add,_0x259709){return _0x52c85d(_0x1e1add- -0x133,_0x259709);}_0x382f74&&(this[_0x2723d8(-0x25,-0x68)]['destroyParticlesTextures'](),this[_0x3d5c90(0x1bb,0x1a7)][_0x3d5c90(0x176,0x1fc)](),this['rendering']['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x536bd7){function _0x37e83f(_0x2a5645,_0x24cc81){return _0x52c85d(_0x24cc81-0xac,_0x2a5645);}this['viewerParameters']=_0x536bd7,this[_0x37e83f(0x372,0x39a)]['viewerParameters']=_0x536bd7,this['rendering']['viewerParameters']=_0x536bd7;}['destroy'](){function _0x3186dc(_0x1f24dd,_0x24d3d0){return _0x52c85d(_0x1f24dd- -0x11,_0x24d3d0);}function _0x2cb91c(_0x5818b3,_0xa1a30e){return _0x2ab70b(_0x5818b3-0x45e,_0xa1a30e);}this['computing'][_0x3186dc(0x20c,0x28f)](),this[_0x3186dc(0x21f,0x20a)]['destroy']();}}const Cesium$1=mars3d__namespace[_0x2ab70b(0x196,0x12a)],BaseLayer$1=mars3d__namespace[_0x52c85d(0x278,0x2fc)][_0x52c85d(0x2c0,0x29e)],_0x5edea6={};_0x5edea6[_0x2ab70b(0x169,0x18d)]=0x1,_0x5edea6['max']=0x2;const _0x160e67={};_0x160e67[_0x2ab70b(0x169,0xe7)]=0x14,_0x160e67['max']=0x64;const _0xe54713={};_0xe54713[_0x2ab70b(0x14f,0x1a0)]=0x64,_0xe54713['fixedHeight']=0x0,_0xe54713['lineWidth']=_0x5edea6,_0xe54713['lineLength']=_0x160e67,_0xe54713[_0x52c85d(0x243,0x1d4)]=0x1,_0xe54713['dropRate']=0.003,_0xe54713[_0x52c85d(0x209,0x195)]=0.001,_0xe54713['colors']=[_0x2ab70b(0x1b4,0x1f6)],_0xe54713[_0x52c85d(0x2db,0x281)]=![],_0xe54713[_0x2ab70b(0xd3,0x98)]=!![];const DEF_OPTIONS=_0xe54713;class WindLayer extends BaseLayer$1{constructor(_0x2509d7={}){function _0x45534b(_0x3be52e,_0x2f3956){return _0x52c85d(_0x2f3956-0x2e4,_0x3be52e);}_0x2509d7={...DEF_OPTIONS,..._0x2509d7},super(_0x2509d7),this[_0x45534b(0x4aa,0x522)](_0x2509d7,_0x2509d7);}get['layer'](){return this['primitives'];}get['data'](){function _0x1aa69b(_0x47897b,_0x4cede0){return _0x52c85d(_0x47897b- -0x3c1,_0x4cede0);}return this[_0x1aa69b(-0x157,-0x1cc)]['data'];}set['data'](_0x278d90){function _0xc2e38f(_0x5e078c,_0x34aa16){return _0x52c85d(_0x5e078c-0x111,_0x34aa16);}this[_0xc2e38f(0x37b,0x2fa)][_0x11fd5d(0x374,0x396)]=_0x278d90;function _0x11fd5d(_0x4d2517,_0x1ad782){return _0x52c85d(_0x1ad782-0x17a,_0x4d2517);}this['setData'](_0x278d90);}get['colors'](){function _0x1fb105(_0x55a2b1,_0x1fea5d){return _0x2ab70b(_0x55a2b1-0x1dc,_0x1fea5d);}return this['options'][_0x1fb105(0x2f0,0x2e1)];}set[_0x2ab70b(0x114,0x148)](_0x21c2fc){function _0x5418d6(_0x329e83,_0x16bd71){return _0x2ab70b(_0x329e83-0x495,_0x16bd71);}this[_0x5418d6(0x5ca,0x5ad)][_0x22418d(-0x16,-0x2d)]=_0x21c2fc;const _0x3f094f={};function _0x22418d(_0x4cbdd1,_0x1bd83f){return _0x2ab70b(_0x4cbdd1- -0x12a,_0x1bd83f);}_0x3f094f['colors']=_0x21c2fc,this[_0x5418d6(0x59e,0x586)](this['options'],_0x3f094f);}['_showHook'](_0x1a7bcd){_0x1a7bcd?this['_addedHook']():this['_removedHook']();}['_mountedHook'](){}[_0x2ab70b(0x187,0x1d7)](){this['scene']=this[_0x587737(0x4c4,0x4d6)][_0x59f316(0x7e,0x42)],this['camera']=this['_map']['camera'];this['options'][_0x59f316(0x83,0x20)]&&this['setData'](this['options']['data']);if(!this[_0x587737(0x47e,0x414)]||!this[_0x587737(0x44b,0x421)])return;this[_0x587737(0x49a,0x500)]={'lonRange':new Cesium$1[(_0x59f316(0x99,0x97))](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x59f316(0x7e,0x7c)]['mode']},this[_0x587737(0x4df,0x4be)]();function _0x59f316(_0x665aba,_0x586d9b){return _0x52c85d(_0x665aba- -0x199,_0x586d9b);}this[_0x587737(0x494,0x470)]=new WindParticleSystem(this['scene']['context'],this['windData'],this[_0x587737(0x452,0x3fe)],this['viewerParameters'],this[_0x59f316(0x7e,0x58)]),this['primitives']=this[_0x59f316(0x113,0xa6)][_0x59f316(0x133,0x170)](),this['primitives']['forEach'](_0x1a7021=>{this['scene']['primitives']['add'](_0x1a7021);});function _0x587737(_0x39d334,_0x416cd6){return _0x52c85d(_0x39d334-0x1e8,_0x416cd6);}this[_0x587737(0x4e5,0x4b1)]['percentageChanged']=0.01,this['camera'][_0x59f316(0x16c,0x1bf)][_0x587737(0x464,0x498)](this[_0x59f316(0x15e,0x185)]['bind'](this)),this['scene'][_0x587737(0x496,0x422)]['addEventListener'](this[_0x587737(0x4df,0x510)]['bind'](this)),window['addEventListener']('resize',this[_0x59f316(0x15e,0x188)][_0x59f316(0x11f,0x116)](this));}[_0x52c85d(0x2fc,0x304)](){function _0x299085(_0x4d62f4,_0x14f09b){return _0x52c85d(_0x14f09b- -0x291,_0x4d62f4);}this['camera']['changed']['removeEventListener'](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete']['removeEventListener'](this[_0x3a6021(0x4b4,0x436)]['bind'](this));function _0x3a6021(_0x3e1dfa,_0x5c128b){return _0x52c85d(_0x5c128b-0x13f,_0x3e1dfa);}window[_0x299085(-0x38,-0x21)]('resize',this[_0x299085(0xb3,0x66)][_0x299085(-0x28,0x27)](this)),this['primitives']&&(this['primitives']['forEach'](_0x235ea8=>{function _0x1193d4(_0x1ae4b8,_0x44d833){return _0x3a6021(_0x1ae4b8,_0x44d833-0x135);}this[_0x1193d4(0x430,0x48b)]['primitives']['remove'](_0x235ea8);}),delete this['primitives']),this[_0x299085(0x17,0x1b)]&&(this['particleSystem'][_0x3a6021(0x341,0x35c)](),delete this['particleSystem']);}[_0x52c85d(0x2ed,0x369)](_0x1df054,_0x4caa7f){function _0x2ed33f(_0x14d25c,_0x272971){return _0x52c85d(_0x14d25c- -0x3,_0x272971);}this[_0x4b3956(0x6c,0xd4)]=this[_0x2ed33f(0x210,0x25c)](_0x1df054);function _0x4b3956(_0x4a69de,_0x591d89){return _0x2ab70b(_0x591d89- -0x8d,_0x4a69de);}if(_0x4caa7f){this['_removedHook'](),this['_addedHook']();return;}this[_0x2ed33f(0x2a9,0x2c9)]?(this[_0x2ed33f(0x2a9,0x2b9)]['computing'][_0x2ed33f(0x2bf,0x2b5)](this['windData']),this['scene']['requestRender']()):this['_addedHook']();}['_setOptionsHook'](_0x5e40f7,_0x2d68c9){function _0x118578(_0x478b1f,_0x3f4f1d){return _0x2ab70b(_0x478b1f-0x2af,_0x3f4f1d);}function _0x2c2d80(_0x39cb0b,_0x5331ce){return _0x2ab70b(_0x5331ce-0x30f,_0x39cb0b);}this[_0x2c2d80(0x4e5,0x486)]&&(this['particleSystem']['changeOptions'](_0x2d68c9),this['scene'][_0x2c2d80(0x48f,0x47c)]());}['processWindData'](_0x26e2a9){var _0x384c68,_0x37a80e;const _0x543a9e={..._0x26e2a9},_0x2ee021=_0x543a9e;!_0x2ee021[_0x4640df(0x51d,0x4d3)]&&_0x2ee021[_0x4640df(0x528,0x5ab)]&&(_0x2ee021['height']=_0x2ee021[_0x4640df(0x528,0x515)]);!_0x2ee021['width']&&_0x2ee021['cols']&&(_0x2ee021[_0x4640df(0x52a,0x4b4)]=_0x2ee021['cols']);function _0x3817fe(_0x973d1a,_0x509e7a){return _0x52c85d(_0x509e7a-0x2db,_0x973d1a);}function _0x4640df(_0x1ea9c1,_0x2f60ef){return _0x2ab70b(_0x1ea9c1-0x38b,_0x2f60ef);}!_0x2ee021[_0x4640df(0x4ca,0x522)]&&(_0x2ee021[_0x4640df(0x4ca,0x517)]={'west':_0x2ee021[_0x4640df(0x491,0x47f)],'south':_0x2ee021[_0x4640df(0x569,0x570)],'east':_0x2ee021[_0x3817fe(0x5ed,0x575)],'north':_0x2ee021['ymax']});if(!_0x2ee021['u']){const _0x15854e={};_0x15854e['array']=_0x26e2a9['udata'],_0x15854e['min']=_0x26e2a9[_0x3817fe(0x52f,0x50c)],_0x15854e['max']=_0x26e2a9['umax'],_0x2ee021['u']=_0x15854e;}if(!_0x2ee021['v']){const _0x55246e={};_0x55246e[_0x4640df(0x4c3,0x4ea)]=_0x26e2a9[_0x3817fe(0x589,0x5b2)],_0x55246e['min']=_0x26e2a9[_0x3817fe(0x553,0x57c)],_0x55246e['max']=_0x26e2a9['vmax'],_0x2ee021['v']=_0x55246e;}if(((_0x384c68=_0x2ee021['speed'])===null||_0x384c68===void 0x0?void 0x0:_0x384c68['min'])===undefined||((_0x37a80e=_0x2ee021[_0x3817fe(0x5ab,0x55d)])===null||_0x37a80e===void 0x0?void 0x0:_0x37a80e['max'])===undefined||_0x2ee021['speed'][_0x4640df(0x4c3,0x4dd)]===undefined){const _0x39cff4={'array':new Float32Array(_0x2ee021['u']['array'][_0x4640df(0x558,0x5b2)]),'min':Number['MAX_VALUE'],'max':Number[_0x4640df(0x4b6,0x498)]};for(let _0x1c0f2e=0x0;_0x1c0f2e<_0x2ee021['u'][_0x4640df(0x4c3,0x502)][_0x3817fe(0x559,0x5dd)];_0x1c0f2e++){_0x39cff4['array'][_0x1c0f2e]=Math['sqrt'](_0x2ee021['u'][_0x4640df(0x4c3,0x498)][_0x1c0f2e]*_0x2ee021['u']['array'][_0x1c0f2e]+_0x2ee021['v']['array'][_0x1c0f2e]*_0x2ee021['v'][_0x4640df(0x4c3,0x4c1)][_0x1c0f2e]),_0x39cff4['array'][_0x1c0f2e]!==0x0&&(_0x39cff4['min']=Math[_0x4640df(0x4f4,0x54f)](_0x39cff4[_0x3817fe(0x5c5,0x579)],_0x39cff4[_0x4640df(0x4c3,0x47b)][_0x1c0f2e]),_0x39cff4['max']=Math[_0x4640df(0x46a,0x3f9)](_0x39cff4['max'],_0x39cff4['array'][_0x1c0f2e]));}_0x2ee021['speed']=_0x39cff4;}return _0x2ee021;}['updateViewerParameters'](){var _0x4ab25d;const _0x58cbec=this['scene'];if(!_0x58cbec)return;const _0x41d257=_0x58cbec['canvas'],_0xa5333={};_0xa5333['x']=0x0,_0xa5333['y']=0x0;function _0x379cb6(_0x2e01a1,_0x505263){return _0x52c85d(_0x2e01a1-0x2d,_0x505263);}const _0x469b41={};_0x469b41['x']=0x0,_0x469b41['y']=_0x41d257[_0x58baeb(0x149,0x130)];const _0x54758e={};_0x54758e['x']=_0x41d257[_0x379cb6(0x2da,0x32c)],_0x54758e['y']=0x0;const _0x2b7adf={};function _0x58baeb(_0x3edbbc,_0x34f83c){return _0x2ab70b(_0x34f83c- -0x38,_0x3edbbc);}_0x2b7adf['x']=_0x41d257['clientWidth'],_0x2b7adf['y']=_0x41d257['clientHeight'];const _0x347139=[_0xa5333,_0x469b41,_0x54758e,_0x2b7adf];let _0x6d18e1=0xb4,_0x1a63c8=-0xb4,_0x2be559=0x5a,_0x54273e=-0x5a,_0x338371=![];for(const _0x7de4fc of _0x347139){const _0x4ce52e=_0x58cbec[_0x379cb6(0x32a,0x317)][_0x379cb6(0x2f6,0x2ef)](new Cesium$1['Cartesian2'](_0x7de4fc['x'],_0x7de4fc['y']),_0x58cbec['globe']['ellipsoid']);if(!_0x4ce52e){_0x338371=!![];break;}const _0x607ff3=_0x58cbec[_0x379cb6(0x275,0x2ea)]['ellipsoid']['cartesianToCartographic'](_0x4ce52e),_0x3161b3=Cesium$1['Math'][_0x379cb6(0x2a4,0x2a6)](_0x607ff3['longitude']),_0x477cf7=Cesium$1['Math']['toDegrees'](_0x607ff3[_0x379cb6(0x2b4,0x311)]);_0x6d18e1=Math['min'](_0x6d18e1,_0x3161b3),_0x1a63c8=Math[_0x58baeb(0xef,0xa7)](_0x1a63c8,_0x3161b3),_0x2be559=Math[_0x379cb6(0x2cb,0x331)](_0x2be559,_0x477cf7),_0x54273e=Math['max'](_0x54273e,_0x477cf7);}if(!_0x338371){const _0x141646=new Cesium$1['Cartesian2'](Math['max'](this[_0x379cb6(0x2c3,0x2d4)][_0x379cb6(0x2a1,0x2cd)][_0x379cb6(0x296,0x259)],_0x6d18e1),Math['min'](this['windData'][_0x379cb6(0x2a1,0x25a)][_0x58baeb(0x176,0x136)],_0x1a63c8)),_0x289260=new Cesium$1['Cartesian2'](Math[_0x379cb6(0x241,0x24f)](this['windData']['bounds']['south'],_0x2be559),Math['min'](this['windData'][_0x58baeb(0xa9,0x107)]['north'],_0x54273e)),_0x5ba323=(_0x141646['y']-_0x141646['x'])*0.05,_0x1fef98=(_0x289260['y']-_0x289260['x'])*0.05;_0x141646['x']=Math['max'](this['windData'][_0x58baeb(0xe7,0x107)]['west'],_0x141646['x']-_0x5ba323),_0x141646['y']=Math['min'](this[_0x58baeb(0xb8,0x129)][_0x58baeb(0x17a,0x107)][_0x379cb6(0x2d0,0x2fc)],_0x141646['y']+_0x5ba323),_0x289260['x']=Math[_0x379cb6(0x241,0x21f)](this['windData'][_0x58baeb(0x141,0x107)][_0x58baeb(0xf3,0xf0)],_0x289260['x']-_0x1fef98),_0x289260['y']=Math['min'](this[_0x58baeb(0x114,0x129)][_0x58baeb(0xde,0x107)][_0x379cb6(0x2ba,0x314)],_0x289260['y']+_0x1fef98),this['viewerParameters']['lonRange']=_0x141646,this[_0x58baeb(0x129,0x145)]['latRange']=_0x289260;const _0x4ec1f5=this[_0x379cb6(0x2c3,0x345)][_0x58baeb(0x188,0x107)]['east']-this['windData'][_0x58baeb(0x132,0x107)][_0x379cb6(0x296,0x25b)],_0x1682c0=this[_0x58baeb(0xa5,0x129)][_0x379cb6(0x2a1,0x2e7)]['north']-this[_0x58baeb(0xe7,0x129)]['bounds']['south'],_0xfe226c=(_0x141646['y']-_0x141646['x'])/_0x4ec1f5,_0x34e172=(_0x289260['y']-_0x289260['x'])/_0x1682c0,_0x20c0cf=Math['min'](_0xfe226c,_0x34e172),_0x1a1479=0x3e8*_0x20c0cf;_0x1a1479>0x0&&(this['viewerParameters']['pixelSize']=Math[_0x58baeb(0xb9,0xa7)](0x0,Math['min'](0x3e8,_0x1a1479)));}this['viewerParameters']['sceneMode']=this[_0x379cb6(0x244,0x1ee)][_0x379cb6(0x25a,0x228)],(_0x4ab25d=this[_0x58baeb(0x197,0x13f)])===null||_0x4ab25d===void 0x0||_0x4ab25d[_0x58baeb(0x15a,0xd7)](this['viewerParameters']);}['getDataAtLonLat'](_0x206b76,_0x23a501){const {bounds:_0x3ff9e1,width:_0x4f06b4,height:_0x1f1d10,u:_0x1b6564,v:_0x3a9b1d,speed:_0x2908e0}=this['windData'],{flipY:_0x1fabee}=this['options'];if(_0x206b76<_0x3ff9e1['west']||_0x206b76>_0x3ff9e1[_0x2450ba(0x26d,0x259)]||_0x23a501<_0x3ff9e1['south']||_0x23a501>_0x3ff9e1['north'])return null;const _0x27acf1=(_0x206b76-_0x3ff9e1['west'])/(_0x3ff9e1['east']-_0x3ff9e1['west'])*(_0x4f06b4-0x1);let _0x2ef890=(_0x23a501-_0x3ff9e1[_0x2450ba(0x1a7,0x213)])/(_0x3ff9e1['north']-_0x3ff9e1['south'])*(_0x1f1d10-0x1);_0x1fabee&&(_0x2ef890=_0x1f1d10-0x1-_0x2ef890);const _0x3d720e=Math['floor'](_0x27acf1),_0x59490e=Math['floor'](_0x2ef890),_0x5f161f=Math['floor'](_0x27acf1),_0x447c50=Math[_0x4fc03d(0x1e2,0x212)](_0x5f161f+0x1,_0x4f06b4-0x1),_0x5d2125=Math[_0x4fc03d(0x1ab,0x19d)](_0x2ef890),_0x14ce7c=Math['min'](_0x5d2125+0x1,_0x1f1d10-0x1);function _0x4fc03d(_0xcce51,_0x223ddf){return _0x52c85d(_0x223ddf- -0x8c,_0xcce51);}const _0x26e7bf=_0x27acf1-_0x5f161f,_0x48386c=_0x2ef890-_0x5d2125,_0x54b42a=_0x59490e*_0x4f06b4+_0x3d720e,_0x129dd2=_0x5d2125*_0x4f06b4+_0x5f161f,_0x43a7ea=_0x5d2125*_0x4f06b4+_0x447c50,_0x320b48=_0x14ce7c*_0x4f06b4+_0x5f161f,_0xd43743=_0x14ce7c*_0x4f06b4+_0x447c50,_0x1657ad=_0x1b6564['array'][_0x129dd2],_0x2e561c=_0x1b6564['array'][_0x43a7ea],_0x258413=_0x1b6564['array'][_0x320b48],_0x19386a=_0x1b6564['array'][_0xd43743],_0x296aef=(0x1-_0x26e7bf)*(0x1-_0x48386c)*_0x1657ad+_0x26e7bf*(0x1-_0x48386c)*_0x2e561c+(0x1-_0x26e7bf)*_0x48386c*_0x258413+_0x26e7bf*_0x48386c*_0x19386a,_0x4d4b3a=_0x3a9b1d[_0x4fc03d(0x244,0x1e1)][_0x129dd2],_0x5c8d5d=_0x3a9b1d[_0x2450ba(0x217,0x223)][_0x43a7ea],_0x35474d=_0x3a9b1d[_0x4fc03d(0x21d,0x1e1)][_0x320b48];function _0x2450ba(_0x16dfec,_0x386773){return _0x2ab70b(_0x386773-0xeb,_0x16dfec);}const _0x2f69c4=_0x3a9b1d['array'][_0xd43743],_0x1627bb=(0x1-_0x26e7bf)*(0x1-_0x48386c)*_0x4d4b3a+_0x26e7bf*(0x1-_0x48386c)*_0x5c8d5d+(0x1-_0x26e7bf)*_0x48386c*_0x35474d+_0x26e7bf*_0x48386c*_0x2f69c4,_0x4b84b6=Math['sqrt'](_0x296aef*_0x296aef+_0x1627bb*_0x1627bb),_0x5a2d7e={};_0x5a2d7e['u']=_0x1b6564['array'][_0x54b42a],_0x5a2d7e['v']=_0x3a9b1d[_0x4fc03d(0x16f,0x1e1)][_0x54b42a],_0x5a2d7e[_0x4fc03d(0x176,0x1f6)]=_0x2908e0['array'][_0x54b42a];const _0x3119ea={};_0x3119ea['u']=_0x296aef,_0x3119ea['v']=_0x1627bb,_0x3119ea['speed']=_0x4b84b6;const _0x698fc0={};return _0x698fc0['original']=_0x5a2d7e,_0x698fc0['interpolated']=_0x3119ea,_0x698fc0;}}mars3d__namespace['LayerUtil'][_0x2ab70b(0xd9,0x123)]('wind',WindLayer),mars3d__namespace[_0x2ab70b(0x143,0xc3)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this[_0x2be0af(-0xa1,-0x1c)]=null,this[_0x2be0af(-0x74,0xb)]=null,this['tlat']=null;function _0x2be0af(_0x1fd32e,_0x2928e7){return _0x52c85d(_0x1fd32e- -0x2e0,_0x2928e7);}this['age']=null;function _0x38df45(_0x3e3f50,_0x5308d6){return _0x52c85d(_0x3e3f50- -0x36d,_0x5308d6);}this['speed']=null;}[_0x52c85d(0x21d,0x1bc)](){for(const _0x2fa38c in this){delete this[_0x2fa38c];}}}class CanvasWindField{constructor(_0x5184f4){this['setOptions'](_0x5184f4);}get[_0x2ab70b(0x176,0x12b)](){function _0x126b73(_0x1acb20,_0x4753f9){return _0x2ab70b(_0x1acb20-0x8b,_0x4753f9);}return this[_0x126b73(0x1af,0x16f)];}set['speedRate'](_0x548fe2){function _0x4b64c4(_0x3ffa5a,_0x2fc5f6){return _0x52c85d(_0x2fc5f6- -0x3e3,_0x3ffa5a);}this['_speedRate']=(0x64-(_0x548fe2>0x63?0x63:_0x548fe2))*0x64;function _0x5e1216(_0xab02c0,_0x1a4e02){return _0x52c85d(_0x1a4e02- -0x6e,_0xab02c0);}this['_calc_speedRate']=[(this['xmax']-this['xmin'])/this[_0x5e1216(0x254,0x1eb)],(this['ymax']-this[_0x4b64c4(-0x7c,-0xd0)])/this[_0x5e1216(0x1ef,0x1eb)]];}get['maxAge'](){return this['_maxAge'];}set['maxAge'](_0x4c3f06){function _0x20134b(_0x297a0d,_0x4cc8fb){return _0x2ab70b(_0x297a0d-0x377,_0x4cc8fb);}this[_0x20134b(0x4a8,0x45d)]=_0x4c3f06;}['setOptions'](_0x1da35e){this['options']=_0x1da35e,this['maxAge']=_0x1da35e['maxAge']||0x78;function _0x1e28ae(_0x3dcd20,_0x3f0169){return _0x52c85d(_0x3f0169-0xb7,_0x3dcd20);}this['speedRate']=_0x1da35e[_0x1e28ae(0x3cb,0x362)]||0x32,this['particles']=[];const _0x52a1fe=_0x1da35e['particlesNumber']||0x1000;function _0x3d5e33(_0x5511e9,_0x53c7ed){return _0x52c85d(_0x53c7ed- -0x1f,_0x5511e9);}for(let _0x765ee=0x0;_0x765ee<_0x52a1fe;_0x765ee++){const _0x5bbd4e=this['_randomParticle'](new CanvasParticle());this[_0x3d5e33(0x268,0x2c9)][_0x3d5e33(0x201,0x25b)](_0x5bbd4e);}}['setDate'](_0x4e2ff9){this[_0x3f530d(0x507,0x56a)]=_0x4e2ff9['rows'],this[_0x3f530d(0x548,0x59f)]=_0x4e2ff9[_0x3f530d(0x56d,0x59f)],this[_0x4461eb(0x294,0x263)]=_0x4e2ff9[_0x3f530d(0x4f9,0x4d3)];function _0x3f530d(_0x582e63,_0x4e1d08){return _0x52c85d(_0x4e1d08-0x298,_0x582e63);}this['xmax']=_0x4e2ff9[_0x3f530d(0x53a,0x532)],this['ymin']=_0x4e2ff9['ymin'],this[_0x4461eb(0x230,0x27c)]=_0x4e2ff9['ymax'],this[_0x4461eb(0x2cc,0x320)]=[];const _0x174126=_0x4e2ff9['udata'],_0x468ef6=_0x4e2ff9['vdata'];let _0x4c63fc=![];_0x174126[_0x4461eb(0x301,0x32a)]===this['rows']&&_0x174126[0x0]['length']===this['cols']&&(_0x4c63fc=!![]);let _0x31130d=0x0,_0xb026d9=null;function _0x4461eb(_0x1e7130,_0x1eb802){return _0x52c85d(_0x1eb802-0x28,_0x1e7130);}let _0x5c449a=null;for(let _0x5671e3=0x0;_0x5671e3<this['rows'];_0x5671e3++){_0xb026d9=[];for(let _0x335af3=0x0;_0x335af3<this[_0x3f530d(0x54d,0x59f)];_0x335af3++,_0x31130d++){_0x4c63fc?_0x5c449a=this[_0x3f530d(0x572,0x4f7)](_0x174126[_0x5671e3][_0x335af3],_0x468ef6[_0x5671e3][_0x335af3]):_0x5c449a=this['_calcUV'](_0x174126[_0x31130d],_0x468ef6[_0x31130d]),_0xb026d9['push'](_0x5c449a);}this['grid'][_0x3f530d(0x4fc,0x512)](_0xb026d9);}!this['options']['flipY']&&this[_0x3f530d(0x5db,0x590)][_0x4461eb(0x33b,0x309)]();}['clear'](){delete this[_0x3e399d(-0x8f,-0xb9)],delete this['cols'];function _0x3e399d(_0x4b74d7,_0x1321d8){return _0x2ab70b(_0x4b74d7- -0x22c,_0x1321d8);}function _0x87beba(_0x28ff0b,_0x4a6ed7){return _0x2ab70b(_0x28ff0b- -0x20c,_0x4a6ed7);}delete this[_0x3e399d(-0x126,-0x126)],delete this[_0x3e399d(-0xc7,-0xba)],delete this[_0x3e399d(-0x4e,-0x7c)],delete this['ymax'],delete this[_0x87beba(-0x49,0xf)],delete this['particles'];}['toGridXY'](_0x3d5a5e,_0x500450){const _0x1b8e85=(_0x3d5a5e-this['xmin'])/(this[_0x2d9b76(0x49e,0x4fc)]-this['xmin'])*(this['cols']-0x1),_0x4d4ca4=(this[_0x2d9b76(0x433,0x4b6)]-_0x500450)/(this['ymax']-this[_0x2d9b76(0x539,0x575)])*(this[_0x2b8cc3(0x4a6,0x4d3)]-0x1);function _0x2b8cc3(_0x209ed9,_0x2514f5){return _0x52c85d(_0x209ed9-0x1d4,_0x2514f5);}function _0x2d9b76(_0x2fe68b,_0x41dd40){return _0x52c85d(_0x41dd40-0x262,_0x2fe68b);}return[_0x1b8e85,_0x4d4ca4];}[_0x52c85d(0x210,0x244)](_0x56869d,_0x3292cf){if(_0x56869d<0x0||_0x56869d>=this['cols']||_0x3292cf>=this['rows'])return[0x0,0x0,0x0];const _0x19020e=Math[_0x1c899c(0x598,0x594)](_0x56869d);function _0x1c899c(_0x3e0362,_0x485b60){return _0x52c85d(_0x485b60-0x36b,_0x3e0362);}const _0x2211fa=Math['floor'](_0x3292cf);if(_0x19020e===_0x56869d&&_0x2211fa===_0x3292cf)return this['grid'][_0x3292cf][_0x56869d];const _0x396af3=_0x19020e+0x1,_0x267cc0=_0x2211fa+0x1;function _0x483c58(_0x40c3e7,_0xc13b23){return _0x2ab70b(_0x40c3e7-0x62,_0xc13b23);}const _0x122f80=this[_0x1c899c(0x5cc,0x57b)](_0x19020e,_0x2211fa),_0x3f035d=this[_0x483c58(0x13d,0x148)](_0x396af3,_0x2211fa),_0x1673d7=this[_0x483c58(0x13d,0x19e)](_0x19020e,_0x267cc0),_0xc1c2cc=this[_0x483c58(0x13d,0x143)](_0x396af3,_0x267cc0);let _0x1fa4bb=null;try{_0x1fa4bb=this['_bilinearInterpolation'](_0x56869d-_0x19020e,_0x3292cf-_0x2211fa,_0x122f80,_0x3f035d,_0x1673d7,_0xc1c2cc);}catch(_0x27da1b){console['log'](_0x56869d,_0x3292cf);}return _0x1fa4bb;}['_bilinearInterpolation'](_0x203a58,_0x4d4132,_0x44d1f6,_0x2e669d,_0x26de24,_0x6c2199){const _0x3ab54d=0x1-_0x203a58,_0x166b71=0x1-_0x4d4132,_0x4af134=_0x3ab54d*_0x166b71,_0x43079e=_0x203a58*_0x166b71,_0x1469a2=_0x3ab54d*_0x4d4132,_0x493b83=_0x203a58*_0x4d4132,_0x2aada9=_0x44d1f6[0x0]*_0x4af134+_0x2e669d[0x0]*_0x43079e+_0x26de24[0x0]*_0x1469a2+_0x6c2199[0x0]*_0x493b83,_0x43c5aa=_0x44d1f6[0x1]*_0x4af134+_0x2e669d[0x1]*_0x43079e+_0x26de24[0x1]*_0x1469a2+_0x6c2199[0x1]*_0x493b83;return this['_calcUV'](_0x2aada9,_0x43c5aa);}['_calcUV'](_0xc2531e,_0xc222c1){return[+_0xc2531e,+_0xc222c1,Math['sqrt'](_0xc2531e*_0xc2531e+_0xc222c1*_0xc222c1)];}['getUVByPoint'](_0x5dbee2,_0x569188){function _0x30287f(_0x35f6d2,_0x305932){return _0x52c85d(_0x305932- -0x339,_0x35f6d2);}if(!this[_0x5f2d91(0x57a,0x5af)](_0x5dbee2,_0x569188))return null;const _0x34bb27=this[_0x30287f(-0x9d,-0x115)](_0x5dbee2,_0x569188);function _0x5f2d91(_0x12c6ad,_0x31d3ce){return _0x52c85d(_0x12c6ad-0x2df,_0x31d3ce);}const _0x5047f8=this['getUVByXY'](_0x34bb27[0x0],_0x34bb27[0x1]);return _0x5047f8;}[_0x2ab70b(0x166,0x129)](_0x24367a,_0x5db167){function _0x5adeb8(_0x6593e4,_0x3d2cdc){return _0x2ab70b(_0x3d2cdc- -0x2ba,_0x6593e4);}return _0x24367a>=this['xmin']&&_0x24367a<=this[_0x5adeb8(-0x129,-0x155)]&&_0x5db167>=this['ymin']&&_0x5db167<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x5accc5=fRandomByfloat(this['xmin'],this['xmax']),_0x23e2d0=fRandomByfloat(this['ymin'],this[_0x248f2e(0x177,0x1fb)]);function _0x248f2e(_0x2ca387,_0x173490){return _0x52c85d(_0x173490- -0x59,_0x2ca387);}const _0x2bf8a4={};_0x2bf8a4[_0x248f2e(0x1ea,0x1e6)]=_0x23e2d0;function _0xaaa717(_0x38209c,_0x532e2b){return _0x52c85d(_0x38209c- -0x400,_0x532e2b);}return _0x2bf8a4['lng']=_0x5accc5,_0x2bf8a4;}[_0x2ab70b(0xf2,0x91)](){let _0x2a899f,_0x36bbf6,_0x2ef548;for(let _0xea7633=0x0,_0x494c8e=this['particles']['length'];_0xea7633<_0x494c8e;_0xea7633++){let _0x45de1e=this[_0x31232a(0x238,0x24c)][_0xea7633];_0x45de1e[_0x31232a(0x135,0x1bb)]<=0x0&&(_0x45de1e=this[_0x4c617f(0x400,0x436)](_0x45de1e));if(_0x45de1e[_0x31232a(0x214,0x1bb)]>0x0){const _0x3ecfc5=_0x45de1e[_0x31232a(0x1d4,0x1d0)],_0x455c48=_0x45de1e['tlat'];_0x2ef548=this[_0x31232a(0x186,0x1ab)](_0x3ecfc5,_0x455c48),_0x2ef548?(_0x2a899f=_0x3ecfc5+this[_0x4c617f(0x34b,0x2ee)][0x0]*_0x2ef548[0x0],_0x36bbf6=_0x455c48+this[_0x4c617f(0x34b,0x310)][0x1]*_0x2ef548[0x1],_0x45de1e['lng']=_0x3ecfc5,_0x45de1e['lat']=_0x455c48,_0x45de1e['tlng']=_0x2a899f,_0x45de1e['tlat']=_0x36bbf6,_0x45de1e['speed']=_0x2ef548[0x2],_0x45de1e['age']--):_0x45de1e[_0x31232a(0x23a,0x1bb)]=0x0;}}function _0x31232a(_0x26f142,_0x45a077){return _0x52c85d(_0x45a077- -0x9c,_0x26f142);}function _0x4c617f(_0x288755,_0xe457b0){return _0x2ab70b(_0x288755-0x234,_0xe457b0);}return this['particles'];}[_0x52c85d(0x301,0x29a)](_0x49d33e){let _0x25dc83,_0x4ccef6;for(let _0x5627d7=0x0;_0x5627d7<0x1e;_0x5627d7++){_0x25dc83=this[_0x5d7783(0x70,0x75)](),_0x4ccef6=this[_0x32a8e3(0x2c2,0x295)](_0x25dc83[_0x32a8e3(0x2cb,0x314)],_0x25dc83['lat']);if(_0x4ccef6&&_0x4ccef6[0x2]>0x0)break;}function _0x5d7783(_0x1c1e4f,_0x313adb){return _0x52c85d(_0x313adb- -0x23c,_0x1c1e4f);}if(!_0x4ccef6)return _0x49d33e;const _0x216c48=_0x25dc83['lng']+this['_calc_speedRate'][0x0]*_0x4ccef6[0x0],_0x47b2f9=_0x25dc83[_0x32a8e3(0x2ec,0x28d)]+this[_0x32a8e3(0x298,0x29a)][0x1]*_0x4ccef6[0x1];_0x49d33e[_0x32a8e3(0x2c6,0x314)]=_0x25dc83['lng'],_0x49d33e['lat']=_0x25dc83['lat'],_0x49d33e[_0x32a8e3(0x32a,0x2ba)]=_0x216c48,_0x49d33e['tlat']=_0x47b2f9,_0x49d33e['age']=Math['round'](0xa+Math[_0x32a8e3(0x2c8,0x278)]()*this[_0x32a8e3(0x31c,0x29c)]);function _0x32a8e3(_0x110508,_0x2a2e3){return _0x2ab70b(_0x2a2e3-0x183,_0x110508);}return _0x49d33e[_0x5d7783(0x50,0x46)]=_0x4ccef6[0x2],_0x49d33e;}[_0x2ab70b(0xe8,0x8d)](){for(const _0x3dfc22 in this){delete this[_0x3dfc22];}}}function fRandomByfloat(_0x52423f,_0x42f964){return _0x52423f+Math['random']()*(_0x42f964-_0x52423f);}const Cesium=mars3d__namespace[_0x2ab70b(0x196,0x20e)],BaseLayer=mars3d__namespace[_0x52c85d(0x278,0x254)]['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0xb6b80={}){super(_0xb6b80);function _0x22de4f(_0x79cfe4,_0x3ec21f){return _0x2ab70b(_0x3ec21f- -0xdc,_0x79cfe4);}this['_setOptionsHook'](_0xb6b80);function _0x4661a6(_0x53e601,_0x48de61){return _0x52c85d(_0x48de61-0x270,_0x53e601);}this['canvas']=null,_0xb6b80['colors']&&_0xb6b80[_0x22de4f(0xa2,0xda)]&&(this[_0x22de4f(0xe,0x74)]=new mars3d__namespace['ColorRamp'](_0xb6b80));}['_setOptionsHook'](_0xa59a6b,_0x5a6d09){this['frameTime']=0x3e8/(_0xa59a6b['frameRate']||0xa),this[_0x44b2e4(-0x4b,0x19)]=this['options']['pointerEvents']??![],this[_0x1496da(0x60a,0x5b3)]=_0xa59a6b[_0x1496da(0x60d,0x5b3)]||'#ffffff';function _0x1496da(_0x5c90d3,_0x46e5f6){return _0x2ab70b(_0x46e5f6-0x481,_0x5c90d3);}function _0x44b2e4(_0x870ff6,_0x1b654c){return _0x2ab70b(_0x1b654c- -0xe5,_0x870ff6);}this[_0x44b2e4(0x62,0xdb)]=_0xa59a6b['lineWidth']||0x1,this[_0x44b2e4(0x12,0xe)]=_0xa59a6b[_0x1496da(0x59f,0x574)]??0x0,this[_0x1496da(0x6a5,0x627)]=_0xa59a6b['flipY']??![],this['windField']&&this[_0x1496da(0x52c,0x57b)]['setOptions'](_0xa59a6b);}get[_0x2ab70b(0x143,0x113)](){function _0x4ee764(_0x42e027,_0x5b9c62){return _0x52c85d(_0x5b9c62- -0x1a4,_0x42e027);}return this[_0x4ee764(0xf9,0x94)];}get['canvasWidth'](){return this['_map']['scene']['canvas']['clientWidth'];}get['canvasHeight'](){return this['_map']['scene']['canvas']['clientHeight'];}get['pointerEvents'](){function _0x3a82dc(_0x33d29c,_0x1377de){return _0x52c85d(_0x1377de-0x21f,_0x33d29c);}return this[_0x3a82dc(0x3e9,0x452)];}set['pointerEvents'](_0xdc11d2){function _0x43ab6e(_0xaaf40c,_0x2a53cd){return _0x2ab70b(_0xaaf40c-0x2f1,_0x2a53cd);}this[_0x43ab6e(0x3ef,0x3e3)]=_0xdc11d2;if(!this['canvas'])return;function _0x238e15(_0x2975fb,_0xe2ce35){return _0x2ab70b(_0x2975fb-0x375,_0xe2ce35);}_0xdc11d2?this['canvas']['style'][_0x238e15(0x46e,0x4a3)]='all':this[_0x238e15(0x478,0x40e)]['style']['pointer-events']='none';}get[_0x52c85d(0x2fe,0x34e)](){return this['options']['particlesNumber'];}set[_0x52c85d(0x2fe,0x2cc)](_0x47a955){this[_0x4475b5(0x2ed,0x2ef)]['particlesNumber']=_0x47a955,clearTimeout(this['_canrefresh']);function _0x4475b5(_0x2a7657,_0x494dec){return _0x2ab70b(_0x2a7657-0x1b8,_0x494dec);}this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x368344(_0x5319f9,_0x36a741){return _0x52c85d(_0x5319f9-0x18a,_0x36a741);}return this[_0x368344(0x3f4,0x3f0)]['speedRate'];}set['speedRate'](_0x16a66e){function _0xb68f3d(_0x34e945,_0xf95414){return _0x2ab70b(_0xf95414- -0x2c7,_0x34e945);}this[_0xb68f3d(-0x1aa,-0x192)]['speedRate']=_0x16a66e;function _0x2ae11f(_0x3cee61,_0x3de3ee){return _0x2ab70b(_0x3de3ee-0x407,_0x3cee61);}this['windField']&&(this[_0xb68f3d(-0x18f,-0x1cd)][_0xb68f3d(-0x11b,-0x151)]=_0x16a66e);}get['maxAge'](){function _0x226394(_0x36a28e,_0x5d34dc){return _0x2ab70b(_0x36a28e- -0x3e,_0x5d34dc);}return this[_0x226394(0xf7,0xad)]['maxAge'];}set['maxAge'](_0x4e8ec4){this[_0x3a2545(0x85,0x3)]['maxAge']=_0x4e8ec4;function _0x3a2545(_0x3c6daf,_0x33fa74){return _0x2ab70b(_0x33fa74- -0x132,_0x3c6daf);}function _0x57dca9(_0x74b85,_0x42df7e){return _0x2ab70b(_0x74b85- -0x244,_0x42df7e);}this[_0x57dca9(-0x14a,-0x15b)]&&(this['windField']['maxAge']=_0x4e8ec4);}get['data'](){return this['windData'];}set['data'](_0x1ca085){function _0x382d0b(_0x48db4d,_0x25433d){return _0x2ab70b(_0x48db4d-0x1cd,_0x25433d);}this[_0x382d0b(0x385,0x40b)](_0x1ca085);}get[_0x2ab70b(0xdc,0xac)](){function _0x3a17b7(_0xf84457,_0x152ba5){return _0x52c85d(_0xf84457-0x384,_0x152ba5);}let _0x412f5e=this[_0x4fdc95(0xec,0x6a)]['xmin'],_0x573a20=this['windData']['xmax'],_0x5b2dcf=this['windData']['ymin'],_0x481ba9=this['windData'][_0x4fdc95(0xaa,0x11f)];_0x573a20>=0x167&&_0x412f5e===0x0&&(_0x412f5e=-0xb4,_0x573a20=0xb4);_0x412f5e=Math[_0x3a17b7(0x598,0x595)](_0x412f5e,-0xb4),_0x573a20=Math['min'](_0x573a20,0xb4);function _0x4fdc95(_0x15a263,_0x114d74){return _0x2ab70b(_0x15a263- -0x75,_0x114d74);}return _0x5b2dcf=Math[_0x3a17b7(0x598,0x617)](_0x5b2dcf,-0x5a),_0x481ba9=Math[_0x4fdc95(0xf4,0x161)](_0x481ba9,0x5a),Cesium['Rectangle'][_0x3a17b7(0x629,0x5f9)](_0x412f5e,_0x5b2dcf,_0x573a20,_0x481ba9);}['_showHook'](_0x1d0982){_0x1d0982?this['_addedHook']():(this['windData']&&(this['options']['data']=this['windData']),this['_removedHook']());}[_0x2ab70b(0xe4,0x13d)](){function _0x32af54(_0x192717,_0x24a1ee){return _0x2ab70b(_0x24a1ee- -0x296,_0x192717);}function _0x113ae1(_0x22c389,_0x1cab8f){return _0x2ab70b(_0x1cab8f-0x2e5,_0x22c389);}this['options']['worker']?this['initWorker']():this[_0x32af54(-0x130,-0x19c)]=new CanvasWindField(this[_0x113ae1(0x407,0x41a)]);}[_0x2ab70b(0x187,0x1e8)](){this['canvas']=this[_0x3c3038(0x27f,0x207)]();function _0x597cff(_0x148d5c,_0x59fbb2){return _0x52c85d(_0x59fbb2- -0x13b,_0x148d5c);}const _0x16ca95={};function _0x3c3038(_0xf7ed2f,_0x5b1217){return _0x2ab70b(_0x5b1217-0x89,_0xf7ed2f);}_0x16ca95['willReadFrequently']=!![],this['canvasContext']=this['canvas'][_0x3c3038(0x25c,0x21c)]('2d',_0x16ca95),this['bindEvent'](),this['options']['data']&&this['setData'](this[_0x597cff(0x150,0x12f)][_0x3c3038(0x164,0x170)]);}[_0x2ab70b(0x1c7,0x167)](){this['clear'](),this[_0x5de18c(0x491,0x47d)]();function _0x35d210(_0x291c54,_0x48a870){return _0x52c85d(_0x291c54- -0x5f,_0x48a870);}function _0x5de18c(_0x51a405,_0x4bdd97){return _0x2ab70b(_0x4bdd97-0x35c,_0x51a405);}this[_0x5de18c(0x449,0x45f)]&&(this['_map'][_0x5de18c(0x490,0x4d6)]['removeChild'](this[_0x5de18c(0x406,0x45f)]),delete this['canvas']);}['_createCanvas'](){function _0x2ec785(_0x529cca,_0x33c299){return _0x52c85d(_0x529cca- -0x2ee,_0x33c299);}const _0x10e758=mars3d__namespace[_0xaca379(0x563,0x571)][_0xaca379(0x620,0x5e7)](_0xaca379(0x595,0x520),'mars3d-canvasWind',this['_map']['container']);_0x10e758[_0x2ec785(0x1a,0x3b)]['position']=_0x2ec785(-0x4f,-0x20),_0x10e758[_0xaca379(0x5cc,0x5f0)]['top']=_0x2ec785(0x15,0x52);function _0xaca379(_0x4b910c,_0x5db418){return _0x2ab70b(_0x5db418-0x41d,_0x4b910c);}return _0x10e758[_0x2ec785(0x1a,0x9d)]['left']='0px',_0x10e758['style'][_0xaca379(0x59f,0x5bc)]=this['_map']['scene']['canvas'][_0x2ec785(-0x41,0xa)]+'px',_0x10e758[_0x2ec785(0x1a,0x72)]['height']=this[_0x2ec785(-0x12,0x30)]['scene'][_0xaca379(0x53a,0x520)][_0xaca379(0x52d,0x585)]+'px',_0x10e758['style']['pointerEvents']=this['_pointerEvents']?'auto':_0x2ec785(-0x1f,-0x9),_0x10e758['style']['zIndex']=this[_0x2ec785(-0x84,-0x25)][_0x2ec785(-0xd3,-0xac)]??0x9,_0x10e758['width']=this['_map']['scene']['canvas'][_0xaca379(0x5c5,0x595)],_0x10e758['height']=this[_0x2ec785(-0x12,0x28)]['scene']['canvas']['clientHeight'],_0x10e758;}['resize'](){function _0x4ccde5(_0x2bac38,_0x3ea3b6){return _0x52c85d(_0x3ea3b6-0x21c,_0x2bac38);}function _0x48c214(_0xa6d61d,_0x3bbb05){return _0x2ab70b(_0x3bbb05-0x382,_0xa6d61d);}this[_0x48c214(0x4af,0x485)]&&(this['canvas']['style']['width']=this['_map']['scene'][_0x4ccde5(0x416,0x454)]['clientWidth']+'px',this[_0x4ccde5(0x401,0x454)]['style'][_0x48c214(0x539,0x514)]=this['_map'][_0x4ccde5(0x44d,0x433)]['canvas']['clientHeight']+'px',this[_0x4ccde5(0x4a9,0x454)]['width']=this['_map']['scene']['canvas'][_0x4ccde5(0x501,0x4c9)],this['canvas']['height']=this[_0x4ccde5(0x525,0x4f8)]['scene'][_0x48c214(0x489,0x485)][_0x4ccde5(0x536,0x4b9)]);}['bindEvent'](){const _0x2f8ee9=this;let _0x533304=Date['now']();(function _0x26a893(){function _0x37e67a(_0x325e3f,_0x1e5de8){return _0x40ab(_0x1e5de8-0xd6,_0x325e3f);}if(_0x2f8ee9['isDestroy'])return;_0x2f8ee9['_animateFrame']=window['requestAnimationFrame'](_0x26a893);if(_0x2f8ee9['show']&&_0x2f8ee9[_0x37e67a(0x271,0x2a1)]){const _0x1e0f1f=Date['now'](),_0x1334f3=_0x1e0f1f-_0x533304;_0x1334f3>_0x2f8ee9['frameTime']&&(_0x533304=_0x1e0f1f-_0x1334f3%_0x2f8ee9['frameTime'],_0x2f8ee9['update']());}}(),window[_0x3c376b(-0x86,-0xad)](_0x586104(0xbf,0x46),this['resize'][_0x3c376b(0x10,-0x71)](this),![]),this[_0x586104(0xa3,0xd0)]=![]);function _0x586104(_0x4143d4,_0x301428){return _0x52c85d(_0x4143d4- -0x1c1,_0x301428);}this['mouse_move']=![];function _0x3c376b(_0x554411,_0x26b942){return _0x2ab70b(_0x26b942- -0x1f4,_0x554411);}this['options']['mouseHidden']&&(this[_0x586104(0x11b,0x9f)]['on'](mars3d__namespace[_0x586104(0xa1,0x40)][_0x586104(0x123,0x153)],this['_onMapWhellEvent'],this),this[_0x586104(0x11b,0xd1)]['on'](mars3d__namespace[_0x3c376b(-0x94,-0xc7)]['mouseDown'],this[_0x586104(0x9d,0x11a)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x3c376b(-0xb5,-0xec)],this[_0x586104(0x79,0x4b)],this));}['unbindEvent'](){function _0x5a46cd(_0x1e4d52,_0x33bf30){return _0x2ab70b(_0x1e4d52- -0x184,_0x33bf30);}window['cancelAnimationFrame'](this[_0x5a46cd(-0x2d,-0x9)]),delete this['_animateFrame'];function _0x39a98d(_0x4ad800,_0x42b162){return _0x2ab70b(_0x4ad800- -0x12e,_0x42b162);}window[_0x5a46cd(-0x49,-0x96)]('resize',this[_0x39a98d(0x1d,0x1b)]),this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace[_0x5a46cd(-0x57,-0xd1)][_0x5a46cd(0x2b,0x2e)],this[_0x39a98d(0x89,0x7f)],this),this['_map']['off'](mars3d__namespace[_0x5a46cd(-0x57,-0x5)][_0x39a98d(0x98,0x9a)],this['_onMouseDownEvent'],this),this[_0x5a46cd(0x23,0x28)][_0x39a98d(0x6a,0x10)](mars3d__namespace['EventType']['mouseUp'],this[_0x39a98d(-0x29,0x13)],this),this['_map']['off'](mars3d__namespace['EventType'][_0x5a46cd(0x21,-0x46)],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x488e3d){clearTimeout(this['refreshTimer']);function _0x9c15af(_0x1de8d0,_0x2d0b2e){return _0x2ab70b(_0x2d0b2e-0x1f9,_0x1de8d0);}if(!this['show']||!this[_0x9c15af(0x2a0,0x2fc)])return;this[_0x9c15af(0x301,0x2fc)]['style']['visibility']='hidden';function _0x338a5f(_0x682772,_0x2698c7){return _0x2ab70b(_0x2698c7-0x1a4,_0x682772);}this[_0x9c15af(0x38e,0x382)]=setTimeout(()=>{if(!this[_0x358572(-0x199,-0x129)])return;function _0x358572(_0x35a8ec,_0x82205d){return _0x338a5f(_0x82205d,_0x35a8ec- -0x46b);}function _0x46d4b0(_0x252790,_0x32a488){return _0x9c15af(_0x32a488,_0x252790-0x129);}this[_0x358572(-0x17d,-0x1ef)](),this[_0x358572(-0x1c4,-0x160)][_0x46d4b0(0x4f5,0x522)]['visibility']=_0x46d4b0(0x40c,0x3dd);},0xc8);}['_onMouseDownEvent'](_0x565b5f){this['mouse_down']=!![],this['_map'][_0x2c8165(-0x13d,-0xc5)](mars3d__namespace['EventType'][_0x26c6c9(0x59a,0x5c9)],this['_onMouseMoveEvent'],this);function _0x26c6c9(_0x4145e1,_0x2bb5f5){return _0x52c85d(_0x2bb5f5-0x2ef,_0x4145e1);}function _0x2c8165(_0xf15a70,_0x2991da){return _0x52c85d(_0xf15a70- -0x40a,_0x2991da);}this[_0x26c6c9(0x559,0x5cb)]['on'](mars3d__namespace['EventType'][_0x2c8165(-0x130,-0x1b4)],this[_0x2c8165(-0x106,-0x165)],this);}[_0x52c85d(0x304,0x346)](_0x4b15e7){function _0x3ac0fa(_0x25ad3b,_0x9b936b){return _0x52c85d(_0x25ad3b-0x129,_0x9b936b);}if(!this['show']||!this['canvas'])return;this['mouse_down']&&(this['canvas']['style']['visibility']='hidden',this[_0x3ac0fa(0x41b,0x3aa)]=!![]);}['_onMouseUpEvent'](_0x3844b0){if(!this[_0x2c9c70(0x167,0x144)]||!this['canvas'])return;this['_map'][_0x2c9c70(0x16b,0x1ae)](mars3d__namespace['EventType']['mouseMove'],this[_0x2c9c70(0x254,0x1e5)],this);function _0x5a9251(_0x49d5f4,_0x5f2db7){return _0x2ab70b(_0x49d5f4-0x165,_0x5f2db7);}function _0x2c9c70(_0x23358e,_0x4c8e27){return _0x2ab70b(_0x4c8e27-0x16,_0x23358e);}this[_0x2c9c70(0x133,0x145)]&&this['mouse_move']&&this['redraw'](),this[_0x2c9c70(0xf0,0x119)]['style']['visibility']=_0x2c9c70(0x121,0x100),this['mouse_down']=![],this['mouse_move']=![];}['setData'](_0x13c078){this['clear'](),this['windData']=_0x13c078;function _0x5abf8f(_0x4fb2a9,_0x1d59b0){return _0x52c85d(_0x1d59b0- -0x37f,_0x4fb2a9);}this[_0x5abf8f(-0x1bb,-0x150)]['setDate'](_0x13c078),this['redraw']();}['redraw'](){if(!this[_0x3fabbd(0x31d,0x38c)])return;function _0x3fabbd(_0x429eaf,_0x2aa84c){return _0x2ab70b(_0x2aa84c-0x25e,_0x429eaf);}this[_0x4b214c(0x382,0x402)][_0x4b214c(0x3ea,0x3bb)](this[_0x4b214c(0x3bd,0x3b5)]);function _0x4b214c(_0x2d091c,_0x3fffef){return _0x52c85d(_0x2d091c-0x153,_0x3fffef);}this['update']();}[_0x2ab70b(0x1ba,0x159)](){if(this['_updateIng'])return;this['_updateIng']=!![];function _0x38f94c(_0x3e2cc3,_0x56856e){return _0x52c85d(_0x56856e-0x2b2,_0x3e2cc3);}if(this[_0x59eb3a(-0x194,-0x167)])this['windField']['update']();else{const _0x2fe763=this['windField']['getParticles']();this['_drawLines'](_0x2fe763);}function _0x59eb3a(_0x5215f1,_0x6ab691){return _0x2ab70b(_0x5215f1- -0x26e,_0x6ab691);}this[_0x38f94c(0x5a7,0x546)]=![];}['_drawLines'](_0x4f3111){this['_canvasParticles']=_0x4f3111,this['canvasContext'][_0x549f6e(0x105,0xbf)]=_0x549f6e(0xb5,0x130),this[_0x565776(0x31e,0x2cb)]['fillRect'](0x0,0x0,this[_0x565776(0x2e5,0x293)],this[_0x565776(0x33b,0x3b8)]);function _0x549f6e(_0x24ae29,_0x150321){return _0x2ab70b(_0x24ae29- -0x56,_0x150321);}this['canvasContext']['globalCompositeOperation']='lighter',this[_0x549f6e(0xf0,0x100)][_0x565776(0x338,0x323)]=0.9;const _0x1c1c28=this['_map'][_0x549f6e(0x8c,0xd3)][_0x549f6e(0xa2,0x9f)]!==Cesium[_0x565776(0x364,0x312)][_0x549f6e(0x106,0x10e)],_0x1c850c=this['canvasWidth']*0.25;function _0x565776(_0x52511d,_0x28d3e8){return _0x52c85d(_0x52511d-0xa3,_0x28d3e8);}if(this[_0x549f6e(0xfa,0xa9)])for(let _0x3ce4d4=0x0,_0x4bf055=_0x4f3111[_0x565776(0x3a5,0x363)];_0x3ce4d4<_0x4bf055;_0x3ce4d4++){const _0x4af974=_0x4f3111[_0x3ce4d4],_0x656c62=this[_0x549f6e(0xc7,0x14c)](_0x4af974,_0x4af974['lng'],_0x4af974[_0x549f6e(0xb4,0x6a)],_0x4af974['alt']),_0x58f4e7=this[_0x565776(0x2f5,0x2c1)](_0x4af974,_0x4af974[_0x565776(0x30f,0x2c4)],_0x4af974['tlat'],_0x4af974['talt']);if(!_0x656c62||!_0x58f4e7)continue;if(_0x1c1c28&&Math[_0x549f6e(0x8d,0x3c)](_0x656c62[0x0]-_0x58f4e7[0x0])>=_0x1c850c)continue;this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x565776(0x31e,0x34a)][_0x549f6e(0xff,0x7e)]=this['_colorRamp'][_0x565776(0x30e,0x344)](_0x4af974[_0x565776(0x325,0x30d)]),this['canvasContext']['moveTo'](_0x656c62[0x0],_0x656c62[0x1]),this['canvasContext']['lineTo'](_0x58f4e7[0x0],_0x58f4e7[0x1]),this['canvasContext'][_0x549f6e(0x13a,0x117)]();}else{this[_0x565776(0x31e,0x2fc)]['beginPath'](),this[_0x549f6e(0xf0,0x72)][_0x565776(0x398,0x3fd)]=this['lineWidth'],this[_0x565776(0x31e,0x329)][_0x549f6e(0xff,0xf0)]=this[_0x549f6e(0xdc,0x78)];for(let _0x9eb2ae=0x0,_0x25f42e=_0x4f3111['length'];_0x9eb2ae<_0x25f42e;_0x9eb2ae++){const _0x2ca57a=_0x4f3111[_0x9eb2ae],_0x2cf35d=this['_tomap'](_0x2ca57a,_0x2ca57a[_0x549f6e(0x13b,0x163)],_0x2ca57a['lat'],_0x2ca57a[_0x549f6e(0xc4,0x40)]),_0x50c93c=this['_tomap'](_0x2ca57a,_0x2ca57a[_0x565776(0x30f,0x390)],_0x2ca57a['tlat'],_0x2ca57a['talt']);if(!_0x2cf35d||!_0x50c93c)continue;if(_0x1c1c28&&Math['abs'](_0x2cf35d[0x0]-_0x50c93c[0x0])>=_0x1c850c)continue;this[_0x549f6e(0xf0,0x176)]['moveTo'](_0x2cf35d[0x0],_0x2cf35d[0x1]),this['canvasContext']['lineTo'](_0x50c93c[0x0],_0x50c93c[0x1]);}this['canvasContext'][_0x565776(0x368,0x2fd)]();}}['_tomap'](_0x9c2762,_0x567e21,_0x5861f6,_0x1b1d90){function _0x4e9b9d(_0x35f72a,_0x4cdc13){return _0x2ab70b(_0x35f72a-0x320,_0x4cdc13);}const _0x44bf49=Cesium['Cartesian3'][_0x4e9b9d(0x490,0x424)](_0x567e21,_0x5861f6,_0x1b1d90??this['fixedHeight']),_0x3acb65=this['_map'][_0xed31c3(-0x73,-0x6a)];if(_0x3acb65['mode']===Cesium['SceneMode']['SCENE3D']){const _0x29f5ec=new Cesium['EllipsoidalOccluder'](_0x3acb65[_0x4e9b9d(0x433,0x417)][_0xed31c3(0x30,0x3f)],_0x3acb65['camera']['positionWC']),_0x113fd5=_0x29f5ec['isPointVisible'](_0x44bf49);if(!_0x113fd5)return _0x9c2762['age']=0x0,null;}function _0xed31c3(_0x3e0790,_0x1ea8e9){return _0x2ab70b(_0x3e0790- -0x155,_0x1ea8e9);}const _0x247726=mars3d__namespace[_0x4e9b9d(0x469,0x454)]['toWindowCoordinates'](this['_map']['scene'],_0x44bf49);return _0x247726?[_0x247726['x'],_0x247726['y']]:null;}['clear'](){this[_0x14518a(-0x10f,-0xf0)][_0x14518a(-0xb0,-0x97)]();function _0x36677b(_0x388836,_0x2b4a2c){return _0x52c85d(_0x388836- -0x286,_0x2b4a2c);}function _0x14518a(_0x1a0222,_0x202163){return _0x52c85d(_0x202163- -0x31f,_0x1a0222);}delete this[_0x36677b(0x10,0x87)];}['initWorker'](){function _0x3f7eb6(_0x7a2522,_0x26b5f5){return _0x52c85d(_0x7a2522- -0x1f7,_0x26b5f5);}this[_0x3f7eb6(0x18,-0x4f)]=new Worker(this[_0x1fd74c(0x49c,0x4cb)][_0x3f7eb6(0x18,0xe)]);function _0x1fd74c(_0x1601b9,_0x115895){return _0x2ab70b(_0x1601b9-0x367,_0x115895);}this[_0x3f7eb6(0x18,-0x5b)][_0x1fd74c(0x4cb,0x44c)]=_0x52c67c=>{function _0x51ddcc(_0x313ff4,_0x1b96f1){return _0x1fd74c(_0x313ff4- -0x3e5,_0x1b96f1);}this['_drawLines'](_0x52c67c['data'][_0x51ddcc(0x135,0x162)]),this['_updateIng2']=![];},this['windField']={'init':_0x3c12c0=>{const _0x49840={};_0x49840['type']='init',_0x49840[_0x2a0cb5(0xa1,0x116)]=_0x3c12c0;function _0x2a0cb5(_0x4918f3,_0x40f454){return _0x3f7eb6(_0x40f454-0xa3,_0x4918f3);}this['worker']['postMessage'](_0x49840);},'setOptions':_0x57c4ba=>{function _0x593675(_0x3bdc48,_0x55b061){return _0x1fd74c(_0x55b061- -0x570,_0x3bdc48);}const _0x56e6eb={};_0x56e6eb[_0x593675(-0x50,-0x8a)]='setOptions',_0x56e6eb[_0x593675(-0x137,-0xd4)]=_0x57c4ba;function _0xaaf73d(_0x5d52f7,_0x121ead){return _0x3f7eb6(_0x5d52f7- -0x209,_0x121ead);}this['worker']['postMessage'](_0x56e6eb);},'setDate':_0x301e01=>{function _0x3eb8e7(_0x585cca,_0x44e396){return _0x1fd74c(_0x585cca-0x51,_0x44e396);}function _0xc1236b(_0x25e06f,_0x1dab1f){return _0x1fd74c(_0x25e06f- -0x57e,_0x1dab1f);}const _0x532068={};_0x532068['type']='setDate',_0x532068[_0xc1236b(-0x130,-0x10f)]=_0x301e01,this[_0xc1236b(-0x13d,-0xba)][_0xc1236b(-0x13f,-0x14c)](_0x532068);},'update':()=>{if(this[_0x595621(-0x155,-0x1c7)])return;this['_updateIng2']=!![];const _0x49be1c={};_0x49be1c['type']='update';function _0x595621(_0x897404,_0xe5bf6b){return _0x3f7eb6(_0x897404- -0x169,_0xe5bf6b);}this['worker']['postMessage'](_0x49be1c);},'clear':()=>{const _0x6c2cf2={};_0x6c2cf2['type']='clear';function _0x29e60b(_0x52a917,_0x5663ab){return _0x1fd74c(_0x5663ab- -0x424,_0x52a917);}function _0x3540f3(_0x4b0fe5,_0x3a38ab){return _0x3f7eb6(_0x3a38ab- -0xe,_0x4b0fe5);}this[_0x3540f3(-0x51,0xa)][_0x3540f3(-0x27,0x8)](_0x6c2cf2);}},this['windField'][_0x1fd74c(0x522,0x55e)](this['options']);}}function _0x40ab(_0x15f0c8,_0x15864a){const _0x5d862c=_0x5d86();return _0x40ab=function(_0x40abdb,_0x21877b){_0x40abdb=_0x40abdb-0x1a4;let _0x35c753=_0x5d862c[_0x40abdb];return _0x35c753;},_0x40ab(_0x15f0c8,_0x15864a);}mars3d__namespace[_0x52c85d(0x2d1,0x290)]['register'](_0x2ab70b(0x159,0x1ad),CanvasWindLayer);function _0x2ab70b(_0x4368b5,_0x32f5d5){return _0x40ab(_0x4368b5- -0xd1,_0x32f5d5);}mars3d__namespace[_0x52c85d(0x278,0x28d)][_0x2ab70b(0x1c4,0x142)]=CanvasWindLayer,mars3d__namespace[_0x52c85d(0x22c,0x221)]=CanvasWindField,mars3d__namespace[_0x52c85d(0x2d9,0x353)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x2ab70b(0x1a9,0x1ba)]=WindLayer,exports[_0x2ab70b(0x1a4,0x1e5)]=WindUtil;const _0x4c129e={};_0x4c129e[_0x52c85d(0x2e5,0x2ed)]=!![],Object['defineProperty'](exports,'__esModule',_0x4c129e);
}));
