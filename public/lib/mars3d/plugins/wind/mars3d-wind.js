/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.6
 * 编译日期：2025-09-28 20:11
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x87366b,_0x3c3c95){function _0xaa732d(_0x3817c2,_0x4cea12){return _0x2c57(_0x4cea12-0xdc,_0x3817c2);}const _0x129788=_0x87366b();function _0x27da43(_0x412d18,_0x3ceb33){return _0x2c57(_0x3ceb33-0x6e,_0x412d18);}while(!![]){try{const _0x3d1628=-parseInt(_0xaa732d(0x2a7,0x24a))/0x1*(parseInt(_0x27da43(0x197,0x1bf))/0x2)+-parseInt(_0xaa732d(0x2ac,0x22b))/0x3*(parseInt(_0x27da43(0x216,0x19a))/0x4)+-parseInt(_0xaa732d(0x280,0x232))/0x5+parseInt(_0x27da43(0x2ad,0x236))/0x6+-parseInt(_0xaa732d(0x23e,0x28c))/0x7+-parseInt(_0x27da43(0x18a,0x1c6))/0x8*(parseInt(_0xaa732d(0x25d,0x227))/0x9)+parseInt(_0xaa732d(0x293,0x287))/0xa;if(_0x3d1628===_0x3c3c95)break;else _0x129788['push'](_0x129788['shift']());}catch(_0x29f6e2){_0x129788['push'](_0x129788['shift']());}}}(_0x2233,0xc664e));function _0x4d5064(_0x1f05ed,_0xae3683){return _0x2c57(_0x1f05ed- -0x2e1,_0xae3683);}function _interopNamespace(_0x3fca22){if(_0x3fca22&&_0x3fca22['__esModule'])return _0x3fca22;function _0x1f3759(_0x44dace,_0x48f89a){return _0x2c57(_0x48f89a-0x213,_0x44dace);}var _0x45b9c3=Object[_0x1f3759(0x378,0x33e)](null);_0x3fca22&&Object['keys'](_0x3fca22)[_0x412a32(0x466,0x4b8)](function(_0x50cfef){function _0x333e11(_0x50f1dc,_0x1a7f52){return _0x1f3759(_0x50f1dc,_0x1a7f52- -0x5be);}function _0x5da965(_0x816bb4,_0x42d559){return _0x412a32(_0x42d559,_0x816bb4- -0x307);}if(_0x50cfef!=='default'){var _0x17293d=Object[_0x333e11(-0x26f,-0x1e6)](_0x3fca22,_0x50cfef);Object['defineProperty'](_0x45b9c3,_0x50cfef,_0x17293d[_0x5da965(0x154,0x1ad)]?_0x17293d:{'enumerable':!![],'get':function(){return _0x3fca22[_0x50cfef];}});}});function _0x412a32(_0x93e5d5,_0x5d746a){return _0x2c57(_0x5d746a-0x345,_0x93e5d5);}return _0x45b9c3['default']=_0x3fca22,_0x45b9c3;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x2b3af9,_0x43ce15){const _0x3394be=_0x2b3af9*Math[_0xc0b5a4(0x77,0x77)](Cesium$2[_0xc0b5a4(0xcf,0x12e)][_0x324498(0x108,0xa4)](_0x43ce15));function _0x324498(_0x38800f,_0xeda0a1){return _0x2c57(_0xeda0a1- -0xcc,_0x38800f);}function _0xc0b5a4(_0x419d36,_0x34f288){return _0x2c57(_0x34f288- -0xbf,_0x419d36);}return _0x3394be;}function getV(_0x17e3db,_0x2daffd){function _0x11a8e7(_0x5a0a54,_0x503958){return _0x2c57(_0x503958- -0x34d,_0x5a0a54);}const _0x35dce8=_0x17e3db*Math['sin'](Cesium$2['Math'][_0x11a8e7(-0x1e3,-0x1dd)](_0x2daffd));return _0x35dce8;}function getSpeed(_0x4f7f8b,_0x5a32a2){function _0x2ed17f(_0x3af74e,_0x126256){return _0x2c57(_0x3af74e- -0x349,_0x126256);}const _0x31056b=Math['sqrt'](Math['pow'](_0x4f7f8b,0x2)+Math[_0x2ed17f(-0x1e5,-0x264)](_0x5a32a2,0x2));return _0x31056b;}function getDirection(_0x16b2f6,_0x12a7e4){let _0x4836f3=Cesium$2['Math']['toDegrees'](Math[_0x41c16e(0x45c,0x400)](_0x12a7e4,_0x16b2f6));_0x4836f3+=_0x4836f3<0x0?0x168:0x0;function _0x41c16e(_0x48ee34,_0x24bea3){return _0x2c57(_0x48ee34-0x2a2,_0x24bea3);}return _0x4836f3;}const _0x16f4a9={};_0x16f4a9[_0x533bd1(0x4c1,0x51c)]=null,_0x16f4a9['getU']=getU,_0x16f4a9[_0x533bd1(0x485,0x4b0)]=getV,_0x16f4a9[_0x533bd1(0x56e,0x4fe)]=getSpeed,_0x16f4a9[_0x4d5064(-0x122,-0x132)]=getDirection;var WindUtil=_0x16f4a9,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader=_0x533bd1(0x58e,0x53e),renderParticlesFragmentShader=_0x4d5064(-0x155,-0x14b),renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x533bd1(0x4b3,0x45a)];class ShaderManager{static[_0x4d5064(-0x13c,-0x114)](){const _0x466874={};return _0x466874['sources']=[calculateSpeedShader],new ShaderSource$1(_0x466874);}static[_0x4d5064(-0x1bb,-0x132)](){const _0xb81da5={};return _0xb81da5['sources']=[updatePositionShader],new ShaderSource$1(_0xb81da5);}static[_0x533bd1(0x42f,0x4ad)](){const _0x139a72={};return _0x139a72['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x139a72);}static['getSegmentDrawFragmentShader'](){const _0x49df93={};return _0x49df93['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x49df93);}static['getPostProcessingPositionShader'](){const _0x5c9dc1={};return _0x5c9dc1['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x5c9dc1);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0x4d5064(-0x1ef,-0x1b0)];class CustomPrimitive{constructor(_0x4a7b6a){this['commandType']=_0x4a7b6a[_0x581d02(0x224,0x247)],this['geometry']=_0x4a7b6a['geometry'],this[_0x581d02(0x215,0x251)]=_0x4a7b6a[_0x581d02(0x215,0x1ae)];function _0x4cd604(_0x1f9a94,_0x5961f6){return _0x4d5064(_0x5961f6-0x3da,_0x1f9a94);}this[_0x4cd604(0x2b6,0x29c)]=_0x4a7b6a['primitiveType'],this['uniformMap']=_0x4a7b6a['uniformMap']||{},this['vertexShaderSource']=_0x4a7b6a[_0x4cd604(0x294,0x2c9)],this[_0x4cd604(0x290,0x250)]=_0x4a7b6a['fragmentShaderSource'],this['rawRenderState']=_0x4a7b6a['rawRenderState'],this['framebuffer']=_0x4a7b6a[_0x4cd604(0x245,0x294)],this['outputTexture']=_0x4a7b6a['outputTexture'],this[_0x4cd604(0x262,0x2e4)]=_0x4a7b6a['autoClear']??![],this[_0x4cd604(0x20f,0x1fe)]=_0x4a7b6a['preExecute'],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined;function _0x581d02(_0x4abc9a,_0x3f3063){return _0x533bd1(_0x3f3063,_0x4abc9a- -0x31d);}this[_0x581d02(0x15c,0x120)]=_0x4a7b6a['isDynamic']??(()=>!![]),this[_0x581d02(0x236,0x2af)]&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x4055c3){function _0x3f566c(_0x53adf5,_0x1d153f){return _0x4d5064(_0x53adf5-0x8c,_0x1d153f);}function _0x3f6edc(_0x60dc3a,_0x339475){return _0x4d5064(_0x60dc3a-0xac,_0x339475);}if(this[_0x3f6edc(-0x5c,-0xc1)]==='Draw'){const _0x4f7fea={};_0x4f7fea[_0x3f6edc(-0xa8,-0x91)]=_0x4055c3,_0x4f7fea['geometry']=this['geometry'],_0x4f7fea[_0x3f566c(-0x8b,-0x50)]=this['attributeLocations'],_0x4f7fea['bufferUsage']=BufferUsage$1[_0x3f566c(-0xae,-0xdc)];const _0x58734d=VertexArray$1['fromGeometry'](_0x4f7fea),_0x140059={};_0x140059[_0x3f6edc(-0xa8,-0x23)]=_0x4055c3,_0x140059[_0x3f566c(-0x85,-0xf3)]=this['vertexShaderSource'],_0x140059['fragmentShaderSource']=this['fragmentShaderSource'],_0x140059[_0x3f566c(-0x8b,-0x5a)]=this['attributeLocations'];const _0x213b35=ShaderProgram['fromCache'](_0x140059),_0x101e3c=RenderState['fromCache'](this[_0x3f566c(-0xc2,-0xc4)]),_0x5702ee={};return _0x5702ee['owner']=this,_0x5702ee[_0x3f6edc(-0xaf,-0xce)]=_0x58734d,_0x5702ee['primitiveType']=this['primitiveType'],_0x5702ee[_0x3f6edc(-0xbd,-0x4e)]=Matrix4['IDENTITY'],_0x5702ee[_0x3f566c(-0x97,-0xce)]=_0x101e3c,_0x5702ee['shaderProgram']=_0x213b35,_0x5702ee[_0x3f566c(-0xba,-0x144)]=this[_0x3f566c(-0xba,-0x60)],_0x5702ee['uniformMap']=this['uniformMap'],_0x5702ee['pass']=Pass$1[_0x3f566c(-0x154,-0x167)],new DrawCommand(_0x5702ee);}else{if(this['commandType']===_0x3f6edc(-0x40,-0x4e)){const _0x5522dd={};return _0x5522dd[_0x3f566c(-0x79,-0x3f)]=this,_0x5522dd['fragmentShaderSource']=this['fragmentShaderSource'],_0x5522dd[_0x3f566c(-0x131,-0x186)]=this['uniformMap'],_0x5522dd['outputTexture']=this[_0x3f6edc(-0x5b,-0x82)],_0x5522dd['persists']=!![],new ComputeCommand(_0x5522dd);}else throw new Error(_0x3f6edc(-0x12b,-0x194));}}['setGeometry'](_0x36a887,_0x34a5f4){function _0x51fbbb(_0x264c5d,_0x4eea3a){return _0x533bd1(_0x264c5d,_0x4eea3a- -0x560);}this['geometry']=_0x34a5f4;function _0x71336b(_0x1317b7,_0x9326bc){return _0x533bd1(_0x9326bc,_0x1317b7- -0x67e);}defined(this['commandToExecute'])&&(this[_0x51fbbb(0x26,-0x49)][_0x71336b(-0x190,-0x15a)]=VertexArray$1[_0x51fbbb(0x3f,-0x29)]({'context':_0x36a887,'geometry':this[_0x71336b(-0x21e,-0x23b)],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1[_0x71336b(-0x16f,-0x19a)]}));}['update'](_0x2474b7){if(!this['isDynamic']())return;function _0x2c669d(_0x24d000,_0x59dc13){return _0x533bd1(_0x24d000,_0x59dc13-0x12);}if(!this['show']||!defined(_0x2474b7))return;!defined(this['commandToExecute'])&&(this[_0x202fc0(0x106,0x18d)]=this['createCommand'](_0x2474b7['context']));function _0x202fc0(_0x1493a0,_0x378193){return _0x533bd1(_0x1493a0,_0x378193- -0x38a);}defined(this['preExecute'])&&this['preExecute']();if(!_0x2474b7[_0x2c669d(0x427,0x48a)]){console['warn']('frameState.commandList\x20is\x20undefined');return;}defined(this['clearCommand'])&&_0x2474b7[_0x202fc0(0xca,0xee)][_0x202fc0(0x256,0x1d6)](this['clearCommand']),defined(this['commandToExecute'])&&_0x2474b7['commandList'][_0x202fc0(0x19c,0x1d6)](this[_0x2c669d(0x52a,0x529)]);}[_0x4d5064(-0x182,-0x127)](){return![];}[_0x533bd1(0x4c1,0x502)](){function _0x504663(_0x1bf810,_0x128e72){return _0x4d5064(_0x1bf810-0x2e9,_0x128e72);}function _0x414d8b(_0x598c82,_0x3b170d){return _0x4d5064(_0x598c82-0x330,_0x3b170d);}if(defined(this['commandToExecute'])){var _0x3a469c;(_0x3a469c=this[_0x504663(0x1b7,0x1bf)]['shaderProgram'])===null||_0x3a469c===void 0x0||_0x3a469c['destroy'](),this[_0x504663(0x1b7,0x1e0)]['shaderProgram']=undefined;}return destroyObject(this);}}function deepMerge(_0x193a85,_0x326762){if(!_0x193a85)return _0x326762;if(!_0x326762)return _0x193a85;function _0x1b368b(_0x4bc721,_0xd13691){return _0x4d5064(_0x4bc721-0x24,_0xd13691);}const _0x52a5fb={..._0x326762};function _0xce165e(_0x1ca904,_0x43cb5a){return _0x4d5064(_0x43cb5a-0x75,_0x1ca904);}const _0x33b201=_0x52a5fb;for(const _0x226b6c in _0x193a85){if(Object['prototype'][_0x1b368b(-0x1cc,-0x150)][_0xce165e(-0x112,-0x109)](_0x193a85,_0x226b6c)){const _0x540732=_0x193a85[_0x226b6c],_0x71d949=_0x326762[_0x226b6c];if(Array[_0xce165e(-0x120,-0x170)](_0x540732)){_0x33b201[_0x226b6c]=_0x540732[_0xce165e(-0xe0,-0xf7)]();continue;}if(_0x540732&&typeof _0x540732===_0x1b368b(-0x106,-0xd2)){_0x33b201[_0x226b6c]=deepMerge(_0x540732,_0x71d949||{});continue;}_0x540732!==undefined&&(_0x33b201[_0x226b6c]=_0x540732);}}return _0x33b201;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0xe1dfa2,_0x3bfa8b,_0x7fb61,_0x1f1544,_0x1bb800){this['context']=_0xe1dfa2,this['options']=_0x7fb61,this[_0x49b0b7(0x35c,0x3bb)]=_0x1f1544;function _0x5e41c2(_0x354240,_0x1878df){return _0x533bd1(_0x354240,_0x1878df- -0x4bc);}this[_0x5e41c2(0x34,-0x26)]=_0x3bfa8b,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0x1af308={};_0x1af308['scene']=_0x1bb800,_0x1af308['samplingWindow']=0x1,_0x1af308['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x1af308),this['initFrameRate'](),this['createWindTextures']();function _0x49b0b7(_0x3347fa,_0x146a60){return _0x4d5064(_0x3347fa-0x44c,_0x146a60);}this['createParticlesTextures'](),this['createComputingPrimitives']();}['initFrameRate'](){const _0x443a21=()=>{function _0x35b96e(_0x8850f8,_0x3e2d52){return _0x2c57(_0x8850f8-0x3cb,_0x3e2d52);}function _0x1bb62f(_0x13425e,_0x113a38){return _0x2c57(_0x113a38-0x1ab,_0x13425e);}this[_0x35b96e(0x596,0x5d8)][_0x35b96e(0x5c9,0x5c3)]>0x14&&(this['frameRate']=this['frameRateMonitor']['lastFramesPerSecond'],this[_0x1bb62f(0x317,0x390)]=0x3c/Math['max'](this['frameRate'],0x1));};_0x443a21();const _0x5cdb9b=setInterval(_0x443a21,0x3e8);function _0x149f7b(_0xbdcd4b,_0x5f1b73){return _0x4d5064(_0x5f1b73-0x46f,_0xbdcd4b);}const _0x520349=this['destroy'][_0x149f7b(0x369,0x38b)](this);this['destroy']=()=>{clearInterval(_0x5cdb9b),_0x520349();};}[_0x533bd1(0x42f,0x489)](){const _0x32cf70={};_0x32cf70['minificationFilter']=TextureMinificationFilter$1[_0x141fea(0x1ba,0x1e5)];function _0x4c140b(_0x5e88f9,_0x459f34){return _0x4d5064(_0x5e88f9-0x4ec,_0x459f34);}function _0x141fea(_0x7e3e2c,_0x410a17){return _0x4d5064(_0x7e3e2c-0x3ad,_0x410a17);}_0x32cf70['magnificationFilter']=TextureMagnificationFilter$1['LINEAR'];const _0x33b132={'context':this[_0x4c140b(0x398,0x358)],'width':this[_0x4c140b(0x339,0x31e)]['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1[_0x141fea(0x2ac,0x2f3)],'flipY':this['options']['flipY']??![],'sampler':new Sampler$1(_0x32cf70)};this['windTextures']={'U':new Texture$1({..._0x33b132,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x33b132,'source':{'arrayBufferView':new Float32Array(this['windData']['v'][_0x141fea(0x2c8,0x349)])}})};}[_0x4d5064(-0xea,-0x100)](){const _0x47ee21={};_0x47ee21['minificationFilter']=TextureMinificationFilter$1['NEAREST'],_0x47ee21['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];function _0x283ec7(_0x588101,_0x46a3a9){return _0x533bd1(_0x46a3a9,_0x588101- -0x343);}const _0x5e2471={'context':this['context'],'width':this[_0x283ec7(0x167,0x13d)]['particlesTextureSize'],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this[_0x283ec7(0x167,0x1b5)]['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x47ee21)};function _0x2d264c(_0x2af486,_0x4a4820){return _0x533bd1(_0x2af486,_0x4a4820- -0x5fd);}this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x5e2471),'currentParticlesPosition':new Texture$1(_0x5e2471),'nextParticlesPosition':new Texture$1(_0x5e2471),'postProcessingPosition':new Texture$1(_0x5e2471),'particlesSpeed':new Texture$1(_0x5e2471)};}['destroyParticlesTextures'](){function _0x1127cf(_0x1356fc,_0x2ee0c1){return _0x4d5064(_0x1356fc-0x2ba,_0x2ee0c1);}function _0x590c97(_0xa19bbe,_0x47ab0b){return _0x4d5064(_0x47ab0b-0x79,_0xa19bbe);}Object[_0x590c97(-0x148,-0x100)](this[_0x1127cf(0x16e,0x124)])[_0x590c97(-0xc9,-0xf5)](_0x5e2860=>_0x5e2860['destroy']());}['createComputingPrimitives'](){function _0x457241(_0xf8658e,_0x38c5d6){return _0x533bd1(_0xf8658e,_0x38c5d6-0x77);}function _0xe9801d(_0x888057,_0x1f4bd6){return _0x533bd1(_0x1f4bd6,_0x888057- -0x20b);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this[_0x457241(0x5fc,0x592)]['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x457241(0x4a8,0x4e6)],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this[_0x457241(0x52d,0x50d)]['v'][_0xe9801d(0x264,0x283)],this[_0x457241(0x4d7,0x50d)]['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData'][_0x457241(0x4dc,0x51b)]['min'],this['windData']['speed'][_0x457241(0x510,0x546)]),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0xa545cf(_0x4a87d7,_0x4fc9f4){return _0x457241(_0x4fc9f4,_0x4a87d7- -0x63d);}return(this[_0xa545cf(-0x6d,-0xa)]['pixelSize']+0x32)*this['options']['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData'][_0x457241(0x55a,0x4f7)],this['windData'][_0xe9801d(0x2dc,0x35f)]),'minimum':()=>new Cartesian2$1(this[_0x457241(0x4e9,0x50d)]['bounds'][_0x457241(0x492,0x4fa)],this[_0xe9801d(0x28b,0x2d5)]['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData']['bounds'][_0x457241(0x55e,0x523)],this['windData'][_0x457241(0x570,0x5a5)][_0xe9801d(0x2a4,0x263)])},'fragmentShaderSource':ShaderManager[_0xe9801d(0x302,0x2b9)](),'outputTexture':this[_0xe9801d(0x2f2,0x2fd)][_0x457241(0x5f5,0x5d8)],'preExecute':()=>{const _0x1dbf5e=this['particlesTextures']['previousParticlesPosition'];function _0x585639(_0x33f896,_0x396fe8){return _0xe9801d(_0x33f896-0x234,_0x396fe8);}function _0x4773dd(_0xf9a973,_0x35cb3a){return _0xe9801d(_0x35cb3a- -0x249,_0xf9a973);}this['particlesTextures'][_0x585639(0x48c,0x44a)]=this['particlesTextures']['currentParticlesPosition'],this[_0x585639(0x526,0x515)]['currentParticlesPosition']=this[_0x585639(0x526,0x4aa)]['postProcessingPosition'],this['particlesTextures'][_0x4773dd(0x7d,0x64)]=_0x1dbf5e,this[_0x4773dd(0x10d,0x95)][_0x4773dd(0x92,0xab)]['commandToExecute']&&(this['primitives']['calculateSpeed'][_0x4773dd(0x84,0xc3)]['outputTexture']=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this['options'][_0xe9801d(0x292,0x25c)]}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0xe9801d(0x2f2,0x2ad)][_0x457241(0x554,0x4ed)],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed']},'fragmentShaderSource':ShaderManager[_0x457241(0x563,0x505)](),'outputTexture':this['particlesTextures'][_0x457241(0x5f4,0x5da)],'preExecute':()=>{function _0x12c467(_0xfde430,_0x2e1e25){return _0x457241(_0xfde430,_0x2e1e25- -0x506);}function _0x1de4b3(_0x5663a5,_0x3eb1fa){return _0xe9801d(_0x3eb1fa-0x230,_0x5663a5);}this[_0x12c467(0x91,0x5a)][_0x12c467(-0x8e,-0xd)]['commandToExecute']&&(this['primitives']['updatePosition']['commandToExecute']['outputTexture']=this['particlesTextures']['nextParticlesPosition']);},'isDynamic':()=>this['options']['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':_0xe9801d(0x352,0x2dc),'uniformMap':{'nextParticlesPosition':()=>this['particlesTextures'][_0x457241(0x5f4,0x5da)],'particlesSpeed':()=>this[_0x457241(0x5a5,0x574)]['particlesSpeed'],'lonRange':()=>this['viewerParameters'][_0xe9801d(0x2d7,0x2ac)],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData'][_0x457241(0x52b,0x5a5)][_0xe9801d(0x278,0x27e)],this[_0x457241(0x4c1,0x50d)][_0xe9801d(0x323,0x356)][_0x457241(0x4ca,0x523)]),'dataLatRange':()=>new Cartesian2$1(this['windData'][_0xe9801d(0x323,0x315)][_0xe9801d(0x268,0x2b0)],this[_0xe9801d(0x28b,0x28c)]['bounds']['north']),'randomCoefficient':function(){function _0x49f586(_0x1163b1,_0x99a1d7){return _0x457241(_0x99a1d7,_0x1163b1- -0x171);}return Math[_0x49f586(0x3d4,0x435)]();},'dropRate':()=>this['options'][_0xe9801d(0x30a,0x2f6)],'dropRateBump':()=>this[_0xe9801d(0x29f,0x298)]['dropRateBump'],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x5eca1a(_0x3af06d,_0x1293f6){return _0xe9801d(_0x3af06d- -0x1a8,_0x1293f6);}function _0x577166(_0x1413bd,_0xaf8f99){return _0x457241(_0xaf8f99,_0x1413bd- -0x67a);}this['primitives']['postProcessingPosition']['commandToExecute']&&(this['primitives']['postProcessingPosition'][_0x5eca1a(0x164,0x1e2)]['outputTexture']=this[_0x5eca1a(0x14a,0x124)][_0x577166(-0x14b,-0x1ba)]);},'isDynamic':()=>this[_0x457241(0x586,0x521)][_0x457241(0x4b7,0x514)]})};}[_0x533bd1(0x3fb,0x47c)](){this['windTextures']['U']['destroy'](),this['windTextures']['V']['destroy'](),this['createWindTextures']();}['updateWindData'](_0x50c87c){function _0x64e181(_0x164891,_0x328f43){return _0x533bd1(_0x164891,_0x328f43- -0x504);}this['windData']=_0x50c87c,this[_0x64e181(-0xb9,-0x88)]();}['updateOptions'](_0x36c7e){const _0x3ccee2=_0x36c7e['flipY']!==undefined&&_0x36c7e[_0x4069fb(0x1e7,0x258)]!==this['options']['flipY'];function _0x4069fb(_0x1991d9,_0x19b35c){return _0x4d5064(_0x19b35c-0x3a8,_0x1991d9);}this['options']=deepMerge(_0x36c7e,this['options']),_0x3ccee2&&this['reCreateWindTextures']();}[_0x533bd1(0x541,0x510)](_0x31f294){function _0xa4ed39(_0x164f60,_0x27df18){return _0x4d5064(_0x164f60-0x149,_0x27df18);}const {array:_0x26f95f}=_0x31f294;let {min:_0x47ae9b,max:_0x63d6c2}=_0x31f294;const _0x3bf198=new Float32Array(_0x26f95f['length']);_0x47ae9b===undefined&&(console['warn'](_0x48c5ad(0x1a2,0x1dc)),_0x47ae9b=Math['min'](..._0x26f95f));function _0x48c5ad(_0x3ba648,_0x463d05){return _0x4d5064(_0x3ba648-0x283,_0x463d05);}_0x63d6c2===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0x63d6c2=Math[_0x48c5ad(0x109,0x116)](..._0x26f95f));const _0x1fd2e5=Math['max'](Math['abs'](_0x47ae9b),Math[_0x48c5ad(0x15f,0x182)](_0x63d6c2));for(let _0x5c822e=0x0;_0x5c822e<_0x26f95f[_0x48c5ad(0x175,0x1da)];_0x5c822e++){const _0x389a52=_0x26f95f[_0x5c822e]/_0x1fd2e5;_0x3bf198[_0x5c822e]=_0x389a52;}return _0x3bf198;}['destroy'](){function _0x14a44b(_0x5fc28f,_0x5df07d){return _0x4d5064(_0x5fc28f-0x25a,_0x5df07d);}Object['values'](this['windTextures'])['forEach'](_0x37f33f=>_0x37f33f['destroy']());function _0x1a34ad(_0x6c2383,_0x25f404){return _0x533bd1(_0x25f404,_0x6c2383-0x65);}Object[_0x14a44b(0xe1,0x88)](this['particlesTextures'])['forEach'](_0x588205=>_0x588205['destroy']()),Object['values'](this[_0x14a44b(0xfa,0x11b)])[_0x1a34ad(0x540,0x530)](_0x383fb6=>_0x383fb6[_0x1a34ad(0x567,0x5e3)]()),this[_0x14a44b(0x144,0x181)]['destroy']();}}function _0x2233(){const _0x345e03=['log','particlesTextures','getSpeed','calculateSpeed','auto','rectangle','destroy','framebuffer','update','resize','Draw','register','original','getDataAtLonLat','floor','primitiveType','getUVByXY','getCalculateSpeedShader','frameRate','STATIC_DRAW','processWindData','initWorker','RGBA','53226850TxMaZm','container','dropRate','_colorRamp','commandToExecute','11322661jnZfxp','beginPath','number','windTextures','__proto__','xmin','particlesTextureSize','object','_onMapWhellEvent','worker','atan2','scene','setOptions','abs','renderState','getDirection','rows','cols','position','_updateIng2','updateOptions','getOwnPropertyDescriptor','bounds','pixelSize','1278426cHMpgb','now','attributeLocations','frameRateMonitor','_onMouseDownEvent','_maxAge','alt','fromGeometry','vertexShaderSource','_animateFrame','age','length','red','getDefaultRenderState','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','wrapT','maxAge','commandType','outputTexture','globalCompositeOperation','owner','getPrimitives','segmentsColor','alpha','FLOAT','_tomap','Cartesian2','componentsPerAttribute','pointer-events','frameRateAdjustment','vdata','lineLength','layer','show','removeChild','autoClear','updateViewerParameters','Math','isPointVisible','_updateIng','hidden','viewerParameters','clear','mouseMove','addEventListener','Compute','SceneMode','createParticlesTextures','push','particlesSpeed','_removedHook','nextParticlesPosition','array','bind','lastFramesPerSecond','ymax','min\x20is\x20undefined,\x20calculate\x20min','drawingBufferHeight','createPrimitives','LINEAR','camera','_addedHook','hasOwnProperty','Cesium','refreshTimer','CanvasWindField','stringify','colorTable','ColorRamp','geometry','colors','EventType','previousParticlesPosition','isArray','_pointerEvents','_drawLines','destroyParticlesTextures','_canvasParticles','OPAQUE','speedFactor','clientHeight','lng','preExecute','xmax','min','sqrt','stroke','Unknown\x20command\x20type','south','_bilinearInterpolation','tlng','currentParticlesPosition','off','commandList','isDynamic','pointerEvents','depthTexture','reCreateWindTextures','canvas','get','TRIANGLES','width','_onMouseMoveEvent','updatePosition','west','isInExtent','_showHook','speedRate','getUVByPoint','_setOptionsHook','createWindTextures','particles','sceneMode','uniformMap','add','getUpdatePositionShader','magnificationFilter','redraw','frameTime','top','create','4pQiASc','data','windData','lineTo','createColorTableTexture','talt','_map','percentageChanged','canvasWidth','dynamic','cos','removeEventListener','globe','style','fixedHeight','postMessage','speed','particleSystem','type','mouse_down','Log','lineWidth','options','defineProperty','east','getSegmentDrawVertexShader','color','north','getV','UNSIGNED_BYTE','drawingBufferWidth','9pHypXR','setData','ymin','particlesNumber','2149188goLyat','postProcessingPosition','2lNfwkQ','createRawRenderState','toGridXY','clientWidth','udata','3929270PvhSaC','fragmentShaderSource','5448248LMbYGA','_calc_speedRate','_onMouseUpEvent','createRenderingTextures','globalAlpha','destination-in','_speedRate','isDestroyed','ONE_MINUS_SRC_ALPHA','rendering','computing','call','pow','mouse_move','random','max','values','getParticles','changed','absolute','fillRect','MIN_VALUE','922330ANHuvV','canvasContext','toRadians','tlat','_createCanvas','forEach','grid','slice','changeOptions','WindUtil','modelMatrix','ellipsoid','lonRange','canvasHeight','segments','getColor','blendFuncDestination','height','lat','primitives','componentDatatype','pixelFormat','visible','_randomParticle','vertexArray','LayerUtil','windField','bindEvent','clearFramebuffers','mouseUp','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','context','WindLayer','createRenderingFramebuffers','wrapS','flipY','CLAMP_TO_EDGE','rawRenderState'];_0x2233=function(){return _0x345e03;};return _0x2233();}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0xd40423,_0x38c84b,_0x4bd1a6,_0x19dada){this['context']=_0xd40423,this['options']=_0x38c84b;function _0x560640(_0x10f161,_0x1dffc7){return _0x4d5064(_0x1dffc7-0x27,_0x10f161);}this[_0x492e6e(0x31f,0x2ae)]=_0x4bd1a6;function _0x492e6e(_0x252613,_0x2c4987){return _0x4d5064(_0x252613-0x40f,_0x2c4987);}this[_0x560640(-0x107,-0x158)]=_0x19dada,(typeof this['options']['particlesTextureSize']!==_0x560640(-0x114,-0x108)||this['options'][_0x560640(-0x138,-0x104)]<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options'][_0x560640(-0xcf,-0x104)]=0x100),this['colorTable']=this[_0x492e6e(0x25e,0x244)](),this['textures']=this['createRenderingTextures'](),this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this[_0x492e6e(0x21b,0x228)]();}[_0x533bd1(0x488,0x4c3)](){function _0x1f65b9(_0x599b05,_0xe7b6ca){return _0x533bd1(_0x599b05,_0xe7b6ca- -0x59b);}const _0x2682cd={};_0x2682cd[_0x1ab036(-0x177,-0x18c)]=this[_0x1f65b9(-0x6d,-0xa6)],_0x2682cd[_0x1ab036(-0x243,-0x201)]=this[_0x1f65b9(-0x11a,-0xa6)][_0x1ab036(-0x183,-0x1cf)],_0x2682cd['height']=this['context'][_0x1f65b9(-0x17e,-0x147)],_0x2682cd[_0x1f65b9(-0x57,-0xb0)]=PixelFormat[_0x1f65b9(-0x86,-0x89)],_0x2682cd['pixelDatatype']=PixelDatatype[_0x1f65b9(-0x151,-0xea)];const _0xb53659=_0x2682cd,_0x4cc23c={};_0x4cc23c['context']=this['context'],_0x4cc23c['width']=this['context'][_0x1f65b9(-0x90,-0xe9)],_0x4cc23c[_0x1f65b9(-0x136,-0xb4)]=this[_0x1ab036(-0x1d0,-0x18c)][_0x1f65b9(-0x1af,-0x147)],_0x4cc23c[_0x1ab036(-0x1ef,-0x196)]=PixelFormat['DEPTH_COMPONENT'];function _0x1ab036(_0x2bc7e3,_0x259376){return _0x4d5064(_0x259376- -0x38,_0x2bc7e3);}_0x4cc23c['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x2a04c2=_0x4cc23c;return{'segmentsColor':new Texture(_0xb53659),'segmentsDepth':new Texture(_0x2a04c2)};}[_0x533bd1(0x52f,0x4f7)](){const _0x5cb600={};_0x5cb600['context']=this['context'],_0x5cb600['colorTextures']=[this['textures'][_0x33fc58(0x44d,0x48b)]];function _0x33fc58(_0x42f1a1,_0x1892f6){return _0x4d5064(_0x42f1a1-0x550,_0x1892f6);}function _0x3b228c(_0x46d5a6,_0x5dd659){return _0x533bd1(_0x46d5a6,_0x5dd659- -0x15b);}return _0x5cb600[_0x3b228c(0x335,0x320)]=this['textures']['segmentsDepth'],{'segments':new Framebuffer(_0x5cb600)};}['destoryRenderingFramebuffers'](){function _0x3220dd(_0x16d2c8,_0x36f7c7){return _0x533bd1(_0x16d2c8,_0x36f7c7- -0x8c);}function _0xa58ab2(_0x3ccf40,_0x550187){return _0x533bd1(_0x3ccf40,_0x550187-0x64);}Object[_0x3220dd(0x460,0x444)](this['framebuffers'])[_0x3220dd(0x471,0x44f)](_0x24b352=>{_0x24b352['destroy']();});}['createColorTableTexture'](){const _0x2bd03b=new Float32Array(this['options'][_0x73dac3(0x80,0x6a)]['flatMap'](_0x5158af=>{function _0x11c365(_0x4b69ec,_0x55f431){return _0x73dac3(_0x55f431-0xeb,_0x4b69ec);}function _0x4a27e8(_0x55bfa6,_0xad1727){return _0x73dac3(_0xad1727-0x1bf,_0x55bfa6);}const _0x29bd9a=Color$1['fromCssColorString'](_0x5158af);return[_0x29bd9a[_0x4a27e8(0x378,0x31a)],_0x29bd9a['green'],_0x29bd9a['blue'],_0x29bd9a[_0x4a27e8(0x2c4,0x325)]];})),_0x1a533a={};_0x1a533a['minificationFilter']=TextureMinificationFilter[_0x3700aa(0x4a3,0x45f)],_0x1a533a[_0x3700aa(0x4dc,0x561)]=TextureMagnificationFilter['LINEAR'],_0x1a533a[_0x73dac3(0x117,0x108)]=TextureWrap['CLAMP_TO_EDGE'];function _0x3700aa(_0x17cc81,_0x27ea34){return _0x533bd1(_0x27ea34,_0x17cc81-0x4d);}_0x1a533a[_0x3700aa(0x58c,0x505)]=TextureWrap[_0x73dac3(0x119,0x17c)];function _0x73dac3(_0x4c44bc,_0xcf642b){return _0x4d5064(_0x4c44bc-0x268,_0xcf642b);}return new Texture({'context':this['context'],'width':this['options']['colors']['length'],'height':0x1,'pixelFormat':PixelFormat[_0x73dac3(0x131,0x161)],'pixelDatatype':PixelDatatype[_0x73dac3(0x167,0xe5)],'sampler':new Sampler(_0x1a533a),'source':{'width':this['options']['colors']['length'],'height':0x1,'arrayBufferView':_0x2bd03b}});}['createSegmentsGeometry'](){const _0x1efd18=0x4,_0xbb252f=this['options'][_0x2ab804(0x362,0x3db)];let _0x392512=[];for(let _0x33d59f=0x0;_0x33d59f<_0xbb252f;_0x33d59f++){for(let _0x1f1a4e=0x0;_0x1f1a4e<_0xbb252f;_0x1f1a4e++){for(let _0x4c4ec6=0x0;_0x4c4ec6<_0x1efd18;_0x4c4ec6++){_0x392512['push'](_0x33d59f/_0xbb252f),_0x392512['push'](_0x1f1a4e/_0xbb252f);}}}_0x392512=new Float32Array(_0x392512);const _0x1ec69a=this['options'][_0x23cd3f(-0x19d,-0x1cb)]**0x2;let _0xfd6be=[];for(let _0x9a1105=0x0;_0x9a1105<_0x1ec69a;_0x9a1105++){_0xfd6be[_0x2ab804(0x451,0x41d)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}function _0x2ab804(_0x281a56,_0x6b9024){return _0x533bd1(_0x281a56,_0x6b9024- -0x143);}_0xfd6be=new Float32Array(_0xfd6be);let _0x1e5e1b=[];for(let _0x44ec02=0x0,_0x3ab1a4=0x0;_0x44ec02<_0x1ec69a;_0x44ec02++){_0x1e5e1b[_0x23cd3f(-0x16f,-0x189)](_0x3ab1a4+0x0,_0x3ab1a4+0x1,_0x3ab1a4+0x2,_0x3ab1a4+0x2,_0x3ab1a4+0x1,_0x3ab1a4+0x3),_0x3ab1a4+=_0x1efd18;}_0x1e5e1b=new Uint32Array(_0x1e5e1b);const _0x1fb999={};function _0x23cd3f(_0xe2fa70,_0x1debe6){return _0x4d5064(_0x1debe6- -0xa0,_0xe2fa70);}_0x1fb999['componentDatatype']=ComponentDatatype[_0x23cd3f(-0x12f,-0x1a1)],_0x1fb999[_0x2ab804(0x3ed,0x408)]=0x2,_0x1fb999[_0x23cd3f(-0x28f,-0x219)]=_0x392512;const _0x4f5d42={};_0x4f5d42[_0x23cd3f(-0x1f7,-0x1ff)]=ComponentDatatype['FLOAT'],_0x4f5d42['componentsPerAttribute']=0x3,_0x4f5d42[_0x23cd3f(-0x23b,-0x219)]=_0xfd6be;const _0x5b972e=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x1fb999),'normal':new GeometryAttribute(_0x4f5d42)}),'indices':_0x1e5e1b});return _0x5b972e;}[_0x533bd1(0x4f0,0x4ba)](_0x3f4eff){function _0x1e16c9(_0x44a643,_0x58e06f){return _0x533bd1(_0x44a643,_0x58e06f- -0x4a6);}const _0x47fb65={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x3f4eff};return Appearance[_0x1e16c9(0x121,0x97)](!![],![],_0x47fb65);}[_0x533bd1(0x405,0x455)](){const _0x19cc87={};_0x19cc87['st']=0x0,_0x19cc87['normal']=0x1;function _0xa54fb9(_0xe79180,_0x1a8142){return _0x4d5064(_0x1a8142-0x6b1,_0xe79180);}const _0x1cd956={};_0x1cd956['enabled']=!![];const _0x387f18={};_0x387f18['enabled']=!![],_0x387f18['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x387f18['blendFuncSource']=WebGLRenderingContext['SRC_ALPHA'],_0x387f18[_0x49f273(0x54f,0x559)]=WebGLRenderingContext[_0x49f273(0x5b7,0x53b)];const _0x35d4f0={};_0x35d4f0['viewport']=undefined,_0x35d4f0['depthTest']=_0x1cd956;function _0x49f273(_0x1d7eb6,_0x806428){return _0x533bd1(_0x1d7eb6,_0x806428-0x73);}_0x35d4f0['depthMask']=!![],_0x35d4f0['blending']=_0x387f18;const _0x3b059f=new CustomPrimitive({'commandType':_0x49f273(0x5d6,0x579),'attributeLocations':_0x19cc87,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x49f273(0x4b1,0x4f2)],'uniformMap':{'previousParticlesPosition':()=>this['computing'][_0x49f273(0x564,0x570)]['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0xa54fb9(0x539,0x532)][_0x49f273(0x5df,0x570)][_0x49f273(0x502,0x4e9)],'postProcessingPosition':()=>this[_0xa54fb9(0x59a,0x532)]['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this[_0x49f273(0x581,0x53d)]['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this[_0xa54fb9(0x4eb,0x532)][_0xa54fb9(0x545,0x5b5)],'colorTable':()=>this[_0x49f273(0x493,0x4d1)],'domain':()=>{function _0x427344(_0x9baed5,_0x4a06cd){return _0xa54fb9(_0x4a06cd,_0x9baed5- -0x16d);}var _0x5b8fd9,_0x17de2c;function _0x359500(_0x649541,_0x31edfd){return _0x49f273(_0x649541,_0x31edfd- -0xd5);}const _0x220829=new Cartesian2(((_0x5b8fd9=this[_0x359500(0x47a,0x448)]['domain'])===null||_0x5b8fd9===void 0x0?void 0x0:_0x5b8fd9[_0x427344(0x36a,0x39b)])??this[_0x359500(0x401,0x468)]['windData'][_0x427344(0x39f,0x3d5)]['min'],((_0x17de2c=this['options']['domain'])===null||_0x17de2c===void 0x0?void 0x0:_0x17de2c['max'])??this['computing']['windData']['speed']['max']);return _0x220829;},'displayRange':()=>{var _0xf084c8,_0x3bd36e;const _0x50062a=new Cartesian2(((_0xf084c8=this['options']['displayRange'])===null||_0xf084c8===void 0x0?void 0x0:_0xf084c8[_0x50a13b(0x35a,0x335)])??this['computing']['windData']['speed'][_0x50a13b(0x3a6,0x335)],((_0x3bd36e=this[_0x50a13b(0x34a,0x370)]['displayRange'])===null||_0x3bd36e===void 0x0?void 0x0:_0x3bd36e[_0x2a6a99(0x1b0,0x17c)])??this['computing']['windData'][_0x50a13b(0x323,0x36a)][_0x2a6a99(0x1b0,0x1da)]);function _0x2a6a99(_0x486afa,_0x577ade){return _0x49f273(_0x577ade,_0x486afa- -0x392);}function _0x50a13b(_0x361bf3,_0x375532){return _0x49f273(_0x361bf3,_0x375532- -0x1ad);}return _0x50062a;},'particleHeight':()=>this[_0x49f273(0x500,0x51d)]['fixedHeight']||0x0,'aspect':()=>this[_0x49f273(0x5dd,0x568)][_0xa54fb9(0x4c2,0x51a)]/this[_0x49f273(0x5a7,0x568)]['drawingBufferHeight'],'pixelSize':()=>this[_0xa54fb9(0x562,0x5c1)][_0x49f273(0x573,0x5a2)],'lineWidth':()=>{const _0x59561b={};_0x59561b['min']=0x1,_0x59561b['max']=0x2;const _0x4f0364=this['options']['lineWidth']||_0x59561b;return new Cartesian2(_0x4f0364['min'],_0x4f0364['max']);},'lineLength':()=>{function _0xbb5f37(_0x40c4cc,_0x393540){return _0x49f273(_0x393540,_0x40c4cc- -0x651);}const _0x233f2d={};_0x233f2d[_0xbb5f37(-0x16f,-0x13a)]=0x14,_0x233f2d['max']=0x64;const _0x2ecaa0=this['options'][_0x2e6788(0x51d,0x4ca)]||_0x233f2d;function _0x2e6788(_0x1b866e,_0x54c4ef){return _0xa54fb9(_0x1b866e,_0x54c4ef- -0xed);}return new Cartesian2(_0x2ecaa0[_0xbb5f37(-0x16f,-0x125)],_0x2ecaa0['max']);},'is3D':()=>this[_0xa54fb9(0x641,0x5c1)][_0xa54fb9(0x51d,0x4f3)]===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures']['segmentsDepth']},'vertexShaderSource':ShaderManager[_0xa54fb9(0x4a1,0x515)](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this[_0xa54fb9(0x588,0x522)](_0x35d4f0)}),_0x3d071b={};return _0x3d071b[_0x49f273(0x5bc,0x557)]=_0x3b059f,_0x3d071b;}['onParticlesTextureSizeChange'](){function _0x22fab4(_0x3ea06e,_0x48920c){return _0x533bd1(_0x3ea06e,_0x48920c- -0x538);}const _0x5e0720=this['createSegmentsGeometry']();this[_0x22fab4(-0xb1,-0x4f)][_0x5b4f2d(0x514,0x52b)]['geometry']=_0x5e0720;const _0x1dcf70={};_0x1dcf70['context']=this[_0x5b4f2d(0x54b,0x53c)],_0x1dcf70[_0x5b4f2d(0x4fc,0x4a7)]=_0x5e0720;function _0x5b4f2d(_0x794e38,_0x1487c2){return _0x4d5064(_0x1487c2-0x690,_0x794e38);}_0x1dcf70[_0x5b4f2d(0x5ca,0x579)]=this[_0x22fab4(-0x6d,-0x4f)]['segments'][_0x5b4f2d(0x5db,0x579)],_0x1dcf70['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x24fee0=VertexArray['fromGeometry'](_0x1dcf70);this['primitives']['segments']['commandToExecute']&&(this[_0x5b4f2d(0x4cf,0x530)][_0x22fab4(-0xd6,-0x54)]['commandToExecute']['vertexArray']=_0x24fee0);}['onColorTableChange'](){this['colorTable']['destroy'](),this['colorTable']=this['createColorTableTexture']();}['updateOptions'](_0x67e17a){const _0x347df1=_0x67e17a[_0x158f2a(0x482,0x4cb)]&&JSON['stringify'](_0x67e17a['colors'])!==JSON[_0x16adcd(0x3dc,0x423)](this['options'][_0x158f2a(0x482,0x458)]);function _0x16adcd(_0x5f548c,_0x3be2d4){return _0x4d5064(_0x3be2d4-0x60f,_0x5f548c);}this['options']=deepMerge(_0x67e17a,this[_0x158f2a(0x4cb,0x473)]);function _0x158f2a(_0xfa9a4,_0x22bf23){return _0x533bd1(_0x22bf23,_0xfa9a4-0x21);}_0x347df1&&this['onColorTableChange']();}['destroy'](){Object[_0x51bd7a(0x4a,0x21)](this['framebuffers'])[_0x51bd7a(-0x35,0x2c)](_0x99b9be=>{function _0x41de30(_0xf7d709,_0x138a6e){return _0x4dafcf(_0xf7d709-0x2ec,_0x138a6e);}_0x99b9be[_0x41de30(0x168,0x1c3)]();});function _0x4dafcf(_0x4bdfc6,_0x123161){return _0x533bd1(_0x123161,_0x4bdfc6- -0x686);}function _0x51bd7a(_0x5194e2,_0x596182){return _0x533bd1(_0x5194e2,_0x596182- -0x4af);}Object[_0x51bd7a(0x54,0x21)](this['primitives'])['forEach'](_0x176651=>{function _0x523477(_0x1d0299,_0x678532){return _0x4dafcf(_0x678532-0xab,_0x1d0299);}_0x176651[_0x523477(-0xd0,-0xd9)]();}),this[_0x4dafcf(-0x228,-0x1f3)]['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x533bd1(0x46a,0x45a)];class WindParticleSystem{constructor(_0x1690ac,_0x3abc66,_0x23da90,_0xa2345,_0x4676c9){this['context']=_0x1690ac,this[_0x17e1e8(0x41e,0x3bf)]=_0x23da90;function _0x565a61(_0x326eec,_0x12389a){return _0x4d5064(_0x12389a-0x3e7,_0x326eec);}this['viewerParameters']=_0xa2345,this[_0x17e1e8(0x43e,0x47a)]=new WindParticlesComputing(_0x1690ac,_0x3abc66,_0x23da90,_0xa2345,_0x4676c9);function _0x17e1e8(_0x4a57a2,_0x9dc0f0){return _0x4d5064(_0x4a57a2-0x5bd,_0x9dc0f0);}this['rendering']=new WindParticlesRendering(_0x1690ac,_0x23da90,_0xa2345,this['computing']),this[_0x17e1e8(0x466,0x45f)]();}['getPrimitives'](){function _0x2eb7d3(_0x29d94b,_0xdd74da){return _0x4d5064(_0x29d94b-0x55,_0xdd74da);}const _0x1b63aa=[this['computing']['primitives'][_0x3003b1(0x467,0x42b)],this[_0x2eb7d3(-0x12a,-0x17e)]['primitives'][_0x2eb7d3(-0x172,-0x149)],this['computing'][_0x2eb7d3(-0x10b,-0x182)][_0x2eb7d3(-0x13c,-0xe9)],this['rendering']['primitives'][_0x3003b1(0x471,0x410)]];function _0x3003b1(_0x127aa1,_0x446524){return _0x533bd1(_0x127aa1,_0x446524- -0xd4);}return _0x1b63aa;}[_0x4d5064(-0x157,-0x1a7)](){const _0x5ca33d=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});function _0x262ee0(_0x1f5734,_0x487610){return _0x4d5064(_0x1f5734-0x623,_0x487610);}Object['keys'](this['rendering']['framebuffers'])[_0x262ee0(0x4b5,0x443)](_0x151663=>{function _0x5b2cf9(_0x13a5a1,_0x1cd5e4){return _0x262ee0(_0x13a5a1- -0x45d,_0x1cd5e4);}function _0x58d16c(_0x50c267,_0x2144fe){return _0x262ee0(_0x2144fe- -0x300,_0x50c267);}_0x5ca33d[_0x5b2cf9(0x80,0x4c)]=this[_0x58d16c(0x14f,0x1a3)]['framebuffers'][_0x151663],_0x5ca33d['execute'](this['context']);});}['changeOptions'](_0x28cea4){function _0x3ad8f2(_0x42abcb,_0x2ba099){return _0x4d5064(_0x2ba099-0x4c0,_0x42abcb);}let _0x3941e9=![];_0x28cea4[_0x54415d(-0x19a,-0x1d2)]&&this['options'][_0x3ad8f2(0x3a8,0x395)]!==_0x28cea4['particlesTextureSize']&&(_0x3941e9=!![]);function _0x54415d(_0x351615,_0x314657){return _0x533bd1(_0x314657,_0x351615- -0x6b8);}const _0x3586eb=deepMerge(_0x28cea4,this['options']);if(_0x3586eb[_0x3ad8f2(0x34c,0x395)]<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this[_0x3ad8f2(0x2c9,0x321)]=_0x3586eb,this['rendering'][_0x54415d(-0x18c,-0x11a)](_0x28cea4),this['computing']['updateOptions'](_0x28cea4),_0x3941e9&&(this[_0x54415d(-0x1ee,-0x24e)][_0x54415d(-0x251,-0x25d)](),this['computing'][_0x3ad8f2(0x3c0,0x3d6)](),this[_0x54415d(-0x1ef,-0x1ba)]['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x38c9ba){this[_0x15daaf(-0xc6,-0xa5)]=_0x38c9ba;function _0x211e8c(_0x7e2898,_0x42d34f){return _0x533bd1(_0x7e2898,_0x42d34f-0x36);}this['computing']['viewerParameters']=_0x38c9ba;function _0x15daaf(_0x290fde,_0x28e526){return _0x533bd1(_0x28e526,_0x290fde- -0x61f);}this['rendering'][_0x211e8c(0x598,0x58f)]=_0x38c9ba;}['destroy'](){function _0x3606ab(_0x490694,_0x235b89){return _0x4d5064(_0x235b89- -0x58,_0x490694);}this[_0x3606ab(-0x1c4,-0x1d7)]['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x32c72c={};_0x32c72c[_0x4d5064(-0x1da,-0x1c8)]=0x1,_0x32c72c[_0x533bd1(0x459,0x4cf)]=0x2;const _0x53ed83={};_0x53ed83['min']=0x14,_0x53ed83[_0x4d5064(-0x17a,-0x110)]=0x64;const _0x27b084={};_0x27b084[_0x4d5064(-0x12b,-0x136)]=0x64,_0x27b084[_0x533bd1(0x4b0,0x4a2)]=0x0,_0x27b084[_0x4d5064(-0x1a0,-0x208)]=_0x32c72c,_0x27b084['lineLength']=_0x53ed83,_0x27b084[_0x533bd1(0x4a4,0x46a)]=0x1,_0x27b084[_0x4d5064(-0x134,-0x161)]=0.003,_0x27b084['dropRateBump']=0.001,_0x27b084['colors']=['rgb(206,255,255)'],_0x27b084['flipY']=![],_0x27b084['dynamic']=!![];const DEF_OPTIONS=_0x27b084;class WindLayer extends BaseLayer$1{constructor(_0x3d6126={}){_0x3d6126={...DEF_OPTIONS,..._0x3d6126},super(_0x3d6126),this['_setOptionsHook'](_0x3d6126,_0x3d6126);}get[_0x533bd1(0x562,0x550)](){return this['primitives'];}get['data'](){function _0x535829(_0x922dfb,_0x716c44){return _0x533bd1(_0x922dfb,_0x716c44- -0x3f2);}return this[_0x535829(0x10d,0xb8)]['data'];}set['data'](_0x677fdb){function _0x470001(_0x1bdf2d,_0x559660){return _0x533bd1(_0x559660,_0x1bdf2d- -0x11b);}this['options'][_0x470001(0x37a,0x301)]=_0x677fdb;function _0x4bff4a(_0xe2ef0c,_0x5e9c63){return _0x533bd1(_0x5e9c63,_0xe2ef0c- -0x5ec);}this[_0x4bff4a(-0x138,-0x105)](_0x677fdb);}get[_0x533bd1(0x4c6,0x461)](){return this['options']['colors'];}set['colors'](_0x317c21){this['options'][_0x1d2933(0x1ca,0x224)]=_0x317c21;function _0x591df5(_0x13ab55,_0x22de47){return _0x533bd1(_0x13ab55,_0x22de47- -0x50b);}const _0x551865={};_0x551865['colors']=_0x317c21;function _0x1d2933(_0x2a238f,_0x4715b5){return _0x4d5064(_0x4715b5-0x40c,_0x2a238f);}this[_0x591df5(-0x5d,-0x83)](this['options'],_0x551865);}[_0x4d5064(-0x1c4,-0x142)](_0x3da336){function _0x53c220(_0x1b7c20,_0x570e72){return _0x533bd1(_0x570e72,_0x1b7c20- -0x481);}_0x3da336?this['_addedHook']():this[_0x53c220(0xe1,0x12b)]();}['_mountedHook'](){}['_addedHook'](){function _0x29dc6b(_0x4de831,_0x90a521){return _0x4d5064(_0x4de831-0x6b4,_0x90a521);}this[_0x29dc6b(0x58e,0x58f)]=this[_0xb04336(0x2f7,0x35b)]['scene'],this[_0x29dc6b(0x4c2,0x500)]=this[_0xb04336(0x2f7,0x2c4)]['camera'];this[_0x29dc6b(0x515,0x579)][_0xb04336(0x2f2,0x2c0)]&&this[_0x29dc6b(0x51f,0x573)](this[_0xb04336(0x307,0x338)][_0x29dc6b(0x500,0x4c0)]);if(!this[_0x29dc6b(0x501,0x550)]||!this[_0x29dc6b(0x5bc,0x5ce)])return;this['viewerParameters']={'lonRange':new Cesium$1[(_0xb04336(0x3a7,0x3ae))](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x29dc6b(0x58e,0x5ea)]['mode']},this['updateViewerParameters'](),this[_0xb04336(0x302,0x27c)]=new WindParticleSystem(this[_0xb04336(0x380,0x389)]['context'],this['windData'],this[_0x29dc6b(0x515,0x531)],this['viewerParameters'],this[_0xb04336(0x380,0x3a0)]),this[_0xb04336(0x346,0x344)]=this[_0xb04336(0x302,0x2c5)][_0x29dc6b(0x5b0,0x575)]();function _0xb04336(_0x4a8d3e,_0x59d9f2){return _0x4d5064(_0x4a8d3e-0x4a6,_0x59d9f2);}this[_0xb04336(0x346,0x2e5)]['forEach'](_0x4ebdeb=>{function _0xc669b0(_0x2f9042,_0x37b183){return _0xb04336(_0x2f9042-0xf0,_0x37b183);}function _0x2b9f1c(_0x53a38c,_0x225b1a){return _0x29dc6b(_0x53a38c- -0x1bc,_0x225b1a);}this[_0xc669b0(0x470,0x3f5)][_0xc669b0(0x436,0x46c)][_0xc669b0(0x3da,0x37d)](_0x4ebdeb);}),this[_0xb04336(0x2b4,0x283)][_0x29dc6b(0x506,0x563)]=0.01,this['camera']['changed'][_0x29dc6b(0x5c7,0x540)](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete'][_0x29dc6b(0x5c7,0x5d1)](this[_0xb04336(0x3b1,0x3dd)][_0xb04336(0x3c2,0x442)](this)),window[_0x29dc6b(0x5c7,0x5a8)]('resize',this[_0x29dc6b(0x5bf,0x55b)]['bind'](this));}[_0x4d5064(-0xe7,-0xde)](){this['camera'][_0x1a5b39(0x46d,0x3e6)][_0x1a5b39(0x35b,0x3b3)](this['updateViewerParameters']['bind'](this));function _0x1a5b39(_0x3f377b,_0x448c5f){return _0x533bd1(_0x3f377b,_0x448c5f- -0xec);}function _0x53efc6(_0x4827a3,_0x195ab6){return _0x533bd1(_0x4827a3,_0x195ab6- -0x174);}this['scene']['morphComplete'][_0x53efc6(0x33d,0x32b)](this['updateViewerParameters'][_0x1a5b39(0x47c,0x479)](this)),window['removeEventListener']('resize',this['updateViewerParameters']['bind'](this)),this[_0x53efc6(0x398,0x375)]&&(this[_0x53efc6(0x361,0x375)]['forEach'](_0xd3ac6f=>{function _0x4c907e(_0x5a8eb0,_0x5d72c5){return _0x53efc6(_0x5a8eb0,_0x5d72c5- -0x56a);}this['scene'][_0x4c907e(-0x16c,-0x1f5)]['remove'](_0xd3ac6f);}),delete this['primitives']),this['particleSystem']&&(this['particleSystem'][_0x1a5b39(0x456,0x416)](),delete this['particleSystem']);}['setData'](_0x28586d,_0x364651){this['windData']=this['processWindData'](_0x28586d);if(_0x364651){this['_removedHook'](),this['_addedHook']();return;}function _0x5b2ede(_0x343a9f,_0x2e981a){return _0x4d5064(_0x343a9f-0x427,_0x2e981a);}this['particleSystem']?(this['particleSystem'][_0x5b2ede(0x2a8,0x316)]['updateWindData'](this['windData']),this['scene']['requestRender']()):this['_addedHook']();}['_setOptionsHook'](_0x1d337d,_0x374a10){function _0x549b65(_0x3f3663,_0x2859c9){return _0x533bd1(_0x2859c9,_0x3f3663- -0x33a);}function _0x12ac4c(_0x274f82,_0x3ea97e){return _0x4d5064(_0x3ea97e-0x4e8,_0x274f82);}this['particleSystem']&&(this[_0x12ac4c(0x314,0x344)][_0x549b65(0x1a4,0x1c4)](_0x374a10),this[_0x12ac4c(0x3d4,0x3c2)]['requestRender']());}['processWindData'](_0x581a82){var _0x1edc42,_0x593c48;function _0x1583ef(_0x14c149,_0x49d3fb){return _0x4d5064(_0x49d3fb- -0xd7,_0x14c149);}const _0x283b77={..._0x581a82};function _0xf27ee0(_0x5c9138,_0x5f39d7){return _0x533bd1(_0x5c9138,_0x5f39d7- -0x38a);}const _0x4015ba=_0x283b77;!_0x4015ba[_0x1583ef(-0x218,-0x239)]&&_0x4015ba['rows']&&(_0x4015ba['height']=_0x4015ba['rows']);!_0x4015ba[_0x1583ef(-0x22f,-0x2a0)]&&_0x4015ba[_0xf27ee0(0x195,0x19f)]&&(_0x4015ba['width']=_0x4015ba['cols']);!_0x4015ba['bounds']&&(_0x4015ba[_0x1583ef(-0x1b7,-0x1f2)]={'west':_0x4015ba[_0xf27ee0(0x178,0x193)],'south':_0x4015ba['ymin'],'east':_0x4015ba[_0xf27ee0(0xae,0xe4)],'north':_0x4015ba[_0x1583ef(-0x211,-0x1b9)]});if(!_0x4015ba['u']){const _0x49dfb4={};_0x49dfb4['array']=_0x581a82['udata'],_0x49dfb4[_0xf27ee0(0x10d,0xe5)]=_0x581a82['umin'],_0x49dfb4['max']=_0x581a82['umax'],_0x4015ba['u']=_0x49dfb4;}if(!_0x4015ba['v']){const _0x564e27={};_0x564e27['array']=_0x581a82[_0xf27ee0(0x14e,0x1c4)],_0x564e27['min']=_0x581a82['vmin'],_0x564e27['max']=_0x581a82['vmax'],_0x4015ba['v']=_0x564e27;}if(((_0x1edc42=_0x4015ba[_0x1583ef(-0x203,-0x27c)])===null||_0x1edc42===void 0x0?void 0x0:_0x1edc42['min'])===undefined||((_0x593c48=_0x4015ba['speed'])===null||_0x593c48===void 0x0?void 0x0:_0x593c48['max'])===undefined||_0x4015ba['speed']['array']===undefined){const _0x34b3dc={'array':new Float32Array(_0x4015ba['u']['array']['length']),'min':Number['MAX_VALUE'],'max':Number[_0xf27ee0(0x128,0x14b)]};for(let _0x36e133=0x0;_0x36e133<_0x4015ba['u'][_0x1583ef(-0x1e0,-0x1bc)]['length'];_0x36e133++){_0x34b3dc[_0x1583ef(-0x233,-0x1bc)][_0x36e133]=Math[_0xf27ee0(0x142,0xe6)](_0x4015ba['u'][_0xf27ee0(0x1b5,0x1da)][_0x36e133]*_0x4015ba['u']['array'][_0x36e133]+_0x4015ba['v']['array'][_0x36e133]*_0x4015ba['v']['array'][_0x36e133]),_0x34b3dc[_0xf27ee0(0x218,0x1da)][_0x36e133]!==0x0&&(_0x34b3dc[_0xf27ee0(0xae,0xe5)]=Math[_0xf27ee0(0x14f,0xe5)](_0x34b3dc['min'],_0x34b3dc['array'][_0x36e133]),_0x34b3dc['max']=Math['max'](_0x34b3dc[_0x1583ef(-0x1fa,-0x251)],_0x34b3dc['array'][_0x36e133]));}_0x4015ba['speed']=_0x34b3dc;}return _0x4015ba;}['updateViewerParameters'](){var _0x5d4b87;const _0x19e784=this[_0x18e8e1(0x5e,0x5a)];if(!_0x19e784)return;const _0x4ab690=_0x19e784['canvas'],_0x78e12a={};_0x78e12a['x']=0x0,_0x78e12a['y']=0x0;const _0x455f1d={};_0x455f1d['x']=0x0,_0x455f1d['y']=_0x4ab690[_0xb0d9b(-0x101,-0x16b)];const _0x71bd66={};function _0xb0d9b(_0x4ce3ca,_0x21a9d7){return _0x4d5064(_0x4ce3ca-0xdd,_0x21a9d7);}_0x71bd66['x']=_0x4ab690['clientWidth'],_0x71bd66['y']=0x0;const _0x2b4076={};_0x2b4076['x']=_0x4ab690[_0xb0d9b(-0xb0,-0x56)],_0x2b4076['y']=_0x4ab690['clientHeight'];const _0x4926fe=[_0x78e12a,_0x455f1d,_0x71bd66,_0x2b4076];let _0x9c4e7e=0xb4,_0x5a6393=-0xb4,_0x8a3a9b=0x5a,_0x18c332=-0x5a,_0x3955e0=![];function _0x18e8e1(_0x3493bb,_0xa0b348){return _0x533bd1(_0xa0b348,_0x3493bb- -0x4c5);}for(const _0x25cb14 of _0x4926fe){const _0x327eb2=_0x19e784['camera']['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x25cb14['x'],_0x25cb14['y']),_0x19e784['globe'][_0xb0d9b(-0x8b,-0xa6)]);if(!_0x327eb2){_0x3955e0=!![];break;}const _0x49e78b=_0x19e784[_0x18e8e1(-0x25,0x30)]['ellipsoid']['cartesianToCartographic'](_0x327eb2),_0x68b7bf=Cesium$1['Math']['toDegrees'](_0x49e78b['longitude']),_0x4a6c86=Cesium$1['Math']['toDegrees'](_0x49e78b['latitude']);_0x9c4e7e=Math['min'](_0x9c4e7e,_0x68b7bf),_0x5a6393=Math['max'](_0x5a6393,_0x68b7bf),_0x8a3a9b=Math['min'](_0x8a3a9b,_0x4a6c86),_0x18c332=Math[_0x18e8e1(0xa,0x83)](_0x18c332,_0x4a6c86);}if(!_0x3955e0){const _0x51a623=new Cesium$1['Cartesian2'](Math[_0x18e8e1(0xa,0x31)](this['windData']['bounds']['west'],_0x9c4e7e),Math['min'](this['windData'][_0xb0d9b(-0x3e,-0x86)][_0xb0d9b(-0xc0,-0x115)],_0x5a6393)),_0xd43e2b=new Cesium$1[(_0xb0d9b(-0x22,-0xa7))](Math[_0xb0d9b(-0x9d,-0x60)](this['windData']['bounds'][_0x18e8e1(-0x52,-0xad)],_0x8a3a9b),Math[_0x18e8e1(-0x56,0x5)](this['windData']['bounds']['north'],_0x18c332)),_0x11e557=(_0x51a623['y']-_0x51a623['x'])*0.05,_0x4d7a84=(_0xd43e2b['y']-_0xd43e2b['x'])*0.05;_0x51a623['x']=Math['max'](this[_0xb0d9b(-0xd6,-0xb5)][_0x18e8e1(0x69,0x42)]['west'],_0x51a623['x']-_0x11e557),_0x51a623['y']=Math['min'](this[_0xb0d9b(-0xd6,-0x147)]['bounds'][_0x18e8e1(-0x19,-0x25)],_0x51a623['y']+_0x11e557),_0xd43e2b['x']=Math['max'](this['windData'][_0xb0d9b(-0x3e,-0x59)]['south'],_0xd43e2b['x']-_0x4d7a84),_0xd43e2b['y']=Math['min'](this['windData']['bounds'][_0xb0d9b(-0xbd,-0xf7)],_0xd43e2b['y']+_0x4d7a84),this['viewerParameters'][_0xb0d9b(-0x8a,-0x75)]=_0x51a623,this['viewerParameters']['latRange']=_0xd43e2b;const _0x16f6dc=this[_0xb0d9b(-0xd6,-0xc3)]['bounds']['east']-this['windData']['bounds'][_0x18e8e1(-0x42,-0x47)],_0x362bfb=this['windData']['bounds']['north']-this['windData']['bounds'][_0xb0d9b(-0xf9,-0xe3)],_0x4bd2c7=(_0x51a623['y']-_0x51a623['x'])/_0x16f6dc,_0x21d495=(_0xd43e2b['y']-_0xd43e2b['x'])/_0x362bfb,_0x1f4d4e=Math['min'](_0x4bd2c7,_0x21d495),_0x56d378=0x3e8*_0x1f4d4e;_0x56d378>0x0&&(this[_0xb0d9b(-0x13,-0x84)][_0xb0d9b(-0x3d,-0x7d)]=Math['max'](0x0,Math[_0xb0d9b(-0xfd,-0x12c)](0x3e8,_0x56d378)));}this['viewerParameters'][_0x18e8e1(-0x3a,-0x4e)]=this['scene']['mode'],(_0x5d4b87=this['particleSystem'])===null||_0x5d4b87===void 0x0||_0x5d4b87['applyViewerParameters'](this['viewerParameters']);}[_0x4d5064(-0x140,-0xe6)](_0x136ef2,_0x482313){const {bounds:_0x189abb,width:_0xee7e69,height:_0x230350,u:_0x2c6331,v:_0x59ee58,speed:_0x1f9c3b}=this['windData'],{flipY:_0x453fb0}=this['options'];if(_0x136ef2<_0x189abb['west']||_0x136ef2>_0x189abb['east']||_0x482313<_0x189abb['south']||_0x482313>_0x189abb[_0x577c3a(0x322,0x2e3)])return null;const _0x29e473=(_0x136ef2-_0x189abb['west'])/(_0x189abb['east']-_0x189abb['west'])*(_0xee7e69-0x1);let _0x43c086=(_0x482313-_0x189abb[_0xf0751b(-0xd1,-0x114)])/(_0x189abb[_0xf0751b(-0xa4,-0xd8)]-_0x189abb['south'])*(_0x230350-0x1);_0x453fb0&&(_0x43c086=_0x230350-0x1-_0x43c086);const _0x520361=Math[_0xf0751b(-0x5a,-0x7d)](_0x29e473),_0x45cf2d=Math['floor'](_0x43c086),_0x3c12a2=Math['floor'](_0x29e473),_0x3f0364=Math[_0xf0751b(-0x195,-0x118)](_0x3c12a2+0x1,_0xee7e69-0x1),_0x2585c5=Math[_0xf0751b(-0x8b,-0x7d)](_0x43c086),_0x5dd4ac=Math[_0x577c3a(0x2e2,0x292)](_0x2585c5+0x1,_0x230350-0x1),_0x462876=_0x29e473-_0x3c12a2,_0xd3df49=_0x43c086-_0x2585c5,_0x17f04b=_0x45cf2d*_0xee7e69+_0x520361;function _0x577c3a(_0xcdea9d,_0x59042e){return _0x533bd1(_0x59042e,_0xcdea9d- -0x18d);}const _0x56ce53=_0x2585c5*_0xee7e69+_0x3c12a2,_0x34a597=_0x2585c5*_0xee7e69+_0x3f0364,_0x3af67c=_0x5dd4ac*_0xee7e69+_0x3c12a2,_0x534d5d=_0x5dd4ac*_0xee7e69+_0x3f0364;function _0xf0751b(_0x39fcea,_0x2e2db7){return _0x533bd1(_0x39fcea,_0x2e2db7- -0x587);}const _0x346bf5=_0x2c6331['array'][_0x56ce53],_0x57a368=_0x2c6331['array'][_0x34a597],_0x3c7c3e=_0x2c6331['array'][_0x3af67c],_0x7cf31c=_0x2c6331['array'][_0x534d5d],_0x223400=(0x1-_0x462876)*(0x1-_0xd3df49)*_0x346bf5+_0x462876*(0x1-_0xd3df49)*_0x57a368+(0x1-_0x462876)*_0xd3df49*_0x3c7c3e+_0x462876*_0xd3df49*_0x7cf31c,_0xff4198=_0x59ee58['array'][_0x56ce53],_0x262729=_0x59ee58['array'][_0x34a597],_0x57a324=_0x59ee58['array'][_0x3af67c],_0x1bcc23=_0x59ee58['array'][_0x534d5d],_0x179565=(0x1-_0x462876)*(0x1-_0xd3df49)*_0xff4198+_0x462876*(0x1-_0xd3df49)*_0x262729+(0x1-_0x462876)*_0xd3df49*_0x57a324+_0x462876*_0xd3df49*_0x1bcc23,_0x12cd1b=Math[_0x577c3a(0x2e3,0x33f)](_0x223400*_0x223400+_0x179565*_0x179565),_0x3bd60d={};_0x3bd60d['u']=_0x2c6331['array'][_0x17f04b],_0x3bd60d['v']=_0x59ee58['array'][_0x17f04b],_0x3bd60d['speed']=_0x1f9c3b['array'][_0x17f04b];const _0x2ee707={};_0x2ee707['u']=_0x223400,_0x2ee707['v']=_0x179565,_0x2ee707['speed']=_0x12cd1b;const _0x341a95={};return _0x341a95[_0xf0751b(-0x63,-0x7f)]=_0x3bd60d,_0x341a95['interpolated']=_0x2ee707,_0x341a95;}}mars3d__namespace[_0x4d5064(-0x15a,-0x145)]['register']('wind',WindLayer),mars3d__namespace['layer'][_0x4d5064(-0x153,-0x129)]=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this['lat']=null,this['tlng']=null,this['tlat']=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x4fe169 in this){delete this[_0x4fe169];}}}class CanvasWindField{constructor(_0x575439){function _0x49575a(_0x2dbe97,_0x377514){return _0x4d5064(_0x377514-0x1b7,_0x2dbe97);}this[_0x49575a(0xf4,0x92)](_0x575439);}get['speedRate'](){function _0xb31212(_0x837a6c,_0x467470){return _0x4d5064(_0x837a6c-0x33e,_0x467470);}return this[_0xb31212(0x1bb,0x240)];}set['speedRate'](_0x53a084){function _0x473fb1(_0x20758c,_0xa6c3f0){return _0x533bd1(_0x20758c,_0xa6c3f0- -0x3d4);}this[_0x473fb1(0x119,0xf2)]=(0x64-(_0x53a084>0x63?0x63:_0x53a084))*0x64;function _0x32f333(_0x5ee2d8,_0x1867ab){return _0x533bd1(_0x1867ab,_0x5ee2d8- -0x1f);}this['_calc_speedRate']=[(this['xmax']-this['xmin'])/this[_0x32f333(0x4a7,0x484)],(this[_0x32f333(0x548,0x4f6)]-this[_0x32f333(0x496,0x45b)])/this['_speedRate']];}get[_0x4d5064(-0x109,-0x14e)](){function _0x28f2f5(_0x262010,_0x52cf51){return _0x533bd1(_0x262010,_0x52cf51- -0x5d8);}return this[_0x28f2f5(-0x1f,-0xa3)];}set[_0x4d5064(-0x109,-0x165)](_0x39318b){function _0x2e3ad9(_0x30a129,_0x27c039){return _0x4d5064(_0x30a129-0x692,_0x27c039);}this[_0x2e3ad9(0x57e,0x55c)]=_0x39318b;}[_0x4d5064(-0x125,-0x135)](_0x3255cf){this['options']=_0x3255cf;function _0x3b0ebc(_0x59c120,_0x4353af){return _0x4d5064(_0x59c120-0x568,_0x4353af);}this['maxAge']=_0x3255cf[_0x2dd676(0x3be,0x43e)]||0x78;function _0x2dd676(_0xff0a0f,_0x523084){return _0x4d5064(_0xff0a0f-0x4c7,_0x523084);}this['speedRate']=_0x3255cf['speedRate']||0x32,this['particles']=[];const _0x1eee9d=_0x3255cf[_0x2dd676(0x334,0x2f2)]||0x1000;for(let _0x20a81d=0x0;_0x20a81d<_0x1eee9d;_0x20a81d++){const _0x1e3755=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x1e3755);}}['setDate'](_0x10d7ac){this['rows']=_0x10d7ac[_0x3700f1(0x331,0x37d)],this['cols']=_0x10d7ac[_0x1bb5a2(-0x24,-0x87)],this['xmin']=_0x10d7ac[_0x1bb5a2(-0x30,0xa)],this['xmax']=_0x10d7ac['xmax'],this[_0x1bb5a2(-0x98,-0x85)]=_0x10d7ac[_0x3700f1(0x2be,0x29a)],this['ymax']=_0x10d7ac['ymax'],this[_0x3700f1(0x2e5,0x2cd)]=[];function _0x1bb5a2(_0x48df35,_0x422876){return _0x4d5064(_0x48df35-0xfc,_0x422876);}const _0x25fa0d=_0x10d7ac[_0x1bb5a2(-0x90,-0xa8)],_0x1b8041=_0x10d7ac[_0x1bb5a2(0x1,0x6d)];let _0x17c7c1=![];_0x25fa0d[_0x1bb5a2(-0x12,0x66)]===this['rows']&&_0x25fa0d[0x0][_0x1bb5a2(-0x12,0x53)]===this['cols']&&(_0x17c7c1=!![]);let _0xba5cb1=0x0,_0x2cd5a0=null,_0x25c0f7=null;function _0x3700f1(_0x4b5efe,_0x46ce3a){return _0x533bd1(_0x46ce3a,_0x4b5efe- -0x1f7);}for(let _0x536a1f=0x0;_0x536a1f<this[_0x3700f1(0x331,0x315)];_0x536a1f++){_0x2cd5a0=[];for(let _0x8e5341=0x0;_0x8e5341<this['cols'];_0x8e5341++,_0xba5cb1++){_0x17c7c1?_0x25c0f7=this['_calcUV'](_0x25fa0d[_0x536a1f][_0x8e5341],_0x1b8041[_0x536a1f][_0x8e5341]):_0x25c0f7=this['_calcUV'](_0x25fa0d[_0xba5cb1],_0x1b8041[_0xba5cb1]),_0x2cd5a0['push'](_0x25c0f7);}this['grid']['push'](_0x2cd5a0);}!this[_0x1bb5a2(-0xa3,-0xec)]['flipY']&&this['grid']['reverse']();}[_0x533bd1(0x5d8,0x55a)](){delete this[_0x2f9ab3(-0x78,-0x94)],delete this[_0x2f9ab3(-0x77,-0xce)],delete this['xmin'];function _0x2f9ab3(_0x554fd8,_0x4fc183){return _0x533bd1(_0x4fc183,_0x554fd8- -0x5a0);}function _0xbc6ed9(_0x1c7e6a,_0x46eea4){return _0x533bd1(_0x46eea4,_0x1c7e6a- -0x715);}delete this['xmax'],delete this['ymin'],delete this['ymax'],delete this[_0x2f9ab3(-0xc4,-0x9a)],delete this['particles'];}[_0x4d5064(-0x18e,-0x20f)](_0x4cb726,_0x37076d){function _0x132c2e(_0x1e50b9,_0x4772c8){return _0x4d5064(_0x1e50b9-0x4af,_0x4772c8);}const _0x3790a5=(_0x4cb726-this['xmin'])/(this['xmax']-this['xmin'])*(this['cols']-0x1),_0x871616=(this['ymax']-_0x37076d)/(this['ymax']-this['ymin'])*(this[_0x132c2e(0x38e,0x3e1)]-0x1);return[_0x3790a5,_0x871616];}[_0x533bd1(0x543,0x50c)](_0x2aa426,_0x1f1378){if(_0x2aa426<0x0||_0x2aa426>=this[_0x2174b1(-0x14b,-0x192)]||_0x1f1378>=this['rows'])return[0x0,0x0,0x0];const _0xacfee7=Math[_0x2174b1(-0x1b4,-0x1b1)](_0x2aa426),_0xf0626b=Math['floor'](_0x1f1378);if(_0xacfee7===_0x2aa426&&_0xf0626b===_0x1f1378)return this['grid'][_0x1f1378][_0x2aa426];const _0x4ef3f4=_0xacfee7+0x1,_0x284e78=_0xf0626b+0x1,_0x1d20a0=this['getUVByXY'](_0xacfee7,_0xf0626b),_0x2dcb48=this['getUVByXY'](_0x4ef3f4,_0xf0626b),_0x59e529=this[_0x325b09(0x102,0xee)](_0xacfee7,_0x284e78);function _0x2174b1(_0x4dade1,_0x4852c6){return _0x4d5064(_0x4852c6- -0x72,_0x4dade1);}const _0x325a9e=this['getUVByXY'](_0x4ef3f4,_0x284e78);let _0x8e76d0=null;try{_0x8e76d0=this[_0x2174b1(-0x2a0,-0x247)](_0x2aa426-_0xacfee7,_0x1f1378-_0xf0626b,_0x1d20a0,_0x2dcb48,_0x59e529,_0x325a9e);}catch(_0x507605){console[_0x325b09(0xe0,0xde)](_0x2aa426,_0x1f1378);}function _0x325b09(_0x5c4479,_0x24dcb5){return _0x4d5064(_0x24dcb5-0x22b,_0x5c4479);}return _0x8e76d0;}[_0x533bd1(0x461,0x474)](_0x1fb6c7,_0x19411d,_0x114403,_0x1af347,_0x56bf44,_0xeace92){const _0x2b52e0=0x1-_0x1fb6c7,_0xf47d7e=0x1-_0x19411d,_0x5dd79e=_0x2b52e0*_0xf47d7e,_0x241593=_0x1fb6c7*_0xf47d7e,_0x5702d4=_0x2b52e0*_0x19411d,_0x26d482=_0x1fb6c7*_0x19411d,_0x5615fc=_0x114403[0x0]*_0x5dd79e+_0x1af347[0x0]*_0x241593+_0x56bf44[0x0]*_0x5702d4+_0xeace92[0x0]*_0x26d482,_0x4a1a9b=_0x114403[0x1]*_0x5dd79e+_0x1af347[0x1]*_0x241593+_0x56bf44[0x1]*_0x5702d4+_0xeace92[0x1]*_0x26d482;return this['_calcUV'](_0x5615fc,_0x4a1a9b);}['_calcUV'](_0x4acda9,_0x157c65){return[+_0x4acda9,+_0x157c65,Math['sqrt'](_0x4acda9*_0x4acda9+_0x157c65*_0x157c65)];}[_0x533bd1(0x466,0x487)](_0x3ff88c,_0x3e15ce){if(!this['isInExtent'](_0x3ff88c,_0x3e15ce))return null;const _0x4ef3af=this['toGridXY'](_0x3ff88c,_0x3e15ce),_0x456b01=this['getUVByXY'](_0x4ef3af[0x0],_0x4ef3af[0x1]);return _0x456b01;}[_0x4d5064(-0x1c5,-0x17a)](_0x5272de,_0x271315){function _0x3abecd(_0x16af2a,_0x112d10){return _0x533bd1(_0x112d10,_0x16af2a- -0x446);}return _0x5272de>=this[_0x3abecd(0xd7,0xb6)]&&_0x5272de<=this['xmax']&&_0x271315>=this['ymin']&&_0x271315<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x8d1218=fRandomByfloat(this['xmin'],this['xmax']),_0x564c77=fRandomByfloat(this[_0x460ff8(-0x214,-0x1da)],this['ymax']);function _0x460ff8(_0x5d0fa8,_0x1aa0ea){return _0x533bd1(_0x5d0fa8,_0x1aa0ea- -0x68f);}const _0xdfab38={};return _0xdfab38['lat']=_0x564c77,_0xdfab38['lng']=_0x8d1218,_0xdfab38;}['getParticles'](){let _0x57f755,_0x67592c,_0x2021a4;function _0x110c2f(_0x113734,_0x2a8bc9){return _0x4d5064(_0x113734-0x44,_0x2a8bc9);}for(let _0x4f400d=0x0,_0x47f5a7=this[_0x110c2f(-0x17b,-0x200)][_0x1d2e46(0x157,0x140)];_0x4f400d<_0x47f5a7;_0x4f400d++){let _0x5b34c2=this[_0x110c2f(-0x17b,-0x204)][_0x4f400d];_0x5b34c2[_0x110c2f(-0xcb,-0x10b)]<=0x0&&(_0x5b34c2=this[_0x1d2e46(0x109,0x15b)](_0x5b34c2));if(_0x5b34c2[_0x110c2f(-0xcb,-0x121)]>0x0){const _0x26db09=_0x5b34c2[_0x110c2f(-0x190,-0x124)],_0x45c878=_0x5b34c2['tlat'];_0x2021a4=this['getUVByPoint'](_0x26db09,_0x45c878),_0x2021a4?(_0x57f755=_0x26db09+this['_calc_speedRate'][0x0]*_0x2021a4[0x0],_0x67592c=_0x45c878+this[_0x1d2e46(0xdd,0x141)][0x1]*_0x2021a4[0x1],_0x5b34c2['lng']=_0x26db09,_0x5b34c2[_0x1d2e46(0x104,0x124)]=_0x45c878,_0x5b34c2['tlng']=_0x57f755,_0x5b34c2['tlat']=_0x67592c,_0x5b34c2[_0x1d2e46(0xc0,0xd6)]=_0x2021a4[0x2],_0x5b34c2['age']--):_0x5b34c2[_0x1d2e46(0x156,0x16e)]=0x0;}}function _0x1d2e46(_0x52f7c7,_0x3f98c3){return _0x533bd1(_0x3f98c3,_0x52f7c7- -0x3e4);}return this['particles'];}['_randomParticle'](_0x5cfd4c){let _0x38cff9,_0x55cabf;for(let _0x504daf=0x0;_0x504daf<0x1e;_0x504daf++){_0x38cff9=this['getRandomLatLng'](),_0x55cabf=this['getUVByPoint'](_0x38cff9[_0x59a3a0(0x17b,0x1ca)],_0x38cff9['lat']);if(_0x55cabf&&_0x55cabf[0x2]>0x0)break;}if(!_0x55cabf)return _0x5cfd4c;const _0x41e72d=_0x38cff9[_0x59a3a0(0x193,0x1ca)]+this[_0x59a3a0(0x287,0x21f)][0x0]*_0x55cabf[0x0],_0x2f2bb9=_0x38cff9[_0x571aef(-0x1da,-0x169)]+this['_calc_speedRate'][0x1]*_0x55cabf[0x1];_0x5cfd4c['lng']=_0x38cff9['lng'];function _0x59a3a0(_0x57dcba,_0x39fa31){return _0x533bd1(_0x57dcba,_0x39fa31- -0x2a2);}_0x5cfd4c[_0x59a3a0(0x20d,0x246)]=_0x38cff9[_0x571aef(-0x1da,-0x1e9)],_0x5cfd4c[_0x59a3a0(0x218,0x1d3)]=_0x41e72d,_0x5cfd4c['tlat']=_0x2f2bb9,_0x5cfd4c['age']=Math['round'](0xa+Math['random']()*this['maxAge']),_0x5cfd4c['speed']=_0x55cabf[0x2];function _0x571aef(_0xcb304,_0x120015){return _0x533bd1(_0x120015,_0xcb304- -0x6c2);}return _0x5cfd4c;}['destroy'](){for(const _0x558e12 in this){delete this[_0x558e12];}}}function fRandomByfloat(_0x5ad42f,_0x128a20){return _0x5ad42f+Math['random']()*(_0x128a20-_0x5ad42f);}function _0x533bd1(_0x1f0e22,_0x30067d){return _0x2c57(_0x30067d-0x368,_0x1f0e22);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];function _0x2c57(_0x5777a4,_0xe9828a){const _0x22337e=_0x2233();return _0x2c57=function(_0x2c5744,_0x522c2d){_0x2c5744=_0x2c5744-0xec;let _0x353d89=_0x22337e[_0x2c5744];return _0x353d89;},_0x2c57(_0x5777a4,_0xe9828a);}class CanvasWindLayer extends BaseLayer{constructor(_0x2e38bd={}){function _0x1d15aa(_0x2e73cf,_0x4622f1){return _0x533bd1(_0x4622f1,_0x2e73cf- -0x5c);}function _0x44c4cb(_0x471b4a,_0x2adf60){return _0x4d5064(_0x471b4a-0x247,_0x2adf60);}super(_0x2e38bd),this['_setOptionsHook'](_0x2e38bd),this['canvas']=null,_0x2e38bd[_0x44c4cb(0x5f,0xcb)]&&_0x2e38bd['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x44c4cb(0x5d,0xcd))](_0x2e38bd));}[_0x4d5064(-0x1c1,-0x1b9)](_0x481e58,_0x153e99){this['frameTime']=0x3e8/(_0x481e58[_0x43134d(-0x21f,-0x216)]||0xa),this['_pointerEvents']=this['options']['pointerEvents']??![];function _0x42998c(_0x129391,_0x3ced60){return _0x533bd1(_0x3ced60,_0x129391- -0x67f);}this[_0x42998c(-0x1d1,-0x1f7)]=_0x481e58['color']||'#ffffff',this[_0x43134d(-0x284,-0x245)]=_0x481e58['lineWidth']||0x1,this['fixedHeight']=_0x481e58['fixedHeight']??0x0,this[_0x43134d(-0x234,-0x225)]=_0x481e58['flipY']??![];function _0x43134d(_0x5eb837,_0x13a56b){return _0x4d5064(_0x5eb837- -0xe4,_0x13a56b);}this['windField']&&this['windField'][_0x42998c(-0x15b,-0x14f)](_0x481e58);}get['layer'](){return this['canvas'];}get[_0x533bd1(0x42d,0x49c)](){function _0x19d4eb(_0x2c8c55,_0x3fc8d7){return _0x4d5064(_0x3fc8d7-0x62d,_0x2c8c55);}function _0xb162f(_0xed9eaa,_0x1d6a54){return _0x4d5064(_0x1d6a54-0x4cf,_0xed9eaa);}return this[_0xb162f(0x358,0x320)][_0x19d4eb(0x539,0x507)][_0x19d4eb(0x48a,0x461)][_0x19d4eb(0x4b8,0x4a0)];}get['canvasHeight'](){function _0x53d824(_0x28bb8f,_0x1441c9){return _0x4d5064(_0x1441c9-0x565,_0x28bb8f);}function _0x2fc5ae(_0x44556b,_0xb3c947){return _0x4d5064(_0xb3c947-0x1fc,_0x44556b);}return this[_0x53d824(0x440,0x3b6)][_0x2fc5ae(0xb7,0xd6)]['canvas'][_0x2fc5ae(0xe,0x1e)];}get['pointerEvents'](){function _0x46e0e2(_0x163408,_0x3d4bc8){return _0x533bd1(_0x3d4bc8,_0x163408- -0x300);}return this[_0x46e0e2(0x165,0x1c8)];}set[_0x4d5064(-0x1cf,-0x1a9)](_0x472c26){function _0x3a3e28(_0x5ac619,_0x369a33){return _0x4d5064(_0x369a33-0x404,_0x5ac619);}this['_pointerEvents']=_0x472c26;function _0x1bd5de(_0x3fb5bb,_0x20c23c){return _0x533bd1(_0x3fb5bb,_0x20c23c- -0x64e);}if(!this[_0x3a3e28(0x217,0x238)])return;_0x472c26?this[_0x3a3e28(0x1af,0x238)][_0x1bd5de(-0x189,-0x1ad)][_0x1bd5de(-0xb2,-0x102)]='all':this[_0x3a3e28(0x293,0x238)][_0x1bd5de(-0x1da,-0x1ad)]['pointer-events']='none';}get['particlesNumber'](){function _0x4a9c39(_0xc352f5,_0x117b16){return _0x533bd1(_0x117b16,_0xc352f5- -0x329);}return this['options'][_0x4a9c39(0x18d,0x111)];}set[_0x4d5064(-0x193,-0x204)](_0x26a606){this['options'][_0x46396a(0x1c8,0x191)]=_0x26a606;function _0x46396a(_0x244ce7,_0xa8bbdd){return _0x533bd1(_0x244ce7,_0xa8bbdd- -0x325);}clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{function _0x3332f0(_0xc4e0b1,_0x1e6afc){return _0x46396a(_0xc4e0b1,_0x1e6afc- -0x20b);}this[_0x3332f0(-0x9b,-0xa0)]();},0x1f4);}get[_0x533bd1(0x4fe,0x486)](){function _0x2db4ad(_0x552c80,_0x277fba){return _0x533bd1(_0x277fba,_0x552c80- -0x35a);}return this[_0x2db4ad(0x150,0xd7)]['speedRate'];}set['speedRate'](_0x5d753b){this[_0x213249(-0x230,-0x1b5)]['speedRate']=_0x5d753b;function _0x213249(_0x29ca54,_0x1468bc){return _0x533bd1(_0x29ca54,_0x1468bc- -0x65f);}function _0x9af10e(_0x3cdae7,_0xd22255){return _0x4d5064(_0xd22255-0x60c,_0x3cdae7);}this['windField']&&(this[_0x213249(-0x11e,-0x16f)]['speedRate']=_0x5d753b);}get[_0x4d5064(-0x109,-0x168)](){return this['options']['maxAge'];}set[_0x4d5064(-0x109,-0x15b)](_0x4a5ca8){this['options']['maxAge']=_0x4a5ca8;function _0x452b88(_0x1411ed,_0x5a75d5){return _0x4d5064(_0x5a75d5-0x338,_0x1411ed);}this['windField']&&(this[_0x452b88(0x1e1,0x1df)]['maxAge']=_0x4a5ca8);}get['data'](){return this['windData'];}set['data'](_0xe066e6){this['setData'](_0xe066e6);}get[_0x4d5064(-0x148,-0x12e)](){let _0x3301ab=this['windData'][_0x493276(0x34b,0x365)],_0x320fdc=this['windData']['xmax'];function _0x493276(_0x70ce19,_0x314bcd){return _0x4d5064(_0x70ce19-0x477,_0x314bcd);}let _0x1270e8=this['windData']['ymin'],_0x2ea509=this['windData'][_0x493276(0x395,0x3cb)];_0x320fdc>=0x167&&_0x3301ab===0x0&&(_0x3301ab=-0xb4,_0x320fdc=0xb4);_0x3301ab=Math[_0x66b169(-0x120,-0xfe)](_0x3301ab,-0xb4);function _0x66b169(_0x235ecb,_0x56381e){return _0x4d5064(_0x56381e-0x7c,_0x235ecb);}return _0x320fdc=Math[_0x493276(0x29d,0x21a)](_0x320fdc,0xb4),_0x1270e8=Math['max'](_0x1270e8,-0x5a),_0x2ea509=Math[_0x493276(0x29d,0x2e8)](_0x2ea509,0x5a),Cesium['Rectangle']['fromDegrees'](_0x3301ab,_0x1270e8,_0x320fdc,_0x2ea509);}[_0x533bd1(0x510,0x485)](_0x4fc85c){function _0xddfaa9(_0x135fbe,_0x43b8dc){return _0x533bd1(_0x43b8dc,_0x135fbe- -0x4d5);}_0x4fc85c?this[_0xddfaa9(-0x7d,-0xe)]():(this['windData']&&(this['options']['data']=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0xe44bb5(_0x370513,_0x447c8c){return _0x533bd1(_0x370513,_0x447c8c- -0x562);}function _0x4e2509(_0x4c2bf5,_0x550197){return _0x4d5064(_0x4c2bf5-0x4d,_0x550197);}this[_0xe44bb5(-0x9f,-0xb8)][_0xe44bb5(-0x67,-0x41)]?this[_0x4e2509(-0xeb,-0x14d)]():this[_0x4e2509(-0x10c,-0x106)]=new CanvasWindField(this[_0xe44bb5(-0x53,-0xb8)]);}['_addedHook'](){this['canvas']=this[_0x3f8fc0(0x214,0x299)]();const _0x4feed2={};function _0x3f8fc0(_0x4a2bde,_0x384ce1){return _0x4d5064(_0x384ce1-0x408,_0x4a2bde);}_0x4feed2['willReadFrequently']=!![],this['canvasContext']=this['canvas']['getContext']('2d',_0x4feed2),this[_0x24f19c(0x363,0x3d0)]();function _0x24f19c(_0x3122bc,_0x3415cc){return _0x533bd1(_0x3122bc,_0x3415cc- -0x121);}this[_0x24f19c(0x319,0x389)]['data']&&this[_0x3f8fc0(0x250,0x273)](this[_0x3f8fc0(0x2e3,0x269)]['data']);}['_removedHook'](){function _0x4b1e59(_0x3a9f0c,_0x1b57c8){return _0x533bd1(_0x3a9f0c,_0x1b57c8- -0x279);}this[_0x39c694(0x169,0x157)]();function _0x39c694(_0x20ef32,_0x17901e){return _0x533bd1(_0x20ef32,_0x17901e- -0x403);}this['unbindEvent'](),this['canvas']&&(this[_0x4b1e59(0x1d6,0x221)][_0x4b1e59(0x23a,0x29b)][_0x4b1e59(0x353,0x2d9)](this['canvas']),delete this['canvas']);}['_createCanvas'](){const _0x56a2b3=mars3d__namespace['DomUtil'][_0x29fbec(-0xe,-0x17)]('canvas','mars3d-canvasWind',this[_0x29fbec(-0x7,-0x74)]['container']);function _0x29fbec(_0x3936ca,_0x3a5068){return _0x4d5064(_0x3936ca-0x1a8,_0x3a5068);}_0x56a2b3['style'][_0x29fbec(0x89,0xf2)]=_0x4d1abe(0x4f4,0x4a9),_0x56a2b3['style'][_0x29fbec(-0xf,0x1b)]='0px',_0x56a2b3['style']['left']='0px';function _0x4d1abe(_0x5246c7,_0x3436df){return _0x533bd1(_0x5246c7,_0x3436df- -0x2a);}return _0x56a2b3['style']['width']=this[_0x29fbec(-0x7,-0x57)]['scene']['canvas'][_0x29fbec(0x1b,0x85)]+'px',_0x56a2b3['style'][_0x4d1abe(0x4b6,0x4bd)]=this['_map']['scene']['canvas'][_0x4d1abe(0x42d,0x441)]+'px',_0x56a2b3[_0x29fbec(0x0,-0x7f)][_0x4d1abe(0x3cd,0x450)]=this['_pointerEvents']?_0x4d1abe(0x50c,0x4d6):'none',_0x56a2b3['style']['zIndex']=this['options']['zIndex']??0x9,_0x56a2b3['width']=this['_map']['scene'][_0x4d1abe(0x42e,0x453)][_0x29fbec(0x1b,0x47)],_0x56a2b3['height']=this[_0x29fbec(-0x7,0x12)]['scene']['canvas'][_0x29fbec(-0x36,-0x3f)],_0x56a2b3;}['resize'](){function _0x3515ff(_0x149f11,_0x278070){return _0x4d5064(_0x278070- -0xfd,_0x149f11);}function _0x18659f(_0x10c58f,_0x18c0b0){return _0x4d5064(_0x18c0b0-0x1b9,_0x10c58f);}this['canvas']&&(this['canvas'][_0x18659f(0x46,0x11)]['width']=this['_map']['scene'][_0x3515ff(-0x30e,-0x2c9)]['clientWidth']+'px',this['canvas'][_0x3515ff(-0x328,-0x2a5)][_0x18659f(0x17,0x57)]=this['_map']['scene']['canvas'][_0x18659f(-0x7e,-0x25)]+'px',this['canvas']['width']=this[_0x18659f(-0xd,0xa)]['scene']['canvas']['clientWidth'],this['canvas']['height']=this[_0x3515ff(-0x322,-0x2ac)]['scene']['canvas']['clientHeight']);}['bindEvent'](){function _0x3e5a95(_0x30ad1c,_0x4553ff){return _0x533bd1(_0x4553ff,_0x30ad1c- -0x5de);}function _0x5f0a54(_0xedf912,_0x2d422f){return _0x533bd1(_0xedf912,_0x2d422f- -0x587);}const _0x1e7e01=this;let _0x462e0d=Date[_0x3e5a95(-0xad,-0x6b)]();(function _0x353b33(){function _0x2daa2b(_0x5e15a7,_0x4f1654){return _0x3e5a95(_0x4f1654-0x3e7,_0x5e15a7);}if(_0x1e7e01['isDestroy'])return;function _0x3c19ba(_0x202def,_0x5bb9cd){return _0x3e5a95(_0x5bb9cd-0x65,_0x202def);}_0x1e7e01[_0x2daa2b(0x335,0x342)]=window['requestAnimationFrame'](_0x353b33);if(_0x1e7e01[_0x2daa2b(0x3cd,0x35a)]&&_0x1e7e01['windField']){const _0x1f397d=Date[_0x3c19ba(-0x33,-0x48)](),_0x14cc07=_0x1f397d-_0x462e0d;_0x14cc07>_0x1e7e01['frameTime']&&(_0x462e0d=_0x1f397d-_0x14cc07%_0x1e7e01[_0x3c19ba(-0x63,-0xe8)],_0x1e7e01['update']());}}(),window[_0x3e5a95(-0x82,-0xe3)]('resize',this['resize'][_0x5f0a54(-0x68,-0x22)](this),![]),this['mouse_down']=![],this[_0x5f0a54(-0x55,-0xba)]=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x5f0a54(-0x19c,-0x125)]['wheel'],this['_onMapWhellEvent'],this),this[_0x3e5a95(-0x144,-0x1c1)]['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this)));}['unbindEvent'](){window['cancelAnimationFrame'](this['_animateFrame']),delete this['_animateFrame'];function _0x569d14(_0x498f3b,_0x57c430){return _0x533bd1(_0x57c430,_0x498f3b- -0x656);}function _0x429d56(_0x47acf2,_0x104af9){return _0x533bd1(_0x47acf2,_0x104af9- -0x9f);}window['removeEventListener']('resize',this[_0x569d14(-0x151,-0x1c0)]),this[_0x569d14(-0x1ac,-0x223)]['mouseHidden']&&(this['_map'][_0x429d56(0x442,0x3d8)](mars3d__namespace[_0x429d56(0x38b,0x3c3)]['wheel'],this[_0x429d56(0x433,0x481)],this),this[_0x429d56(0x37c,0x3fb)][_0x569d14(-0x1df,-0x209)](mars3d__namespace['EventType']['mouseDown'],this[_0x569d14(-0x122,-0x198)],this),this['_map'][_0x429d56(0x44a,0x3d8)](mars3d__namespace['EventType'][_0x429d56(0x4a6,0x454)],this[_0x429d56(0x422,0x423)],this),this[_0x569d14(-0x1bc,-0x163)]['off'](mars3d__namespace['EventType'][_0x429d56(0x4d2,0x4bc)],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x27a15c){function _0x104d98(_0x34ddd4,_0xe02fd){return _0x4d5064(_0x34ddd4- -0x10,_0xe02fd);}clearTimeout(this[_0x22d693(0x2e2,0x364)]);if(!this[_0x104d98(-0x108,-0xe5)]||!this[_0x22d693(0x304,0x325)])return;function _0x22d693(_0x4cf2ee,_0x4bf916){return _0x533bd1(_0x4bf916,_0x4cf2ee- -0x179);}this['canvas']['style']['visibility']=_0x104d98(-0x101,-0x146),this['refreshTimer']=setTimeout(()=>{function _0x2326eb(_0x237362,_0x2f99e8){return _0x22d693(_0x237362- -0x49d,_0x2f99e8);}if(!this['show'])return;this[_0x2326eb(-0x186,-0x122)]();function _0x351f59(_0x4cbc8c,_0x26b694){return _0x22d693(_0x4cbc8c- -0xd9,_0x26b694);}this[_0x2326eb(-0x199,-0x1fb)]['style']['visibility']=_0x2326eb(-0x12a,-0xec);},0xc8);}[_0x4d5064(-0x115,-0x11e)](_0x4c6a99){this['mouse_down']=!![];function _0xb98f2e(_0xd19a4d,_0x4484fe){return _0x533bd1(_0x4484fe,_0xd19a4d- -0x21f);}this[_0x5a5aef(0x3c,0x5b)]['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0x5a5aef(_0x2081a6,_0x1d2219){return _0x533bd1(_0x2081a6,_0x1d2219- -0x43f);}this[_0x5a5aef(-0x28,0x5b)]['on'](mars3d__namespace['EventType']['mouseMove'],this[_0xb98f2e(0x262,0x2be)],this);}['_onMouseMoveEvent'](_0x457336){if(!this[_0x190fdd(0x252,0x22f)]||!this['canvas'])return;function _0x190fdd(_0x186ce4,_0x3a3d19){return _0x4d5064(_0x186ce4-0x34a,_0x3a3d19);}function _0x3b0ab9(_0x1bd35f,_0x4eb750){return _0x4d5064(_0x1bd35f-0xab,_0x4eb750);}this[_0x3b0ab9(-0xf7,-0x132)]&&(this['canvas']['style']['visibility']='hidden',this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x2fff50){if(!this['show']||!this[_0x1f1d30(0x2eb,0x269)])return;function _0x21514d(_0x2041b5,_0x263967){return _0x533bd1(_0x263967,_0x2041b5- -0x6e3);}this[_0x1f1d30(0x308,0x332)]['off'](mars3d__namespace['EventType'][_0x21514d(-0x188,-0x1a0)],this['_onMouseMoveEvent'],this);this[_0x1f1d30(0x315,0x2d0)]&&this['mouse_move']&&this['redraw']();this[_0x21514d(-0x266,-0x2d8)][_0x21514d(-0x242,-0x21a)]['visibility']=_0x1f1d30(0x35a,0x381),this['mouse_down']=![];function _0x1f1d30(_0x23fd44,_0x235f3d){return _0x533bd1(_0x235f3d,_0x23fd44- -0x192);}this['mouse_move']=![];}[_0x4d5064(-0x195,-0x146)](_0x121418){function _0x2ca1cb(_0x3ffc52,_0x29465a){return _0x533bd1(_0x29465a,_0x3ffc52- -0x6d6);}this['clear']();function _0x171735(_0x3cb4d6,_0x5e8847){return _0x533bd1(_0x3cb4d6,_0x5e8847- -0x273);}this[_0x171735(0x1e3,0x223)]=_0x121418,this[_0x171735(0x1ff,0x27d)]['setDate'](_0x121418),this[_0x2ca1cb(-0x246,-0x255)]();}['redraw'](){if(!this[_0x498746(0x40d,0x494)])return;this['windField']['setOptions'](this['options']);function _0x5efe2a(_0x5c2d85,_0x4ede23){return _0x533bd1(_0x5c2d85,_0x4ede23- -0x163);}function _0x498746(_0x5d9aa7,_0x267d83){return _0x4d5064(_0x267d83-0x58c,_0x5d9aa7);}this[_0x498746(0x3ed,0x447)]();}['update'](){function _0xfdc88b(_0x8bbf29,_0x549b40){return _0x4d5064(_0x8bbf29-0x38d,_0x549b40);}if(this['_updateIng'])return;function _0x3cfe9a(_0x20f741,_0x3d82c3){return _0x533bd1(_0x20f741,_0x3d82c3-0x10);}this[_0xfdc88b(0x29b,0x229)]=!![];if(this[_0xfdc88b(0x265,0x1dc)])this[_0xfdc88b(0x234,0x1db)]['update']();else{const _0x109622=this['windField'][_0xfdc88b(0x215,0x254)]();this[_0xfdc88b(0x1aa,0x14f)](_0x109622);}this['_updateIng']=![];}['_drawLines'](_0x339815){this[_0x3263d8(0x3f2,0x43b)]=_0x339815,this['canvasContext']['globalCompositeOperation']=_0x3263d8(0x44f,0x456);function _0x1a42a9(_0x3685e4,_0x2d5249){return _0x4d5064(_0x3685e4-0x153,_0x2d5249);}this[_0x1a42a9(-0x1f,0x65)][_0x1a42a9(-0x22,0x1b)](0x0,0x0,this['canvasWidth'],this[_0x3263d8(0x46d,0x4ac)]),this[_0x1a42a9(-0x1f,0x2)][_0x3263d8(0x4cd,0x4ad)]='lighter',this[_0x1a42a9(-0x1f,-0x84)][_0x3263d8(0x44e,0x3c6)]=0.9;const _0x534e04=this['_map']['scene']['mode']!==Cesium[_0x1a42a9(0x68,0x79)]['SCENE3D'],_0x5ec205=this[_0x1a42a9(-0x5a,-0xd)]*0.25;function _0x3263d8(_0x4d015b,_0x51a3ae){return _0x4d5064(_0x4d015b-0x5d3,_0x51a3ae);}if(this[_0x1a42a9(0x20,-0x23)])for(let _0x91f468=0x0,_0x2442c8=_0x339815['length'];_0x91f468<_0x2442c8;_0x91f468++){const _0x288365=_0x339815[_0x91f468],_0x4f039f=this['_tomap'](_0x288365,_0x288365[_0x3263d8(0x3f6,0x419)],_0x288365[_0x3263d8(0x472,0x4cb)],_0x288365[_0x1a42a9(0x40,0x8a)]),_0x2767fa=this['_tomap'](_0x288365,_0x288365[_0x3263d8(0x3ff,0x3d3)],_0x288365['tlat'],_0x288365[_0x1a42a9(-0x5d,-0x8f)]);if(!_0x4f039f||!_0x2767fa)continue;if(_0x534e04&&Math[_0x1a42a9(0x2f,-0x26)](_0x4f039f[0x0]-_0x2767fa[0x0])>=_0x5ec205)continue;this[_0x1a42a9(-0x1f,-0x2)][_0x1a42a9(0x23,-0x3c)](),this['canvasContext']['lineWidth']=this[_0x3263d8(0x433,0x3b8)],this['canvasContext']['strokeStyle']=this[_0x3263d8(0x4a0,0x520)][_0x3263d8(0x46f,0x4e9)](_0x288365['speed']),this[_0x3263d8(0x461,0x440)]['moveTo'](_0x4f039f[0x0],_0x4f039f[0x1]),this[_0x1a42a9(-0x1f,0x34)][_0x3263d8(0x421,0x3bd)](_0x2767fa[0x0],_0x2767fa[0x1]),this['canvasContext'][_0x3263d8(0x3fb,0x3ae)]();}else{this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this['color'];for(let _0x5ebfd0=0x0,_0x2acb50=_0x339815['length'];_0x5ebfd0<_0x2acb50;_0x5ebfd0++){const _0x1ac9f7=_0x339815[_0x5ebfd0],_0x373e28=this['_tomap'](_0x1ac9f7,_0x1ac9f7['lng'],_0x1ac9f7['lat'],_0x1ac9f7[_0x1a42a9(0x40,0x99)]),_0x443649=this[_0x1a42a9(0x53,0x9)](_0x1ac9f7,_0x1ac9f7[_0x3263d8(0x3ff,0x45b)],_0x1ac9f7[_0x1a42a9(-0x1d,-0xf)],_0x1ac9f7['talt']);if(!_0x373e28||!_0x443649)continue;if(_0x534e04&&Math['abs'](_0x373e28[0x0]-_0x443649[0x0])>=_0x5ec205)continue;this['canvasContext']['moveTo'](_0x373e28[0x0],_0x373e28[0x1]),this[_0x1a42a9(-0x1f,-0xe)]['lineTo'](_0x443649[0x0],_0x443649[0x1]);}this['canvasContext']['stroke']();}}[_0x4d5064(-0x100,-0x94)](_0x1c6e0d,_0x447149,_0x53e624,_0x36ed3e){const _0x1bbc0b=Cesium['Cartesian3']['fromDegrees'](_0x447149,_0x53e624,_0x36ed3e??this['fixedHeight']);function _0x5c2dc6(_0x389b1a,_0x5d795a){return _0x4d5064(_0x389b1a-0x5f1,_0x5d795a);}function _0x535a05(_0x3412da,_0x3482a6){return _0x533bd1(_0x3412da,_0x3482a6-0x7);}const _0x278663=this[_0x5c2dc6(0x442,0x4c6)][_0x5c2dc6(0x4cb,0x539)];if(_0x278663['mode']===Cesium[_0x535a05(0x4ec,0x565)]['SCENE3D']){const _0x3fc7b7=new Cesium['EllipsoidalOccluder'](_0x278663['globe'][_0x535a05(0x54a,0x4e8)],_0x278663['camera']['positionWC']),_0x469acf=_0x3fc7b7[_0x535a05(0x58a,0x55d)](_0x1bbc0b);if(!_0x469acf)return _0x1c6e0d[_0x535a05(0x532,0x541)]=0x0,null;}const _0x21d0a7=mars3d__namespace['PointTrans']['toWindowCoordinates'](this[_0x535a05(0x453,0x4a1)]['scene'],_0x1bbc0b);return _0x21d0a7?[_0x21d0a7['x'],_0x21d0a7['y']]:null;}['clear'](){this['windField']['clear'](),delete this['windData'];}[_0x4d5064(-0x138,-0x192)](){this['worker']=new Worker(this[_0x597457(-0x6,-0xb)][_0x597457(0x71,0x63)]),this[_0x597457(0x71,0x50)]['onmessage']=_0x42866b=>{function _0x194bc5(_0x1c57d2,_0x3aa591){return _0x597457(_0x3aa591-0x480,_0x1c57d2);}this['_drawLines'](_0x42866b[_0x194bc5(0x498,0x465)][_0x194bc5(0x459,0x45a)]);function _0x4e6cbc(_0x231707,_0x12cd1e){return _0x2244f1(_0x231707,_0x12cd1e-0x230);}this['_updateIng2']=![];},this[_0x597457(0x40,0x4f)]={'init':_0x513175=>{const _0x25f8d5={};_0x25f8d5[_0x3ca13d(0x19a,0x1a1)]='init';function _0xdd402(_0x505b96,_0x111a55){return _0x597457(_0x111a55-0x202,_0x505b96);}_0x25f8d5[_0xdd402(0x21f,0x1fc)]=_0x513175;function _0x3ca13d(_0x814109,_0x2ca876){return _0x597457(_0x2ca876-0x1ab,_0x814109);}this[_0x3ca13d(0x255,0x21c)][_0x3ca13d(0x1d3,0x19e)](_0x25f8d5);},'setOptions':_0x1167d6=>{const _0x1b6fe3={};_0x1b6fe3['type']='setOptions',_0x1b6fe3['options']=_0x1167d6,this['worker']['postMessage'](_0x1b6fe3);},'setDate':_0x5c731d=>{const _0x340b65={};_0x340b65['type']='setDate',_0x340b65['data']=_0x5c731d,this['worker']['postMessage'](_0x340b65);},'update':()=>{function _0x3c1da8(_0x26a5a1,_0x1ef766){return _0x2244f1(_0x1ef766,_0x26a5a1-0x2e);}if(this['_updateIng2'])return;this[_0x3c1da8(-0x113,-0x15f)]=!![];const _0x555cf7={};_0x555cf7[_0x4a316e(-0x1d4,-0x1b2)]='update';function _0x4a316e(_0x5b306a,_0x1bebe7){return _0x597457(_0x1bebe7- -0x1a8,_0x5b306a);}this['worker']['postMessage'](_0x555cf7);},'clear':()=>{const _0x59ed2a={};function _0x310a4c(_0x3dd93b,_0x39cca6){return _0x597457(_0x39cca6-0xe3,_0x3dd93b);}function _0x1a55f2(_0x102fa7,_0x148b5a){return _0x2244f1(_0x148b5a,_0x102fa7-0x551);}_0x59ed2a['type']='clear',this[_0x1a55f2(0x406,0x3b5)][_0x1a55f2(0x388,0x40e)](_0x59ed2a);}};function _0x597457(_0x10c175,_0x136815){return _0x4d5064(_0x10c175-0x199,_0x136815);}function _0x2244f1(_0x2a1c81,_0x316f48){return _0x533bd1(_0x2a1c81,_0x316f48- -0x66c);}this[_0x2244f1(-0xfe,-0x17c)]['init'](this[_0x2244f1(-0x1f9,-0x1c2)]);}}mars3d__namespace['LayerUtil'][_0x533bd1(0x52c,0x507)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace[_0x4d5064(-0x1a1,-0x1b4)]['logInfo']('mars3d-wind插件\x20注册成功'),mars3d__namespace[_0x4d5064(-0x16a,-0x132)]=WindUtil,exports[_0x533bd1(0x48a,0x45c)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x4d5064(-0x153,-0x1ad)]=WindLayer,exports['WindUtil']=WindUtil;const _0x62d02d={};_0x62d02d['value']=!![],Object[_0x4d5064(-0x19e,-0x1bb)](exports,'__esModule',_0x62d02d);
}));
