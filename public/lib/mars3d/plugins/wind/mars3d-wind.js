/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.2
 * 编译日期：2025-08-09 18:07
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x4e537f,_0x564fc7){function _0x2df05e(_0x9e9bb4,_0x5126a5){return _0x4c1a(_0x5126a5- -0x1fe,_0x9e9bb4);}function _0x3d3445(_0x4dd83e,_0x527f69){return _0x4c1a(_0x527f69-0x9c,_0x4dd83e);}const _0xbde09=_0x4e537f();while(!![]){try{const _0x4bc4f3=parseInt(_0x3d3445(0x23a,0x261))/0x1*(parseInt(_0x2df05e(0xec,0x78))/0x2)+-parseInt(_0x3d3445(0x2a2,0x2b9))/0x3*(-parseInt(_0x2df05e(-0xb,0x49))/0x4)+parseInt(_0x3d3445(0x31f,0x2ed))/0x5+parseInt(_0x2df05e(-0x20,-0x55))/0x6+parseInt(_0x2df05e(-0xb1,-0x65))/0x7*(-parseInt(_0x2df05e(0x1f,0x3c))/0x8)+-parseInt(_0x3d3445(0x285,0x2da))/0x9+-parseInt(_0x2df05e(0x19,0x62))/0xa;if(_0x4bc4f3===_0x564fc7)break;else _0xbde09['push'](_0xbde09['shift']());}catch(_0x16bf8b){_0xbde09['push'](_0xbde09['shift']());}}}(_0x5a5d,0x26bc4));function _interopNamespace(_0x54c45b){if(_0x54c45b&&_0x54c45b['__esModule'])return _0x54c45b;function _0xd7564b(_0x2044e8,_0x5c83c6){return _0x4c1a(_0x2044e8- -0x320,_0x5c83c6);}var _0x31563f=Object[_0x3f1910(0x7c,0xea)](null);_0x54c45b&&Object['keys'](_0x54c45b)[_0xd7564b(-0x12d,-0x16b)](function(_0x1130a3){if(_0x1130a3!=='default'){var _0x2bd046=Object['getOwnPropertyDescriptor'](_0x54c45b,_0x1130a3);Object['defineProperty'](_0x31563f,_0x1130a3,_0x2bd046['get']?_0x2bd046:{'enumerable':!![],'get':function(){return _0x54c45b[_0x1130a3];}});}});function _0x3f1910(_0xc05fe4,_0x412561){return _0x4c1a(_0x412561- -0xfc,_0xc05fe4);}return _0x31563f['default']=_0x54c45b,_0x31563f;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0xce198e(-0x15a,-0x193)];function getU(_0x4c7574,_0x21e459){function _0x56b7c8(_0x1fe623,_0x3b7e26){return _0xce198e(_0x1fe623-0x357,_0x3b7e26);}function _0x492c62(_0x1d60c9,_0x268724){return _0xce198e(_0x268724-0x32e,_0x1d60c9);}const _0x498d97=_0x4c7574*Math[_0x56b7c8(0x299,0x210)](Cesium$2['Math'][_0x492c62(0x2a5,0x21c)](_0x21e459));return _0x498d97;}function getV(_0x128589,_0x5b8c04){const _0xe0a121=_0x128589*Math['sin'](Cesium$2['Math']['toRadians'](_0x5b8c04));return _0xe0a121;}function getSpeed(_0x4a3682,_0xc46c7){function _0x241b52(_0xf8647e,_0x2bf668){return _0xce198e(_0x2bf668- -0x9d,_0xf8647e);}const _0x575e4c=Math['sqrt'](Math['pow'](_0x4a3682,0x2)+Math[_0x241b52(-0x18f,-0x146)](_0xc46c7,0x2));return _0x575e4c;}function getDirection(_0x1e806a,_0x48f870){let _0x4c7b89=Cesium$2['Math']['toDegrees'](Math['atan2'](_0x48f870,_0x1e806a));return _0x4c7b89+=_0x4c7b89<0x0?0x168:0x0,_0x4c7b89;}const _0x3784e7={};_0x3784e7[_0xce198e(-0x182,-0x157)]=null,_0x3784e7['getU']=getU,_0x3784e7[_0x44537b(0x1af,0x124)]=getV,_0x3784e7['getSpeed']=getSpeed,_0x3784e7['getDirection']=getDirection;function _0x5a5d(){const _0x345775=['Math','pickEllipsoid','setData','processWindData','destroy','createParticlesTextures','CLAMP_TO_EDGE','getUVByPoint','particlesTextures','auto','min','lastFramesPerSecond','_map','sources','NEAREST','mode','cancelAnimationFrame','bind','pixelSize','onParticlesTextureSizeChange','reCreateWindTextures','fromDegrees','mars3d-wind插件\x20注册成功','updateViewerParameters','createColorTableTexture','toGridXY','canvasWidth','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','depthTexture','abs','context','sqrt','pointerEvents','clientHeight','visibility','9957ZnbnuT','colorTable','frameState.commandList\x20is\x20undefined','getUVByXY','particlesNumber','drawingBufferWidth','floor','depthTest','style','_speedRate','push','visible','preExecute','isDestroyed','_canrefresh','clear','redraw','interpolated','_calc_speedRate','pointer-events','toRadians','percentageChanged','red','owner','createRawRenderState','frameTime','_removedHook','rows','mouseHidden','8rOkauA','globalCompositeOperation','south','vertexArray','821061GYqeMp','rendering','worker','speedFactor','FLOAT','initFrameRate','array','persists','speed','196EtTyqv','createWindTextures','lineTo','isDynamic','commandList','dynamic','ellipsoid','maxAge','depthMask','computing','1052855KQfUWy','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','fragmentShaderSource','createSegmentsGeometry','postProcessingPosition','framebuffers','segmentsDepth','normal','canvasHeight','init','vdata','commandToExecute','removeEventListener','updatePosition','lineWidth','4553480IJBrrJ','resize','setOptions','_randomParticle','ymin','WindUtil','flatMap','destroyParticlesTextures','unbindEvent','ONE_MINUS_SRC_ALPHA','north','segmentsColor','wheel','outputTexture','PointTrans','addEventListener','framebuffer','ymax','fixedHeight','_updateIng2','object','ColorRamp','2hHLNNM','_colorRamp','height','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','refreshTimer','tlng','colors','CanvasWindLayer','width','getV','LayerUtil','SRC_ALPHA','calculateSpeed','particlesTextureSize','mouse_move','cos','cols','getDataAtLonLat','DEPTH_COMPONENT','options','WindLayer','colorTextures','pixelDatatype','TRIANGLES','udata','clearCommand','_tomap','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','RGBA','bounds','absolute','displayRange','createRenderingFramebuffers','_pointerEvents','all','globe','pow','xmax','windField','Cartesian2','beginPath','register','OPAQUE','_maxAge','stroke','dropRateBump','LINEAR','getParticles','minificationFilter','_calcUV','segments','blendEquation','_animateFrame','flipY','camera','requestRender','716471squCzr','getCalculateSpeedShader','mouse_down','grid','uniformMap','lng','xmin','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a','scene','data','canvasContext','age','sceneMode','Rectangle','frameRateMonitor','blendFuncDestination','1903152GIudOe','textures','updateOptions','vertexShaderSource','_mountedHook','autoClear','color','latRange','useViewerBounds','_onMouseMoveEvent','mouseDown','wrapS','tlat','MIN_VALUE','wrapT','isInExtent','viewerParameters','EventType','_onMouseDownEvent','original','lonRange','show','getSegmentDrawVertexShader','bufferUsage','__proto__','speedRate','RED','mouseUp','117196pWdOgh','particles','random','frameRate','max','latitude','_onMapWhellEvent','attributeLocations','min\x20is\x20undefined,\x20calculate\x20min','geometry','canvas','UNSIGNED_BYTE','componentDatatype','off','windData','enabled','windTextures','createComputingPrimitives','hidden','layer','getDefaultRenderState','_onMouseUpEvent','east','_showHook','lat','stringify','postMessage','commandType','componentsPerAttribute','lineLength','west','rawRenderState','frameRateAdjustment','create','changed','clientWidth','Cesium','SCENE3D','_drawLines','values','none','fromGeometry','magnificationFilter','strokeStyle','primitives','STATIC_DRAW','forEach','length','particleSystem','mouseMove','initWorker','_createCanvas','primitiveType'];_0x5a5d=function(){return _0x345775;};return _0x5a5d();}var WindUtil=_0x3784e7,updatePositionShader=_0xce198e(-0x1a3,-0x142),calculateSpeedShader=_0x44537b(0x99,0xba),postProcessingPositionFragmentShader=_0x44537b(0xbb,0xf7),renderParticlesFragmentShader=_0x44537b(0x16e,0x11e),renderParticlesVertexShader=_0x44537b(0xaf,0x136);const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static['getCalculateSpeedShader'](){const _0x26b8bd={};return _0x26b8bd['sources']=[calculateSpeedShader],new ShaderSource$1(_0x26b8bd);}static['getUpdatePositionShader'](){const _0x3b2fff={};return _0x3b2fff['sources']=[updatePositionShader],new ShaderSource$1(_0x3b2fff);}static['getSegmentDrawVertexShader'](){const _0x5a1ce4={};return _0x5a1ce4['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x5a1ce4);}static['getSegmentDrawFragmentShader'](){const _0x81c3a6={};_0x81c3a6[_0x12cfac(-0x157,-0x1dd)]=[renderParticlesFragmentShader];function _0x12cfac(_0x4d8741,_0x5de9c3){return _0x44537b(_0x5de9c3,_0x4d8741- -0x203);}return new ShaderSource$1(_0x81c3a6);}static['getPostProcessingPositionShader'](){const _0x1c5bcb={};_0x1c5bcb[_0x381f53(0x31d,0x294)]=[postProcessingPositionFragmentShader];function _0x381f53(_0x271baa,_0x5a0406){return _0x44537b(_0x271baa,_0x5a0406-0x1e8);}return new ShaderSource$1(_0x1c5bcb);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0x44537b(0xf0,0x8e)];class CustomPrimitive{constructor(_0x4e0340){this[_0x2bbed6(-0x1da,-0x157)]=_0x4e0340[_0x2bbed6(-0x1a2,-0x157)],this['geometry']=_0x4e0340[_0x9f7bfd(0xc3,0xdd)],this['attributeLocations']=_0x4e0340['attributeLocations'],this['primitiveType']=_0x4e0340[_0x2bbed6(-0xfa,-0x13e)],this[_0x2bbed6(-0x210,-0x19a)]=_0x4e0340[_0x9f7bfd(0x92,0xa9)]||{},this['vertexShaderSource']=_0x4e0340['vertexShaderSource'],this['fragmentShaderSource']=_0x4e0340['fragmentShaderSource'],this['rawRenderState']=_0x4e0340[_0x9f7bfd(0xd9,0x9d)],this['framebuffer']=_0x4e0340['framebuffer'],this['outputTexture']=_0x4e0340['outputTexture'],this['autoClear']=_0x4e0340[_0x9f7bfd(0xa3,0x9f)]??![],this['preExecute']=_0x4e0340['preExecute'],this['show']=!![],this[_0x2bbed6(-0x128,-0xdb)]=undefined,this['clearCommand']=undefined;function _0x2bbed6(_0x2eaa57,_0x34cf97){return _0xce198e(_0x34cf97-0xc,_0x2eaa57);}function _0x9f7bfd(_0x2d5985,_0x18dc30){return _0x44537b(_0x18dc30,_0x2d5985-0x50);}this['isDynamic']=_0x4e0340['isDynamic']??(()=>!![]),this[_0x2bbed6(-0x1f1,-0x189)]&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x9f7bfd(0x165,0x10d)],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x48d494){function _0x21a2ed(_0x130ca1,_0x484213){return _0x44537b(_0x484213,_0x130ca1-0x3a7);}function _0x531d9c(_0x16b7f3,_0x3edf57){return _0xce198e(_0x16b7f3-0x520,_0x3edf57);}if(this['commandType']==='Draw'){const _0x57be5c={};_0x57be5c['context']=_0x48d494,_0x57be5c[_0x21a2ed(0x41a,0x49f)]=this['geometry'],_0x57be5c['attributeLocations']=this[_0x21a2ed(0x418,0x429)],_0x57be5c['bufferUsage']=BufferUsage$1[_0x531d9c(0x3cf,0x416)];const _0x4fb9fd=VertexArray$1[_0x531d9c(0x3cb,0x3b8)](_0x57be5c),_0x155c0a={};_0x155c0a['context']=_0x48d494,_0x155c0a[_0x531d9c(0x389,0x35b)]=this['vertexShaderSource'],_0x155c0a['fragmentShaderSource']=this['fragmentShaderSource'],_0x155c0a['attributeLocations']=this['attributeLocations'];const _0x216d55=ShaderProgram['fromCache'](_0x155c0a),_0x4a0088=RenderState['fromCache'](this[_0x531d9c(0x3c1,0x404)]),_0x232911={};return _0x232911['owner']=this,_0x232911[_0x21a2ed(0x489,0x4d0)]=_0x4fb9fd,_0x232911['primitiveType']=this[_0x531d9c(0x3d6,0x39d)],_0x232911['modelMatrix']=Matrix4['IDENTITY'],_0x232911['renderState']=_0x4a0088,_0x232911['shaderProgram']=_0x216d55,_0x232911[_0x531d9c(0x44d,0x4ca)]=this['framebuffer'],_0x232911[_0x21a2ed(0x3e9,0x3a9)]=this[_0x531d9c(0x37a,0x3c2)],_0x232911['pass']=Pass$1['OPAQUE'],new DrawCommand(_0x232911);}else{if(this[_0x21a2ed(0x42c,0x4b3)]==='Compute'){const _0x495234={};return _0x495234[_0x21a2ed(0x480,0x3f9)]=this,_0x495234['fragmentShaderSource']=this[_0x531d9c(0x430,0x4a8)],_0x495234[_0x21a2ed(0x3e9,0x446)]=this['uniformMap'],_0x495234[_0x21a2ed(0x4b9,0x4e6)]=this[_0x21a2ed(0x4b9,0x43d)],_0x495234[_0x531d9c(0x422,0x40b)]=!![],new ComputeCommand(_0x495234);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x4b6bb2,_0x409db8){function _0x2b1b29(_0x3930fa,_0xa0d15){return _0x44537b(_0x3930fa,_0xa0d15-0x88);}function _0x18c36b(_0x8926ef,_0x31222a){return _0xce198e(_0x8926ef-0x5bb,_0x31222a);}this[_0x2b1b29(0x16d,0xfb)]=_0x409db8,defined(this['commandToExecute'])&&(this[_0x18c36b(0x4d4,0x45a)]['vertexArray']=VertexArray$1['fromGeometry']({'context':_0x4b6bb2,'geometry':this[_0x18c36b(0x446,0x426)],'attributeLocations':this[_0x18c36b(0x444,0x439)],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x46ea90){if(!this[_0xb68e1a(0xdc,0x97)]())return;if(!this['show']||!defined(_0x46ea90))return;function _0xa5c4e5(_0xc74a2b,_0x461c68){return _0x44537b(_0x461c68,_0xc74a2b-0x38a);}!defined(this[_0xb68e1a(0xee,0x83)])&&(this['commandToExecute']=this['createCommand'](_0x46ea90['context']));defined(this[_0xb68e1a(0xbb,0x53)])&&this['preExecute']();function _0xb68e1a(_0x463650,_0x5eae3b){return _0x44537b(_0x5eae3b,_0x463650- -0x13);}if(!_0x46ea90[_0xb68e1a(0xdd,0x116)]){console['warn'](_0xa5c4e5(0x44e,0x42d));return;}defined(this['clearCommand'])&&_0x46ea90[_0xb68e1a(0xdd,0x6c)]['push'](this[_0xb68e1a(0x121,0x109)]),defined(this['commandToExecute'])&&_0x46ea90[_0xa5c4e5(0x47a,0x442)]['push'](this['commandToExecute']);}[_0xce198e(-0x119,-0xae)](){return![];}['destroy'](){function _0x51d214(_0x1f5407,_0x419fd8){return _0xce198e(_0x419fd8-0x2c6,_0x1f5407);}if(defined(this[_0x18b26b(0x3ce,0x37b)])){var _0x2ab022;(_0x2ab022=this['commandToExecute']['shaderProgram'])===null||_0x2ab022===void 0x0||_0x2ab022[_0x18b26b(0x370,0x3b4)](),this['commandToExecute']['shaderProgram']=undefined;}function _0x18b26b(_0xc3030c,_0x64e9e9){return _0x44537b(_0x64e9e9,_0xc3030c-0x2cd);}return destroyObject(this);}}function deepMerge(_0x3fecfb,_0x59562e){if(!_0x3fecfb)return _0x59562e;if(!_0x59562e)return _0x3fecfb;const _0x3194db={..._0x59562e},_0x26539c=_0x3194db;function _0x5b8b74(_0x369855,_0x48c426){return _0xce198e(_0x369855-0x53c,_0x48c426);}for(const _0x3d3412 in _0x3fecfb){if(Object['prototype']['hasOwnProperty']['call'](_0x3fecfb,_0x3d3412)){const _0x5527dd=_0x3fecfb[_0x3d3412],_0x49dce4=_0x59562e[_0x3d3412];if(Array['isArray'](_0x5527dd)){_0x26539c[_0x3d3412]=_0x5527dd['slice']();continue;}if(_0x5527dd&&typeof _0x5527dd===_0x5b8b74(0x46d,0x4a6)){_0x26539c[_0x3d3412]=deepMerge(_0x5527dd,_0x49dce4||{});continue;}_0x5527dd!==undefined&&(_0x26539c[_0x3d3412]=_0x5527dd);}}return _0x26539c;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x44537b(0xf8,0x8e)];class WindParticlesComputing{constructor(_0x3124b0,_0x4ec199,_0x229fe1,_0xabf3ed,_0x12dff4){this['context']=_0x3124b0,this['options']=_0x229fe1,this[_0x18cbb3(-0x5,0x68)]=_0xabf3ed,this[_0x42e595(-0x178,-0x1b4)]=_0x4ec199,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0x2827c7={};function _0x18cbb3(_0x3100c1,_0x4588a2){return _0x44537b(_0x3100c1,_0x4588a2-0xa);}_0x2827c7['scene']=_0x12dff4,_0x2827c7['samplingWindow']=0x1,_0x2827c7['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x2827c7);function _0x42e595(_0x300ac9,_0x38e367){return _0xce198e(_0x300ac9- -0x8,_0x38e367);}this[_0x18cbb3(0xeb,0xf2)](),this['createWindTextures'](),this[_0x18cbb3(0x6d,0xae)](),this[_0x42e595(-0x175,-0x1ec)]();}[_0xce198e(-0x100,-0x164)](){const _0x33ff0e=()=>{function _0x536427(_0x1fe765,_0x150955){return _0x4c1a(_0x150955- -0xcc,_0x1fe765);}function _0x494b94(_0x11cb67,_0x37412b){return _0x4c1a(_0x11cb67-0x2a7,_0x37412b);}this['frameRateMonitor'][_0x494b94(0x4ac,0x42f)]>0x14&&(this['frameRate']=this[_0x494b94(0x44e,0x45c)][_0x494b94(0x4ac,0x4a1)],this['frameRateAdjustment']=0x3c/Math[_0x536427(0x148,0xfd)](this[_0x536427(0x149,0xfc)],0x1));};_0x33ff0e();function _0x27f00b(_0x3d4f01,_0x2c24bf){return _0xce198e(_0x3d4f01-0x13c,_0x2c24bf);}const _0x41a84a=setInterval(_0x33ff0e,0x3e8),_0x42d330=this[_0x3a60de(0x200,0x1a7)]['bind'](this);function _0x3a60de(_0x97b02b,_0x1d4745){return _0xce198e(_0x97b02b-0x345,_0x1d4745);}this[_0x3a60de(0x200,0x25a)]=()=>{clearInterval(_0x41a84a),_0x42d330();};}[_0xce198e(-0xfb,-0x121)](){function _0x62413e(_0x5b2e2e,_0x3d69a9){return _0x44537b(_0x3d69a9,_0x5b2e2e-0x3ab);}const _0x51da8a={};_0x51da8a['minificationFilter']=TextureMinificationFilter$1[_0x62413e(0x4f4,0x4e6)],_0x51da8a['magnificationFilter']=TextureMagnificationFilter$1['LINEAR'];const _0x2fa89a={'context':this[_0x62413e(0x468,0x488)],'width':this[_0x62413e(0x423,0x414)][_0x46e838(0x341,0x2fa)],'height':this['windData']['height'],'pixelFormat':PixelFormat$1[_0x46e838(0x1e6,0x23f)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0x46e838(0x2ba,0x305)][_0x62413e(0x3e6,0x37f)]??![],'sampler':new Sampler$1(_0x51da8a)};function _0x46e838(_0x41925e,_0x5c5891){return _0x44537b(_0x41925e,_0x5c5891-0x1d7);}this['windTextures']={'U':new Texture$1({..._0x2fa89a,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x2fa89a,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}[_0x44537b(0x56,0xa4)](){const _0x389073={};_0x389073['minificationFilter']=TextureMinificationFilter$1[_0x3c02c5(0x38b,0x3d9)],_0x389073[_0x5f03ba(0x7d,0x15)]=TextureMagnificationFilter$1[_0x3c02c5(0x38b,0x30e)];const _0x949088={'context':this['context'],'width':this['options'][_0x3c02c5(0x406,0x382)],'height':this['options'][_0x5f03ba(0xd8,0xa9)],'pixelFormat':PixelFormat$1[_0x5f03ba(0x130,0xb8)],'pixelDatatype':PixelDatatype$1[_0x5f03ba(0xa5,0x68)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x3c02c5(0x40c,0x389)][_0x5f03ba(0x79,0xa9)]*this['options'][_0x3c02c5(0x406,0x490)]*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x389073)};function _0x5f03ba(_0x338953,_0x1af7b0){return _0xce198e(_0x1af7b0-0x169,_0x338953);}function _0x3c02c5(_0x51d9d2,_0x14a4f7){return _0xce198e(_0x51d9d2-0x4c6,_0x14a4f7);}this[_0x3c02c5(0x385,0x375)]={'previousParticlesPosition':new Texture$1(_0x949088),'currentParticlesPosition':new Texture$1(_0x949088),'nextParticlesPosition':new Texture$1(_0x949088),'postProcessingPosition':new Texture$1(_0x949088),'particlesSpeed':new Texture$1(_0x949088)};}[_0x44537b(0x147,0x10c)](){function _0x5088db(_0xe723,_0x196f29){return _0xce198e(_0x196f29-0x599,_0xe723);}function _0x36b8ae(_0x261373,_0x5dfdff){return _0x44537b(_0x261373,_0x5dfdff-0x151);}Object[_0x5088db(0x484,0x442)](this['particlesTextures'])[_0x5088db(0x3f6,0x449)](_0x4b3ce7=>_0x4b3ce7['destroy']());}[_0xce198e(-0x16d,-0x137)](){function _0x603bf6(_0x2287f4,_0x5b529d){return _0x44537b(_0x2287f4,_0x5b529d- -0x37);}function _0x503cfe(_0x23f168,_0x1699f2){return _0x44537b(_0x23f168,_0x1699f2-0x2f9);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x603bf6(0x9d,0x72)],this['windData']['u'][_0x503cfe(0x373,0x367)]),'vRange':()=>new Cartesian2$1(this[_0x503cfe(0x328,0x371)]['v'][_0x503cfe(0x365,0x3a2)],this[_0x603bf6(-0x2e,0x41)]['v'][_0x503cfe(0x374,0x367)]),'speedRange':()=>new Cartesian2$1(this['windData'][_0x503cfe(0x3e3,0x3e4)]['min'],this['windData'][_0x503cfe(0x375,0x3e4)][_0x503cfe(0x33d,0x367)]),'currentParticlesPosition':()=>this[_0x603bf6(0x3c,0x70)]['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x13b63e(_0x2dbe03,_0x55a79c){return _0x603bf6(_0x55a79c,_0x2dbe03-0x29e);}function _0x45b7a4(_0x29f9d0,_0x4ad7a7){return _0x603bf6(_0x4ad7a7,_0x29f9d0-0x511);}return(this['viewerParameters'][_0x45b7a4(0x58b,0x52c)]+0x32)*this[_0x45b7a4(0x608,0x5c8)][_0x13b63e(0x34d,0x339)];},'frameRateAdjustment':()=>this[_0x603bf6(0xb7,0x53)],'dimension':()=>new Cartesian2$1(this[_0x503cfe(0x353,0x371)][_0x603bf6(0x6e,0xec)],this['windData']['height']),'minimum':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds'][_0x603bf6(0xa6,0xaa)]),'maximum':()=>new Cartesian2$1(this[_0x603bf6(0xb8,0x41)][_0x603bf6(0xe7,0x101)][_0x603bf6(0xba,0x49)],this['windData'][_0x603bf6(0x154,0x101)]['north'])},'fragmentShaderSource':ShaderManager[_0x603bf6(-0x50,0x8)](),'outputTexture':this[_0x503cfe(0x3f6,0x3a0)]['particlesSpeed'],'preExecute':()=>{const _0x1e9839=this['particlesTextures']['previousParticlesPosition'];function _0x301936(_0x54befd,_0x82ef03){return _0x603bf6(_0x54befd,_0x82ef03- -0x107);}this[_0x5a39ea(-0xd7,-0xeb)]['previousParticlesPosition']=this['particlesTextures']['currentParticlesPosition'],this[_0x301936(-0x1b,-0x97)]['currentParticlesPosition']=this['particlesTextures']['postProcessingPosition'];function _0x5a39ea(_0x35fbdf,_0x314af5){return _0x603bf6(_0x314af5,_0x35fbdf- -0x147);}this[_0x5a39ea(-0xd7,-0xe8)]['postProcessingPosition']=_0x1e9839,this['primitives']['calculateSpeed'][_0x5a39ea(-0x7d,-0x4c)]&&(this['primitives'][_0x5a39ea(-0x57,-0x22)][_0x301936(-0xb5,-0x3d)][_0x5a39ea(-0x6c,-0x54)]=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this[_0x603bf6(0x176,0xf7)][_0x503cfe(0x3c8,0x3ea)]}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0x603bf6(0x4d,0x70)]['currentParticlesPosition'],'particlesSpeed':()=>this[_0x603bf6(0x13,0x70)]['particlesSpeed']},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this[_0x503cfe(0x3f7,0x3a0)]['nextParticlesPosition'],'preExecute':()=>{function _0x152c03(_0x591b0b,_0xdd3850){return _0x503cfe(_0xdd3850,_0x591b0b-0x150);}function _0x513dba(_0x46d618,_0x293dc9){return _0x503cfe(_0x293dc9,_0x46d618- -0x399);}this[_0x152c03(0x4df,0x4dd)]['updatePosition'][_0x513dba(0x61,0xeb)]&&(this[_0x152c03(0x4df,0x46c)]['updatePosition'][_0x152c03(0x54a,0x4d0)][_0x513dba(0x72,0xa3)]=this['particlesTextures']['nextParticlesPosition']);},'isDynamic':()=>this['options'][_0x503cfe(0x3c8,0x3ea)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this[_0x503cfe(0x387,0x357)][_0x503cfe(0x31c,0x35b)],'latRange':()=>this['viewerParameters'][_0x503cfe(0x303,0x34e)],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds'][_0x503cfe(0x36c,0x381)],this['windData']['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds']['south'],this['windData']['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this[_0x503cfe(0x433,0x427)][_0x603bf6(0x130,0x111)],'useViewerBounds':()=>this[_0x603bf6(0xe5,0xf7)][_0x603bf6(-0x4b,0x1f)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this[_0x603bf6(0x7f,0x70)][_0x603bf6(0xa1,0xc3)],'preExecute':()=>{function _0x2d38dd(_0x115aba,_0x57876a){return _0x603bf6(_0x57876a,_0x115aba-0x575);}function _0x1e7f4b(_0x455e03,_0xfa8bb4){return _0x603bf6(_0xfa8bb4,_0x455e03-0x32b);}this['primitives']['postProcessingPosition']['commandToExecute']&&(this['primitives']['postProcessingPosition'][_0x2d38dd(0x63f,0x5f3)]['outputTexture']=this['particlesTextures'][_0x1e7f4b(0x3ee,0x3c4)]);},'isDynamic':()=>this[_0x603bf6(0xe2,0xf7)][_0x603bf6(0xfa,0xba)]})};}[_0x44537b(0x131,0xb3)](){function _0x4b0b3b(_0x5a2d15,_0x6e6ecb){return _0x44537b(_0x5a2d15,_0x6e6ecb- -0x1);}this['windTextures']['U']['destroy'](),this[_0x4b0b3b(0x52,0x79)]['V']['destroy'](),this['createWindTextures']();}['updateWindData'](_0x2ecf81){this['windData']=_0x2ecf81,this['reCreateWindTextures']();}[_0x44537b(0x9b,0x50)](_0x215d5a){const _0x487d86=_0x215d5a[_0x18956d(0x50b,0x50e)]!==undefined&&_0x215d5a['flipY']!==this[_0x53b51b(0x1b3,0x155)]['flipY'];function _0x53b51b(_0x262a7b,_0x10eabe){return _0xce198e(_0x262a7b-0x26d,_0x10eabe);}this[_0x53b51b(0x1b3,0x23a)]=deepMerge(_0x215d5a,this['options']);function _0x18956d(_0x343cfe,_0x58cbd8){return _0x44537b(_0x58cbd8,_0x343cfe-0x4d0);}_0x487d86&&this[_0x18956d(0x583,0x533)]();}[_0x44537b(0xe0,0xa2)](_0x53dc4c){const {array:_0x246873}=_0x53dc4c;let {min:_0x2f7286,max:_0x13b177}=_0x53dc4c;const _0x20f992=new Float32Array(_0x246873['length']);_0x2f7286===undefined&&(console['warn'](_0x301989(0x29d,0x27b)),_0x2f7286=Math[_0x1411c7(0x4a,0x2e)](..._0x246873));function _0x301989(_0x5e9a9f,_0x3b0adc){return _0xce198e(_0x3b0adc-0x3f1,_0x5e9a9f);}_0x13b177===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0x13b177=Math['max'](..._0x246873));const _0x42239e=Math[_0x1411c7(-0x27,-0xd)](Math['abs'](_0x2f7286),Math['abs'](_0x13b177));for(let _0x429848=0x0;_0x429848<_0x246873['length'];_0x429848++){const _0xdf789b=_0x246873[_0x429848]/_0x42239e;_0x20f992[_0x429848]=_0xdf789b;}function _0x1411c7(_0x4bcc39,_0x49ee19){return _0xce198e(_0x49ee19-0x16d,_0x4bcc39);}return _0x20f992;}[_0xce198e(-0x145,-0x1d0)](){Object[_0xdc3856(0x27b,0x2f5)](this[_0xdc3856(0x264,0x248)])['forEach'](_0x131838=>_0x131838['destroy']());function _0xdc3856(_0x2f22e1,_0x4b9b38){return _0xce198e(_0x2f22e1-0x3d2,_0x4b9b38);}Object['values'](this[_0x5106ad(-0x121,-0x163)])[_0x5106ad(-0x130,-0x168)](_0x45ca47=>_0x45ca47[_0x5106ad(-0x125,-0x195)]());function _0x5106ad(_0x44e927,_0x3bdc97){return _0x44537b(_0x3bdc97,_0x44e927- -0x1c8);}Object[_0xdc3856(0x27b,0x2dd)](this['primitives'])['forEach'](_0xdb7092=>_0xdb7092[_0x5106ad(-0x125,-0xd1)]()),this[_0xdc3856(0x236,0x1d5)][_0xdc3856(0x28d,0x232)]();}}function _0xce198e(_0x5c94c6,_0x36cecc){return _0x4c1a(_0x5c94c6- -0x343,_0x36cecc);}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x3ae85d,_0x1dd703,_0x385132,_0x521b6b){this[_0x43de0e(-0xdd,-0xb9)]=_0x3ae85d,this['options']=_0x1dd703,this[_0x43de0e(-0x149,-0x118)]=_0x385132,this['computing']=_0x521b6b;(typeof this['options'][_0x43de0e(-0x43,-0x4e)]!=='number'||this[_0x2d65e6(0xdd,0x8d)][_0x2d65e6(0xd7,0x15b)]<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options'][_0x43de0e(0x21,-0x4e)]=0x100);this['colorTable']=this[_0x43de0e(-0x8d,-0xbf)](),this[_0x2d65e6(-0x2,0x64)]=this['createRenderingTextures']();function _0x43de0e(_0x4a417d,_0x5d0408){return _0xce198e(_0x5d0408-0x72,_0x4a417d);}this[_0x43de0e(-0x82,-0x7b)]=this['createRenderingFramebuffers']();function _0x2d65e6(_0x2444c6,_0x4cb80c){return _0x44537b(_0x4cb80c,_0x2444c6- -0x51);}this[_0x2d65e6(0x45,0x6b)]=this['createPrimitives']();}['createRenderingTextures'](){const _0x941fe7={};_0x941fe7[_0x1c7dcd(0x2e,0x97)]=this['context'],_0x941fe7['width']=this['context']['drawingBufferWidth'],_0x941fe7['height']=this['context']['drawingBufferHeight'];function _0x276f13(_0x592fe2,_0x53738b){return _0x44537b(_0x53738b,_0x592fe2- -0x1ba);}_0x941fe7['pixelFormat']=PixelFormat['RGBA'],_0x941fe7[_0x276f13(-0x89,-0x93)]=PixelDatatype[_0x276f13(-0x145,-0xf1)];const _0xe2c04c=_0x941fe7,_0x57cefb={};_0x57cefb['context']=this['context'];function _0x1c7dcd(_0x56797d,_0x382341){return _0x44537b(_0x56797d,_0x382341- -0x26);}_0x57cefb['width']=this['context']['drawingBufferWidth'],_0x57cefb[_0x1c7dcd(0x136,0xf7)]=this['context']['drawingBufferHeight'],_0x57cefb['pixelFormat']=PixelFormat[_0x276f13(-0x8d,-0x8d)],_0x57cefb['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x1f11ad=_0x57cefb;return{'segmentsColor':new Texture(_0xe2c04c),'segmentsDepth':new Texture(_0x1f11ad)};}[_0x44537b(0x1a2,0x13b)](){const _0x3b4015={};function _0x179299(_0x40686f,_0x250e9a){return _0x44537b(_0x40686f,_0x250e9a- -0x177);}function _0x11e416(_0x1774f0,_0x585c24){return _0xce198e(_0x1774f0-0x601,_0x585c24);}return _0x3b4015['context']=this['context'],_0x3b4015[_0x179299(-0x63,-0x47)]=[this['textures'][_0x11e416(0x529,0x573)]],_0x3b4015[_0x179299(-0xfe,-0xbc)]=this[_0x179299(-0x120,-0x128)]['segmentsDepth'],{'segments':new Framebuffer(_0x3b4015)};}['destoryRenderingFramebuffers'](){function _0x55551d(_0x3e4e22,_0x262882){return _0x44537b(_0x3e4e22,_0x262882- -0x1d9);}function _0x2f86cc(_0x120c55,_0xc240ea){return _0xce198e(_0x120c55-0x3f1,_0xc240ea);}Object[_0x2f86cc(0x29a,0x241)](this[_0x55551d(-0xb2,-0xde)])['forEach'](_0x51d7de=>{function _0x491584(_0x2d0c43,_0x135b40){return _0x2f86cc(_0x2d0c43- -0x3c3,_0x135b40);}_0x51d7de[_0x491584(-0x117,-0xa8)]();});}['createColorTableTexture'](){function _0x5b0eb4(_0x173b19,_0x3ebf62){return _0xce198e(_0x3ebf62-0x341,_0x173b19);}const _0x5d1ef0=new Float32Array(this[_0x5e2d42(0x262,0x20e)]['colors'][_0x5e2d42(0x1c8,0x1eb)](_0x513e8f=>{function _0x4e2534(_0x4f1a6e,_0x1a3d90){return _0x5e2d42(_0x1a3d90,_0x4f1a6e-0x3a9);}const _0x293043=Color$1['fromCssColorString'](_0x513e8f);return[_0x293043[_0x4e2534(0x561,0x57e)],_0x293043['green'],_0x293043['blue'],_0x293043['alpha']];}));function _0x5e2d42(_0x11aa15,_0x5235f8){return _0xce198e(_0x5235f8-0x2c8,_0x11aa15);}const _0xcfbd5d={};return _0xcfbd5d[_0x5b0eb4(0x295,0x2a4)]=TextureMinificationFilter['LINEAR'],_0xcfbd5d[_0x5b0eb4(0x19f,0x1ed)]=TextureMagnificationFilter[_0x5b0eb4(0x2d9,0x2a2)],_0xcfbd5d[_0x5b0eb4(0x1c1,0x1b2)]=TextureWrap['CLAMP_TO_EDGE'],_0xcfbd5d[_0x5b0eb4(0x131,0x1b5)]=TextureWrap[_0x5b0eb4(0x264,0x1fe)],new Texture({'context':this[_0x5e2d42(0x214,0x19d)],'width':this[_0x5e2d42(0x25f,0x20e)][_0x5b0eb4(0x27a,0x27a)]['length'],'height':0x1,'pixelFormat':PixelFormat[_0x5b0eb4(0x2e0,0x290)],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0xcfbd5d),'source':{'width':this[_0x5e2d42(0x244,0x20e)][_0x5e2d42(0x23a,0x201)]['length'],'height':0x1,'arrayBufferView':_0x5d1ef0}});}[_0x44537b(0xe9,0xf9)](){const _0x1ae937=0x4,_0x21d9db=this['options']['particlesTextureSize'];let _0x58524d=[];for(let _0x19ae65=0x0;_0x19ae65<_0x21d9db;_0x19ae65++){for(let _0x39025b=0x0;_0x39025b<_0x21d9db;_0x39025b++){for(let _0x20cd3c=0x0;_0x20cd3c<_0x1ae937;_0x20cd3c++){_0x58524d['push'](_0x19ae65/_0x21d9db),_0x58524d[_0x5ab287(-0x3f,-0xb1)](_0x39025b/_0x21d9db);}}}_0x58524d=new Float32Array(_0x58524d);const _0x49b10e=this['options']['particlesTextureSize']**0x2;let _0x13f7ee=[];for(let _0x989a88=0x0;_0x989a88<_0x49b10e;_0x989a88++){_0x13f7ee['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x13f7ee=new Float32Array(_0x13f7ee);let _0xf3f06a=[];for(let _0x232995=0x0,_0x37e4dc=0x0;_0x232995<_0x49b10e;_0x232995++){_0xf3f06a[_0x5b7fb2(0x43,0x5a)](_0x37e4dc+0x0,_0x37e4dc+0x1,_0x37e4dc+0x2,_0x37e4dc+0x2,_0x37e4dc+0x1,_0x37e4dc+0x3),_0x37e4dc+=_0x1ae937;}_0xf3f06a=new Uint32Array(_0xf3f06a);const _0x1fc795={};_0x1fc795[_0x5b7fb2(0x47,0x4)]=ComponentDatatype['FLOAT'];function _0x5b7fb2(_0x49fe70,_0x9f2d44){return _0xce198e(_0x9f2d44-0x176,_0x49fe70);}_0x1fc795[_0x5ab287(-0x117,-0xf7)]=0x2,_0x1fc795[_0x5ab287(-0xf7,-0xec)]=_0x58524d;const _0x3775c4={};function _0x5ab287(_0x269a46,_0x1db9f9){return _0xce198e(_0x1db9f9-0x6b,_0x269a46);}_0x3775c4[_0x5ab287(-0x8f,-0x107)]=ComponentDatatype['FLOAT'],_0x3775c4['componentsPerAttribute']=0x3,_0x3775c4['values']=_0x13f7ee;const _0x2bb23c=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x1fc795),'normal':new GeometryAttribute(_0x3775c4)}),'indices':_0xf3f06a});return _0x2bb23c;}['createRawRenderState'](_0x38e936){function _0x5223cf(_0x48737a,_0x3ca659){return _0xce198e(_0x48737a-0x5da,_0x3ca659);}const _0xdf3d6c={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x38e936};return Appearance[_0x5223cf(0x470,0x4c1)](!![],![],_0xdf3d6c);}['createPrimitives'](){const _0x4d56d4={};_0x4d56d4['st']=0x0,_0x4d56d4[_0xb6062f(0x1d0,0x1ff)]=0x1;const _0x31d7e4={};function _0xb6062f(_0x568196,_0x561d41){return _0x44537b(_0x561d41,_0x568196-0xd3);}_0x31d7e4[_0x453dff(-0xd8,-0x141)]=!![];const _0x3113c0={};_0x3113c0['enabled']=!![],_0x3113c0[_0xb6062f(0x221,0x1eb)]=WebGLRenderingContext['FUNC_ADD'],_0x3113c0['blendFuncSource']=WebGLRenderingContext[_0x453dff(-0x2b,-0x94)],_0x3113c0[_0x453dff(-0x104,-0xe5)]=WebGLRenderingContext[_0x453dff(-0x43,0x42)];const _0x28f3ae={};_0x28f3ae['viewport']=undefined,_0x28f3ae[_0xb6062f(0x19c,0x17a)]=_0x31d7e4,_0x28f3ae[_0x453dff(-0x5d,-0x5a)]=!![],_0x28f3ae['blending']=_0x3113c0;const _0x521e1a=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x4d56d4,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x453dff(-0x1f,-0xb)],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0xb6062f(0x1c8,0x143)][_0x453dff(-0xaa,-0x99)]['currentParticlesPosition'],'postProcessingPosition':()=>this[_0x453dff(-0x5c,-0x92)][_0x453dff(-0xaa,-0xbd)]['postProcessingPosition'],'particlesSpeed':()=>this['computing']['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this[_0xb6062f(0x196,0x131)],'domain':()=>{function _0x3cf5a2(_0x264a8e,_0x1a0568){return _0x453dff(_0x264a8e-0x4c9,_0x1a0568);}function _0x5be0a4(_0x51821a,_0x4df273){return _0xb6062f(_0x4df273-0x384,_0x51821a);}var _0x2b2026,_0xcb5f7;const _0x311df3=new Cartesian2(((_0x2b2026=this[_0x5be0a4(0x59f,0x585)]['domain'])===null||_0x2b2026===void 0x0?void 0x0:_0x2b2026['min'])??this['computing']['windData']['speed'][_0x5be0a4(0x4c3,0x500)],((_0xcb5f7=this['options']['domain'])===null||_0xcb5f7===void 0x0?void 0x0:_0xcb5f7['max'])??this['computing']['windData']['speed'][_0x3cf5a2(0x3e6,0x3b1)]);return _0x311df3;},'displayRange':()=>{function _0x50ba53(_0x5623b4,_0x315078){return _0xb6062f(_0x315078- -0xae,_0x5623b4);}var _0x434889,_0x6255d0;function _0x54f41c(_0x555c94,_0x371102){return _0x453dff(_0x371102-0x3d7,_0x555c94);}const _0x5ba5d5=new Cartesian2(((_0x434889=this['options']['displayRange'])===null||_0x434889===void 0x0?void 0x0:_0x434889[_0x54f41c(0x2f5,0x32f)])??this[_0x50ba53(0xc3,0x11a)]['windData']['speed']['min'],((_0x6255d0=this[_0x54f41c(0x3ac,0x3b4)][_0x54f41c(0x393,0x3c0)])===null||_0x6255d0===void 0x0?void 0x0:_0x6255d0['max'])??this['computing'][_0x54f41c(0x284,0x2fe)][_0x54f41c(0x3bc,0x371)][_0x50ba53(0xa7,0x93)]);return _0x5ba5d5;},'particleHeight':()=>this[_0xb6062f(0x201,0x275)]['fixedHeight']||0x0,'aspect':()=>this['context'][_0xb6062f(0x19a,0x1d1)]/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters'][_0x453dff(-0xa0,-0x87)],'lineWidth':()=>{const _0x44cb69={};function _0x3e3044(_0x14fdcb,_0x16edf1){return _0x453dff(_0x14fdcb-0x2c9,_0x16edf1);}_0x44cb69[_0x3e3044(0x221,0x196)]=0x1;function _0x294204(_0x776514,_0x15d03d){return _0x453dff(_0x776514-0x4b3,_0x15d03d);}_0x44cb69['max']=0x2;const _0x2f7011=this[_0x294204(0x490,0x48c)][_0x3e3044(0x27c,0x286)]||_0x44cb69;return new Cartesian2(_0x2f7011['min'],_0x2f7011['max']);},'lineLength':()=>{const _0x1afdcb={};_0x1afdcb['min']=0x14;function _0x2004c9(_0x4df09e,_0x2448e9){return _0x453dff(_0x2448e9-0x270,_0x4df09e);}_0x1afdcb['max']=0x64;const _0x27c88b=this['options']['lineLength']||_0x1afdcb;return new Cartesian2(_0x27c88b['min'],_0x27c88b[_0x2004c9(0x1a7,0x18d)]);},'is3D':()=>this[_0xb6062f(0x131,0x151)]['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures'][_0x453dff(-0x55,-0x79)]},'vertexShaderSource':ShaderManager[_0xb6062f(0x137,0x18a)](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this[_0x453dff(-0x77,-0x71)](_0x28f3ae)});function _0x453dff(_0x5636b9,_0x4f07ad){return _0x44537b(_0x4f07ad,_0x5636b9- -0x151);}const _0x5e8cab={};return _0x5e8cab[_0x453dff(-0x4,-0x71)]=_0x521e1a,_0x5e8cab;}[_0xce198e(-0x136,-0xbb)](){const _0x1a34a7=this[_0x1b3592(0x219,0x1d7)]();function _0x1b3592(_0x40b6bf,_0x37b5d6){return _0x44537b(_0x40b6bf,_0x37b5d6-0xde);}function _0xe87519(_0x39bd42,_0x42b1ca){return _0x44537b(_0x39bd42,_0x42b1ca-0x288);}this['primitives']['segments'][_0x1b3592(0xc6,0x151)]=_0x1a34a7;const _0x129eaa={};_0x129eaa['context']=this[_0xe87519(0x2cc,0x345)],_0x129eaa[_0xe87519(0x2e8,0x2fb)]=_0x1a34a7,_0x129eaa[_0x1b3592(0x133,0x14f)]=this['primitives'][_0x1b3592(0x20c,0x22b)][_0x1b3592(0xd6,0x14f)],_0x129eaa[_0x1b3592(0x1a5,0x143)]=BufferUsage[_0xe87519(0x333,0x31f)];const _0x2160f4=VertexArray['fromGeometry'](_0x129eaa);this[_0x1b3592(0x1ab,0x174)]['segments']['commandToExecute']&&(this['primitives'][_0xe87519(0x3d8,0x3d5)]['commandToExecute']['vertexArray']=_0x2160f4);}['onColorTableChange'](){function _0x4ecb5a(_0x475624,_0x5a139b){return _0xce198e(_0x5a139b-0x4b6,_0x475624);}this[_0x4ecb5a(0x386,0x391)]['destroy'](),this['colorTable']=this['createColorTableTexture']();}[_0xce198e(-0x198,-0x10f)](_0x26d494){const _0x98b47d=_0x26d494['colors']&&JSON[_0x2902e8(0x531,0x4d8)](_0x26d494['colors'])!==JSON[_0x466c75(0x4aa,0x4e6)](this[_0x466c75(0x516,0x591)][_0x2902e8(0x5cf,0x5ad)]);function _0x466c75(_0x21a952,_0x5e08f3){return _0xce198e(_0x5e08f3-0x64b,_0x21a952);}this['options']=deepMerge(_0x26d494,this['options']);function _0x2902e8(_0x480601,_0x1ce32a){return _0xce198e(_0x480601-0x696,_0x1ce32a);}_0x98b47d&&this['onColorTableChange']();}['destroy'](){function _0x317856(_0x59bd79,_0x19eee5){return _0x44537b(_0x59bd79,_0x19eee5-0x518);}function _0x3be645(_0x6e8014,_0x29348d){return _0x44537b(_0x29348d,_0x6e8014-0x3b7);}Object[_0x3be645(0x448,0x412)](this[_0x317856(0x5a5,0x613)])['forEach'](_0x1cae4e=>{_0x1cae4e['destroy']();}),Object['values'](this['primitives'])['forEach'](_0x2cbdee=>{_0x2cbdee['destroy']();}),this['colorTable'][_0x317856(0x5a6,0x5bb)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x44537b(0xbb,0x8e)];class WindParticleSystem{constructor(_0x2a9597,_0x550969,_0x2587a0,_0x1ac848,_0x1ff445){this[_0x530fdf(0x190,0x1ac)]=_0x2a9597,this[_0x1d5c50(-0xa1,-0x115)]=_0x2587a0,this[_0x1d5c50(-0x171,-0x139)]=_0x1ac848;function _0x1d5c50(_0x9e3a5b,_0x3451c6){return _0x44537b(_0x3451c6,_0x9e3a5b- -0x1cf);}this['computing']=new WindParticlesComputing(_0x2a9597,_0x550969,_0x2587a0,_0x1ac848,_0x1ff445);function _0x530fdf(_0x3a07ad,_0x4aa9aa){return _0x44537b(_0x4aa9aa,_0x3a07ad-0xd3);}this['rendering']=new WindParticlesRendering(_0x2a9597,_0x2587a0,_0x1ac848,this['computing']),this['clearFramebuffers']();}['getPrimitives'](){function _0x387282(_0x331118,_0x1e37b2){return _0xce198e(_0x331118- -0x4f,_0x1e37b2);}const _0x49b874=[this['computing']['primitives']['calculateSpeed'],this['computing']['primitives'][_0xe232b7(-0x68,-0x17)],this[_0x387282(-0x142,-0xe6)][_0xe232b7(-0xf6,-0x84)]['postProcessingPosition'],this['rendering']['primitives'][_0xe232b7(0xb8,0x33)]];function _0xe232b7(_0x2e2db0,_0x4b9e58){return _0xce198e(_0x4b9e58-0xce,_0x2e2db0);}return _0x49b874;}['clearFramebuffers'](){const _0x88c61b=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0xce7b95(0x31a,0x38f)]});function _0xce7b95(_0x703e87,_0x23a597){return _0x44537b(_0x23a597,_0x703e87-0x1d5);}Object['keys'](this['rendering']['framebuffers'])['forEach'](_0x5798c3=>{_0x88c61b['framebuffer']=this[_0x33e9e8(0x33b,0x31e)]['framebuffers'][_0x5798c3];function _0x33e9e8(_0x39d6f3,_0x11dd21){return _0xce7b95(_0x39d6f3-0x82,_0x11dd21);}_0x88c61b['execute'](this['context']);});}['changeOptions'](_0x2b96b1){let _0x27d40c=![];_0x2b96b1[_0x459a3a(0x533,0x4be)]&&this[_0x459a3a(0x539,0x4b4)]['particlesTextureSize']!==_0x2b96b1['particlesTextureSize']&&(_0x27d40c=!![]);const _0x48f431=deepMerge(_0x2b96b1,this[_0x459a3a(0x539,0x578)]);function _0x5f5412(_0x1dcd26,_0xbc6e8b){return _0x44537b(_0x1dcd26,_0xbc6e8b- -0x24b);}if(_0x48f431['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x48f431;function _0x459a3a(_0x30ee57,_0x52791e){return _0xce198e(_0x30ee57-0x5f3,_0x52791e);}this[_0x5f5412(-0x1aa,-0x167)][_0x5f5412(-0x1e2,-0x1fb)](_0x2b96b1),this['computing']['updateOptions'](_0x2b96b1),_0x27d40c&&(this['computing']['destroyParticlesTextures'](),this[_0x459a3a(0x500,0x4c4)][_0x459a3a(0x4af,0x4de)](),this[_0x5f5412(-0x132,-0x167)]['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x521596){this[_0x2dbd19(0x1c9,0x1ab)]=_0x521596;function _0x2dbd19(_0x5ec643,_0x4892a1){return _0x44537b(_0x4892a1,_0x5ec643-0x16b);}this['computing'][_0x2dbd19(0x1c9,0x228)]=_0x521596;function _0x2a5091(_0x188566,_0xc79f64){return _0x44537b(_0xc79f64,_0x188566-0x41);}this['rendering']['viewerParameters']=_0x521596;}[_0xce198e(-0x145,-0x170)](){function _0x3a42c6(_0x15060a,_0x5c140e){return _0x44537b(_0x15060a,_0x5c140e-0x5b);}this['computing']['destroy']();function _0x5d443f(_0x160255,_0x50d7ff){return _0xce198e(_0x160255-0x2b1,_0x50d7ff);}this[_0x3a42c6(0x199,0x13f)][_0x5d443f(0x16c,0x17b)]();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace[_0xce198e(-0x16b,-0x18b)]['BaseLayer'],_0x19dbb5={};_0x19dbb5[_0x44537b(0xda,0xa9)]=0x1,_0x19dbb5[_0xce198e(-0x17a,-0x1b5)]=0x2;const _0xd50860={};_0xd50860['min']=0x14,_0xd50860['max']=0x64;const _0xc870bb={};_0xc870bb[_0x44537b(0xa1,0x128)]=0x64,_0xc870bb['fixedHeight']=0x0,_0xc870bb['lineWidth']=_0x19dbb5,_0xc870bb[_0xce198e(-0x161,-0xdd)]=_0xd50860,_0xc870bb['speedFactor']=0x1,_0xc870bb['dropRate']=0.003,_0xc870bb[_0x44537b(0x199,0x148)]=0.001;function _0x44537b(_0x29a592,_0x16dbb3){return _0x4c1a(_0x16dbb3- -0x15b,_0x29a592);}function _0x4c1a(_0x3f7b00,_0x5314a1){const _0x5a5d1e=_0x5a5d();return _0x4c1a=function(_0x4c1aaf,_0x3a6d97){_0x4c1aaf=_0x4c1aaf-0x196;let _0x1e7ea6=_0x5a5d1e[_0x4c1aaf];return _0x1e7ea6;},_0x4c1a(_0x3f7b00,_0x5314a1);}_0xc870bb['colors']=['rgb(206,255,255)'],_0xc870bb['flipY']=![],_0xc870bb[_0xce198e(-0xf7,-0x76)]=!![];const DEF_OPTIONS=_0xc870bb;class WindLayer extends BaseLayer$1{constructor(_0x18fc25={}){_0x18fc25={...DEF_OPTIONS,..._0x18fc25},super(_0x18fc25),this['_setOptionsHook'](_0x18fc25,_0x18fc25);}get['layer'](){return this['primitives'];}get['data'](){return this['options']['data'];}set['data'](_0x38c988){function _0x32b9ca(_0x1ff86e,_0x3305d3){return _0x44537b(_0x1ff86e,_0x3305d3-0x1da);}this[_0x32b9ca(0x28a,0x308)][_0x32b9ca(0x25e,0x221)]=_0x38c988;function _0x5c5d16(_0x1af9e8,_0x3a8b19){return _0x44537b(_0x3a8b19,_0x1af9e8-0x530);}this['setData'](_0x38c988);}get[_0x44537b(0x19b,0x121)](){function _0x534791(_0x3fbe35,_0xbf4717){return _0x44537b(_0xbf4717,_0x3fbe35-0x107);}return this[_0x534791(0x235,0x254)]['colors'];}set['colors'](_0x47283e){this['options']['colors']=_0x47283e;const _0x332680={};_0x332680['colors']=_0x47283e,this['_setOptionsHook'](this['options'],_0x332680);}['_showHook'](_0x3aa441){function _0x2c6226(_0x3e126c,_0x18037b){return _0xce198e(_0x18037b-0xff,_0x3e126c);}_0x3aa441?this['_addedHook']():this[_0x2c6226(-0x8c,-0xd)]();}[_0x44537b(0x29,0x52)](){}['_addedHook'](){this[_0xfdee67(0x17b,0x164)]=this[_0xfdee67(0x1e0,0x22a)][_0xfdee67(0x17b,0x1ef)],this['camera']=this['_map'][_0xfdee67(0x171,0x154)];function _0xfdee67(_0x2ffb7a,_0x521516){return _0xce198e(_0x2ffb7a-0x31d,_0x521516);}this['options']['data']&&this[_0xfdee67(0x1d6,0x1a5)](this[_0xfdee67(0x263,0x261)]['data']);if(!this[_0x54bc3e(-0x23,0x2e)]||!this[_0xfdee67(0x198,0x20c)])return;this[_0x54bc3e(-0x2c,0x14)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0xfdee67(0x1e3,0x182)]},this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene'][_0x54bc3e(0x56,0x73)],this['windData'],this['options'],this['viewerParameters'],this[_0xfdee67(0x17b,0x125)]);function _0x54bc3e(_0x2fe779,_0x48c109){return _0x44537b(_0x2fe779,_0x48c109- -0x4a);}this['primitives']=this['particleSystem']['getPrimitives'](),this['primitives']['forEach'](_0xc09caf=>{function _0x3a03be(_0xcbbca4,_0x4ccf32){return _0xfdee67(_0x4ccf32-0x36c,_0xcbbca4);}this[_0x3a03be(0x559,0x4e7)]['primitives']['add'](_0xc09caf);}),this[_0x54bc3e(-0x40,-0xe)][_0xfdee67(0x20c,0x269)]=0.01,this['camera']['changed'][_0xfdee67(0x249,0x23b)](this['updateViewerParameters'][_0x54bc3e(0x1a,0x66)](this)),this[_0x54bc3e(-0x53,-0x4)]['morphComplete']['addEventListener'](this['updateViewerParameters'][_0x54bc3e(0x1a,0x66)](this)),window['addEventListener'](_0xfdee67(0x23b,0x275),this['updateViewerParameters']['bind'](this));}[_0x44537b(0x82,0xdc)](){this[_0x5a67f4(0x1b6,0x188)][_0xb46df4(0x50,0x6f)][_0x5a67f4(0x2b1,0x24e)](this[_0x5a67f4(0x217,0x202)][_0x5a67f4(0x251,0x1fc)](this));function _0x5a67f4(_0x4c33e7,_0x22d294){return _0xce198e(_0x22d294-0x334,_0x4c33e7);}this['scene']['morphComplete'][_0x5a67f4(0x215,0x24e)](this[_0xb46df4(0x93,0x99)]['bind'](this)),window['removeEventListener'](_0x5a67f4(0x2b7,0x252),this['updateViewerParameters']['bind'](this));this[_0x5a67f4(0x201,0x1e2)]&&(this[_0x5a67f4(0x24e,0x1e2)]['forEach'](_0x2575d1=>{this['scene']['primitives']['remove'](_0x2575d1);}),delete this[_0xb46df4(0x4f,0x79)]);function _0xb46df4(_0x2f72dd,_0x31f7c8){return _0xce198e(_0x31f7c8-0x1cb,_0x2f72dd);}this['particleSystem']&&(this['particleSystem'][_0x5a67f4(0x1f8,0x1ef)](),delete this['particleSystem']);}[_0xce198e(-0x147,-0x186)](_0x454b10,_0x49a048){this[_0x38accd(0x26f,0x25d)]=this['processWindData'](_0x454b10);function _0x306a2e(_0x24537d,_0x1fe0cb){return _0x44537b(_0x1fe0cb,_0x24537d- -0x13b);}function _0x38accd(_0x5a701b,_0x13a4c2){return _0x44537b(_0x5a701b,_0x13a4c2-0x1e5);}if(_0x49a048){this['_removedHook'](),this['_addedHook']();return;}this['particleSystem']?(this['particleSystem'][_0x306a2e(-0x46,0x43)]['updateWindData'](this['windData']),this['scene']['requestRender']()):this['_addedHook']();}['_setOptionsHook'](_0x14ba54,_0x276117){function _0x30f462(_0x3afc63,_0x2f4939){return _0x44537b(_0x3afc63,_0x2f4939- -0xf9);}function _0x57d486(_0x190f93,_0x18c9e7){return _0x44537b(_0x18c9e7,_0x190f93- -0xeb);}this[_0x57d486(-0x51,0x5)]&&(this['particleSystem']['changeOptions'](_0x276117),this[_0x30f462(-0x50,-0xb3)][_0x57d486(-0xae,-0xd7)]());}[_0x44537b(0x71,0xa2)](_0x271a08){function _0x1f047b(_0x39ff07,_0x45b602){return _0xce198e(_0x45b602-0x60d,_0x39ff07);}var _0x4efeb5,_0xe210b9;const _0x4aeaec={..._0x271a08},_0x31b9d4=_0x4aeaec;!_0x31b9d4['height']&&_0x31b9d4['rows']&&(_0x31b9d4['height']=_0x31b9d4['rows']);function _0x5ab38b(_0x5741ae,_0x5c9c42){return _0xce198e(_0x5741ae-0x4a6,_0x5c9c42);}!_0x31b9d4['width']&&_0x31b9d4['cols']&&(_0x31b9d4[_0x5ab38b(0x3e1,0x369)]=_0x31b9d4['cols']);!_0x31b9d4[_0x5ab38b(0x3f6,0x44d)]&&(_0x31b9d4['bounds']={'west':_0x31b9d4[_0x5ab38b(0x302,0x2af)],'south':_0x31b9d4[_0x5ab38b(0x3c7,0x38d)],'east':_0x31b9d4[_0x1f047b(0x5e3,0x565)],'north':_0x31b9d4['ymax']});if(!_0x31b9d4['u']){const _0x5aa726={};_0x5aa726[_0x5ab38b(0x3a7,0x414)]=_0x271a08[_0x1f047b(0x5c5,0x558)],_0x5aa726[_0x5ab38b(0x367,0x312)]=_0x271a08['umin'],_0x5aa726['max']=_0x271a08['umax'],_0x31b9d4['u']=_0x5aa726;}if(!_0x31b9d4['v']){const _0x5016a8={};_0x5016a8['array']=_0x271a08[_0x5ab38b(0x3be,0x417)],_0x5016a8['min']=_0x271a08['vmin'],_0x5016a8['max']=_0x271a08['vmax'],_0x31b9d4['v']=_0x5016a8;}if(((_0x4efeb5=_0x31b9d4['speed'])===null||_0x4efeb5===void 0x0?void 0x0:_0x4efeb5['min'])===undefined||((_0xe210b9=_0x31b9d4['speed'])===null||_0xe210b9===void 0x0?void 0x0:_0xe210b9['max'])===undefined||_0x31b9d4[_0x5ab38b(0x3a9,0x3dd)]['array']===undefined){const _0x46026b={'array':new Float32Array(_0x31b9d4['u'][_0x1f047b(0x554,0x50e)]['length']),'min':Number['MAX_VALUE'],'max':Number[_0x5ab38b(0x319,0x302)]};for(let _0x52b679=0x0;_0x52b679<_0x31b9d4['u']['array']['length'];_0x52b679++){_0x46026b['array'][_0x52b679]=Math['sqrt'](_0x31b9d4['u'][_0x1f047b(0x49e,0x50e)][_0x52b679]*_0x31b9d4['u'][_0x1f047b(0x55f,0x50e)][_0x52b679]+_0x31b9d4['v']['array'][_0x52b679]*_0x31b9d4['v']['array'][_0x52b679]),_0x46026b[_0x1f047b(0x579,0x50e)][_0x52b679]!==0x0&&(_0x46026b['min']=Math[_0x1f047b(0x4ef,0x4ce)](_0x46026b['min'],_0x46026b['array'][_0x52b679]),_0x46026b['max']=Math['max'](_0x46026b[_0x1f047b(0x411,0x493)],_0x46026b[_0x5ab38b(0x3a7,0x3e1)][_0x52b679]));}_0x31b9d4['speed']=_0x46026b;}return _0x31b9d4;}['updateViewerParameters'](){var _0x371e1e;function _0x16c9a7(_0x5cdc41,_0x266386){return _0x44537b(_0x266386,_0x5cdc41-0x392);}const _0x76bd05=this[_0x16c9a7(0x3d8,0x420)];if(!_0x76bd05)return;const _0x296c93=_0x76bd05[_0x16c9a7(0x406,0x41d)],_0x3bc36f={};_0x3bc36f['x']=0x0,_0x3bc36f['y']=0x0;const _0x49cadf={};_0x49cadf['x']=0x0;function _0x44844e(_0x51c63e,_0x3c2a73){return _0x44537b(_0x3c2a73,_0x51c63e-0x3d8);}_0x49cadf['y']=_0x296c93[_0x16c9a7(0x452,0x4a9)];const _0x42bddc={};_0x42bddc['x']=_0x296c93['clientWidth'],_0x42bddc['y']=0x0;const _0x4f1d5d={};_0x4f1d5d['x']=_0x296c93[_0x44844e(0x465,0x4e8)],_0x4f1d5d['y']=_0x296c93[_0x44844e(0x498,0x4af)];const _0x317eb4=[_0x3bc36f,_0x49cadf,_0x42bddc,_0x4f1d5d];let _0x270d50=0xb4,_0x1a53cb=-0xb4,_0x274957=0x5a,_0x5a59c4=-0x5a,_0x489bf8=![];for(const _0x2ffd37 of _0x317eb4){const _0x51a267=_0x76bd05[_0x44844e(0x414,0x393)][_0x44844e(0x478,0x4d1)](new Cesium$1[(_0x16c9a7(0x4d4,0x486))](_0x2ffd37['x'],_0x2ffd37['y']),_0x76bd05['globe']['ellipsoid']);if(!_0x51a267){_0x489bf8=!![];break;}const _0x13bb47=_0x76bd05[_0x16c9a7(0x4d0,0x50d)][_0x16c9a7(0x484,0x4a3)]['cartesianToCartographic'](_0x51a267),_0x399bda=Cesium$1[_0x44844e(0x477,0x442)]['toDegrees'](_0x13bb47['longitude']),_0x94036b=Cesium$1['Math']['toDegrees'](_0x13bb47[_0x44844e(0x447,0x4cd)]);_0x270d50=Math[_0x16c9a7(0x43b,0x4b3)](_0x270d50,_0x399bda),_0x1a53cb=Math['max'](_0x1a53cb,_0x399bda),_0x274957=Math['min'](_0x274957,_0x94036b),_0x5a59c4=Math['max'](_0x5a59c4,_0x94036b);}if(!_0x489bf8){const _0x3b9565=new Cesium$1['Cartesian2'](Math[_0x16c9a7(0x400,0x3aa)](this[_0x44844e(0x450,0x48d)][_0x44844e(0x510,0x48c)]['west'],_0x270d50),Math['min'](this['windData'][_0x16c9a7(0x4ca,0x4b8)][_0x16c9a7(0x412,0x458)],_0x1a53cb)),_0x497b8e=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds']['south'],_0x274957),Math['min'](this['windData']['bounds']['north'],_0x5a59c4)),_0x41fe80=(_0x3b9565['y']-_0x3b9565['x'])*0.05,_0x320fca=(_0x497b8e['y']-_0x497b8e['x'])*0.05;_0x3b9565['x']=Math[_0x16c9a7(0x400,0x3f4)](this['windData']['bounds']['west'],_0x3b9565['x']-_0x41fe80),_0x3b9565['y']=Math[_0x16c9a7(0x43b,0x441)](this[_0x16c9a7(0x40a,0x444)]['bounds']['east'],_0x3b9565['y']+_0x41fe80),_0x497b8e['x']=Math['max'](this[_0x44844e(0x450,0x4b6)]['bounds']['south'],_0x497b8e['x']-_0x320fca),_0x497b8e['y']=Math[_0x44844e(0x481,0x40d)](this[_0x44844e(0x450,0x42d)][_0x16c9a7(0x4ca,0x48b)]['north'],_0x497b8e['y']+_0x320fca),this['viewerParameters']['lonRange']=_0x3b9565,this[_0x16c9a7(0x3f0,0x470)]['latRange']=_0x497b8e;const _0x269066=this['windData']['bounds'][_0x44844e(0x458,0x403)]-this['windData']['bounds']['west'],_0x962107=this['windData']['bounds'][_0x44844e(0x4e7,0x495)]-this[_0x44844e(0x450,0x3cf)][_0x44844e(0x510,0x4f9)][_0x16c9a7(0x473,0x44d)],_0x1b7336=(_0x3b9565['y']-_0x3b9565['x'])/_0x269066,_0xffd20=(_0x497b8e['y']-_0x497b8e['x'])/_0x962107,_0x2bb206=Math['min'](_0x1b7336,_0xffd20),_0x13931f=0x3e8*_0x2bb206;_0x13931f>0x0&&(this['viewerParameters']['pixelSize']=Math['max'](0x0,Math[_0x44844e(0x481,0x443)](0x3e8,_0x13931f)));}this[_0x16c9a7(0x3f0,0x452)][_0x44844e(0x422,0x40f)]=this[_0x16c9a7(0x3d8,0x3ff)]['mode'],(_0x371e1e=this['particleSystem'])===null||_0x371e1e===void 0x0||_0x371e1e['applyViewerParameters'](this[_0x44844e(0x436,0x3f4)]);}[_0xce198e(-0xbc,-0xcc)](_0x158bc4,_0x405927){const {bounds:_0x31aaf0,width:_0x39e2a9,height:_0xa5cc82,u:_0x4a4de6,v:_0x22469b,speed:_0x205645}=this['windData'],{flipY:_0x55dfa5}=this['options'];if(_0x158bc4<_0x31aaf0['west']||_0x158bc4>_0x31aaf0[_0x45e356(-0x9d,-0x87)]||_0x405927<_0x31aaf0['south']||_0x405927>_0x31aaf0[_0x45e356(-0xe,-0x24)])return null;const _0x51fb9a=(_0x158bc4-_0x31aaf0['west'])/(_0x31aaf0['east']-_0x31aaf0[_0x1da5a9(-0x1df,-0x1c0)])*(_0x39e2a9-0x1);let _0x32e07c=(_0x405927-_0x31aaf0[_0x45e356(-0x3c,-0xc3)])/(_0x31aaf0['north']-_0x31aaf0['south'])*(_0xa5cc82-0x1);_0x55dfa5&&(_0x32e07c=_0xa5cc82-0x1-_0x32e07c);const _0xdceb45=Math['floor'](_0x51fb9a),_0x15fd2c=Math['floor'](_0x32e07c),_0x232d1c=Math['floor'](_0x51fb9a),_0x3ecf69=Math[_0x1da5a9(-0x1be,-0x244)](_0x232d1c+0x1,_0x39e2a9-0x1);function _0x45e356(_0x26ef90,_0x5156a1){return _0xce198e(_0x26ef90-0xcb,_0x5156a1);}const _0x450e94=Math[_0x1da5a9(-0x19f,-0x15a)](_0x32e07c),_0xa278bc=Math['min'](_0x450e94+0x1,_0xa5cc82-0x1),_0xa1ec9b=_0x51fb9a-_0x232d1c,_0x89276e=_0x32e07c-_0x450e94,_0x15ad74=_0x15fd2c*_0x39e2a9+_0xdceb45,_0x41e057=_0x450e94*_0x39e2a9+_0x232d1c,_0x17a707=_0x450e94*_0x39e2a9+_0x3ecf69,_0x49ebbf=_0xa278bc*_0x39e2a9+_0x232d1c,_0x5ab8b1=_0xa278bc*_0x39e2a9+_0x3ecf69,_0x1d12aa=_0x4a4de6[_0x45e356(-0x34,-0x7e)][_0x41e057],_0x48100b=_0x4a4de6['array'][_0x17a707],_0x13a171=_0x4a4de6['array'][_0x49ebbf],_0x3dad86=_0x4a4de6[_0x1da5a9(-0x17e,-0x1d5)][_0x5ab8b1],_0x35c92d=(0x1-_0xa1ec9b)*(0x1-_0x89276e)*_0x1d12aa+_0xa1ec9b*(0x1-_0x89276e)*_0x48100b+(0x1-_0xa1ec9b)*_0x89276e*_0x13a171+_0xa1ec9b*_0x89276e*_0x3dad86,_0x4cfd8a=_0x22469b[_0x45e356(-0x34,-0x9e)][_0x41e057],_0xd22d24=_0x22469b[_0x45e356(-0x34,-0x35)][_0x17a707];function _0x1da5a9(_0x16053d,_0x5733f6){return _0x44537b(_0x5733f6,_0x16053d- -0x267);}const _0xab0200=_0x22469b['array'][_0x49ebbf],_0x5936c4=_0x22469b['array'][_0x5ab8b1],_0x4f7678=(0x1-_0xa1ec9b)*(0x1-_0x89276e)*_0x4cfd8a+_0xa1ec9b*(0x1-_0x89276e)*_0xd22d24+(0x1-_0xa1ec9b)*_0x89276e*_0xab0200+_0xa1ec9b*_0x89276e*_0x5936c4,_0x2aa988=Math[_0x45e356(-0x5f,-0x90)](_0x35c92d*_0x35c92d+_0x4f7678*_0x4f7678),_0x2de9c3={};_0x2de9c3['u']=_0x4a4de6[_0x1da5a9(-0x17e,-0x193)][_0x15ad74],_0x2de9c3['v']=_0x22469b['array'][_0x15ad74],_0x2de9c3['speed']=_0x205645['array'][_0x15ad74];const _0x3394b3={};_0x3394b3['u']=_0x35c92d,_0x3394b3['v']=_0x4f7678,_0x3394b3[_0x45e356(-0x32,0x40)]=_0x2aa988;const _0x23bdab={};return _0x23bdab[_0x1da5a9(-0x206,-0x1c5)]=_0x2de9c3,_0x23bdab[_0x1da5a9(-0x194,-0x151)]=_0x3394b3,_0x23bdab;}}mars3d__namespace[_0xce198e(-0xc3,-0x140)][_0xce198e(-0xa4,-0x34)]('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this[_0x5d738a(-0x218,-0x25b)]=null;function _0x2d2006(_0x16b951,_0x329ce6){return _0x44537b(_0x16b951,_0x329ce6-0x501);}this[_0x2d2006(0x5eb,0x583)]=null;function _0x5d738a(_0x334d23,_0x19193d){return _0x44537b(_0x19193d,_0x334d23- -0x25b);}this[_0x2d2006(0x65e,0x621)]=null,this['tlat']=null,this[_0x5d738a(-0x212,-0x1f6)]=null,this[_0x5d738a(-0x170,-0x109)]=null;}['destroy'](){for(const _0x33034e in this){delete this[_0x33034e];}}}class CanvasWindField{constructor(_0xa273e3){function _0x50843c(_0x5eaca9,_0x12f756){return _0xce198e(_0x12f756-0x4ac,_0x5eaca9);}this[_0x50843c(0x3ae,0x3cb)](_0xa273e3);}get[_0xce198e(-0x181,-0x1ad)](){return this['_speedRate'];}set['speedRate'](_0x273812){this[_0x3b03df(0x4bd,0x513)]=(0x64-(_0x273812>0x63?0x63:_0x273812))*0x64;function _0x3b03df(_0x11747b,_0x1588b8){return _0xce198e(_0x11747b-0x5da,_0x1588b8);}this['_calc_speedRate']=[(this['xmax']-this['xmin'])/this['_speedRate'],(this['ymax']-this['ymin'])/this['_speedRate']];}get['maxAge'](){return this['_maxAge'];}set['maxAge'](_0x3318bf){function _0x1b7509(_0x18248a,_0x3bde17){return _0x44537b(_0x3bde17,_0x18248a-0x57);}this[_0x1b7509(0x19d,0x1b1)]=_0x3318bf;}[_0xce198e(-0xe1,-0x148)](_0x38ea15){function _0x2b4c97(_0x3cac04,_0x5759b5){return _0x44537b(_0x3cac04,_0x5759b5-0x189);}this['options']=_0x38ea15,this[_0x24a398(0x2b0,0x2fb)]=_0x38ea15['maxAge']||0x78,this[_0x24a398(0x273,0x26f)]=_0x38ea15[_0x24a398(0x2b8,0x26f)]||0x32,this[_0x24a398(0x201,0x273)]=[];function _0x24a398(_0x46abd2,_0x5bed73){return _0xce198e(_0x5bed73-0x3f0,_0x46abd2);}const _0x295602=_0x38ea15['particlesNumber']||0x1000;for(let _0x53a023=0x0;_0x53a023<_0x295602;_0x53a023++){const _0x4ad0ed=this['_randomParticle'](new CanvasParticle());this['particles'][_0x2b4c97(0x2df,0x255)](_0x4ad0ed);}}['setDate'](_0x4535db){this['rows']=_0x4535db['rows'],this[_0x590973(0x5c5,0x5f6)]=_0x4535db['cols'],this['xmin']=_0x4535db[_0x590973(0x573,0x50f)],this[_0x41a605(-0xcd,-0x146)]=_0x4535db[_0x41a605(-0xcd,-0xcf)];function _0x590973(_0x30efb7,_0x577649){return _0x44537b(_0x30efb7,_0x577649-0x4cb);}this[_0x41a605(-0x104,-0xea)]=_0x4535db['ymin'],this['ymax']=_0x4535db[_0x41a605(-0xf7,-0x91)],this[_0x590973(0x48e,0x50c)]=[];const _0xabd492=_0x4535db['udata'],_0x3b6909=_0x4535db['vdata'];function _0x41a605(_0x49719f,_0x4819a4){return _0xce198e(_0x49719f- -0x25,_0x4819a4);}let _0x518465=![];_0xabd492['length']===this['rows']&&_0xabd492[0x0]['length']===this['cols']&&(_0x518465=!![]);let _0x4d0255=0x0,_0x2c9f81=null,_0x362d0a=null;for(let _0x36210f=0x0;_0x36210f<this['rows'];_0x36210f++){_0x2c9f81=[];for(let _0x2ae46a=0x0;_0x2ae46a<this['cols'];_0x2ae46a++,_0x4d0255++){_0x518465?_0x362d0a=this[_0x590973(0x648,0x617)](_0xabd492[_0x36210f][_0x2ae46a],_0x3b6909[_0x36210f][_0x2ae46a]):_0x362d0a=this[_0x590973(0x60a,0x617)](_0xabd492[_0x4d0255],_0x3b6909[_0x4d0255]),_0x2c9f81[_0x590973(0x5a5,0x597)](_0x362d0a);}this[_0x590973(0x50c,0x50c)]['push'](_0x2c9f81);}!this['options']['flipY']&&this['grid']['reverse']();}['clear'](){delete this[_0x8cb2c8(0x10a,0x131)],delete this[_0x8cb2c8(0x158,0x154)];function _0x8cb2c8(_0x4a9e74,_0x19198e){return _0xce198e(_0x4a9e74-0x215,_0x19198e);}delete this[_0x8cb2c8(0x71,0xf4)],delete this['xmax'],delete this['ymin'],delete this[_0x8cb2c8(0x143,0x1ae)],delete this[_0x8cb2c8(0x6e,0x8)];function _0x5f2a51(_0x1e5d66,_0x2a1c01){return _0x44537b(_0x1e5d66,_0x2a1c01-0x205);}delete this[_0x5f2a51(0x1ef,0x270)];}[_0xce198e(-0x130,-0x17b)](_0x487d5f,_0x1ec4f3){function _0x4a9997(_0x57ccca,_0x9cb4a4){return _0xce198e(_0x57ccca-0x517,_0x9cb4a4);}function _0x4683e8(_0x5142f9,_0x135c29){return _0x44537b(_0x5142f9,_0x135c29-0x2fc);}const _0x3a52dc=(_0x487d5f-this[_0x4a9997(0x373,0x349)])/(this[_0x4a9997(0x46f,0x4ab)]-this[_0x4683e8(0x2c1,0x340)])*(this['cols']-0x1),_0x3953a2=(this['ymax']-_0x1ec4f3)/(this[_0x4683e8(0x458,0x412)]-this['ymin'])*(this['rows']-0x1);return[_0x3a52dc,_0x3953a2];}['getUVByXY'](_0x4079e6,_0x312efa){if(_0x4079e6<0x0||_0x4079e6>=this['cols']||_0x312efa>=this[_0x20a303(-0xee,-0x8f)])return[0x0,0x0,0x0];const _0x405410=Math[_0x32071b(0x511,0x565)](_0x4079e6);function _0x32071b(_0x4a1b15,_0x17a2de){return _0xce198e(_0x17a2de-0x685,_0x4a1b15);}const _0x464191=Math['floor'](_0x312efa);if(_0x405410===_0x4079e6&&_0x464191===_0x312efa)return this['grid'][_0x312efa][_0x4079e6];const _0x5f5a81=_0x405410+0x1,_0x38a482=_0x464191+0x1,_0x190bb7=this['getUVByXY'](_0x405410,_0x464191),_0x3d10cc=this['getUVByXY'](_0x5f5a81,_0x464191),_0x2df34e=this['getUVByXY'](_0x405410,_0x38a482),_0x292964=this[_0x32071b(0x577,0x562)](_0x5f5a81,_0x38a482);let _0x1834c8=null;function _0x20a303(_0x4b8437,_0x3fd121){return _0xce198e(_0x4b8437-0x1d,_0x3fd121);}try{_0x1834c8=this['_bilinearInterpolation'](_0x4079e6-_0x405410,_0x312efa-_0x464191,_0x190bb7,_0x3d10cc,_0x2df34e,_0x292964);}catch(_0xd85bcb){console['log'](_0x4079e6,_0x312efa);}return _0x1834c8;}['_bilinearInterpolation'](_0x5dcb4b,_0x5ee6c6,_0x4258d2,_0x526254,_0x142bfb,_0x319b3c){const _0x50c3d2=0x1-_0x5dcb4b,_0x3906a1=0x1-_0x5ee6c6,_0x2065c0=_0x50c3d2*_0x3906a1,_0x42abe1=_0x5dcb4b*_0x3906a1,_0x242fc7=_0x50c3d2*_0x5ee6c6,_0x81c550=_0x5dcb4b*_0x5ee6c6,_0x11ba30=_0x4258d2[0x0]*_0x2065c0+_0x526254[0x0]*_0x42abe1+_0x142bfb[0x0]*_0x242fc7+_0x319b3c[0x0]*_0x81c550,_0x27f4df=_0x4258d2[0x1]*_0x2065c0+_0x526254[0x1]*_0x42abe1+_0x142bfb[0x1]*_0x242fc7+_0x319b3c[0x1]*_0x81c550;return this['_calcUV'](_0x11ba30,_0x27f4df);}[_0x44537b(0xfa,0x14c)](_0x447cd7,_0x20c20b){return[+_0x447cd7,+_0x20c20b,Math['sqrt'](_0x447cd7*_0x447cd7+_0x20c20b*_0x20c20b)];}[_0xce198e(-0x142,-0x1ad)](_0xea88cd,_0x848a3b){if(!this['isInExtent'](_0xea88cd,_0x848a3b))return null;const _0x68c46d=this['toGridXY'](_0xea88cd,_0x848a3b),_0x5e3b6f=this['getUVByXY'](_0x68c46d[0x0],_0x68c46d[0x1]);return _0x5e3b6f;}[_0x44537b(-0x24,0x5d)](_0x3204f8,_0x3539b1){function _0x499a05(_0x40debf,_0x154649){return _0xce198e(_0x154649-0x51e,_0x40debf);}function _0xdd70e6(_0x50ca98,_0x5c3549){return _0x44537b(_0x50ca98,_0x5c3549- -0x9b);}return _0x3204f8>=this['xmin']&&_0x3204f8<=this['xmax']&&_0x3539b1>=this[_0x499a05(0x40e,0x43f)]&&_0x3539b1<=this[_0x499a05(0x4af,0x44c)]?!![]:![];}['getRandomLatLng'](){const _0x6a8305=fRandomByfloat(this['xmin'],this[_0x1964a6(0x546,0x571)]),_0x2f7f6a=fRandomByfloat(this[_0xb6c841(0x330,0x35f)],this[_0x1964a6(0x51c,0x5a0)]);function _0xb6c841(_0x74cbbe,_0x511286){return _0xce198e(_0x511286-0x43e,_0x74cbbe);}const _0x59e90f={};_0x59e90f['lat']=_0x2f7f6a;function _0x1964a6(_0x4c8a76,_0x52522f){return _0x44537b(_0x52522f,_0x4c8a76-0x406);}return _0x59e90f[_0xb6c841(0x27b,0x299)]=_0x6a8305,_0x59e90f;}[_0x44537b(0x13d,0x14a)](){function _0x258093(_0x59007e,_0x5da686){return _0x44537b(_0x59007e,_0x5da686- -0x18e);}let _0x42c526,_0x32f744,_0x512759;for(let _0x222872=0x0,_0x5aa867=this[_0x258093(-0x168,-0x123)]['length'];_0x222872<_0x5aa867;_0x222872++){let _0x5dc267=this['particles'][_0x222872];_0x5dc267['age']<=0x0&&(_0x5dc267=this['_randomParticle'](_0x5dc267));if(_0x5dc267['age']>0x0){const _0x94c821=_0x5dc267['tlng'],_0x230569=_0x5dc267['tlat'];_0x512759=this['getUVByPoint'](_0x94c821,_0x230569),_0x512759?(_0x42c526=_0x94c821+this['_calc_speedRate'][0x0]*_0x512759[0x0],_0x32f744=_0x230569+this[_0x1486bb(0x27a,0x275)][0x1]*_0x512759[0x1],_0x5dc267[_0x1486bb(0x1f9,0x1e4)]=_0x94c821,_0x5dc267['lat']=_0x230569,_0x5dc267[_0x1486bb(0x340,0x2c1)]=_0x42c526,_0x5dc267[_0x1486bb(0x22a,0x1fb)]=_0x32f744,_0x5dc267['speed']=_0x512759[0x2],_0x5dc267['age']--):_0x5dc267['age']=0x0;}}function _0x1486bb(_0x318c89,_0x3d6c95){return _0x44537b(_0x318c89,_0x3d6c95-0x1a1);}return this[_0x1486bb(0x18b,0x20c)];}[_0x44537b(0x13c,0x108)](_0x4f3281){let _0x5c3171,_0x3c10d0;function _0x42d30b(_0x14d18e,_0x4a220e){return _0x44537b(_0x4a220e,_0x14d18e-0x429);}for(let _0x4e9d78=0x0;_0x4e9d78<0x1e;_0x4e9d78++){_0x5c3171=this['getRandomLatLng'](),_0x3c10d0=this[_0x42d30b(0x4cf,0x47e)](_0x5c3171[_0x25d2bc(0x15,0x9f)],_0x5c3171[_0x42d30b(0x4ab,0x484)]);if(_0x3c10d0&&_0x3c10d0[0x2]>0x0)break;}if(!_0x3c10d0)return _0x4f3281;const _0x3d98cf=_0x5c3171['lng']+this[_0x42d30b(0x4fd,0x497)][0x0]*_0x3c10d0[0x0],_0x42f8fd=_0x5c3171[_0x25d2bc(0x54,0x2c)]+this['_calc_speedRate'][0x1]*_0x3c10d0[0x1];_0x4f3281['lng']=_0x5c3171['lng'],_0x4f3281[_0x25d2bc(0x54,0x56)]=_0x5c3171['lat'],_0x4f3281['tlng']=_0x3d98cf,_0x4f3281['tlat']=_0x42f8fd,_0x4f3281['age']=Math['round'](0xa+Math['random']()*this['maxAge']),_0x4f3281[_0x25d2bc(0xbd,0x119)]=_0x3c10d0[0x2];function _0x25d2bc(_0x1e8909,_0x3de809){return _0x44537b(_0x3de809,_0x1e8909- -0x2e);}return _0x4f3281;}['destroy'](){for(const _0x2d6424 in this){delete this[_0x2d6424];}}}function fRandomByfloat(_0x341f62,_0x19be8f){function _0x1dee65(_0x2ab5b9,_0x45e97a){return _0xce198e(_0x45e97a-0x5f7,_0x2ab5b9);}return _0x341f62+Math[_0x1dee65(0x496,0x47b)]()*(_0x19be8f-_0x341f62);}const Cesium=mars3d__namespace[_0xce198e(-0x15a,-0x199)],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x487cc0={}){super(_0x487cc0),this['_setOptionsHook'](_0x487cc0),this['canvas']=null;function _0x210bb4(_0x38c476,_0x4e747c){return _0x44537b(_0x38c476,_0x4e747c-0x394);}function _0x557e5e(_0x1322c3,_0x33f338){return _0xce198e(_0x33f338-0x2cd,_0x1322c3);}_0x487cc0[_0x210bb4(0x470,0x4b5)]&&_0x487cc0['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x210bb4(0x4d8,0x4ae))](_0x487cc0));}['_setOptionsHook'](_0x663431,_0x55cf4a){this['frameTime']=0x3e8/(_0x663431[_0x4f1983(0x73,0x9)]||0xa);function _0x4f1983(_0x20064e,_0x34948a){return _0x44537b(_0x20064e,_0x34948a- -0x64);}this['_pointerEvents']=this[_0x31cc57(0x385,0x365)]['pointerEvents']??![],this['color']=_0x663431[_0x4f1983(0x8,-0x10)]||'#ffffff',this[_0x4f1983(0xd1,0xa0)]=_0x663431[_0x4f1983(0x8b,0xa0)]||0x1,this['fixedHeight']=_0x663431['fixedHeight']??0x0;function _0x31cc57(_0x2300a7,_0x1f30ba){return _0xce198e(_0x2300a7-0x43f,_0x1f30ba);}this[_0x4f1983(-0x25,-0x29)]=_0x663431['flipY']??![],this[_0x4f1983(0x105,0xdd)]&&this[_0x4f1983(0xa7,0xdd)][_0x31cc57(0x35e,0x2fb)](_0x663431);}get['layer'](){return this['canvas'];}get['canvasWidth'](){function _0x36083e(_0x41a35b,_0x15e6c1){return _0x44537b(_0x15e6c1,_0x41a35b-0x265);}function _0x31a463(_0x7197fa,_0x26fd21){return _0xce198e(_0x7197fa-0x24f,_0x26fd21);}return this['_map']['scene'][_0x36083e(0x2d9,0x2cb)][_0x36083e(0x2f2,0x2ae)];}get[_0xce198e(-0xea,-0x86)](){function _0x4944f7(_0x5cef53,_0x564627){return _0x44537b(_0x5cef53,_0x564627-0x1a9);}function _0x3d6ca8(_0x37060e,_0x3cb517){return _0x44537b(_0x37060e,_0x3cb517-0x2c7);}return this[_0x4944f7(0x251,0x254)]['scene'][_0x3d6ca8(0x320,0x33b)][_0x4944f7(0x22a,0x269)];}get[_0x44537b(0x12a,0xbf)](){function _0x2734fb(_0x3b6504,_0x4962ce){return _0x44537b(_0x4962ce,_0x3b6504-0x3cd);}return this[_0x2734fb(0x509,0x566)];}set[_0x44537b(0xe2,0xbf)](_0x5754a5){this['_pointerEvents']=_0x5754a5;function _0x2a8a05(_0x17aade,_0x178067){return _0x44537b(_0x178067,_0x17aade- -0x244);}if(!this['canvas'])return;function _0x5a957b(_0x5c8542,_0xe218a5){return _0xce198e(_0xe218a5- -0x61,_0x5c8542);}_0x5754a5?this['canvas']['style']['pointer-events']=_0x2a8a05(-0x107,-0x81):this['canvas']['style'][_0x5a957b(-0xee,-0x174)]=_0x2a8a05(-0x1b2,-0x1ee);}get['particlesNumber'](){return this['options']['particlesNumber'];}set[_0xce198e(-0x122,-0xcf)](_0xa57afd){this['options']['particlesNumber']=_0xa57afd;function _0x215494(_0x813829,_0x2bcb65){return _0xce198e(_0x2bcb65-0x2c4,_0x813829);}clearTimeout(this['_canrefresh']),this[_0x215494(0x14a,0x1ac)]=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){return this['options']['speedRate'];}set['speedRate'](_0x3f81fc){function _0x219abf(_0x42a3ed,_0x29414c){return _0xce198e(_0x29414c-0x577,_0x42a3ed);}this['options']['speedRate']=_0x3f81fc,this[_0x219abf(0x4c8,0x4d0)]&&(this['windField']['speedRate']=_0x3f81fc);}get['maxAge'](){function _0x4e1fce(_0x9bf5de,_0xec7f60){return _0xce198e(_0x9bf5de-0x572,_0xec7f60);}return this[_0x4e1fce(0x4b8,0x4a2)]['maxAge'];}set['maxAge'](_0x2bb154){function _0x5b79ed(_0x304fc8,_0x19acfd){return _0xce198e(_0x304fc8-0xf0,_0x19acfd);}function _0x3f7e2c(_0x154b1f,_0xf5d7f5){return _0xce198e(_0x154b1f-0x65f,_0xf5d7f5);}this[_0x5b79ed(0x36,0x21)]['maxAge']=_0x2bb154,this['windField']&&(this['windField'][_0x5b79ed(-0x5,-0x3f)]=_0x2bb154);}get['data'](){return this['windData'];}set['data'](_0x50994c){this['setData'](_0x50994c);}get['rectangle'](){let _0x43998f=this[_0x4161ca(0x178,0x105)]['xmin'],_0x2f29d8=this['windData']['xmax'],_0x4673a0=this[_0x4161ca(0x178,0x127)]['ymin'],_0x5b81a6=this['windData']['ymax'];_0x2f29d8>=0x167&&_0x43998f===0x0&&(_0x43998f=-0xb4,_0x2f29d8=0xb4);_0x43998f=Math['max'](_0x43998f,-0xb4),_0x2f29d8=Math['min'](_0x2f29d8,0xb4);function _0x4161ca(_0xe6f8a,_0x2d1bba){return _0xce198e(_0xe6f8a-0x2e8,_0x2d1bba);}_0x4673a0=Math[_0x3f291e(0xf5,0x89)](_0x4673a0,-0x5a),_0x5b81a6=Math[_0x3f291e(0x130,0xd8)](_0x5b81a6,0x5a);function _0x3f291e(_0x392d89,_0x5e2a96){return _0x44537b(_0x5e2a96,_0x392d89-0x87);}return Cesium[_0x4161ca(0x14b,0x104)][_0x4161ca(0x1b4,0x1d2)](_0x43998f,_0x4673a0,_0x2f29d8,_0x5b81a6);}[_0xce198e(-0x167,-0x1e4)](_0x5bf107){function _0x3b4f57(_0xf2edfb,_0x4147f5){return _0x44537b(_0x4147f5,_0xf2edfb-0x47a);}function _0x279113(_0x42ef32,_0x2e731c){return _0xce198e(_0x2e731c-0x48d,_0x42ef32);}_0x5bf107?this['_addedHook']():(this['windData']&&(this[_0x3b4f57(0x5a8,0x5f2)][_0x279113(0x290,0x2ec)]=this['windData']),this['_removedHook']());}[_0x44537b(-0x11,0x52)](){function _0x49a256(_0x2984a1,_0x7a2d3){return _0xce198e(_0x2984a1-0x111,_0x7a2d3);}this['options']['worker']?this['initWorker']():this[_0x49a256(0x6a,0x5a)]=new CanvasWindField(this['options']);}['_addedHook'](){this[_0x376146(0x13b,0x166)]=this[_0x39bf46(0x2a3,0x2ab)]();function _0x39bf46(_0x480116,_0x586891){return _0xce198e(_0x480116-0x3ee,_0x586891);}const _0x6bedde={};_0x6bedde['willReadFrequently']=!![],this[_0x376146(0x11f,0x13a)]=this[_0x376146(0x11c,0x166)]['getContext']('2d',_0x6bedde);function _0x376146(_0x174a7f,_0x3e40f8){return _0x44537b(_0x174a7f,_0x3e40f8-0xf2);}this['bindEvent'](),this[_0x39bf46(0x334,0x37c)]['data']&&this['setData'](this[_0x376146(0x1b4,0x220)][_0x39bf46(0x24d,0x2a1)]);}['_removedHook'](){function _0x2acf2f(_0x416a4d,_0x465049){return _0x44537b(_0x416a4d,_0x465049-0x211);}function _0x1cc082(_0x2d8a25,_0xd7f902){return _0x44537b(_0xd7f902,_0x2d8a25- -0x286);}this['clear'](),this[_0x1cc082(-0x179,-0x131)](),this[_0x1cc082(-0x212,-0x28a)]&&(this[_0x1cc082(-0x1db,-0x249)]['container']['removeChild'](this[_0x1cc082(-0x212,-0x1ac)]),delete this['canvas']);}[_0xce198e(-0x14b,-0x1ae)](){function _0x474b47(_0x14027d,_0x4eefd0){return _0xce198e(_0x4eefd0-0x46a,_0x14027d);}const _0x291337=mars3d__namespace['DomUtil']['create']('canvas','mars3d-canvasWind',this['_map']['container']);_0x291337['style']['position']=_0x66169f(0x36f,0x31b),_0x291337['style']['top']='0px',_0x291337['style']['left']='0px';function _0x66169f(_0x38b00d,_0x4477b8){return _0xce198e(_0x4477b8-0x3ca,_0x38b00d);}return _0x291337['style'][_0x66169f(0x2a3,0x305)]=this['_map'][_0x474b47(0x267,0x2c8)][_0x66169f(0x221,0x256)][_0x474b47(0x28d,0x30f)]+'px',_0x291337['style'][_0x66169f(0x36c,0x2ff)]=this['_map']['scene'][_0x66169f(0x2ab,0x256)]['clientHeight']+'px',_0x291337[_0x66169f(0x2b9,0x2ac)][_0x66169f(0x220,0x2a1)]=this['_pointerEvents']?_0x66169f(0x279,0x28a):_0x474b47(0x35f,0x314),_0x291337['style']['zIndex']=this['options']['zIndex']??0x9,_0x291337[_0x474b47(0x329,0x3a5)]=this['_map']['scene']['canvas'][_0x474b47(0x2d9,0x30f)],_0x291337[_0x66169f(0x342,0x2ff)]=this[_0x66169f(0x2f7,0x28d)]['scene']['canvas']['clientHeight'],_0x291337;}['resize'](){function _0x37c458(_0xbe5fff,_0xae42af){return _0x44537b(_0xae42af,_0xbe5fff-0x157);}function _0xfd930b(_0xb804c,_0xdf26e5){return _0xce198e(_0xdf26e5-0x1e2,_0xb804c);}this[_0xfd930b(0xc3,0x6e)]&&(this[_0x37c458(0x1cb,0x1b7)]['style'][_0xfd930b(0x139,0x11d)]=this['_map'][_0x37c458(0x19d,0x17e)]['canvas']['clientWidth']+'px',this['canvas']['style']['height']=this[_0xfd930b(0xd8,0xa5)][_0xfd930b(0x17,0x40)][_0x37c458(0x1cb,0x217)]['clientHeight']+'px',this['canvas'][_0xfd930b(0xe7,0x11d)]=this[_0x37c458(0x202,0x28b)]['scene']['canvas'][_0xfd930b(0x59,0x87)],this['canvas']['height']=this['_map']['scene'][_0xfd930b(0xd8,0x6e)]['clientHeight']);}['bindEvent'](){const _0x3363e5=this;let _0x5f1cb2=Date['now']();(function _0x268a7d(){function _0x3b1456(_0x354013,_0x4922fc){return _0x4c1a(_0x4922fc-0x235,_0x354013);}function _0x4801b3(_0x190f86,_0x5b9c2e){return _0x4c1a(_0x190f86-0x2e1,_0x5b9c2e);}if(_0x3363e5['isDestroy'])return;_0x3363e5[_0x4801b3(0x58b,0x514)]=window['requestAnimationFrame'](_0x268a7d);if(_0x3363e5['show']&&_0x3363e5['windField']){const _0x32cc75=Date['now'](),_0x26e3ac=_0x32cc75-_0x5f1cb2;_0x26e3ac>_0x3363e5[_0x3b1456(0x405,0x46b)]&&(_0x5f1cb2=_0x32cc75-_0x26e3ac%_0x3363e5[_0x4801b3(0x517,0x509)],_0x3363e5['update']());}}(),window['addEventListener']('resize',this['resize']['bind'](this),![]));function _0x11e4db(_0xe168dd,_0x256483){return _0x44537b(_0x256483,_0xe168dd-0x25c);}this[_0x1f6a5f(0x18f,0x1a8)]=![];function _0x1f6a5f(_0x15c9e,_0x55b283){return _0x44537b(_0x15c9e,_0x55b283-0x168);}this['mouse_move']=![],this[_0x1f6a5f(0x2b5,0x296)]['mouseHidden']&&(this[_0x11e4db(0x307,0x2be)]['on'](mars3d__namespace['EventType']['wheel'],this[_0x1f6a5f(0x245,0x1d8)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x1f6a5f(0x1bf,0x1c8)],this),this[_0x1f6a5f(0x27f,0x213)]['on'](mars3d__namespace['EventType'][_0x1f6a5f(0x21c,0x1d1)],this['_onMouseUpEvent'],this));}['unbindEvent'](){function _0x42f23a(_0xf79e3a,_0xf8247f){return _0xce198e(_0xf79e3a-0x9d,_0xf8247f);}window[_0x42f23a(-0x9c,-0xb0)](this[_0x2a29f6(0x351,0x385)]),delete this['_animateFrame'];function _0x2a29f6(_0xf906d9,_0x527579){return _0x44537b(_0xf906d9,_0x527579-0x236);}window[_0x42f23a(-0x49,-0x45)]('resize',this[_0x2a29f6(0x2db,0x33c)]),this['options'][_0x2a29f6(0x36f,0x314)]&&(this[_0x2a29f6(0x2aa,0x2e1)]['off'](mars3d__namespace['EventType'][_0x42f23a(-0x3a,-0x3c)],this[_0x2a29f6(0x279,0x2a6)],this),this['_map']['off'](mars3d__namespace['EventType'][_0x2a29f6(0x295,0x28e)],this['_onMouseDownEvent'],this),this['_map'][_0x42f23a(-0xd4,-0x11c)](mars3d__namespace['EventType']['mouseUp'],this[_0x42f23a(-0xcc,-0x123)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}[_0x44537b(0x54,0x70)](_0x55e2c1){function _0x1e533d(_0x382ce9,_0x3c2892){return _0xce198e(_0x382ce9-0x64c,_0x3c2892);}clearTimeout(this[_0x1e533d(0x583,0x527)]);function _0x4c42fc(_0x55b31e,_0x1ec8d8){return _0xce198e(_0x55b31e-0x44a,_0x1ec8d8);}if(!this[_0x1e533d(0x4c7,0x4d2)]||!this[_0x1e533d(0x4d8,0x562)])return;this['canvas'][_0x4c42fc(0x32c,0x39f)][_0x4c42fc(0x323,0x300)]=_0x4c42fc(0x2de,0x2f4),this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;this[_0x295be2(0xa9,0x77)]();function _0x361fb6(_0x1949de,_0x23327b){return _0x4c42fc(_0x1949de-0x2a4,_0x23327b);}function _0x295be2(_0x201e08,_0x1b7e60){return _0x1e533d(_0x201e08- -0x48d,_0x1b7e60);}this[_0x295be2(0x4b,0xcc)][_0x295be2(0xa1,0xef)]['visibility']=_0x295be2(0xa4,0x12d);},0xc8);}[_0xce198e(-0x188,-0x1be)](_0x2ec40c){this['mouse_down']=!![];function _0x476c49(_0xd90eee,_0x4b41cc){return _0xce198e(_0xd90eee-0x311,_0x4b41cc);}this['_map'][_0x476c49(0x1a0,0x115)](mars3d__namespace[_0x3295db(0x76,0x1b)]['mouseMove'],this['_onMouseMoveEvent'],this);function _0x3295db(_0x33e431,_0x5cd91e){return _0x44537b(_0x33e431,_0x5cd91e- -0x44);}this[_0x476c49(0x1d4,0x14e)]['on'](mars3d__namespace[_0x476c49(0x188,0x1f9)]['mouseMove'],this[_0x476c49(0x180,0x1cd)],this);}[_0x44537b(0xc4,0x57)](_0x16d1ea){if(!this['show']||!this['canvas'])return;function _0x5055ef(_0x12bc3d,_0x55a270){return _0x44537b(_0x12bc3d,_0x55a270-0x31d);}function _0xc034fb(_0x5a5641,_0x12e052){return _0x44537b(_0x5a5641,_0x12e052- -0xdb);}this[_0x5055ef(0x3a7,0x35d)]&&(this['canvas']['style']['visibility']=_0x5055ef(0x3ef,0x399),this[_0xc034fb(0xa3,0x4e)]=!![]);}['_onMouseUpEvent'](_0x2fcedd){if(!this['show']||!this['canvas'])return;this['_map']['off'](mars3d__namespace[_0x243a1e(0x277,0x2cf)][_0x243a1e(0x2b3,0x2c5)],this['_onMouseMoveEvent'],this);this['mouse_down']&&this[_0x243a1e(0x341,0x347)]&&this['redraw']();function _0x36271e(_0x3edf63,_0x186ec2){return _0xce198e(_0x186ec2-0x262,_0x3edf63);}this[_0x243a1e(0x28c,0x2a5)]['style']['visibility']='visible';function _0x243a1e(_0x599c8d,_0x1bc22f){return _0xce198e(_0x599c8d-0x400,_0x1bc22f);}this['mouse_down']=![],this['mouse_move']=![];}['setData'](_0x1c2462){this['clear'](),this[_0x8e1d82(0x2c1,0x2d5)]=_0x1c2462,this['windField']['setDate'](_0x1c2462);function _0x8e1d82(_0x28db4c,_0x2bcf86){return _0x44537b(_0x28db4c,_0x2bcf86-0x25d);}function _0x442eaf(_0x4d777a,_0x2ab812){return _0x44537b(_0x4d777a,_0x2ab812-0x50a);}this[_0x8e1d82(0x356,0x32f)]();}['redraw'](){function _0x451117(_0x3d2419,_0x5d594d){return _0x44537b(_0x3d2419,_0x5d594d- -0x12d);}if(!this[_0x451117(-0x13c,-0xca)])return;this['windField']['setOptions'](this['options']),this['update']();}['update'](){if(this['_updateIng'])return;this['_updateIng']=!![];function _0x4c477b(_0x3f3979,_0xad2ef4){return _0xce198e(_0x3f3979-0x673,_0xad2ef4);}function _0x38899c(_0x37a5f6,_0x4ea42f){return _0x44537b(_0x4ea42f,_0x37a5f6- -0x23);}if(this['worker'])this['windField']['update']();else{const _0x1932ec=this[_0x4c477b(0x5cc,0x5d3)][_0x4c477b(0x5d5,0x64e)]();this[_0x4c477b(0x51b,0x558)](_0x1932ec);}this['_updateIng']=![];}[_0x44537b(0x30,0x90)](_0x464122){this['_canvasParticles']=_0x464122,this['canvasContext'][_0x18821a(0x1d2,0x186)]='destination-in',this['canvasContext']['fillRect'](0x0,0x0,this[_0x18821a(0x101,0x15f)],this[_0x21816d(0x602,0x5d4)]);function _0x18821a(_0x32dc4d,_0x5dfd46){return _0xce198e(_0x5dfd46-0x28e,_0x32dc4d);}this['canvasContext'][_0x21816d(0x5e4,0x5f3)]='lighter',this['canvasContext']['globalAlpha']=0.9;const _0x14cbe5=this['_map']['scene']['mode']!==Cesium['SceneMode'][_0x21816d(0x593,0x55e)];function _0x21816d(_0x5bb57a,_0x1760e9){return _0x44537b(_0x1760e9,_0x5bb57a-0x504);}const _0x238388=this[_0x21816d(0x5bd,0x539)]*0.25;if(this[_0x21816d(0x620,0x66c)])for(let _0x22e628=0x0,_0x5d0f0e=_0x464122[_0x18821a(0x195,0x13f)];_0x22e628<_0x5d0f0e;_0x22e628++){const _0xdfc093=_0x464122[_0x22e628],_0xdf78c1=this['_tomap'](_0xdfc093,_0xdfc093['lng'],_0xdfc093['lat'],_0xdfc093['alt']),_0x297aca=this[_0x18821a(0x1cf,0x1db)](_0xdfc093,_0xdfc093['tlng'],_0xdfc093['tlat'],_0xdfc093['talt']);if(!_0xdf78c1||!_0x297aca)continue;if(_0x14cbe5&&Math[_0x18821a(0x125,0x162)](_0xdf78c1[0x0]-_0x297aca[0x0])>=_0x238388)continue;this['canvasContext']['beginPath'](),this[_0x21816d(0x54c,0x507)][_0x18821a(0x178,0x1aa)]=this['lineWidth'],this[_0x18821a(0x113,0xee)]['strokeStyle']=this['_colorRamp']['getColor'](_0xdfc093['speed']),this[_0x18821a(0x13b,0xee)]['moveTo'](_0xdf78c1[0x0],_0xdf78c1[0x1]),this['canvasContext'][_0x21816d(0x5f2,0x584)](_0x297aca[0x0],_0x297aca[0x1]),this['canvasContext'][_0x21816d(0x64b,0x68c)]();}else{this['canvasContext'][_0x18821a(0x1eb,0x1e9)](),this['canvasContext'][_0x21816d(0x608,0x5bd)]=this['lineWidth'],this['canvasContext'][_0x21816d(0x599,0x598)]=this[_0x21816d(0x558,0x562)];for(let _0x59a336=0x0,_0x555da5=_0x464122['length'];_0x59a336<_0x555da5;_0x59a336++){const _0x43bc0f=_0x464122[_0x59a336],_0x4b63ba=this['_tomap'](_0x43bc0f,_0x43bc0f['lng'],_0x43bc0f['lat'],_0x43bc0f['alt']),_0x4f4f4e=this['_tomap'](_0x43bc0f,_0x43bc0f[_0x18821a(0x222,0x1c6)],_0x43bc0f[_0x21816d(0x55e,0x560)],_0x43bc0f['talt']);if(!_0x4b63ba||!_0x4f4f4e)continue;if(_0x14cbe5&&Math['abs'](_0x4b63ba[0x0]-_0x4f4f4e[0x0])>=_0x238388)continue;this[_0x18821a(0x16b,0xee)]['moveTo'](_0x4b63ba[0x0],_0x4b63ba[0x1]),this['canvasContext'][_0x18821a(0x1c7,0x194)](_0x4f4f4e[0x0],_0x4f4f4e[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x560180,_0x1173fc,_0x1d6ac1,_0x52ba4d){const _0x4d98a2=Cesium['Cartesian3'][_0x36a178(-0x154,-0x184)](_0x1173fc,_0x1d6ac1,_0x52ba4d??this[_0xc3ca15(0x23c,0x299)]);function _0x36a178(_0x40c323,_0x52c560){return _0xce198e(_0x40c323- -0x20,_0x52c560);}const _0x39b8c5=this['_map']['scene'];function _0xc3ca15(_0x259ddc,_0x2bc792){return _0xce198e(_0x2bc792-0x36a,_0x259ddc);}if(_0x39b8c5[_0xc3ca15(0x287,0x230)]===Cesium['SceneMode']['SCENE3D']){const _0x183dcd=new Cesium['EllipsoidalOccluder'](_0x39b8c5['globe']['ellipsoid'],_0x39b8c5[_0x36a178(-0x1cc,-0x20a)]['positionWC']),_0x39d64c=_0x183dcd['isPointVisible'](_0x4d98a2);if(!_0x39d64c)return _0x560180['age']=0x0,null;}const _0x401f49=mars3d__namespace[_0x36a178(-0xf5,-0x132)]['toWindowCoordinates'](this['_map'][_0xc3ca15(0x1bc,0x1c8)],_0x4d98a2);return _0x401f49?[_0x401f49['x'],_0x401f49['y']]:null;}[_0x44537b(0x97,0xd1)](){this['windField']['clear'](),delete this['windData'];}[_0x44537b(0x33,0x9c)](){this['worker']=new Worker(this[_0x2aa6d8(0x1f1,0x23c)]['worker']);function _0x45365e(_0x351aa1,_0x292ec1){return _0x44537b(_0x292ec1,_0x351aa1- -0x1a);}this[_0x45365e(0xcb,0x61)]['onmessage']=_0xd77f4c=>{this[_0x427b1b(0x1ca,0x1a5)](_0xd77f4c['data']['particles']);function _0x427b1b(_0x2cb40e,_0x1e18f9){return _0x45365e(_0x1e18f9-0x12f,_0x2cb40e);}this['_updateIng2']=![];},this['windField']={'init':_0x4fc2f2=>{function _0x5ba19c(_0x2c3682,_0x231c00){return _0x45365e(_0x2c3682-0x50f,_0x231c00);}const _0x3c9688={};function _0x413bcf(_0x41fb0c,_0x47e6e7){return _0x2aa6d8(_0x47e6e7,_0x41fb0c- -0x2e1);}_0x3c9688['type']='init',_0x3c9688['options']=_0x4fc2f2,this[_0x5ba19c(0x5da,0x5af)][_0x413bcf(-0x14f,-0x11b)](_0x3c9688);},'setOptions':_0xc04c72=>{function _0x1263de(_0x45bc98,_0x2db867){return _0x45365e(_0x45bc98-0x150,_0x2db867);}const _0x225868={};_0x225868['type']=_0x1263de(0x23d,0x26a),_0x225868['options']=_0xc04c72,this['worker']['postMessage'](_0x225868);},'setDate':_0x4da48d=>{const _0x491645={};_0x491645['type']='setDate',_0x491645['data']=_0x4da48d,this['worker']['postMessage'](_0x491645);},'update':()=>{if(this[_0x54bb07(0xf3,0xb7)])return;this['_updateIng2']=!![];function _0x12a27b(_0xe7b91c,_0x302853){return _0x2aa6d8(_0x302853,_0xe7b91c-0x46);}function _0x54bb07(_0x4b67ba,_0x13019f){return _0x2aa6d8(_0x4b67ba,_0x13019f- -0x16f);}const _0x33f6d4={};_0x33f6d4['type']='update',this[_0x54bb07(0x60,0x84)]['postMessage'](_0x33f6d4);},'clear':()=>{const _0x1c047d={};function _0x399818(_0x4d813f,_0x445cb1){return _0x45365e(_0x4d813f- -0x9b,_0x445cb1);}_0x1c047d['type']=_0x399818(0x1c,0xa3),this['worker']['postMessage'](_0x1c047d);}};function _0x2aa6d8(_0x5bcb6b,_0x2bf737){return _0x44537b(_0x5bcb6b,_0x2bf737-0x10e);}this[_0x2aa6d8(0x1e1,0x24f)][_0x2aa6d8(0x277,0x20d)](this['options']);}}mars3d__namespace[_0xce198e(-0xc3,-0x14d)][_0x44537b(0xbf,0x144)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer'][_0x44537b(0x9a,0x122)]=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['Log']['logInfo'](_0xce198e(-0x133,-0x152)),mars3d__namespace[_0x44537b(0x83,0x10a)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0xce198e(-0xb9,-0x107)]=WindLayer,exports['WindUtil']=WindUtil;const _0x399122={};_0x399122['value']=!![],Object['defineProperty'](exports,'__esModule',_0x399122);
}));
