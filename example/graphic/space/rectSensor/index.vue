<template>
  <pannel class="infoView">
    <div class="f-mb">
      <a-space>
        <span class="pannel-item-label">四棱锥体:</span>
        <a-checkbox v-model:checked="formState.enabledShowHide" @change="sensorShowHide">显示/隐藏</a-checkbox>
      </a-space>
    </div>
    <div class="f-mb">
      <a-space>
        <span class="pannel-item-label">长度:</span>
        <mars-input-number @change="sensorLength" v-model:value="lengthValue" :min="1" :max="999999999" :step="1.0"></mars-input-number>
      </a-space>
    </div>
    <div class="f-mb">
      <a-space>
        <span class="pannel-item-label">方向角:</span>
        <a-slider @change="headingChange" v-model:value="headingValue" :min="0" :max="360" :step="0.01" />值{{ headingValue }}
      </a-space>
    </div>
    <div class="f-mb">
      <a-space>
        <span class="pannel-item-label">俯仰角:</span>
        <a-slider @change="pitchChange" v-model:value="pitchValue" :min="-180" :max="180" :step="0.01" />值{{ pitchValue }}
      </a-space>
    </div>
    <div class="f-mb">
      <a-space>
        <span class="pannel-item-label">左右角:</span>
        <a-slider @change="rollChange" v-model:value="rollValue" :min="-180" :max="180" :step="0.01" />值{{ rollValue }}
      </a-space>
    </div>

    <div class="f-mb">
      <a-space>
        <span class="pannel-item-label">夹角1:</span>
        <a-slider @change="angle1" v-model:value="angleValue1" :min="0.1" :max="89" :step="0.01" />值{{ angleValue1 }}
      </a-space>
    </div>
    <div class="f-mb">
      <a-space>
        <span class="pannel-item-label">夹角2:</span>
        <a-slider @change="angle2" v-model:value="angleValue2" :min="0.1" :max="89" :step="0.01" />值{{ angleValue2 }}
      </a-space>
    </div>

    <div class="f-mb">
      <a-space>
        <span class="pannel-item-label">顶盖:</span>
        <a-checkbox @change="sensorTop" v-model:checked="formState.enabledShowModelTop">是否显示</a-checkbox>
      </a-space>
    </div>
  </pannel>
</template>

<script lang="ts" setup>
import { reactive, ref } from "vue"
import Pannel from "@/components/marsgis/pannel.vue"
import type { UnwrapRef } from "vue"
import * as mapWork from "./map.js"
interface FormState {
  enabledShowHide: boolean
  enabledShowModelTop: boolean
}

const angleValue1 = ref<number>(30) // 角度
const angleValue2 = ref<number>(30) // 角度2
const lengthValue = ref<number>(700000) // 长度（米）
const headingValue = ref<number>(0) // 方向
const pitchValue = ref<number>(40) // 仰角
const rollValue = ref<number>(0) // 左右

const formState: UnwrapRef<FormState> = reactive({
  enabledShowHide: true,
  enabledShowModelTop: true
})

mapWork.eventTarget.on("loadOk", () => {
  mapWork.addConicSensor(headingValue.value, pitchValue.value, rollValue.value, angleValue1.value, angleValue2.value, lengthValue.value)
})

// 显示/隐藏
const sensorShowHide = () => {
  mapWork.sensorShowHide(formState.enabledShowHide)
}
// 半径
const sensorLength = () => {
  mapWork.sensorLength(lengthValue.value)
}

// 方向角
const headingChange = () => {
  mapWork.headingChange(headingValue.value)
}

// 俯仰角
const pitchChange = () => {
  mapWork.pitchChange(pitchValue.value)
}

// 左右角
const rollChange = () => {
  mapWork.rollChange(rollValue.value)
}

// 夹角
const angle1 = () => {
  mapWork.angle1(angleValue1.value)
}
const angle2 = () => {
  mapWork.angle2(angleValue2.value)
}

// 顶部显示隐藏
const sensorTop = () => {
  mapWork.sensorTop(formState.enabledShowModelTop)
}
</script>
<style scoped lang="less">
.ant-slider {
  width: 110px;
}
.infoView {
  width: 284px;
}
</style>
